var qXe=Object.defineProperty;var WXe=(e,t,n)=>t in e?qXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var GXe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Vu=(e,t,n)=>WXe(e,typeof t!="symbol"?t+"":t,n);var Oxn=GXe((H_n,rae)=>{function YXe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function KXe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var TEe={exports:{}},OM={},SEe={exports:{}},mr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U3=Symbol.for("react.element"),XXe=Symbol.for("react.portal"),QXe=Symbol.for("react.fragment"),JXe=Symbol.for("react.strict_mode"),ZXe=Symbol.for("react.profiler"),eQe=Symbol.for("react.provider"),tQe=Symbol.for("react.context"),nQe=Symbol.for("react.forward_ref"),rQe=Symbol.for("react.suspense"),iQe=Symbol.for("react.memo"),sQe=Symbol.for("react.lazy"),Jce=Symbol.iterator;function oQe(e){return e===null||typeof e!="object"?null:(e=Jce&&e[Jce]||e["@@iterator"],typeof e=="function"?e:null)}var CEe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AEe=Object.assign,IEe={};function mS(e,t,n){this.props=e,this.context=t,this.refs=IEe,this.updater=n||CEe}mS.prototype.isReactComponent={};mS.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mS.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kEe(){}kEe.prototype=mS.prototype;function vX(e,t,n){this.props=e,this.context=t,this.refs=IEe,this.updater=n||CEe}var bX=vX.prototype=new kEe;bX.constructor=vX;AEe(bX,mS.prototype);bX.isPureReactComponent=!0;var Zce=Array.isArray,REe=Object.prototype.hasOwnProperty,xX={current:null},PEe={key:!0,ref:!0,__self:!0,__source:!0};function DEe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)REe.call(t,r)&&!PEe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:U3,type:e,key:s,ref:o,props:i,_owner:xX.current}}function aQe(e,t){return{$$typeof:U3,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _X(e){return typeof e=="object"&&e!==null&&e.$$typeof===U3}function uQe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var efe=/\/+/g;function ej(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uQe(""+e.key):t.toString(36)}function T4(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case U3:case XXe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+ej(o,0):r,Zce(i)?(n="",e!=null&&(n=e.replace(efe,"$&/")+"/"),T4(i,t,n,"",function(l){return l})):i!=null&&(_X(i)&&(i=aQe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(efe,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Zce(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+ej(s,a);o+=T4(s,t,n,u,i)}else if(u=oQe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+ej(s,a++),o+=T4(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function IN(e,t,n){if(e==null)return e;var r=[],i=0;return T4(e,r,"","",function(s){return t.call(n,s,i++)}),r}function lQe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xl={current:null},S4={transition:null},cQe={ReactCurrentDispatcher:xl,ReactCurrentBatchConfig:S4,ReactCurrentOwner:xX};function NEe(){throw Error("act(...) is not supported in production builds of React.")}mr.Children={map:IN,forEach:function(e,t,n){IN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return IN(e,function(){t++}),t},toArray:function(e){return IN(e,function(t){return t})||[]},only:function(e){if(!_X(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mr.Component=mS;mr.Fragment=QXe;mr.Profiler=ZXe;mr.PureComponent=vX;mr.StrictMode=JXe;mr.Suspense=rQe;mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cQe;mr.act=NEe;mr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=AEe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=xX.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)REe.call(t,u)&&!PEe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:U3,type:e.type,key:i,ref:s,props:r,_owner:o}};mr.createContext=function(e){return e={$$typeof:tQe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eQe,_context:e},e.Consumer=e};mr.createElement=DEe;mr.createFactory=function(e){var t=DEe.bind(null,e);return t.type=e,t};mr.createRef=function(){return{current:null}};mr.forwardRef=function(e){return{$$typeof:nQe,render:e}};mr.isValidElement=_X;mr.lazy=function(e){return{$$typeof:sQe,_payload:{_status:-1,_result:e},_init:lQe}};mr.memo=function(e,t){return{$$typeof:iQe,type:e,compare:t===void 0?null:t}};mr.startTransition=function(e){var t=S4.transition;S4.transition={};try{e()}finally{S4.transition=t}};mr.unstable_act=NEe;mr.useCallback=function(e,t){return xl.current.useCallback(e,t)};mr.useContext=function(e){return xl.current.useContext(e)};mr.useDebugValue=function(){};mr.useDeferredValue=function(e){return xl.current.useDeferredValue(e)};mr.useEffect=function(e,t){return xl.current.useEffect(e,t)};mr.useId=function(){return xl.current.useId()};mr.useImperativeHandle=function(e,t,n){return xl.current.useImperativeHandle(e,t,n)};mr.useInsertionEffect=function(e,t){return xl.current.useInsertionEffect(e,t)};mr.useLayoutEffect=function(e,t){return xl.current.useLayoutEffect(e,t)};mr.useMemo=function(e,t){return xl.current.useMemo(e,t)};mr.useReducer=function(e,t,n){return xl.current.useReducer(e,t,n)};mr.useRef=function(e){return xl.current.useRef(e)};mr.useState=function(e){return xl.current.useState(e)};mr.useSyncExternalStore=function(e,t,n){return xl.current.useSyncExternalStore(e,t,n)};mr.useTransition=function(){return xl.current.useTransition()};mr.version="18.3.1";SEe.exports=mr;var P=SEe.exports;const ni=zh(P),q6=YXe({__proto__:null,default:ni},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fQe=P,dQe=Symbol.for("react.element"),hQe=Symbol.for("react.fragment"),pQe=Object.prototype.hasOwnProperty,mQe=fQe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gQe={key:!0,ref:!0,__self:!0,__source:!0};function OEe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)pQe.call(t,r)&&!gQe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:dQe,type:e,key:s,ref:o,props:i,_owner:mQe.current}}OM.Fragment=hQe;OM.jsx=OEe;OM.jsxs=OEe;TEe.exports=OM;var w=TEe.exports,DH={},$Ee={exports:{}},wf={},LEe={exports:{}},MEe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,J){var F=K.length;K.push(J);e:for(;0<F;){var j=F-1>>>1,W=K[j];if(0<i(W,J))K[j]=J,K[F]=W,F=j;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var J=K[0],F=K.pop();if(F!==J){K[0]=F;e:for(var j=0,W=K.length,M=W>>>1;j<M;){var V=2*(j+1)-1,Q=K[V],se=V+1,be=K[se];if(0>i(Q,F))se<W&&0>i(be,Q)?(K[j]=be,K[se]=F,j=se):(K[j]=Q,K[V]=F,j=V);else if(se<W&&0>i(be,F))K[j]=be,K[se]=F,j=se;else break e}}return J}function i(K,J){var F=K.sortIndex-J.sortIndex;return F!==0?F:K.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var J=n(l);J!==null;){if(J.callback===null)r(l);else if(J.startTime<=K)r(l),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(l)}}function _(K){if(m=!1,b(K),!p)if(n(u)!==null)p=!0,H(E);else{var J=n(l);J!==null&&G(_,J.startTime-K)}}function E(K,J){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var F=d;try{for(b(J),f=n(u);f!==null&&(!(f.expirationTime>J)||K&&!N());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var W=j(f.expirationTime<=J);J=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(J)}else r(u);f=n(u)}if(f!==null)var M=!0;else{var V=n(l);V!==null&&G(_,V.startTime-J),M=!1}return M}finally{f=null,d=F,h=!1}}var S=!1,C=null,A=-1,R=5,k=-1;function N(){return!(e.unstable_now()-k<R)}function L(){if(C!==null){var K=e.unstable_now();k=K;var J=!0;try{J=C(!0,K)}finally{J?O():(S=!1,C=null)}}else S=!1}var O;if(typeof v=="function")O=function(){v(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=L,O=function(){q.postMessage(null)}}else O=function(){g(L,0)};function H(K){C=K,S||(S=!0,O())}function G(K,J){A=g(function(){K(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,H(E))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var F=d;d=J;try{return K()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var F=d;d=K;try{return J()}finally{d=F}},e.unstable_scheduleCallback=function(K,J,F){var j=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?j+F:j):F=j,K){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,K={id:c++,callback:J,priorityLevel:K,startTime:F,expirationTime:W,sortIndex:-1},F>j?(K.sortIndex=F,t(l,K),n(u)===null&&K===n(l)&&(m?(y(A),A=-1):m=!0,G(_,F-j))):(K.sortIndex=W,t(u,K),p||h||(p=!0,H(E))),K},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(K){var J=d;return function(){var F=d;d=J;try{return K.apply(this,arguments)}finally{d=F}}}})(MEe);LEe.exports=MEe;var yQe=LEe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vQe=P,af=yQe;function bt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FEe=new Set,Yk={};function $_(e,t){K2(e,t),K2(e+"Capture",t)}function K2(e,t){for(Yk[e]=t,e=0;e<t.length;e++)FEe.add(t[e])}var ag=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NH=Object.prototype.hasOwnProperty,bQe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tfe={},nfe={};function xQe(e){return NH.call(nfe,e)?!0:NH.call(tfe,e)?!1:bQe.test(e)?nfe[e]=!0:(tfe[e]=!0,!1)}function _Qe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wQe(e,t,n,r){if(t===null||typeof t>"u"||_Qe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _l(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Va={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Va[e]=new _l(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Va[t]=new _l(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Va[e]=new _l(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Va[e]=new _l(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Va[e]=new _l(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Va[e]=new _l(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Va[e]=new _l(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Va[e]=new _l(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Va[e]=new _l(e,5,!1,e.toLowerCase(),null,!1,!1)});var wX=/[\-:]([a-z])/g;function EX(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wX,EX);Va[t]=new _l(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wX,EX);Va[t]=new _l(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wX,EX);Va[t]=new _l(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Va[e]=new _l(e,1,!1,e.toLowerCase(),null,!1,!1)});Va.xlinkHref=new _l("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Va[e]=new _l(e,1,!1,e.toLowerCase(),null,!0,!0)});function TX(e,t,n,r){var i=Va.hasOwnProperty(t)?Va[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wQe(t,n,i,r)&&(n=null),r||i===null?xQe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $g=vQe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kN=Symbol.for("react.element"),$E=Symbol.for("react.portal"),LE=Symbol.for("react.fragment"),SX=Symbol.for("react.strict_mode"),OH=Symbol.for("react.profiler"),BEe=Symbol.for("react.provider"),jEe=Symbol.for("react.context"),CX=Symbol.for("react.forward_ref"),$H=Symbol.for("react.suspense"),LH=Symbol.for("react.suspense_list"),AX=Symbol.for("react.memo"),ky=Symbol.for("react.lazy"),UEe=Symbol.for("react.offscreen"),rfe=Symbol.iterator;function tA(e){return e===null||typeof e!="object"?null:(e=rfe&&e[rfe]||e["@@iterator"],typeof e=="function"?e:null)}var Ps=Object.assign,tj;function tI(e){if(tj===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tj=t&&t[1]||""}return`
`+tj+e}var nj=!1;function rj(e,t){if(!e||nj)return"";nj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{nj=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?tI(e):""}function EQe(e){switch(e.tag){case 5:return tI(e.type);case 16:return tI("Lazy");case 13:return tI("Suspense");case 19:return tI("SuspenseList");case 0:case 2:case 15:return e=rj(e.type,!1),e;case 11:return e=rj(e.type.render,!1),e;case 1:return e=rj(e.type,!0),e;default:return""}}function MH(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case LE:return"Fragment";case $E:return"Portal";case OH:return"Profiler";case SX:return"StrictMode";case $H:return"Suspense";case LH:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jEe:return(e.displayName||"Context")+".Consumer";case BEe:return(e._context.displayName||"Context")+".Provider";case CX:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case AX:return t=e.displayName||null,t!==null?t:MH(e.type)||"Memo";case ky:t=e._payload,e=e._init;try{return MH(e(t))}catch{}}return null}function TQe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return MH(t);case 8:return t===SX?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $1(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zEe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SQe(e){var t=zEe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function RN(e){e._valueTracker||(e._valueTracker=SQe(e))}function VEe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zEe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function W6(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function FH(e,t){var n=t.checked;return Ps({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ife(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$1(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function HEe(e,t){t=t.checked,t!=null&&TX(e,"checked",t,!1)}function BH(e,t){HEe(e,t);var n=$1(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jH(e,t.type,n):t.hasOwnProperty("defaultValue")&&jH(e,t.type,$1(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sfe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function jH(e,t,n){(t!=="number"||W6(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var nI=Array.isArray;function a2(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$1(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function UH(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(bt(91));return Ps({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ofe(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(bt(92));if(nI(n)){if(1<n.length)throw Error(bt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$1(n)}}function qEe(e,t){var n=$1(t.value),r=$1(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function afe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function WEe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zH(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?WEe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var PN,GEe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(PN=PN||document.createElement("div"),PN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=PN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kk(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var YI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CQe=["Webkit","ms","Moz","O"];Object.keys(YI).forEach(function(e){CQe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),YI[t]=YI[e]})});function YEe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||YI.hasOwnProperty(e)&&YI[e]?(""+t).trim():t+"px"}function KEe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=YEe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var AQe=Ps({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function VH(e,t){if(t){if(AQe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(bt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(bt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(bt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(bt(62))}}function HH(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qH=null;function IX(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var WH=null,u2=null,l2=null;function ufe(e){if(e=H3(e)){if(typeof WH!="function")throw Error(bt(280));var t=e.stateNode;t&&(t=BM(t),WH(e.stateNode,e.type,t))}}function XEe(e){u2?l2?l2.push(e):l2=[e]:u2=e}function QEe(){if(u2){var e=u2,t=l2;if(l2=u2=null,ufe(e),t)for(e=0;e<t.length;e++)ufe(t[e])}}function JEe(e,t){return e(t)}function ZEe(){}var ij=!1;function e2e(e,t,n){if(ij)return e(t,n);ij=!0;try{return JEe(e,t,n)}finally{ij=!1,(u2!==null||l2!==null)&&(ZEe(),QEe())}}function Xk(e,t){var n=e.stateNode;if(n===null)return null;var r=BM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(bt(231,t,typeof n));return n}var GH=!1;if(ag)try{var nA={};Object.defineProperty(nA,"passive",{get:function(){GH=!0}}),window.addEventListener("test",nA,nA),window.removeEventListener("test",nA,nA)}catch{GH=!1}function IQe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var KI=!1,G6=null,Y6=!1,YH=null,kQe={onError:function(e){KI=!0,G6=e}};function RQe(e,t,n,r,i,s,o,a,u){KI=!1,G6=null,IQe.apply(kQe,arguments)}function PQe(e,t,n,r,i,s,o,a,u){if(RQe.apply(this,arguments),KI){if(KI){var l=G6;KI=!1,G6=null}else throw Error(bt(198));Y6||(Y6=!0,YH=l)}}function L_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function t2e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lfe(e){if(L_(e)!==e)throw Error(bt(188))}function DQe(e){var t=e.alternate;if(!t){if(t=L_(e),t===null)throw Error(bt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return lfe(i),e;if(s===r)return lfe(i),t;s=s.sibling}throw Error(bt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(bt(189))}}if(n.alternate!==r)throw Error(bt(190))}if(n.tag!==3)throw Error(bt(188));return n.stateNode.current===n?e:t}function n2e(e){return e=DQe(e),e!==null?r2e(e):null}function r2e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=r2e(e);if(t!==null)return t;e=e.sibling}return null}var i2e=af.unstable_scheduleCallback,cfe=af.unstable_cancelCallback,NQe=af.unstable_shouldYield,OQe=af.unstable_requestPaint,ro=af.unstable_now,$Qe=af.unstable_getCurrentPriorityLevel,kX=af.unstable_ImmediatePriority,s2e=af.unstable_UserBlockingPriority,K6=af.unstable_NormalPriority,LQe=af.unstable_LowPriority,o2e=af.unstable_IdlePriority,$M=null,Wp=null;function MQe(e){if(Wp&&typeof Wp.onCommitFiberRoot=="function")try{Wp.onCommitFiberRoot($M,e,void 0,(e.current.flags&128)===128)}catch{}}var xh=Math.clz32?Math.clz32:jQe,FQe=Math.log,BQe=Math.LN2;function jQe(e){return e>>>=0,e===0?32:31-(FQe(e)/BQe|0)|0}var DN=64,NN=4194304;function rI(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function X6(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=rI(a):(s&=o,s!==0&&(r=rI(s)))}else o=n&~i,o!==0?r=rI(o):s!==0&&(r=rI(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xh(t),i=1<<n,r|=e[n],t&=~i;return r}function UQe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zQe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-xh(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=UQe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function KH(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function a2e(){var e=DN;return DN<<=1,!(DN&4194240)&&(DN=64),e}function sj(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function z3(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xh(t),e[t]=n}function VQe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-xh(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function RX(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xh(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ai=0;function u2e(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var l2e,PX,c2e,f2e,d2e,XH=!1,ON=[],f1=null,d1=null,h1=null,Qk=new Map,Jk=new Map,By=[],HQe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ffe(e,t){switch(e){case"focusin":case"focusout":f1=null;break;case"dragenter":case"dragleave":d1=null;break;case"mouseover":case"mouseout":h1=null;break;case"pointerover":case"pointerout":Qk.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jk.delete(t.pointerId)}}function rA(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=H3(t),t!==null&&PX(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function qQe(e,t,n,r,i){switch(t){case"focusin":return f1=rA(f1,e,t,n,r,i),!0;case"dragenter":return d1=rA(d1,e,t,n,r,i),!0;case"mouseover":return h1=rA(h1,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Qk.set(s,rA(Qk.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Jk.set(s,rA(Jk.get(s)||null,e,t,n,r,i)),!0}return!1}function h2e(e){var t=lx(e.target);if(t!==null){var n=L_(t);if(n!==null){if(t=n.tag,t===13){if(t=t2e(n),t!==null){e.blockedOn=t,d2e(e.priority,function(){c2e(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function C4(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=QH(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);qH=r,n.target.dispatchEvent(r),qH=null}else return t=H3(n),t!==null&&PX(t),e.blockedOn=n,!1;t.shift()}return!0}function dfe(e,t,n){C4(e)&&n.delete(t)}function WQe(){XH=!1,f1!==null&&C4(f1)&&(f1=null),d1!==null&&C4(d1)&&(d1=null),h1!==null&&C4(h1)&&(h1=null),Qk.forEach(dfe),Jk.forEach(dfe)}function iA(e,t){e.blockedOn===t&&(e.blockedOn=null,XH||(XH=!0,af.unstable_scheduleCallback(af.unstable_NormalPriority,WQe)))}function Zk(e){function t(i){return iA(i,e)}if(0<ON.length){iA(ON[0],e);for(var n=1;n<ON.length;n++){var r=ON[n];r.blockedOn===e&&(r.blockedOn=null)}}for(f1!==null&&iA(f1,e),d1!==null&&iA(d1,e),h1!==null&&iA(h1,e),Qk.forEach(t),Jk.forEach(t),n=0;n<By.length;n++)r=By[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<By.length&&(n=By[0],n.blockedOn===null);)h2e(n),n.blockedOn===null&&By.shift()}var c2=$g.ReactCurrentBatchConfig,Q6=!0;function GQe(e,t,n,r){var i=Ai,s=c2.transition;c2.transition=null;try{Ai=1,DX(e,t,n,r)}finally{Ai=i,c2.transition=s}}function YQe(e,t,n,r){var i=Ai,s=c2.transition;c2.transition=null;try{Ai=4,DX(e,t,n,r)}finally{Ai=i,c2.transition=s}}function DX(e,t,n,r){if(Q6){var i=QH(e,t,n,r);if(i===null)mj(e,t,r,J6,n),ffe(e,r);else if(qQe(i,e,t,n,r))r.stopPropagation();else if(ffe(e,r),t&4&&-1<HQe.indexOf(e)){for(;i!==null;){var s=H3(i);if(s!==null&&l2e(s),s=QH(e,t,n,r),s===null&&mj(e,t,r,J6,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else mj(e,t,r,null,n)}}var J6=null;function QH(e,t,n,r){if(J6=null,e=IX(r),e=lx(e),e!==null)if(t=L_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=t2e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return J6=e,null}function p2e(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($Qe()){case kX:return 1;case s2e:return 4;case K6:case LQe:return 16;case o2e:return 536870912;default:return 16}default:return 16}}var Xy=null,NX=null,A4=null;function m2e(){if(A4)return A4;var e,t=NX,n=t.length,r,i="value"in Xy?Xy.value:Xy.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return A4=i.slice(e,1<r?1-r:void 0)}function I4(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $N(){return!0}function hfe(){return!1}function Ef(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$N:hfe,this.isPropagationStopped=hfe,this}return Ps(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$N)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$N)},persist:function(){},isPersistent:$N}),t}var gS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},OX=Ef(gS),V3=Ps({},gS,{view:0,detail:0}),KQe=Ef(V3),oj,aj,sA,LM=Ps({},V3,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$X,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sA&&(sA&&e.type==="mousemove"?(oj=e.screenX-sA.screenX,aj=e.screenY-sA.screenY):aj=oj=0,sA=e),oj)},movementY:function(e){return"movementY"in e?e.movementY:aj}}),pfe=Ef(LM),XQe=Ps({},LM,{dataTransfer:0}),QQe=Ef(XQe),JQe=Ps({},V3,{relatedTarget:0}),uj=Ef(JQe),ZQe=Ps({},gS,{animationName:0,elapsedTime:0,pseudoElement:0}),eJe=Ef(ZQe),tJe=Ps({},gS,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nJe=Ef(tJe),rJe=Ps({},gS,{data:0}),mfe=Ef(rJe),iJe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sJe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oJe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aJe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oJe[e])?!!t[e]:!1}function $X(){return aJe}var uJe=Ps({},V3,{key:function(e){if(e.key){var t=iJe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=I4(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sJe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$X,charCode:function(e){return e.type==="keypress"?I4(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?I4(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lJe=Ef(uJe),cJe=Ps({},LM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gfe=Ef(cJe),fJe=Ps({},V3,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$X}),dJe=Ef(fJe),hJe=Ps({},gS,{propertyName:0,elapsedTime:0,pseudoElement:0}),pJe=Ef(hJe),mJe=Ps({},LM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gJe=Ef(mJe),yJe=[9,13,27,32],LX=ag&&"CompositionEvent"in window,XI=null;ag&&"documentMode"in document&&(XI=document.documentMode);var vJe=ag&&"TextEvent"in window&&!XI,g2e=ag&&(!LX||XI&&8<XI&&11>=XI),yfe=" ",vfe=!1;function y2e(e,t){switch(e){case"keyup":return yJe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v2e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ME=!1;function bJe(e,t){switch(e){case"compositionend":return v2e(t);case"keypress":return t.which!==32?null:(vfe=!0,yfe);case"textInput":return e=t.data,e===yfe&&vfe?null:e;default:return null}}function xJe(e,t){if(ME)return e==="compositionend"||!LX&&y2e(e,t)?(e=m2e(),A4=NX=Xy=null,ME=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return g2e&&t.locale!=="ko"?null:t.data;default:return null}}var _Je={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bfe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_Je[e.type]:t==="textarea"}function b2e(e,t,n,r){XEe(r),t=Z6(t,"onChange"),0<t.length&&(n=new OX("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var QI=null,eR=null;function wJe(e){R2e(e,0)}function MM(e){var t=jE(e);if(VEe(t))return e}function EJe(e,t){if(e==="change")return t}var x2e=!1;if(ag){var lj;if(ag){var cj="oninput"in document;if(!cj){var xfe=document.createElement("div");xfe.setAttribute("oninput","return;"),cj=typeof xfe.oninput=="function"}lj=cj}else lj=!1;x2e=lj&&(!document.documentMode||9<document.documentMode)}function _fe(){QI&&(QI.detachEvent("onpropertychange",_2e),eR=QI=null)}function _2e(e){if(e.propertyName==="value"&&MM(eR)){var t=[];b2e(t,eR,e,IX(e)),e2e(wJe,t)}}function TJe(e,t,n){e==="focusin"?(_fe(),QI=t,eR=n,QI.attachEvent("onpropertychange",_2e)):e==="focusout"&&_fe()}function SJe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return MM(eR)}function CJe(e,t){if(e==="click")return MM(t)}function AJe(e,t){if(e==="input"||e==="change")return MM(t)}function IJe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rh=typeof Object.is=="function"?Object.is:IJe;function tR(e,t){if(Rh(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!NH.call(t,i)||!Rh(e[i],t[i]))return!1}return!0}function wfe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Efe(e,t){var n=wfe(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wfe(n)}}function w2e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?w2e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E2e(){for(var e=window,t=W6();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=W6(e.document)}return t}function MX(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kJe(e){var t=E2e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&w2e(n.ownerDocument.documentElement,n)){if(r!==null&&MX(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Efe(n,s);var o=Efe(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RJe=ag&&"documentMode"in document&&11>=document.documentMode,FE=null,JH=null,JI=null,ZH=!1;function Tfe(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ZH||FE==null||FE!==W6(r)||(r=FE,"selectionStart"in r&&MX(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),JI&&tR(JI,r)||(JI=r,r=Z6(JH,"onSelect"),0<r.length&&(t=new OX("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=FE)))}function LN(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var BE={animationend:LN("Animation","AnimationEnd"),animationiteration:LN("Animation","AnimationIteration"),animationstart:LN("Animation","AnimationStart"),transitionend:LN("Transition","TransitionEnd")},fj={},T2e={};ag&&(T2e=document.createElement("div").style,"AnimationEvent"in window||(delete BE.animationend.animation,delete BE.animationiteration.animation,delete BE.animationstart.animation),"TransitionEvent"in window||delete BE.transitionend.transition);function FM(e){if(fj[e])return fj[e];if(!BE[e])return e;var t=BE[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in T2e)return fj[e]=t[n];return e}var S2e=FM("animationend"),C2e=FM("animationiteration"),A2e=FM("animationstart"),I2e=FM("transitionend"),k2e=new Map,Sfe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wv(e,t){k2e.set(e,t),$_(t,[e])}for(var dj=0;dj<Sfe.length;dj++){var hj=Sfe[dj],PJe=hj.toLowerCase(),DJe=hj[0].toUpperCase()+hj.slice(1);wv(PJe,"on"+DJe)}wv(S2e,"onAnimationEnd");wv(C2e,"onAnimationIteration");wv(A2e,"onAnimationStart");wv("dblclick","onDoubleClick");wv("focusin","onFocus");wv("focusout","onBlur");wv(I2e,"onTransitionEnd");K2("onMouseEnter",["mouseout","mouseover"]);K2("onMouseLeave",["mouseout","mouseover"]);K2("onPointerEnter",["pointerout","pointerover"]);K2("onPointerLeave",["pointerout","pointerover"]);$_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$_("onBeforeInput",["compositionend","keypress","textInput","paste"]);$_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NJe=new Set("cancel close invalid load scroll toggle".split(" ").concat(iI));function Cfe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,PQe(r,t,void 0,e),e.currentTarget=null}function R2e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Cfe(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Cfe(i,a,l),s=u}}}if(Y6)throw e=YH,Y6=!1,YH=null,e}function ss(e,t){var n=t[iq];n===void 0&&(n=t[iq]=new Set);var r=e+"__bubble";n.has(r)||(P2e(t,e,2,!1),n.add(r))}function pj(e,t,n){var r=0;t&&(r|=4),P2e(n,e,r,t)}var MN="_reactListening"+Math.random().toString(36).slice(2);function nR(e){if(!e[MN]){e[MN]=!0,FEe.forEach(function(n){n!=="selectionchange"&&(NJe.has(n)||pj(n,!1,e),pj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[MN]||(t[MN]=!0,pj("selectionchange",!1,t))}}function P2e(e,t,n,r){switch(p2e(t)){case 1:var i=GQe;break;case 4:i=YQe;break;default:i=DX}n=i.bind(null,t,n,e),i=void 0,!GH||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function mj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=lx(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}e2e(function(){var l=s,c=IX(n),f=[];e:{var d=k2e.get(e);if(d!==void 0){var h=OX,p=e;switch(e){case"keypress":if(I4(n)===0)break e;case"keydown":case"keyup":h=lJe;break;case"focusin":p="focus",h=uj;break;case"focusout":p="blur",h=uj;break;case"beforeblur":case"afterblur":h=uj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=pfe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=QQe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=dJe;break;case S2e:case C2e:case A2e:h=eJe;break;case I2e:h=pJe;break;case"scroll":h=KQe;break;case"wheel":h=gJe;break;case"copy":case"cut":case"paste":h=nJe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=gfe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=Xk(v,y),_!=null&&m.push(rR(v,_,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==qH&&(p=n.relatedTarget||n.fromElement)&&(lx(p)||p[ug]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?lx(p):null,p!==null&&(g=L_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=pfe,_="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=gfe,_="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:jE(h),b=p==null?d:jE(p),d=new m(_,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,_=null,lx(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,_=m),g=_,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Hw(b))v++;for(b=0,_=y;_;_=Hw(_))b++;for(;0<v-b;)m=Hw(m),v--;for(;0<b-v;)y=Hw(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Hw(m),y=Hw(y)}m=null}else m=null;h!==null&&Afe(f,d,h,m,!1),p!==null&&g!==null&&Afe(f,g,p,m,!0)}}e:{if(d=l?jE(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=EJe;else if(bfe(d))if(x2e)E=AJe;else{E=SJe;var S=TJe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=CJe);if(E&&(E=E(e,l))){b2e(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&jH(d,"number",d.value)}switch(S=l?jE(l):window,e){case"focusin":(bfe(S)||S.contentEditable==="true")&&(FE=S,JH=l,JI=null);break;case"focusout":JI=JH=FE=null;break;case"mousedown":ZH=!0;break;case"contextmenu":case"mouseup":case"dragend":ZH=!1,Tfe(f,n,c);break;case"selectionchange":if(RJe)break;case"keydown":case"keyup":Tfe(f,n,c)}var C;if(LX)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ME?y2e(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(g2e&&n.locale!=="ko"&&(ME||A!=="onCompositionStart"?A==="onCompositionEnd"&&ME&&(C=m2e()):(Xy=c,NX="value"in Xy?Xy.value:Xy.textContent,ME=!0)),S=Z6(l,A),0<S.length&&(A=new mfe(A,e,null,n,c),f.push({event:A,listeners:S}),C?A.data=C:(C=v2e(n),C!==null&&(A.data=C)))),(C=vJe?bJe(e,n):xJe(e,n))&&(l=Z6(l,"onBeforeInput"),0<l.length&&(c=new mfe("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=C))}R2e(f,t)})}function rR(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Z6(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xk(e,n),s!=null&&r.unshift(rR(e,s,i)),s=Xk(e,t),s!=null&&r.push(rR(e,s,i))),e=e.return}return r}function Hw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Afe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=Xk(n,s),u!=null&&o.unshift(rR(n,u,a))):i||(u=Xk(n,s),u!=null&&o.push(rR(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var OJe=/\r\n?/g,$Je=/\u0000|\uFFFD/g;function Ife(e){return(typeof e=="string"?e:""+e).replace(OJe,`
`).replace($Je,"")}function FN(e,t,n){if(t=Ife(t),Ife(e)!==t&&n)throw Error(bt(425))}function e$(){}var eq=null,tq=null;function nq(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rq=typeof setTimeout=="function"?setTimeout:void 0,LJe=typeof clearTimeout=="function"?clearTimeout:void 0,kfe=typeof Promise=="function"?Promise:void 0,MJe=typeof queueMicrotask=="function"?queueMicrotask:typeof kfe<"u"?function(e){return kfe.resolve(null).then(e).catch(FJe)}:rq;function FJe(e){setTimeout(function(){throw e})}function gj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Zk(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Zk(t)}function p1(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Rfe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var yS=Math.random().toString(36).slice(2),Cp="__reactFiber$"+yS,iR="__reactProps$"+yS,ug="__reactContainer$"+yS,iq="__reactEvents$"+yS,BJe="__reactListeners$"+yS,jJe="__reactHandles$"+yS;function lx(e){var t=e[Cp];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ug]||n[Cp]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Rfe(e);e!==null;){if(n=e[Cp])return n;e=Rfe(e)}return t}e=n,n=e.parentNode}return null}function H3(e){return e=e[Cp]||e[ug],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jE(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(bt(33))}function BM(e){return e[iR]||null}var sq=[],UE=-1;function Ev(e){return{current:e}}function fs(e){0>UE||(e.current=sq[UE],sq[UE]=null,UE--)}function Xi(e,t){UE++,sq[UE]=e.current,e.current=t}var L1={},Iu=Ev(L1),rc=Ev(!1),qx=L1;function X2(e,t){var n=e.type.contextTypes;if(!n)return L1;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ic(e){return e=e.childContextTypes,e!=null}function t$(){fs(rc),fs(Iu)}function Pfe(e,t,n){if(Iu.current!==L1)throw Error(bt(168));Xi(Iu,t),Xi(rc,n)}function D2e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(bt(108,TQe(e)||"Unknown",i));return Ps({},n,r)}function n$(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||L1,qx=Iu.current,Xi(Iu,e),Xi(rc,rc.current),!0}function Dfe(e,t,n){var r=e.stateNode;if(!r)throw Error(bt(169));n?(e=D2e(e,t,qx),r.__reactInternalMemoizedMergedChildContext=e,fs(rc),fs(Iu),Xi(Iu,e)):fs(rc),Xi(rc,n)}var x0=null,jM=!1,yj=!1;function N2e(e){x0===null?x0=[e]:x0.push(e)}function UJe(e){jM=!0,N2e(e)}function Tv(){if(!yj&&x0!==null){yj=!0;var e=0,t=Ai;try{var n=x0;for(Ai=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}x0=null,jM=!1}catch(i){throw x0!==null&&(x0=x0.slice(e+1)),i2e(kX,Tv),i}finally{Ai=t,yj=!1}}return null}var zE=[],VE=0,r$=null,i$=0,Hf=[],qf=0,Wx=null,D0=1,N0="";function Nb(e,t){zE[VE++]=i$,zE[VE++]=r$,r$=e,i$=t}function O2e(e,t,n){Hf[qf++]=D0,Hf[qf++]=N0,Hf[qf++]=Wx,Wx=e;var r=D0;e=N0;var i=32-xh(r)-1;r&=~(1<<i),n+=1;var s=32-xh(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,D0=1<<32-xh(t)+i|n<<i|r,N0=s+e}else D0=1<<s|n<<i|r,N0=e}function FX(e){e.return!==null&&(Nb(e,1),O2e(e,1,0))}function BX(e){for(;e===r$;)r$=zE[--VE],zE[VE]=null,i$=zE[--VE],zE[VE]=null;for(;e===Wx;)Wx=Hf[--qf],Hf[qf]=null,N0=Hf[--qf],Hf[qf]=null,D0=Hf[--qf],Hf[qf]=null}var ef=null,Wc=null,ws=!1,nh=null;function $2e(e,t){var n=Jf(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Nfe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ef=e,Wc=p1(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ef=e,Wc=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Wx!==null?{id:D0,overflow:N0}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Jf(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ef=e,Wc=null,!0):!1;default:return!1}}function oq(e){return(e.mode&1)!==0&&(e.flags&128)===0}function aq(e){if(ws){var t=Wc;if(t){var n=t;if(!Nfe(e,t)){if(oq(e))throw Error(bt(418));t=p1(n.nextSibling);var r=ef;t&&Nfe(e,t)?$2e(r,n):(e.flags=e.flags&-4097|2,ws=!1,ef=e)}}else{if(oq(e))throw Error(bt(418));e.flags=e.flags&-4097|2,ws=!1,ef=e}}}function Ofe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ef=e}function BN(e){if(e!==ef)return!1;if(!ws)return Ofe(e),ws=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nq(e.type,e.memoizedProps)),t&&(t=Wc)){if(oq(e))throw L2e(),Error(bt(418));for(;t;)$2e(e,t),t=p1(t.nextSibling)}if(Ofe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(bt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wc=p1(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wc=null}}else Wc=ef?p1(e.stateNode.nextSibling):null;return!0}function L2e(){for(var e=Wc;e;)e=p1(e.nextSibling)}function Q2(){Wc=ef=null,ws=!1}function jX(e){nh===null?nh=[e]:nh.push(e)}var zJe=$g.ReactCurrentBatchConfig;function oA(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(bt(309));var r=n.stateNode}if(!r)throw Error(bt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(bt(284));if(!n._owner)throw Error(bt(290,e))}return e}function jN(e,t){throw e=Object.prototype.toString.call(t),Error(bt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $fe(e){var t=e._init;return t(e._payload)}function M2e(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=v1(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,_){return v===null||v.tag!==6?(v=Tj(b,y.mode,_),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,_){var E=b.type;return E===LE?c(y,v,b.props.children,_,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ky&&$fe(E)===v.type)?(_=i(v,b.props),_.ref=oA(y,v,b),_.return=y,_):(_=$4(b.type,b.key,b.props,null,y.mode,_),_.ref=oA(y,v,b),_.return=y,_)}function l(y,v,b,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Sj(b,y.mode,_),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,_,E){return v===null||v.tag!==7?(v=Px(b,y.mode,_,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Tj(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case kN:return b=$4(v.type,v.key,v.props,null,y.mode,b),b.ref=oA(y,null,v),b.return=y,b;case $E:return v=Sj(v,y.mode,b),v.return=y,v;case ky:var _=v._init;return f(y,_(v._payload),b)}if(nI(v)||tA(v))return v=Px(v,y.mode,b,null),v.return=y,v;jN(y,v)}return null}function d(y,v,b,_){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case kN:return b.key===E?u(y,v,b,_):null;case $E:return b.key===E?l(y,v,b,_):null;case ky:return E=b._init,d(y,v,E(b._payload),_)}if(nI(b)||tA(b))return E!==null?null:c(y,v,b,_,null);jN(y,b)}return null}function h(y,v,b,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,a(v,y,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case kN:return y=y.get(_.key===null?b:_.key)||null,u(v,y,_,E);case $E:return y=y.get(_.key===null?b:_.key)||null,l(v,y,_,E);case ky:var S=_._init;return h(y,v,b,S(_._payload),E)}if(nI(_)||tA(_))return y=y.get(b)||null,c(v,y,_,E,null);jN(v,_)}return null}function p(y,v,b,_){for(var E=null,S=null,C=v,A=v=0,R=null;C!==null&&A<b.length;A++){C.index>A?(R=C,C=null):R=C.sibling;var k=d(y,C,b[A],_);if(k===null){C===null&&(C=R);break}e&&C&&k.alternate===null&&t(y,C),v=s(k,v,A),S===null?E=k:S.sibling=k,S=k,C=R}if(A===b.length)return n(y,C),ws&&Nb(y,A),E;if(C===null){for(;A<b.length;A++)C=f(y,b[A],_),C!==null&&(v=s(C,v,A),S===null?E=C:S.sibling=C,S=C);return ws&&Nb(y,A),E}for(C=r(y,C);A<b.length;A++)R=h(C,y,A,b[A],_),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?A:R.key),v=s(R,v,A),S===null?E=R:S.sibling=R,S=R);return e&&C.forEach(function(N){return t(y,N)}),ws&&Nb(y,A),E}function m(y,v,b,_){var E=tA(b);if(typeof E!="function")throw Error(bt(150));if(b=E.call(b),b==null)throw Error(bt(151));for(var S=E=null,C=v,A=v=0,R=null,k=b.next();C!==null&&!k.done;A++,k=b.next()){C.index>A?(R=C,C=null):R=C.sibling;var N=d(y,C,k.value,_);if(N===null){C===null&&(C=R);break}e&&C&&N.alternate===null&&t(y,C),v=s(N,v,A),S===null?E=N:S.sibling=N,S=N,C=R}if(k.done)return n(y,C),ws&&Nb(y,A),E;if(C===null){for(;!k.done;A++,k=b.next())k=f(y,k.value,_),k!==null&&(v=s(k,v,A),S===null?E=k:S.sibling=k,S=k);return ws&&Nb(y,A),E}for(C=r(y,C);!k.done;A++,k=b.next())k=h(C,y,A,k.value,_),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?A:k.key),v=s(k,v,A),S===null?E=k:S.sibling=k,S=k);return e&&C.forEach(function(L){return t(y,L)}),ws&&Nb(y,A),E}function g(y,v,b,_){if(typeof b=="object"&&b!==null&&b.type===LE&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case kN:e:{for(var E=b.key,S=v;S!==null;){if(S.key===E){if(E=b.type,E===LE){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ky&&$fe(E)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=oA(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===LE?(v=Px(b.props.children,y.mode,_,b.key),v.return=y,y=v):(_=$4(b.type,b.key,b.props,null,y.mode,_),_.ref=oA(y,v,b),_.return=y,y=_)}return o(y);case $E:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Sj(b,y.mode,_),v.return=y,y=v}return o(y);case ky:return S=b._init,g(y,v,S(b._payload),_)}if(nI(b))return p(y,v,b,_);if(tA(b))return m(y,v,b,_);jN(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=Tj(b,y.mode,_),v.return=y,y=v),o(y)):n(y,v)}return g}var J2=M2e(!0),F2e=M2e(!1),s$=Ev(null),o$=null,HE=null,UX=null;function zX(){UX=HE=o$=null}function VX(e){var t=s$.current;fs(s$),e._currentValue=t}function uq(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function f2(e,t){o$=e,UX=HE=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xl=!0),e.firstContext=null)}function od(e){var t=e._currentValue;if(UX!==e)if(e={context:e,memoizedValue:t,next:null},HE===null){if(o$===null)throw Error(bt(308));HE=e,o$.dependencies={lanes:0,firstContext:e}}else HE=HE.next=e;return t}var cx=null;function HX(e){cx===null?cx=[e]:cx.push(e)}function B2e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,HX(t)):(n.next=i.next,i.next=n),t.interleaved=n,lg(e,r)}function lg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ry=!1;function qX(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j2e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function W0(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function m1(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Kr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,lg(e,n)}return i=r.interleaved,i===null?(t.next=t,HX(r)):(t.next=i.next,i.next=t),r.interleaved=t,lg(e,n)}function k4(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,RX(e,n)}}function Lfe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function a$(e,t,n,r){var i=e.updateQueue;Ry=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ps({},f,d);break e;case 2:Ry=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Yx|=o,e.lanes=o,e.memoizedState=f}}function Mfe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(bt(191,i));i.call(r)}}}var q3={},Gp=Ev(q3),sR=Ev(q3),oR=Ev(q3);function fx(e){if(e===q3)throw Error(bt(174));return e}function WX(e,t){switch(Xi(oR,t),Xi(sR,e),Xi(Gp,q3),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zH(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zH(t,e)}fs(Gp),Xi(Gp,t)}function Z2(){fs(Gp),fs(sR),fs(oR)}function U2e(e){fx(oR.current);var t=fx(Gp.current),n=zH(t,e.type);t!==n&&(Xi(sR,e),Xi(Gp,n))}function GX(e){sR.current===e&&(fs(Gp),fs(sR))}var ks=Ev(0);function u$(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vj=[];function YX(){for(var e=0;e<vj.length;e++)vj[e]._workInProgressVersionPrimary=null;vj.length=0}var R4=$g.ReactCurrentDispatcher,bj=$g.ReactCurrentBatchConfig,Gx=0,Rs=null,Oo=null,sa=null,l$=!1,ZI=!1,aR=0,VJe=0;function eu(){throw Error(bt(321))}function KX(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rh(e[n],t[n]))return!1;return!0}function XX(e,t,n,r,i,s){if(Gx=s,Rs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R4.current=e===null||e.memoizedState===null?GJe:YJe,e=n(r,i),ZI){s=0;do{if(ZI=!1,aR=0,25<=s)throw Error(bt(301));s+=1,sa=Oo=null,t.updateQueue=null,R4.current=KJe,e=n(r,i)}while(ZI)}if(R4.current=c$,t=Oo!==null&&Oo.next!==null,Gx=0,sa=Oo=Rs=null,l$=!1,t)throw Error(bt(300));return e}function QX(){var e=aR!==0;return aR=0,e}function mp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sa===null?Rs.memoizedState=sa=e:sa=sa.next=e,sa}function ad(){if(Oo===null){var e=Rs.alternate;e=e!==null?e.memoizedState:null}else e=Oo.next;var t=sa===null?Rs.memoizedState:sa.next;if(t!==null)sa=t,Oo=e;else{if(e===null)throw Error(bt(310));Oo=e,e={memoizedState:Oo.memoizedState,baseState:Oo.baseState,baseQueue:Oo.baseQueue,queue:Oo.queue,next:null},sa===null?Rs.memoizedState=sa=e:sa=sa.next=e}return sa}function uR(e,t){return typeof t=="function"?t(e):t}function xj(e){var t=ad(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=e;var r=Oo,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Gx&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Rs.lanes|=c,Yx|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Rh(r,t.memoizedState)||(Xl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Rs.lanes|=s,Yx|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _j(e){var t=ad(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Rh(s,t.memoizedState)||(Xl=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function z2e(){}function V2e(e,t){var n=Rs,r=ad(),i=t(),s=!Rh(r.memoizedState,i);if(s&&(r.memoizedState=i,Xl=!0),r=r.queue,JX(W2e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||sa!==null&&sa.memoizedState.tag&1){if(n.flags|=2048,lR(9,q2e.bind(null,n,r,i,t),void 0,null),ma===null)throw Error(bt(349));Gx&30||H2e(n,t,i)}return i}function H2e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rs.updateQueue,t===null?(t={lastEffect:null,stores:null},Rs.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function q2e(e,t,n,r){t.value=n,t.getSnapshot=r,G2e(t)&&Y2e(e)}function W2e(e,t,n){return n(function(){G2e(t)&&Y2e(e)})}function G2e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rh(e,n)}catch{return!0}}function Y2e(e){var t=lg(e,1);t!==null&&_h(t,e,1,-1)}function Ffe(e){var t=mp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uR,lastRenderedState:e},t.queue=e,e=e.dispatch=WJe.bind(null,Rs,e),[t.memoizedState,e]}function lR(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Rs.updateQueue,t===null?(t={lastEffect:null,stores:null},Rs.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function K2e(){return ad().memoizedState}function P4(e,t,n,r){var i=mp();Rs.flags|=e,i.memoizedState=lR(1|t,n,void 0,r===void 0?null:r)}function UM(e,t,n,r){var i=ad();r=r===void 0?null:r;var s=void 0;if(Oo!==null){var o=Oo.memoizedState;if(s=o.destroy,r!==null&&KX(r,o.deps)){i.memoizedState=lR(t,n,s,r);return}}Rs.flags|=e,i.memoizedState=lR(1|t,n,s,r)}function Bfe(e,t){return P4(8390656,8,e,t)}function JX(e,t){return UM(2048,8,e,t)}function X2e(e,t){return UM(4,2,e,t)}function Q2e(e,t){return UM(4,4,e,t)}function J2e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Z2e(e,t,n){return n=n!=null?n.concat([e]):null,UM(4,4,J2e.bind(null,t,e),n)}function ZX(){}function eTe(e,t){var n=ad();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&KX(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tTe(e,t){var n=ad();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&KX(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function nTe(e,t,n){return Gx&21?(Rh(n,t)||(n=a2e(),Rs.lanes|=n,Yx|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xl=!0),e.memoizedState=n)}function HJe(e,t){var n=Ai;Ai=n!==0&&4>n?n:4,e(!0);var r=bj.transition;bj.transition={};try{e(!1),t()}finally{Ai=n,bj.transition=r}}function rTe(){return ad().memoizedState}function qJe(e,t,n){var r=y1(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iTe(e))sTe(t,n);else if(n=B2e(e,t,n,r),n!==null){var i=ol();_h(n,e,r,i),oTe(n,t,r)}}function WJe(e,t,n){var r=y1(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iTe(e))sTe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Rh(a,o)){var u=t.interleaved;u===null?(i.next=i,HX(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=B2e(e,t,i,r),n!==null&&(i=ol(),_h(n,e,r,i),oTe(n,t,r))}}function iTe(e){var t=e.alternate;return e===Rs||t!==null&&t===Rs}function sTe(e,t){ZI=l$=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oTe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,RX(e,n)}}var c$={readContext:od,useCallback:eu,useContext:eu,useEffect:eu,useImperativeHandle:eu,useInsertionEffect:eu,useLayoutEffect:eu,useMemo:eu,useReducer:eu,useRef:eu,useState:eu,useDebugValue:eu,useDeferredValue:eu,useTransition:eu,useMutableSource:eu,useSyncExternalStore:eu,useId:eu,unstable_isNewReconciler:!1},GJe={readContext:od,useCallback:function(e,t){return mp().memoizedState=[e,t===void 0?null:t],e},useContext:od,useEffect:Bfe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,P4(4194308,4,J2e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return P4(4194308,4,e,t)},useInsertionEffect:function(e,t){return P4(4,2,e,t)},useMemo:function(e,t){var n=mp();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mp();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qJe.bind(null,Rs,e),[r.memoizedState,e]},useRef:function(e){var t=mp();return e={current:e},t.memoizedState=e},useState:Ffe,useDebugValue:ZX,useDeferredValue:function(e){return mp().memoizedState=e},useTransition:function(){var e=Ffe(!1),t=e[0];return e=HJe.bind(null,e[1]),mp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Rs,i=mp();if(ws){if(n===void 0)throw Error(bt(407));n=n()}else{if(n=t(),ma===null)throw Error(bt(349));Gx&30||H2e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Bfe(W2e.bind(null,r,s,e),[e]),r.flags|=2048,lR(9,q2e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=mp(),t=ma.identifierPrefix;if(ws){var n=N0,r=D0;n=(r&~(1<<32-xh(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=aR++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VJe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},YJe={readContext:od,useCallback:eTe,useContext:od,useEffect:JX,useImperativeHandle:Z2e,useInsertionEffect:X2e,useLayoutEffect:Q2e,useMemo:tTe,useReducer:xj,useRef:K2e,useState:function(){return xj(uR)},useDebugValue:ZX,useDeferredValue:function(e){var t=ad();return nTe(t,Oo.memoizedState,e)},useTransition:function(){var e=xj(uR)[0],t=ad().memoizedState;return[e,t]},useMutableSource:z2e,useSyncExternalStore:V2e,useId:rTe,unstable_isNewReconciler:!1},KJe={readContext:od,useCallback:eTe,useContext:od,useEffect:JX,useImperativeHandle:Z2e,useInsertionEffect:X2e,useLayoutEffect:Q2e,useMemo:tTe,useReducer:_j,useRef:K2e,useState:function(){return _j(uR)},useDebugValue:ZX,useDeferredValue:function(e){var t=ad();return Oo===null?t.memoizedState=e:nTe(t,Oo.memoizedState,e)},useTransition:function(){var e=_j(uR)[0],t=ad().memoizedState;return[e,t]},useMutableSource:z2e,useSyncExternalStore:V2e,useId:rTe,unstable_isNewReconciler:!1};function Xd(e,t){if(e&&e.defaultProps){t=Ps({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function lq(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ps({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zM={isMounted:function(e){return(e=e._reactInternals)?L_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ol(),i=y1(e),s=W0(r,i);s.payload=t,n!=null&&(s.callback=n),t=m1(e,s,i),t!==null&&(_h(t,e,i,r),k4(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ol(),i=y1(e),s=W0(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=m1(e,s,i),t!==null&&(_h(t,e,i,r),k4(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ol(),r=y1(e),i=W0(n,r);i.tag=2,t!=null&&(i.callback=t),t=m1(e,i,r),t!==null&&(_h(t,e,r,n),k4(t,e,r))}};function jfe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!tR(n,r)||!tR(i,s):!0}function aTe(e,t,n){var r=!1,i=L1,s=t.contextType;return typeof s=="object"&&s!==null?s=od(s):(i=ic(t)?qx:Iu.current,r=t.contextTypes,s=(r=r!=null)?X2(e,i):L1),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ufe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zM.enqueueReplaceState(t,t.state,null)}function cq(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},qX(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=od(s):(s=ic(t)?qx:Iu.current,i.context=X2(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(lq(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&zM.enqueueReplaceState(i,i.state,null),a$(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function eT(e,t){try{var n="",r=t;do n+=EQe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function wj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function fq(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var XJe=typeof WeakMap=="function"?WeakMap:Map;function uTe(e,t,n){n=W0(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){d$||(d$=!0,_q=r),fq(e,t)},n}function lTe(e,t,n){n=W0(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fq(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fq(e,t),typeof r!="function"&&(g1===null?g1=new Set([this]):g1.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function zfe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new XJe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=cZe.bind(null,e,t,n),t.then(e,e))}function Vfe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hfe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=W0(-1,1),t.tag=2,m1(n,t,1))),n.lanes|=1),e)}var QJe=$g.ReactCurrentOwner,Xl=!1;function Ku(e,t,n,r){t.child=e===null?F2e(t,null,n,r):J2(t,e.child,n,r)}function qfe(e,t,n,r,i){n=n.render;var s=t.ref;return f2(t,i),r=XX(e,t,n,r,s,i),n=QX(),e!==null&&!Xl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cg(e,t,i)):(ws&&n&&FX(t),t.flags|=1,Ku(e,t,r,i),t.child)}function Wfe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!aQ(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,cTe(e,t,s,r,i)):(e=$4(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:tR,n(o,r)&&e.ref===t.ref)return cg(e,t,i)}return t.flags|=1,e=v1(s,r),e.ref=t.ref,e.return=t,t.child=e}function cTe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(tR(s,r)&&e.ref===t.ref)if(Xl=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Xl=!0);else return t.lanes=e.lanes,cg(e,t,i)}return dq(e,t,n,r,i)}function fTe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xi(WE,Bc),Bc|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xi(WE,Bc),Bc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Xi(WE,Bc),Bc|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Xi(WE,Bc),Bc|=r;return Ku(e,t,i,n),t.child}function dTe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function dq(e,t,n,r,i){var s=ic(n)?qx:Iu.current;return s=X2(t,s),f2(t,i),n=XX(e,t,n,r,s,i),r=QX(),e!==null&&!Xl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cg(e,t,i)):(ws&&r&&FX(t),t.flags|=1,Ku(e,t,n,i),t.child)}function Gfe(e,t,n,r,i){if(ic(n)){var s=!0;n$(t)}else s=!1;if(f2(t,i),t.stateNode===null)D4(e,t),aTe(t,n,r),cq(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=od(l):(l=ic(n)?qx:Iu.current,l=X2(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Ufe(t,o,r,l),Ry=!1;var d=t.memoizedState;o.state=d,a$(t,r,o,i),u=t.memoizedState,a!==r||d!==u||rc.current||Ry?(typeof c=="function"&&(lq(t,n,c,r),u=t.memoizedState),(a=Ry||jfe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,j2e(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Xd(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=od(u):(u=ic(n)?qx:Iu.current,u=X2(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Ufe(t,o,r,u),Ry=!1,d=t.memoizedState,o.state=d,a$(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||rc.current||Ry?(typeof h=="function"&&(lq(t,n,h,r),p=t.memoizedState),(l=Ry||jfe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return hq(e,t,n,r,s,i)}function hq(e,t,n,r,i,s){dTe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Dfe(t,n,!1),cg(e,t,s);r=t.stateNode,QJe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=J2(t,e.child,null,s),t.child=J2(t,null,a,s)):Ku(e,t,a,s),t.memoizedState=r.state,i&&Dfe(t,n,!0),t.child}function hTe(e){var t=e.stateNode;t.pendingContext?Pfe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pfe(e,t.context,!1),WX(e,t.containerInfo)}function Yfe(e,t,n,r,i){return Q2(),jX(i),t.flags|=256,Ku(e,t,n,r),t.child}var pq={dehydrated:null,treeContext:null,retryLane:0};function mq(e){return{baseLanes:e,cachePool:null,transitions:null}}function pTe(e,t,n){var r=t.pendingProps,i=ks.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Xi(ks,i&1),e===null)return aq(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qM(o,r,0,null),e=Px(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=mq(n),t.memoizedState=pq,e):eQ(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return JJe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=v1(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=v1(a,s):(s=Px(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?mq(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=pq,r}return s=e.child,e=s.sibling,r=v1(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function eQ(e,t){return t=qM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function UN(e,t,n,r){return r!==null&&jX(r),J2(t,e.child,null,n),e=eQ(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function JJe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=wj(Error(bt(422))),UN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=qM({mode:"visible",children:r.children},i,0,null),s=Px(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&J2(t,e.child,null,o),t.child.memoizedState=mq(o),t.memoizedState=pq,s);if(!(t.mode&1))return UN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(bt(419)),r=wj(s,r,void 0),UN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Xl||a){if(r=ma,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,lg(e,i),_h(r,e,i,-1))}return oQ(),r=wj(Error(bt(421))),UN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=fZe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Wc=p1(i.nextSibling),ef=t,ws=!0,nh=null,e!==null&&(Hf[qf++]=D0,Hf[qf++]=N0,Hf[qf++]=Wx,D0=e.id,N0=e.overflow,Wx=t),t=eQ(t,r.children),t.flags|=4096,t)}function Kfe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),uq(e.return,t,n)}function Ej(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function mTe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ku(e,t,r.children,n),r=ks.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kfe(e,n,t);else if(e.tag===19)Kfe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Xi(ks,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&u$(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ej(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&u$(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ej(t,!0,n,null,s);break;case"together":Ej(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function D4(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cg(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yx|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(bt(153));if(t.child!==null){for(e=t.child,n=v1(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=v1(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ZJe(e,t,n){switch(t.tag){case 3:hTe(t),Q2();break;case 5:U2e(t);break;case 1:ic(t.type)&&n$(t);break;case 4:WX(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Xi(s$,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Xi(ks,ks.current&1),t.flags|=128,null):n&t.child.childLanes?pTe(e,t,n):(Xi(ks,ks.current&1),e=cg(e,t,n),e!==null?e.sibling:null);Xi(ks,ks.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mTe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xi(ks,ks.current),r)break;return null;case 22:case 23:return t.lanes=0,fTe(e,t,n)}return cg(e,t,n)}var gTe,gq,yTe,vTe;gTe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gq=function(){};yTe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,fx(Gp.current);var s=null;switch(n){case"input":i=FH(e,i),r=FH(e,r),s=[];break;case"select":i=Ps({},i,{value:void 0}),r=Ps({},r,{value:void 0}),s=[];break;case"textarea":i=UH(e,i),r=UH(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=e$)}VH(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Yk.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Yk.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ss("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};vTe=function(e,t,n,r){n!==r&&(t.flags|=4)};function aA(e,t){if(!ws)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tu(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function eZe(e,t,n){var r=t.pendingProps;switch(BX(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tu(t),null;case 1:return ic(t.type)&&t$(),tu(t),null;case 3:return r=t.stateNode,Z2(),fs(rc),fs(Iu),YX(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(BN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nh!==null&&(Tq(nh),nh=null))),gq(e,t),tu(t),null;case 5:GX(t);var i=fx(oR.current);if(n=t.type,e!==null&&t.stateNode!=null)yTe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(bt(166));return tu(t),null}if(e=fx(Gp.current),BN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Cp]=t,r[iR]=s,e=(t.mode&1)!==0,n){case"dialog":ss("cancel",r),ss("close",r);break;case"iframe":case"object":case"embed":ss("load",r);break;case"video":case"audio":for(i=0;i<iI.length;i++)ss(iI[i],r);break;case"source":ss("error",r);break;case"img":case"image":case"link":ss("error",r),ss("load",r);break;case"details":ss("toggle",r);break;case"input":ife(r,s),ss("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ss("invalid",r);break;case"textarea":ofe(r,s),ss("invalid",r)}VH(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&FN(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&FN(r.textContent,a,e),i=["children",""+a]):Yk.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ss("scroll",r)}switch(n){case"input":RN(r),sfe(r,s,!0);break;case"textarea":RN(r),afe(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=e$)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=WEe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Cp]=t,e[iR]=r,gTe(e,t,!1,!1),t.stateNode=e;e:{switch(o=HH(n,r),n){case"dialog":ss("cancel",e),ss("close",e),i=r;break;case"iframe":case"object":case"embed":ss("load",e),i=r;break;case"video":case"audio":for(i=0;i<iI.length;i++)ss(iI[i],e);i=r;break;case"source":ss("error",e),i=r;break;case"img":case"image":case"link":ss("error",e),ss("load",e),i=r;break;case"details":ss("toggle",e),i=r;break;case"input":ife(e,r),i=FH(e,r),ss("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ps({},r,{value:void 0}),ss("invalid",e);break;case"textarea":ofe(e,r),i=UH(e,r),ss("invalid",e);break;default:i=r}VH(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?KEe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&GEe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Kk(e,u):typeof u=="number"&&Kk(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yk.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ss("scroll",e):u!=null&&TX(e,s,u,o))}switch(n){case"input":RN(e),sfe(e,r,!1);break;case"textarea":RN(e),afe(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$1(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?a2(e,!!r.multiple,s,!1):r.defaultValue!=null&&a2(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=e$)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tu(t),null;case 6:if(e&&t.stateNode!=null)vTe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(bt(166));if(n=fx(oR.current),fx(Gp.current),BN(t)){if(r=t.stateNode,n=t.memoizedProps,r[Cp]=t,(s=r.nodeValue!==n)&&(e=ef,e!==null))switch(e.tag){case 3:FN(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&FN(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cp]=t,t.stateNode=r}return tu(t),null;case 13:if(fs(ks),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ws&&Wc!==null&&t.mode&1&&!(t.flags&128))L2e(),Q2(),t.flags|=98560,s=!1;else if(s=BN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(bt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(bt(317));s[Cp]=t}else Q2(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tu(t),s=!1}else nh!==null&&(Tq(nh),nh=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ks.current&1?jo===0&&(jo=3):oQ())),t.updateQueue!==null&&(t.flags|=4),tu(t),null);case 4:return Z2(),gq(e,t),e===null&&nR(t.stateNode.containerInfo),tu(t),null;case 10:return VX(t.type._context),tu(t),null;case 17:return ic(t.type)&&t$(),tu(t),null;case 19:if(fs(ks),s=t.memoizedState,s===null)return tu(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)aA(s,!1);else{if(jo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=u$(e),o!==null){for(t.flags|=128,aA(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Xi(ks,ks.current&1|2),t.child}e=e.sibling}s.tail!==null&&ro()>tT&&(t.flags|=128,r=!0,aA(s,!1),t.lanes=4194304)}else{if(!r)if(e=u$(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),aA(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ws)return tu(t),null}else 2*ro()-s.renderingStartTime>tT&&n!==1073741824&&(t.flags|=128,r=!0,aA(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ro(),t.sibling=null,n=ks.current,Xi(ks,r?n&1|2:n&1),t):(tu(t),null);case 22:case 23:return sQ(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bc&1073741824&&(tu(t),t.subtreeFlags&6&&(t.flags|=8192)):tu(t),null;case 24:return null;case 25:return null}throw Error(bt(156,t.tag))}function tZe(e,t){switch(BX(t),t.tag){case 1:return ic(t.type)&&t$(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Z2(),fs(rc),fs(Iu),YX(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return GX(t),null;case 13:if(fs(ks),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(bt(340));Q2()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fs(ks),null;case 4:return Z2(),null;case 10:return VX(t.type._context),null;case 22:case 23:return sQ(),null;case 24:return null;default:return null}}var zN=!1,pu=!1,nZe=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function qE(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bs(e,t,r)}else n.current=null}function yq(e,t,n){try{n()}catch(r){Bs(e,t,r)}}var Xfe=!1;function rZe(e,t){if(eq=Q6,e=E2e(),MX(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tq={focusedElem:e,selectionRange:n},Q6=!1,Vt=t;Vt!==null;)if(t=Vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Vt=e;else for(;Vt!==null;){t=Vt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Xd(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(_){Bs(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}return p=Xfe,Xfe=!1,p}function ek(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&yq(t,n,s)}i=i.next}while(i!==r)}}function VM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function vq(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bTe(e){var t=e.alternate;t!==null&&(e.alternate=null,bTe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Cp],delete t[iR],delete t[iq],delete t[BJe],delete t[jJe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xTe(e){return e.tag===5||e.tag===3||e.tag===4}function Qfe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xTe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bq(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=e$));else if(r!==4&&(e=e.child,e!==null))for(bq(e,t,n),e=e.sibling;e!==null;)bq(e,t,n),e=e.sibling}function xq(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xq(e,t,n),e=e.sibling;e!==null;)xq(e,t,n),e=e.sibling}var Ra=null,Jd=!1;function gy(e,t,n){for(n=n.child;n!==null;)_Te(e,t,n),n=n.sibling}function _Te(e,t,n){if(Wp&&typeof Wp.onCommitFiberUnmount=="function")try{Wp.onCommitFiberUnmount($M,n)}catch{}switch(n.tag){case 5:pu||qE(n,t);case 6:var r=Ra,i=Jd;Ra=null,gy(e,t,n),Ra=r,Jd=i,Ra!==null&&(Jd?(e=Ra,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ra.removeChild(n.stateNode));break;case 18:Ra!==null&&(Jd?(e=Ra,n=n.stateNode,e.nodeType===8?gj(e.parentNode,n):e.nodeType===1&&gj(e,n),Zk(e)):gj(Ra,n.stateNode));break;case 4:r=Ra,i=Jd,Ra=n.stateNode.containerInfo,Jd=!0,gy(e,t,n),Ra=r,Jd=i;break;case 0:case 11:case 14:case 15:if(!pu&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yq(n,t,o),i=i.next}while(i!==r)}gy(e,t,n);break;case 1:if(!pu&&(qE(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Bs(n,t,a)}gy(e,t,n);break;case 21:gy(e,t,n);break;case 22:n.mode&1?(pu=(r=pu)||n.memoizedState!==null,gy(e,t,n),pu=r):gy(e,t,n);break;default:gy(e,t,n)}}function Jfe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nZe),t.forEach(function(r){var i=dZe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jd(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ra=a.stateNode,Jd=!1;break e;case 3:Ra=a.stateNode.containerInfo,Jd=!0;break e;case 4:Ra=a.stateNode.containerInfo,Jd=!0;break e}a=a.return}if(Ra===null)throw Error(bt(160));_Te(s,o,i),Ra=null,Jd=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Bs(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wTe(t,e),t=t.sibling}function wTe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jd(t,e),up(e),r&4){try{ek(3,e,e.return),VM(3,e)}catch(m){Bs(e,e.return,m)}try{ek(5,e,e.return)}catch(m){Bs(e,e.return,m)}}break;case 1:jd(t,e),up(e),r&512&&n!==null&&qE(n,n.return);break;case 5:if(jd(t,e),up(e),r&512&&n!==null&&qE(n,n.return),e.flags&32){var i=e.stateNode;try{Kk(i,"")}catch(m){Bs(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&HEe(i,s),HH(a,o);var l=HH(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?KEe(i,f):c==="dangerouslySetInnerHTML"?GEe(i,f):c==="children"?Kk(i,f):TX(i,c,f,l)}switch(a){case"input":BH(i,s);break;case"textarea":qEe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?a2(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?a2(i,!!s.multiple,s.defaultValue,!0):a2(i,!!s.multiple,s.multiple?[]:"",!1))}i[iR]=s}catch(m){Bs(e,e.return,m)}}break;case 6:if(jd(t,e),up(e),r&4){if(e.stateNode===null)throw Error(bt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Bs(e,e.return,m)}}break;case 3:if(jd(t,e),up(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zk(t.containerInfo)}catch(m){Bs(e,e.return,m)}break;case 4:jd(t,e),up(e);break;case 13:jd(t,e),up(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rQ=ro())),r&4&&Jfe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(pu=(l=pu)||c,jd(t,e),pu=l):jd(t,e),up(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Vt=e,c=e.child;c!==null;){for(f=Vt=c;Vt!==null;){switch(d=Vt,h=d.child,d.tag){case 0:case 11:case 14:case 15:ek(4,d,d.return);break;case 1:qE(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Bs(r,n,m)}}break;case 5:qE(d,d.return);break;case 22:if(d.memoizedState!==null){ede(f);continue}}h!==null?(h.return=d,Vt=h):ede(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=YEe("display",o))}catch(m){Bs(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Bs(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:jd(t,e),up(e),r&4&&Jfe(e);break;case 21:break;default:jd(t,e),up(e)}}function up(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xTe(n)){var r=n;break e}n=n.return}throw Error(bt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Kk(i,""),r.flags&=-33);var s=Qfe(e);xq(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Qfe(e);bq(e,a,o);break;default:throw Error(bt(161))}}catch(u){Bs(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function iZe(e,t,n){Vt=e,ETe(e)}function ETe(e,t,n){for(var r=(e.mode&1)!==0;Vt!==null;){var i=Vt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||zN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||pu;a=zN;var l=pu;if(zN=o,(pu=u)&&!l)for(Vt=i;Vt!==null;)o=Vt,u=o.child,o.tag===22&&o.memoizedState!==null?tde(i):u!==null?(u.return=o,Vt=u):tde(i);for(;s!==null;)Vt=s,ETe(s),s=s.sibling;Vt=i,zN=a,pu=l}Zfe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Vt=s):Zfe(e)}}function Zfe(e){for(;Vt!==null;){var t=Vt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pu||VM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pu)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Xd(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Mfe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mfe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Zk(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}pu||t.flags&512&&vq(t)}catch(d){Bs(t,t.return,d)}}if(t===e){Vt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function ede(e){for(;Vt!==null;){var t=Vt;if(t===e){Vt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function tde(e){for(;Vt!==null;){var t=Vt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{VM(4,t)}catch(u){Bs(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Bs(t,i,u)}}var s=t.return;try{vq(t)}catch(u){Bs(t,s,u)}break;case 5:var o=t.return;try{vq(t)}catch(u){Bs(t,o,u)}}}catch(u){Bs(t,t.return,u)}if(t===e){Vt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Vt=a;break}Vt=t.return}}var sZe=Math.ceil,f$=$g.ReactCurrentDispatcher,tQ=$g.ReactCurrentOwner,rd=$g.ReactCurrentBatchConfig,Kr=0,ma=null,wo=null,Fa=0,Bc=0,WE=Ev(0),jo=0,cR=null,Yx=0,HM=0,nQ=0,tk=null,Vl=null,rQ=0,tT=1/0,m0=null,d$=!1,_q=null,g1=null,VN=!1,Qy=null,h$=0,nk=0,wq=null,N4=-1,O4=0;function ol(){return Kr&6?ro():N4!==-1?N4:N4=ro()}function y1(e){return e.mode&1?Kr&2&&Fa!==0?Fa&-Fa:zJe.transition!==null?(O4===0&&(O4=a2e()),O4):(e=Ai,e!==0||(e=window.event,e=e===void 0?16:p2e(e.type)),e):1}function _h(e,t,n,r){if(50<nk)throw nk=0,wq=null,Error(bt(185));z3(e,n,r),(!(Kr&2)||e!==ma)&&(e===ma&&(!(Kr&2)&&(HM|=n),jo===4&&jy(e,Fa)),sc(e,r),n===1&&Kr===0&&!(t.mode&1)&&(tT=ro()+500,jM&&Tv()))}function sc(e,t){var n=e.callbackNode;zQe(e,t);var r=X6(e,e===ma?Fa:0);if(r===0)n!==null&&cfe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cfe(n),t===1)e.tag===0?UJe(nde.bind(null,e)):N2e(nde.bind(null,e)),MJe(function(){!(Kr&6)&&Tv()}),n=null;else{switch(u2e(r)){case 1:n=kX;break;case 4:n=s2e;break;case 16:n=K6;break;case 536870912:n=o2e;break;default:n=K6}n=PTe(n,TTe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function TTe(e,t){if(N4=-1,O4=0,Kr&6)throw Error(bt(327));var n=e.callbackNode;if(d2()&&e.callbackNode!==n)return null;var r=X6(e,e===ma?Fa:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=p$(e,r);else{t=r;var i=Kr;Kr|=2;var s=CTe();(ma!==e||Fa!==t)&&(m0=null,tT=ro()+500,Rx(e,t));do try{uZe();break}catch(a){STe(e,a)}while(!0);zX(),f$.current=s,Kr=i,wo!==null?t=0:(ma=null,Fa=0,t=jo)}if(t!==0){if(t===2&&(i=KH(e),i!==0&&(r=i,t=Eq(e,i))),t===1)throw n=cR,Rx(e,0),jy(e,r),sc(e,ro()),n;if(t===6)jy(e,r);else{if(i=e.current.alternate,!(r&30)&&!oZe(i)&&(t=p$(e,r),t===2&&(s=KH(e),s!==0&&(r=s,t=Eq(e,s))),t===1))throw n=cR,Rx(e,0),jy(e,r),sc(e,ro()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(bt(345));case 2:Ob(e,Vl,m0);break;case 3:if(jy(e,r),(r&130023424)===r&&(t=rQ+500-ro(),10<t)){if(X6(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ol(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=rq(Ob.bind(null,e,Vl,m0),t);break}Ob(e,Vl,m0);break;case 4:if(jy(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-xh(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ro()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sZe(r/1960))-r,10<r){e.timeoutHandle=rq(Ob.bind(null,e,Vl,m0),r);break}Ob(e,Vl,m0);break;case 5:Ob(e,Vl,m0);break;default:throw Error(bt(329))}}}return sc(e,ro()),e.callbackNode===n?TTe.bind(null,e):null}function Eq(e,t){var n=tk;return e.current.memoizedState.isDehydrated&&(Rx(e,t).flags|=256),e=p$(e,t),e!==2&&(t=Vl,Vl=n,t!==null&&Tq(t)),e}function Tq(e){Vl===null?Vl=e:Vl.push.apply(Vl,e)}function oZe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rh(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jy(e,t){for(t&=~nQ,t&=~HM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xh(t),r=1<<n;e[n]=-1,t&=~r}}function nde(e){if(Kr&6)throw Error(bt(327));d2();var t=X6(e,0);if(!(t&1))return sc(e,ro()),null;var n=p$(e,t);if(e.tag!==0&&n===2){var r=KH(e);r!==0&&(t=r,n=Eq(e,r))}if(n===1)throw n=cR,Rx(e,0),jy(e,t),sc(e,ro()),n;if(n===6)throw Error(bt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ob(e,Vl,m0),sc(e,ro()),null}function iQ(e,t){var n=Kr;Kr|=1;try{return e(t)}finally{Kr=n,Kr===0&&(tT=ro()+500,jM&&Tv())}}function Kx(e){Qy!==null&&Qy.tag===0&&!(Kr&6)&&d2();var t=Kr;Kr|=1;var n=rd.transition,r=Ai;try{if(rd.transition=null,Ai=1,e)return e()}finally{Ai=r,rd.transition=n,Kr=t,!(Kr&6)&&Tv()}}function sQ(){Bc=WE.current,fs(WE)}function Rx(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,LJe(n)),wo!==null)for(n=wo.return;n!==null;){var r=n;switch(BX(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&t$();break;case 3:Z2(),fs(rc),fs(Iu),YX();break;case 5:GX(r);break;case 4:Z2();break;case 13:fs(ks);break;case 19:fs(ks);break;case 10:VX(r.type._context);break;case 22:case 23:sQ()}n=n.return}if(ma=e,wo=e=v1(e.current,null),Fa=Bc=t,jo=0,cR=null,nQ=HM=Yx=0,Vl=tk=null,cx!==null){for(t=0;t<cx.length;t++)if(n=cx[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}cx=null}return e}function STe(e,t){do{var n=wo;try{if(zX(),R4.current=c$,l$){for(var r=Rs.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}l$=!1}if(Gx=0,sa=Oo=Rs=null,ZI=!1,aR=0,tQ.current=null,n===null||n.return===null){jo=1,cR=t,wo=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Fa,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Vfe(o);if(h!==null){h.flags&=-257,Hfe(h,o,a,s,t),h.mode&1&&zfe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){zfe(s,l,t),oQ();break e}u=Error(bt(426))}}else if(ws&&a.mode&1){var g=Vfe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Hfe(g,o,a,s,t),jX(eT(u,a));break e}}s=u=eT(u,a),jo!==4&&(jo=2),tk===null?tk=[s]:tk.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=uTe(s,u,t);Lfe(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(g1===null||!g1.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=lTe(s,a,t);Lfe(s,_);break e}}s=s.return}while(s!==null)}ITe(n)}catch(E){t=E,wo===n&&n!==null&&(wo=n=n.return);continue}break}while(!0)}function CTe(){var e=f$.current;return f$.current=c$,e===null?c$:e}function oQ(){(jo===0||jo===3||jo===2)&&(jo=4),ma===null||!(Yx&268435455)&&!(HM&268435455)||jy(ma,Fa)}function p$(e,t){var n=Kr;Kr|=2;var r=CTe();(ma!==e||Fa!==t)&&(m0=null,Rx(e,t));do try{aZe();break}catch(i){STe(e,i)}while(!0);if(zX(),Kr=n,f$.current=r,wo!==null)throw Error(bt(261));return ma=null,Fa=0,jo}function aZe(){for(;wo!==null;)ATe(wo)}function uZe(){for(;wo!==null&&!NQe();)ATe(wo)}function ATe(e){var t=RTe(e.alternate,e,Bc);e.memoizedProps=e.pendingProps,t===null?ITe(e):wo=t,tQ.current=null}function ITe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tZe(n,t),n!==null){n.flags&=32767,wo=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jo=6,wo=null;return}}else if(n=eZe(n,t,Bc),n!==null){wo=n;return}if(t=t.sibling,t!==null){wo=t;return}wo=t=e}while(t!==null);jo===0&&(jo=5)}function Ob(e,t,n){var r=Ai,i=rd.transition;try{rd.transition=null,Ai=1,lZe(e,t,n,r)}finally{rd.transition=i,Ai=r}return null}function lZe(e,t,n,r){do d2();while(Qy!==null);if(Kr&6)throw Error(bt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(bt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(VQe(e,s),e===ma&&(wo=ma=null,Fa=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||VN||(VN=!0,PTe(K6,function(){return d2(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=rd.transition,rd.transition=null;var o=Ai;Ai=1;var a=Kr;Kr|=4,tQ.current=null,rZe(e,n),wTe(n,e),kJe(tq),Q6=!!eq,tq=eq=null,e.current=n,iZe(n),OQe(),Kr=a,Ai=o,rd.transition=s}else e.current=n;if(VN&&(VN=!1,Qy=e,h$=i),s=e.pendingLanes,s===0&&(g1=null),MQe(n.stateNode),sc(e,ro()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(d$)throw d$=!1,e=_q,_q=null,e;return h$&1&&e.tag!==0&&d2(),s=e.pendingLanes,s&1?e===wq?nk++:(nk=0,wq=e):nk=0,Tv(),null}function d2(){if(Qy!==null){var e=u2e(h$),t=rd.transition,n=Ai;try{if(rd.transition=null,Ai=16>e?16:e,Qy===null)var r=!1;else{if(e=Qy,Qy=null,h$=0,Kr&6)throw Error(bt(331));var i=Kr;for(Kr|=4,Vt=e.current;Vt!==null;){var s=Vt,o=s.child;if(Vt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Vt=l;Vt!==null;){var c=Vt;switch(c.tag){case 0:case 11:case 15:ek(8,c,s)}var f=c.child;if(f!==null)f.return=c,Vt=f;else for(;Vt!==null;){c=Vt;var d=c.sibling,h=c.return;if(bTe(c),c===l){Vt=null;break}if(d!==null){d.return=h,Vt=d;break}Vt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Vt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Vt=o;else e:for(;Vt!==null;){if(s=Vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ek(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Vt=y;break e}Vt=s.return}}var v=e.current;for(Vt=v;Vt!==null;){o=Vt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Vt=b;else e:for(o=v;Vt!==null;){if(a=Vt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:VM(9,a)}}catch(E){Bs(a,a.return,E)}if(a===o){Vt=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Vt=_;break e}Vt=a.return}}if(Kr=i,Tv(),Wp&&typeof Wp.onPostCommitFiberRoot=="function")try{Wp.onPostCommitFiberRoot($M,e)}catch{}r=!0}return r}finally{Ai=n,rd.transition=t}}return!1}function rde(e,t,n){t=eT(n,t),t=uTe(e,t,1),e=m1(e,t,1),t=ol(),e!==null&&(z3(e,1,t),sc(e,t))}function Bs(e,t,n){if(e.tag===3)rde(e,e,n);else for(;t!==null;){if(t.tag===3){rde(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(g1===null||!g1.has(r))){e=eT(n,e),e=lTe(t,e,1),t=m1(t,e,1),e=ol(),t!==null&&(z3(t,1,e),sc(t,e));break}}t=t.return}}function cZe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ol(),e.pingedLanes|=e.suspendedLanes&n,ma===e&&(Fa&n)===n&&(jo===4||jo===3&&(Fa&130023424)===Fa&&500>ro()-rQ?Rx(e,0):nQ|=n),sc(e,t)}function kTe(e,t){t===0&&(e.mode&1?(t=NN,NN<<=1,!(NN&130023424)&&(NN=4194304)):t=1);var n=ol();e=lg(e,t),e!==null&&(z3(e,t,n),sc(e,n))}function fZe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kTe(e,n)}function dZe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(bt(314))}r!==null&&r.delete(t),kTe(e,n)}var RTe;RTe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rc.current)Xl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Xl=!1,ZJe(e,t,n);Xl=!!(e.flags&131072)}else Xl=!1,ws&&t.flags&1048576&&O2e(t,i$,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;D4(e,t),e=t.pendingProps;var i=X2(t,Iu.current);f2(t,n),i=XX(null,t,r,e,i,n);var s=QX();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ic(r)?(s=!0,n$(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qX(t),i.updater=zM,t.stateNode=i,i._reactInternals=t,cq(t,r,e,n),t=hq(null,t,r,!0,s,n)):(t.tag=0,ws&&s&&FX(t),Ku(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(D4(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=pZe(r),e=Xd(r,e),i){case 0:t=dq(null,t,r,e,n);break e;case 1:t=Gfe(null,t,r,e,n);break e;case 11:t=qfe(null,t,r,e,n);break e;case 14:t=Wfe(null,t,r,Xd(r.type,e),n);break e}throw Error(bt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xd(r,i),dq(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xd(r,i),Gfe(e,t,r,i,n);case 3:e:{if(hTe(t),e===null)throw Error(bt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,j2e(e,t),a$(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=eT(Error(bt(423)),t),t=Yfe(e,t,r,n,i);break e}else if(r!==i){i=eT(Error(bt(424)),t),t=Yfe(e,t,r,n,i);break e}else for(Wc=p1(t.stateNode.containerInfo.firstChild),ef=t,ws=!0,nh=null,n=F2e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Q2(),r===i){t=cg(e,t,n);break e}Ku(e,t,r,n)}t=t.child}return t;case 5:return U2e(t),e===null&&aq(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,nq(r,i)?o=null:s!==null&&nq(r,s)&&(t.flags|=32),dTe(e,t),Ku(e,t,o,n),t.child;case 6:return e===null&&aq(t),null;case 13:return pTe(e,t,n);case 4:return WX(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=J2(t,null,r,n):Ku(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xd(r,i),qfe(e,t,r,i,n);case 7:return Ku(e,t,t.pendingProps,n),t.child;case 8:return Ku(e,t,t.pendingProps.children,n),t.child;case 12:return Ku(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Xi(s$,r._currentValue),r._currentValue=o,s!==null)if(Rh(s.value,o)){if(s.children===i.children&&!rc.current){t=cg(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=W0(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),uq(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(bt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),uq(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ku(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,f2(t,n),i=od(i),r=r(i),t.flags|=1,Ku(e,t,r,n),t.child;case 14:return r=t.type,i=Xd(r,t.pendingProps),i=Xd(r.type,i),Wfe(e,t,r,i,n);case 15:return cTe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xd(r,i),D4(e,t),t.tag=1,ic(r)?(e=!0,n$(t)):e=!1,f2(t,n),aTe(t,r,i),cq(t,r,i,n),hq(null,t,r,!0,e,n);case 19:return mTe(e,t,n);case 22:return fTe(e,t,n)}throw Error(bt(156,t.tag))};function PTe(e,t){return i2e(e,t)}function hZe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jf(e,t,n,r){return new hZe(e,t,n,r)}function aQ(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pZe(e){if(typeof e=="function")return aQ(e)?1:0;if(e!=null){if(e=e.$$typeof,e===CX)return 11;if(e===AX)return 14}return 2}function v1(e,t){var n=e.alternate;return n===null?(n=Jf(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $4(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")aQ(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case LE:return Px(n.children,i,s,t);case SX:o=8,i|=8;break;case OH:return e=Jf(12,n,t,i|2),e.elementType=OH,e.lanes=s,e;case $H:return e=Jf(13,n,t,i),e.elementType=$H,e.lanes=s,e;case LH:return e=Jf(19,n,t,i),e.elementType=LH,e.lanes=s,e;case UEe:return qM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case BEe:o=10;break e;case jEe:o=9;break e;case CX:o=11;break e;case AX:o=14;break e;case ky:o=16,r=null;break e}throw Error(bt(130,e==null?e:typeof e,""))}return t=Jf(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Px(e,t,n,r){return e=Jf(7,e,r,t),e.lanes=n,e}function qM(e,t,n,r){return e=Jf(22,e,r,t),e.elementType=UEe,e.lanes=n,e.stateNode={isHidden:!1},e}function Tj(e,t,n){return e=Jf(6,e,null,t),e.lanes=n,e}function Sj(e,t,n){return t=Jf(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mZe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sj(0),this.expirationTimes=sj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sj(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uQ(e,t,n,r,i,s,o,a,u){return e=new mZe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Jf(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qX(s),e}function gZe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$E,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function DTe(e){if(!e)return L1;e=e._reactInternals;e:{if(L_(e)!==e||e.tag!==1)throw Error(bt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ic(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(bt(171))}if(e.tag===1){var n=e.type;if(ic(n))return D2e(e,n,t)}return t}function NTe(e,t,n,r,i,s,o,a,u){return e=uQ(n,r,!0,e,i,s,o,a,u),e.context=DTe(null),n=e.current,r=ol(),i=y1(n),s=W0(r,i),s.callback=t??null,m1(n,s,i),e.current.lanes=i,z3(e,i,r),sc(e,r),e}function WM(e,t,n,r){var i=t.current,s=ol(),o=y1(i);return n=DTe(n),t.context===null?t.context=n:t.pendingContext=n,t=W0(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=m1(i,t,o),e!==null&&(_h(e,i,o,s),k4(e,i,o)),o}function m$(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ide(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lQ(e,t){ide(e,t),(e=e.alternate)&&ide(e,t)}var OTe=typeof reportError=="function"?reportError:function(e){console.error(e)};function cQ(e){this._internalRoot=e}GM.prototype.render=cQ.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(bt(409));WM(e,t,null,null)};GM.prototype.unmount=cQ.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kx(function(){WM(null,e,null,null)}),t[ug]=null}};function GM(e){this._internalRoot=e}GM.prototype.unstable_scheduleHydration=function(e){if(e){var t=f2e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<By.length&&t!==0&&t<By[n].priority;n++);By.splice(n,0,e),n===0&&h2e(e)}};function fQ(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function YM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sde(){}function yZe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=m$(o);s.call(l)}}var o=NTe(t,r,e,0,null,!1,!1,"",sde);return e._reactRootContainer=o,e[ug]=o.current,nR(e.nodeType===8?e.parentNode:e),Kx(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=m$(u);a.call(l)}}var u=uQ(e,0,!1,null,null,!1,!1,"",sde);return e._reactRootContainer=u,e[ug]=u.current,nR(e.nodeType===8?e.parentNode:e),Kx(function(){WM(t,u,n,r)}),u}function KM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=m$(o);a.call(u)}}WM(t,o,e,i)}else o=yZe(n,t,e,i,r);return m$(o)}l2e=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rI(t.pendingLanes);n!==0&&(RX(t,n|1),sc(t,ro()),!(Kr&6)&&(tT=ro()+500,Tv()))}break;case 13:Kx(function(){var r=lg(e,1);if(r!==null){var i=ol();_h(r,e,1,i)}}),lQ(e,1)}};PX=function(e){if(e.tag===13){var t=lg(e,134217728);if(t!==null){var n=ol();_h(t,e,134217728,n)}lQ(e,134217728)}};c2e=function(e){if(e.tag===13){var t=y1(e),n=lg(e,t);if(n!==null){var r=ol();_h(n,e,t,r)}lQ(e,t)}};f2e=function(){return Ai};d2e=function(e,t){var n=Ai;try{return Ai=e,t()}finally{Ai=n}};WH=function(e,t,n){switch(t){case"input":if(BH(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=BM(r);if(!i)throw Error(bt(90));VEe(r),BH(r,i)}}}break;case"textarea":qEe(e,n);break;case"select":t=n.value,t!=null&&a2(e,!!n.multiple,t,!1)}};JEe=iQ;ZEe=Kx;var vZe={usingClientEntryPoint:!1,Events:[H3,jE,BM,XEe,QEe,iQ]},uA={findFiberByHostInstance:lx,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bZe={bundleType:uA.bundleType,version:uA.version,rendererPackageName:uA.rendererPackageName,rendererConfig:uA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$g.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=n2e(e),e===null?null:e.stateNode},findFiberByHostInstance:uA.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var HN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!HN.isDisabled&&HN.supportsFiber)try{$M=HN.inject(bZe),Wp=HN}catch{}}wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vZe;wf.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fQ(t))throw Error(bt(200));return gZe(e,t,null,n)};wf.createRoot=function(e,t){if(!fQ(e))throw Error(bt(299));var n=!1,r="",i=OTe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=uQ(e,1,!1,null,null,n,!1,r,i),e[ug]=t.current,nR(e.nodeType===8?e.parentNode:e),new cQ(t)};wf.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(bt(188)):(e=Object.keys(e).join(","),Error(bt(268,e)));return e=n2e(t),e=e===null?null:e.stateNode,e};wf.flushSync=function(e){return Kx(e)};wf.hydrate=function(e,t,n){if(!YM(t))throw Error(bt(200));return KM(null,e,t,!0,n)};wf.hydrateRoot=function(e,t,n){if(!fQ(e))throw Error(bt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=OTe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=NTe(t,null,e,1,n??null,i,!1,s,o),e[ug]=t.current,nR(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new GM(t)};wf.render=function(e,t,n){if(!YM(t))throw Error(bt(200));return KM(null,e,t,!1,n)};wf.unmountComponentAtNode=function(e){if(!YM(e))throw Error(bt(40));return e._reactRootContainer?(Kx(function(){KM(null,null,e,!1,function(){e._reactRootContainer=null,e[ug]=null})}),!0):!1};wf.unstable_batchedUpdates=iQ;wf.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!YM(n))throw Error(bt(200));if(e==null||e._reactInternals===void 0)throw Error(bt(38));return KM(e,t,n,!1,r)};wf.version="18.3.1-next-f1338f8080-20240426";function $Te(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($Te)}catch(e){console.error(e)}}$Te(),$Ee.exports=wf;var W3=$Ee.exports;const sI=zh(W3);var ode=W3;DH.createRoot=ode.createRoot,DH.hydrateRoot=ode.hydrateRoot;var Ap=function(){return Ap=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ap.apply(this,arguments)};function G3(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function S0(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function ade(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xZe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Or(e){return this instanceof Or?(this.v=e,this):new Or(e)}function dx(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Or?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Cj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Or(e[i](o)),done:!1}:s?s(o):o}:s}}function rk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ade=="function"?ade(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var L4="right-scroll-bar-position",M4="width-before-scroll-bar",_Ze="with-scroll-bars-hidden",wZe="--removed-body-scroll-bar-size";function Aj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function EZe(e,t){var n=P.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var TZe=typeof window<"u"?P.useLayoutEffect:P.useEffect,ude=new WeakMap;function SZe(e,t){var n=EZe(null,function(r){return e.forEach(function(i){return Aj(i,r)})});return TZe(function(){var r=ude.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||Aj(a,null)}),s.forEach(function(a){i.has(a)||Aj(a,o)})}ude.set(n,e)},[e]),n}function CZe(e){return e}function AZe(e,t){t===void 0&&(t=CZe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function IZe(e){e===void 0&&(e={});var t=AZe(null);return t.options=Ap({async:!0,ssr:!1},e),t}var LTe=function(e){var t=e.sideCar,n=G3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,Ap({},n))};LTe.isSideCarExport=!0;function kZe(e,t){return e.useMedium(t),LTe}var MTe=IZe(),Ij=function(){},XM=P.forwardRef(function(e,t){var n=P.useRef(null),r=P.useState({onScrollCapture:Ij,onWheelCapture:Ij,onTouchMoveCapture:Ij}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=G3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=d,E=SZe([n,t]),S=Ap(Ap({},b),i);return P.createElement(P.Fragment,null,c&&P.createElement(_,{sideCar:MTe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?P.cloneElement(P.Children.only(a),Ap(Ap({},S),{ref:E})):P.createElement(y,Ap({},S,{className:u,ref:E}),a))});XM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};XM.classNames={fullWidth:M4,zeroRight:L4};var RZe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function PZe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=RZe();return t&&e.setAttribute("nonce",t),e}function DZe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function NZe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var OZe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=PZe())&&(DZe(t,n),NZe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$Ze=function(){var e=OZe();return function(t,n){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},FTe=function(){var e=$Ze(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},LZe={left:0,top:0,right:0,gap:0},kj=function(e){return parseInt(e||"",10)||0},MZe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[kj(n),kj(r),kj(i)]},FZe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return LZe;var t=MZe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},BZe=FTe(),h2="data-scroll-locked",jZe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(_Ze,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(h2,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(L4,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(M4,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(L4," .").concat(L4,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(M4," .").concat(M4,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(h2,`] {
    `).concat(wZe,": ").concat(a,`px;
  }
`)},lde=function(){var e=parseInt(document.body.getAttribute(h2)||"0",10);return isFinite(e)?e:0},UZe=function(){P.useEffect(function(){return document.body.setAttribute(h2,(lde()+1).toString()),function(){var e=lde()-1;e<=0?document.body.removeAttribute(h2):document.body.setAttribute(h2,e.toString())}},[])},zZe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;UZe();var s=P.useMemo(function(){return FZe(i)},[i]);return P.createElement(BZe,{styles:jZe(s,!t,i,n?"":"!important")})},Sq=!1;if(typeof window<"u")try{var qN=Object.defineProperty({},"passive",{get:function(){return Sq=!0,!0}});window.addEventListener("test",qN,qN),window.removeEventListener("test",qN,qN)}catch{Sq=!1}var qw=Sq?{passive:!1}:!1,VZe=function(e){return e.tagName==="TEXTAREA"},BTe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!VZe(e)&&n[t]==="visible")},HZe=function(e){return BTe(e,"overflowY")},qZe=function(e){return BTe(e,"overflowX")},cde=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=jTe(e,r);if(i){var s=UTe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},WZe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},GZe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},jTe=function(e,t){return e==="v"?HZe(t):qZe(t)},UTe=function(e,t){return e==="v"?WZe(t):GZe(t)},YZe=function(e,t){return e==="h"&&t==="rtl"?-1:1},KZe=function(e,t,n,r,i){var s=YZe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=UTe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&jTe(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},WN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fde=function(e){return[e.deltaX,e.deltaY]},dde=function(e){return e&&"current"in e?e.current:e},XZe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},QZe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},JZe=0,Ww=[];function ZZe(e){var t=P.useRef([]),n=P.useRef([0,0]),r=P.useRef(),i=P.useState(JZe++)[0],s=P.useState(FTe)[0],o=P.useRef(e);P.useEffect(function(){o.current=e},[e]),P.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=xZe([e.lockRef.current],(e.shards||[]).map(dde),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=P.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=WN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],_="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,C=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in m&&C==="h"&&S.type==="range")return!1;var A=cde(C,S);if(!A)return!0;if(A?E=C:(E=C==="v"?"h":"v",A=cde(C,S)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||_)&&(r.current=E),!E)return!0;var R=r.current||E;return KZe(R,g,m,R==="h"?b:_)},[]),u=P.useCallback(function(m){var g=m;if(!(!Ww.length||Ww[Ww.length-1]!==s)){var y="deltaY"in g?fde(g):WN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&XZe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(dde).filter(Boolean).filter(function(E){return E.contains(g.target)}),_=b.length>0?a(g,b[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),l=P.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:eet(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),c=P.useCallback(function(m){n.current=WN(m),r.current=void 0},[]),f=P.useCallback(function(m){l(m.type,fde(m),m.target,a(m,e.lockRef.current))},[]),d=P.useCallback(function(m){l(m.type,WN(m),m.target,a(m,e.lockRef.current))},[]);P.useEffect(function(){return Ww.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,qw),document.addEventListener("touchmove",u,qw),document.addEventListener("touchstart",c,qw),function(){Ww=Ww.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,qw),document.removeEventListener("touchmove",u,qw),document.removeEventListener("touchstart",c,qw)}},[]);var h=e.removeScrollBar,p=e.inert;return P.createElement(P.Fragment,null,p?P.createElement(s,{styles:QZe(i)}):null,h?P.createElement(zZe,{gapMode:e.gapMode}):null)}function eet(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const tet=kZe(MTe,ZZe);var nT=P.forwardRef(function(e,t){return P.createElement(XM,Ap({},e,{ref:t,sideCar:tet}))});nT.classNames=XM.classNames;function Gi(e){return Object.keys(e)}function Rj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function dQ(e,t){const n={...e},r=t;return Rj(e)&&Rj(t)&&Object.keys(t).forEach(i=>{Rj(r[i])&&i in e?n[i]=dQ(n[i],r[i]):n[i]=r[i]}),n}function net(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function ret(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function fR(e){const t=ret(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Pj(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function zTe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?Pj(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?Pj(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?Pj(s):s}}return r}return n}const $e=zTe("rem",{shouldScale:!0}),g$=zTe("em");function Sv(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function VTe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Cv(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==P.Fragment:!1}function Wa(e){const t=P.createContext(null);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>{const i=P.useContext(t);if(i===null)throw new Error(e);return i}]}function vS(e=null){const t=P.createContext(e);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>P.useContext(t)]}function y$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function v$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function iet(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function set(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function oet(e,t,n){return v$(e,n)===v$(t,n)}function hQ({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=v$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>oet(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=set(l,u,r),f=iet(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const aet={app:100,modal:200,popover:300,overlay:400,max:9999};function Vh(e){return aet[e]}const uet=()=>{};function cet(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||uet:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Wn(e,t="size",n=!0){if(e!==void 0)return VTe(e)?n?$e(e):e:`var(--${t}-${e})`}function To(e){return Wn(e,"mantine-spacing")}function Bi(e){return e===void 0?"var(--mantine-radius-default)":Wn(e,"mantine-radius")}function al(e){return Wn(e,"mantine-font-size")}function HTe(e){return Wn(e,"mantine-line-height",!1)}function pQ(e){if(e)return Wn(e,"mantine-shadow",!1)}function O0(e,t){return n=>{e==null||e(n),t==null||t(n)}}function mQ(e,t){return e in t.breakpoints?fR(t.breakpoints[e]):fR(e)}function dR(e,t){const n=e.map(r=>({value:r,px:mQ(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function dh(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function fet(e,t,n){var r;return n?Array.from(((r=v$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function det(){const[e,t]=P.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function $0(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function p2(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Uy(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function QM(e,t){const n=Uy(e),r=P.useRef(0);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),P.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const hde=["mousedown","touchstart"];function het(e,t,n){const r=P.useRef();return P.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||hde).forEach(s=>document.addEventListener(s,i)),()=>{(t||hde).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function pet(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function met(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function get(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=P.useState(n?t:met(e)),s=P.useRef();return P.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),pet(s.current,o=>i(o.matches))},[e]),r}const M_=typeof document<"u"?P.useLayoutEffect:P.useEffect;function um(e,t){const n=P.useRef(!1);P.useEffect(()=>()=>{n.current=!1},[]),P.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function qTe({opened:e,shouldReturnFocus:t=!0}){const n=P.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return um(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function yet(e,t="body > :not(script)"){const n=p2(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const vet=/input|select|textarea|button|object/,WTe="a, input, select, textarea, button, object, [tabindex]";function bet(e){return e.style.display==="none"}function xet(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(bet(n))return!1;n=n.parentNode}return!0}function GTe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Cq(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(GTe(e));return(vet.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&xet(e)}function YTe(e){const t=GTe(e);return(Number.isNaN(t)||t>=0)&&Cq(e)}function _et(e){return Array.from(e.querySelectorAll(WTe)).filter(YTe)}function wet(e,t){const n=_et(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Eet(e=!0){const t=P.useRef(),n=P.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(WTe));o=a.find(YTe)||a.find(Cq)||null,!o&&Cq(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=P.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=yet(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return P.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&wet(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const Tet=e=>(e+1)%1e6;function Cet(){const[,e]=P.useReducer(Tet,0);return e}const Aet=ni.useId||(()=>{});function Iet(){const e=Aet();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ou(e){const t=Iet(),[n,r]=P.useState(t);return M_(()=>{r(p2())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function KTe(e,t,n){P.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function gQ(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function XTe(...e){return t=>{e.forEach(n=>gQ(n,t))}}function fo(...e){return P.useCallback(XTe(...e),e)}function QTe(e,t,n="ltr"){const r=P.useRef(null),i=P.useRef(!1),s=P.useRef(!1),o=P.useRef(0),[a,u]=P.useState(!1);return P.useEffect(()=>{i.current=!0},[]),P.useEffect(()=>{var v,b;const l=({x:_,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const C=$0((_-S.left)/S.width,0,1);e({x:n==="ltr"?C:1-C,y:$0((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=_=>{d(),_.preventDefault(),m(_)},m=_=>l({x:_.clientX,y:_.clientY}),g=_=>{_.cancelable&&_.preventDefault(),d(),y(_)},y=_=>{_.cancelable&&_.preventDefault(),l({x:_.changedTouches[0].clientX,y:_.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ya({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=P.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function JM(e,t){return get("(prefers-reduced-motion: reduce)",e,t)}const ket={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function tf(e){const t=P.useRef(0),n=P.useRef(null),[r,i]=P.useState(ket),s=P.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return P.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function Ret(e){const[t,{width:n,height:r}]=tf(e);return{ref:t,width:n,height:r}}function Pet(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function Det(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function Net(e){return t=>Det(Pet(e),t)}function Oet(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{Net(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function yQ(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=P.useState(e),o=P.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=P.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=P.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function $et(e,t,n={autoInvoke:!1}){const r=P.useRef(null),i=P.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=P.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return P.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function Let(e,t,n){const r=P.useRef(),i=P.useRef(null);return P.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Met(){const[e,t]=P.useState(!1);return P.useEffect(()=>t(!0),[]),e}function Fet(e,t){const n=Uy(e),r=P.useRef(),i=P.useRef(),s=P.useRef(!0),o=P.useRef(t),a=P.useRef(-1),u=()=>window.clearTimeout(a.current),l=P.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=P.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=P.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return P.useEffect(()=>{o.current=t},[t]),[f,u]}function Bet(e,t){const[n,r]=P.useState(e),[i,s]=Fet(r,t);return P.useEffect(()=>s,[]),[n,i]}function jet(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Uet(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});M_(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>jet(`${e}:${String(r)}`,i[0])}return[t,n]}var zet={};function JTe(){return typeof process<"u"&&zet?"production":"development"}function ZTe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ZTe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ao(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ZTe(e))&&(r&&(r+=" "),r+=t);return r}const Vet={};function Het(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=ao(t[r],i):t[r]=i})}),t}function ZM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||Vet);return Het(s)}function b$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const eSe=P.createContext(null);function Av(){const e=P.useContext(eSe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function qet(){return Av().cssVariablesResolver}function Wet(){return Av().classNamesPrefix}function vQ(){return Av().getStyleNonce}function Get(){return Av().withStaticClasses}function Yet(){return Av().headless}function Ket(){var e;return(e=Av().stylesTransform)==null?void 0:e.sx}function Xet(){var e;return(e=Av().stylesTransform)==null?void 0:e.styles}function Qet(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function Jet(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function Zet(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function ett(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function bQ(e){return Qet(e)?Jet(e):e.startsWith("rgb")?Zet(e):e.startsWith("hsl")?ett(e):{r:0,g:0,b:0,a:1}}function GN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=bQ(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function hR(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Dj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function ttt(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function ntt(e){if(e.startsWith("oklch("))return(ttt(e)||0)/100;const{r:t,g:n,b:r}=bQ(e),i=t/255,s=n/255,o=r/255,a=Dj(i),u=Dj(s),l=Dj(o);return .2126*a+.7152*u+.0722*l}function lA(e,t=.179){return e.startsWith("var(")?!1:ntt(e)>t}function km({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:lA(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:lA(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:lA(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][hR(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:lA(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:lA(e,t.luminanceThreshold),shade:s,variable:void 0}}function $i(e,t){const n=km({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Aq(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=$i(n.from,t),i=$i(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function gp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=bQ(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Gw=gp,rtt=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=km({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${$e(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${$e(1)} solid transparent`}:{background:e,hover:GN(e,.1),color:a,border:`${$e(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:gp(a,.1),hover:gp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}}return{background:gp(e,.1),hover:gp(e,.12),color:e,border:`${$e(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${$e(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:gp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$e(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:gp(e,.05),color:e,border:`${$e(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:gp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}}return{background:"transparent",hover:gp(e,.12),color:e,border:`${$e(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${$e(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:GN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${$e(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:GN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$e(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:GN(t.white,.01),color:e,border:`${$e(1)} solid transparent`}:n==="gradient"?{background:Aq(r,t),hover:Aq(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${$e(1)} solid var(--mantine-color-default-border)`}:{}},itt={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},pde="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",xQ={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:itt,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:rtt,autoContrast:!1,luminanceThreshold:.3,fontFamily:pde,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:pde,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:$e(34),lineHeight:"1.3"},h2:{fontSize:$e(26),lineHeight:"1.35"},h3:{fontSize:$e(22),lineHeight:"1.4"},h4:{fontSize:$e(18),lineHeight:"1.45"},h5:{fontSize:$e(16),lineHeight:"1.5"},h6:{fontSize:$e(14),lineHeight:"1.5"}}},fontSizes:{xs:$e(12),sm:$e(14),md:$e(16),lg:$e(18),xl:$e(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:$e(2),sm:$e(4),md:$e(8),lg:$e(16),xl:$e(32)},spacing:{xs:$e(10),sm:$e(12),md:$e(16),lg:$e(20),xl:$e(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), 0 ${$e(1)} ${$e(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(10)} ${$e(15)} ${$e(-5)}, rgba(0, 0, 0, 0.04) 0 ${$e(7)} ${$e(7)} ${$e(-5)}`,md:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(20)} ${$e(25)} ${$e(-5)}, rgba(0, 0, 0, 0.04) 0 ${$e(10)} ${$e(10)} ${$e(-5)}`,lg:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(28)} ${$e(23)} ${$e(-7)}, rgba(0, 0, 0, 0.04) 0 ${$e(12)} ${$e(12)} ${$e(-7)}`,xl:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(36)} ${$e(28)} ${$e(-7)}, rgba(0, 0, 0, 0.04) 0 ${$e(17)} ${$e(17)} ${$e(-7)}`},other:{},components:{}};function mde(e){return e==="auto"||e==="dark"||e==="light"}function stt({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return mde(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&mde(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const ott="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",gde="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Nj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function yde(e){if(!(e.primaryColor in e.colors))throw new Error(ott);if(typeof e.primaryShade=="object"&&(!Nj(e.primaryShade.dark)||!Nj(e.primaryShade.light)))throw new Error(gde);if(typeof e.primaryShade=="number"&&!Nj(e.primaryShade))throw new Error(gde)}function att(e,t){var r;if(!t)return yde(e),e;const n=dQ(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),yde(n),n}const _Q=P.createContext(null),utt=()=>P.useContext(_Q)||xQ;function ho(){const e=P.useContext(_Q);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function tSe({theme:e,children:t,inherit:n=!0}){const r=utt(),i=P.useMemo(()=>att(n?r:xQ,e),[e,r,n]);return w.jsx(_Q.Provider,{value:i,children:t})}tSe.displayName="@mantine/core/MantineThemeProvider";function ltt(){const e=ho(),t=vQ(),n=Gi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=fR(e.breakpoints[i]),a=s?`${o-.1}px`:g$(o-.1),u=s?`${o}px`:g$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Oj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function $j(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function ctt(e,t){const n=Oj(e.variables),r=n?$j(t,n):"",i=Oj(e.dark),s=i?$j(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Oj(e.light),a=o?$j(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Iv({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&km({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function vde(e,t){return Iv({color:e.colors[e.primaryColor][hR(e,t)],theme:e,autoContrast:null})}function YN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=hR(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Gw(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Gw(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Gw(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=hR(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Gw(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Gw(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Gw(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function ftt(e){return Array.isArray(e)?e:Array(10).fill(e)}function dtt(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Yw(e,t,n){Gi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const nSe=e=>{const t=hR(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:$e(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":vde(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":vde(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Yw(r.variables,e.breakpoints,"breakpoint"),Yw(r.variables,e.spacing,"spacing"),Yw(r.variables,e.fontSizes,"font-size"),Yw(r.variables,e.lineHeights,"line-height"),Yw(r.variables,e.shadows,"shadow"),Yw(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Gi(e.colors).forEach(s=>{const o=e.colors[s];if(dtt(o)){Object.assign(r.light,YN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,YN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,YN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,YN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Gi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function htt({theme:e,generator:t}){const n=nSe(e),r=t==null?void 0:t(e);return r?dQ(n,r):n}const Lj=nSe(xQ);function ptt(e){const t={variables:{},light:{},dark:{}};return Gi(e.variables).forEach(n=>{Lj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Gi(e.light).forEach(n=>{Lj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Gi(e.dark).forEach(n=>{Lj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function mtt(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function rSe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ho(),r=vQ(),i=qet(),s=htt({theme:n,generator:i}),o=e===":root"&&t,a=o?ptt(s):s,u=ctt(a,e);return u?w.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":mtt(e)}`}}):null}rSe.displayName="@mantine/CssVariables";function gtt(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function Kw(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function ytt({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=P.useRef(),[s,o]=P.useState(()=>e.get(t)),a=r||s,u=P.useCallback(c=>{r||(Kw(c,n),o(c),e.set(c))},[e.set,a,r]),l=P.useCallback(()=>{o(t),Kw(t,n),e.clear()},[e.clear,t]);return P.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),M_(()=>{Kw(e.get(t),n)},[]),P.useEffect(()=>{var f;if(r)return Kw(r,n),()=>{};r===void 0&&Kw(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&Kw(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function vtt({respectReducedMotion:e,getRootElement:t}){M_(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}gtt();function iSe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=stt(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=ytt({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return vtt({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),w.jsx(eSe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:w.jsxs(tSe,{theme:e,children:[o&&w.jsx(rSe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&w.jsx(ltt,{}),t]})})}iSe.displayName="@mantine/core/MantineProvider";function Y3({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ho();return{resolvedClassNames:ZM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:b$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const btt={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function xtt({theme:e,options:t,unstyled:n}){return ao((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||btt[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function _tt({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return ZM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function bde({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return ZM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function wtt({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Ett({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Ttt({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function Stt({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=ZM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Ctt({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Att({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return ao(xtt({theme:e,options:t,unstyled:a||h}),Stt({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Ctt({options:t,classes:o,selector:r,unstyled:a}),bde({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),bde({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),_tt({selector:r,stylesCtx:f,options:t,props:c,theme:e}),wtt({rootSelector:l,selector:r,className:u}),Ett({selector:r,classes:o,unstyled:a||h}),d&&!h&&Ttt({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function Itt({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return b$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function Iq({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Iq({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function ktt(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Sv(n[r])}}),t),{})}function Rtt({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=ktt([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function Ptt({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&Itt({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&b$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&b$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...Rtt({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?Iq({style:u,theme:e}):null,...Iq({style:r==null?void 0:r.style,theme:e})}}function Dtt({props:e,stylesCtx:t,themeName:n}){var o;const r=ho(),i=(o=Xet())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Bt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=ho(),h=Wet(),p=Get(),m=Yet(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=Dtt({props:n,stylesCtx:r,themeName:g});return(b,_)=>({className:Att({theme:d,options:_,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([_==null?void 0:_.styles,l])}),style:Ptt({theme:d,themeName:g,selector:b,options:_,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function bS(e,t){return typeof e=="boolean"?e:t.autoContrast}function We(e,t,n){var o;const r=ho(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Sv(n)}}function Mj(e){return Gi(e).reduce((t,n)=>e[n]!==void 0?`${t}${net(n)}:${e[n]};`:t,"").trim()}function Ntt({selector:e,styles:t,media:n,container:r}){const i=t?Mj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Mj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Mj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function F_(e){const t=vQ();return w.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Ntt(e)}})}function B_(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:E,opacity:S,ff:C,fz:A,fw:R,lts:k,ta:N,lh:L,fs:O,tt:B,td:q,w:H,miw:G,maw:K,h:J,mih:F,mah:j,bgsz:W,bgp:M,bgr:V,bga:Q,pos:se,top:be,left:he,bottom:Ae,right:Ne,inset:rt,display:Re,flex:Tt,hiddenFrom:Ze,visibleFrom:It,lightHidden:mt,darkHidden:Se,sx:Fe,...st}=e;return{styleProps:Sv({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:E,opacity:S,ff:C,fz:A,fw:R,lts:k,ta:N,lh:L,fs:O,tt:B,td:q,w:H,miw:G,maw:K,h:J,mih:F,mah:j,bgsz:W,bgp:M,bgr:V,bga:Q,pos:se,top:be,left:he,bottom:Ae,right:Ne,inset:rt,display:Re,flex:Tt,hiddenFrom:Ze,visibleFrom:It,lightHidden:mt,darkHidden:Se,sx:Fe}),rest:st}}const Ott={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function wQ(e,t){const n=km({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function $tt(e,t){const n=km({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:wQ(e,t)}function Ltt(e,t){if(typeof e=="number")return $e(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${$e(n)}`;return r&&(s+=` ${r}`),ftt.length>0&&(s+=` ${wQ(i.join(" "),t)}`),s.trim()}return e}const xde={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Mtt(e){return typeof e=="string"&&e in xde?xde[e]:e}const Ftt=["h1","h2","h3","h4","h5","h6"];function Btt(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Ftt.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?$e(e):e}function jtt(e){return e}const Utt=["h1","h2","h3","h4","h5","h6"];function ztt(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Utt.includes(e)?`var(--mantine-${e}-line-height)`:e}function Vtt(e){return typeof e=="number"?$e(e):e}function Htt(e,t){if(typeof e=="number")return $e(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return $e(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Fj={color:wQ,textColor:$tt,fontSize:Btt,spacing:Htt,identity:jtt,size:Vtt,lineHeight:ztt,fontFamily:Mtt,border:Ltt};function _de(e){return e.replace("(min-width: ","").replace("em)","")}function qtt({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(_de(i))-Number(_de(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function Wtt(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function Gtt(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Ytt(e){return typeof e=="object"&&e!==null?Gi(e).filter(t=>t!=="base"):[]}function Ktt(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function sSe({styleProps:e,data:t,theme:n}){return qtt(Gi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=Gtt(e[i]);if(!Wtt(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Fj[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=Ytt(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Fj[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Fj[s.type](Ktt(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function K3(){return`__m__-${P.useId().replace(/:/g,"")}`}function EQ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...EQ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function oSe(e){return e.startsWith("data-")?e:`data-${e}`}function Xtt(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[oSe(n)]=e[n]),t},{})}function aSe(e){return e?typeof e=="string"?{[oSe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...aSe(n)}),{}):Xtt(e):null}function kq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...kq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Qtt({theme:e,style:t,vars:n,styleProps:r}){const i=kq(t,e),s=kq(n,e);return{...i,...s,...r}}const uSe=P.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=ho(),g=e||"div",{styleProps:y,rest:v}=B_(h),b=Ket(),_=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=K3(),S=sSe({styleProps:y,theme:m,data:Ott}),C={ref:p,style:Qtt({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:ao(r,_,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":VTe(o)?void 0:o||void 0,size:d,...aSe(s),...v};return w.jsxs(w.Fragment,{children:[S.hasResponsiveStyles&&w.jsx(F_,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(C):w.jsx(g,{...C})]})});uSe.displayName="@mantine/core/Box";const ke=uSe;function lSe(e){return e}function ft(e){const t=P.forwardRef(e);return t.extend=lSe,t}function Yo(e){const t=P.forwardRef(e);return t.extend=lSe,t}const Jtt=P.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Lg(){return P.useContext(Jtt)}function Ztt(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Bj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const cA=typeof window<"u"&&window.requestAnimationFrame;function ent({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=P.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=P.useState(r?{}:o),l=p=>{W3.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||Ztt(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}um(()=>{typeof cA=="function"&&cA(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),cA(()=>{const p=Bj(i);c({...f(p),height:p})})}:()=>{const p=Bj(i);c({...f(p),willChange:"height",height:p}),cA(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Bj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:XTe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const tnt={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},eF=ft((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=We("Collapse",tnt,e),c=ho(),f=JM(),h=(c.respectReducedMotion?f:!1)?0:i,p=ent({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?w.jsx(ke,{...l,children:n}):null:w.jsx(ke,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...EQ(o,c)},ref:t,...l}),children:n})});eF.displayName="@mantine/core/Collapse";const[nnt,yd]=Wa("ScrollArea.Root component was not found in tree");function rT(e,t){const n=Uy(t);M_(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const rnt=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=yd(),[s,o]=P.useState(0),[a,u]=P.useState(0),l=!!(s&&a);return rT(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),rT(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?w.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),int=P.forwardRef((e,t)=>{const n=yd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?w.jsx(rnt,{...e,ref:t}):null}),snt={scrollHideDelay:1e3,type:"hover"},cSe=P.forwardRef((e,t)=>{const n=We("ScrollAreaRoot",snt,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=P.useState(null),[l,c]=P.useState(null),[f,d]=P.useState(null),[h,p]=P.useState(null),[m,g]=P.useState(null),[y,v]=P.useState(0),[b,_]=P.useState(0),[E,S]=P.useState(!1),[C,A]=P.useState(!1),R=fo(t,k=>u(k));return w.jsx(nnt,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:C,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:_},children:w.jsx(ke,{...o,ref:R,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});cSe.displayName="@mantine/core/ScrollAreaRoot";function fSe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function tF(e){const t=fSe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function dSe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ont(e,[t,n]){return Math.min(n,Math.max(t,e))}function wde(e,t,n="ltr"){const r=tF(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=ont(e,u);return dSe([0,o],[0,a])(l)}function ant(e,t,n,r="ltr"){const i=tF(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return dSe([u,l],f)(e)}function hSe(e,t){return e>0&&e<t}function x$(e){return e?parseInt(e,10):0}function Dx(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[unt,pSe]=Wa("ScrollAreaScrollbar was not found in tree"),mSe=P.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=yd(),[h,p]=P.useState(null),m=fo(t,A=>p(A)),g=P.useRef(null),y=P.useRef(""),{viewport:v}=d,b=n.content-n.viewport,_=Uy(l),E=Uy(a),S=QM(c,10),C=A=>{if(g.current){const R=A.clientX-g.current.left,k=A.clientY-g.current.top;u({x:R,y:k})}};return P.useEffect(()=>{const A=R=>{const k=R.target;(h==null?void 0:h.contains(k))&&_(R,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,_]),P.useEffect(E,[n,E]),rT(h,S),rT(d.content,S),w.jsx(unt,{value:{scrollbar:h,hasThumb:r,onThumbChange:Uy(i),onThumbPointerUp:Uy(s),onThumbPositionChange:E,onThumbPointerDown:Uy(o)},children:w.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:Dx(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",C(A))}),onPointerMove:Dx(e.onPointerMove,C),onPointerUp:Dx(e.onPointerUp,A=>{const R=A.target;R.hasPointerCapture(A.pointerId)&&R.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),lnt=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=yd(),[a,u]=P.useState(),l=P.useRef(null),c=fo(t,l,o.onScrollbarXChange);return P.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),w.jsx(mSe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${tF(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),hSe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:x$(a.paddingLeft),paddingEnd:x$(a.paddingRight)}})}})}),cnt=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=yd(),[a,u]=P.useState(),l=P.useRef(null),c=fo(t,l,o.onScrollbarYChange);return P.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),w.jsx(mSe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${tF(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),hSe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:x$(a.paddingTop),paddingEnd:x$(a.paddingBottom)}})}})}),TQ=P.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Lg(),s=yd(),o=P.useRef(null),a=P.useRef(0),[u,l]=P.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=fSe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>ant(h,a.current,u,p);return n==="horizontal"?w.jsx(lnt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=wde(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?w.jsx(cnt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=wde(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),gSe=P.forwardRef((e,t)=>{const n=yd(),{forceMount:r,...i}=e,[s,o]=P.useState(!1),a=e.orientation==="horizontal",u=QM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return rT(n.viewport,u),rT(n.content,u),r||s?w.jsx(TQ,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),fnt=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yd(),[s,o]=P.useState(!1);return P.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?w.jsx(gSe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),dnt=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yd(),s=e.orientation==="horizontal",[o,a]=P.useState("hidden"),u=QM(()=>a("idle"),100);return P.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),P.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?w.jsx(TQ,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Dx(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Dx(e.onPointerLeave,()=>a("idle"))}):null}),Ede=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yd(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return P.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?w.jsx(fnt,{...r,ref:t,forceMount:n}):i.type==="scroll"?w.jsx(dnt,{...r,ref:t,forceMount:n}):i.type==="auto"?w.jsx(gSe,{...r,ref:t,forceMount:n}):i.type==="always"?w.jsx(TQ,{...r,ref:t}):null});function hnt(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const pnt=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=yd(),s=pSe(),{onThumbPositionChange:o}=s,a=fo(t,c=>s.onThumbChange(c)),u=P.useRef(),l=QM(()=>{u.current&&(u.current(),u.current=void 0)},100);return P.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=hnt(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),w.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Dx(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Dx(e.onPointerUp,s.onThumbPointerUp)})}),Tde=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=pSe();return n||i.hasThumb?w.jsx(pnt,{ref:t,...r}):null}),ySe=P.forwardRef(({children:e,style:t,...n},r)=>{const i=yd(),s=fo(r,i.onViewportChange);return w.jsx(ke,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:w.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});ySe.displayName="@mantine/core/ScrollAreaViewport";var SQ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const vSe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},mnt=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":$e(t)}}),fg=ft((e,t)=>{const n=We("ScrollArea",vSe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,_]=P.useState(!1),E=Bt({name:"ScrollArea",props:n,classes:SQ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:mnt});return w.jsxs(cSe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[w.jsx(ySe,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var C;(C=d==null?void 0:d.onScroll)==null||C.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&w.jsx(Ede,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:w.jsx(Tde,{...E("thumb")})}),(y==="xy"||y==="y")&&w.jsx(Ede,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:w.jsx(Tde,{...E("thumb")})}),w.jsx(int,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});fg.displayName="@mantine/core/ScrollArea";const CQ=ft((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=We("ScrollAreaAutosize",vSe,e);return w.jsx(ke,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:w.jsx(ke,{style:{display:"flex",flexDirection:"column",flex:1},children:w.jsx(fg,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});fg.classes=SQ;CQ.displayName="@mantine/core/ScrollAreaAutosize";CQ.classes=SQ;fg.Autosize=CQ;var bSe={root:"m_87cf2631"};const gnt={__staticSelector:"UnstyledButton"},uf=Yo((e,t)=>{const n=We("UnstyledButton",gnt,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Bt({name:s,props:n,classes:bSe,className:r,style:l,classNames:a,styles:u,unstyled:o});return w.jsx(ke,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});uf.classes=bSe;uf.displayName="@mantine/core/UnstyledButton";var xSe={root:"m_515a97f8"};const ynt={},AQ=ft((e,t)=>{const n=We("VisuallyHidden",ynt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Bt({name:"VisuallyHidden",classes:xSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return w.jsx(ke,{component:"span",ref:t,...c("root"),...l})});AQ.classes=xSe;AQ.displayName="@mantine/core/VisuallyHidden";var _Se={root:"m_1b7284a3"};const vnt={},bnt=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Bi(t),"--paper-shadow":pQ(n)}}),xS=Yo((e,t)=>{const n=We("Paper",vnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Bt({name:"Paper",props:n,classes:_Se,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:bnt});return w.jsx(ke,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});xS.classes=_Se;xS.displayName="@mantine/core/Paper";function _S(e){return wSe(e)?(e.nodeName||"").toLowerCase():"#document"}function oc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Mg(e){var t;return(t=(wSe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wSe(e){return e instanceof Node||e instanceof oc(e).Node}function Es(e){return e instanceof Element||e instanceof oc(e).Element}function lf(e){return e instanceof HTMLElement||e instanceof oc(e).HTMLElement}function Rq(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof oc(e).ShadowRoot}function X3(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ud(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function xnt(e){return["table","td","th"].includes(_S(e))}function IQ(e){const t=kQ(),n=ud(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function _nt(e){let t=dg(e);for(;lf(t)&&!M1(t);){if(IQ(t))return t;t=dg(t)}return null}function kQ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function M1(e){return["html","body","#document"].includes(_S(e))}function ud(e){return oc(e).getComputedStyle(e)}function nF(e){return Es(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function dg(e){if(_S(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Rq(e)&&e.host||Mg(e);return Rq(t)?t.host:t}function ESe(e){const t=dg(e);return M1(t)?e.ownerDocument?e.ownerDocument.body:e.body:lf(t)&&X3(t)?t:ESe(t)}function G0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=ESe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=oc(i);return s?t.concat(o,o.visualViewport||[],X3(i)?i:[],o.frameElement&&n?G0(o.frameElement):[]):t.concat(i,G0(i,[],n))}function Sde(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function pR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Rq(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function TSe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function SSe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function wnt(e){return Snt()?!1:!Cde()&&e.width===0&&e.height===0||Cde()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Ent(){return/apple/i.test(navigator.vendor)}function Cde(){const e=/android/i;return e.test(TSe())||e.test(SSe())}function Tnt(){return TSe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Snt(){return SSe().includes("jsdom/")}function Pq(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Cnt(e){return"nativeEvent"in e}function Ant(e){return e.matches("html,body")}function hx(e){return(e==null?void 0:e.ownerDocument)||document}function jj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function _E(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Int="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function knt(e){return lf(e)&&e.matches(Int)}const Gc=Math.min,mu=Math.max,_$=Math.round,KN=Math.floor,F1=e=>({x:e,y:e}),Rnt={left:"right",right:"left",bottom:"top",top:"bottom"},Pnt={start:"end",end:"start"};function Dq(e,t,n){return mu(e,Gc(t,n))}function hg(e,t){return typeof e=="function"?e(t):e}function Ph(e){return e.split("-")[0]}function wS(e){return e.split("-")[1]}function RQ(e){return e==="x"?"y":"x"}function PQ(e){return e==="y"?"height":"width"}function j_(e){return["top","bottom"].includes(Ph(e))?"y":"x"}function DQ(e){return RQ(j_(e))}function Dnt(e,t,n){n===void 0&&(n=!1);const r=wS(e),i=DQ(e),s=PQ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=w$(o)),[o,w$(o)]}function Nnt(e){const t=w$(e);return[Nq(e),t,Nq(t)]}function Nq(e){return e.replace(/start|end/g,t=>Pnt[t])}function Ont(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function $nt(e,t,n,r){const i=wS(e);let s=Ont(Ph(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Nq)))),s}function w$(e){return e.replace(/left|right|bottom|top/g,t=>Rnt[t])}function Lnt(e){return{top:0,right:0,bottom:0,left:0,...e}}function NQ(e){return typeof e!="number"?Lnt(e):{top:e,right:e,bottom:e,left:e}}function iT(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ade(e,t,n){let{reference:r,floating:i}=e;const s=j_(t),o=DQ(t),a=PQ(o),u=Ph(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(wS(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Mnt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Ade(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:_,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],..._}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=Ade(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function OQ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=hg(t,e),p=NQ(h),g=a[d?f==="floating"?"reference":"floating":f],y=iT(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=iT(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/_.y,bottom:(E.bottom-y.bottom+p.bottom)/_.y,left:(y.left-E.left+p.left)/_.x,right:(E.right-y.right+p.right)/_.x}}const Fnt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=hg(e,t)||{};if(l==null)return{};const f=NQ(c),d={x:n,y:r},h=DQ(i),p=PQ(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let C=S?S[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=a.floating[b]||s.floating[p]);const A=_/2-E/2,R=C/2-m[p]/2-1,k=Gc(f[y],R),N=Gc(f[v],R),L=k,O=C-m[p]-N,B=C/2-m[p]/2+A,q=Dq(L,B,O),H=!u.arrow&&wS(i)!=null&&B!==q&&s.reference[p]/2-(B<L?k:N)-m[p]/2<0,G=H?B<L?B-L:B-O:0;return{[h]:d[h]+G,data:{[h]:q,centerOffset:B-q-G,...H&&{alignmentOffset:G}},reset:H}}}),Bnt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=hg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Ph(i),v=Ph(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),_=d||(v||!m?[w$(a)]:Nnt(a));!d&&p!=="none"&&_.push(...$nt(a,m,p,b));const E=[a,..._],S=await OQ(t,g),C=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&C.push(S[y]),f){const L=Dnt(i,o,b);C.push(S[L[0]],S[L[1]])}if(A=[...A,{placement:i,overflows:C}],!C.every(L=>L<=0)){var R,k;const L=(((R=s.flip)==null?void 0:R.index)||0)+1,O=E[L];if(O)return{data:{index:L,overflows:A},reset:{placement:O}};let B=(k=A.filter(q=>q.overflows[0]<=0).sort((q,H)=>q.overflows[1]-H.overflows[1])[0])==null?void 0:k.placement;if(!B)switch(h){case"bestFit":{var N;const q=(N=A.map(H=>[H.placement,H.overflows.filter(G=>G>0).reduce((G,K)=>G+K,0)]).sort((H,G)=>H[1]-G[1])[0])==null?void 0:N[0];q&&(B=q);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function CSe(e){const t=Gc(...e.map(s=>s.left)),n=Gc(...e.map(s=>s.top)),r=mu(...e.map(s=>s.right)),i=mu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function jnt(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>iT(CSe(i)))}const Unt=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=hg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=jnt(c),d=iT(CSe(c)),h=NQ(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(j_(n)==="y"){const k=f[0],N=f[f.length-1],L=Ph(n)==="top",O=k.top,B=N.bottom,q=L?k.left:N.left,H=L?k.right:N.right,G=H-q,K=B-O;return{top:O,bottom:B,left:q,right:H,width:G,height:K,x:q,y:O}}const g=Ph(n)==="left",y=mu(...f.map(k=>k.right)),v=Gc(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),_=b[0].top,E=b[b.length-1].bottom,S=v,C=y,A=C-S,R=E-_;return{top:_,bottom:E,left:S,right:C,width:A,height:R,x:S,y:_}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function znt(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ph(n),a=wS(n),u=j_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=hg(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Vnt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await znt(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Hnt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=hg(e,t),l={x:n,y:r},c=await OQ(t,u),f=j_(Ph(i)),d=RQ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=Dq(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=Dq(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},qnt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=hg(e,t),c={x:n,y:r},f=j_(i),d=RQ(f);let h=c[d],p=c[f];const m=hg(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",_=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<_?h=_:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",_=["top","left"].includes(Ph(i)),E=s.reference[f]-s.floating[b]+(_&&((y=o.offset)==null?void 0:y[f])||0)+(_?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(_?0:((v=o.offset)==null?void 0:v[f])||0)-(_?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},Wnt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=hg(e,t),u=await OQ(t,a),l=Ph(n),c=wS(n),f=j_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Gc(h-u[p],g),b=Gc(d-u[m],y),_=!t.middlewareData.shift;let E=v,S=b;if(f?S=c||_?Gc(b,y):y:E=c||_?Gc(v,g):g,_&&!c){const A=mu(u.left,0),R=mu(u.right,0),k=mu(u.top,0),N=mu(u.bottom,0);f?S=d-2*(A!==0||R!==0?A+R:mu(u.left,u.right)):E=h-2*(k!==0||N!==0?k+N:mu(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const C=await i.getDimensions(s.floating);return d!==C.width||h!==C.height?{reset:{rects:!0}}:{}}}};function ASe(e){const t=ud(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=lf(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=_$(n)!==s||_$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function $Q(e){return Es(e)?e:e.contextElement}function m2(e){const t=$Q(e);if(!lf(t))return F1(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=ASe(t);let o=(s?_$(n.width):n.width)/r,a=(s?_$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Gnt=F1(0);function ISe(e){const t=oc(e);return!kQ()||!t.visualViewport?Gnt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ynt(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==oc(e)?!1:t}function Xx(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=$Q(e);let o=F1(1);t&&(r?Es(r)&&(o=m2(r)):o=m2(e));const a=Ynt(s,n,r)?ISe(s):F1(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=oc(s),h=r&&Es(r)?oc(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=m2(m),y=m.getBoundingClientRect(),v=ud(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,_=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=_,p=oc(m),m=p.frameElement}}return iT({width:c,height:f,x:u,y:l})}const Knt=[":popover-open",":modal"];function LQ(e){return Knt.some(t=>{try{return e.matches(t)}catch{return!1}})}function Xnt(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Mg(r),a=t?LQ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=F1(1);const c=F1(0),f=lf(r);if((f||!f&&!s)&&((_S(r)!=="body"||X3(o))&&(u=nF(r)),lf(r))){const d=Xx(r);l=m2(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function Qnt(e){return Array.from(e.getClientRects())}function kSe(e){return Xx(Mg(e)).left+nF(e).scrollLeft}function Jnt(e){const t=Mg(e),n=nF(e),r=e.ownerDocument.body,i=mu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=mu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+kSe(e);const a=-n.scrollTop;return ud(r).direction==="rtl"&&(o+=mu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Znt(e,t){const n=oc(e),r=Mg(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=kQ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function ert(e,t){const n=Xx(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=lf(e)?m2(e):F1(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Ide(e,t,n){let r;if(t==="viewport")r=Znt(e,n);else if(t==="document")r=Jnt(Mg(e));else if(Es(t))r=ert(t,n);else{const i=ISe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return iT(r)}function RSe(e,t){const n=dg(e);return n===t||!Es(n)||M1(n)?!1:ud(n).position==="fixed"||RSe(n,t)}function trt(e,t){const n=t.get(e);if(n)return n;let r=G0(e,[],!1).filter(a=>Es(a)&&_S(a)!=="body"),i=null;const s=ud(e).position==="fixed";let o=s?dg(e):e;for(;Es(o)&&!M1(o);){const a=ud(o),u=IQ(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||X3(o)&&!u&&RSe(e,o))?r=r.filter(c=>c!==o):i=a,o=dg(o)}return t.set(e,r),r}function nrt(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?LQ(t)?[]:trt(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Ide(t,c,i);return l.top=mu(f.top,l.top),l.right=Gc(f.right,l.right),l.bottom=Gc(f.bottom,l.bottom),l.left=mu(f.left,l.left),l},Ide(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function rrt(e){const{width:t,height:n}=ASe(e);return{width:t,height:n}}function irt(e,t,n){const r=lf(t),i=Mg(t),s=n==="fixed",o=Xx(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=F1(0);if(r||!r&&!s)if((_S(t)!=="body"||X3(i))&&(a=nF(t)),r){const f=Xx(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=kSe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Uj(e){return ud(e).position==="static"}function kde(e,t){return!lf(e)||ud(e).position==="fixed"?null:t?t(e):e.offsetParent}function PSe(e,t){const n=oc(e);if(LQ(e))return n;if(!lf(e)){let i=dg(e);for(;i&&!M1(i);){if(Es(i)&&!Uj(i))return i;i=dg(i)}return n}let r=kde(e,t);for(;r&&xnt(r)&&Uj(r);)r=kde(r,t);return r&&M1(r)&&Uj(r)&&!IQ(r)?n:r||_nt(e)||n}const srt=async function(e){const t=this.getOffsetParent||PSe,n=this.getDimensions,r=await n(e.floating);return{reference:irt(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ort(e){return ud(e).direction==="rtl"}const art={convertOffsetParentRelativeRectToViewportRelativeRect:Xnt,getDocumentElement:Mg,getClippingRect:nrt,getOffsetParent:PSe,getElementRects:srt,getClientRects:Qnt,getDimensions:rrt,getScale:m2,isElement:Es,isRTL:ort};function urt(e,t){let n=null,r;const i=Mg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=KN(c),p=KN(i.clientWidth-(l+f)),m=KN(i.clientHeight-(c+d)),g=KN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:mu(0,Gc(1,u))||1};let b=!0;function _(E){const S=E[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(_,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,v)}n.observe(e)}return o(!0),s}function lrt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=$Q(e),c=i||s?[...l?G0(l):[],...G0(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?urt(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Xx(e):null;u&&g();function g(){const y=Xx(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const crt=Vnt,frt=Hnt,drt=Bnt,hrt=Wnt,Rde=Fnt,prt=Unt,mrt=qnt,grt=(e,t,n)=>{const r=new Map,i={platform:art,...n},s={...i.platform,_c:r};return Mnt(e,t,{...i,platform:s})};var F4=typeof document<"u"?P.useLayoutEffect:P.useEffect;function E$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!E$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!E$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function DSe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Pde(e,t){const n=DSe(e);return Math.round(t*n)/n}function Dde(e){const t=P.useRef(e);return F4(()=>{t.current=e}),t}function yrt(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=P.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=P.useState(r);E$(d,r)||h(r);const[p,m]=P.useState(null),[g,y]=P.useState(null),v=P.useCallback(G=>{G!==S.current&&(S.current=G,m(G))},[]),b=P.useCallback(G=>{G!==C.current&&(C.current=G,y(G))},[]),_=s||p,E=o||g,S=P.useRef(null),C=P.useRef(null),A=P.useRef(c),R=u!=null,k=Dde(u),N=Dde(i),L=P.useCallback(()=>{if(!S.current||!C.current)return;const G={placement:t,strategy:n,middleware:d};N.current&&(G.platform=N.current),grt(S.current,C.current,G).then(K=>{const J={...K,isPositioned:!0};O.current&&!E$(A.current,J)&&(A.current=J,W3.flushSync(()=>{f(J)}))})},[d,t,n,N]);F4(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[l]);const O=P.useRef(!1);F4(()=>(O.current=!0,()=>{O.current=!1}),[]),F4(()=>{if(_&&(S.current=_),E&&(C.current=E),_&&E){if(k.current)return k.current(_,E,L);L()}},[_,E,L,k,R]);const B=P.useMemo(()=>({reference:S,floating:C,setReference:v,setFloating:b}),[v,b]),q=P.useMemo(()=>({reference:_,floating:E}),[_,E]),H=P.useMemo(()=>{const G={position:n,left:0,top:0};if(!q.floating)return G;const K=Pde(q.floating,c.x),J=Pde(q.floating,c.y);return a?{...G,transform:"translate("+K+"px, "+J+"px)",...DSe(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:J}},[n,a,q.floating,c.x,c.y]);return P.useMemo(()=>({...c,update:L,refs:B,elements:q,floatingStyles:H}),[c,L,B,q,H])}const vrt=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Rde({element:r.current,padding:i}).fn(n):{}:r?Rde({element:r,padding:i}).fn(n):{}}}},NSe=(e,t)=>({...crt(e),options:[e,t]}),MQ=(e,t)=>({...frt(e),options:[e,t]}),Nde=(e,t)=>({...mrt(e),options:[e,t]}),Oq=(e,t)=>({...drt(e),options:[e,t]}),brt=(e,t)=>({...hrt(e),options:[e,t]}),$q=(e,t)=>({...prt(e),options:[e,t]}),OSe=(e,t)=>({...vrt(e),options:[e,t]}),$Se={...q6},xrt=$Se.useInsertionEffect,_rt=xrt||(e=>e());function zy(e){const t=P.useRef(()=>{});return _rt(()=>{t.current=e}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Yp=typeof document<"u"?P.useLayoutEffect:P.useEffect;let Ode=!1,wrt=0;const $de=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+wrt++;function Ert(){const[e,t]=P.useState(()=>Ode?$de():void 0);return Yp(()=>{e==null&&t($de())},[]),P.useEffect(()=>{Ode=!0},[]),e}const Trt=$Se.useId,LSe=Trt||Ert;function Srt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Crt=P.createContext(null),Art=P.createContext(null),FQ=()=>{var e;return((e=P.useContext(Crt))==null?void 0:e.id)||null},BQ=()=>P.useContext(Art);function jQ(e){return"data-floating-ui-"+e}function Lde(e){const t=P.useRef(e);return Yp(()=>{t.current=e}),t}const Mde=jQ("safe-polygon");function B4(e,t,n){return n&&!Pq(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Irt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=BQ(),m=FQ(),g=Lde(c),y=Lde(l),v=P.useRef(),b=P.useRef(-1),_=P.useRef(),E=P.useRef(-1),S=P.useRef(!0),C=P.useRef(!1),A=P.useRef(()=>{}),R=P.useCallback(()=>{var O;const B=(O=i.current.openEvent)==null?void 0:O.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[i]);P.useEffect(()=>{if(!u)return;function O(B){let{open:q}=B;q||(clearTimeout(b.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",O),()=>{s.off("openchange",O)}},[u,s]),P.useEffect(()=>{if(!u||!g.current||!n)return;function O(q){R()&&r(!1,q,"hover")}const B=hx(a).documentElement;return B.addEventListener("mouseleave",O),()=>{B.removeEventListener("mouseleave",O)}},[a,n,r,u,g,R]);const k=P.useCallback(function(O,B,q){B===void 0&&(B=!0),q===void 0&&(q="hover");const H=B4(y.current,"close",v.current);H&&!_.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,O,q),H)):B&&(clearTimeout(b.current),r(!1,O,q))},[y,r]),N=zy(()=>{A.current(),_.current=void 0}),L=zy(()=>{if(C.current){const O=hx(a).body;O.style.pointerEvents="",O.removeAttribute(Mde),C.current=!1}});return P.useEffect(()=>{if(!u)return;function O(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function B(G){if(clearTimeout(b.current),S.current=!1,f&&!Pq(v.current)||d>0&&!B4(y.current,"open"))return;const K=B4(y.current,"open",v.current);K?b.current=window.setTimeout(()=>{r(!0,G,"hover")},K):r(!0,G,"hover")}function q(G){if(O())return;A.current();const K=hx(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),_.current=g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){L(),N(),k(G,!0,"safe-polygon")}});const F=_.current;K.addEventListener("mousemove",F),A.current=()=>{K.removeEventListener("mousemove",F)};return}(v.current==="touch"?!pR(a,G.relatedTarget):!0)&&k(G)}function H(G){O()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){L(),N(),k(G)}})(G))}if(Es(o)){const G=o;return n&&G.addEventListener("mouseleave",H),a==null||a.addEventListener("mouseleave",H),h&&G.addEventListener("mousemove",B,{once:!0}),G.addEventListener("mouseenter",B),G.addEventListener("mouseleave",q),()=>{n&&G.removeEventListener("mouseleave",H),a==null||a.removeEventListener("mouseleave",H),h&&G.removeEventListener("mousemove",B),G.removeEventListener("mouseenter",B),G.removeEventListener("mouseleave",q)}}},[o,a,u,e,f,d,h,k,N,L,r,n,p,y,g,i]),Yp(()=>{var O;if(u&&n&&(O=g.current)!=null&&O.__options.blockPointerEvents&&R()){const q=hx(a).body;if(q.setAttribute(Mde,""),q.style.pointerEvents="none",C.current=!0,Es(o)&&a){var B;const H=o,G=p==null||(B=p.nodesRef.current.find(K=>K.id===m))==null||(B=B.context)==null?void 0:B.elements.floating;return G&&(G.style.pointerEvents=""),H.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{H.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,R]),Yp(()=>{n||(v.current=void 0,N(),L())},[n,N,L]),P.useEffect(()=>()=>{N(),clearTimeout(b.current),clearTimeout(E.current),L()},[u,o,N,L]),P.useMemo(()=>{if(!u)return{};function O(B){v.current=B.pointerType}return{reference:{onPointerDown:O,onPointerEnter:O,onMouseMove(B){function q(){S.current||r(!0,B.nativeEvent,"hover")}f&&!Pq(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?q():E.current=window.setTimeout(q,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(B){k(B.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const Lq=()=>{},MSe=P.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Lq,setState:Lq,isInstantPhase:!1}),FSe=()=>P.useContext(MSe);function krt(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=P.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=P.useRef(null),a=P.useCallback(u=>{s({currentId:u})},[]);return Yp(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),P.createElement(MSe.Provider,{value:P.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Rrt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=FSe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Yp(()=>{u&&(f({delay:{open:1,close:B4(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Yp(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Yp(()=>{l===Lq||!n||l(o)},[n,l,o]),a}function zj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Prt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Drt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Fde=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Nrt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=BQ(),v=zy(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,_=P.useRef(!1),E=P.useRef(!1),{escapeKey:S,outsidePress:C}=Fde(m),{escapeKey:A,outsidePress:R}=Fde(g),k=zy(B=>{var q;if(!n||!u||!l||B.key!=="Escape")return;const H=(q=a.current.floatingContext)==null?void 0:q.nodeId,G=y?zj(y.nodesRef.current,H):[];if(!S&&(B.stopPropagation(),G.length>0)){let K=!0;if(G.forEach(J=>{var F;if((F=J.context)!=null&&F.open&&!J.context.dataRef.current.__escapeKeyBubbles){K=!1;return}}),!K)return}r(!1,Cnt(B)?B.nativeEvent:B,"escape-key")}),N=zy(B=>{var q;const H=()=>{var G;k(B),(G=_E(B))==null||G.removeEventListener("keydown",H)};(q=_E(B))==null||q.addEventListener("keydown",H)}),L=zy(B=>{var q;const H=_.current;_.current=!1;const G=E.current;if(E.current=!1,f==="click"&&G||H||typeof b=="function"&&!b(B))return;const K=_E(B),J="["+jQ("inert")+"]",F=hx(o).querySelectorAll(J);let j=Es(K)?K:null;for(;j&&!M1(j);){const Q=dg(j);if(M1(Q)||!Es(Q))break;j=Q}if(F.length&&Es(K)&&!Ant(K)&&!pR(K,o)&&Array.from(F).every(Q=>!pR(j,Q)))return;if(lf(K)&&o){const Q=K.clientWidth>0&&K.scrollWidth>K.clientWidth,se=K.clientHeight>0&&K.scrollHeight>K.clientHeight;let be=se&&B.offsetX>K.clientWidth;if(se&&ud(K).direction==="rtl"&&(be=B.offsetX<=K.offsetWidth-K.clientWidth),be||Q&&B.offsetY>K.clientHeight)return}const W=(q=a.current.floatingContext)==null?void 0:q.nodeId,M=y&&zj(y.nodesRef.current,W).some(Q=>{var se;return jj(B,(se=Q.context)==null?void 0:se.elements.floating)});if(jj(B,o)||jj(B,s)||M)return;const V=y?zj(y.nodesRef.current,W):[];if(V.length>0){let Q=!0;if(V.forEach(se=>{var be;if((be=se.context)!=null&&be.open&&!se.context.dataRef.current.__outsidePressBubbles){Q=!1;return}}),!Q)return}r(!1,B,"outside-press")}),O=zy(B=>{var q;const H=()=>{var G;L(B),(G=_E(B))==null||G.removeEventListener(f,H)};(q=_E(B))==null||q.addEventListener(f,H)});return P.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=C;function B(G){r(!1,G,"ancestor-scroll")}const q=hx(o);l&&q.addEventListener("keydown",A?N:k,A),b&&q.addEventListener(f,R?O:L,R);let H=[];return p&&(Es(s)&&(H=G0(s)),Es(o)&&(H=H.concat(G0(o))),!Es(i)&&i&&i.contextElement&&(H=H.concat(G0(i.contextElement)))),H=H.filter(G=>{var K;return G!==((K=q.defaultView)==null?void 0:K.visualViewport)}),H.forEach(G=>{G.addEventListener("scroll",B,{passive:!0})}),()=>{l&&q.removeEventListener("keydown",A?N:k,A),b&&q.removeEventListener(f,R?O:L,R),H.forEach(G=>{G.removeEventListener("scroll",B)})}},[a,o,s,i,l,b,f,n,r,p,u,S,C,k,A,N,L,R,O]),P.useEffect(()=>{_.current=!1},[b,f]),P.useMemo(()=>u?{reference:{onKeyDown:k,[Prt[h]]:B=>{d&&r(!1,B.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[Drt[f]]:()=>{_.current=!0}}}:{},[u,d,f,h,r,k])}function Ort(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=LSe(),s=P.useRef({}),[o]=P.useState(()=>Srt()),a=FQ()!=null,[u,l]=P.useState(r.reference),c=zy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=P.useMemo(()=>({setPositionReference:l}),[]),d=P.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return P.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function UQ(e){e===void 0&&(e={});const{nodeId:t}=e,n=Ort({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=P.useState(null),[a,u]=P.useState(null),c=(i==null?void 0:i.reference)||s,f=P.useRef(null),d=BQ();Yp(()=>{c&&(f.current=c)},[c]);const h=yrt({...e,elements:{...i,...a&&{reference:a}}}),p=P.useCallback(b=>{const _=Es(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(_),h.refs.setReference(_)},[h.refs]),m=P.useCallback(b=>{(Es(b)||b===null)&&(f.current=b,o(b)),(Es(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Es(b))&&h.refs.setReference(b)},[h.refs]),g=P.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=P.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=P.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Yp(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(_=>_.id===t);b&&(b.context=v)}),P.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function $rt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=P.useRef(!1),c=P.useRef(),f=P.useRef(!0);return P.useEffect(()=>{if(!a)return;const d=oc(o);function h(){!n&&lf(o)&&o===Sde(hx(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),P.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),P.useEffect(()=>()=>{clearTimeout(c.current)},[]),P.useMemo(()=>a?{reference:{onPointerDown(d){wnt(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=_E(d.nativeEvent);if(u&&Es(h))try{if(Ent()&&Tnt())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!knt(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Es(h)&&h.hasAttribute(jQ("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Sde(o?o.ownerDocument:document);!h&&g===o||pR((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||pR(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Bde="active",jde="selected";function Vj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Bde]:o,[jde]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Bde,jde].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Lrt(e){e===void 0&&(e=[]);const t=e,n=P.useCallback(s=>Vj(s,e,"reference"),t),r=P.useCallback(s=>Vj(s,e,"floating"),t),i=P.useCallback(s=>Vj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return P.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const Mrt=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Frt(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Mrt.get(o))!=null?n:o,u=LSe(),c=FQ()!=null;return P.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function BSe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Ude(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function zde(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Brt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function jrt({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:$e(t),height:$e(t),transform:"rotate(45deg)",position:"absolute",[Brt[u]]:$e(r)},f=$e(-t/2);return u==="left"?{...c,...Ude(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Ude(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...zde(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...zde(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const zQ=P.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Lg();return s?w.jsx("div",{...l,ref:c,style:{...u,...jrt({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});zQ.displayName="@mantine/core/FloatingArrow";const[Urt,jSe]=Wa("Popover component was not found in the tree");function rF({children:e,active:t=!0,refProp:n="ref"}){const r=Eet(t),i=fo(r,e==null?void 0:e.ref);return Cv(e)?P.cloneElement(e,{[n]:i}):e}function USe(e){return w.jsx(AQ,{tabIndex:-1,"data-autofocus":!0,...e})}rF.displayName="@mantine/core/FocusTrap";USe.displayName="@mantine/core/FocusTrapInitialFocus";rF.InitialFocus=USe;function zrt(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Vrt={},zSe=P.forwardRef((e,t)=>{const{children:n,target:r,...i}=We("Portal",Vrt,e),[s,o]=P.useState(!1),a=P.useRef(null);return M_(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:zrt(i),gQ(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:W3.createPortal(w.jsx(w.Fragment,{children:n}),a.current)});zSe.displayName="@mantine/core/Portal";function ES({withinPortal:e=!0,children:t,...n}){return e?w.jsx(zSe,{...n,children:t}):w.jsx(w.Fragment,{children:t})}ES.displayName="@mantine/core/OptionalPortal";const fA=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${$e(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),XN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${$e(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${$e(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${$e(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${$e(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${$e(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...fA("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...fA("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...fA("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...fA("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...fA("top"),common:{transformOrigin:"top right"}}},Vde={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Hrt({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in XN?{transitionProperty:XN[e].transitionProperty,...i,...XN[e].common,...XN[e][Vde[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Vde[t]]}}function qrt({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ho(),l=JM(),c=u.respectReducedMotion?l:!1,[f,d]=P.useState(c?0:e),[h,p]=P.useState(r?"entered":"exited"),m=P.useRef(-1),g=P.useRef(-1),y=v=>{const b=v?i:s,_=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof _=="function"&&_(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{sI.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof _=="function"&&_(),p(v?"entered":"exited")},E)})})};return um(()=>{y(r)},[r]),P.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Fg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=qrt({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?w.jsx(w.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:w.jsx(w.Fragment,{children:s(Hrt({transition:t,duration:f,state:d,timingFunction:h}))})}Fg.displayName="@mantine/core/Transition";var VSe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Wrt={},VQ=ft((e,t)=>{var g,y,v,b;const n=We("PopoverDropdown",Wrt,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=jSe(),h=qTe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=fo(t,d.floating);return d.disabled?null:w.jsx(ES,{...d.portalProps,withinPortal:d.withinPortal,children:w.jsx(Fg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:_=>w.jsx(rF,{active:d.trapFocus,children:w.jsxs(ke,{...p,...f,variant:u,ref:m,onKeyDownCapture:cet(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{..._,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:$e(d.width)},i]}),children:[o,w.jsx(zQ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});VQ.classes=VSe;VQ.displayName="@mantine/core/PopoverDropdown";const Grt={refProp:"ref",popupType:"dialog"},HSe=ft((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=We("PopoverTarget",Grt,e);if(!Cv(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=jSe(),u=fo(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return P.cloneElement(n,{...o,...l,...a.targetProps,className:ao(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});HSe.displayName="@mantine/core/PopoverTarget";function qSe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=P.useState(0);P.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return lrt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),um(()=>{t.update()},r),um(()=>{s(o=>o+1)},[e])}function Yrt(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Krt(e,t){const n=Yrt(e.middlewares),r=[NSe(e.offset)];return n.shift&&r.push(MQ(typeof n.shift=="boolean"?{limiter:Nde(),padding:5}:{limiter:Nde(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?Oq():Oq(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?$q():$q(n.inline)),r.push(OSe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(brt({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function Xrt(e){const[t,n]=ya({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=UQ({strategy:e.strategy,placement:e.position,middleware:Krt(e,()=>s)});return qSe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),um(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),um(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const Qrt={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Vh("popover"),__staticSelector:"Popover",width:"max-content"},Jrt=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Bi(t),"--popover-shadow":pQ(n)}});function ac(e){var Se,Fe,st,yt,Pt,Je;const t=We("Popover",Qrt,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:_,portalProps:E,closeOnEscape:S,clickOutsideEvents:C,trapFocus:A,onClose:R,onOpen:k,onChange:N,zIndex:L,radius:O,shadow:B,id:q,defaultOpened:H,__staticSelector:G,withRoles:K,disabled:J,returnFocus:F,variant:j,keepMounted:W,vars:M,floatingStrategy:V,...Q}=t,se=Bt({name:G,props:t,classes:VSe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:M,varsResolver:Jrt}),be=P.useRef(null),[he,Ae]=P.useState(null),[Ne,rt]=P.useState(null),{dir:Re}=Lg(),Tt=Ou(q),Ze=Xrt({middlewares:c,width:l,position:BSe(Re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:be,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:H,onChange:N,onOpen:k,onClose:R,strategy:V});het(()=>b&&Ze.onClose(),C,[he,Ne]);const It=P.useCallback(we=>{Ae(we),Ze.floating.refs.setReference(we)},[Ze.floating.refs.setReference]),mt=P.useCallback(we=>{rt(we),Ze.floating.refs.setFloating(we)},[Ze.floating.refs.setFloating]);return w.jsx(Urt,{value:{returnFocus:F,disabled:J,controlled:Ze.controlled,reference:It,floating:mt,x:Ze.floating.x,y:Ze.floating.y,arrowX:(st=(Fe=(Se=Ze.floating)==null?void 0:Se.middlewareData)==null?void 0:Fe.arrow)==null?void 0:st.x,arrowY:(Je=(Pt=(yt=Ze.floating)==null?void 0:yt.middlewareData)==null?void 0:Pt.arrow)==null?void 0:Je.y,opened:Ze.opened,arrowRef:be,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ze.floating.placement,trapFocus:A,withinPortal:_,portalProps:E,zIndex:L,radius:O,shadow:B,closeOnEscape:S,onClose:Ze.onClose,onToggle:Ze.onToggle,getTargetId:()=>`${Tt}-target`,getDropdownId:()=>`${Tt}-dropdown`,withRoles:K,targetProps:Q,__staticSelector:G,classNames:y,styles:v,unstyled:g,variant:j,keepMounted:W,getStyles:se},children:n})}ac.Target=HSe;ac.Dropdown=VQ;ac.displayName="@mantine/core/Popover";ac.extend=e=>e;var hh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Zrt=P.forwardRef(({className:e,...t},n)=>w.jsxs(ke,{component:"span",className:ao(hh.barsLoader,e),...t,ref:n,children:[w.jsx("span",{className:hh.bar}),w.jsx("span",{className:hh.bar}),w.jsx("span",{className:hh.bar})]})),eit=P.forwardRef(({className:e,...t},n)=>w.jsxs(ke,{component:"span",className:ao(hh.dotsLoader,e),...t,ref:n,children:[w.jsx("span",{className:hh.dot}),w.jsx("span",{className:hh.dot}),w.jsx("span",{className:hh.dot})]})),tit=P.forwardRef(({className:e,...t},n)=>w.jsx(ke,{component:"span",className:ao(hh.ovalLoader,e),...t,ref:n})),WSe={bars:Zrt,oval:tit,dots:eit},nit={loaders:WSe,type:"oval"},rit=(e,{size:t,color:n})=>({root:{"--loader-size":Wn(t,"loader-size"),"--loader-color":n?$i(n,e):void 0}}),Tc=ft((e,t)=>{const n=We("Loader",nit,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Bt({name:"Loader",props:n,classes:hh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:rit});return p?w.jsx(ke,{...g("root"),ref:t,...m,children:p}):w.jsx(ke,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Tc.defaultLoaders=WSe;Tc.classes=hh;Tc.displayName="@mantine/core/Loader";var iF={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Hde={orientation:"horizontal"},iit=(e,{borderWidth:t})=>({group:{"--ai-border-width":$e(t)}}),HQ=ft((e,t)=>{const n=We("ActionIconGroup",Hde,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=We("ActionIconGroup",Hde,e),p=Bt({name:"ActionIconGroup",props:n,classes:iF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:iit,rootSelector:"group"});return w.jsx(ke,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});HQ.classes=iF;HQ.displayName="@mantine/core/ActionIconGroup";const sit={},oit=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Wn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Bi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},U_=Yo((e,t)=>{const n=We("ActionIcon",sit,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:_,mod:E,...S}=n,C=Bt({name:["ActionIcon",p],props:n,className:r,style:u,classes:iF,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:oit});return w.jsxs(uf,{...C("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[w.jsx(Fg,{mounted:!!l,transition:"slide-down",duration:150,children:A=>w.jsx(ke,{component:"span",...C("loader",{style:A}),"aria-hidden":!0,children:w.jsx(Tc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),w.jsx(ke,{component:"span",mod:{loading:l},...C("icon"),children:y})]})});U_.classes=iF;U_.displayName="@mantine/core/ActionIcon";U_.Group=HQ;const GSe=P.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));GSe.displayName="@mantine/core/CloseIcon";var YSe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const ait={variant:"subtle"},uit=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Wn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Bi(n),"--cb-icon-size":$e(r)}}),kv=Yo((e,t)=>{const n=We("CloseButton",ait,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=Bt({name:"CloseButton",props:n,className:a,style:l,classes:YSe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:uit});return w.jsxs(uf,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||w.jsx(GSe,{}),i]})});kv.classes=YSe;kv.displayName="@mantine/core/CloseButton";function lit(e){return P.Children.toArray(e).filter(Boolean)}var KSe={root:"m_4081bf90"};const cit={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},fit=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":To(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),bi=ft((e,t)=>{const n=We("Group",cit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,_=lit(u),E=_.length,S=To(l??"md"),A={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},R=Bt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:KSe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:fit});return w.jsx(ke,{...R("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:_})});bi.classes=KSe;bi.displayName="@mantine/core/Group";var XSe={root:"m_9814e45f"};const dit={zIndex:Vh("modal")},hit=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&gp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${$e(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Bi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),mR=Yo((e,t)=>{const n=We("Overlay",dit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,_=Bt({name:"Overlay",props:n,classes:XSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hit});return w.jsx(ke,{ref:t,..._("root"),mod:[{center:c,fixed:l},v],...b,children:f})});mR.classes=XSe;mR.displayName="@mantine/core/Overlay";const[pit,Bg]=Wa("ModalBase component was not found in tree");function mit({opened:e,transitionDuration:t}){const[n,r]=P.useState(e),i=P.useRef(),o=JM()?0:t;return P.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function git({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ou(e),[u,l]=P.useState(!1),[c,f]=P.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=mit({opened:n,transitionDuration:d});return KTe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),qTe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const yit=P.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},_)=>{const{_id:E,titleMounted:S,bodyMounted:C,shouldLockScroll:A,setTitleMounted:R,setBodyMounted:k}=git({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return w.jsx(ES,{...c,withinPortal:l,children:w.jsx(pit,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:C,setTitleMounted:R,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:w.jsx(nT,{enabled:A&&f,...v,children:w.jsx(ke,{ref:_,...b,__vars:{...g,"--mb-z-index":(h||Vh("modal")).toString(),"--mb-shadow":pQ(p),"--mb-padding":To(m)},children:d})})})})});function vit(){const e=Bg();return P.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var sT={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const QSe=P.forwardRef(({className:e,...t},n)=>{const r=vit(),i=Bg();return w.jsx(ke,{ref:n,...t,id:r,className:ao({[sT.body]:!i.unstyled},e)})});QSe.displayName="@mantine/core/ModalBaseBody";const JSe=P.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Bg();return w.jsx(kv,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:ao({[sT.close]:!i.unstyled},e),unstyled:i.unstyled})});JSe.displayName="@mantine/core/ModalBaseCloseButton";const bit=P.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Bg();return w.jsx(Fg,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>w.jsx("div",{...n,className:ao({[sT.inner]:!a.unstyled},n.className),children:w.jsx(rF,{active:a.opened&&a.trapFocus,children:w.jsx(xS,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:ao({[sT.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),ZSe=P.forwardRef(({className:e,...t},n)=>{const r=Bg();return w.jsx(ke,{component:"header",ref:n,className:ao({[sT.header]:!r.unstyled},e),...t})});ZSe.displayName="@mantine/core/ModalBaseHeader";const xit={duration:200,timingFunction:"ease",transition:"fade"};function _it(e){const t=Bg();return{...xit,...t.transitionProps,...e}}const eCe=P.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Bg(),o=_it(t);return w.jsx(Fg,{mounted:s.opened,...o,transition:"fade",children:a=>w.jsx(mR,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});eCe.displayName="@mantine/core/ModalBaseOverlay";function wit(){const e=Bg();return P.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const tCe=P.forwardRef(({className:e,...t},n)=>{const r=wit(),i=Bg();return w.jsx(ke,{component:"h2",ref:n,className:ao({[sT.title]:!i.unstyled},e),...t,id:r})});tCe.displayName="@mantine/core/ModalBaseTitle";function Eit({children:e}){return w.jsx(w.Fragment,{children:e})}const[Tit,TS]=vS({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var vd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const qde={},Sit=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${al(t)} - ${$e(2)})`}}),sF=ft((e,t)=>{const n=We("InputDescription",qde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=We("InputDescription",qde,n),p=TS(),m=Bt({name:["InputWrapper",c],props:n,classes:vd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:Sit}),g=f&&(p==null?void 0:p.getStyles)||m;return w.jsx(ke,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});sF.classes=vd;sF.displayName="@mantine/core/InputDescription";const Cit={},Ait=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${al(t)} - ${$e(2)})`}}),oF=ft((e,t)=>{const n=We("InputError",Cit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Bt({name:["InputWrapper",c],props:n,classes:vd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:Ait}),m=TS(),g=f&&(m==null?void 0:m.getStyles)||p;return w.jsx(ke,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});oF.classes=vd;oF.displayName="@mantine/core/InputError";const Wde={labelElement:"label"},Iit=(e,{size:t})=>({label:{"--input-label-size":al(t),"--input-asterisk-color":void 0}}),aF=ft((e,t)=>{const n=We("InputLabel",Wde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=We("InputLabel",Wde,n),b=Bt({name:["InputWrapper",m],props:n,classes:vd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:Iit}),_=TS(),E=(_==null?void 0:_.getStyles)||b;return w.jsxs(ke,{...E("label",_!=null&&_.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&w.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});aF.classes=vd;aF.displayName="@mantine/core/InputLabel";const Gde={},qQ=ft((e,t)=>{const n=We("InputPlaceholder",Gde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=We("InputPlaceholder",Gde,n),p=Bt({name:["InputPlaceholder",l],props:n,classes:vd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return w.jsx(ke,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});qQ.classes=vd;qQ.displayName="@mantine/core/InputPlaceholder";function kit(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const Rit={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Pit=(e,{size:t})=>({label:{"--input-label-size":al(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${al(t)} - ${$e(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${al(t)} - ${$e(2)})`}}),WQ=ft((e,t)=>{const n=We("InputWrapper",Rit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:_,children:E,withAsterisk:S,id:C,required:A,__stylesApiProps:R,mod:k,...N}=n,L=Bt({name:["InputWrapper",f],props:R||n,classes:vd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Pit}),O={size:l,variant:c,__staticSelector:f},B=Ou(C),q=typeof S=="boolean"?S:A,H=(b==null?void 0:b.id)||`${B}-error`,G=(v==null?void 0:v.id)||`${B}-description`,K=B,J=!!m&&typeof m!="boolean",F=!!g,j=`${J?H:""} ${F?G:""}`,W=j.trim().length>0?j.trim():void 0,M=(y==null?void 0:y.id)||`${B}-label`,V=p&&w.jsx(aF,{labelElement:_,id:M,htmlFor:K,required:q,...O,...y,children:p},"label"),Q=F&&w.jsx(sF,{...v,...O,size:(v==null?void 0:v.size)||O.size,id:(v==null?void 0:v.id)||G,children:g},"description"),se=w.jsx(P.Fragment,{children:d(E)},"input"),be=J&&P.createElement(oF,{...b,...O,size:(b==null?void 0:b.size)||O.size,key:"error",id:(b==null?void 0:b.id)||H},m),he=h.map(Ae=>{switch(Ae){case"label":return V;case"input":return se;case"description":return Q;case"error":return be;default:return null}});return w.jsx(Tit,{value:{getStyles:L,describedBy:W,inputId:K,labelId:M,...kit(h,{hasDescription:F,hasError:J})},children:w.jsx(ke,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...L("root"),...N,children:he})})});WQ.classes=vd;WQ.displayName="@mantine/core/InputWrapper";const Dit={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Nit=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Wn(t.size,"input-height"),"--input-fz":al(t.size),"--input-radius":t.radius===void 0?void 0:Bi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?$e(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?$e(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Wn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Ys=Yo((e,t)=>{const n=We("Input",Dit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:_,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:C,vars:A,pointer:R,multiline:k,radius:N,id:L,withAria:O,withErrorStyles:B,mod:q,inputSize:H,...G}=n,{styleProps:K,rest:J}=B_(G),F=TS(),j={offsetBottom:F==null?void 0:F.offsetBottom,offsetTop:F==null?void 0:F.offsetTop},W=Bt({name:["Input",l],props:c||n,classes:vd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:j,rootSelector:"wrapper",vars:A,varsResolver:Nit}),M=O?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":F==null?void 0:F.describedBy,id:(F==null?void 0:F.inputId)||L}:{};return w.jsxs(ke,{...W("wrapper"),...K,...d,mod:[{error:!!h&&B,pointer:R,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},q],variant:C,size:f,children:[m&&w.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),w.jsx(ke,{component:"input",...J,...M,ref:t,required:u,mod:{disabled:p,error:!!h&&B},variant:C,__size:H,...W("input")}),v&&w.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Ys.classes=vd;Ys.Wrapper=WQ;Ys.Label=aF;Ys.Error=oF;Ys.Description=sF;Ys.Placeholder=qQ;Ys.displayName="@mantine/core/Input";function Oit(e,t,n){const r=We(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:_,inputContainer:E,inputWrapperOrder:S,withAsterisk:C,variant:A,vars:R,mod:k,...N}=r,{styleProps:L,rest:O}=B_(N),B={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:_,inputContainer:E,inputWrapperOrder:S,withAsterisk:C,variant:A,id:v,mod:k,...y};return{...O,classNames:u,styles:l,unstyled:f,wrapperProps:{...B,...L},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const $it={__staticSelector:"InputBase",withAria:!0},bd=Yo((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Oit("InputBase",$it,e);return w.jsx(Ys.Wrapper,{...r,children:w.jsx(Ys,{...n,...i,ref:t})})});bd.classes={...Ys.classes,...Ys.Wrapper.classes};bd.displayName="@mantine/core/InputBase";const Lit={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var nCe={root:"m_8bffd616"};const Mit={},qt=Yo((e,t)=>{const n=We("Flex",Mit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Bt({name:"Flex",classes:nCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=ho(),b=K3(),_=sSe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:Lit});return w.jsxs(w.Fragment,{children:[_.hasResponsiveStyles&&w.jsx(F_,{selector:`.${b}`,styles:_.styles,media:_.media}),w.jsx(ke,{ref:t,...y("root",{className:b,style:Sv(_.inlineStyles)}),...g})]})});qt.classes=nCe;qt.displayName="@mantine/core/Flex";function Fit(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Bit({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=P.useRef(),[s,o]=P.useState(!1),[a,u]=P.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=P.useRef(),d=P.useRef();return P.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),P.useEffect(()=>{if(t){const h=p=>{Fit(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),$et(()=>{JTe()!=="test"&&o(!0)},20,{autoInvoke:!0}),Let(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var rCe={root:"m_96b553a6"};const jit={},Uit=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),GQ=ft((e,t)=>{const n=We("FloatingIndicator",jit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Bt({name:"FloatingIndicator",classes:rCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Uit}),g=P.useRef(null),{initialized:y,hidden:v}=Bit({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=fo(t,g);return!l||!c?null:w.jsx(ke,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});GQ.displayName="@mantine/core/FloatingIndicator";GQ.classes=rCe;const[zit,YQ]=Wa("Accordion component was not found in the tree");function uF({style:e,size:t=16,...n}){return w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:$e(t),height:$e(t),display:"block"},...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}uF.displayName="@mantine/core/AccordionChevron";const[Vit,iCe]=Wa("Accordion.Item component was not found in the tree");var Q3={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Hit={},KQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=We("AccordionControl",Hit,e),{value:m}=iCe(),g=YQ(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,_=w.jsxs(uf,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:hQ({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[w.jsx(ke,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),w.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&w.jsx(ke,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?w.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:_}):_});KQ.displayName="@mantine/core/AccordionControl";KQ.classes=Q3;const qit={},XQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=We("AccordionItem",qit,e),c=YQ();return w.jsx(Vit,{value:{value:a},children:w.jsx(ke,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});XQ.displayName="@mantine/core/AccordionItem";XQ.classes=Q3;const Wit={},QQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=We("AccordionPanel",Wit,e),{value:l}=iCe(),c=YQ();return w.jsx(eF,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:w.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});QQ.displayName="@mantine/core/AccordionPanel";QQ.classes=Q3;const Git={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:w.jsx(uF,{})},Yit=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:$e(n),"--accordion-radius":r===void 0?void 0:Bi(r)}});function Bl(e){const t=We("Accordion",Git,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:_,variant:E,radius:S,...C}=t,A=Ou(h),[R,k]=ya({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=B=>Array.isArray(R)?R.includes(B):B===R,L=B=>{const q=Array.isArray(R)?R.includes(B)?R.filter(H=>H!==B):[...R,B]:B===R?null:B;k(q)},O=Bt({name:"Accordion",classes:Q3,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:Yit});return w.jsx(zit,{value:{isItemActive:N,onChange:L,getControlId:y$(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:y$(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:_,loop:p,getStyles:O,variant:E,unstyled:o},children:w.jsx(ke,{...O("root"),id:A,...C,variant:E,"data-accordion":!0,children:u})})}const Kit=e=>e;Bl.extend=Kit;Bl.classes=Q3;Bl.displayName="@mantine/core/Accordion";Bl.Item=XQ;Bl.Panel=QQ;Bl.Control=KQ;Bl.Chevron=uF;var sCe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const Xit={},Qit=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Bi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Y0=ft((e,t)=>{const n=We("Alert",Xit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,..._}=n,E=Bt({name:"Alert",classes:sCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qit}),S=Ou(h),C=f&&`${S}-title`||void 0,A=`${S}-body`;return w.jsx(ke,{id:S,...E("root",{variant:v}),variant:v,ref:t,..._,role:"alert","aria-describedby":A,"aria-labelledby":C,children:w.jsxs("div",{...E("wrapper"),children:[p&&w.jsx("div",{...E("icon"),children:p}),w.jsxs("div",{...E("body"),children:[f&&w.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:w.jsx("span",{id:C,...E("label"),children:f})}),d&&w.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&w.jsx(kv,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Y0.classes=sCe;Y0.displayName="@mantine/core/Alert";var oCe={root:"m_b6d8b162"};function Jit(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const Zit={inherit:!1},est=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":al(i),"--text-lh":HTe(i),"--text-gradient":t==="gradient"?Aq(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?$i(s,e):void 0}}),ze=Yo((e,t)=>{const n=We("Text",Zit,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,_=Bt({name:["Text",l],props:n,classes:oCe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:est});return w.jsx(ke,{..._("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":Jit(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});ze.classes=oCe;ze.displayName="@mantine/core/Text";var aCe={root:"m_849cf0da"};const tst={underline:"hover"},Rv=Yo((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=We("Anchor",tst,e);return w.jsx(ze,{component:"a",ref:t,className:ao({[aCe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Rv.classes=aCe;Rv.displayName="@mantine/core/Anchor";const[nst,SS]=Wa("AppShell was not found in tree");var Pv={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const rst={},JQ=ft((e,t)=>{const n=We("AppShellAside",rst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=SS();return h.disabled?null:w.jsx(ke,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});JQ.classes=Pv;JQ.displayName="@mantine/core/AppShellAside";const ist={},ZQ=ft((e,t)=>{var p;const n=We("AppShellFooter",ist,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=SS();return h.disabled?null:w.jsx(ke,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:ao({[nT.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});ZQ.classes=Pv;ZQ.displayName="@mantine/core/AppShellFooter";const sst={},eJ=ft((e,t)=>{var p;const n=We("AppShellHeader",sst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=SS();return h.disabled?null:w.jsx(ke,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:ao({[nT.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});eJ.classes=Pv;eJ.displayName="@mantine/core/AppShellHeader";const ost={},tJ=ft((e,t)=>{const n=We("AppShellMain",ost,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=SS();return w.jsx(ke,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});tJ.classes=Pv;tJ.displayName="@mantine/core/AppShellMain";function J3(e){return typeof e=="object"?e.base:e}function Z3(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function eP(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function ast({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),Z3(s)){const f=$e(J3(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(eP(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=$e(s.base),e["--app-shell-aside-offset"]=$e(s.base)),Gi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=$e(s[f]),t[f]["--app-shell-aside-offset"]=$e(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=mQ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function ust({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(Z3(r)){const o=$e(J3(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}eP(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=$e(r.base),s&&(e["--app-shell-footer-offset"]=$e(r.base))),Gi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=$e(r[o]),s&&(t[o]["--app-shell-footer-offset"]=$e(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function lst({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(Z3(r)){const o=$e(J3(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}eP(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=$e(r.base),s&&(e["--app-shell-header-offset"]=$e(r.base))),Gi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=$e(r[o]),s&&(t[o]["--app-shell-header-offset"]=$e(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function cst({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),Z3(s)){const f=$e(J3(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(eP(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=$e(s.base),e["--app-shell-navbar-offset"]=$e(s.base)),Gi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=$e(s[f]),t[f]["--app-shell-navbar-offset"]=$e(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=mQ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Hj(e){return Number(e)===0?"0px":To(e)}function fst({padding:e,baseStyles:t,minMediaStyles:n}){Z3(e)&&(t["--app-shell-padding"]=Hj(J3(e))),eP(e)&&(e.base&&(t["--app-shell-padding"]=Hj(e.base)),Gi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Hj(e[r]))}))}function dst({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};cst({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),ast({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),lst({baseStyles:u,minMediaStyles:o,header:t}),ust({baseStyles:u,minMediaStyles:o,footer:n}),fst({baseStyles:u,minMediaStyles:o,padding:i});const l=dR(Gi(o),s).map(d=>({query:`(min-width: ${g$(d.px)})`,styles:o[d.value]})),c=dR(Gi(a),s).map(d=>({query:`(max-width: ${g$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function hst({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ho(),o=Av(),{media:a,baseStyles:u}=dst({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return w.jsx(F_,{media:a,styles:u,selector:o.cssVariablesSelector})}const pst={},nJ=ft((e,t)=>{const n=We("AppShellNavbar",pst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=SS();return h.disabled?null:w.jsx(ke,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});nJ.classes=Pv;nJ.displayName="@mantine/core/AppShellNavbar";const mst={},rJ=Yo((e,t)=>{const n=We("AppShellSection",mst,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=SS();return w.jsx(ke,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});rJ.classes=Pv;rJ.displayName="@mantine/core/AppShellSection";function gst({transitionDuration:e,disabled:t}){const[n,r]=P.useState(!0),i=P.useRef(),s=P.useRef();return KTe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),M_(()=>{P.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const yst={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Vh("app")},vst=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Oi=ft((e,t)=>{const n=We("AppShell",yst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:_,mod:E,...S}=n,C=Bt({name:"AppShell",classes:Pv,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vst}),A=gst({disabled:y,transitionDuration:d});return w.jsxs(nst,{value:{getStyles:C,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:_},children:[w.jsx(hst,{navbar:l,header:p,aside:v,footer:b,padding:f}),w.jsx(ke,{ref:t,...C("root"),mod:[{resizing:A,layout:g,disabled:y},E],...S})]})});Oi.classes=Pv;Oi.displayName="@mantine/core/AppShell";Oi.Navbar=nJ;Oi.Header=eJ;Oi.Main=tJ;Oi.Aside=JQ;Oi.Footer=ZQ;Oi.Section=rJ;function uCe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>uCe(t))}:e}function lCe(e){return e?e.map(t=>uCe(t)):[]}function iJ(e){return e.reduce((t,n)=>"group"in n?{...t,...iJ(n.items)}:(t[n.value]=n,t),{})}var hc={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const bst={error:null},xst=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Wn(t,"combobox-chevron-size")}}),sJ=ft((e,t)=>{const n=We("ComboboxChevron",bst,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Bt({name:"ComboboxChevron",classes:hc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:xst,rootSelector:"chevron"});return w.jsx(ke,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:w.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});sJ.classes=hc;sJ.displayName="@mantine/core/ComboboxChevron";const[_st,xd]=Wa("Combobox component was not found in tree"),cCe=P.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>w.jsx(kv,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));cCe.displayName="@mantine/core/ComboboxClearButton";const wst={},oJ=ft((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=We("ComboboxDropdown",wst,e),u=xd();return w.jsx(ac.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});oJ.classes=hc;oJ.displayName="@mantine/core/ComboboxDropdown";const Est={refProp:"ref"},fCe=ft((e,t)=>{const{children:n,refProp:r}=We("ComboboxDropdownTarget",Est,e);if(xd(),!Cv(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return w.jsx(ac.Target,{ref:t,refProp:r,children:n})});fCe.displayName="@mantine/core/ComboboxDropdownTarget";const Tst={},aJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("ComboboxEmpty",Tst,e),u=xd();return w.jsx(ke,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});aJ.classes=hc;aJ.displayName="@mantine/core/ComboboxEmpty";function uJ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=xd(),[a,u]=P.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Sst={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},dCe=ft((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=We("ComboboxEventsTarget",Sst,e);if(!Cv(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=xd(),f=uJ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return P.cloneElement(n,{...f,...l,[r]:fo(t,c.store.targetRef,n==null?void 0:n.ref)})});dCe.displayName="@mantine/core/ComboboxEventsTarget";const Cst={},lJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("ComboboxFooter",Cst,e),u=xd();return w.jsx(ke,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});lJ.classes=hc;lJ.displayName="@mantine/core/ComboboxFooter";const Ast={},cJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=We("ComboboxGroup",Ast,e),c=xd();return w.jsxs(ke,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&w.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});cJ.classes=hc;cJ.displayName="@mantine/core/ComboboxGroup";const Ist={},fJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("ComboboxHeader",Ist,e),u=xd();return w.jsx(ke,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});fJ.classes=hc;fJ.displayName="@mantine/core/ComboboxHeader";function hCe({value:e,valuesDivider:t=",",...n}){return w.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}hCe.displayName="@mantine/core/ComboboxHiddenInput";const kst={},dJ=ft((e,t)=>{const n=We("ComboboxOption",kst,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=xd(),v=P.useId(),b=l||v;return w.jsx(ke,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:_=>{var E;h?_.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(_))},onMouseDown:_=>{_.preventDefault(),f==null||f(_)},onMouseOver:_=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(_)}})});dJ.classes=hc;dJ.displayName="@mantine/core/ComboboxOption";const Rst={},hJ=ft((e,t)=>{const n=We("ComboboxOptions",Rst,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=xd(),d=Ou(a);return P.useEffect(()=>{f.store.setListId(d)},[d]),w.jsx(ke,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});hJ.classes=hc;hJ.displayName="@mantine/core/ComboboxOptions";const Pst={withAriaAttributes:!0,withKeyboardNavigation:!0},pJ=ft((e,t)=>{const n=We("ComboboxSearch",Pst,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=xd(),h=d.getStyles("search"),p=uJ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return w.jsx(Ys,{ref:fo(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});pJ.classes=hc;pJ.displayName="@mantine/core/ComboboxSearch";const Dst={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},pCe=ft((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=We("ComboboxTarget",Dst,e);if(!Cv(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=xd(),f=uJ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=P.cloneElement(n,{...f,...l});return w.jsx(ac.Target,{ref:fo(t,c.store.targetRef),children:d})});pCe.displayName="@mantine/core/ComboboxTarget";function Nst(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Ost(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function $st(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function mJ({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ya({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=P.useRef(null),c=P.useRef(-1),f=P.useRef(null),d=P.useRef(null),h=P.useRef(-1),p=P.useRef(-1),m=P.useRef(-1),g=P.useCallback((H="unknown")=>{a||(u(!0),i==null||i(H))},[u,i,a]),y=P.useCallback((H="unknown")=>{a&&(u(!1),r==null||r(H))},[u,r,a]),v=P.useCallback((H="unknown")=>{a?y(H):g(H)},[y,g,a]),b=P.useCallback(()=>{const H=document.querySelector(`#${l.current} [data-combobox-selected]`);H==null||H.removeAttribute("data-combobox-selected"),H==null||H.removeAttribute("aria-selected")},[]),_=P.useCallback(H=>{const G=document.getElementById(l.current),K=G==null?void 0:G.querySelectorAll("[data-combobox-option]");if(!K)return null;const J=H>=K.length?0:H<0?K.length-1:H;return c.current=J,K!=null&&K[J]&&!K[J].hasAttribute("data-combobox-disabled")?(b(),K[J].setAttribute("data-combobox-selected","true"),K[J].setAttribute("aria-selected","true"),K[J].scrollIntoView({block:"nearest",behavior:o}),K[J].id):null},[o,b]),E=P.useCallback(()=>{const H=document.querySelector(`#${l.current} [data-combobox-active]`);if(H){const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),K=Array.from(G).findIndex(J=>J===H);return _(K)}return _(0)},[_]),S=P.useCallback(()=>_(Ost(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[_,s]),C=P.useCallback(()=>_(Nst(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[_,s]),A=P.useCallback(()=>_($st(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[_]),R=P.useCallback((H="selected",G)=>{m.current=window.setTimeout(()=>{var F;const K=document.querySelectorAll(`#${l.current} [data-combobox-option]`),J=Array.from(K).findIndex(j=>j.hasAttribute(`data-combobox-${H}`));c.current=J,G!=null&&G.scrollIntoView&&((F=K[J])==null||F.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=P.useCallback(()=>{c.current=-1,b()},[b]),N=P.useCallback(()=>{const H=document.querySelectorAll(`#${l.current} [data-combobox-option]`),G=H==null?void 0:H[c.current];G==null||G.click()},[]),L=P.useCallback(H=>{l.current=H},[]),O=P.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),B=P.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),q=P.useCallback(()=>c.current,[]);return P.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:q,selectOption:_,selectFirstOption:A,selectActiveOption:E,selectNextOption:S,selectPreviousOption:C,resetSelectedOption:k,updateSelectedOptionIndex:R,listId:l.current,setListId:L,clickSelectedOption:N,searchRef:f,focusSearchInput:O,targetRef:d,focusTarget:B}}const Lst={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Mst=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":al(t),"--combobox-option-padding":Wn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:$e(n),"--combobox-option-fz":al(t),"--combobox-option-padding":Wn(t,"combobox-option-padding")}});function $r(e){const t=We("Combobox",Lst,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=mJ(),y=o||g,v=Bt({name:h||"Combobox",classes:hc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Mst}),b=()=>{l==null||l(),y.closeDropdown()};return w.jsx(_st,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:w.jsx(ac,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const Fst=e=>e;$r.extend=Fst;$r.classes=hc;$r.displayName="@mantine/core/Combobox";$r.Target=pCe;$r.Dropdown=oJ;$r.Options=hJ;$r.Option=dJ;$r.Search=pJ;$r.Empty=aJ;$r.Chevron=sJ;$r.Footer=lJ;$r.Header=fJ;$r.EventsTarget=dCe;$r.DropdownTarget=fCe;$r.Group=cJ;$r.ClearButton=cCe;$r.HiddenInput=hCe;var mCe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const gCe=mCe,lF=P.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,..._},E)=>{const S=Bt({name:e,props:t,className:n,style:y,classes:mCe,classNames:r,styles:i,unstyled:s});return w.jsx(ke,{...S("root"),ref:E,__vars:{"--label-fz":al(d),"--label-lh":Wn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,..._,children:w.jsxs(ke,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,w.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&w.jsx(ke,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&w.jsx(Ys.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&w.jsx(Ys.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});lF.displayName="@mantine/core/InlineInput";const yCe=P.createContext(null),Bst=yCe.Provider,vCe=()=>P.useContext(yCe),[jst,Ust]=vS();var bCe={card:"m_26775b0a"};const zst={withBorder:!0},Vst=(e,{radius:t})=>({card:{"--card-radius":Bi(t)}}),gJ=ft((e,t)=>{const n=We("CheckboxCard",zst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Bt({name:"CheckboxCard",classes:bCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vst,rootSelector:"card"}),g=vCe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return w.jsx(jst,{value:{checked:y},children:w.jsx(uf,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});gJ.displayName="@mantine/core/CheckboxCard";gJ.classes=bCe;function yJ({children:e,role:t}){const n=TS();return n?w.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):w.jsx(w.Fragment,{children:e})}const Hst={},vJ=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=We("CheckboxGroup",Hst,e),[c,f]=ya({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return w.jsx(Bst,{value:{value:c,onChange:d,size:s},children:w.jsx(Ys.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:w.jsx(yJ,{role:"group",children:a})})})});vJ.classes=Ys.Wrapper.classes;vJ.displayName="@mantine/core/CheckboxGroup";function xCe({size:e,style:t,...n}){const r=e!==void 0?{width:$e(e),height:$e(e),...t}:t;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function _Ce({indeterminate:e,...t}){return e?w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:w.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):w.jsx(xCe,{...t})}var wCe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const qst={icon:_Ce},Wst=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=km({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Wn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Bi(t),"--checkbox-color":s==="outline"?u:$i(n,e),"--checkbox-icon-color":i?$i(i,e):bS(o,e)?Iv({color:n,theme:e,autoContrast:o}):void 0}}},bJ=ft((e,t)=>{const n=We("CheckboxIndicator",qst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,_=l,E=Bt({name:"CheckboxIndicator",classes:wCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Wst,rootSelector:"indicator"}),S=Ust(),C=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return w.jsx(ke,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:C,disabled:v},g],...b,children:w.jsx(_,{indeterminate:c,...E("icon")})})});bJ.displayName="@mantine/core/CheckboxIndicator";bJ.classes=wCe;var ECe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Gst={labelPosition:"right",icon:_Ce},Yst=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=km({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Wn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Bi(t),"--checkbox-color":s==="outline"?u:$i(n,e),"--checkbox-icon-color":i?$i(i,e):bS(o,e)?Iv({color:n,theme:e,autoContrast:o}):void 0}}},Ql=ft((e,t)=>{const n=We("Checkbox",Gst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:_,variant:E,indeterminate:S,icon:C,rootRef:A,iconColor:R,onChange:k,autoContrast:N,mod:L,...O}=n,B=vCe(),q=d||(B==null?void 0:B.size),H=C,G=Bt({name:"Checkbox",props:n,classes:ECe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Yst}),{styleProps:K,rest:J}=B_(O),F=Ou(f),j=B?{checked:B.value.includes(J.value),onChange:W=>{B.onChange(W),k==null||k(W)}}:{};return w.jsx(lF,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:F,size:q,labelPosition:y,label:c,description:v,error:b,disabled:_,classNames:r,styles:o,unstyled:a,"data-checked":j.checked||g||void 0,variant:E,ref:A,mod:L,...K,...p,children:w.jsxs(ke,{...G("inner"),mod:{"data-label-position":y},children:[w.jsx(ke,{component:"input",id:F,ref:t,checked:g,disabled:_,mod:{error:!!b,indeterminate:S},...G("input",{focusable:!0,variant:E}),onChange:k,...J,...j,type:"checkbox"}),w.jsx(H,{indeterminate:S,...G("icon")})]})})});Ql.classes={...ECe,...gCe};Ql.displayName="@mantine/core/Checkbox";Ql.Group=vJ;Ql.Indicator=bJ;Ql.Card=gJ;function oT(e){return"group"in e}function TCe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;oT(o)&&i.push({group:o.group,items:TCe({options:o.items,search:t,limit:n-i.length})}),oT(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Kst(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function SCe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(oT(n))SCe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Xst(e,t){return Array.isArray(e)?e.includes(t):e===t}function CCe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!oT(e)){const a=Xst(n,e.value),u=t&&a&&w.jsx(xCe,{className:hc.optionsDropdownCheckIcon}),l=w.jsxs(w.Fragment,{children:[r==="left"&&u,w.jsx("span",{children:e.label}),r==="right"&&u]});return w.jsx($r.Option,{value:e.value,disabled:e.disabled,className:ao({[hc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>w.jsx(CCe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return w.jsx($r.Group,{label:e.group,children:o})}function ACe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){SCe(e);const b=typeof i=="string"?(r||TCe)({options:e,search:u?i:"",limit:s??1/0}):e,_=Kst(b),E=b.map(S=>w.jsx(CCe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},oT(S)?S.group:S.value));return w.jsx($r.Dropdown,{hidden:t||n&&_,children:w.jsxs($r.Options,{labelledBy:p,"aria-label":y,children:[a?w.jsx(fg.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,_&&d&&w.jsx($r.Empty,{children:d})]})})}var ICe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Qst={},Jst=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Wn(s,"badge-height"),"--badge-padding-x":Wn(s,"badge-padding-x"),"--badge-fz":Wn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Bi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?$i(n,e):void 0}}},b1=Yo((e,t)=>{const n=We("Badge",Qst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,..._}=n,E=Bt({name:"Badge",props:n,classes:ICe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jst});return w.jsxs(ke,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,..._,children:[d&&w.jsx("span",{...E("section"),"data-position":"left",children:d}),w.jsx("span",{...E("label"),children:p}),h&&w.jsx("span",{...E("section"),"data-position":"right",children:h})]})});b1.classes=ICe;b1.displayName="@mantine/core/Badge";var cF={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Yde={orientation:"horizontal"},Zst=(e,{borderWidth:t})=>({group:{"--button-border-width":$e(t)}}),xJ=ft((e,t)=>{const n=We("ButtonGroup",Yde,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=We("ButtonGroup",Yde,e),p=Bt({name:"ButtonGroup",props:n,classes:cF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Zst,rootSelector:"group"});return w.jsx(ke,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});xJ.classes=cF;xJ.displayName="@mantine/core/ButtonGroup";const eot={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${$e(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},tot={},not=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Wn(s,"button-height"),"--button-padding-x":Wn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?al(s.replace("compact-","")):al(s),"--button-radius":t===void 0?void 0:Bi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},on=Yo((e,t)=>{const n=We("Button",tot,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":_,autoContrast:E,mod:S,...C}=n,A=Bt({name:"Button",props:n,classes:cF,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:not}),R=!!l,k=!!c;return w.jsxs(uf,{ref:t,...A("root",{active:!a&&!p&&!_}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||_,loading:p,block:f,"with-left-section":R,"with-right-section":k},S],...C,children:[w.jsx(Fg,{mounted:!!p,transition:eot,duration:150,children:N=>w.jsx(ke,{component:"span",...A("loader",{style:N}),"aria-hidden":!0,children:w.jsx(Tc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),w.jsxs("span",{...A("inner"),children:[l&&w.jsx(ke,{component:"span",...A("section"),mod:{position:"left"},children:l}),w.jsx(ke,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&w.jsx(ke,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});on.classes=cF;on.displayName="@mantine/core/Button";on.Group=xJ;const[rot,iot]=Wa("Card component was not found in tree");var _J={root:"m_e615b15f",section:"m_599a2148"};const sot={},fF=Yo((e,t)=>{const n=We("CardSection",sot,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=iot();return w.jsx(ke,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});fF.classes=_J;fF.displayName="@mantine/core/CardSection";const oot={},aot=(e,{padding:t})=>({root:{"--card-padding":To(t)}}),CS=Yo((e,t)=>{const n=We("Card",oot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Bt({name:"Card",props:n,classes:_J,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aot}),h=P.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===fF?P.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return w.jsx(rot,{value:{getStyles:d},children:w.jsx(xS,{ref:t,unstyled:a,...d("root"),...f,children:p})})});CS.classes=_J;CS.displayName="@mantine/core/Card";CS.Section=fF;var kCe={root:"m_4451eb3a"};const uot={},Wo=Yo((e,t)=>{const n=We("Center",uot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Bt({name:"Center",props:n,classes:kCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return w.jsx(ke,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Wo.classes=kCe;Wo.displayName="@mantine/core/Center";var RCe={root:"m_b183c0a2"};const lot={},cot=(e,{color:t})=>({root:{"--code-bg":t?$i(t,e):void 0}}),ik=ft((e,t)=>{const n=We("Code",lot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Bt({name:"Code",props:n,classes:RCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cot});return w.jsx(ke,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});ik.classes=RCe;ik.displayName="@mantine/core/Code";var PCe={root:"m_7485cace"};const fot={},dot=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Wn(t,"container-size")}}),fl=ft((e,t)=>{const n=We("Container",fot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Bt({name:"Container",classes:PCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dot});return w.jsx(ke,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});fl.classes=PCe;fl.displayName="@mantine/core/Container";var DCe={root:"m_3eebeb36",label:"m_9e365f20"};const hot={orientation:"horizontal"},pot=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?$i(t,e):void 0,"--divider-border-style":n,"--divider-size":Wn(r,"divider-size")}}),AS=ft((e,t)=>{const n=We("Divider",hot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Bt({name:"Divider",classes:DCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pot});return w.jsx(ke,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&w.jsx(ke,{component:"span",mod:{position:d},...m("label"),children:f})})});AS.classes=DCe;AS.displayName="@mantine/core/Divider";function mot({open:e,close:t,openDelay:n,closeDelay:r}){const i=P.useRef(-1),s=P.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return P.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[got,NCe]=Wa("Grid component was not found in tree"),Mq=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Kde=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":Mq(e,t),Xde=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Qde=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function yot({span:e,order:t,offset:n,selector:r}){var d;const i=ho(),s=NCe(),a=dh(e)===void 0?12:dh(e),u=Sv({"--col-order":(d=dh(t))==null?void 0:d.toString(),"--col-flex-grow":Xde(a,s.grow),"--col-flex-basis":Mq(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Kde(a,s.columns,s.grow),"--col-offset":Qde(dh(n),s.columns)}),l=Gi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Xde(e[p],s.grow),h[p]["--col-flex-basis"]=Mq(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Kde(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Qde(n[p],s.columns)),h},{}),f=dR(Gi(l),i).filter(h=>Gi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return w.jsx(F_,{styles:u,media:f,selector:r})}var wJ={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const vot={span:12},EJ=ft((e,t)=>{const n=We("GridCol",vot,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=NCe(),h=K3();return w.jsxs(w.Fragment,{children:[w.jsx(yot,{selector:`.${h}`,span:u,order:l,offset:c}),w.jsx(ke,{ref:t,...d.getStyles("col",{className:ao(i,h),style:s,classNames:r,styles:o}),...f})]})});EJ.classes=wJ;EJ.displayName="@mantine/core/GridCol";function bot({gutter:e,selector:t}){const n=ho(),r=Sv({"--grid-gutter":To(dh(e))}),i=Gi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=To(e[u])),a),{}),o=dR(Gi(i),n).filter(a=>Gi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return w.jsx(F_,{styles:r,media:o,selector:t})}const xot={gutter:"md",grow:!1,columns:12},_ot=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Yc=ft((e,t)=>{const n=We("Grid",xot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Bt({name:"Grid",classes:wJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_ot}),y=K3();return w.jsxs(got,{value:{getStyles:g,grow:l,columns:f},children:[w.jsx(bot,{selector:`.${y}`,...n}),w.jsx(ke,{ref:t,...g("root",{className:y}),...m,children:w.jsx("div",{...g("inner"),children:p})})]})});Yc.classes=wJ;Yc.displayName="@mantine/core/Grid";Yc.Col=EJ;var OCe={root:"m_9e117634"};const wot={},Eot=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Bi(t),"--image-object-fit":n}}),Dv=Yo((e,t)=>{const n=We("Image",wot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=P.useState(!c);P.useEffect(()=>y(!c),[c]);const v=Bt({name:"Image",classes:OCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Eot});return g&&h?w.jsx(ke,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):w.jsx(ke,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Dv.classes=OCe;Dv.displayName="@mantine/core/Image";function T$(){return T$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T$.apply(null,arguments)}function TJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Tot=P.useLayoutEffect,Sot=function(t){var n=P.useRef(t);return Tot(function(){n.current=t}),n},Jde=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Cot=function(t,n){var r=P.useRef();return P.useCallback(function(i){t.current=i,r.current&&Jde(r.current,null),r.current=n,n&&Jde(n,i)},[n])},Zde={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Aot=function(t){Object.keys(Zde).forEach(function(n){t.style.setProperty(n,Zde[n],"important")})},ehe=Aot,Hu=null,the=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Iot(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Hu||(Hu=document.createElement("textarea"),Hu.setAttribute("tabindex","-1"),Hu.setAttribute("aria-hidden","true"),ehe(Hu)),Hu.parentNode===null&&document.body.appendChild(Hu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Hu.style[h]=o[h]}),ehe(Hu),Hu.value=t;var u=the(Hu,e);Hu.value=t,u=the(Hu,e),Hu.value="x";var l=Hu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var nhe=function(){},kot=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Rot=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Pot=!!document.documentElement.currentStyle,Dot=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=kot(Rot,n),i=r.boxSizing;if(i==="")return null;Pot&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Not=Dot;function $Ce(e,t,n){var r=Sot(n);P.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var Oot=function(t){$Ce(window,"resize",t)},$ot=function(t){$Ce(document.fonts,"loadingdone",t)},Lot=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Mot=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?nhe:o,u=t.onHeightChange,l=u===void 0?nhe:u,c=TJ(t,Lot),f=c.value!==void 0,d=P.useRef(null),h=Cot(d,n),p=P.useRef(0),m=P.useRef(),g=function(){var b=d.current,_=r&&m.current?m.current:Not(b);if(_){m.current=_;var E=Iot(_,b.value||b.placeholder||"x",s,i),S=E[0],C=E[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:C}))}},y=function(b){f||g(),a(b)};return P.useLayoutEffect(g),Oot(g),$ot(g),P.createElement("textarea",T$({},c,{onChange:y,ref:h}))},Fot=P.forwardRef(Mot);const Bot={},SJ=ft((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=We("Textarea",Bot,e),u=n&&JTe()!=="test",l=u?{maxRows:r,minRows:i}:{};return w.jsx(bd,{component:u?Fot:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});SJ.classes=bd.classes;SJ.displayName="@mantine/core/Textarea";const[jot,Uot]=Wa("List component was not found in tree");var CJ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const zot={},AJ=ft((e,t)=>{const n=We("ListItem",zot,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=Uot(),h=u||d.icon,p={classNames:r,styles:o};return w.jsx(ke,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:w.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&w.jsx("span",{...d.getStyles("itemIcon",p),children:h}),w.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});AJ.classes=CJ;AJ.displayName="@mantine/core/ListItem";const Vot={type:"unordered"},Hot=(e,{size:t,spacing:n})=>({root:{"--list-fz":al(t),"--list-lh":HTe(t),"--list-spacing":To(n)}}),io=ft((e,t)=>{const n=We("List",Vot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Bt({name:"List",classes:CJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Hot});return w.jsx(jot,{value:{center:p,icon:d,getStyles:v},children:w.jsx(ke,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});io.classes=CJ;io.displayName="@mantine/core/List";io.Item=AJ;var LCe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const rhe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Vh("overlay")},qot=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),cf=ft((e,t)=>{const n=We("LoadingOverlay",rhe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=ho(),g=Bt({name:"LoadingOverlay",classes:LCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qot}),y={...rhe.overlayProps,...f};return w.jsx(Fg,{transition:"fade",...l,mounted:!!d,children:v=>w.jsxs(ke,{...g("root",{style:v}),ref:t,...p,children:[w.jsx(Tc,{...g("loader"),unstyled:a,...c}),w.jsx(mR,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),w.jsx(mR,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});cf.classes=LCe;cf.displayName="@mantine/core/LoadingOverlay";const[Wot,tP]=Wa("Menu component was not found in the tree");var IS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Got={},IJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("MenuDivider",Got,e),u=tP();return w.jsx(ke,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});IJ.classes=IS;IJ.displayName="@mantine/core/MenuDivider";const Yot={},kJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=We("MenuDropdown",Yot,e),f=P.useRef(null),d=tP(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=O0(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=O0(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return w.jsxs(ac.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:fo(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[w.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});kJ.classes=IS;kJ.displayName="@mantine/core/MenuDropdown";const Kot={},RJ=Yo((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=We("MenuItem",Kot,e),p=tP(),m=ho(),{dir:g}=Lg(),y=P.useRef(),v=p.getItemIndex(y.current),b=h,_=O0(b.onMouseLeave,()=>p.setHovered(-1)),E=O0(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=O0(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),C=O0(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,R=a?km({color:a,theme:m}):null;return w.jsxs(uf,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:C,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:fo(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:_,onClick:S,onKeyDown:hQ({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&w.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&w.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&w.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});RJ.classes=IS;RJ.displayName="@mantine/core/MenuItem";const Xot={},PJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("MenuLabel",Xot,e),u=tP();return w.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});PJ.classes=IS;PJ.displayName="@mantine/core/MenuLabel";const Qot={refProp:"ref"},MCe=P.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=We("MenuTarget",Qot,e);if(!Cv(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=tP(),o=O0(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=O0(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=O0(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return w.jsx(ac.Target,{refProp:r,popupType:"menu",ref:t,...i,children:P.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});MCe.displayName="@mantine/core/MenuTarget";const Jot={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Qu(e){const t=We("Menu",Jot,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:_,keepMounted:E,...S}=t,C=Bt({name:"Menu",classes:IS,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:R,resetHovered:k}]=det(),[N,L]=ya({value:s,defaultValue:o,finalValue:!1,onChange:u}),[O,B]=P.useState(!1),q=()=>{L(!1),B(!1),N&&(i==null||i())},H=()=>{L(!0),!N&&(r==null||r())},G=()=>{N?q():H()},{openDropdown:K,closeDropdown:J}=mot({open:H,close:q,closeDelay:p,openDelay:h}),F=M=>fet("[data-menu-item]","[data-menu-dropdown]",M),{resolvedClassNames:j,resolvedStyles:W}=Y3({classNames:m,styles:g,props:t});return um(()=>{k()},[N]),w.jsx(Wot,{value:{getStyles:C,opened:N,toggleDropdown:G,getItemIndex:F,hovered:A,setHovered:R,openedViaClick:O,setOpenedViaClick:B,closeOnItemClick:l,closeDropdown:d==="click"?q:J,openDropdown:d==="click"?H:K,closeDropdownImmediately:q,loop:c,trigger:d,unstyled:y,menuItemTabIndex:_},children:w.jsx(ac,{...S,opened:N,onChange:G,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:j,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Qu.extend=e=>e;Qu.classes=IS;Qu.displayName="@mantine/core/Menu";Qu.Item=RJ;Qu.Label=PJ;Qu.Dropdown=kJ;Qu.Target=MCe;Qu.Divider=IJ;const[Zot,kS]=Wa("Modal component was not found in tree");var jg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const eat={},dF=ft((e,t)=>{const n=We("ModalBody",eat,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=kS();return w.jsx(QSe,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});dF.classes=jg;dF.displayName="@mantine/core/ModalBody";const tat={},hF=ft((e,t)=>{const n=We("ModalCloseButton",tat,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=kS();return w.jsx(JSe,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});hF.classes=jg;hF.displayName="@mantine/core/ModalCloseButton";const nat={},pF=ft((e,t)=>{const n=We("ModalContent",nat,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=kS(),f=c.scrollAreaComponent||Eit;return w.jsx(bit,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:w.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${$e(c.yOffset)} * 2))`},children:u})})});pF.classes=jg;pF.displayName="@mantine/core/ModalContent";const rat={},mF=ft((e,t)=>{const n=We("ModalHeader",rat,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=kS();return w.jsx(ZSe,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});mF.classes=jg;mF.displayName="@mantine/core/ModalHeader";const iat={},gF=ft((e,t)=>{const n=We("ModalOverlay",iat,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=kS();return w.jsx(eCe,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});gF.classes=jg;gF.displayName="@mantine/core/ModalOverlay";const sat={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Vh("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},oat=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Bi(t),"--modal-size":Wn(n,"modal-size"),"--modal-y-offset":$e(r),"--modal-x-offset":$e(i)}}),yF=ft((e,t)=>{const n=We("ModalRoot",sat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Bt({name:m,classes:jg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oat});return w.jsx(Zot,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:w.jsx(yit,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});yF.classes=jg;yF.displayName="@mantine/core/ModalRoot";const aat={},vF=ft((e,t)=>{const n=We("ModalTitle",aat,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=kS();return w.jsx(tCe,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});vF.classes=jg;vF.displayName="@mantine/core/ModalTitle";const uat={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Vh("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ws=ft((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=We("Modal",uat,e),c=!!n||s;return w.jsxs(yF,{ref:t,radius:u,...l,children:[r&&w.jsx(gF,{...i}),w.jsxs(pF,{radius:u,children:[c&&w.jsxs(mF,{children:[n&&w.jsx(vF,{children:n}),s&&w.jsx(hF,{...o})]}),w.jsx(dF,{children:a})]})]})});Ws.classes=jg;Ws.displayName="@mantine/core/Modal";Ws.Root=yF;Ws.Overlay=gF;Ws.Content=pF;Ws.Body=dF;Ws.Header=mF;Ws.Title=vF;Ws.CloseButton=hF;const[lat,DJ]=vS(),[cat,fat]=vS();var bF={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const dat={},hat=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Wn(t):Wn(n,"pg-gap")}}),NJ=ft((e,t)=>{const n=We("PillGroup",dat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=DJ(),h=(d==null?void 0:d.size)||l||void 0,p=Bt({name:"PillGroup",classes:bF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hat,stylesCtx:{size:h},rootSelector:"group"});return w.jsx(cat,{value:{size:h,disabled:c},children:w.jsx(ke,{ref:t,size:h,...p("group"),...f})})});NJ.classes=bF;NJ.displayName="@mantine/core/PillGroup";const pat={variant:"default"},mat=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Wn(n,"pill-fz"),"--pill-height":Wn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Bi(t)}}),gR=ft((e,t)=>{const n=We("Pill",pat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=fat(),_=DJ(),E=m||(b==null?void 0:b.size)||void 0,S=(_==null?void 0:_.variant)==="filled"?"contrast":l||"default",C=Bt({name:"Pill",classes:bF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mat,stylesCtx:{size:E}});return w.jsxs(ke,{component:"span",ref:t,variant:S,size:E,...C("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[w.jsx("span",{...C("label"),children:c}),f&&w.jsx(kv,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...C("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var R;A.preventDefault(),A.stopPropagation(),(R=h==null?void 0:h.onMouseDown)==null||R.call(h,A)},onClick:A=>{var R;A.stopPropagation(),d==null||d(),(R=h==null?void 0:h.onClick)==null||R.call(h,A)}})]})});gR.classes=bF;gR.displayName="@mantine/core/Pill";gR.Group=NJ;var FCe={field:"m_45c4369d"};const gat={type:"visible"},OJ=ft((e,t)=>{const n=We("PillsInputField",gat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=DJ(),g=TS(),y=Bt({name:"PillsInputField",classes:FCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return w.jsx(ke,{component:"input",ref:fo(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});OJ.classes=FCe;OJ.displayName="@mantine/core/PillsInputField";const yat={},S$=ft((e,t)=>{const n=We("PillsInput",yat,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=P.useRef();return w.jsx(lat,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:w.jsx(bd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});S$.displayName="@mantine/core/PillsInput";S$.Field=OJ;function vat({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(oT(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const bat={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},$J=ft((e,t)=>{const n=We("MultiSelect",bat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:_,onOptionSubmit:E,comboboxProps:S,filter:C,limit:A,withScrollArea:R,maxDropdownHeight:k,searchValue:N,defaultSearchValue:L,onSearchChange:O,readOnly:B,disabled:q,onFocus:H,onBlur:G,onPaste:K,radius:J,rightSection:F,rightSectionWidth:j,rightSectionPointerEvents:W,rightSectionProps:M,leftSection:V,leftSectionWidth:Q,leftSectionPointerEvents:se,leftSectionProps:be,inputContainer:he,inputWrapperOrder:Ae,withAsterisk:Ne,labelProps:rt,descriptionProps:Re,errorProps:Tt,wrapperProps:Ze,description:It,label:mt,error:Se,maxValues:Fe,searchable:st,nothingFoundMessage:yt,withCheckIcon:Pt,checkIconPosition:Je,hidePickedOptions:we,withErrorStyles:kt,name:Rt,form:Ee,id:Oe,clearable:ot,clearButtonProps:xt,hiddenInputProps:jt,placeholder:Un,hiddenInputValuesDivider:dr,required:Sr,mod:xi,renderOption:Sn,onRemove:zn,onClear:hr,scrollAreaProps:gr,...Qo}=n,ts=Ou(Oe),hs=lCe(m),Ns=iJ(hs),Vr=mJ({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Vr.resetSelectedOption()}}),{styleProps:ps,rest:{type:kc,autoComplete:Jo,...Mu}}=B_(Qo),[Br,ki]=ya({value:c,defaultValue:f,finalValue:[],onChange:d}),[mi,Qs]=ya({value:N,defaultValue:L,finalValue:"",onChange:O}),oi=Bt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ri,resolvedStyles:me}=Y3({props:n,styles:o,classNames:r}),ue=_t=>{h==null||h(_t),_t.key===" "&&!st&&(_t.preventDefault(),Vr.toggleDropdown()),_t.key==="Backspace"&&mi.length===0&&Br.length>0&&(zn==null||zn(Br[Br.length-1]),ki(Br.slice(0,Br.length-1)))},ge=Br.map((_t,Ut)=>{var dn,Zn;return w.jsx(gR,{withRemoveButton:!B&&!((dn=Ns[_t])!=null&&dn.disabled),onRemove:()=>{ki(Br.filter(ur=>_t!==ur)),zn==null||zn(_t)},unstyled:a,disabled:q,...oi("pill"),children:((Zn=Ns[_t])==null?void 0:Zn.label)||_t},`${_t}-${Ut}`)});P.useEffect(()=>{_&&Vr.selectFirstOption()},[_,Br]);const Me=ot&&Br.length>0&&!q&&!B&&w.jsx($r.ClearButton,{size:l,...xt,onClear:()=>{hr==null||hr(),ki([]),Qs("")}}),Le=vat({data:hs,value:Br});return w.jsxs(w.Fragment,{children:[w.jsxs($r,{store:Vr,classNames:Ri,styles:me,unstyled:a,size:l,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:_t=>{E==null||E(_t),Qs(""),Vr.updateSelectedOptionIndex("selected"),Br.includes(Ns[_t].value)?(ki(Br.filter(Ut=>Ut!==Ns[_t].value)),zn==null||zn(Ns[_t].value)):Br.length<Fe&&ki([...Br,Ns[_t].value])},...S,children:[w.jsx($r.DropdownTarget,{children:w.jsx(S$,{...ps,__staticSelector:"MultiSelect",classNames:Ri,styles:me,unstyled:a,size:l,className:i,style:s,variant:p,disabled:q,radius:J,rightSection:F||Me||w.jsx($r.Chevron,{size:l,error:Se,unstyled:a}),rightSectionPointerEvents:W||(Me?"all":"none"),rightSectionWidth:j,rightSectionProps:M,leftSection:V,leftSectionWidth:Q,leftSectionPointerEvents:se,leftSectionProps:be,inputContainer:he,inputWrapperOrder:Ae,withAsterisk:Ne,labelProps:rt,descriptionProps:Re,errorProps:Tt,wrapperProps:Ze,description:It,label:mt,error:Se,multiline:!0,withErrorStyles:kt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Me?"all":"none"),multiline:!0},pointer:!st,onClick:()=>st?Vr.openDropdown():Vr.toggleDropdown(),"data-expanded":Vr.dropdownOpened||void 0,id:ts,required:Sr,mod:xi,children:w.jsxs(gR.Group,{disabled:q,unstyled:a,...oi("pillsList"),children:[ge,w.jsx($r.EventsTarget,{autoComplete:Jo,children:w.jsx(S$.Field,{...Mu,ref:t,id:ts,placeholder:Un,type:!st&&!Un?"hidden":"visible",...oi("inputField"),unstyled:a,onFocus:_t=>{H==null||H(_t),st&&Vr.openDropdown()},onBlur:_t=>{G==null||G(_t),Vr.closeDropdown(),Qs("")},onKeyDown:ue,value:mi,onChange:_t=>{Qs(_t.currentTarget.value),st&&Vr.openDropdown(),_&&Vr.selectFirstOption()},disabled:q,readOnly:B||!st,pointer:!st})})]})})}),w.jsx(ACe,{data:we?Le:hs,hidden:B||q,filter:C,search:mi,limit:A,hiddenWhenEmpty:!st||!yt||we&&Le.length===0&&mi.trim().length===0,withScrollArea:R,maxDropdownHeight:k,filterOptions:st,value:Br,checkIconPosition:Je,withCheckIcon:Pt,nothingFoundMessage:yt,unstyled:a,labelId:mt?`${ts}-label`:void 0,"aria-label":mt?void 0:Qo["aria-label"],renderOption:Sn,scrollAreaProps:gr})]}),w.jsx($r.HiddenInput,{name:Rt,valuesDivider:dr,value:Br,form:Ee,disabled:q,...jt})]})});$J.classes={...bd.classes,...$r.classes};$J.displayName="@mantine/core/MultiSelect";var BCe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const xat={},_at=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":To(r)}}},xF=Yo((e,t)=>{const n=We("NavLink",xat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:_,noWrap:E,childrenOffset:S,onKeyDown:C,autoContrast:A,mod:R,...k}=n,N=Bt({name:"NavLink",props:n,classes:BCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_at}),[L,O]=ya({value:l,defaultValue:c,finalValue:!1,onChange:f}),B=!!d,q=H=>{h==null||h(H),B&&(H.preventDefault(),O(!L))};return w.jsxs(w.Fragment,{children:[w.jsxs(uf,{...N("root"),component:"a",ref:t,onClick:q,onKeyDown:H=>{C==null||C(H),H.nativeEvent.code==="Space"&&B&&(H.preventDefault(),O(!L))},unstyled:a,mod:[{disabled:m,active:p,expanded:L},R],...k,children:[g&&w.jsx(ke,{component:"span",...N("section"),mod:{position:"left"},children:g}),w.jsxs(ke,{...N("body"),mod:{"no-wrap":E},children:[w.jsx(ke,{component:"span",...N("label"),children:v}),w.jsx(ke,{component:"span",mod:{active:p},...N("description"),children:b})]}),(B||y)&&w.jsx(ke,{...N("section"),component:"span",mod:{rotate:L&&!_,position:"right"},children:B?y||w.jsx(uF,{...N("chevron")}):y})]}),w.jsx(eF,{in:L,...N("collapse"),children:w.jsx("div",{...N("children"),children:d})})]})});xF.classes=BCe;xF.displayName="@mantine/core/NavLink";var jCe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const wat={withCloseButton:!0},Eat=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Bi(t),"--notification-color":n?$i(n,e):void 0}}),LJ=ft((e,t)=>{const n=We("Notification",wat,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:_,...E}=n,S=Bt({name:"Notification",classes:jCe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:Eat});return w.jsxs(ke,{...S("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},_],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&w.jsx("div",{...S("icon"),children:c}),o&&w.jsx(Tc,{size:28,color:i,...S("loader")}),w.jsxs("div",{...S("body"),children:[l&&w.jsx("div",{...S("title"),children:l}),w.jsx(ke,{...S("description"),mod:{"data-with-title":!!l},children:f})]}),a&&w.jsx(kv,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...S("closeButton")})]})});LJ.classes=jCe;LJ.displayName="@mantine/core/Notification";function UCe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var yR;(function(e){e.event="event",e.props="prop"})(yR||(yR={}));function Vy(){}function Tat(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function vR(e){return!!(e||"").match(/\d/)}function g2(e){return e==null}function Sat(e){return typeof e=="number"&&isNaN(e)}function zCe(e){return g2(e)||Sat(e)||typeof e=="number"&&!isFinite(e)}function VCe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Cat(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Aat(e,t,n){var r=Cat(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Iat(e){var t=P.useRef(e);t.current=e;var n=P.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function MJ(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function kat(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function HCe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function ihe(e,t){return Array(t+1).join(e)}function qCe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+ihe("0",Math.abs(o))+i:o>=a?i=i+ihe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function she(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=MJ(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=HCe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Xb(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var WCe=Tat(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),Rat=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Pat(e,t,n){return Math.min(Math.max(e,t),n)}function qj(e){return Math.max(e.selectionStart,e.selectionEnd)}function Dat(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Nat(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Oat(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function $at(e,t,n,r,i,s,o){o===void 0&&(o=Oat);var a=i.findIndex(function(_){return _}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function ohe(e,t,n,r){var i=e.length;if(t=Pat(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function Lat(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(vR(e[n])||vR(e[n-1]));return t}function GCe(e,t,n,r,i,s){s===void 0&&(s=Vy);var o=Iat(function(p,m){var g,y;return zCe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?qCe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=P.useState(function(){return o(g2(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;g2(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return P.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function Mat(e){return e.replace(/[^0-9]/g,"")}function Fat(e){return e}function Bat(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=Fat);var a=e.removeFormatting;a===void 0&&(a=Mat);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Vy);var h=e.onKeyDown;h===void 0&&(h=Vy);var p=e.onMouseUp;p===void 0&&(p=Vy);var m=e.onFocus;m===void 0&&(m=Vy);var g=e.onBlur;g===void 0&&(g=Vy);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=Lat);var b=e.isValidInputCharacter;b===void 0&&(b=vR);var _=e.isCharacterSame,E=UCe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=GCe(y,u,!!l,o,a,c),C=S[0],A=C.formattedValue,R=C.numAsString,k=S[1],N=P.useRef(),L=P.useRef({formattedValue:A,numAsString:R}),O=function(Se,Fe){L.current={formattedValue:Se.formattedValue,numAsString:Se.value},k(Se,Fe)},B=P.useState(!1),q=B[0],H=B[1],G=P.useRef(null),K=P.useRef({setCaretTimeout:null,focusTimeout:null});P.useEffect(function(){return H(!0),function(){clearTimeout(K.current.setCaretTimeout),clearTimeout(K.current.focusTimeout)}},[]);var J=o,F=function(Se,Fe){var st=parseFloat(Fe);return{formattedValue:Se,value:Fe,floatValue:isNaN(st)?void 0:st}},j=function(Se,Fe,st){Se.selectionStart===0&&Se.selectionEnd===Se.value.length||(Xb(Se,Fe),K.current.setCaretTimeout=setTimeout(function(){Se.value===st&&Se.selectionStart!==Fe&&Xb(Se,Fe)},0))},W=function(Se,Fe,st){return ohe(Se,Fe,v(Se),st)},M=function(Se,Fe,st){var yt=v(Fe),Pt=$at(Fe,A,Se,st,yt,b,_);return Pt=ohe(Fe,Pt,yt),Pt},V=function(Se){var Fe=Se.formattedValue;Fe===void 0&&(Fe="");var st=Se.input,yt=Se.source,Pt=Se.event,Je=Se.numAsString,we;if(st){var kt=Se.inputValue||st.value,Rt=qj(st);st.value=Fe,we=M(kt,Fe,Rt),we!==void 0&&j(st,we,Fe)}Fe!==A&&O(F(Fe,Je),{event:Pt,source:yt})};P.useEffect(function(){var Se=L.current,Fe=Se.formattedValue,st=Se.numAsString;(A!==Fe||R!==st)&&O(F(A,R),{event:void 0,source:yR.props})},[A,R]);var Q=G.current?qj(G.current):void 0,se=typeof window<"u"?P.useLayoutEffect:P.useEffect;se(function(){var Se=G.current;if(A!==L.current.formattedValue&&Se){var Fe=M(L.current.formattedValue,A,Q);Se.value=A,j(Se,Fe,A)}},[A]);var be=function(Se,Fe,st){var yt=Fe.target,Pt=N.current?Rat(N.current,yt.selectionEnd):WCe(A,Se),Je=Object.assign(Object.assign({},Pt),{lastValue:A}),we=a(Se,Je),kt=J(we);if(we=a(kt,void 0),f&&!f(F(kt,we))){var Rt=Fe.target,Ee=qj(Rt),Oe=M(Se,A,Ee);return Rt.value=A,j(Rt,Oe,A),!1}return V({formattedValue:kt,numAsString:we,inputValue:Se,event:Fe,source:st,input:Fe.target}),!0},he=function(Se,Fe){Fe===void 0&&(Fe=0);var st=Se.selectionStart,yt=Se.selectionEnd;N.current={selectionStart:st,selectionEnd:yt+Fe}},Ae=function(Se){var Fe=Se.target,st=Fe.value,yt=be(st,Se,yR.event);yt&&d(Se),N.current=void 0},Ne=function(Se){var Fe=Se.target,st=Se.key,yt=Fe.selectionStart,Pt=Fe.selectionEnd,Je=Fe.value;Je===void 0&&(Je="");var we;st==="ArrowLeft"||st==="Backspace"?we=Math.max(yt-1,0):st==="ArrowRight"?we=Math.min(yt+1,Je.length):st==="Delete"&&(we=yt);var kt=0;st==="Delete"&&yt===Pt&&(kt=1);var Rt=st==="ArrowLeft"||st==="ArrowRight";if(we===void 0||yt!==Pt&&!Rt){h(Se),he(Fe,kt);return}var Ee=we;if(Rt){var Oe=st==="ArrowLeft"?"left":"right";Ee=W(Je,we,Oe),Ee!==we&&Se.preventDefault()}else st==="Delete"&&!b(Je[we])?Ee=W(Je,we,"right"):st==="Backspace"&&!b(Je[we])&&(Ee=W(Je,we,"left"));Ee!==we&&j(Fe,Ee,Je),h(Se),he(Fe,kt)},rt=function(Se){var Fe=Se.target,st=function(){var yt=Fe.selectionStart,Pt=Fe.selectionEnd,Je=Fe.value;if(Je===void 0&&(Je=""),yt===Pt){var we=W(Je,yt);we!==yt&&j(Fe,we,Je)}};st(),requestAnimationFrame(function(){st()}),p(Se),he(Fe)},Re=function(Se){Se.persist&&Se.persist();var Fe=Se.target,st=Se.currentTarget;G.current=Fe,K.current.focusTimeout=setTimeout(function(){var yt=Fe.selectionStart,Pt=Fe.selectionEnd,Je=Fe.value;Je===void 0&&(Je="");var we=W(Je,yt);we!==yt&&!(yt===0&&Pt===Je.length)&&j(Fe,we,Je),m(Object.assign(Object.assign({},Se),{currentTarget:st}))},0)},Tt=function(Se){G.current=null,clearTimeout(K.current.focusTimeout),clearTimeout(K.current.setCaretTimeout),g(Se)},Ze=q&&Dat()?"numeric":void 0,It=Object.assign({inputMode:Ze},E,{type:t,value:A,onChange:Ae,onKeyDown:Ne,onMouseUp:rt,onFocus:Re,onBlur:Tt});if(n==="text")return i?ni.createElement(ni.Fragment,null,i(A,E)||null):ni.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var mt=r;return ni.createElement(mt,Object.assign({},It,{ref:s}))}return ni.createElement("input",Object.assign({},It,{ref:s}))}function ahe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=_F(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=MJ(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=HCe(p,n,!!r)),l&&(h=Aat(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function _F(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function jat(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function Uat(e,t){return new RegExp("(^-)|[0-9]|"+VCe(e),"g")}function zat(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Vat(e,t,n){var r;t===void 0&&(t=Nat(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=_F(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(vR(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(G,K,J){var F=!1,j=!1;s.startsWith("-")?F=!1:G.startsWith("--")?(F=!1,j=!0):o.startsWith("-")&&G.length===o.length?F=!1:G[0]==="-"&&(F=!0);var W=F?1:0;return j&&(W=2),W&&(G=G.substring(W),K-=W,J-=W),{value:G,start:K,end:J,hasNegation:F}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var _=y(t.lastValue,u.start,u.end),E=_.start,S=_.end,C=_.value,A=e.substring(c,f);e.length&&C.length&&(E>C.length-o.length||S<s.length)&&!(A&&o.startsWith(A))&&(e=C);var R=0;e.startsWith(s)?R+=s.length:c<s.length&&(R=c),e=e.substring(R),f-=R;var k=e.length,N=e.length-o.length;e.endsWith(o)?k=N:(f>N||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=jat(b?"-"+e:e,i),e=(e.match(Uat(p))||[]).join("");var L=e.indexOf(p);e=e.replace(new RegExp(VCe(p),"g"),function(G,K){return K===L?".":""});var O=MJ(e,i),B=O.beforeDecimal,q=O.afterDecimal,H=O.addNegation;return l.end-l.start<u.end-u.start&&B===""&&m&&!parseFloat(q)&&(e=H?"-":""),e}function Hat(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function qat(e){var t=_F(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function Wat(e){e=qat(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Vy);var s=e.onBlur;s===void 0&&(s=Vy);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=UCe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=_F(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(H){return ahe(H,e)},b=function(H,G){return Vat(H,G,e)},_=g2(f)?c:f,E=d??zat(_,l,t);g2(f)?g2(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(H){return zCe(H)?H:(typeof H=="number"&&(H=qCe(H)),E&&typeof a=="number"?she(H,a,!!u):H)},C=GCe(S(f),S(c),!!E,v,b,h),A=C[0],R=A.numAsString,k=A.formattedValue,N=C[1],L=function(H){var G=H.target,K=H.key,J=G.selectionStart,F=G.selectionEnd,j=G.value;if(j===void 0&&(j=""),(K==="Backspace"||K==="Delete")&&F<l.length){H.preventDefault();return}if(J!==F){i(H);return}K==="Backspace"&&j[0]==="-"&&J===l.length+1&&n&&Xb(G,1),a&&u&&(K==="Backspace"&&j[J-1]===g?(Xb(G,J-1),H.preventDefault()):K==="Delete"&&j[J]===g&&H.preventDefault()),y!=null&&y.includes(K)&&j[J]===g&&Xb(G,J+1);var W=o===!0?",":o;K==="Backspace"&&j[J-1]===W&&Xb(G,J-1),K==="Delete"&&j[J]===W&&Xb(G,J+1),i(H)},O=function(H){var G=R;if(G.match(/\d/g)||(G=""),r||(G=kat(G)),u&&a&&(G=she(G,a,u)),G!==R){var K=ahe(G,e);N({formattedValue:K,value:G,floatValue:parseFloat(G)},{event:H,source:yR.event})}s(H)},B=function(H){return H===g?!0:vR(H)},q=function(H){var G=H.currentValue,K=H.lastValue,J=H.formattedValue,F=H.currentValueIndex,j=H.formattedValueIndex,W=G[F],M=J[j],V=WCe(K,G),Q=V.to;return F>=Q.start&&F<Q.end&&y&&y.includes(W)&&M===g?!0:W===M};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:q,onValueChange:N,format:v,removeFormatting:b,getCaretBoundary:function(H){return Hat(H,e)},onKeyDown:L,onBlur:O})}function Gat(e){var t=Wat(e);return ni.createElement(Bat,Object.assign({},t))}function uhe({direction:e,style:t,...n}){return w.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Fq={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Yat=/^(0\.0*|-0(\.0*)?)$/,Kat=/^-?0\d+(\.\d+)?\.?$/;function Xat(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function lhe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const Qat={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Jat=(e,{size:t})=>({controls:{"--ni-chevron-size":Wn(t,"ni-chevron-size")}}),FJ=ft((e,t)=>{const n=We("NumberInput",Qat,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:_,decimalScale:E,onKeyDown:S,onKeyDownCapture:C,handlersRef:A,startValue:R,disabled:k,rightSectionPointerEvents:N,allowNegative:L,readOnly:O,size:B,rightSectionWidth:q,stepHoldInterval:H,stepHoldDelay:G,allowLeadingZeros:K,withKeyboardEvents:J,trimLeadingZeroesOnBlur:F,...j}=n,W=Bt({name:"NumberInput",classes:Fq,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:Jat}),{resolvedClassNames:M,resolvedStyles:V}=Y3({classNames:i,styles:s,props:n}),[Q,se]=ya({value:c,defaultValue:f,onChange:u}),be=G!==void 0&&H!==void 0,he=P.useRef(null),Ae=P.useRef(null),Ne=P.useRef(0),rt=(we,kt)=>{kt.source==="event"&&se(Xat(we.floatValue)&&!Yat.test(we.value)&&!(K&&Kat.test(we.value))?we.floatValue:we.value),l==null||l(we,kt)},Re=we=>{const kt=String(we).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return kt?Math.max(0,(kt[1]?kt[1].length:0)-(kt[2]?+kt[2]:0)):0},Tt=we=>{he.current&&typeof we<"u"&&he.current.setSelectionRange(we,we)},Ze=P.useRef();Ze.current=()=>{let we;const kt=Re(Q),Rt=Re(p),Ee=Math.max(kt,Rt),Oe=10**Ee;if(typeof Q!="number"||Number.isNaN(Q))we=$0(R,h,d);else if(d!==void 0){const xt=(Math.round(Q*Oe)+Math.round(p*Oe))/Oe;we=xt<=d?xt:d}else we=(Math.round(Q*Oe)+Math.round(p*Oe))/Oe;const ot=we.toFixed(Ee);se(parseFloat(ot)),l==null||l({floatValue:parseFloat(ot),formattedValue:ot,value:ot},{source:"increment"}),setTimeout(()=>{var xt;return Tt((xt=he.current)==null?void 0:xt.value.length)},0)};const It=P.useRef();It.current=()=>{let we;const kt=h!==void 0?h:L?Number.MIN_SAFE_INTEGER:0,Rt=Re(Q),Ee=Re(p),Oe=Math.max(Rt,Ee),ot=10**Oe;if(typeof Q!="number"||Number.isNaN(Q))we=$0(R,kt,d);else{const jt=(Math.round(Q*ot)-Math.round(p*ot))/ot;we=kt!==void 0&&jt<kt?kt:jt}const xt=we.toFixed(Oe);se(parseFloat(xt)),l==null||l({floatValue:parseFloat(xt),formattedValue:xt,value:xt},{source:"decrement"}),setTimeout(()=>{var jt;return Tt((jt=he.current)==null?void 0:jt.value.length)},0)};const mt=we=>{S==null||S(we),!(O||!J)&&(we.key==="ArrowUp"&&(we.preventDefault(),Ze.current()),we.key==="ArrowDown"&&(we.preventDefault(),It.current()))},Se=we=>{if(C==null||C(we),we.key==="Backspace"){const kt=he.current;kt.selectionStart===0&&kt.selectionStart===kt.selectionEnd&&(we.preventDefault(),window.setTimeout(()=>Tt(0),0))}};gQ(A,{increment:Ze.current,decrement:It.current});const Fe=we=>{we?Ze.current():It.current(),Ne.current+=1},st=we=>{if(Fe(we),be){const kt=typeof H=="number"?H:H(Ne.current);Ae.current=window.setTimeout(()=>st(we),kt)}},yt=(we,kt)=>{var Rt;we.preventDefault(),(Rt=he.current)==null||Rt.focus(),Fe(kt),be&&(Ae.current=window.setTimeout(()=>st(kt),G))},Pt=()=>{Ae.current&&window.clearTimeout(Ae.current),Ae.current=null,Ne.current=0},Je=w.jsxs("div",{...W("controls"),children:[w.jsx(uf,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Q=="number"&&d!==void 0&&Q>=d,mod:{direction:"up"},onMouseDown:we=>we.preventDefault(),onPointerDown:we=>{yt(we,!0)},onPointerUp:Pt,onPointerLeave:Pt,children:w.jsx(uhe,{direction:"up"})}),w.jsx(uf,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Q=="number"&&h!==void 0&&Q<=h,mod:{direction:"down"},onMouseDown:we=>we.preventDefault(),onPointerDown:we=>{yt(we,!1)},onPointerUp:Pt,onPointerLeave:Pt,children:w.jsx(uhe,{direction:"down"})})]});return w.jsx(bd,{component:Gat,allowNegative:L,className:ao(Fq.root,r),size:B,...j,readOnly:O,disabled:k,value:Q,getInputRef:fo(t,he),onValueChange:rt,rightSection:m||O?g:g||Je,classNames:M,styles:V,unstyled:o,__staticSelector:"NumberInput",decimalScale:_?E:0,onKeyDown:mt,onKeyDownCapture:Se,rightSectionPointerEvents:N??(k?"none":void 0),rightSectionWidth:q??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:K,onBlur:we=>{if(b==null||b(we),v==="blur"&&typeof Q=="number"&&$0(Q,h,d)!==Q&&se($0(Q,h,d)),F&&typeof Q=="string"){const kt=Q.replace(/^0+/,""),Rt=parseFloat(kt);se(Number.isNaN(Rt)?kt:Rt)}},isAllowed:we=>v==="strict"?y?y(we)&&lhe(we.floatValue,h,d):lhe(we.floatValue,h,d):y?y(we):!0})});FJ.classes={...bd.classes,...Fq};FJ.displayName="@mantine/core/NumberInput";const[Zat,YCe]=Wa("Progress.Root component was not found in tree");var nP={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const eut={},BJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("ProgressLabel",eut,e),u=YCe();return w.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});BJ.classes=nP;BJ.displayName="@mantine/core/ProgressLabel";const tut={},nut=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Wn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Bi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),wF=ft((e,t)=>{const n=We("ProgressRoot",tut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Bt({name:"Progress",classes:nP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nut});return w.jsx(Zat,{value:{getStyles:d,autoContrast:l},children:w.jsx(ke,{ref:t,...d("root"),...f})})});wF.classes=nP;wF.displayName="@mantine/core/ProgressRoot";const rut={withAria:!0},EF=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=We("ProgressSection",rut,e),p=YCe(),m=ho(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return w.jsx(ke,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":$i(l,m),"--progress-label-color":bS(p.autoContrast,m)?Iv({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});EF.classes=nP;EF.displayName="@mantine/core/ProgressSection";const iut={},RS=ft((e,t)=>{const n=We("Progress",iut,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Y3({classNames:i,styles:s,props:n});return w.jsx(wF,{ref:t,classNames:d,styles:h,vars:o,...f,children:w.jsx(EF,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});RS.classes=nP;RS.displayName="@mantine/core/Progress";RS.Section=EF;RS.Root=wF;RS.Label=BJ;const[sut,KCe]=vS(),[out,aut]=vS();var XCe={card:"m_9dc8ae12"};const uut={withBorder:!0},lut=(e,{radius:t})=>({card:{"--card-radius":Bi(t)}}),jJ=ft((e,t)=>{const n=We("RadioCard",uut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Bt({name:"RadioCard",classes:XCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lut,rootSelector:"card"}),{dir:v}=Lg(),b=KCe(),_=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),S=C=>{if(m==null||m(C),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(C.nativeEvent.code)){C.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),R=A.findIndex(L=>L===C.target),k=R+1>=A.length?0:R+1,N=R-1<0?A.length-1:R-1;C.nativeEvent.code==="ArrowDown"&&(A[k].focus(),A[k].click()),C.nativeEvent.code==="ArrowUp"&&(A[N].focus(),A[N].click()),C.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?N:k].focus(),A[v==="ltr"?N:k].click()),C.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?k:N].focus(),A[v==="ltr"?k:N].click())}};return w.jsx(out,{value:{checked:_},children:w.jsx(uf,{ref:t,mod:[{"with-border":f,checked:_},c],...y("card"),...g,role:"radio","aria-checked":_,name:E,onClick:C=>{h==null||h(C),b==null||b.onChange(d||"")},onKeyDown:S})})});jJ.displayName="@mantine/core/RadioCard";jJ.classes=XCe;const cut={},UJ=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=We("RadioGroup",cut,e),f=Ou(u),[d,h]=ya({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return w.jsx(sut,{value:{value:d,onChange:p,size:s,name:f},children:w.jsx(Ys.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:w.jsx(yJ,{role:"radiogroup",children:a})})})});UJ.classes=Ys.Wrapper.classes;UJ.displayName="@mantine/core/RadioGroup";function QCe({size:e,style:t,...n}){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:$e(e),height:$e(e),...t},"aria-hidden":!0,...n,children:w.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var JCe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const fut={icon:QCe},dut=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=km({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Wn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Bi(t),"--radio-color":s==="outline"?u:$i(n,e),"--radio-icon-size":Wn(r,"radio-icon-size"),"--radio-icon-color":i?$i(i,e):bS(o,e)?Iv({color:n,theme:e,autoContrast:o}):void 0}}},zJ=ft((e,t)=>{const n=We("RadioIndicator",fut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,_=Bt({name:"RadioIndicator",classes:JCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dut,rootSelector:"indicator"}),E=aut(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return w.jsx(ke,{ref:t,..._("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:w.jsx(b,{..._("icon")})})});zJ.displayName="@mantine/core/RadioIndicator";zJ.classes=JCe;var ZCe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const hut={labelPosition:"right"},put=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=km({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Wn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Bi(n),"--radio-color":s==="outline"?u:$i(r,e),"--radio-icon-color":i?$i(i,e):bS(o,e)?Iv({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Wn(t,"radio-icon-size")}}},pg=ft((e,t)=>{const n=We("Radio",hut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:_=QCe,rootRef:E,iconColor:S,onChange:C,mod:A,...R}=n,k=Bt({name:"Radio",classes:ZCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:put}),N=KCe(),L=(N==null?void 0:N.size)??c,O=n.size?c:L,{styleProps:B,rest:q}=B_(R),H=Ou(l),G=N?{checked:N.value===q.value,name:q.name??N.name,onChange:K=>{N.onChange(K),C==null||C(K)}}:{};return w.jsx(lF,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:H,size:O,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":G.checked||void 0,variant:y,ref:E,mod:A,...B,...b,children:w.jsxs(ke,{...k("inner"),mod:{"label-position":d},children:[w.jsx(ke,{...k("radio",{focusable:!0,variant:y}),onChange:C,...q,...G,component:"input",mod:{error:!!p},ref:t,id:H,disabled:v,type:"radio"}),w.jsx(_,{...k("icon"),"aria-hidden":!0})]})})});pg.classes=ZCe;pg.displayName="@mantine/core/Radio";pg.Group=UJ;pg.Card=jJ;pg.Indicator=zJ;const mut={duration:100,transition:"fade"};function gut(e,t){return{...mut,...t,...e}}function yut({offset:e,position:t}){const[n,r]=P.useState(!1),i=P.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=UQ({placement:t,middleware:[MQ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=P.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return P.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=G0(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var TF={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const vut={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Vh("popover")},but=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Bi(t),"--tooltip-bg":n?$i(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),VJ=ft((e,t)=>{const n=We("TooltipFloating",vut,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:_,portalProps:E,...S}=n,C=ho(),A=Bt({name:"TooltipFloating",props:n,classes:TF,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:_,varsResolver:but}),{handleMouseMove:R,x:k,y:N,opened:L,boundaryRef:O,floating:B,setOpened:q}=yut({offset:p,position:m});if(!Cv(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const H=fo(O,r.ref,t),G=J=>{var F,j;(j=(F=r.props).onMouseEnter)==null||j.call(F,J),R(J),q(!0)},K=J=>{var F,j;(j=(F=r.props).onMouseLeave)==null||j.call(F,J),q(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(ES,{...E,withinPortal:s,children:w.jsx(ke,{...S,...A("tooltip",{style:{...EQ(o,C),zIndex:y,display:!v&&L?"block":"none",top:(N&&Math.round(N))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:B,mod:{multiline:g},children:h})}),P.cloneElement(r,{...r.props,[i]:H,onMouseEnter:G,onMouseLeave:K})]})});VJ.classes=TF;VJ.displayName="@mantine/core/TooltipFloating";const eAe=P.createContext(!1),xut=eAe.Provider,_ut=()=>P.useContext(eAe),wut={openDelay:0,closeDelay:0};function tAe(e){const{openDelay:t,closeDelay:n,children:r}=We("TooltipGroup",wut,e);return w.jsx(xut,{value:!0,children:w.jsx(krt,{delay:{open:t,close:n},children:r})})}tAe.displayName="@mantine/core/TooltipGroup";function Eut(e){var S,C,A;const[t,n]=P.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=_ut(),o=Ou(),{delay:a,currentId:u,setCurrentId:l}=FSe(),c=P.useCallback(R=>{n(R),R&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=UQ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[NSe(e.offset),MQ({padding:8}),Oq(),OSe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[$q()]:[]]}),{getReferenceProps:b,getFloatingProps:_}=Lrt([Irt(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((C=e.events)!=null&&C.touch)}),$rt(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),Frt(h,{role:"tooltip"}),Nrt(h,{enabled:typeof e.opened>"u"}),Rrt(h,{id:o})]);qSe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),um(()=>{var R;(R=e.onPositionChange)==null||R.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:_,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const che={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Vh("popover"),positionDependencies:[]},Tut=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Bi(t),"--tooltip-bg":n?$i(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),os=ft((e,t)=>{const n=We("Tooltip",che,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:_,arrowOffset:E,arrowRadius:S,arrowPosition:C,offset:A,transitionProps:R,multiline:k,events:N,zIndex:L,disabled:O,positionDependencies:B,onClick:q,onMouseEnter:H,onMouseLeave:G,inline:K,variant:J,keepMounted:F,vars:j,portalProps:W,mod:M,floatingStrategy:V,...Q}=We("Tooltip",che,n),{dir:se}=Lg(),be=P.useRef(null),he=Eut({position:BSe(se,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:be,arrowOffset:E,offset:typeof A=="number"?A+(b?_/2:0):A,positionDependencies:[...B,r],inline:K,strategy:V}),Ae=Bt({name:"Tooltip",props:n,classes:TF,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:j,varsResolver:Tut});if(!Cv(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Ne=fo(he.reference,r.ref,t),rt=gut(R,{duration:100,transition:"fade"});return w.jsxs(w.Fragment,{children:[w.jsx(ES,{...W,withinPortal:f,children:w.jsx(Fg,{...rt,keepMounted:F,mounted:!O&&!!he.opened,duration:he.isGroupPhase?10:rt.duration,children:Re=>w.jsxs(ke,{...Q,variant:J,mod:[{multiline:k},M],...he.getFloatingProps({ref:he.floating,className:Ae("tooltip").className,style:{...Ae("tooltip").style,...Re,zIndex:L,top:he.y??0,left:he.x??0}}),children:[o,w.jsx(zQ,{ref:be,arrowX:he.arrowX,arrowY:he.arrowY,visible:b,position:he.placement,arrowSize:_,arrowOffset:E,arrowRadius:S,arrowPosition:C,...Ae("arrow")})]})})}),P.cloneElement(r,he.getReferenceProps({onClick:q,onMouseEnter:H,onMouseLeave:G,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Ne,className:ao(v,r.props.className),...r.props}))]})});os.classes=TF;os.displayName="@mantine/core/Tooltip";os.Floating=VJ;os.Group=tAe;var nAe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const Sut={withItemsBorders:!0},Cut=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Bi(t),"--sc-color":n?$i(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Wn(i,"sc-padding"),"--sc-font-size":al(i)}}),SF=ft((e,t)=>{var se,be;const n=We("SegmentedControl",Sut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:_,transitionDuration:E,transitionTimingFunction:S,variant:C,autoContrast:A,withItemsBorders:R,mod:k,...N}=n,L=Bt({name:"SegmentedControl",props:n,classes:nAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Cut}),O=ho(),B=l.map(he=>typeof he=="string"?{label:he,value:he}:he),q=Met(),[H,G]=P.useState(null),[K,J]=P.useState({}),F=(he,Ae)=>{K[Ae]=he,J(K)},[j,W]=ya({value:c,defaultValue:f,finalValue:Array.isArray(l)?((se=B.find(he=>!he.disabled))==null?void 0:se.value)??((be=l[0])==null?void 0:be.value)??null:null,onChange:d}),M=Ou(p),V=B.map(he=>P.createElement(ke,{...L("control"),mod:{active:j===he.value,orientation:v},key:he.value},P.createElement("input",{...L("input"),disabled:m||he.disabled,type:"radio",name:M,value:he.value,id:`${M}-${he.value}`,checked:j===he.value,onChange:()=>!g&&W(he.value),"data-focus-ring":O.focusRing,key:`${he.value}-input`}),P.createElement(ke,{component:"label",...L("label"),mod:{active:j===he.value&&!(m||he.disabled),disabled:m||he.disabled,"read-only":g},htmlFor:`${M}-${he.value}`,ref:Ae=>F(Ae,he.value),__vars:{"--sc-label-color":_!==void 0?Iv({color:_,theme:O,autoContrast:A}):void 0},key:`${he.value}-label`},w.jsx("span",{...L("innerLabel"),children:he.label})))),Q=fo(t,he=>G(he));return l.length===0?null:w.jsxs(ke,{...L("root"),variant:C,size:h,ref:Q,mod:[{"full-width":y,orientation:v,initialized:q,"with-items-borders":R},k],...N,role:"radiogroup",children:[typeof j=="string"&&w.jsx(GQ,{target:K[j],parent:H,component:"span",transitionDuration:"var(--sc-transition-duration)",...L("indicator")}),V]})});SF.classes=nAe;SF.displayName="@mantine/core/SegmentedControl";const Aut={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},PS=ft((e,t)=>{const n=We("Select",Aut,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:_,readOnly:E,disabled:S,filter:C,limit:A,withScrollArea:R,maxDropdownHeight:k,size:N,searchable:L,rightSection:O,checkIconPosition:B,withCheckIcon:q,nothingFoundMessage:H,name:G,form:K,searchValue:J,defaultSearchValue:F,onSearchChange:j,allowDeselect:W,error:M,rightSectionPointerEvents:V,id:Q,clearable:se,clearButtonProps:be,hiddenInputProps:he,renderOption:Ae,onClear:Ne,autoComplete:rt,scrollAreaProps:Re,...Tt}=n,Ze=P.useMemo(()=>lCe(m),[m]),It=P.useMemo(()=>iJ(Ze),[Ze]),mt=Ou(Q),[Se,Fe,st]=ya({value:g,defaultValue:y,finalValue:null,onChange:p}),yt=typeof Se=="string"?It[Se]:void 0,[Pt,Je]=ya({value:J,defaultValue:F,finalValue:yt?yt.label:"",onChange:j}),we=mJ({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),we.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),we.resetSelectedOption()}}),{resolvedClassNames:kt,resolvedStyles:Rt}=Y3({props:n,styles:i,classNames:r});P.useEffect(()=>{v&&we.selectFirstOption()},[v,Se]),P.useEffect(()=>{g===null&&Je(""),typeof g=="string"&&yt&&Je(yt.label)},[g,yt]);const Ee=se&&!!Se&&!S&&!E&&w.jsx($r.ClearButton,{size:N,...be,onClear:()=>{Fe(null,null),Je(""),Ne==null||Ne()}});return w.jsxs(w.Fragment,{children:[w.jsxs($r,{store:we,__staticSelector:"Select",classNames:kt,styles:Rt,unstyled:s,readOnly:E,onOptionSubmit:Oe=>{b==null||b(Oe);const ot=W&&It[Oe].value===Se?null:It[Oe],xt=ot?ot.value:null;Fe(xt,ot),!st&&Je(typeof xt=="string"&&(ot==null?void 0:ot.label)||""),we.closeDropdown()},size:N,..._,children:[w.jsx($r.Target,{targetType:L?"input":"button",autoComplete:rt,children:w.jsx(bd,{id:mt,ref:t,rightSection:O||Ee||w.jsx($r.Chevron,{size:N,error:M,unstyled:s}),rightSectionPointerEvents:V||(Ee?"all":"none"),...Tt,size:N,__staticSelector:"Select",disabled:S,readOnly:E||!L,value:Pt,onChange:Oe=>{Je(Oe.currentTarget.value),we.openDropdown(),v&&we.selectFirstOption()},onFocus:Oe=>{L&&we.openDropdown(),f==null||f(Oe)},onBlur:Oe=>{var ot;L&&we.closeDropdown(),Je(Se!=null&&((ot=It[Se])==null?void 0:ot.label)||""),d==null||d(Oe)},onClick:Oe=>{L?we.openDropdown():we.toggleDropdown(),h==null||h(Oe)},classNames:kt,styles:Rt,unstyled:s,pointer:!L,error:M})}),w.jsx(ACe,{data:Ze,hidden:E||S,filter:C,search:Pt,limit:A,hiddenWhenEmpty:!L||!H,withScrollArea:R,maxDropdownHeight:k,filterOptions:L&&(yt==null?void 0:yt.label)!==Pt,value:Se,checkIconPosition:B,withCheckIcon:q,nothingFoundMessage:H,unstyled:s,labelId:Tt.label?`${mt}-label`:void 0,"aria-label":Tt.label?void 0:Tt["aria-label"],renderOption:Ae,scrollAreaProps:Re})]}),w.jsx($r.HiddenInput,{value:Se,name:G,form:K,disabled:S,...he})]})});PS.classes={...bd.classes,...$r.classes};PS.displayName="@mantine/core/Select";function Iut({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ho(),s=t===void 0?e:t,o=Sv({"--sg-spacing-x":To(dh(e)),"--sg-spacing-y":To(dh(s)),"--sg-cols":(c=dh(n))==null?void 0:c.toString()}),a=Gi(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=To(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=To(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=dR(Gi(a),i).filter(f=>Gi(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return w.jsx(F_,{styles:o,media:l,selector:r})}function Wj(e){return typeof e=="object"&&e!==null?Gi(e):[]}function kut(e){return e.sort((t,n)=>fR(t)-fR(n))}function Rut({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...Wj(e),...Wj(t),...Wj(n)]));return kut(r)}function Put({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Sv({"--sg-spacing-x":To(dh(e)),"--sg-spacing-y":To(dh(i)),"--sg-cols":(l=dh(n))==null?void 0:l.toString()}),o=Rut({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=To(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=To(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return w.jsx(F_,{styles:s,container:u,selector:r})}var rAe={container:"m_925c2d2c",root:"m_2415a157"};const Dut={cols:1,spacing:"md",type:"media"},HJ=ft((e,t)=>{const n=We("SimpleGrid",Dut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Bt({name:"SimpleGrid",classes:rAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=K3();return d==="container"?w.jsxs(w.Fragment,{children:[w.jsx(Put,{...n,selector:`.${m}`}),w.jsx("div",{...p("container"),children:w.jsx(ke,{ref:t,...p("root",{className:m}),...h})})]}):w.jsxs(w.Fragment,{children:[w.jsx(Iut,{...n,selector:`.${m}`}),w.jsx(ke,{ref:t,...p("root",{className:m}),...h})]})});HJ.classes=rAe;HJ.displayName="@mantine/core/SimpleGrid";const[iAe,CF]=Wa("SliderProvider was not found in tree"),qJ=P.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=CF();return w.jsx(ke,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});qJ.displayName="@mantine/core/SliderRoot";const C$=P.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=CF(),[b,_]=P.useState(!1),E=l||s||b||h&&p;return w.jsxs(ke,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{_(!0),typeof f=="function"&&f()},onBlur:()=>{_(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,w.jsx(Fg,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>w.jsx("div",{...v("label",{style:S}),children:i})})]})});C$.displayName="@mantine/core/SliderThumb";function A$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Nut({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function sAe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=CF();if(!e)return null;const u=e.map((l,c)=>P.createElement(ke,{...a("markWrapper"),__vars:{"--mark-offset":`${A$({value:l.value,min:t,max:n})}%`},key:c},w.jsx(ke,{...a("mark"),mod:{filled:Nut({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&w.jsx("div",{...a("markLabel"),children:l.label})));return w.jsx("div",{children:u})}sAe.displayName="@mantine/core/SliderMarks";function WJ({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=CF();return w.jsx(w.Fragment,{children:w.jsx(ke,{...u("trackContainer"),mod:{disabled:r},...o,children:w.jsxs(ke,{...u("track"),mod:{inverted:s,disabled:r},children:[w.jsx(ke,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,w.jsx(sAe,{...a,offset:i,disabled:r,inverted:s})]})})})}WJ.displayName="@mantine/core/SliderTrack";function Bq({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function zf(e,t){return parseFloat(e.toFixed(t))}function oAe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var AF={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const Out={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},$ut=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Wn(t,"slider-size"),"--slider-color":n?$i(n,e):void 0,"--slider-radius":i===void 0?void 0:Bi(i),"--slider-thumb-size":r!==void 0?$e(r):"calc(var(--slider-size) * 2)"}}),z_=ft((e,t)=>{const n=We("Slider",Out,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,thumbChildren:E,disabled:S,unstyled:C,scale:A,inverted:R,className:k,style:N,vars:L,hiddenInputProps:O,...B}=n,q=Bt({name:"Slider",props:n,classes:AF,classNames:r,className:k,styles:i,style:N,vars:L,varsResolver:$ut,unstyled:C}),{dir:H}=Lg(),[G,K]=P.useState(!1),[J,F]=ya({value:typeof s=="number"?$0(s,l,c):s,defaultValue:typeof h=="number"?$0(h,l,c):h,finalValue:$0(0,l,c),onChange:o}),j=P.useRef(J),W=P.useRef(),M=P.useRef(),V=A$({value:J,min:l,max:c}),Q=A(J),se=typeof g=="function"?g(Q):g,be=d??oAe(f),he=P.useCallback(({x:Re})=>{if(!S){const Tt=Bq({value:Re,min:l,max:c,step:f,precision:be});F(Tt),j.current=Tt}},[S,l,c,f,be,F]),{ref:Ae,active:Ne}=QTe(he,{onScrubEnd:()=>a==null?void 0:a(j.current)},H),rt=Re=>{var Tt,Ze,It,mt,Se,Fe;if(!S)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(Tt=M.current)==null||Tt.focus();const st=zf(Math.min(Math.max(J+f,l),c),be);F(st),a==null||a(st);break}case"ArrowRight":{Re.preventDefault(),(Ze=M.current)==null||Ze.focus();const st=zf(Math.min(Math.max(H==="rtl"?J-f:J+f,l),c),be);F(st),a==null||a(st);break}case"ArrowDown":{Re.preventDefault(),(It=M.current)==null||It.focus();const st=zf(Math.min(Math.max(J-f,l),c),be);F(st),a==null||a(st);break}case"ArrowLeft":{Re.preventDefault(),(mt=M.current)==null||mt.focus();const st=zf(Math.min(Math.max(H==="rtl"?J+f:J-f,l),c),be);F(st),a==null||a(st);break}case"Home":{Re.preventDefault(),(Se=M.current)==null||Se.focus(),F(l),a==null||a(l);break}case"End":{Re.preventDefault(),(Fe=M.current)==null||Fe.focus(),F(c),a==null||a(c);break}}};return w.jsx(iAe,{value:{getStyles:q},children:w.jsxs(qJ,{...B,ref:fo(t,W),onKeyDownCapture:rt,onMouseDownCapture:()=>{var Re;return(Re=W.current)==null?void 0:Re.focus()},size:u,disabled:S,children:[w.jsx(WJ,{inverted:R,offset:0,filled:V,marks:m,min:l,max:c,value:Q,disabled:S,containerProps:{ref:Ae,onMouseEnter:_?()=>K(!0):void 0,onMouseLeave:_?()=>K(!1):void 0},children:w.jsx(C$,{max:c,min:l,value:Q,position:V,dragging:Ne,label:se,ref:M,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,isHovered:G,disabled:S,children:E})}),w.jsx("input",{type:"hidden",name:p,value:Q,...O})]})})});z_.classes=AF;z_.displayName="@mantine/core/Slider";function Lut(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const Mut=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Wn(t,"slider-size"),"--slider-color":n?$i(n,e):void 0,"--slider-radius":i===void 0?void 0:Bi(i),"--slider-thumb-size":r!==void 0?$e(r):"calc(var(--slider-size) * 2)"}}),Fut={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},aT=ft((e,t)=>{const n=We("RangeSlider",Fut,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:_,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:C,thumbChildren:A,disabled:R,unstyled:k,scale:N,inverted:L,className:O,style:B,vars:q,hiddenInputProps:H,...G}=n,K=Bt({name:"Slider",props:n,classes:AF,classNames:r,className:O,styles:i,style:B,vars:q,varsResolver:Mut,unstyled:k}),{dir:J}=Lg(),[F,j]=P.useState(-1),[W,M]=P.useState(!1),[V,Q]=ya({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),se=P.useRef(V),be=P.useRef([]),he=P.useRef(void 0),Ae=[A$({value:V[0],min:l,max:c}),A$({value:V[1],min:l,max:c})],Ne=p??oAe(h),rt=Je=>{Q(Je),se.current=Je};P.useEffect(()=>{Array.isArray(s)&&(se.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Re=(Je,we,kt)=>{const Rt=[...se.current];Rt[we]=Je,we===0&&(Je>Rt[1]-(f-1e-9)&&(Rt[1]=Math.min(Je+f,c)),Je>(c-(f-1e-9)||l)&&(Rt[we]=se.current[we]),Rt[1]-Je>d&&(Rt[1]=Je+d)),we===1&&(Je<Rt[0]+f&&(Rt[0]=Math.max(Je-f,l)),Je<Rt[0]+f&&(Rt[we]=se.current[we]),Je-Rt[0]>d&&(Rt[0]=Je-d)),Rt[0]=zf(Rt[0],Ne),Rt[1]=zf(Rt[1],Ne),rt(Rt),kt&&(a==null||a(se.current))},Tt=Je=>{if(!R){const we=Bq({value:Je,min:l,max:c,step:h,precision:Ne});Re(we,he.current,!1)}},{ref:Ze,active:It}=QTe(({x:Je})=>Tt(Je),{onScrubEnd:()=>a==null?void 0:a(se.current)},J);function mt(Je){he.current=Je}const Se=Je=>{Ze.current.focus();const we=Ze.current.getBoundingClientRect(),kt=Lut(Je.nativeEvent),Rt=Bq({value:kt-we.left,max:c,min:l,step:h,containerWidth:we.width}),Ee=Math.abs(V[0]-Rt)>Math.abs(V[1]-Rt)?1:0,Oe=J==="ltr"?Ee:Ee===1?0:1;he.current=Oe},Fe=()=>F!==1&&F!==0?(j(0),0):F,st=Je=>{if(!R)switch(Je.key){case"ArrowUp":{Je.preventDefault();const we=Fe();be.current[we].focus(),Re(zf(Math.min(Math.max(se.current[we]+h,l),c),Ne),we,!0);break}case"ArrowRight":{Je.preventDefault();const we=Fe();be.current[we].focus(),Re(zf(Math.min(Math.max(J==="rtl"?se.current[we]-h:se.current[we]+h,l),c),Ne),we,!0);break}case"ArrowDown":{Je.preventDefault();const we=Fe();be.current[we].focus(),Re(zf(Math.min(Math.max(se.current[we]-h,l),c),Ne),we,!0);break}case"ArrowLeft":{Je.preventDefault();const we=Fe();be.current[we].focus(),Re(zf(Math.min(Math.max(J==="rtl"?se.current[we]+h:se.current[we]-h,l),c),Ne),we,!0);break}}},yt={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:_,onBlur:()=>j(-1)},Pt=Array.isArray(A);return w.jsx(iAe,{value:{getStyles:K},children:w.jsxs(qJ,{...G,size:u,ref:t,disabled:R,children:[w.jsxs(WJ,{offset:Ae[0],marksOffset:V[0],filled:Ae[1]-Ae[0],marks:y,inverted:L,min:l,max:c,value:V[1],disabled:R,containerProps:{ref:Ze,onMouseEnter:C?()=>M(!0):void 0,onMouseLeave:C?()=>M(!1):void 0,onTouchStartCapture:Se,onTouchEndCapture:()=>{he.current=-1},onMouseDownCapture:Se,onMouseUpCapture:()=>{he.current=-1},onKeyDownCapture:st},children:[w.jsx(C$,{...yt,value:N(V[0]),position:Ae[0],dragging:It,label:typeof v=="function"?v(zf(N(V[0]),Ne)):v,ref:Je=>{be.current[0]=Je},thumbLabel:E,onMouseDown:()=>mt(0),onFocus:()=>j(0),showLabelOnHover:C,isHovered:W,disabled:R,children:Pt?A[0]:A}),w.jsx(C$,{...yt,thumbLabel:S,value:N(V[1]),position:Ae[1],dragging:It,label:typeof v=="function"?v(zf(N(V[1]),Ne)):v,ref:Je=>{be.current[1]=Je},onMouseDown:()=>mt(1),onFocus:()=>j(1),showLabelOnHover:C,isHovered:W,disabled:R,children:Pt?A[1]:A})]}),w.jsx("input",{type:"hidden",name:`${g}_from`,value:V[0],...H}),w.jsx("input",{type:"hidden",name:`${g}_to`,value:V[1],...H})]})})});aT.classes=AF;aT.displayName="@mantine/core/RangeSlider";const But={},Eu=ft((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=We("Space",But,e);return w.jsx(ke,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Eu.displayName="@mantine/core/Space";var aAe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const jut={maxHeight:100,initialState:!1},Uut=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),GJ=ft((e,t)=>{const n=We("Spoiler",jut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=Bt({name:"Spoiler",classes:aAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Uut}),b=Ou(g),_=`${b}-region`,[E,S]=P.useState(l),{ref:C,height:A}=Ret(),R=E?f:d,k=R!==null&&c<A;return w.jsxs(ke,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&w.jsx(Rv,{component:"button",type:"button",ref:p,onClick:()=>S(N=>!N),"aria-expanded":E,"aria-controls":_,...v("control"),children:R}),w.jsx("div",{...v("content",{style:{maxHeight:E?A?$e(A):void 0:$e(c)}}),"data-reduce-motion":!0,role:"region",id:_,children:w.jsx("div",{ref:C,children:h})})]})});GJ.classes=aAe;GJ.displayName="@mantine/core/Spoiler";var uAe={root:"m_6d731127"};const zut={gap:"md",align:"stretch",justify:"flex-start"},Vut=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":To(t),"--stack-align":n,"--stack-justify":r}}),qi=ft((e,t)=>{const n=We("Stack",zut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Bt({name:"Stack",props:n,classes:uAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vut});return w.jsx(ke,{ref:t,...p("root"),variant:d,...h})});qi.classes=uAe;qi.displayName="@mantine/core/Stack";const lAe=P.createContext(null),Hut=lAe.Provider,qut=()=>P.useContext(lAe),Wut={},YJ=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=We("SwitchGroup",Wut,e),[c,f]=ya({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return w.jsx(Hut,{value:{value:c,onChange:d,size:s},children:w.jsx(Ys.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:w.jsx(yJ,{role:"group",children:a})})})});YJ.classes=Ys.Wrapper.classes;YJ.displayName="@mantine/core/SwitchGroup";var cAe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Gut={labelPosition:"right"},Yut=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Bi(t),"--switch-height":Wn(r,"switch-height"),"--switch-width":Wn(r,"switch-width"),"--switch-thumb-size":Wn(r,"switch-thumb-size"),"--switch-label-font-size":Wn(r,"switch-label-font-size"),"--switch-track-label-padding":Wn(r,"switch-track-label-padding"),"--switch-color":n?$i(n,e):void 0}}),y2=ft((e,t)=>{const n=We("Switch",Gut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:_,onChange:E,labelPosition:S,description:C,error:A,disabled:R,variant:k,rootRef:N,mod:L,...O}=n,B=qut(),q=p||(B==null?void 0:B.size),H=Bt({name:"Switch",props:n,classes:cAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Yut}),{styleProps:G,rest:K}=B_(O),J=Ou(h),F=B?{checked:B.value.includes(K.value),onChange:B.onChange}:{},[j,W]=ya({value:F.checked??b,defaultValue:_,finalValue:!1});return w.jsxs(lF,{...H("root"),__staticSelector:"Switch",__stylesApiProps:n,id:J,size:q,labelPosition:S,label:c,description:C,error:A,disabled:R,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":F.checked||void 0,variant:k,ref:N,mod:L,...G,...g,children:[w.jsx("input",{...K,disabled:R,checked:j,onChange:M=>{var V;B?(V=F.onChange)==null||V.call(F,M):E==null||E(M),W(M.currentTarget.checked)},id:J,ref:t,type:"checkbox",role:"switch",...H("input")}),w.jsxs(ke,{"aria-hidden":"true",mod:{error:A,"label-position":S},...H("track"),children:[w.jsx(ke,{component:"span",mod:"reduce-motion",...H("thumb"),children:v}),w.jsx("span",{...H("trackLabel"),children:j?d:f})]})]})});y2.classes={...cAe,...gCe};y2.displayName="@mantine/core/Switch";y2.Group=YJ;const[Kut,Xut]=Wa("Table component was not found in the tree");var rP={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function Qut(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function V_(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=ft((i,s)=>{const o=We(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=Xut();return w.jsx(ke,{component:e,ref:s,...Qut(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=rP,r}const jq=V_("th",{columnBorder:!0}),fAe=V_("td",{columnBorder:!0}),j4=V_("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),dAe=V_("thead",{stickyHeader:!0}),hAe=V_("tbody"),pAe=V_("tfoot"),mAe=V_("caption",{captionSide:!0});function KJ({data:e}){return w.jsxs(w.Fragment,{children:[e.caption&&w.jsx(mAe,{children:e.caption}),e.head&&w.jsx(dAe,{children:w.jsx(j4,{children:e.head.map((t,n)=>w.jsx(jq,{children:t},n))})}),e.body&&w.jsx(hAe,{children:e.body.map((t,n)=>w.jsx(j4,{children:t.map((r,i)=>w.jsx(fAe,{children:r},i))},n))}),e.foot&&w.jsx(pAe,{children:w.jsx(j4,{children:e.foot.map((t,n)=>w.jsx(jq,{children:t},n))})})]})}KJ.displayName="@mantine/core/TableDataRenderer";const Jut={type:"scrollarea"},Zut=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":$e(t),"--table-overflow":n==="native"?"auto":void 0}}),XJ=ft((e,t)=>{const n=We("TableScrollContainer",Jut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Bt({name:"TableScrollContainer",classes:rP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zut,rootSelector:"scrollContainer"});return w.jsx(ke,{component:f==="scrollarea"?fg:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:w.jsx("div",{...h("scrollContainerInner"),children:l})})});XJ.classes=rP;XJ.displayName="@mantine/core/TableScrollContainer";const elt={withRowBorders:!0,verticalSpacing:7},tlt=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":To(r),"--table-vertical-spacing":To(i),"--table-border-color":s?$i(s,e):void 0,"--table-striped-color":u&&o?$i(o,e):void 0,"--table-highlight-on-hover-color":l&&a?$i(a,e):void 0,"--table-sticky-header-offset":f?$e(c):void 0}}),ln=ft((e,t)=>{const n=We("Table",elt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:_,variant:E,data:S,children:C,stickyHeader:A,stickyHeaderOffset:R,mod:k,...N}=n,L=Bt({name:"Table",props:n,className:i,style:s,classes:rP,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:tlt});return w.jsx(Kut,{value:{getStyles:L,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:w.jsx(ke,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...L("table"),...N,children:C||!!S&&w.jsx(KJ,{data:S})})})});ln.classes=rP;ln.displayName="@mantine/core/Table";ln.Td=fAe;ln.Th=jq;ln.Tr=j4;ln.Thead=dAe;ln.Tbody=hAe;ln.Tfoot=pAe;ln.Caption=mAe;ln.ScrollContainer=XJ;ln.DataRenderer=KJ;const[nlt,QJ]=Wa("Tabs component was not found in the tree");var iP={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const rlt={},JJ=ft((e,t)=>{const n=We("TabsList",rlt,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=QJ();return w.jsx(ke,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});JJ.classes=iP;JJ.displayName="@mantine/core/TabsList";const ilt={},ZJ=ft((e,t)=>{const n=We("TabsPanel",ilt,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=QJ(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return w.jsx(ke,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});ZJ.classes=iP;ZJ.displayName="@mantine/core/TabsPanel";const slt={},eZ=ft((e,t)=>{const n=We("TabsTab",slt,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=ho(),{dir:b}=Lg(),_=QJ(),E=a===_.value,S=A=>{_.onChange(_.allowTabDeactivation&&a===_.value?null:a),u==null||u(A)},C={classNames:h,styles:p,props:n};return w.jsxs(uf,{...y,..._.getStyles("tab",{className:r,style:d,variant:_.variant,...C}),disabled:c,unstyled:_.unstyled,variant:_.variant,mod:[{active:E,disabled:c,orientation:_.orientation,inverted:_.inverted,placement:_.orientation==="vertical"&&_.placement},g],ref:t,role:"tab",id:_.getTabId(a),"aria-selected":E,tabIndex:E||_.value===null?0:-1,"aria-controls":_.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?$i(f,v):void 0},onKeyDown:hQ({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:_.activateTabWithKeyboard,loop:_.loop,orientation:_.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&w.jsx("span",{..._.getStyles("tabSection",C),"data-position":"left",children:o}),i&&w.jsx("span",{..._.getStyles("tabLabel",C),children:i}),s&&w.jsx("span",{..._.getStyles("tabSection",C),"data-position":"right",children:s})]})});eZ.classes=iP;eZ.displayName="@mantine/core/TabsTab";const fhe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",olt={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},alt=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Bi(t),"--tabs-color":$i(n,e),"--tabs-text-color":bS(r,e)?Iv({color:n,theme:e,autoContrast:r}):void 0}}),Dr=ft((e,t)=>{const n=We("Tabs",olt,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:_,className:E,style:S,vars:C,autoContrast:A,mod:R,...k}=n,N=Ou(l),[L,O]=ya({value:i,defaultValue:r,finalValue:null,onChange:s}),B=Bt({name:"Tabs",props:n,classes:iP,className:E,style:S,classNames:v,styles:b,unstyled:_,vars:C,varsResolver:alt});return w.jsx(nlt,{value:{placement:g,value:L,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:y$(`${N}-tab`,fhe),getPanelId:y$(`${N}-panel`,fhe),onChange:O,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:_,getStyles:B},children:w.jsx(ke,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},R],...B("root"),...k,children:a})})});Dr.classes=iP;Dr.displayName="@mantine/core/Tabs";Dr.Tab=eZ;Dr.Panel=ZJ;Dr.List=JJ;const ult={},L0=ft((e,t)=>{const n=We("TextInput",ult,e);return w.jsx(bd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});L0.classes=bd.classes;L0.displayName="@mantine/core/TextInput";const llt=["h1","h2","h3","h4","h5","h6"];function clt(e,t){const n=t!==void 0?t:`h${e}`;return llt.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:$e(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var gAe={root:"m_8a5d1357"};const flt={order:1},dlt=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=clt(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Vs=ft((e,t)=>{const n=We("Title",flt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Bt({name:"Title",props:n,classes:gAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:dlt});return[1,2,3,4,5,6].includes(u)?w.jsx(ke,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Vs.classes=gAe;Vs.displayName="@mantine/core/Title";function hlt(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function plt(e){return P.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function mlt(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const glt=()=>hlt({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),H_=glt(),ylt=(e=H_)=>plt(e);function DS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=mlt(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function vlt(e,t=H_){const n=e.id||p2();return DS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function yAe(e,t=H_){return DS(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function blt(e,t=H_){return DS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function xlt(e=H_){DS(e,()=>[])}function _lt(e=H_){DS(e,t=>t.slice(0,e.getState().limit))}const q_={show:vlt,hide:yAe,update:blt,clean:xlt,cleanQueue:_lt,updateState:DS};function Uq(e,t){return Uq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Uq(e,t)}function vAe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Uq(e,t)}var bAe={exports:{}},wlt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Elt=wlt,Tlt=Elt;function xAe(){}function _Ae(){}_Ae.resetWarningCache=xAe;var Slt=function(){function e(r,i,s,o,a,u){if(u!==Tlt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_Ae,resetWarningCache:xAe};return n.PropTypes=n,n};bAe.exports=Slt();var Clt=bAe.exports;const dhe=zh(Clt),hhe={disabled:!1},I$=ni.createContext(null);var Alt=function(t){return t.scrollTop},oI="unmounted",$b="exited",Lb="entering",wE="entered",zq="exiting",Ug=function(e){vAe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=$b,s.appearStatus=Lb):u=wE:r.unmountOnExit||r.mountOnEnter?u=oI:u=$b,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===oI?{status:$b}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Lb&&o!==wE&&(s=Lb):(o===Lb||o===wE)&&(s=zq)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Lb){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:sI.findDOMNode(this);o&&Alt(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===$b&&this.setState({status:oI})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[sI.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||hhe.disabled){this.safeSetState({status:wE},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Lb},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:wE},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:sI.findDOMNode(this);if(!s||hhe.disabled){this.safeSetState({status:$b},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:zq},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:$b},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:sI.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===oI)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=TJ(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ni.createElement(I$.Provider,{value:null},typeof o=="function"?o(i,a):ni.cloneElement(ni.Children.only(o),a))},t}(ni.Component);Ug.contextType=I$;Ug.propTypes={};function Xw(){}Ug.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xw,onEntering:Xw,onEntered:Xw,onExit:Xw,onExiting:Xw,onExited:Xw};Ug.UNMOUNTED=oI;Ug.EXITED=$b;Ug.ENTERING=Lb;Ug.ENTERED=wE;Ug.EXITING=zq;function Ilt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tZ(e,t){var n=function(s){return t&&P.isValidElement(s)?t(s):s},r=Object.create(null);return e&&P.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function klt(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function px(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Rlt(e,t){return tZ(e.children,function(n){return P.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:px(n,"appear",e),enter:px(n,"enter",e),exit:px(n,"exit",e)})})}function Plt(e,t,n){var r=tZ(e.children),i=klt(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(P.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=P.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:px(o,"exit",e),enter:px(o,"enter",e)}):!u&&a&&!c?i[s]=P.cloneElement(o,{in:!1}):u&&a&&P.isValidElement(l)&&(i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:px(o,"exit",e),enter:px(o,"enter",e)}))}}),i}var Dlt=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Nlt={component:"div",childFactory:function(t){return t}},Py=function(e){vAe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Ilt(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?Rlt(i,a):Plt(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=tZ(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=T$({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=TJ(i,["component","childFactory"]),u=this.state.contextValue,l=Dlt(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?ni.createElement(I$.Provider,{value:u},l):ni.createElement(I$.Provider,{value:u},ni.createElement(s,a,l))},t}(ni.Component);Py.propTypes={};Py.defaultProps=Nlt;const wAe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function Olt(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),wAe.reduce((n,r)=>(n[r]=[],n),{}))}const phe={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},$lt={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Llt({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:phe[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:$lt[o]},l={opacity:0,maxHeight:0,transform:phe[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function Mlt(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const EAe=P.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=Mlt(n,e.autoClose),l=P.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return P.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),P.useEffect(()=>(d(),c),[u]),w.jsx(LJ,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});EAe.displayName="@mantine/notifications/NotificationContainer";var TAe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const Flt=Ug,Blt={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Vh("overlay"),store:H_,withinPortal:!0},jlt=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":$e(n)}}),zg=ft((e,t)=>{const n=We("Notifications",Blt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,_=ho(),E=ylt(g),S=Cet(),C=JM(),A=P.useRef({}),R=P.useRef(0),N=(_.respectReducedMotion?C:!1)?1:f,L=Bt({name:"Notifications",classes:TAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jlt});P.useEffect(()=>{g==null||g.updateState(q=>({...q,limit:p||5,defaultPosition:l}))},[p,l]),um(()=>{E.notifications.length>R.current&&setTimeout(()=>S(),0),R.current=E.notifications.length},[E.notifications]);const O=Olt(E.notifications,l),B=wAe.reduce((q,H)=>(q[H]=O[H].map(({style:G,...K})=>w.jsx(Flt,{timeout:N,onEnter:()=>A.current[K.id].offsetHeight,nodeRef:{current:A.current[K.id]},children:J=>w.jsx(EAe,{ref:F=>{A.current[K.id]=F},data:K,onHide:F=>yAe(F,g),autoClose:c,...L("notification",{style:{...Llt({state:J,position:H,transitionDuration:N,maxHeight:h}),...G}})})},K.id)),q),{});return w.jsxs(ES,{withinPortal:v,...y,children:[w.jsx(ke,{...L("root"),"data-position":"top-center",ref:t,...b,children:w.jsx(Py,{children:B["top-center"]})}),w.jsx(ke,{...L("root"),"data-position":"top-left",...b,children:w.jsx(Py,{children:B["top-left"]})}),w.jsx(ke,{...L("root",{className:nT.classNames.fullWidth}),"data-position":"top-right",...b,children:w.jsx(Py,{children:B["top-right"]})}),w.jsx(ke,{...L("root",{className:nT.classNames.fullWidth}),"data-position":"bottom-right",...b,children:w.jsx(Py,{children:B["bottom-right"]})}),w.jsx(ke,{...L("root"),"data-position":"bottom-left",...b,children:w.jsx(Py,{children:B["bottom-left"]})}),w.jsx(ke,{...L("root"),"data-position":"bottom-center",...b,children:w.jsx(Py,{children:B["bottom-center"]})})]})});zg.classes=TAe;zg.displayName="@mantine/notifications/Notifications";zg.show=q_.show;zg.hide=q_.hide;zg.update=q_.update;zg.clean=q_.clean;zg.cleanQueue=q_.cleanQueue;zg.updateState=q_.updateState;const SAe=P.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),po=()=>P.useContext(SAe);function Ult({children:e}){const[t,n]=P.useState(void 0),r=P.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return w.jsx(SAe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bR(){return bR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bR.apply(this,arguments)}var Jy;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jy||(Jy={}));const mhe="popstate";function zlt(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return Vq("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:AAe(i)}return Hlt(t,n,null,e)}function oo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function CAe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Vlt(){return Math.random().toString(36).substr(2,8)}function ghe(e,t){return{usr:e.state,key:e.key,idx:t}}function Vq(e,t,n,r){return n===void 0&&(n=null),bR({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?NS(t):t,{state:n,key:t&&t.key||r||Vlt()})}function AAe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function NS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Hlt(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Jy.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(bR({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Jy.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Jy.Push;let v=Vq(m.location,g,y);l=c()+1;let b=ghe(v,l),_=m.createHref(v);try{o.pushState(b,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(_)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Jy.Replace;let v=Vq(m.location,g,y);l=c();let b=ghe(v,l),_=m.createHref(v);o.replaceState(b,"",_),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:AAe(g);return v=v.replace(/ $/,"%20"),oo(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(mhe,f),u=g,()=>{i.removeEventListener(mhe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var yhe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yhe||(yhe={}));function qlt(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?NS(t):t,i=RAe(r.pathname||"/",n);if(i==null)return null;let s=IAe(e);Wlt(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=ict(i);o=tct(s[a],u)}return o}function IAe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(oo(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=x1([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(oo(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),IAe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:Zlt(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of kAe(s.path))i(s,o,u)}),t}function kAe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=kAe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function Wlt(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ect(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Glt=/^:[\w-]+$/,Ylt=3,Klt=2,Xlt=1,Qlt=10,Jlt=-2,vhe=e=>e==="*";function Zlt(e,t){let n=e.split("/"),r=n.length;return n.some(vhe)&&(r+=Jlt),t&&(r+=Klt),n.filter(i=>!vhe(i)).reduce((i,s)=>i+(Glt.test(s)?Ylt:s===""?Xlt:Qlt),r)}function ect(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function tct(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=nct({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:x1([i,c.pathname]),pathnameBase:uct(x1([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=x1([i,c.pathnameBase]))}return s}function nct(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=rct(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function rct(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),CAe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function ict(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return CAe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function RAe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function sct(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?NS(e):e;return{pathname:n?n.startsWith("/")?n:oct(n,t):t,search:lct(r),hash:cct(i)}}function oct(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function act(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function nZ(e,t){let n=act(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rZ(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=NS(e):(i=bR({},e),oo(!i.pathname||!i.pathname.includes("?"),Gj("?","pathname","search",i)),oo(!i.pathname||!i.pathname.includes("#"),Gj("#","pathname","hash",i)),oo(!i.search||!i.search.includes("#"),Gj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=sct(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const x1=e=>e.join("/").replace(/\/\/+/g,"/"),uct=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lct=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cct=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fct(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const PAe=["post","put","patch","delete"];new Set(PAe);const dct=["get",...PAe];new Set(dct);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xR(){return xR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xR.apply(this,arguments)}const iZ=P.createContext(null),hct=P.createContext(null),W_=P.createContext(null),IF=P.createContext(null),Rm=P.createContext({outlet:null,matches:[],isDataRoute:!1}),DAe=P.createContext(null);function NAe(e,t){let{relative:n}={};OS()||oo(!1);let{basename:r,navigator:i}=P.useContext(W_),{hash:s,pathname:o,search:a}=yct(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:x1([r,o])),i.createHref({pathname:u,search:a,hash:s})}function OS(){return P.useContext(IF)!=null}function Nv(){return OS()||oo(!1),P.useContext(IF).location}function OAe(e){P.useContext(W_).static||P.useLayoutEffect(e)}function Hh(){let{isDataRoute:e}=P.useContext(Rm);return e?Ict():pct()}function pct(){OS()||oo(!1);let e=P.useContext(iZ),{basename:t,future:n,navigator:r}=P.useContext(W_),{matches:i}=P.useContext(Rm),{pathname:s}=Nv(),o=JSON.stringify(nZ(i,n.v7_relativeSplatPath)),a=P.useRef(!1);return OAe(()=>{a.current=!0}),P.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=rZ(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:x1([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const mct=P.createContext(null);function gct(e){let t=P.useContext(Rm).outlet;return t&&P.createElement(mct.Provider,{value:e},t)}function lm(){let{matches:e}=P.useContext(Rm),t=e[e.length-1];return t?t.params:{}}function yct(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=P.useContext(W_),{matches:i}=P.useContext(Rm),{pathname:s}=Nv(),o=JSON.stringify(nZ(i,r.v7_relativeSplatPath));return P.useMemo(()=>rZ(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function $Ae(e,t){return vct(e,t)}function vct(e,t,n,r){OS()||oo(!1);let{navigator:i}=P.useContext(W_),{matches:s}=P.useContext(Rm),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Nv(),c;if(t){var f;let g=typeof t=="string"?NS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||oo(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=qlt(e,{pathname:h}),m=Ect(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:x1([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:x1([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?P.createElement(IF.Provider,{value:{location:xR({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Jy.Pop}},m):m}function bct(){let e=Act(),t=fct(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,null)}const xct=P.createElement(bct,null);class _ct extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?P.createElement(Rm.Provider,{value:this.props.routeContext},P.createElement(DAe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wct(e){let{routeContext:t,match:n,children:r}=e,i=P.useContext(iZ);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Rm.Provider,{value:t},r)}function Ect(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||oo(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||xct,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=P.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,P.createElement(wct,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?P.createElement(_ct,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var LAe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(LAe||{}),k$=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(k$||{});function Tct(e){let t=P.useContext(iZ);return t||oo(!1),t}function Sct(e){let t=P.useContext(hct);return t||oo(!1),t}function Cct(e){let t=P.useContext(Rm);return t||oo(!1),t}function MAe(e){let t=Cct(),n=t.matches[t.matches.length-1];return n.route.id||oo(!1),n.route.id}function Act(){var e;let t=P.useContext(DAe),n=Sct(k$.UseRouteError),r=MAe(k$.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Ict(){let{router:e}=Tct(LAe.UseNavigateStable),t=MAe(k$.UseNavigateStable),n=P.useRef(!1);return OAe(()=>{n.current=!0}),P.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,xR({fromRouteId:t},s)))},[e,t])}function sZ(e){let{to:t,replace:n,state:r,relative:i}=e;OS()||oo(!1);let{future:s,static:o}=P.useContext(W_),{matches:a}=P.useContext(Rm),{pathname:u}=Nv(),l=Hh(),c=rZ(t,nZ(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return P.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function kct(e){return gct(e.context)}function Mb(e){oo(!1)}function Rct(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Jy.Pop,navigator:s,static:o=!1,future:a}=e;OS()&&oo(!1);let u=t.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:u,navigator:s,static:o,future:xR({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=NS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=P.useMemo(()=>{let g=RAe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:P.createElement(W_.Provider,{value:l},P.createElement(IF.Provider,{children:n,value:m}))}function Pct(e){let{children:t,location:n}=e;return $Ae(Hq(t),n)}new Promise(()=>{});function Hq(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;let s=[...t,i];if(r.type===P.Fragment){n.push.apply(n,Hq(r.props.children,s));return}r.type!==Mb&&oo(!1),!r.props.index||!r.props.children||oo(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hq(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qq(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Dct(e,t){let n=qq(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Nct="6";try{window.__reactRouterVersion=Nct}catch{}const Oct="startTransition",bhe=q6[Oct];function $ct(e){let{basename:t,children:n,future:r,window:i}=e,s=P.useRef();s.current==null&&(s.current=zlt({window:i,v5Compat:!0}));let o=s.current,[a,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=P.useCallback(f=>{l&&bhe?bhe(()=>u(f)):u(f)},[u,l]);return P.useLayoutEffect(()=>o.listen(c),[o,c]),P.createElement(Rct,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var xhe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xhe||(xhe={}));var _he;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_he||(_he={}));function Ov(e){let t=P.useRef(qq(e)),n=P.useRef(!1),r=Nv(),i=P.useMemo(()=>Dct(r.search,n.current?null:t.current),[r.search]),s=Hh(),o=P.useCallback((a,u)=>{const l=qq(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const oZ=P.createContext(null);oZ.displayName="@mantine/modals/ModalsContext";function Lct(){const e=P.useContext(oZ);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Mct({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Lct(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return w.jsxs(w.Fragment,{children:[l&&w.jsx(ke,{mb:"md",children:l}),w.jsxs(bi,{justify:"flex-end",...o,children:[w.jsx(on,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),w.jsx(on,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[Fct,kF]=Uet("mantine-modals");kF("openModal");kF("closeModal");kF("closeAllModals");const whe=kF("openConfirmModal");function Ehe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Bct(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Ehe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Ehe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function jct(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function Uct({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=P.useReducer(Bct,{modals:[],current:null}),o=P.useRef(i);o.current=i;const a=P.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=P.useCallback(({modalId:g,...y})=>{const v=g||p2();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=P.useCallback(({modalId:g,...y})=>{const v=g||p2();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=P.useCallback((g,{modalId:y,...v})=>{const b=y||p2();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=P.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);Fct({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:w.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=jct(g.props);return{modalProps:y,content:w.jsx(Mct,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:w.jsx(w.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return w.jsxs(oZ.Provider,{value:d,children:[w.jsx(Ws,{zIndex:Vh("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zct={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=(e,t,n,r)=>{const i=P.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>P.createElement("svg",{ref:f,...zct[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>P.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vct=Dn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hct=Dn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sk=Dn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var The=Dn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var She=Dn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qct=Dn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wct=Dn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gct=Dn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yct=Dn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kct=Dn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xct=Dn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FAe=Dn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BAe=Dn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qct=Dn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Che=Dn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jct=Dn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zct=Dn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eft=Dn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tft=Dn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nft=Dn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rft=Dn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aZ=Dn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ift=Dn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sft=Dn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oft=Dn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aft=Dn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uft=Dn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lft=Dn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cft=Dn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jAe=Dn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fft=Dn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dft=Dn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hft=Dn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pft=Dn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mft=Dn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UAe=Dn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gft=Dn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zAe=Dn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yft=Dn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VAe=Dn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uZ=Dn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ahe=Dn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lZ=Dn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vft=Dn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bft=Dn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xft=Dn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function HAe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const dl="/vis-decode/";function Ihe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function qAe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const _ft=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,wft=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Eft={};function khe(e,t){return(Eft.jsx?wft:_ft).test(e)}const Tft=/[ \t\n\f\r]/g;function Sft(e){return typeof e=="object"?e.type==="text"?Rhe(e.value):!1:Rhe(e)}function Rhe(e){return e.replace(Tft,"")===""}let sP=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};sP.prototype.property={};sP.prototype.normal={};sP.prototype.space=null;function WAe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new sP(n,r,t)}function _R(e){return e.toLowerCase()}let _d=class{constructor(t,n){this.property=t,this.attribute=n}};_d.prototype.space=null;_d.prototype.boolean=!1;_d.prototype.booleanish=!1;_d.prototype.overloadedBoolean=!1;_d.prototype.number=!1;_d.prototype.commaSeparated=!1;_d.prototype.spaceSeparated=!1;_d.prototype.commaOrSpaceSeparated=!1;_d.prototype.mustUseProperty=!1;_d.prototype.defined=!1;let Cft=0;const Hn=G_(),xo=G_(),GAe=G_(),wt=G_(),Ki=G_(),v2=G_(),Lc=G_();function G_(){return 2**++Cft}const Wq=Object.freeze(Object.defineProperty({__proto__:null,boolean:Hn,booleanish:xo,commaOrSpaceSeparated:Lc,commaSeparated:v2,number:wt,overloadedBoolean:GAe,spaceSeparated:Ki},Symbol.toStringTag,{value:"Module"})),Yj=Object.keys(Wq);class cZ extends _d{constructor(t,n,r,i){let s=-1;if(super(t,n),Phe(this,"space",i),typeof r=="number")for(;++s<Yj.length;){const o=Yj[s];Phe(this,Yj[s],(r&Wq[o])===Wq[o])}}}cZ.prototype.defined=!0;function Phe(e,t,n){n&&(e[t]=n)}const Aft={}.hasOwnProperty;function $S(e){const t={},n={};let r;for(r in e.properties)if(Aft.call(e.properties,r)){const i=e.properties[r],s=new cZ(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[_R(r)]=r,n[_R(s.attribute)]=r}return new sP(t,n,e.space)}const YAe=$S({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),KAe=$S({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function XAe(e,t){return t in e?e[t]:t}function QAe(e,t){return XAe(e,t.toLowerCase())}const JAe=$S({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:QAe,properties:{xmlns:null,xmlnsXLink:null}}),ZAe=$S({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:xo,ariaAutoComplete:null,ariaBusy:xo,ariaChecked:xo,ariaColCount:wt,ariaColIndex:wt,ariaColSpan:wt,ariaControls:Ki,ariaCurrent:null,ariaDescribedBy:Ki,ariaDetails:null,ariaDisabled:xo,ariaDropEffect:Ki,ariaErrorMessage:null,ariaExpanded:xo,ariaFlowTo:Ki,ariaGrabbed:xo,ariaHasPopup:null,ariaHidden:xo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ki,ariaLevel:wt,ariaLive:null,ariaModal:xo,ariaMultiLine:xo,ariaMultiSelectable:xo,ariaOrientation:null,ariaOwns:Ki,ariaPlaceholder:null,ariaPosInSet:wt,ariaPressed:xo,ariaReadOnly:xo,ariaRelevant:null,ariaRequired:xo,ariaRoleDescription:Ki,ariaRowCount:wt,ariaRowIndex:wt,ariaRowSpan:wt,ariaSelected:xo,ariaSetSize:wt,ariaSort:null,ariaValueMax:wt,ariaValueMin:wt,ariaValueNow:wt,ariaValueText:null,role:null}}),Ift=$S({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:QAe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:v2,acceptCharset:Ki,accessKey:Ki,action:null,allow:null,allowFullScreen:Hn,allowPaymentRequest:Hn,allowUserMedia:Hn,alt:null,as:null,async:Hn,autoCapitalize:null,autoComplete:Ki,autoFocus:Hn,autoPlay:Hn,blocking:Ki,capture:null,charSet:null,checked:Hn,cite:null,className:Ki,cols:wt,colSpan:null,content:null,contentEditable:xo,controls:Hn,controlsList:Ki,coords:wt|v2,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Hn,defer:Hn,dir:null,dirName:null,disabled:Hn,download:GAe,draggable:xo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Hn,formTarget:null,headers:Ki,height:wt,hidden:Hn,high:wt,href:null,hrefLang:null,htmlFor:Ki,httpEquiv:Ki,id:null,imageSizes:null,imageSrcSet:null,inert:Hn,inputMode:null,integrity:null,is:null,isMap:Hn,itemId:null,itemProp:Ki,itemRef:Ki,itemScope:Hn,itemType:Ki,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Hn,low:wt,manifest:null,max:null,maxLength:wt,media:null,method:null,min:null,minLength:wt,multiple:Hn,muted:Hn,name:null,nonce:null,noModule:Hn,noValidate:Hn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Hn,optimum:wt,pattern:null,ping:Ki,placeholder:null,playsInline:Hn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Hn,referrerPolicy:null,rel:Ki,required:Hn,reversed:Hn,rows:wt,rowSpan:wt,sandbox:Ki,scope:null,scoped:Hn,seamless:Hn,selected:Hn,shadowRootClonable:Hn,shadowRootDelegatesFocus:Hn,shadowRootMode:null,shape:null,size:wt,sizes:null,slot:null,span:wt,spellCheck:xo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wt,step:null,style:null,tabIndex:wt,target:null,title:null,translate:null,type:null,typeMustMatch:Hn,useMap:null,value:xo,width:wt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ki,axis:null,background:null,bgColor:null,border:wt,borderColor:null,bottomMargin:wt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Hn,declare:Hn,event:null,face:null,frame:null,frameBorder:null,hSpace:wt,leftMargin:wt,link:null,longDesc:null,lowSrc:null,marginHeight:wt,marginWidth:wt,noResize:Hn,noHref:Hn,noShade:Hn,noWrap:Hn,object:null,profile:null,prompt:null,rev:null,rightMargin:wt,rules:null,scheme:null,scrolling:xo,standby:null,summary:null,text:null,topMargin:wt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Hn,disableRemotePlayback:Hn,prefix:null,property:null,results:wt,security:null,unselectable:null}}),kft=$S({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:XAe,properties:{about:Lc,accentHeight:wt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wt,amplitude:wt,arabicForm:null,ascent:wt,attributeName:null,attributeType:null,azimuth:wt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wt,by:null,calcMode:null,capHeight:wt,className:Ki,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wt,diffuseConstant:wt,direction:null,display:null,dur:null,divisor:wt,dominantBaseline:null,download:Hn,dx:null,dy:null,edgeMode:null,editable:null,elevation:wt,enableBackground:null,end:null,event:null,exponent:wt,externalResourcesRequired:null,fill:null,fillOpacity:wt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:v2,g2:v2,glyphName:v2,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wt,horizOriginX:wt,horizOriginY:wt,id:null,ideographic:wt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wt,k:wt,k1:wt,k2:wt,k3:wt,k4:wt,kernelMatrix:Lc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wt,overlineThickness:wt,paintOrder:null,panose1:null,path:null,pathLength:wt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ki,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wt,pointsAtY:wt,pointsAtZ:wt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Lc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Lc,rev:Lc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Lc,requiredFeatures:Lc,requiredFonts:Lc,requiredFormats:Lc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wt,specularExponent:wt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wt,strikethroughThickness:wt,string:null,stroke:null,strokeDashArray:Lc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wt,strokeOpacity:wt,strokeWidth:null,style:null,surfaceScale:wt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Lc,tabIndex:wt,tableValues:null,target:null,targetX:wt,targetY:wt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Lc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:wt,underlineThickness:wt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wt,values:null,vAlphabetic:wt,vMathematical:wt,vectorEffect:null,vHanging:wt,vIdeographic:wt,version:null,vertAdvY:wt,vertOriginX:wt,vertOriginY:wt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Rft=/^data[-\w.:]+$/i,Dhe=/-[a-z]/g,Pft=/[A-Z]/g;function RF(e,t){const n=_R(t);let r=t,i=_d;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Rft.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Dhe,Nft);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Dhe.test(s)){let o=s.replace(Pft,Dft);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=cZ}return new i(r,t)}function Dft(e){return"-"+e.toLowerCase()}function Nft(e){return e.charAt(1).toUpperCase()}const Oft={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},oP=WAe([KAe,YAe,JAe,ZAe,Ift],"html"),$v=WAe([KAe,YAe,JAe,ZAe,kft],"svg");function Nhe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function eIe(e){return e.join(" ").trim()}var tIe={},Ohe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,$ft=/\n/g,Lft=/^\s*/,Mft=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Fft=/^:\s*/,Bft=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,jft=/^[;\s]*/,Uft=/^\s+|\s+$/g,zft=`
`,$he="/",Lhe="*",Qb="",Vft="comment",Hft="declaration",qft=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match($ft);m&&(n+=m.length);var g=p.lastIndexOf(zft);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(Lft)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!($he!=e.charAt(0)||Lhe!=e.charAt(1))){for(var m=2;Qb!=e.charAt(m)&&(Lhe!=e.charAt(m)||$he!=e.charAt(m+1));)++m;if(m+=2,Qb===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Vft,comment:g})}}function d(){var p=s(),m=u(Mft);if(m){if(f(),!u(Fft))return a("property missing ':'");var g=u(Bft),y=p({type:Hft,property:Mhe(m[0].replace(Ohe,Qb)),value:g?Mhe(g[0].replace(Ohe,Qb)):Qb});return u(jft),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Mhe(e){return e?e.replace(Uft,Qb):Qb}var Wft=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tIe,"__esModule",{value:!0});var Gft=Wft(qft);function Yft(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Gft.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Fhe=tIe.default=Yft;const Kft=Fhe.default||Fhe,PF=nIe("end"),Pm=nIe("start");function nIe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Xft(e){const t=Pm(e),n=PF(e);if(t&&n)return{start:t,end:n}}function ok(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Bhe(e.position):"start"in e||"end"in e?Bhe(e):"line"in e||"column"in e?Gq(e):""}function Gq(e){return jhe(e&&e.line)+":"+jhe(e&&e.column)}function Bhe(e){return Gq(e&&e.start)+"-"+Gq(e&&e.end)}function jhe(e){return e&&typeof e=="number"?e:1}class $u extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=ok(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}$u.prototype.file="";$u.prototype.name="";$u.prototype.reason="";$u.prototype.message="";$u.prototype.stack="";$u.prototype.column=void 0;$u.prototype.line=void 0;$u.prototype.ancestors=void 0;$u.prototype.cause=void 0;$u.prototype.fatal=void 0;$u.prototype.place=void 0;$u.prototype.ruleId=void 0;$u.prototype.source=void 0;const fZ={}.hasOwnProperty,Qft=new Map,Jft=/[A-Z]/g,Zft=/-([a-z])/g,edt=new Set(["table","tbody","thead","tfoot","tr"]),tdt=new Set(["td","th"]),rIe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ndt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=cdt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=ldt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?$v:oP,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=iIe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function iIe(e,t,n){if(t.type==="element")return rdt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return idt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return odt(e,t,n);if(t.type==="mdxjsEsm")return sdt(e,t);if(t.type==="root")return adt(e,t,n);if(t.type==="text")return udt(e,t)}function rdt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=$v,e.schema=i),e.ancestors.push(t);const s=oIe(e,t.tagName,!1),o=fdt(e,t);let a=hZ(e,t);return edt.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Sft(u):!0})),sIe(e,o,s,t),dZ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function idt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}wR(e,t.position)}function sdt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);wR(e,t.position)}function odt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=$v,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:oIe(e,t.name,!0),o=ddt(e,t),a=hZ(e,t);return sIe(e,o,s,t),dZ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function adt(e,t,n){const r={};return dZ(r,hZ(e,t)),e.create(t,e.Fragment,r,n)}function udt(e,t){return t.value}function sIe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function dZ(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function ldt(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function cdt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Pm(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function fdt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&fZ.call(t.properties,i)){const s=hdt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&tdt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function ddt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else wR(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else wR(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function hZ(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Qft;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=iIe(e,s,o);a!==void 0&&n.push(a)}return n}function hdt(e,t,n){const r=RF(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?qAe(n):eIe(n)),r.property==="style"){let i=typeof n=="object"?n:pdt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=mdt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Oft[r.property]||r.property:r.attribute,n]}}function pdt(e,t){const n={};try{Kft(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new $u("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=rIe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Zft,ydt)),n[o]=s}}function oIe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=khe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=khe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return fZ.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);wR(e)}function wR(e,t){const n=new $u("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=rIe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function mdt(e){const t={};let n;for(n in e)fZ.call(e,n)&&(t[gdt(n)]=e[n]);return t}function gdt(e){let t=e.replace(Jft,vdt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function ydt(e,t){return t.toUpperCase()}function vdt(e){return"-"+e.toLowerCase()}const Kj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},bdt={};function xdt(e,t){const n=bdt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return aIe(e,r,i)}function aIe(e,t,n){if(_dt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Uhe(e.children,t,n)}return Array.isArray(e)?Uhe(e,t,n):""}function Uhe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=aIe(e[i],t,n);return r.join("")}function _dt(e){return!!(e&&typeof e=="object")}const zhe=document.createElement("i");function pZ(e){const t="&"+e+";";zhe.innerHTML=t;const n=zhe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function mg(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Wf(e,t){return e.length>0?(mg(e,e.length,0,t),e):t}const Vhe={}.hasOwnProperty;function wdt(e){const t={};let n=-1;for(;++n<e.length;)Edt(t,e[n]);return t}function Edt(e,t){let n;for(n in t){const i=(Vhe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Vhe.call(i,o)||(i[o]=[]);const a=s[o];Tdt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Tdt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);mg(e,0,0,r)}function uIe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function b2(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ip=Lv(/[A-Za-z]/),Kc=Lv(/[\dA-Za-z]/),Sdt=Lv(/[#-'*+\--9=?A-Z^-~]/);function Yq(e){return e!==null&&(e<32||e===127)}const Kq=Lv(/\d/),Cdt=Lv(/[\dA-Fa-f]/),Adt=Lv(/[!-/:-@[-`{-~]/);function Cn(e){return e!==null&&e<-2}function uc(e){return e!==null&&(e<0||e===32)}function di(e){return e===-2||e===-1||e===32}const Idt=Lv(new RegExp("\\p{P}|\\p{S}","u")),kdt=Lv(/\s/);function Lv(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function LS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Kc(e.charCodeAt(n+1))&&Kc(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Qi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return di(u)?(e.enter(n),a(u)):t(u)}function a(u){return di(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const Rdt={tokenize:Pdt};function Pdt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Qi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Cn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Ddt={tokenize:Ndt},Hhe={tokenize:Odt};function Ndt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const _=n[r];return t.containerState=_[1],e.attempt(_[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const _=t.events.length;let E=_,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let C=_;for(;C<t.events.length;)t.events[C][1].end=Object.assign({},S),C++;return mg(t.events,E+1,0,t.events.slice(_)),t.events.length=C,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Hhe,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Hhe,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Cn(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,_){const E=t.sliceStream(b);if(_&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const C=t.events.length;let A=C,R,k;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(R){k=t.events[A][1].end;break}R=!0}for(y(r),S=C;S<t.events.length;)t.events[S][1].end=Object.assign({},k),S++;mg(t.events,A+1,0,t.events.slice(C)),t.events.length=S}}function y(b){let _=n.length;for(;_-- >b;){const E=n[_];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Odt(e,t,n){return Qi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function qhe(e){if(e===null||uc(e)||kdt(e))return 1;if(Idt(e))return 2}function mZ(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Xq={name:"attention",tokenize:Ldt,resolveAll:$dt};function $dt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Whe(f,-u),Whe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Wf(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Wf(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Wf(l,mZ(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Wf(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Wf(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,mg(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Ldt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=qhe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=qhe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Whe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Mdt={name:"autolink",tokenize:Fdt};function Fdt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Ip(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Kc(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Kc(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Yq(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Sdt(h)?(e.consume(h),l):n(h)}function c(h){return Kc(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Kc(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const DF={tokenize:Bdt,partial:!0};function Bdt(e,t,n){return r;function r(s){return di(s)?Qi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Cn(s)?t(s):n(s)}}const lIe={name:"blockQuote",tokenize:jdt,continuation:{tokenize:Udt},exit:zdt};function jdt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return di(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Udt(e,t,n){const r=this;return i;function i(o){return di(o)?Qi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(lIe,t,n)(o)}}function zdt(e){e.exit("blockQuote")}const cIe={name:"characterEscape",tokenize:Vdt};function Vdt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Adt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const fIe={name:"characterReference",tokenize:Hdt};function Hdt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Kc,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Cdt,c):(e.enter("characterReferenceValue"),s=7,o=Kq,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Kc&&!pZ(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Ghe={tokenize:Wdt,partial:!0},Yhe={name:"codeFenced",tokenize:qdt,concrete:!0};function qdt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),di(S)?Qi(e,f,"whitespace")(S):f(S))}function f(S){return S===null||Cn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Ghe,m,_)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||Cn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):di(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Qi(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||Cn(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Cn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,_,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&di(S)?Qi(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||Cn(S)?e.check(Ghe,m,_)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||Cn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function _(S){return e.exit("codeFenced"),t(S)}function E(S,C,A){let R=0;return k;function k(q){return S.enter("lineEnding"),S.consume(q),S.exit("lineEnding"),N}function N(q){return S.enter("codeFencedFence"),di(q)?Qi(S,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):L(q)}function L(q){return q===a?(S.enter("codeFencedFenceSequence"),O(q)):A(q)}function O(q){return q===a?(R++,S.consume(q),O):R>=o?(S.exit("codeFencedFenceSequence"),di(q)?Qi(S,B,"whitespace")(q):B(q)):A(q)}function B(q){return q===null||Cn(q)?(S.exit("codeFencedFence"),C(q)):A(q)}}}function Wdt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Xj={name:"codeIndented",tokenize:Ydt},Gdt={tokenize:Kdt,partial:!0};function Ydt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Qi(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Cn(l)?e.attempt(Gdt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Cn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Kdt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Qi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Cn(o)?i(o):n(o)}}const Xdt={name:"codeText",tokenize:Zdt,resolve:Qdt,previous:Jdt};function Qdt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Jdt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Zdt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Cn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Cn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class eht{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&dA(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),dA(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),dA(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);dA(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);dA(this.left,n.reverse())}}}function dA(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function dIe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new eht(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,tht(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return mg(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function tht(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const nht={tokenize:sht,resolve:iht},rht={tokenize:oht,partial:!0};function iht(e){return dIe(e),e}function sht(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Cn(a)?e.check(rht,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function oht(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Qi(e,s,"linePrefix")}function s(o){if(o===null||Cn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function hIe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||Yq(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Cn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||uc(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||Yq(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function pIe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Cn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Cn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!di(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function mIe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Cn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Qi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Cn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function ak(e,t){let n;return r;function r(i){return Cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):di(i)?Qi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const aht={name:"definition",tokenize:lht},uht={tokenize:cht,partial:!0};function lht(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return pIe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=b2(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return uc(h)?ak(e,l)(h):l(h)}function l(h){return hIe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(uht,f,f)(h)}function f(h){return di(h)?Qi(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Cn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function cht(e,t,n){return r;function r(a){return uc(a)?ak(e,i)(a):n(a)}function i(a){return mIe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return di(a)?Qi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Cn(a)?t(a):n(a)}}const fht={name:"hardBreakEscape",tokenize:dht};function dht(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Cn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const hht={name:"headingAtx",tokenize:mht,resolve:pht};function pht(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},mg(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function mht(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||uc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Cn(c)?(e.exit("atxHeading"),t(c)):di(c)?Qi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||uc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const ght=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Khe=["pre","script","style","textarea"],yht={name:"htmlFlow",tokenize:_ht,resolveTo:xht,concrete:!0},vht={tokenize:Eht,partial:!0},bht={tokenize:wht,partial:!0};function xht(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function _ht(e,t,n){const r=this;let i,s,o,a,u;return l;function l(M){return c(M)}function c(M){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(M),f}function f(M){return M===33?(e.consume(M),d):M===47?(e.consume(M),s=!0,m):M===63?(e.consume(M),i=3,r.interrupt?t:F):Ip(M)?(e.consume(M),o=String.fromCharCode(M),g):n(M)}function d(M){return M===45?(e.consume(M),i=2,h):M===91?(e.consume(M),i=5,a=0,p):Ip(M)?(e.consume(M),i=4,r.interrupt?t:F):n(M)}function h(M){return M===45?(e.consume(M),r.interrupt?t:F):n(M)}function p(M){const V="CDATA[";return M===V.charCodeAt(a++)?(e.consume(M),a===V.length?r.interrupt?t:L:p):n(M)}function m(M){return Ip(M)?(e.consume(M),o=String.fromCharCode(M),g):n(M)}function g(M){if(M===null||M===47||M===62||uc(M)){const V=M===47,Q=o.toLowerCase();return!V&&!s&&Khe.includes(Q)?(i=1,r.interrupt?t(M):L(M)):ght.includes(o.toLowerCase())?(i=6,V?(e.consume(M),y):r.interrupt?t(M):L(M)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(M):s?v(M):b(M))}return M===45||Kc(M)?(e.consume(M),o+=String.fromCharCode(M),g):n(M)}function y(M){return M===62?(e.consume(M),r.interrupt?t:L):n(M)}function v(M){return di(M)?(e.consume(M),v):k(M)}function b(M){return M===47?(e.consume(M),k):M===58||M===95||Ip(M)?(e.consume(M),_):di(M)?(e.consume(M),b):k(M)}function _(M){return M===45||M===46||M===58||M===95||Kc(M)?(e.consume(M),_):E(M)}function E(M){return M===61?(e.consume(M),S):di(M)?(e.consume(M),E):b(M)}function S(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(e.consume(M),u=M,C):di(M)?(e.consume(M),S):A(M)}function C(M){return M===u?(e.consume(M),u=null,R):M===null||Cn(M)?n(M):(e.consume(M),C)}function A(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||uc(M)?E(M):(e.consume(M),A)}function R(M){return M===47||M===62||di(M)?b(M):n(M)}function k(M){return M===62?(e.consume(M),N):n(M)}function N(M){return M===null||Cn(M)?L(M):di(M)?(e.consume(M),N):n(M)}function L(M){return M===45&&i===2?(e.consume(M),H):M===60&&i===1?(e.consume(M),G):M===62&&i===4?(e.consume(M),j):M===63&&i===3?(e.consume(M),F):M===93&&i===5?(e.consume(M),J):Cn(M)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(vht,W,O)(M)):M===null||Cn(M)?(e.exit("htmlFlowData"),O(M)):(e.consume(M),L)}function O(M){return e.check(bht,B,W)(M)}function B(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),q}function q(M){return M===null||Cn(M)?O(M):(e.enter("htmlFlowData"),L(M))}function H(M){return M===45?(e.consume(M),F):L(M)}function G(M){return M===47?(e.consume(M),o="",K):L(M)}function K(M){if(M===62){const V=o.toLowerCase();return Khe.includes(V)?(e.consume(M),j):L(M)}return Ip(M)&&o.length<8?(e.consume(M),o+=String.fromCharCode(M),K):L(M)}function J(M){return M===93?(e.consume(M),F):L(M)}function F(M){return M===62?(e.consume(M),j):M===45&&i===2?(e.consume(M),F):L(M)}function j(M){return M===null||Cn(M)?(e.exit("htmlFlowData"),W(M)):(e.consume(M),j)}function W(M){return e.exit("htmlFlow"),t(M)}}function wht(e,t,n){const r=this;return i;function i(o){return Cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Eht(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(DF,t,n)}}const Tht={name:"htmlText",tokenize:Sht};function Sht(e,t,n){const r=this;let i,s,o;return a;function a(F){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(F),u}function u(F){return F===33?(e.consume(F),l):F===47?(e.consume(F),E):F===63?(e.consume(F),b):Ip(F)?(e.consume(F),A):n(F)}function l(F){return F===45?(e.consume(F),c):F===91?(e.consume(F),s=0,p):Ip(F)?(e.consume(F),v):n(F)}function c(F){return F===45?(e.consume(F),h):n(F)}function f(F){return F===null?n(F):F===45?(e.consume(F),d):Cn(F)?(o=f,G(F)):(e.consume(F),f)}function d(F){return F===45?(e.consume(F),h):f(F)}function h(F){return F===62?H(F):F===45?d(F):f(F)}function p(F){const j="CDATA[";return F===j.charCodeAt(s++)?(e.consume(F),s===j.length?m:p):n(F)}function m(F){return F===null?n(F):F===93?(e.consume(F),g):Cn(F)?(o=m,G(F)):(e.consume(F),m)}function g(F){return F===93?(e.consume(F),y):m(F)}function y(F){return F===62?H(F):F===93?(e.consume(F),y):m(F)}function v(F){return F===null||F===62?H(F):Cn(F)?(o=v,G(F)):(e.consume(F),v)}function b(F){return F===null?n(F):F===63?(e.consume(F),_):Cn(F)?(o=b,G(F)):(e.consume(F),b)}function _(F){return F===62?H(F):b(F)}function E(F){return Ip(F)?(e.consume(F),S):n(F)}function S(F){return F===45||Kc(F)?(e.consume(F),S):C(F)}function C(F){return Cn(F)?(o=C,G(F)):di(F)?(e.consume(F),C):H(F)}function A(F){return F===45||Kc(F)?(e.consume(F),A):F===47||F===62||uc(F)?R(F):n(F)}function R(F){return F===47?(e.consume(F),H):F===58||F===95||Ip(F)?(e.consume(F),k):Cn(F)?(o=R,G(F)):di(F)?(e.consume(F),R):H(F)}function k(F){return F===45||F===46||F===58||F===95||Kc(F)?(e.consume(F),k):N(F)}function N(F){return F===61?(e.consume(F),L):Cn(F)?(o=N,G(F)):di(F)?(e.consume(F),N):R(F)}function L(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),i=F,O):Cn(F)?(o=L,G(F)):di(F)?(e.consume(F),L):(e.consume(F),B)}function O(F){return F===i?(e.consume(F),i=void 0,q):F===null?n(F):Cn(F)?(o=O,G(F)):(e.consume(F),O)}function B(F){return F===null||F===34||F===39||F===60||F===61||F===96?n(F):F===47||F===62||uc(F)?R(F):(e.consume(F),B)}function q(F){return F===47||F===62||uc(F)?R(F):n(F)}function H(F){return F===62?(e.consume(F),e.exit("htmlTextData"),e.exit("htmlText"),t):n(F)}function G(F){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),K}function K(F){return di(F)?Qi(e,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):J(F)}function J(F){return e.enter("htmlTextData"),o(F)}}const gZ={name:"labelEnd",tokenize:Pht,resolveTo:Rht,resolveAll:kht},Cht={tokenize:Dht},Aht={tokenize:Nht},Iht={tokenize:Oht};function kht(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Rht(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Wf(a,e.slice(s+1,s+r+3)),a=Wf(a,[["enter",c,t]]),a=Wf(a,mZ(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Wf(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Wf(a,e.slice(o+1)),a=Wf(a,[["exit",u,t]]),mg(e,s,e.length,a),e}function Pht(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(b2(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(Cht,c,o?c:f)(d):d===91?e.attempt(Aht,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(Iht,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function Dht(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return uc(f)?ak(e,s)(f):s(f)}function s(f){return f===41?c(f):hIe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return uc(f)?ak(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?mIe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return uc(f)?ak(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Nht(e,t,n){const r=this;return i;function i(a){return pIe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(b2(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Oht(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const $ht={name:"labelStartImage",tokenize:Lht,resolveAll:gZ.resolveAll};function Lht(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Mht={name:"labelStartLink",tokenize:Fht,resolveAll:gZ.resolveAll};function Fht(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Qj={name:"lineEnding",tokenize:Bht};function Bht(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Qi(e,t,"linePrefix")}}const U4={name:"thematicBreak",tokenize:jht};function jht(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Cn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),di(l)?Qi(e,a,"whitespace")(l):a(l))}}const $l={name:"list",tokenize:Vht,continuation:{tokenize:Hht},exit:Wht},Uht={tokenize:Ght,partial:!0},zht={tokenize:qht,partial:!0};function Vht(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Kq(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(U4,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return Kq(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(DF,r.interrupt?n:c,e.attempt(Uht,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return di(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Hht(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(DF,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Qi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!di(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(zht,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Qi(e,e.attempt($l,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function qht(e,t,n){const r=this;return Qi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Wht(e){e.exit(this.containerState.type)}function Ght(e,t,n){const r=this;return Qi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!di(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Xhe={name:"setextUnderline",tokenize:Kht,resolveTo:Yht};function Yht(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Kht(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),di(l)?Qi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Cn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Xht={tokenize:Qht};function Qht(e){const t=this,n=e.attempt(DF,r,e.attempt(this.parser.constructs.flowInitial,i,Qi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(nht,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Jht={resolveAll:yIe()},Zht=gIe("string"),ept=gIe("text");function gIe(e){return{tokenize:t,resolveAll:yIe(e==="text"?tpt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function yIe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function tpt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function npt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:_,attempt:C(E),check:C(S),interrupt:C(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=Wf(o,N),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=mZ(s,l.events,l),l.events)}function d(N,L){return ipt(h(N),L)}function h(N){return rpt(o,N)}function p(){const{line:N,column:L,offset:O,_index:B,_bufferIndex:q}=r;return{line:N,column:L,offset:O,_index:B,_bufferIndex:q}}function m(N){i[N.line]=N.column,k()}function g(){let N;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<L.length;)y(L.charCodeAt(r._bufferIndex));else y(L)}}function y(N){c=c(N)}function v(N){Cn(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,k()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function b(N,L){const O=L||{};return O.type=N,O.start=p(),l.events.push(["enter",O,l]),a.push(O),O}function _(N){const L=a.pop();return L.end=p(),l.events.push(["exit",L,l]),L}function E(N,L){A(N,L.from)}function S(N,L){L.restore()}function C(N,L){return O;function O(B,q,H){let G,K,J,F;return Array.isArray(B)?W(B):"tokenize"in B?W([B]):j(B);function j(se){return be;function be(he){const Ae=he!==null&&se[he],Ne=he!==null&&se.null,rt=[...Array.isArray(Ae)?Ae:Ae?[Ae]:[],...Array.isArray(Ne)?Ne:Ne?[Ne]:[]];return W(rt)(he)}}function W(se){return G=se,K=0,se.length===0?H:M(se[K])}function M(se){return be;function be(he){return F=R(),J=se,se.partial||(l.currentConstruct=se),se.name&&l.parser.constructs.disable.null.includes(se.name)?Q():se.tokenize.call(L?Object.assign(Object.create(l),L):l,u,V,Q)(he)}}function V(se){return N(J,F),q}function Q(se){return F.restore(),++K<G.length?M(G[K]):H}}}function A(N,L){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&mg(l.events,L,l.events.length-L,N.resolve(l.events.slice(L),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function R(){const N=p(),L=l.previous,O=l.currentConstruct,B=l.events.length,q=Array.from(a);return{restore:H,from:B};function H(){r=N,l.previous=L,l.currentConstruct=O,l.events.length=B,a=q,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function rpt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function ipt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const spt={42:$l,43:$l,45:$l,48:$l,49:$l,50:$l,51:$l,52:$l,53:$l,54:$l,55:$l,56:$l,57:$l,62:lIe},opt={91:aht},apt={[-2]:Xj,[-1]:Xj,32:Xj},upt={35:hht,42:U4,45:[Xhe,U4],60:yht,61:Xhe,95:U4,96:Yhe,126:Yhe},lpt={38:fIe,92:cIe},cpt={[-5]:Qj,[-4]:Qj,[-3]:Qj,33:$ht,38:fIe,42:Xq,60:[Mdt,Tht],91:Mht,92:[fht,cIe],93:gZ,95:Xq,96:Xdt},fpt={null:[Xq,Jht]},dpt={null:[42,95]},hpt={null:[]},ppt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:dpt,contentInitial:opt,disable:hpt,document:spt,flow:upt,flowInitial:apt,insideSpan:fpt,string:lpt,text:cpt},Symbol.toStringTag,{value:"Module"}));function mpt(e){const n=wdt([ppt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Rdt),document:i(Ddt),flow:i(Xht),string:i(Zht),text:i(ept)};return r;function i(s){return o;function o(a){return npt(r,s,a)}}}function gpt(e){for(;!dIe(e););return e}const Qhe=/[\0\t\n\r]/g;function ypt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Qhe.lastIndex=f,l=Qhe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const vpt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function bpt(e){return e.replace(vpt,xpt)}function xpt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return uIe(n.slice(s?2:1),s?16:10)}return pZ(n)||e}const vIe={}.hasOwnProperty;function _pt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),wpt(n)(gpt(mpt(n).document().write(ypt()(e,t,!0))))}function wpt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(st),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(It),blockQuote:s(Ne),characterEscape:R,characterReference:R,codeFenced:s(rt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(rt,o),codeText:s(Re,o),codeTextData:R,data:R,codeFlowValue:R,definition:s(Tt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ze),hardBreakEscape:s(mt),hardBreakTrailing:s(mt),htmlFlow:s(Se,o),htmlFlowData:R,htmlText:s(Se,o),htmlTextData:R,image:s(Fe),label:o,link:s(st),listItem:s(Pt),listItemValue:d,listOrdered:s(yt,f),listUnordered:s(yt),paragraph:s(Je),reference:M,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(It),strong:s(we),thematicBreak:s(Rt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:Ae,autolinkProtocol:he,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:se,characterReference:be,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(q),codeTextData:k,data:k,definition:u(),definitionDestinationString:_,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(L),hardBreakTrailing:u(L),htmlFlow:u(O),htmlFlowData:k,htmlText:u(B),htmlTextData:k,image:u(G),label:J,labelText:K,lineEnding:N,link:u(H),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:V,resourceDestinationString:F,resourceTitleString:j,resource:W,setextHeading:u(A),setextHeadingLineSequence:C,setextHeadingText:S,strong:u(),thematicBreak:u()}};bIe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Ee){let Oe={type:"root",children:[]};const ot={stack:[Oe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},xt=[];let jt=-1;for(;++jt<Ee.length;)if(Ee[jt][1].type==="listOrdered"||Ee[jt][1].type==="listUnordered")if(Ee[jt][0]==="enter")xt.push(jt);else{const Un=xt.pop();jt=i(Ee,Un,jt)}for(jt=-1;++jt<Ee.length;){const Un=t[Ee[jt][0]];vIe.call(Un,Ee[jt][1].type)&&Un[Ee[jt][1].type].call(Object.assign({sliceSerialize:Ee[jt][2].sliceSerialize},ot),Ee[jt][1])}if(ot.tokenStack.length>0){const Un=ot.tokenStack[ot.tokenStack.length-1];(Un[1]||Jhe).call(ot,void 0,Un[0])}for(Oe.position={start:yy(Ee.length>0?Ee[0][1].start:{line:1,column:1,offset:0}),end:yy(Ee.length>0?Ee[Ee.length-2][1].end:{line:1,column:1,offset:0})},jt=-1;++jt<t.transforms.length;)Oe=t.transforms[jt](Oe)||Oe;return Oe}function i(Ee,Oe,ot){let xt=Oe-1,jt=-1,Un=!1,dr,Sr,xi,Sn;for(;++xt<=ot;){const zn=Ee[xt];switch(zn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{zn[0]==="enter"?jt++:jt--,Sn=void 0;break}case"lineEndingBlank":{zn[0]==="enter"&&(dr&&!Sn&&!jt&&!xi&&(xi=xt),Sn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Sn=void 0}if(!jt&&zn[0]==="enter"&&zn[1].type==="listItemPrefix"||jt===-1&&zn[0]==="exit"&&(zn[1].type==="listUnordered"||zn[1].type==="listOrdered")){if(dr){let hr=xt;for(Sr=void 0;hr--;){const gr=Ee[hr];if(gr[1].type==="lineEnding"||gr[1].type==="lineEndingBlank"){if(gr[0]==="exit")continue;Sr&&(Ee[Sr][1].type="lineEndingBlank",Un=!0),gr[1].type="lineEnding",Sr=hr}else if(!(gr[1].type==="linePrefix"||gr[1].type==="blockQuotePrefix"||gr[1].type==="blockQuotePrefixWhitespace"||gr[1].type==="blockQuoteMarker"||gr[1].type==="listItemIndent"))break}xi&&(!Sr||xi<Sr)&&(dr._spread=!0),dr.end=Object.assign({},Sr?Ee[Sr][1].start:zn[1].end),Ee.splice(Sr||xt,0,["exit",dr,zn[2]]),xt++,ot++}if(zn[1].type==="listItemPrefix"){const hr={type:"listItem",_spread:!1,start:Object.assign({},zn[1].start),end:void 0};dr=hr,Ee.splice(xt,0,["enter",hr,zn[2]]),xt++,ot++,xi=void 0,Sn=!0}}}return Ee[Oe][1]._spread=Un,ot}function s(Ee,Oe){return ot;function ot(xt){a.call(this,Ee(xt),xt),Oe&&Oe.call(this,xt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ee,Oe,ot){this.stack[this.stack.length-1].children.push(Ee),this.stack.push(Ee),this.tokenStack.push([Oe,ot]),Ee.position={start:yy(Oe.start),end:void 0}}function u(Ee){return Oe;function Oe(ot){Ee&&Ee.call(this,ot),l.call(this,ot)}}function l(Ee,Oe){const ot=this.stack.pop(),xt=this.tokenStack.pop();if(xt)xt[0].type!==Ee.type&&(Oe?Oe.call(this,Ee,xt[0]):(xt[1]||Jhe).call(this,Ee,xt[0]));else throw new Error("Cannot close `"+Ee.type+"` ("+ok({start:Ee.start,end:Ee.end})+"): its not open");ot.position.end=yy(Ee.end)}function c(){return xdt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Ee){if(this.data.expectingFirstListItemValue){const Oe=this.stack[this.stack.length-2];Oe.start=Number.parseInt(this.sliceSerialize(Ee),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.lang=Ee}function p(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.meta=Ee}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee.replace(/(\r?\n|\r)$/g,"")}function v(Ee){const Oe=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Oe,ot.identifier=b2(this.sliceSerialize(Ee)).toLowerCase()}function b(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Ee}function _(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Ee}function E(Ee){const Oe=this.stack[this.stack.length-1];if(!Oe.depth){const ot=this.sliceSerialize(Ee).length;Oe.depth=ot}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function C(Ee){const Oe=this.stack[this.stack.length-1];Oe.depth=this.sliceSerialize(Ee).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function R(Ee){const ot=this.stack[this.stack.length-1].children;let xt=ot[ot.length-1];(!xt||xt.type!=="text")&&(xt=kt(),xt.position={start:yy(Ee.start),end:void 0},ot.push(xt)),this.stack.push(xt)}function k(Ee){const Oe=this.stack.pop();Oe.value+=this.sliceSerialize(Ee),Oe.position.end=yy(Ee.end)}function N(Ee){const Oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ot=Oe.children[Oe.children.length-1];ot.position.end=yy(Ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Oe.type)&&(R.call(this,Ee),k.call(this,Ee))}function L(){this.data.atHardBreak=!0}function O(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function B(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function q(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function H(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=Oe,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function G(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=Oe,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function K(Ee){const Oe=this.sliceSerialize(Ee),ot=this.stack[this.stack.length-2];ot.label=bpt(Oe),ot.identifier=b2(Oe).toLowerCase()}function J(){const Ee=this.stack[this.stack.length-1],Oe=this.resume(),ot=this.stack[this.stack.length-1];if(this.data.inReference=!0,ot.type==="link"){const xt=Ee.children;ot.children=xt}else ot.alt=Oe}function F(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Ee}function j(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Ee}function W(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function V(Ee){const Oe=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Oe,ot.identifier=b2(this.sliceSerialize(Ee)).toLowerCase(),this.data.referenceType="full"}function Q(Ee){this.data.characterReferenceType=Ee.type}function se(Ee){const Oe=this.sliceSerialize(Ee),ot=this.data.characterReferenceType;let xt;ot?(xt=uIe(Oe,ot==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):xt=pZ(Oe);const jt=this.stack[this.stack.length-1];jt.value+=xt}function be(Ee){const Oe=this.stack.pop();Oe.position.end=yy(Ee.end)}function he(Ee){k.call(this,Ee);const Oe=this.stack[this.stack.length-1];Oe.url=this.sliceSerialize(Ee)}function Ae(Ee){k.call(this,Ee);const Oe=this.stack[this.stack.length-1];Oe.url="mailto:"+this.sliceSerialize(Ee)}function Ne(){return{type:"blockquote",children:[]}}function rt(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function Tt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ze(){return{type:"emphasis",children:[]}}function It(){return{type:"heading",depth:0,children:[]}}function mt(){return{type:"break"}}function Se(){return{type:"html",value:""}}function Fe(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function yt(Ee){return{type:"list",ordered:Ee.type==="listOrdered",start:null,spread:Ee._spread,children:[]}}function Pt(Ee){return{type:"listItem",spread:Ee._spread,checked:null,children:[]}}function Je(){return{type:"paragraph",children:[]}}function we(){return{type:"strong",children:[]}}function kt(){return{type:"text",value:""}}function Rt(){return{type:"thematicBreak"}}}function yy(e){return{line:e.line,column:e.column,offset:e.offset}}function bIe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?bIe(e,r):Ept(e,r)}}function Ept(e,t){let n;for(n in t)if(vIe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Jhe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ok({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ok({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ok({start:t.start,end:t.end})+") is still open")}function Tpt(e){const t=this;t.parser=n;function n(r){return _pt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Spt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Cpt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Apt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Ipt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kpt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Rpt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=LS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Ppt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Dpt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function xIe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Npt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return xIe(e,t);const i={src:LS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Opt(e,t){const n={src:LS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function $pt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Lpt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return xIe(e,t);const i={href:LS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Mpt(e,t){const n={href:LS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Fpt(e,t,n){const r=e.all(t),i=n?Bpt(n):_Ie(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Bpt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=_Ie(n[r])}return t}function _Ie(e){const t=e.spread;return t??e.children.length>1}function jpt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Upt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zpt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Vpt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Hpt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Pm(t.children[1]),u=PF(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function qpt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Wpt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Zhe=9,epe=32;function Gpt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(tpe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(tpe(t.slice(i),i>0,!1)),s.join("")}function tpe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Zhe||s===epe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Zhe||s===epe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Ypt(e,t){const n={type:"text",value:Gpt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Kpt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Xpt={blockquote:Spt,break:Cpt,code:Apt,delete:Ipt,emphasis:kpt,footnoteReference:Rpt,heading:Ppt,html:Dpt,imageReference:Npt,image:Opt,inlineCode:$pt,linkReference:Lpt,link:Mpt,listItem:Fpt,list:jpt,paragraph:Upt,root:zpt,strong:Vpt,table:Hpt,tableCell:Wpt,tableRow:qpt,text:Ypt,thematicBreak:Kpt,toml:QN,yaml:QN,definition:QN,footnoteDefinition:QN};function QN(){}const wIe=-1,NF=0,R$=1,P$=2,yZ=3,vZ=4,bZ=5,xZ=6,EIe=7,TIe=8,npe=typeof self=="object"?self:globalThis,Qpt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case NF:case wIe:return n(o,i);case R$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case P$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case yZ:return n(new Date(o),i);case vZ:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case bZ:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case xZ:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case EIe:{const{name:a,message:u}=o;return n(new npe[a](u),i)}case TIe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new npe[s](o),i)};return r},rpe=e=>Qpt(new Map,e)(0),Qw="",{toString:Jpt}={},{keys:Zpt}=Object,hA=e=>{const t=typeof e;if(t!=="object"||!e)return[NF,t];const n=Jpt.call(e).slice(8,-1);switch(n){case"Array":return[R$,Qw];case"Object":return[P$,Qw];case"Date":return[yZ,Qw];case"RegExp":return[vZ,Qw];case"Map":return[bZ,Qw];case"Set":return[xZ,Qw]}return n.includes("Array")?[R$,n]:n.includes("Error")?[EIe,n]:[P$,n]},JN=([e,t])=>e===NF&&(t==="function"||t==="symbol"),emt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=hA(o);switch(a){case NF:{let c=o;switch(u){case"bigint":a=TIe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([wIe],o)}return i([a,c],o)}case R$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case P$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Zpt(o))(e||!JN(hA(o[d])))&&c.push([s(d),s(o[d])]);return f}case yZ:return i([a,o.toISOString()],o);case vZ:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case bZ:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(JN(hA(d))||JN(hA(h))))&&c.push([s(d),s(h)]);return f}case xZ:{const c=[],f=i([a,c],o);for(const d of o)(e||!JN(hA(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},ipe=(e,{json:t,lossy:n}={})=>{const r=[];return emt(!(t||n),!!t,new Map,r)(e),r},uT=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?rpe(ipe(e,t)):structuredClone(e):(e,t)=>rpe(ipe(e,t));function tmt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function nmt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function rmt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||tmt,r=e.options.footnoteBackLabel||nmt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=LS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...uT(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const SIe=function(e){if(e==null)return amt;if(typeof e=="function")return OF(e);if(typeof e=="object")return Array.isArray(e)?imt(e):smt(e);if(typeof e=="string")return omt(e);throw new Error("Expected function, string, or object as test")};function imt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=SIe(e[n]);return OF(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function smt(e){const t=e;return OF(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function omt(e){return OF(t);function t(n){return n&&n.type===e}}function OF(e){return t;function t(n,r,i){return!!(umt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function amt(){return!0}function umt(e){return e!==null&&typeof e=="object"&&"type"in e}const CIe=[],lmt=!0,spe=!1,cmt="skip";function fmt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=SIe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=CIe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=dmt(n(u,c)),h[0]===spe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==cmt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===spe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function dmt(e){return Array.isArray(e)?e:typeof e=="number"?[lmt,e]:e==null?CIe:[e]}function _Z(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),fmt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Qq={}.hasOwnProperty,hmt={};function pmt(e,t){const n=t||hmt,r=new Map,i=new Map,s=new Map,o={...Xpt,...n.handlers},a={all:l,applyData:gmt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:mmt,wrap:vmt};return _Z(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(Qq.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=uT(g);return y.children=a.all(c),y}return uT(c)}return(a.options.unknownHandler||ymt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=ope(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=ope(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function mmt(e,t){e.position&&(t.position=Xft(e))}function gmt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,uT(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function ymt(e,t){const n=t.data||{},r="value"in t&&!(Qq.call(n,"hProperties")||Qq.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function vmt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ope(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function ape(e,t){const n=pmt(e,t),r=n.one(e,void 0),i=rmt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function bmt(e,t){return e&&"run"in e?async function(n,r){const i=ape(n,{file:r,...t});await e.run(i,r)}:function(n,r){return ape(n,{file:r,...t||e})}}function upe(e){if(e)throw e}var z4=Object.prototype.hasOwnProperty,AIe=Object.prototype.toString,lpe=Object.defineProperty,cpe=Object.getOwnPropertyDescriptor,fpe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):AIe.call(t)==="[object Array]"},dpe=function(t){if(!t||AIe.call(t)!=="[object Object]")return!1;var n=z4.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&z4.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||z4.call(t,i)},hpe=function(t,n){lpe&&n.name==="__proto__"?lpe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},ppe=function(t,n){if(n==="__proto__")if(z4.call(t,n)){if(cpe)return cpe(t,n).value}else return;return t[n]},xmt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=ppe(a,n),i=ppe(t,n),a!==i&&(c&&i&&(dpe(i)||(s=fpe(i)))?(s?(s=!1,o=r&&fpe(r)?r:[]):o=r&&dpe(r)?r:{},hpe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&hpe(a,{name:n,newValue:i}));return a};const Jj=zh(xmt);function Jq(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function _mt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?wmt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function wmt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const yp={basename:Emt,dirname:Tmt,extname:Smt,join:Cmt,sep:"/"};function Emt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');aP(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Tmt(e){if(aP(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Smt(e){aP(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Cmt(...e){let t=-1,n;for(;++t<e.length;)aP(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Amt(n)}function Amt(e){aP(e);const t=e.codePointAt(0)===47;let n=Imt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Imt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function aP(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const kmt={cwd:Rmt};function Rmt(){return"/"}function Zq(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Pmt(e){if(typeof e=="string")e=new URL(e);else if(!Zq(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Dmt(e)}function Dmt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Zj=["history","path","basename","stem","extname","dirname"];class IIe{constructor(t){let n;t?Zq(t)?n={path:t}:typeof t=="string"||Nmt(t)?n={value:t}:n=t:n={},this.cwd=kmt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Zj.length;){const s=Zj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Zj.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?yp.basename(this.path):void 0}set basename(t){tU(t,"basename"),eU(t,"basename"),this.path=yp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?yp.dirname(this.path):void 0}set dirname(t){mpe(this.basename,"dirname"),this.path=yp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?yp.extname(this.path):void 0}set extname(t){if(eU(t,"extname"),mpe(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=yp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Zq(t)&&(t=Pmt(t)),tU(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?yp.basename(this.path,this.extname):void 0}set stem(t){tU(t,"stem"),eU(t,"stem"),this.path=yp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new $u(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function eU(e,t){if(e&&e.includes(yp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+yp.sep+"`")}function tU(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function mpe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Nmt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Omt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},$mt={}.hasOwnProperty;class wZ extends Omt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=_mt()}copy(){const t=new wZ;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Jj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(iU("data",this.frozen),this.namespace[t]=n,this):$mt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(iU("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=ZN(t),r=this.parser||this.Parser;return nU("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),nU("process",this.parser||this.Parser),rU("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=ZN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Fmt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),nU("processSync",this.parser||this.Parser),rU("processSync",this.compiler||this.Compiler),this.process(t,i),ype("processSync","process",n),r;function i(s,o){n=!0,upe(s),r=o}}run(t,n,r){gpe(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=ZN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),ype("runSync","run",r),i;function s(o,a){upe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=ZN(n),i=this.compiler||this.Compiler;return rU("stringify",i),gpe(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(iU("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Jj(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];Jq(m)&&Jq(h)&&(h=Jj(!0,m,h)),r[d]=[l,h,...p]}}}}const Lmt=new wZ().freeze();function nU(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function rU(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function iU(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function gpe(e){if(!Jq(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ype(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ZN(e){return Mmt(e)?e:new IIe(e)}function Mmt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Fmt(e){return typeof e=="string"||Bmt(e)}function Bmt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const jmt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",vpe=[],bpe={allowDangerousHtml:!0},Umt=/^(https?|ircs?|mailto|xmpp)$/i,zmt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Vmt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||vpe,u=e.remarkPlugins||vpe,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...bpe}:bpe,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||Hmt,h=Lmt().use(Tpt).use(u).use(bmt,l).use(a),p=new IIe;typeof r=="string"&&(p.value=r);for(const v of zmt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+jmt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),_Z(g,y),ndt(g,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function y(v,b,_){if(v.type==="raw"&&_&&typeof b=="number")return c?_.children.splice(b,1):_.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in Kj)if(Object.hasOwn(Kj,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],C=Kj[E];(C===null||C.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,_)),E&&_&&typeof b=="number")return f&&v.children?_.children.splice(b,1,...v.children):_.children.splice(b,1),b}}}function Hmt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Umt.test(e.slice(0,t))?e:""}const xpe=/[#.]/g;function qmt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){xpe.lastIndex=i;const a=xpe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Wmt=new Set(["button","menu","reset","submit"]),eW={}.hasOwnProperty;function kIe(e,t,n){const r=n&&Xmt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=qmt(s,t),l.tagName=l.tagName.toLowerCase(),r&&eW.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Gmt(o,l.tagName)){let c;for(c in o)eW.call(o,c)&&Ymt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)tW(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Gmt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Wmt.has(e.type.toLowerCase()):!("value"in e)}function Ymt(e,t,n,r){const i=RF(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Nhe(r):i.commaSeparated?o=Ihe(r):i.commaOrSpaceSeparated?o=Nhe(Ihe(r).join(" ")):o=_pe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Kmt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=_pe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function tW(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)tW(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?tW(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function _pe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||_R(n)===_R(t)))return!0}return n}function Kmt(e){const t=[];let n;for(n in e)eW.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Xmt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Qmt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Jmt=kIe(oP,"div"),Zmt=kIe($v,"g",Qmt),sU=/\r?\n|\r/g;function e0t(e){const t=String(e),n=[];for(sU.lastIndex=0;sU.test(t);)n.push(sU.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const mx={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},RIe={}.hasOwnProperty,t0t=Object.prototype;function n0t(e,t){const n=t;return EZ({file:n.file||void 0,location:!1,schema:n.space==="svg"?$v:oP,verbose:n.verbose||!1},e)}function EZ(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},V4(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:PIe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=e0t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},V4(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},V4(e,r,n),n}default:return n=r0t(e,t),n}}function PIe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=EZ(e,t[n]);r.push(i)}return r}function r0t(e,t){const n=e.schema;e.schema=t.namespaceURI===mx.svg?$v:oP;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;RIe.call(t0t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Zmt:Jmt)(t.tagName,i,PIe(e,t.childNodes));if(V4(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&GE(u.startTag),c=u&&u.endTag&&GE(u.endTag),f=EZ(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function V4(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=i0t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function i0t(e,t,n){const r=GE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)RIe.call(n.attrs,o)&&(s[RF(e.schema,o).property]=GE(n.attrs[o]));n.startTag;const a=GE(n.startTag),u=n.endTag?GE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function GE(e){const t=wpe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=wpe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function wpe(e){return e.line&&e.column?e:void 0}const Epe={}.hasOwnProperty;function DIe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Epe.call(i,e)){const u=String(i[e]);o=Epe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const s0t={}.hasOwnProperty,NIe=DIe("type",{handlers:{root:a0t,element:d0t,text:c0t,comment:f0t,doctype:l0t}});function o0t(e,t){const r=t.space;return NIe(e,r==="svg"?$v:oP)}function a0t(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=TZ(e.children,n,t),MS(e,n),n}function u0t(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=TZ(e.children,n,t),MS(e,n),n}function l0t(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return MS(e,t),t}function c0t(e){const t={nodeName:"#text",value:e.value,parentNode:null};return MS(e,t),t}function f0t(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return MS(e,t),t}function d0t(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=$v);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&s0t.call(e.properties,s)){const u=h0t(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:mx[o],childNodes:[],parentNode:null};return a.childNodes=TZ(e.children,a,r),MS(e,a),e.tagName==="template"&&e.content&&(a.content=u0t(e.content,r)),a}function h0t(e,t,n){const r=RF(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?qAe(n):eIe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=mx[r.space]}return i}function TZ(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=NIe(e[r],n);s.parentNode=t,i.push(s)}return i}function MS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const p0t=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],m0t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ys="";var ie;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(ie=ie||(ie={}));const Dl={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function OIe(e){return e>=55296&&e<=57343}function g0t(e){return e>=56320&&e<=57343}function y0t(e,t){return(e-55296)*1024+9216+t}function $Ie(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function LIe(e){return e>=64976&&e<=65007||m0t.has(e)}var Ue;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ue=Ue||(Ue={}));const v0t=65536;class b0t{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=v0t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(g0t(n))return this.pos++,this._addGap(),y0t(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ie.EOF;return this._err(Ue.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;const r=this.html.charCodeAt(n);return r===ie.CARRIAGE_RETURN?ie.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;let t=this.html.charCodeAt(this.pos);return t===ie.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ie.LINE_FEED):t===ie.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,OIe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ie.LINE_FEED||t===ie.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){$Ie(t)?this._err(Ue.controlCharacterInInputStream):LIe(t)&&this._err(Ue.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var or;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(or=or||(or={}));function MIe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Ey=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),x0t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var oU;const _0t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),w0t=(oU=String.fromCodePoint)!==null&&oU!==void 0?oU:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function E0t(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=_0t.get(e))!==null&&t!==void 0?t:e}var ua;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ua||(ua={}));const T0t=32;var jp;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(jp||(jp={}));function nW(e){return e>=ua.ZERO&&e<=ua.NINE}function S0t(e){return e>=ua.UPPER_A&&e<=ua.UPPER_F||e>=ua.LOWER_A&&e<=ua.LOWER_F}function C0t(e){return e>=ua.UPPER_A&&e<=ua.UPPER_Z||e>=ua.LOWER_A&&e<=ua.LOWER_Z||nW(e)}function A0t(e){return e===ua.EQUALS||C0t(e)}var ta;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ta||(ta={}));var Jb;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Jb||(Jb={}));class I0t{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ta.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Jb.Strict}startEntity(t){this.decodeMode=t,this.state=ta.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ta.EntityStart:return t.charCodeAt(n)===ua.NUM?(this.state=ta.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ta.NamedEntity,this.stateNamedEntity(t,n));case ta.NumericStart:return this.stateNumericStart(t,n);case ta.NumericDecimal:return this.stateNumericDecimal(t,n);case ta.NumericHex:return this.stateNumericHex(t,n);case ta.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|T0t)===ua.LOWER_X?(this.state=ta.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ta.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(nW(i)||S0t(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(nW(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ua.SEMI)this.consumed+=1;else if(this.decodeMode===Jb.Strict)return 0;return this.emitCodePoint(E0t(this.result),this.consumed),this.errors&&(t!==ua.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&jp.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=BIe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Jb.Attribute&&(s===0||A0t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&jp.VALUE_LENGTH)>>14,s!==0){if(o===ua.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Jb.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&jp.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~jp.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ta.NamedEntity:return this.result!==0&&(this.decodeMode!==Jb.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ta.NumericDecimal:return this.emitNumericEntity(0,2);case ta.NumericHex:return this.emitNumericEntity(0,3);case ta.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ta.EntityStart:return 0}}}function FIe(e){let t="";const n=new I0t(e,r=>t+=w0t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function BIe(e,t,n,r){const i=(t&jp.BRANCH_LENGTH)>>7,s=t&jp.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}FIe(Ey);FIe(x0t);var Xe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Xe=Xe||(Xe={}));var _1;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(_1=_1||(_1={}));var Uc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Uc=Uc||(Uc={}));var De;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(De=De||(De={}));var $;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})($=$||($={}));const k0t=new Map([[De.A,$.A],[De.ADDRESS,$.ADDRESS],[De.ANNOTATION_XML,$.ANNOTATION_XML],[De.APPLET,$.APPLET],[De.AREA,$.AREA],[De.ARTICLE,$.ARTICLE],[De.ASIDE,$.ASIDE],[De.B,$.B],[De.BASE,$.BASE],[De.BASEFONT,$.BASEFONT],[De.BGSOUND,$.BGSOUND],[De.BIG,$.BIG],[De.BLOCKQUOTE,$.BLOCKQUOTE],[De.BODY,$.BODY],[De.BR,$.BR],[De.BUTTON,$.BUTTON],[De.CAPTION,$.CAPTION],[De.CENTER,$.CENTER],[De.CODE,$.CODE],[De.COL,$.COL],[De.COLGROUP,$.COLGROUP],[De.DD,$.DD],[De.DESC,$.DESC],[De.DETAILS,$.DETAILS],[De.DIALOG,$.DIALOG],[De.DIR,$.DIR],[De.DIV,$.DIV],[De.DL,$.DL],[De.DT,$.DT],[De.EM,$.EM],[De.EMBED,$.EMBED],[De.FIELDSET,$.FIELDSET],[De.FIGCAPTION,$.FIGCAPTION],[De.FIGURE,$.FIGURE],[De.FONT,$.FONT],[De.FOOTER,$.FOOTER],[De.FOREIGN_OBJECT,$.FOREIGN_OBJECT],[De.FORM,$.FORM],[De.FRAME,$.FRAME],[De.FRAMESET,$.FRAMESET],[De.H1,$.H1],[De.H2,$.H2],[De.H3,$.H3],[De.H4,$.H4],[De.H5,$.H5],[De.H6,$.H6],[De.HEAD,$.HEAD],[De.HEADER,$.HEADER],[De.HGROUP,$.HGROUP],[De.HR,$.HR],[De.HTML,$.HTML],[De.I,$.I],[De.IMG,$.IMG],[De.IMAGE,$.IMAGE],[De.INPUT,$.INPUT],[De.IFRAME,$.IFRAME],[De.KEYGEN,$.KEYGEN],[De.LABEL,$.LABEL],[De.LI,$.LI],[De.LINK,$.LINK],[De.LISTING,$.LISTING],[De.MAIN,$.MAIN],[De.MALIGNMARK,$.MALIGNMARK],[De.MARQUEE,$.MARQUEE],[De.MATH,$.MATH],[De.MENU,$.MENU],[De.META,$.META],[De.MGLYPH,$.MGLYPH],[De.MI,$.MI],[De.MO,$.MO],[De.MN,$.MN],[De.MS,$.MS],[De.MTEXT,$.MTEXT],[De.NAV,$.NAV],[De.NOBR,$.NOBR],[De.NOFRAMES,$.NOFRAMES],[De.NOEMBED,$.NOEMBED],[De.NOSCRIPT,$.NOSCRIPT],[De.OBJECT,$.OBJECT],[De.OL,$.OL],[De.OPTGROUP,$.OPTGROUP],[De.OPTION,$.OPTION],[De.P,$.P],[De.PARAM,$.PARAM],[De.PLAINTEXT,$.PLAINTEXT],[De.PRE,$.PRE],[De.RB,$.RB],[De.RP,$.RP],[De.RT,$.RT],[De.RTC,$.RTC],[De.RUBY,$.RUBY],[De.S,$.S],[De.SCRIPT,$.SCRIPT],[De.SECTION,$.SECTION],[De.SELECT,$.SELECT],[De.SOURCE,$.SOURCE],[De.SMALL,$.SMALL],[De.SPAN,$.SPAN],[De.STRIKE,$.STRIKE],[De.STRONG,$.STRONG],[De.STYLE,$.STYLE],[De.SUB,$.SUB],[De.SUMMARY,$.SUMMARY],[De.SUP,$.SUP],[De.TABLE,$.TABLE],[De.TBODY,$.TBODY],[De.TEMPLATE,$.TEMPLATE],[De.TEXTAREA,$.TEXTAREA],[De.TFOOT,$.TFOOT],[De.TD,$.TD],[De.TH,$.TH],[De.THEAD,$.THEAD],[De.TITLE,$.TITLE],[De.TR,$.TR],[De.TRACK,$.TRACK],[De.TT,$.TT],[De.U,$.U],[De.UL,$.UL],[De.SVG,$.SVG],[De.VAR,$.VAR],[De.WBR,$.WBR],[De.XMP,$.XMP]]);function FS(e){var t;return(t=k0t.get(e))!==null&&t!==void 0?t:$.UNKNOWN}const ht=$,R0t={[Xe.HTML]:new Set([ht.ADDRESS,ht.APPLET,ht.AREA,ht.ARTICLE,ht.ASIDE,ht.BASE,ht.BASEFONT,ht.BGSOUND,ht.BLOCKQUOTE,ht.BODY,ht.BR,ht.BUTTON,ht.CAPTION,ht.CENTER,ht.COL,ht.COLGROUP,ht.DD,ht.DETAILS,ht.DIR,ht.DIV,ht.DL,ht.DT,ht.EMBED,ht.FIELDSET,ht.FIGCAPTION,ht.FIGURE,ht.FOOTER,ht.FORM,ht.FRAME,ht.FRAMESET,ht.H1,ht.H2,ht.H3,ht.H4,ht.H5,ht.H6,ht.HEAD,ht.HEADER,ht.HGROUP,ht.HR,ht.HTML,ht.IFRAME,ht.IMG,ht.INPUT,ht.LI,ht.LINK,ht.LISTING,ht.MAIN,ht.MARQUEE,ht.MENU,ht.META,ht.NAV,ht.NOEMBED,ht.NOFRAMES,ht.NOSCRIPT,ht.OBJECT,ht.OL,ht.P,ht.PARAM,ht.PLAINTEXT,ht.PRE,ht.SCRIPT,ht.SECTION,ht.SELECT,ht.SOURCE,ht.STYLE,ht.SUMMARY,ht.TABLE,ht.TBODY,ht.TD,ht.TEMPLATE,ht.TEXTAREA,ht.TFOOT,ht.TH,ht.THEAD,ht.TITLE,ht.TR,ht.TRACK,ht.UL,ht.WBR,ht.XMP]),[Xe.MATHML]:new Set([ht.MI,ht.MO,ht.MN,ht.MS,ht.MTEXT,ht.ANNOTATION_XML]),[Xe.SVG]:new Set([ht.TITLE,ht.FOREIGN_OBJECT,ht.DESC]),[Xe.XLINK]:new Set,[Xe.XML]:new Set,[Xe.XMLNS]:new Set};function jIe(e){return e===ht.H1||e===ht.H2||e===ht.H3||e===ht.H4||e===ht.H5||e===ht.H6}De.STYLE,De.SCRIPT,De.XMP,De.IFRAME,De.NOEMBED,De.NOFRAMES,De.PLAINTEXT;const P0t=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ae;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(ae||(ae={}));const so={DATA:ae.DATA,RCDATA:ae.RCDATA,RAWTEXT:ae.RAWTEXT,SCRIPT_DATA:ae.SCRIPT_DATA,PLAINTEXT:ae.PLAINTEXT,CDATA_SECTION:ae.CDATA_SECTION};function uk(e){return e>=ie.DIGIT_0&&e<=ie.DIGIT_9}function aI(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_Z}function D0t(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_Z}function Ty(e){return D0t(e)||aI(e)}function rW(e){return Ty(e)||uk(e)}function UIe(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_F}function zIe(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_F}function N0t(e){return uk(e)||UIe(e)||zIe(e)}function eO(e){return e+32}function VIe(e){return e===ie.SPACE||e===ie.LINE_FEED||e===ie.TABULATION||e===ie.FORM_FEED}function O0t(e){return e===ie.EQUALS_SIGN||rW(e)}function Tpe(e){return VIe(e)||e===ie.SOLIDUS||e===ie.GREATER_THAN_SIGN}class $0t{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ae.DATA,this.returnState=ae.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new b0t(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:or.START_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:or.END_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:or.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:or.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(MIe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ue.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=FS(t.tagName),t.type===or.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ue.endTagWithAttributes),t.selfClosing&&this._err(Ue.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case or.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case or.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case or.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:or.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=VIe(t)?or.WHITESPACE_CHARACTER:t===ie.NULL?or.NULL_CHARACTER:or.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(or.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Ey[0];s>=0&&(s=BIe(Ey,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Ey[s];const a=o&jp.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==ie.SEMICOLON&&this._isCharacterReferenceInAttribute()&&O0t(this.preprocessor.peek(1))?(n=[ie.AMPERSAND],s+=u):(n=u===0?[Ey[s]&~jp.VALUE_LENGTH]:u===1?[Ey[++s]]:[Ey[++s],Ey[++s]],r=0,i=t!==ie.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ue.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ae.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ae.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case ae.DATA:{this._stateData(t);break}case ae.RCDATA:{this._stateRcdata(t);break}case ae.RAWTEXT:{this._stateRawtext(t);break}case ae.SCRIPT_DATA:{this._stateScriptData(t);break}case ae.PLAINTEXT:{this._statePlaintext(t);break}case ae.TAG_OPEN:{this._stateTagOpen(t);break}case ae.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case ae.TAG_NAME:{this._stateTagName(t);break}case ae.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case ae.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case ae.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case ae.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case ae.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case ae.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case ae.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case ae.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case ae.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case ae.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case ae.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case ae.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case ae.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case ae.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case ae.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case ae.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case ae.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case ae.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case ae.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case ae.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case ae.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case ae.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case ae.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case ae.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case ae.BOGUS_COMMENT:{this._stateBogusComment(t);break}case ae.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case ae.COMMENT_START:{this._stateCommentStart(t);break}case ae.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case ae.COMMENT:{this._stateComment(t);break}case ae.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case ae.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case ae.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case ae.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case ae.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case ae.COMMENT_END:{this._stateCommentEnd(t);break}case ae.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case ae.DOCTYPE:{this._stateDoctype(t);break}case ae.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case ae.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case ae.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case ae.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case ae.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case ae.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case ae.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case ae.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case ae.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case ae.CDATA_SECTION:{this._stateCdataSection(t);break}case ae.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case ae.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case ae.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case ae.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case ae.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case ae.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case ae.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case ae.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case ae.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case ae.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ae.TAG_OPEN;break}case ie.AMPERSAND:{this.returnState=ae.DATA,this.state=ae.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitCodePoint(t);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ie.AMPERSAND:{this.returnState=ae.RCDATA,this.state=ae.CHARACTER_REFERENCE;break}case ie.LESS_THAN_SIGN:{this.state=ae.RCDATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(ys);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ae.RAWTEXT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(ys);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(ys);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(ys);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Ty(t))this._createStartTagToken(),this.state=ae.TAG_NAME,this._stateTagName(t);else switch(t){case ie.EXCLAMATION_MARK:{this.state=ae.MARKUP_DECLARATION_OPEN;break}case ie.SOLIDUS:{this.state=ae.END_TAG_OPEN;break}case ie.QUESTION_MARK:{this._err(Ue.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(t);break}case ie.EOF:{this._err(Ue.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ue.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ae.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Ty(t))this._createEndTagToken(),this.state=ae.TAG_NAME,this._stateTagName(t);else switch(t){case ie.GREATER_THAN_SIGN:{this._err(Ue.missingEndTagName),this.state=ae.DATA;break}case ie.EOF:{this._err(Ue.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ue.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this.state=ae.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.tagName+=ys;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(aI(t)?eO(t):t)}}_stateRcdataLessThanSign(t){t===ie.SOLIDUS?this.state=ae.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ae.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Ty(t)?(this.state=ae.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=ae.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ae.BEFORE_ATTRIBUTE_NAME,!1;case ie.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ae.SELF_CLOSING_START_TAG,!1;case ie.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ae.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ae.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ie.SOLIDUS?this.state=ae.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ae.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Ty(t)?(this.state=ae.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=ae.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ae.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ie.SOLIDUS:{this.state=ae.SCRIPT_DATA_END_TAG_OPEN;break}case ie.EXCLAMATION_MARK:{this.state=ae.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ae.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Ty(t)?(this.state=ae.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=ae.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ae.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ie.HYPHEN_MINUS?(this.state=ae.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ae.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ie.HYPHEN_MINUS?(this.state=ae.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ae.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(ys);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_ESCAPED,this._emitChars(ys);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.GREATER_THAN_SIGN:{this.state=ae.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_ESCAPED,this._emitChars(ys);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ie.SOLIDUS?this.state=ae.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ty(t)?(this._emitChars("<"),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Ty(t)?(this.state=ae.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Dl.SCRIPT,!1)&&Tpe(this.preprocessor.peek(Dl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Dl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(ys);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ys);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.GREATER_THAN_SIGN:{this.state=ae.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ys);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ie.SOLIDUS?(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Dl.SCRIPT,!1)&&Tpe(this.preprocessor.peek(Dl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Dl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ae.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this.state=ae.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._err(Ue.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ae.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ae.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this._leaveAttrName(),this.state=ae.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._leaveAttrName(),this.state=ae.BEFORE_ATTRIBUTE_VALUE;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:{this._err(Ue.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.name+=ys;break}default:this.currentAttr.name+=String.fromCodePoint(aI(t)?eO(t):t)}}_stateAfterAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:{this.state=ae.SELF_CLOSING_START_TAG;break}case ie.EQUALS_SIGN:{this.state=ae.BEFORE_ATTRIBUTE_VALUE;break}case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ae.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{this.state=ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this.state=ae.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingAttributeValue),this.state=ae.DATA,this.emitCurrentTagToken();break}default:this.state=ae.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ie.QUOTATION_MARK:{this.state=ae.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ae.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=ys;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ie.APOSTROPHE:{this.state=ae.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=ae.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ae.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=ys;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case ie.AMPERSAND:{this.returnState=ae.ATTRIBUTE_VALUE_UNQUOTED,this.state=ae.CHARACTER_REFERENCE;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=ys;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:case ie.EQUALS_SIGN:case ie.GRAVE_ACCENT:{this._err(Ue.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this._leaveAttrValue(),this.state=ae.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._err(Ue.missingWhitespaceBetweenAttributes),this.state=ae.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ie.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._err(Ue.unexpectedSolidusInTag),this.state=ae.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.data+=ys;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Dl.DASH_DASH,!0)?(this._createCommentToken(Dl.DASH_DASH.length+1),this.state=ae.COMMENT_START):this._consumeSequenceIfMatch(Dl.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Dl.DOCTYPE.length+1),this.state=ae.DOCTYPE):this._consumeSequenceIfMatch(Dl.CDATA_START,!0)?this.inForeignNode?this.state=ae.CDATA_SECTION:(this._err(Ue.cdataInHtmlContent),this._createCommentToken(Dl.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ae.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ue.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.COMMENT_START_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptClosingOfEmptyComment),this.state=ae.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=ae.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ae.COMMENT_END;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptClosingOfEmptyComment),this.state=ae.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ae.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ae.COMMENT_END_DASH;break}case ie.LESS_THAN_SIGN:{n.data+="<",this.state=ae.COMMENT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.data+=ys;break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ie.EXCLAMATION_MARK:{n.data+="!",this.state=ae.COMMENT_LESS_THAN_SIGN_BANG;break}case ie.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=ae.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ie.HYPHEN_MINUS?this.state=ae.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ae.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ie.HYPHEN_MINUS?this.state=ae.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ae.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ie.GREATER_THAN_SIGN&&t!==ie.EOF&&this._err(Ue.nestedComment),this.state=ae.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ae.COMMENT_END;break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ae.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentComment(n);break}case ie.EXCLAMATION_MARK:{this.state=ae.COMMENT_END_BANG;break}case ie.HYPHEN_MINUS:{n.data+="-";break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=ae.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{n.data+="--!",this.state=ae.COMMENT_END_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.incorrectlyClosedComment),this.state=ae.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=ae.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=ae.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ie.EOF:{this._err(Ue.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingWhitespaceBeforeDoctypeName),this.state=ae.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(aI(t))this._createDoctypeToken(String.fromCharCode(eO(t))),this.state=ae.DOCTYPE_NAME;else switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._createDoctypeToken(ys),this.state=ae.DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=ae.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.AFTER_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.name+=ys;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(aI(t)?eO(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Dl.PUBLIC,!1)?this.state=ae.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Dl.SYSTEM,!1)?this.state=ae.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ue.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.publicId+=ys;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.publicId+=ys;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.QUOTATION_MARK:{n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.systemId+=ys;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.systemId+=ys;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter);break}case ie.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ie.RIGHT_SQUARE_BRACKET:{this.state=ae.CDATA_SECTION_BRACKET;break}case ie.EOF:{this._err(Ue.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ie.RIGHT_SQUARE_BRACKET?this.state=ae.CDATA_SECTION_END:(this._emitChars("]"),this.state=ae.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ie.GREATER_THAN_SIGN:{this.state=ae.DATA;break}case ie.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ae.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===ie.NUMBER_SIGN?this.state=ae.NUMERIC_CHARACTER_REFERENCE:rW(t)?(this.state=ae.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this.state=ae.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){rW(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ie.SEMICOLON&&this._err(Ue.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===ie.LATIN_SMALL_X||t===ie.LATIN_CAPITAL_X?this.state=ae.HEXADEMICAL_CHARACTER_REFERENCE_START:uk(t)?(this.state=ae.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ue.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){N0t(t)?(this.state=ae.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ue.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){UIe(t)?this.charRefCode=this.charRefCode*16+t-55:zIe(t)?this.charRefCode=this.charRefCode*16+t-87:uk(t)?this.charRefCode=this.charRefCode*16+t-48:t===ie.SEMICOLON?this.state=ae.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ue.missingSemicolonAfterCharacterReference),this.state=ae.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){uk(t)?this.charRefCode=this.charRefCode*10+t-48:t===ie.SEMICOLON?this.state=ae.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ue.missingSemicolonAfterCharacterReference),this.state=ae.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===ie.NULL)this._err(Ue.nullCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ue.characterReferenceOutsideUnicodeRange),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(OIe(this.charRefCode))this._err(Ue.surrogateCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(LIe(this.charRefCode))this._err(Ue.noncharacterCharacterReference);else if($Ie(this.charRefCode)||this.charRefCode===ie.CARRIAGE_RETURN){this._err(Ue.controlCharacterReference);const n=P0t.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const HIe=new Set([$.DD,$.DT,$.LI,$.OPTGROUP,$.OPTION,$.P,$.RB,$.RP,$.RT,$.RTC]),Spe=new Set([...HIe,$.CAPTION,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]),tO=new Map([[$.APPLET,Xe.HTML],[$.CAPTION,Xe.HTML],[$.HTML,Xe.HTML],[$.MARQUEE,Xe.HTML],[$.OBJECT,Xe.HTML],[$.TABLE,Xe.HTML],[$.TD,Xe.HTML],[$.TEMPLATE,Xe.HTML],[$.TH,Xe.HTML],[$.ANNOTATION_XML,Xe.MATHML],[$.MI,Xe.MATHML],[$.MN,Xe.MATHML],[$.MO,Xe.MATHML],[$.MS,Xe.MATHML],[$.MTEXT,Xe.MATHML],[$.DESC,Xe.SVG],[$.FOREIGN_OBJECT,Xe.SVG],[$.TITLE,Xe.SVG]]),L0t=[$.H1,$.H2,$.H3,$.H4,$.H5,$.H6],M0t=[$.TR,$.TEMPLATE,$.HTML],F0t=[$.TBODY,$.TFOOT,$.THEAD,$.TEMPLATE,$.HTML],B0t=[$.TABLE,$.TEMPLATE,$.HTML],j0t=[$.TD,$.TH];class U0t{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=$.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===$.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Xe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Xe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(L0t,Xe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(j0t,Xe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(B0t,Xe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(F0t,Xe.HTML)}clearBackToTableRowContext(){this.clearBackTo(M0t,Xe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===$.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===$.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if(tO.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(jIe(n)&&r===Xe.HTML)return!0;if(tO.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if((r===$.UL||r===$.OL)&&i===Xe.HTML||tO.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if(r===$.BUTTON&&i===Xe.HTML||tO.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Xe.HTML){if(r===t)return!0;if(r===$.TABLE||r===$.TEMPLATE||r===$.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Xe.HTML){if(n===$.TBODY||n===$.THEAD||n===$.TFOOT)return!0;if(n===$.TABLE||n===$.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Xe.HTML){if(r===t)return!0;if(r!==$.OPTION&&r!==$.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;HIe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Spe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Spe.has(this.currentTagId);)this.pop()}}const aU=3;var rh;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(rh=rh||(rh={}));const Cpe={type:rh.Marker};class z0t{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===rh.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<aU)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<aU)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=aU&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Cpe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:rh.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:rh.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Cpe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===rh.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===rh.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===rh.Element&&n.element===t)}}function Ape(e){return{nodeName:"#text",value:e,parentNode:null}}const EE={createDocument(){return{nodeName:"#document",mode:Uc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};EE.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(EE.isTextNode(n)){n.value+=t;return}}EE.appendChild(e,Ape(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&EE.isTextNode(r)?r.value+=t:EE.insertBefore(e,Ape(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},qIe="html",V0t="about:legacy-compat",H0t="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",WIe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],q0t=[...WIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],W0t=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),GIe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],G0t=[...GIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Ipe(e,t){return t.some(n=>e.startsWith(n))}function Y0t(e){return e.name===qIe&&e.publicId===null&&(e.systemId===null||e.systemId===V0t)}function K0t(e){if(e.name!==qIe)return Uc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===H0t)return Uc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),W0t.has(n))return Uc.QUIRKS;let r=t===null?q0t:WIe;if(Ipe(n,r))return Uc.QUIRKS;if(r=t===null?GIe:G0t,Ipe(n,r))return Uc.LIMITED_QUIRKS}return Uc.NO_QUIRKS}const kpe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},X0t="definitionurl",Q0t="definitionURL",J0t=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Z0t=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Xe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Xe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Xe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Xe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Xe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Xe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Xe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Xe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Xe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Xe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Xe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Xe.XMLNS}]]),egt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),tgt=new Set([$.B,$.BIG,$.BLOCKQUOTE,$.BODY,$.BR,$.CENTER,$.CODE,$.DD,$.DIV,$.DL,$.DT,$.EM,$.EMBED,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HR,$.I,$.IMG,$.LI,$.LISTING,$.MENU,$.META,$.NOBR,$.OL,$.P,$.PRE,$.RUBY,$.S,$.SMALL,$.SPAN,$.STRONG,$.STRIKE,$.SUB,$.SUP,$.TABLE,$.TT,$.U,$.UL,$.VAR]);function ngt(e){const t=e.tagID;return t===$.FONT&&e.attrs.some(({name:r})=>r===_1.COLOR||r===_1.SIZE||r===_1.FACE)||tgt.has(t)}function YIe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===X0t){e.attrs[t].name=Q0t;break}}function KIe(e){for(let t=0;t<e.attrs.length;t++){const n=J0t.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function SZ(e){for(let t=0;t<e.attrs.length;t++){const n=Z0t.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function rgt(e){const t=egt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=FS(e.tagName))}function igt(e,t){return t===Xe.MATHML&&(e===$.MI||e===$.MO||e===$.MN||e===$.MS||e===$.MTEXT)}function sgt(e,t,n){if(t===Xe.MATHML&&e===$.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===_1.ENCODING){const i=n[r].value.toLowerCase();return i===kpe.TEXT_HTML||i===kpe.APPLICATION_XML}}return t===Xe.SVG&&(e===$.FOREIGN_OBJECT||e===$.DESC||e===$.TITLE)}function ogt(e,t,n,r){return(!r||r===Xe.HTML)&&sgt(e,t,n)||(!r||r===Xe.MATHML)&&igt(e,t)}const agt="hidden",ugt=8,lgt=3;var de;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(de||(de={}));const cgt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},XIe=new Set([$.TABLE,$.TBODY,$.TFOOT,$.THEAD,$.TR]),Rpe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:EE,onParseError:null};let Ppe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=de.INITIAL,this.originalInsertionMode=de.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Rpe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new $0t(this.options,this),this.activeFormattingElements=new z0t(this.treeAdapter),this.fragmentContextID=r?FS(this.treeAdapter.getTagName(r)):$.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new U0t(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Rpe,...n};t??(t=r.treeAdapter.createElement(De.TEMPLATE,Xe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Xe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===$.TEMPLATE&&s.tmplInsertionModeStack.unshift(de.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:cgt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Xe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Xe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=de.TEXT}switchToPlaintextParsing(){this.insertionMode=de.TEXT,this.originalInsertionMode=de.IN_BODY,this.tokenizer.state=so.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===De.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Xe.HTML))switch(this.fragmentContextID){case $.TITLE:case $.TEXTAREA:{this.tokenizer.state=so.RCDATA;break}case $.STYLE:case $.XMP:case $.IFRAME:case $.NOEMBED:case $.NOFRAMES:case $.NOSCRIPT:{this.tokenizer.state=so.RAWTEXT;break}case $.SCRIPT:{this.tokenizer.state=so.SCRIPT_DATA;break}case $.PLAINTEXT:{this.tokenizer.state=so.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Xe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Xe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(De.HTML,Xe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,$.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===or.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===$.SVG&&this.treeAdapter.getTagName(n)===De.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Xe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===$.MGLYPH||t.tagID===$.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Xe.HTML)}_processToken(t){switch(t.type){case or.CHARACTER:{this.onCharacter(t);break}case or.NULL_CHARACTER:{this.onNullCharacter(t);break}case or.COMMENT:{this.onComment(t);break}case or.DOCTYPE:{this.onDoctype(t);break}case or.START_TAG:{this._processStartTag(t);break}case or.END_TAG:{this.onEndTag(t);break}case or.EOF:{this.onEof(t);break}case or.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return ogt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===rh.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=de.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion($.P),this.openElements.popUntilTagNamePopped($.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case $.TR:{this.insertionMode=de.IN_ROW;return}case $.TBODY:case $.THEAD:case $.TFOOT:{this.insertionMode=de.IN_TABLE_BODY;return}case $.CAPTION:{this.insertionMode=de.IN_CAPTION;return}case $.COLGROUP:{this.insertionMode=de.IN_COLUMN_GROUP;return}case $.TABLE:{this.insertionMode=de.IN_TABLE;return}case $.BODY:{this.insertionMode=de.IN_BODY;return}case $.FRAMESET:{this.insertionMode=de.IN_FRAMESET;return}case $.SELECT:{this._resetInsertionModeForSelect(t);return}case $.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case $.HTML:{this.insertionMode=this.headElement?de.AFTER_HEAD:de.BEFORE_HEAD;return}case $.TD:case $.TH:{if(t>0){this.insertionMode=de.IN_CELL;return}break}case $.HEAD:{if(t>0){this.insertionMode=de.IN_HEAD;return}break}}this.insertionMode=de.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===$.TEMPLATE)break;if(r===$.TABLE){this.insertionMode=de.IN_SELECT_IN_TABLE;return}}this.insertionMode=de.IN_SELECT}_isElementCausesFosterParenting(t){return XIe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case $.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Xe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case $.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return R0t[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){jyt(this,t);return}switch(this.insertionMode){case de.INITIAL:{pA(this,t);break}case de.BEFORE_HTML:{lk(this,t);break}case de.BEFORE_HEAD:{ck(this,t);break}case de.IN_HEAD:{fk(this,t);break}case de.IN_HEAD_NO_SCRIPT:{dk(this,t);break}case de.AFTER_HEAD:{hk(this,t);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:{JIe(this,t);break}case de.TEXT:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{uU(this,t);break}case de.IN_TABLE_TEXT:{ike(this,t);break}case de.IN_COLUMN_GROUP:{D$(this,t);break}case de.AFTER_BODY:{N$(this,t);break}case de.AFTER_AFTER_BODY:{H4(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Byt(this,t);return}switch(this.insertionMode){case de.INITIAL:{pA(this,t);break}case de.BEFORE_HTML:{lk(this,t);break}case de.BEFORE_HEAD:{ck(this,t);break}case de.IN_HEAD:{fk(this,t);break}case de.IN_HEAD_NO_SCRIPT:{dk(this,t);break}case de.AFTER_HEAD:{hk(this,t);break}case de.TEXT:{this._insertCharacters(t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{uU(this,t);break}case de.IN_COLUMN_GROUP:{D$(this,t);break}case de.AFTER_BODY:{N$(this,t);break}case de.AFTER_AFTER_BODY:{H4(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){iW(this,t);return}switch(this.insertionMode){case de.INITIAL:case de.BEFORE_HTML:case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_TEMPLATE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{iW(this,t);break}case de.IN_TABLE_TEXT:{mA(this,t);break}case de.AFTER_BODY:{ygt(this,t);break}case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{vgt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case de.INITIAL:{bgt(this,t);break}case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:{this._err(t,Ue.misplacedDoctype);break}case de.IN_TABLE_TEXT:{mA(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ue.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Uyt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case de.INITIAL:{pA(this,t);break}case de.BEFORE_HTML:{xgt(this,t);break}case de.BEFORE_HEAD:{wgt(this,t);break}case de.IN_HEAD:{qh(this,t);break}case de.IN_HEAD_NO_SCRIPT:{Sgt(this,t);break}case de.AFTER_HEAD:{Agt(this,t);break}case de.IN_BODY:{Lu(this,t);break}case de.IN_TABLE:{lT(this,t);break}case de.IN_TABLE_TEXT:{mA(this,t);break}case de.IN_CAPTION:{Eyt(this,t);break}case de.IN_COLUMN_GROUP:{IZ(this,t);break}case de.IN_TABLE_BODY:{MF(this,t);break}case de.IN_ROW:{FF(this,t);break}case de.IN_CELL:{Cyt(this,t);break}case de.IN_SELECT:{ake(this,t);break}case de.IN_SELECT_IN_TABLE:{Iyt(this,t);break}case de.IN_TEMPLATE:{Ryt(this,t);break}case de.AFTER_BODY:{Dyt(this,t);break}case de.IN_FRAMESET:{Nyt(this,t);break}case de.AFTER_FRAMESET:{$yt(this,t);break}case de.AFTER_AFTER_BODY:{Myt(this,t);break}case de.AFTER_AFTER_FRAMESET:{Fyt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?zyt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case de.INITIAL:{pA(this,t);break}case de.BEFORE_HTML:{_gt(this,t);break}case de.BEFORE_HEAD:{Egt(this,t);break}case de.IN_HEAD:{Tgt(this,t);break}case de.IN_HEAD_NO_SCRIPT:{Cgt(this,t);break}case de.AFTER_HEAD:{Igt(this,t);break}case de.IN_BODY:{LF(this,t);break}case de.TEXT:{hyt(this,t);break}case de.IN_TABLE:{ER(this,t);break}case de.IN_TABLE_TEXT:{mA(this,t);break}case de.IN_CAPTION:{Tyt(this,t);break}case de.IN_COLUMN_GROUP:{Syt(this,t);break}case de.IN_TABLE_BODY:{sW(this,t);break}case de.IN_ROW:{oke(this,t);break}case de.IN_CELL:{Ayt(this,t);break}case de.IN_SELECT:{uke(this,t);break}case de.IN_SELECT_IN_TABLE:{kyt(this,t);break}case de.IN_TEMPLATE:{Pyt(this,t);break}case de.AFTER_BODY:{cke(this,t);break}case de.IN_FRAMESET:{Oyt(this,t);break}case de.AFTER_FRAMESET:{Lyt(this,t);break}case de.AFTER_AFTER_BODY:{H4(this,t);break}}}onEof(t){switch(this.insertionMode){case de.INITIAL:{pA(this,t);break}case de.BEFORE_HTML:{lk(this,t);break}case de.BEFORE_HEAD:{ck(this,t);break}case de.IN_HEAD:{fk(this,t);break}case de.IN_HEAD_NO_SCRIPT:{dk(this,t);break}case de.AFTER_HEAD:{hk(this,t);break}case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{nke(this,t);break}case de.TEXT:{pyt(this,t);break}case de.IN_TABLE_TEXT:{mA(this,t);break}case de.IN_TEMPLATE:{lke(this,t);break}case de.AFTER_BODY:case de.IN_FRAMESET:case de.AFTER_FRAMESET:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{AZ(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ie.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.TEXT:case de.IN_COLUMN_GROUP:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{this._insertCharacters(t);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:case de.AFTER_BODY:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{QIe(this,t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{uU(this,t);break}case de.IN_TABLE_TEXT:{rke(this,t);break}}}};function fgt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):tke(e,t),n}function dgt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function hgt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=lgt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=pgt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function pgt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function mgt(e,t,n){const r=e.treeAdapter.getTagName(t),i=FS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===$.TEMPLATE&&s===Xe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function ggt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function CZ(e,t){for(let n=0;n<ugt;n++){const r=fgt(e,t);if(!r)break;const i=dgt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=hgt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&mgt(e,o,s),ggt(e,i,r)}}function iW(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function ygt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function vgt(e,t){e._appendCommentNode(t,e.document)}function AZ(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function bgt(e,t){e._setDocumentType(t);const n=t.forceQuirks?Uc.QUIRKS:K0t(t);Y0t(t)||e._err(t,Ue.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=de.BEFORE_HTML}function pA(e,t){e._err(t,Ue.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Uc.QUIRKS),e.insertionMode=de.BEFORE_HTML,e._processToken(t)}function xgt(e,t){t.tagID===$.HTML?(e._insertElement(t,Xe.HTML),e.insertionMode=de.BEFORE_HEAD):lk(e,t)}function _gt(e,t){const n=t.tagID;(n===$.HTML||n===$.HEAD||n===$.BODY||n===$.BR)&&lk(e,t)}function lk(e,t){e._insertFakeRootElement(),e.insertionMode=de.BEFORE_HEAD,e._processToken(t)}function wgt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.HEAD:{e._insertElement(t,Xe.HTML),e.headElement=e.openElements.current,e.insertionMode=de.IN_HEAD;break}default:ck(e,t)}}function Egt(e,t){const n=t.tagID;n===$.HEAD||n===$.BODY||n===$.HTML||n===$.BR?ck(e,t):e._err(t,Ue.endTagWithoutMatchingOpenElement)}function ck(e,t){e._insertFakeElement(De.HEAD,$.HEAD),e.headElement=e.openElements.current,e.insertionMode=de.IN_HEAD,e._processToken(t)}function qh(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case $.TITLE:{e._switchToTextParsing(t,so.RCDATA);break}case $.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,so.RAWTEXT):(e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_HEAD_NO_SCRIPT);break}case $.NOFRAMES:case $.STYLE:{e._switchToTextParsing(t,so.RAWTEXT);break}case $.SCRIPT:{e._switchToTextParsing(t,so.SCRIPT_DATA);break}case $.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=de.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(de.IN_TEMPLATE);break}case $.HEAD:{e._err(t,Ue.misplacedStartTagForHeadElement);break}default:fk(e,t)}}function Tgt(e,t){switch(t.tagID){case $.HEAD:{e.openElements.pop(),e.insertionMode=de.AFTER_HEAD;break}case $.BODY:case $.BR:case $.HTML:{fk(e,t);break}case $.TEMPLATE:{Y_(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function Y_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==$.TEMPLATE&&e._err(t,Ue.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ue.endTagWithoutMatchingOpenElement)}function fk(e,t){e.openElements.pop(),e.insertionMode=de.AFTER_HEAD,e._processToken(t)}function Sgt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.BASEFONT:case $.BGSOUND:case $.HEAD:case $.LINK:case $.META:case $.NOFRAMES:case $.STYLE:{qh(e,t);break}case $.NOSCRIPT:{e._err(t,Ue.nestedNoscriptInHead);break}default:dk(e,t)}}function Cgt(e,t){switch(t.tagID){case $.NOSCRIPT:{e.openElements.pop(),e.insertionMode=de.IN_HEAD;break}case $.BR:{dk(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function dk(e,t){const n=t.type===or.EOF?Ue.openElementsLeftAfterEof:Ue.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=de.IN_HEAD,e._processToken(t)}function Agt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.BODY:{e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=de.IN_BODY;break}case $.FRAMESET:{e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_FRAMESET;break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{e._err(t,Ue.abandonedHeadElementChild),e.openElements.push(e.headElement,$.HEAD),qh(e,t),e.openElements.remove(e.headElement);break}case $.HEAD:{e._err(t,Ue.misplacedStartTagForHeadElement);break}default:hk(e,t)}}function Igt(e,t){switch(t.tagID){case $.BODY:case $.HTML:case $.BR:{hk(e,t);break}case $.TEMPLATE:{Y_(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function hk(e,t){e._insertFakeElement(De.BODY,$.BODY),e.insertionMode=de.IN_BODY,$F(e,t)}function $F(e,t){switch(t.type){case or.CHARACTER:{JIe(e,t);break}case or.WHITESPACE_CHARACTER:{QIe(e,t);break}case or.COMMENT:{iW(e,t);break}case or.START_TAG:{Lu(e,t);break}case or.END_TAG:{LF(e,t);break}case or.EOF:{nke(e,t);break}}}function QIe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function JIe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function kgt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Rgt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Pgt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_FRAMESET)}function Dgt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML)}function Ngt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),jIe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Xe.HTML)}function Ogt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function $gt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),n||(e.formElement=e.openElements.current))}function Lgt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===$.LI&&i===$.LI||(n===$.DD||n===$.DT)&&(i===$.DD||i===$.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==$.ADDRESS&&i!==$.DIV&&i!==$.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML)}function Mgt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.tokenizer.state=so.PLAINTEXT}function Fgt(e,t){e.openElements.hasInScope($.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.framesetOk=!1}function Bgt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(De.A);n&&(CZ(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function jgt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Ugt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope($.NOBR)&&(CZ(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function zgt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Vgt(e,t){e.treeAdapter.getDocumentMode(e.document)!==Uc.QUIRKS&&e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=de.IN_TABLE}function ZIe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Xe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function eke(e){const t=MIe(e,_1.TYPE);return t!=null&&t.toLowerCase()===agt}function Hgt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Xe.HTML),eke(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function qgt(e,t){e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0}function Wgt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._appendElement(t,Xe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Ggt(e,t){t.tagName=De.IMG,t.tagID=$.IMG,ZIe(e,t)}function Ygt(e,t){e._insertElement(t,Xe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=so.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=de.TEXT}function Kgt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,so.RAWTEXT)}function Xgt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,so.RAWTEXT)}function Dpe(e,t){e._switchToTextParsing(t,so.RAWTEXT)}function Qgt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===de.IN_TABLE||e.insertionMode===de.IN_CAPTION||e.insertionMode===de.IN_TABLE_BODY||e.insertionMode===de.IN_ROW||e.insertionMode===de.IN_CELL?de.IN_SELECT_IN_TABLE:de.IN_SELECT}function Jgt(e,t){e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML)}function Zgt(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Xe.HTML)}function eyt(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion($.RTC),e._insertElement(t,Xe.HTML)}function tyt(e,t){e._reconstructActiveFormattingElements(),YIe(t),SZ(t),t.selfClosing?e._appendElement(t,Xe.MATHML):e._insertElement(t,Xe.MATHML),t.ackSelfClosing=!0}function nyt(e,t){e._reconstructActiveFormattingElements(),KIe(t),SZ(t),t.selfClosing?e._appendElement(t,Xe.SVG):e._insertElement(t,Xe.SVG),t.ackSelfClosing=!0}function Npe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML)}function Lu(e,t){switch(t.tagID){case $.I:case $.S:case $.B:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.SMALL:case $.STRIKE:case $.STRONG:{jgt(e,t);break}case $.A:{Bgt(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{Ngt(e,t);break}case $.P:case $.DL:case $.OL:case $.UL:case $.DIV:case $.DIR:case $.NAV:case $.MAIN:case $.MENU:case $.ASIDE:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.DETAILS:case $.ADDRESS:case $.ARTICLE:case $.SECTION:case $.SUMMARY:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{Dgt(e,t);break}case $.LI:case $.DD:case $.DT:{Lgt(e,t);break}case $.BR:case $.IMG:case $.WBR:case $.AREA:case $.EMBED:case $.KEYGEN:{ZIe(e,t);break}case $.HR:{Wgt(e,t);break}case $.RB:case $.RTC:{Zgt(e,t);break}case $.RT:case $.RP:{eyt(e,t);break}case $.PRE:case $.LISTING:{Ogt(e,t);break}case $.XMP:{Kgt(e,t);break}case $.SVG:{nyt(e,t);break}case $.HTML:{kgt(e,t);break}case $.BASE:case $.LINK:case $.META:case $.STYLE:case $.TITLE:case $.SCRIPT:case $.BGSOUND:case $.BASEFONT:case $.TEMPLATE:{qh(e,t);break}case $.BODY:{Rgt(e,t);break}case $.FORM:{$gt(e,t);break}case $.NOBR:{Ugt(e,t);break}case $.MATH:{tyt(e,t);break}case $.TABLE:{Vgt(e,t);break}case $.INPUT:{Hgt(e,t);break}case $.PARAM:case $.TRACK:case $.SOURCE:{qgt(e,t);break}case $.IMAGE:{Ggt(e,t);break}case $.BUTTON:{Fgt(e,t);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{zgt(e,t);break}case $.IFRAME:{Xgt(e,t);break}case $.SELECT:{Qgt(e,t);break}case $.OPTION:case $.OPTGROUP:{Jgt(e,t);break}case $.NOEMBED:{Dpe(e,t);break}case $.FRAMESET:{Pgt(e,t);break}case $.TEXTAREA:{Ygt(e,t);break}case $.NOSCRIPT:{e.options.scriptingEnabled?Dpe(e,t):Npe(e,t);break}case $.PLAINTEXT:{Mgt(e,t);break}case $.COL:case $.TH:case $.TD:case $.TR:case $.HEAD:case $.FRAME:case $.TBODY:case $.TFOOT:case $.THEAD:case $.CAPTION:case $.COLGROUP:break;default:Npe(e,t)}}function ryt(e,t){if(e.openElements.hasInScope($.BODY)&&(e.insertionMode=de.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function iyt(e,t){e.openElements.hasInScope($.BODY)&&(e.insertionMode=de.AFTER_BODY,cke(e,t))}function syt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function oyt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope($.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped($.FORM):n&&e.openElements.remove(n))}function ayt(e){e.openElements.hasInButtonScope($.P)||e._insertFakeElement(De.P,$.P),e._closePElement()}function uyt(e){e.openElements.hasInListItemScope($.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion($.LI),e.openElements.popUntilTagNamePopped($.LI))}function lyt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function cyt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function fyt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function dyt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(De.BR,$.BR),e.openElements.pop(),e.framesetOk=!1}function tke(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==$.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function LF(e,t){switch(t.tagID){case $.A:case $.B:case $.I:case $.S:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.NOBR:case $.SMALL:case $.STRIKE:case $.STRONG:{CZ(e,t);break}case $.P:{ayt(e);break}case $.DL:case $.UL:case $.OL:case $.DIR:case $.DIV:case $.NAV:case $.PRE:case $.MAIN:case $.MENU:case $.ASIDE:case $.BUTTON:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.ADDRESS:case $.ARTICLE:case $.DETAILS:case $.SECTION:case $.SUMMARY:case $.LISTING:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{syt(e,t);break}case $.LI:{uyt(e);break}case $.DD:case $.DT:{lyt(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{cyt(e);break}case $.BR:{dyt(e);break}case $.BODY:{ryt(e,t);break}case $.HTML:{iyt(e,t);break}case $.FORM:{oyt(e);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{fyt(e,t);break}case $.TEMPLATE:{Y_(e,t);break}default:tke(e,t)}}function nke(e,t){e.tmplInsertionModeStack.length>0?lke(e,t):AZ(e,t)}function hyt(e,t){var n;t.tagID===$.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function pyt(e,t){e._err(t,Ue.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function uU(e,t){if(XIe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=de.IN_TABLE_TEXT,t.type){case or.CHARACTER:{ike(e,t);break}case or.WHITESPACE_CHARACTER:{rke(e,t);break}}else uP(e,t)}function myt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_CAPTION}function gyt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_COLUMN_GROUP}function yyt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(De.COLGROUP,$.COLGROUP),e.insertionMode=de.IN_COLUMN_GROUP,IZ(e,t)}function vyt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_TABLE_BODY}function byt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(De.TBODY,$.TBODY),e.insertionMode=de.IN_TABLE_BODY,MF(e,t)}function xyt(e,t){e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function _yt(e,t){eke(t)?e._appendElement(t,Xe.HTML):uP(e,t),t.ackSelfClosing=!0}function wyt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Xe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function lT(e,t){switch(t.tagID){case $.TD:case $.TH:case $.TR:{byt(e,t);break}case $.STYLE:case $.SCRIPT:case $.TEMPLATE:{qh(e,t);break}case $.COL:{yyt(e,t);break}case $.FORM:{wyt(e,t);break}case $.TABLE:{xyt(e,t);break}case $.TBODY:case $.TFOOT:case $.THEAD:{vyt(e,t);break}case $.INPUT:{_yt(e,t);break}case $.CAPTION:{myt(e,t);break}case $.COLGROUP:{gyt(e,t);break}default:uP(e,t)}}function ER(e,t){switch(t.tagID){case $.TABLE:{e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode());break}case $.TEMPLATE:{Y_(e,t);break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:uP(e,t)}}function uP(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,$F(e,t),e.fosterParentingEnabled=n}function rke(e,t){e.pendingCharacterTokens.push(t)}function ike(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function mA(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)uP(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const ske=new Set([$.CAPTION,$.COL,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]);function Eyt(e,t){const n=t.tagID;ske.has(n)?e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_TABLE,lT(e,t)):Lu(e,t)}function Tyt(e,t){const n=t.tagID;switch(n){case $.CAPTION:case $.TABLE:{e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_TABLE,n===$.TABLE&&ER(e,t));break}case $.BODY:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:LF(e,t)}}function IZ(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.COL:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case $.TEMPLATE:{qh(e,t);break}default:D$(e,t)}}function Syt(e,t){switch(t.tagID){case $.COLGROUP:{e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=de.IN_TABLE);break}case $.TEMPLATE:{Y_(e,t);break}case $.COL:break;default:D$(e,t)}}function D$(e,t){e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=de.IN_TABLE,e._processToken(t))}function MF(e,t){switch(t.tagID){case $.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_ROW;break}case $.TH:case $.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(De.TR,$.TR),e.insertionMode=de.IN_ROW,FF(e,t);break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE,lT(e,t));break}default:lT(e,t)}}function sW(e,t){const n=t.tagID;switch(t.tagID){case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE);break}case $.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE,ER(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:case $.TR:break;default:ER(e,t)}}function FF(e,t){switch(t.tagID){case $.TH:case $.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_CELL,e.activeFormattingElements.insertMarker();break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,MF(e,t));break}default:lT(e,t)}}function oke(e,t){switch(t.tagID){case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY);break}case $.TABLE:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,sW(e,t));break}case $.TBODY:case $.TFOOT:case $.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope($.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,sW(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:break;default:ER(e,t)}}function Cyt(e,t){const n=t.tagID;ske.has(n)?(e.openElements.hasInTableScope($.TD)||e.openElements.hasInTableScope($.TH))&&(e._closeTableCell(),FF(e,t)):Lu(e,t)}function Ayt(e,t){const n=t.tagID;switch(n){case $.TD:case $.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_ROW);break}case $.TABLE:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),oke(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:break;default:LF(e,t)}}function ake(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._insertElement(t,Xe.HTML);break}case $.OPTGROUP:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Xe.HTML);break}case $.INPUT:case $.KEYGEN:case $.TEXTAREA:case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),t.tagID!==$.SELECT&&e._processStartTag(t));break}case $.SCRIPT:case $.TEMPLATE:{qh(e,t);break}}}function uke(e,t){switch(t.tagID){case $.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===$.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===$.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop();break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop();break}case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode());break}case $.TEMPLATE:{Y_(e,t);break}}}function Iyt(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e._processStartTag(t)):ake(e,t)}function kyt(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e.onEndTag(t)):uke(e,t)}function Ryt(e,t){switch(t.tagID){case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{qh(e,t);break}case $.CAPTION:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.tmplInsertionModeStack[0]=de.IN_TABLE,e.insertionMode=de.IN_TABLE,lT(e,t);break}case $.COL:{e.tmplInsertionModeStack[0]=de.IN_COLUMN_GROUP,e.insertionMode=de.IN_COLUMN_GROUP,IZ(e,t);break}case $.TR:{e.tmplInsertionModeStack[0]=de.IN_TABLE_BODY,e.insertionMode=de.IN_TABLE_BODY,MF(e,t);break}case $.TD:case $.TH:{e.tmplInsertionModeStack[0]=de.IN_ROW,e.insertionMode=de.IN_ROW,FF(e,t);break}default:e.tmplInsertionModeStack[0]=de.IN_BODY,e.insertionMode=de.IN_BODY,Lu(e,t)}}function Pyt(e,t){t.tagID===$.TEMPLATE&&Y_(e,t)}function lke(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):AZ(e,t)}function Dyt(e,t){t.tagID===$.HTML?Lu(e,t):N$(e,t)}function cke(e,t){var n;if(t.tagID===$.HTML){if(e.fragmentContext||(e.insertionMode=de.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===$.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else N$(e,t)}function N$(e,t){e.insertionMode=de.IN_BODY,$F(e,t)}function Nyt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.FRAMESET:{e._insertElement(t,Xe.HTML);break}case $.FRAME:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case $.NOFRAMES:{qh(e,t);break}}}function Oyt(e,t){t.tagID===$.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==$.FRAMESET&&(e.insertionMode=de.AFTER_FRAMESET))}function $yt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.NOFRAMES:{qh(e,t);break}}}function Lyt(e,t){t.tagID===$.HTML&&(e.insertionMode=de.AFTER_AFTER_FRAMESET)}function Myt(e,t){t.tagID===$.HTML?Lu(e,t):H4(e,t)}function H4(e,t){e.insertionMode=de.IN_BODY,$F(e,t)}function Fyt(e,t){switch(t.tagID){case $.HTML:{Lu(e,t);break}case $.NOFRAMES:{qh(e,t);break}}}function Byt(e,t){t.chars=ys,e._insertCharacters(t)}function jyt(e,t){e._insertCharacters(t),e.framesetOk=!1}function fke(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Xe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Uyt(e,t){if(ngt(t))fke(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Xe.MATHML?YIe(t):r===Xe.SVG&&(rgt(t),KIe(t)),SZ(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function zyt(e,t){if(t.tagID===$.P||t.tagID===$.BR){fke(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Xe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}De.AREA,De.BASE,De.BASEFONT,De.BGSOUND,De.BR,De.COL,De.EMBED,De.FRAME,De.HR,De.IMG,De.INPUT,De.KEYGEN,De.LINK,De.META,De.PARAM,De.SOURCE,De.TRACK,De.WBR;const Vyt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Ope={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function dke(e,t){const n=Zyt(e),r=DIe("type",{handlers:{root:Hyt,element:qyt,text:Wyt,comment:pke,doctype:Gyt,raw:Kyt},unknown:Xyt}),i={parser:n?new Ppe(Ope):Ppe.getFragmentParser(void 0,Ope),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),BS(i,Pm());const s=n?i.parser.document:i.parser.getFragment(),o=n0t(s,{file:i.options.file});return i.stitches&&_Z(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function hke(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Hyt(e,t){hke(e.children,t)}function qyt(e,t){Qyt(e,t),hke(e.children,t),Jyt(e,t)}function Wyt(e,t){const n={type:or.CHARACTER,chars:e.value,location:lP(e)};BS(t,Pm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Gyt(e,t){const n={type:or.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:lP(e)};BS(t,Pm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Yyt(e,t){t.stitches=!0;const n=e1t(e);if("children"in e&&"children"in n){const r=dke({type:"root",children:e.children},t.options);n.children=r.children}pke({type:"comment",value:{stitch:n}},t)}function pke(e,t){const n=e.value,r={type:or.COMMENT,data:n,location:lP(e)};BS(t,Pm(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Kyt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,mke(t,Pm(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Xyt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Yyt(n,t);else{let r="";throw Vyt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function BS(e,t){mke(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=so.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function mke(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Qyt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===so.PLAINTEXT)return;BS(t,Pm(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:mx.html;i===mx.html&&n==="svg"&&(i=mx.svg);const s=o0t({...e,children:[]},{space:i===mx.svg?"svg":"html"}),o={type:or.START_TAG,tagName:n,tagID:FS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:lP(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Jyt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&p0t.includes(n)||t.parser.tokenizer.state===so.PLAINTEXT)return;BS(t,PF(e));const r={type:or.END_TAG,tagName:n,tagID:FS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:lP(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===so.RCDATA||t.parser.tokenizer.state===so.RAWTEXT||t.parser.tokenizer.state===so.SCRIPT_DATA)&&(t.parser.tokenizer.state=so.DATA)}function Zyt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function lP(e){const t=Pm(e)||{line:void 0,column:void 0,offset:void 0},n=PF(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function e1t(e){return"children"in e?uT({...e,children:[]}):uT(e)}function t1t(e){return function(t,n){return dke(t,{...e,file:n})}}function ku({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return w.jsx(Dv,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return w.jsx(ze,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return w.jsx(Vs,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return w.jsx(Vs,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return w.jsx(Vs,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return w.jsx(Vs,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return w.jsx(Vs,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return w.jsx(Vs,{...s,order:6,...s,pb:12})},a({node:i,...s}){return w.jsx(Rv,{...s,ref:void 0})},ul({node:i,...s}){return w.jsx(io,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return w.jsx(io,{type:"ordered",withPadding:!0,...o,pb:8})}};return w.jsx(Vmt,{components:n,rehypePlugins:[t1t],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function q4({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return w.jsx(ku,{text:n})}const Jw=14;function n1t({completed:e,inProgress:t,rejected:n}){return w.jsxs(qt,{ml:4,gap:4,children:[w.jsx(os,{label:"Completed",children:w.jsx(b1,{variant:"light",color:"green",leftSection:w.jsx(BAe,{width:Jw,height:Jw,style:{paddingTop:1}}),pb:1,children:e})}),w.jsx(os,{label:"In Progress",children:w.jsx(b1,{variant:"light",color:"orange",leftSection:w.jsx(jAe,{width:Jw,height:Jw,style:{paddingTop:1}}),pb:1,children:t})}),w.jsx(os,{label:"Rejected",children:w.jsx(b1,{variant:"light",color:"red",leftSection:w.jsx(lZ,{width:Jw,height:Jw,style:{paddingTop:1}}),pb:1,children:n})})]})}const r1t="https://github.com/revisit-studies/study/tree/main/public/";function i1t({configName:e,config:t,url:n}){const{storageEngine:r}=po(),[i,s]=P.useState(null);P.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=P.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=P.useState(null);P.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=P.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return w.jsx(CS,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?w.jsxs(w.Fragment,{children:[w.jsx(ze,{fw:"bold",children:e}),w.jsxs(qt,{align:"center",direction:"row",children:[w.jsx(sk,{color:"red"}),w.jsx(ze,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),w.jsx(q4,{issues:t.errors,type:"error"}),t.warnings.length>0&&w.jsxs(w.Fragment,{children:[w.jsxs(qt,{align:"center",direction:"row",children:[w.jsx(sk,{color:"orange"}),w.jsx(ze,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),w.jsx(q4,{issues:t.warnings,type:"warning"})]})]}):w.jsxs(w.Fragment,{children:[w.jsx(qt,{direction:"row",justify:"space-between",children:w.jsx(ze,{fw:"bold",children:t.studyMetadata.title})}),w.jsxs(ze,{c:"dimmed",children:[w.jsx(ze,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),w.jsx(ze,{c:"dimmed",children:t.studyMetadata.description}),w.jsx(ze,{c:"dimmed",ta:"right",style:{paddingRight:5},children:w.jsxs(Rv,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${r1t}${n}`,children:["View source:"," ",n,w.jsx(nft,{style:{width:$e(18),height:$e(18),marginLeft:$e(2),marginBottom:$e(-3)}})]})}),t.warnings.length>0&&w.jsxs(w.Fragment,{children:[w.jsxs(qt,{align:"center",direction:"row",children:[w.jsx(sk,{color:"orange"}),w.jsx(ze,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),w.jsx(q4,{issues:t.warnings,type:"warning"})]}),w.jsx(AS,{my:"md"}),w.jsxs(qt,{direction:"row",gap:"sm",children:[w.jsxs(ze,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&w.jsx(n1t,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&w.jsxs(ze,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),w.jsxs(qt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[w.jsx(on,{leftSection:w.jsx(FAe,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${dl}analysis/stats/${n}`,children:"Analyze & Manage Study"}),w.jsx(on,{leftSection:w.jsx(sft,{}),component:"a",href:`${dl}${n}`,children:"Go to Study"})]})]})},e)}function Zw({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=HAe(n);return w.jsx(i1t,{configName:n,config:r,url:i},n)})}function s1t({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=n.filter(l=>l.startsWith("demo-")),i=n.filter(l=>l.startsWith("tutorial-")),s=n.filter(l=>l.startsWith("example-")),o=n.filter(l=>l.startsWith("test-")),a=n.filter(l=>l.startsWith("library-")),u=n.filter(l=>!l.startsWith("demo-")&&!l.startsWith("tutorial-")&&!l.startsWith("example-")&&!l.startsWith("test-")&&!l.startsWith("library-"));return w.jsx(Oi.Main,{children:w.jsxs(fl,{size:"sm",px:0,children:[w.jsx(Dv,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${dl}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),w.jsxs(Dr,{variant:"outline",defaultValue:u.length>0?"Others":"Demos",children:[w.jsxs(Dr.List,{children:[u.length>0&&w.jsx(Dr.Tab,{value:"Others",children:"Your Studies"}),w.jsx(Dr.Tab,{value:"Demos",children:"Demo Studies"}),w.jsx(Dr.Tab,{value:"Examples",children:"Example Studies"}),w.jsx(Dr.Tab,{value:"Tutorials",children:"Tutorials"}),w.jsx(Dr.Tab,{value:"Tests",children:"Tests"}),w.jsx(Dr.Tab,{value:"Libraries",children:"Libraries"})]}),u.length>0&&w.jsx(Dr.Panel,{value:"Others",children:w.jsx(Zw,{configNames:u,studyConfigs:t})}),w.jsxs(Dr.Panel,{value:"Demos",children:[w.jsx(ze,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),w.jsx(Zw,{configNames:r,studyConfigs:t})]}),w.jsxs(Dr.Panel,{value:"Examples",children:[w.jsx(ze,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),w.jsx(Zw,{configNames:s,studyConfigs:t})]}),w.jsxs(Dr.Panel,{value:"Tutorials",children:[w.jsx(ze,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),w.jsx(Zw,{configNames:i,studyConfigs:t})]}),w.jsxs(Dr.Panel,{value:"Tests",children:[w.jsx(ze,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),w.jsx(Zw,{configNames:o,studyConfigs:t})]}),w.jsxs(Dr.Panel,{value:"Libraries",children:[w.jsx(ze,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish"}),w.jsx(Zw,{configNames:a,studyConfigs:t})]})]})]})})}var gke={exports:{}},yke={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cP=P;function o1t(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var a1t=typeof Object.is=="function"?Object.is:o1t,u1t=cP.useSyncExternalStore,l1t=cP.useRef,c1t=cP.useEffect,f1t=cP.useMemo,d1t=cP.useDebugValue;yke.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=l1t(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=f1t(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,a1t(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=u1t(e,s[0],s[1]);return c1t(function(){o.hasValue=!0,o.value=a},[a]),d1t(a),a};gke.exports=yke;var h1t=gke.exports,Xc="default"in q6?ni:q6,$pe=Symbol.for("react-redux-context"),Lpe=typeof globalThis<"u"?globalThis:{};function p1t(){if(!Xc.createContext)return{};const e=Lpe[$pe]??(Lpe[$pe]=new Map);let t=e.get(Xc.createContext);return t||(t=Xc.createContext(null),e.set(Xc.createContext,t)),t}var B1=p1t(),m1t=()=>{throw new Error("uSES not initialized!")};function kZ(e=B1){return function(){return Xc.useContext(e)}}var vke=kZ(),bke=m1t,g1t=e=>{bke=e},y1t=(e,t)=>e===t;function v1t(e=B1){const t=e===B1?vke:kZ(e),n=(r,i={})=>{const{equalityFn:s=y1t,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Xc.useRef(!0);const d=Xc.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=bke(u.addNestedSub,a.getState,l||a.getState,d,s);return Xc.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var b1t=v1t();function x1t(e){e()}function _1t(){let e=null,t=null;return{clear(){e=null,t=null},notify(){x1t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Mpe={notify(){},get:()=>[]};function w1t(e,t){let n,r=Mpe,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=_1t())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Mpe)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var E1t=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T1t=typeof navigator<"u"&&navigator.product==="ReactNative",S1t=E1t||T1t?Xc.useLayoutEffect:Xc.useEffect;function C1t({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Xc.useMemo(()=>{const l=w1t(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Xc.useMemo(()=>e.getState(),[e]);S1t(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||B1;return Xc.createElement(u.Provider,{value:o},n)}var A1t=C1t;function xke(e=B1){const t=e===B1?vke:kZ(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var I1t=xke();function k1t(e=B1){const t=e===B1?I1t:xke(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var _ke=k1t();g1t(h1t.useSyncExternalStoreWithSelector);function ka(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var R1t=typeof Symbol=="function"&&Symbol.observable||"@@observable",Fpe=R1t,lU=()=>Math.random().toString(36).substring(7).split("").join("."),P1t={INIT:`@@redux/INIT${lU()}`,REPLACE:`@@redux/REPLACE${lU()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${lU()}`},O$=P1t;function RZ(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wke(e,t,n){if(typeof e!="function")throw new Error(ka(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ka(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ka(1));return n(wke)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(ka(3));return i}function f(g){if(typeof g!="function")throw new Error(ka(4));if(u)throw new Error(ka(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(ka(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!RZ(g))throw new Error(ka(7));if(typeof g.type>"u")throw new Error(ka(8));if(typeof g.type!="string")throw new Error(ka(17));if(u)throw new Error(ka(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(ka(10));r=g,d({type:O$.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(ka(11));function v(){const _=y;_.next&&_.next(c())}return v(),{unsubscribe:g(v)}},[Fpe](){return this}}}return d({type:O$.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Fpe]:p}}function D1t(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:O$.INIT})>"u")throw new Error(ka(12));if(typeof n(void 0,{type:O$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ka(13))})}function N1t(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{D1t(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(ka(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function $$(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function O1t(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(ka(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=$$(...a)(i.dispatch),{...i,dispatch:s}}}function $1t(e){return RZ(e)&&"type"in e&&typeof e.type=="string"}var Eke=Symbol.for("immer-nothing"),Bpe=Symbol.for("immer-draftable"),ff=Symbol.for("immer-state");function sh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cT=Object.getPrototypeOf;function j1(e){return!!e&&!!e[ff]}function gg(e){var t;return e?Tke(e)||Array.isArray(e)||!!e[Bpe]||!!((t=e.constructor)!=null&&t[Bpe])||jF(e)||UF(e):!1}var L1t=Object.prototype.constructor.toString();function Tke(e){if(!e||typeof e!="object")return!1;const t=cT(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===L1t}function L$(e,t){BF(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function BF(e){const t=e[ff];return t?t.type_:Array.isArray(e)?1:jF(e)?2:UF(e)?3:0}function oW(e,t){return BF(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ske(e,t,n){const r=BF(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function M1t(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function jF(e){return e instanceof Map}function UF(e){return e instanceof Set}function Fb(e){return e.copy_||e.base_}function aW(e,t){if(jF(e))return new Map(e);if(UF(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Tke(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ff];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(cT(e),r)}else{const r=cT(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function PZ(e,t=!1){return zF(e)||j1(e)||!gg(e)||(BF(e)>1&&(e.set=e.add=e.clear=e.delete=F1t),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>PZ(r,!0))),e}function F1t(){sh(2)}function zF(e){return Object.isFrozen(e)}var B1t={};function Qx(e){const t=B1t[e];return t||sh(0,e),t}var TR;function Cke(){return TR}function j1t(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jpe(e,t){t&&(Qx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function uW(e){lW(e),e.drafts_.forEach(U1t),e.drafts_=null}function lW(e){e===TR&&(TR=e.parent_)}function Upe(e){return TR=j1t(TR,e)}function U1t(e){const t=e[ff];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function zpe(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ff].modified_&&(uW(t),sh(4)),gg(e)&&(e=M$(t,e),t.parent_||F$(t,e)),t.patches_&&Qx("Patches").generateReplacementPatches_(n[ff].base_,e,t.patches_,t.inversePatches_)):e=M$(t,n,[]),uW(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Eke?e:void 0}function M$(e,t,n){if(zF(t))return t;const r=t[ff];if(!r)return L$(t,(i,s)=>Vpe(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return F$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),L$(s,(a,u)=>Vpe(e,r,i,a,u,n,o)),F$(e,i,!1),n&&e.patches_&&Qx("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Vpe(e,t,n,r,i,s,o){if(j1(i)){const a=s&&t&&t.type_!==3&&!oW(t.assigned_,r)?s.concat(r):void 0,u=M$(e,i,a);if(Ske(n,r,u),j1(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(gg(i)&&!zF(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;M$(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&F$(e,i)}}function F$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&PZ(t,n)}function z1t(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Cke(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=DZ;n&&(i=[r],s=SR);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var DZ={get(e,t){if(t===ff)return e;const n=Fb(e);if(!oW(n,t))return V1t(e,n,t);const r=n[t];return e.finalized_||!gg(r)?r:r===cU(e.base_,t)?(fU(e),e.copy_[t]=fW(r,e)):r},has(e,t){return t in Fb(e)},ownKeys(e){return Reflect.ownKeys(Fb(e))},set(e,t,n){const r=Ake(Fb(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=cU(Fb(e),t),s=i==null?void 0:i[ff];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(M1t(n,i)&&(n!==void 0||oW(e.base_,t)))return!0;fU(e),cW(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return cU(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,fU(e),cW(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Fb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){sh(11)},getPrototypeOf(e){return cT(e.base_)},setPrototypeOf(){sh(12)}},SR={};L$(DZ,(e,t)=>{SR[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});SR.deleteProperty=function(e,t){return SR.set.call(this,e,t,void 0)};SR.set=function(e,t,n){return DZ.set.call(this,e[0],t,n,e[0])};function cU(e,t){const n=e[ff];return(n?Fb(n):e)[t]}function V1t(e,t,n){var i;const r=Ake(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Ake(e,t){if(!(t in e))return;let n=cT(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=cT(n)}}function cW(e){e.modified_||(e.modified_=!0,e.parent_&&cW(e.parent_))}function fU(e){e.copy_||(e.copy_=aW(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var H1t=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&sh(6),r!==void 0&&typeof r!="function"&&sh(7);let i;if(gg(t)){const s=Upe(this),o=fW(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?uW(s):lW(s)}return jpe(s,r),zpe(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Eke&&(i=void 0),this.autoFreeze_&&PZ(i,!0),r){const s=[],o=[];Qx("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else sh(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gg(e)||sh(8),j1(e)&&(e=Ike(e));const t=Upe(this),n=fW(e,void 0);return n[ff].isManual_=!0,lW(t),n}finishDraft(e,t){const n=e&&e[ff];(!n||!n.isManual_)&&sh(9);const{scope_:r}=n;return jpe(r,t),zpe(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Qx("Patches").applyPatches_;return j1(e)?r(e,t):this.produce(e,i=>r(i,t))}};function fW(e,t){const n=jF(e)?Qx("MapSet").proxyMap_(e,t):UF(e)?Qx("MapSet").proxySet_(e,t):z1t(e,t);return(t?t.scope_:Cke()).drafts_.push(n),n}function Ike(e){return j1(e)||sh(10,e),kke(e)}function kke(e){if(!gg(e)||zF(e))return e;const t=e[ff];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=aW(e,t.scope_.immer_.useStrictShallowCopy_)}else n=aW(e,!0);return L$(n,(r,i)=>{Ske(n,r,kke(i))}),t&&(t.finalized_=!1),n}var df=new H1t,Rke=df.produce;df.produceWithPatches.bind(df);df.setAutoFreeze.bind(df);df.setUseStrictShallowCopy.bind(df);df.applyPatches.bind(df);df.createDraft.bind(df);df.finishDraft.bind(df);function q1t(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function W1t(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function G1t(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Hpe=e=>Array.isArray(e)?e:[e];function Y1t(e){const t=Array.isArray(e[0])?e[0]:e;return G1t(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function K1t(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var X1t=class{constructor(e){this.value=e}deref(){return this.value}},Q1t=typeof WeakRef<"u"?WeakRef:X1t,J1t=0,qpe=1;function nO(){return{s:J1t,v:void 0,o:null,p:null}}function NZ(e,t={}){let n=nO();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=nO(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=nO(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===qpe)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Q1t(c):c}return l.s=qpe,l.v=c,c}return o.clearCache=()=>{n=nO(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Pke(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),q1t(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=NZ,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Hpe(d),y=Hpe(p),v=Y1t(i),b=f(function(){return s++,l.apply(null,arguments)},...g),_=h(function(){o++;const S=K1t(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(_,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Dke=Pke(NZ),Z1t=Object.assign((e,t=Dke)=>{W1t(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Z1t});function Nke(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var evt=Nke(),tvt=Nke,nvt=(...e)=>{const t=Pke(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(j1(o)?Ike(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};nvt(NZ);var rvt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$$:$$.apply(null,arguments)};function fT(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(lc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>$1t(r)&&r.type===e,n}var Oke=class uI extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,uI.prototype)}static get[Symbol.species](){return uI}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new uI(...t[0].concat(this)):new uI(...t.concat(this))}};function Wpe(e){return gg(e)?Rke(e,()=>{}):e}function Gpe(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(lc(10));const r=n.insert(t,e);return e.set(t,r),r}function ivt(e){return typeof e=="boolean"}var svt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new Oke;return n&&(ivt(n)?o.push(evt):o.push(tvt(n.extraArgument))),o},ovt="RTK_autoBatch",$ke=e=>t=>{setTimeout(t,e)},avt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$ke(10),uvt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?avt:e.type==="callback"?e.queueNotification:$ke(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[ovt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},lvt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Oke(e);return r&&i.push(uvt(typeof r=="object"?r:void 0)),i};function cvt(e){const t=svt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(RZ(n))a=N1t(n);else throw new Error(lc(1));let u;typeof r=="function"?u=r(t):u=t();let l=$$;i&&(l=rvt({trace:!1,...typeof i=="object"&&i}));const c=O1t(...u),f=lvt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return wke(a,s,h)}function Lke(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(lc(28));if(a in t)throw new Error(lc(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function fvt(e){return typeof e=="function"}function dvt(e,t){let[n,r,i]=Lke(t),s;if(fvt(e))s=()=>Wpe(e());else{const a=Wpe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(j1(c)){const h=f(c,u);return h===void 0?c:h}else{if(gg(c))return Rke(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(lc(9))}return d}}return c},a)}return o.getInitialState=s,o}var hvt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pvt=(e=21)=>{let t="",n=e;for(;n--;)t+=hvt[Math.random()*64|0];return t},mvt=Symbol.for("rtk-slice-createasyncthunk");function gvt(e,t){return`${e}/${t}`}function yvt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[mvt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(lc(11));const a=(typeof i.reducers=="function"?i.reducers(xvt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,_){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(lc(12));if(E in l.sliceCaseReducersByType)throw new Error(lc(13));return l.sliceCaseReducersByType[E]=_,c},addMatcher(b,_){return l.sliceMatchers.push({matcher:b,reducer:_}),c},exposeAction(b,_){return l.actionCreators[b]=_,c},exposeCaseReducer(b,_){return l.sliceCaseReducersByName[b]=_,c}};u.forEach(b=>{const _=a[b],E={reducerName:b,type:gvt(s,b),createNotation:typeof i.reducers=="function"};wvt(_)?Tvt(E,_,c,t):_vt(E,_,c)});function f(){const[b={},_=[],E=void 0]=typeof i.extraReducers=="function"?Lke(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return dvt(i.initialState,C=>{for(let A in S)C.addCase(A,S[A]);for(let A of l.sliceMatchers)C.addMatcher(A.matcher,A.reducer);for(let A of _)C.addMatcher(A.matcher,A.reducer);E&&C.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,_){return p||(p=f()),p(b,_)}function g(){return p||(p=f()),p.getInitialState()}function y(b,_=!1){function E(C){let A=C[b];return typeof A>"u"&&_&&(A=g()),A}function S(C=d){const A=Gpe(h,_,{insert:()=>new WeakMap});return Gpe(A,C,{insert:()=>{const R={};for(const[k,N]of Object.entries(i.selectors??{}))R[k]=vvt(N,C,g,_);return R}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:_,...E}={}){const S=_??o;return b.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function vvt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var bvt=yvt();function xvt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function _vt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Evt(r))throw new Error(lc(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?fT(e,o):fT(e))}function wvt(e){return e._reducerDefinitionType==="asyncThunk"}function Evt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Tvt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(lc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||rO,pending:a||rO,rejected:u||rO,settled:l||rO})}function rO(){}var Svt=(e,t)=>{if(typeof e!="function")throw new Error(lc(32))},OZ="listenerMiddleware",Cvt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=fT(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(lc(21));return Svt(s),{predicate:i,type:t,effect:s}},Avt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Cvt(e);return{id:pvt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(lc(22))}}},{withTypes:()=>Avt}),Ivt=Object.assign(fT(`${OZ}/add`),{withTypes:()=>Ivt});fT(`${OZ}/removeAll`);var kvt=Object.assign(fT(`${OZ}/remove`),{withTypes:()=>kvt});function lc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Dh(e){return e.components.flatMap(t=>typeof t=="string"?t:Dh(t))}function Mke(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:Mke(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Fke(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Dh(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Dh(e).length-1}];r+=1}else{const o=Fke(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function $Z(e,t){const n=Fke(e,t,0);return typeof n=="number"?null:n}function Bke(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Bke(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Rvt(e,t){const n=Bke(e,t,0);return n.found?n.distance:-1}function jke(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...jke(i,`${t}-${s}`))}),n}function LZ(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>LZ(n,`${t}-${r}`))}}async function Pvt(e,t,n,r,i,s,o){const a=Dh(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=bvt({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:y,val:v}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[y]:v}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:y,questionKey:v,value:b,isChecked:_,choiceOptions:E}=m.payload,S=((g=p.matrixAnswers[y])==null?void 0:g[v])??"";let C="";_?S.length>0?C=[...S.split("|"),b].sort((A,R)=>E.map(k=>k.value).indexOf(A)-E.map(k=>k.value).indexOf(R)).join("|"):C=`${b}`:C=S.split("|").filter(A=>A!==b).join("|"),p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[v]:C}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:b,provenanceGraph:_,windowEvents:E,timedOut:S,incorrectAnswers:C,helpButtonClickedCount:A}=m;p.answers[g]={incorrectAnswers:C,answer:y,startTime:v,endTime:b,provenanceGraph:_,windowEvents:E,timedOut:S,helpButtonClickedCount:A}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:y,question:v}=m;p.answers[v].incorrectAnswers||(p.answers[v].incorrectAnswers={}),p.answers[v].incorrectAnswers[g]||(p.answers[v].incorrectAnswers[g]={id:g,value:[]}),p.answers[v].incorrectAnswers[g].value.push(y)}}});return{store:cvt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const Uke=P.createContext(null);function hl(){return P.useContext(Uke).actions}const Sc=_ke,Xr=b1t;function Dvt(e){return Xr(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const Nvt=Dke(e=>e.sequence,e=>Dh(e));function MZ(){return Xr(Nvt)}var zke={exports:{}};function lI(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dU={exports:{}};const Ovt={},$vt=Object.freeze(Object.defineProperty({__proto__:null,default:Ovt},Symbol.toStringTag,{value:"Module"})),Vke=KXe($vt);var Ype;function Fr(){return Ype||(Ype=1,function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Jt<"u"&&Jt.crypto&&(s=Jt.crypto),!s&&typeof lI=="function")try{s=Vke}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(b){var _;return v.prototype=b,_=new v,v.prototype=null,_}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(v){var b=a(this);return v&&b.mixIn(v),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var b in v)v.hasOwnProperty(b)&&(this[b]=v[b]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(v,b){v=this.words=v||[],b!=i?this.sigBytes=b:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var b=this.words,_=v.words,E=this.sigBytes,S=v.sigBytes;if(this.clamp(),E%4)for(var C=0;C<S;C++){var A=_[C>>>2]>>>24-C%4*8&255;b[E+C>>>2]|=A<<24-(E+C)%4*8}else for(var R=0;R<S;R+=4)b[E+R>>>2]=_[R>>>2];return this.sigBytes+=S,this},clamp:function(){var v=this.words,b=this.sigBytes;v[b>>>2]&=4294967295<<32-b%4*8,v.length=r.ceil(b/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var b=[],_=0;_<v;_+=4)b.push(o());return new f.init(b,v)}}),d=u.enc={},h=d.Hex={stringify:function(v){for(var b=v.words,_=v.sigBytes,E=[],S=0;S<_;S++){var C=b[S>>>2]>>>24-S%4*8&255;E.push((C>>>4).toString(16)),E.push((C&15).toString(16))}return E.join("")},parse:function(v){for(var b=v.length,_=[],E=0;E<b;E+=2)_[E>>>3]|=parseInt(v.substr(E,2),16)<<24-E%8*4;return new f.init(_,b/2)}},p=d.Latin1={stringify:function(v){for(var b=v.words,_=v.sigBytes,E=[],S=0;S<_;S++){var C=b[S>>>2]>>>24-S%4*8&255;E.push(String.fromCharCode(C))}return E.join("")},parse:function(v){for(var b=v.length,_=[],E=0;E<b;E++)_[E>>>2]|=(v.charCodeAt(E)&255)<<24-E%4*8;return new f.init(_,b)}},m=d.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var b,_=this._data,E=_.words,S=_.sigBytes,C=this.blockSize,A=C*4,R=S/A;v?R=r.ceil(R):R=r.max((R|0)-this._minBufferSize,0);var k=R*C,N=r.min(k*4,S);if(k){for(var L=0;L<k;L+=C)this._doProcessBlock(E,L);b=E.splice(0,k),_.sigBytes-=N}return new f.init(b,N)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(v){return function(b,_){return new v.init(_).finalize(b)}},_createHmacHelper:function(v){return function(b,_){return new y.HMAC.init(v,_).finalize(b)}}});var y=u.algo={};return u}(Math);return n})}(dU)),dU.exports}var hU={exports:{}},Kpe;function VF(){return Kpe||(Kpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(hU)),hU.exports}var pU={exports:{}},Xpe;function Lvt(){return Xpe||(Xpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(pU)),pU.exports}var mU={exports:{}},Qpe;function Mvt(){return Qpe||(Qpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(mU)),mU.exports}var gU={exports:{}},Jpe;function K_(){return Jpe||(Jpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,y=p<<16|m<<8|g,v=0;v<4&&h+v*.75<c;v++)d.push(f.charAt(y>>>6*(3-v)&63));var b=f.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(gU)),gU.exports}var yU={exports:{}},Zpe;function Fvt(){return Zpe||(Zpe=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,v=m<<16|g<<8|y,b=0;b<4&&p+b*.75<f;b++)h.push(d.charAt(v>>>6*(3-b)&63));var _=d.charAt(64);if(_)for(;h.length%4;)h.push(_);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(yU)),yU.exports}var vU={exports:{}},eme;function X_(){return eme||(eme=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var y=0;y<16;y++){var v=g+y,b=m[v];m[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var _=this._hash.words,E=m[g+0],S=m[g+1],C=m[g+2],A=m[g+3],R=m[g+4],k=m[g+5],N=m[g+6],L=m[g+7],O=m[g+8],B=m[g+9],q=m[g+10],H=m[g+11],G=m[g+12],K=m[g+13],J=m[g+14],F=m[g+15],j=_[0],W=_[1],M=_[2],V=_[3];j=f(j,W,M,V,E,7,l[0]),V=f(V,j,W,M,S,12,l[1]),M=f(M,V,j,W,C,17,l[2]),W=f(W,M,V,j,A,22,l[3]),j=f(j,W,M,V,R,7,l[4]),V=f(V,j,W,M,k,12,l[5]),M=f(M,V,j,W,N,17,l[6]),W=f(W,M,V,j,L,22,l[7]),j=f(j,W,M,V,O,7,l[8]),V=f(V,j,W,M,B,12,l[9]),M=f(M,V,j,W,q,17,l[10]),W=f(W,M,V,j,H,22,l[11]),j=f(j,W,M,V,G,7,l[12]),V=f(V,j,W,M,K,12,l[13]),M=f(M,V,j,W,J,17,l[14]),W=f(W,M,V,j,F,22,l[15]),j=d(j,W,M,V,S,5,l[16]),V=d(V,j,W,M,N,9,l[17]),M=d(M,V,j,W,H,14,l[18]),W=d(W,M,V,j,E,20,l[19]),j=d(j,W,M,V,k,5,l[20]),V=d(V,j,W,M,q,9,l[21]),M=d(M,V,j,W,F,14,l[22]),W=d(W,M,V,j,R,20,l[23]),j=d(j,W,M,V,B,5,l[24]),V=d(V,j,W,M,J,9,l[25]),M=d(M,V,j,W,A,14,l[26]),W=d(W,M,V,j,O,20,l[27]),j=d(j,W,M,V,K,5,l[28]),V=d(V,j,W,M,C,9,l[29]),M=d(M,V,j,W,L,14,l[30]),W=d(W,M,V,j,G,20,l[31]),j=h(j,W,M,V,k,4,l[32]),V=h(V,j,W,M,O,11,l[33]),M=h(M,V,j,W,H,16,l[34]),W=h(W,M,V,j,J,23,l[35]),j=h(j,W,M,V,S,4,l[36]),V=h(V,j,W,M,R,11,l[37]),M=h(M,V,j,W,L,16,l[38]),W=h(W,M,V,j,q,23,l[39]),j=h(j,W,M,V,K,4,l[40]),V=h(V,j,W,M,E,11,l[41]),M=h(M,V,j,W,A,16,l[42]),W=h(W,M,V,j,N,23,l[43]),j=h(j,W,M,V,B,4,l[44]),V=h(V,j,W,M,G,11,l[45]),M=h(M,V,j,W,F,16,l[46]),W=h(W,M,V,j,C,23,l[47]),j=p(j,W,M,V,E,6,l[48]),V=p(V,j,W,M,L,10,l[49]),M=p(M,V,j,W,J,15,l[50]),W=p(W,M,V,j,k,21,l[51]),j=p(j,W,M,V,G,6,l[52]),V=p(V,j,W,M,A,10,l[53]),M=p(M,V,j,W,q,15,l[54]),W=p(W,M,V,j,S,21,l[55]),j=p(j,W,M,V,O,6,l[56]),V=p(V,j,W,M,F,10,l[57]),M=p(M,V,j,W,N,15,l[58]),W=p(W,M,V,j,K,21,l[59]),j=p(j,W,M,V,R,6,l[60]),V=p(V,j,W,M,H,10,l[61]),M=p(M,V,j,W,C,15,l[62]),W=p(W,M,V,j,B,21,l[63]),_[0]=_[0]+j|0,_[1]=_[1]+W|0,_[2]=_[2]+M|0,_[3]=_[3]+V|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,v=m.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=r.floor(y/4294967296),_=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var E=this._hash,S=E.words,C=0;C<4;C++){var A=S[C];S[C]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return E},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,y,v,b,_,E){var S=m+(g&y|~g&v)+b+E;return(S<<_|S>>>32-_)+g}function d(m,g,y,v,b,_,E){var S=m+(g&v|y&~v)+b+E;return(S<<_|S>>>32-_)+g}function h(m,g,y,v,b,_,E){var S=m+(g^y^v)+b+E;return(S<<_|S>>>32-_)+g}function p(m,g,y,v,b,_,E){var S=m+(y^(g|~v))+b+E;return(S<<_|S>>>32-_)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(vU)),vU.exports}var bU={exports:{}},tme;function Hke(){return tme||(tme=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)u[v]=c[f+v]|0;else{var b=u[v-3]^u[v-8]^u[v-14]^u[v-16];u[v]=b<<1|b>>>31}var _=(h<<5|h>>>27)+y+u[v];v<20?_+=(p&m|~p&g)+1518500249:v<40?_+=(p^m^g)+1859775393:v<60?_+=(p&m|p&g|m&g)-1894007588:_+=(p^m^g)-899497514,y=g,g=m,m=p<<30|p>>>2,p=h,h=_}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(bU)),bU.exports}var xU={exports:{}},nme;function FZ(){return nme||(nme=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(y){for(var v=r.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],y=m[1],v=m[2],b=m[3],_=m[4],E=m[5],S=m[6],C=m[7],A=0;A<64;A++){if(A<16)f[A]=h[p+A]|0;else{var R=f[A-15],k=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,N=f[A-2],L=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;f[A]=k+f[A-7]+L+f[A-16]}var O=_&E^~_&S,B=g&y^g&v^y&v,q=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),H=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),G=C+H+O+c[A]+f[A],K=q+B;C=S,S=E,E=_,_=b+G|0,b=v,v=y,y=g,g=G+K|0}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+v|0,m[3]=m[3]+b|0,m[4]=m[4]+_|0,m[5]=m[5]+E|0,m[6]=m[6]+S|0,m[7]=m[7]+C|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(xU)),xU.exports}var _U={exports:{}},rme;function Bvt(){return rme||(rme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),FZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(_U)),_U.exports}var wU={exports:{}},ime;function qke(){return ime||(ime=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),VF())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],_=g[3],E=g[4],S=g[5],C=g[6],A=g[7],R=y.high,k=y.low,N=v.high,L=v.low,O=b.high,B=b.low,q=_.high,H=_.low,G=E.high,K=E.low,J=S.high,F=S.low,j=C.high,W=C.low,M=A.high,V=A.low,Q=R,se=k,be=N,he=L,Ae=O,Ne=B,rt=q,Re=H,Tt=G,Ze=K,It=J,mt=F,Se=j,Fe=W,st=M,yt=V,Pt=0;Pt<80;Pt++){var Je,we,kt=d[Pt];if(Pt<16)we=kt.high=p[m+Pt*2]|0,Je=kt.low=p[m+Pt*2+1]|0;else{var Rt=d[Pt-15],Ee=Rt.high,Oe=Rt.low,ot=(Ee>>>1|Oe<<31)^(Ee>>>8|Oe<<24)^Ee>>>7,xt=(Oe>>>1|Ee<<31)^(Oe>>>8|Ee<<24)^(Oe>>>7|Ee<<25),jt=d[Pt-2],Un=jt.high,dr=jt.low,Sr=(Un>>>19|dr<<13)^(Un<<3|dr>>>29)^Un>>>6,xi=(dr>>>19|Un<<13)^(dr<<3|Un>>>29)^(dr>>>6|Un<<26),Sn=d[Pt-7],zn=Sn.high,hr=Sn.low,gr=d[Pt-16],Qo=gr.high,ts=gr.low;Je=xt+hr,we=ot+zn+(Je>>>0<xt>>>0?1:0),Je=Je+xi,we=we+Sr+(Je>>>0<xi>>>0?1:0),Je=Je+ts,we=we+Qo+(Je>>>0<ts>>>0?1:0),kt.high=we,kt.low=Je}var hs=Tt&It^~Tt&Se,Ns=Ze&mt^~Ze&Fe,Vr=Q&be^Q&Ae^be&Ae,ps=se&he^se&Ne^he&Ne,kc=(Q>>>28|se<<4)^(Q<<30|se>>>2)^(Q<<25|se>>>7),Jo=(se>>>28|Q<<4)^(se<<30|Q>>>2)^(se<<25|Q>>>7),Mu=(Tt>>>14|Ze<<18)^(Tt>>>18|Ze<<14)^(Tt<<23|Ze>>>9),Br=(Ze>>>14|Tt<<18)^(Ze>>>18|Tt<<14)^(Ze<<23|Tt>>>9),ki=f[Pt],mi=ki.high,Qs=ki.low,oi=yt+Br,Ri=st+Mu+(oi>>>0<yt>>>0?1:0),oi=oi+Ns,Ri=Ri+hs+(oi>>>0<Ns>>>0?1:0),oi=oi+Qs,Ri=Ri+mi+(oi>>>0<Qs>>>0?1:0),oi=oi+Je,Ri=Ri+we+(oi>>>0<Je>>>0?1:0),me=Jo+ps,ue=kc+Vr+(me>>>0<Jo>>>0?1:0);st=Se,yt=Fe,Se=It,Fe=mt,It=Tt,mt=Ze,Ze=Re+oi|0,Tt=rt+Ri+(Ze>>>0<Re>>>0?1:0)|0,rt=Ae,Re=Ne,Ae=be,Ne=he,be=Q,he=se,se=oi+me|0,Q=Ri+ue+(se>>>0<oi>>>0?1:0)|0}k=y.low=k+se,y.high=R+Q+(k>>>0<se>>>0?1:0),L=v.low=L+he,v.high=N+be+(L>>>0<he>>>0?1:0),B=b.low=B+Ne,b.high=O+Ae+(B>>>0<Ne>>>0?1:0),H=_.low=H+Re,_.high=q+rt+(H>>>0<Re>>>0?1:0),K=E.low=K+Ze,E.high=G+Tt+(K>>>0<Ze>>>0?1:0),F=S.low=F+mt,S.high=J+It+(F>>>0<mt>>>0?1:0),W=C.low=W+Fe,C.high=j+Se+(W>>>0<Fe>>>0?1:0),V=A.low=V+yt,A.high=M+st+(V>>>0<yt>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,y=p.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(y+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(wU)),wU.exports}var EU={exports:{}},sme;function jvt(){return sme||(sme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),VF(),qke())})(Jt,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(EU)),EU.exports}var TU={exports:{}},ome;function Uvt(){return ome||(ome=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),VF())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,y=0,v=0;v<24;v++){f[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,_=(2*g+3*y)%5;g=b,y=_}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var E=1,S=0;S<24;S++){for(var C=0,A=0,R=0;R<7;R++){if(E&1){var k=(1<<R)-1;k<32?A^=1<<k:C^=1<<k-32}E&128?E=E<<1^113:E<<=1}h[S]=l.create(C,A)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var v=this._state,b=this.blockSize/2,_=0;_<b;_++){var E=g[y+2*_],S=g[y+2*_+1];E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var C=v[_];C.high^=S,C.low^=E}for(var A=0;A<24;A++){for(var R=0;R<5;R++){for(var k=0,N=0,L=0;L<5;L++){var C=v[R+5*L];k^=C.high,N^=C.low}var O=p[R];O.high=k,O.low=N}for(var R=0;R<5;R++)for(var B=p[(R+4)%5],q=p[(R+1)%5],H=q.high,G=q.low,k=B.high^(H<<1|G>>>31),N=B.low^(G<<1|H>>>31),L=0;L<5;L++){var C=v[R+5*L];C.high^=k,C.low^=N}for(var K=1;K<25;K++){var k,N,C=v[K],J=C.high,F=C.low,j=f[K];j<32?(k=J<<j|F>>>32-j,N=F<<j|J>>>32-j):(k=F<<j-32|J>>>64-j,N=J<<j-32|F>>>64-j);var W=p[d[K]];W.high=k,W.low=N}var M=p[0],V=v[0];M.high=V.high,M.low=V.low;for(var R=0;R<5;R++)for(var L=0;L<5;L++){var K=R+5*L,C=v[K],Q=p[K],se=p[(R+1)%5+5*L],be=p[(R+2)%5+5*L];C.high=Q.high^~se.high&be.high,C.low=Q.low^~se.low&be.low}var C=v[0],he=h[A];C.high^=he.high,C.low^=he.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var v=g.sigBytes*8,b=this.blockSize*32;y[v>>>5]|=1<<24-v%32,y[(r.ceil((v+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,E=this.cfg.outputLength/8,S=E/8,C=[],A=0;A<S;A++){var R=_[A],k=R.high,N=R.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,C.push(N),C.push(k)}return new o.init(C,E)},clone:function(){for(var g=a.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(TU)),TU.exports}var SU={exports:{}},ame;function zvt(){return ame||(ame=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,C){for(var A=0;A<16;A++){var R=C+A,k=S[R];S[R]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var N=this._hash.words,L=h.words,O=p.words,B=l.words,q=c.words,H=f.words,G=d.words,K,J,F,j,W,M,V,Q,se,be;M=K=N[0],V=J=N[1],Q=F=N[2],se=j=N[3],be=W=N[4];for(var he,A=0;A<80;A+=1)he=K+S[C+B[A]]|0,A<16?he+=g(J,F,j)+L[0]:A<32?he+=y(J,F,j)+L[1]:A<48?he+=v(J,F,j)+L[2]:A<64?he+=b(J,F,j)+L[3]:he+=_(J,F,j)+L[4],he=he|0,he=E(he,H[A]),he=he+W|0,K=W,W=j,j=E(F,10),F=J,J=he,he=M+S[C+q[A]]|0,A<16?he+=_(V,Q,se)+O[0]:A<32?he+=b(V,Q,se)+O[1]:A<48?he+=v(V,Q,se)+O[2]:A<64?he+=y(V,Q,se)+O[3]:he+=g(V,Q,se)+O[4],he=he|0,he=E(he,G[A]),he=he+be|0,M=be,be=se,se=E(Q,10),Q=V,V=he;he=N[1]+F+se|0,N[1]=N[2]+j+be|0,N[2]=N[3]+W+M|0,N[3]=N[4]+K+V|0,N[4]=N[0]+J+Q|0,N[0]=he},_doFinalize:function(){var S=this._data,C=S.words,A=this._nDataBytes*8,R=S.sigBytes*8;C[R>>>5]|=128<<24-R%32,C[(R+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,S.sigBytes=(C.length+1)*4,this._process();for(var k=this._hash,N=k.words,L=0;L<5;L++){var O=N[L];N[L]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return k},clone:function(){var S=a.clone.call(this);return S._hash=this._hash.clone(),S}});function g(S,C,A){return S^C^A}function y(S,C,A){return S&C|~S&A}function v(S,C,A){return(S|~C)^A}function b(S,C,A){return S&A|C&~A}function _(S,C,A){return S^(C|~A)}function E(S,C){return S<<C|S>>>32-C}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(SU)),SU.exports}var CU={exports:{}},ume;function BZ(){return ume||(ume=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,y=0;y<f;y++)m[y]^=1549556828,g[y]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(CU)),CU.exports}var AU={exports:{}},lme;function Vvt(){return lme||(lme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),FZ(),BZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),y=m.words,v=g.words,b=h.keySize,_=h.iterations;y.length<b;){var E=p.update(d).finalize(g);p.reset();for(var S=E.words,C=S.length,A=E,R=1;R<_;R++){A=p.finalize(A),p.reset();for(var k=A.words,N=0;N<C;N++)S[N]^=k[N]}m.concat(E),v[0]++}return m.sigBytes=b*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(AU)),AU.exports}var IU={exports:{}},cme;function Mv(){return cme||(cme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Hke(),BZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,y=h.keySize,v=h.iterations;g.length<y;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var b=1;b<v;b++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=y*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(IU)),IU.exports}var kU={exports:{}},fme;function xa(){return fme||(fme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Mv())})(Jt,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(k,N){return this.create(this._ENC_XFORM_MODE,k,N)},createDecryptor:function(k,N){return this.create(this._DEC_XFORM_MODE,k,N)},init:function(k,N,L){this.cfg=this.cfg.extend(L),this._xformMode=k,this._key=N,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var N=this._doFinalize();return N},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(N){return typeof N=="string"?R:S}return function(N){return{encrypt:function(L,O,B){return k(O).encrypt(N,L,O,B)},decrypt:function(L,O,B){return k(O).decrypt(N,L,O,B)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(k,N){return this.Encryptor.create(k,N)},createDecryptor:function(k,N){return this.Decryptor.create(k,N)},init:function(k,N){this._cipher=k,this._iv=N}}),g=p.CBC=function(){var k=m.extend();k.Encryptor=k.extend({processBlock:function(L,O){var B=this._cipher,q=B.blockSize;N.call(this,L,O,q),B.encryptBlock(L,O),this._prevBlock=L.slice(O,O+q)}}),k.Decryptor=k.extend({processBlock:function(L,O){var B=this._cipher,q=B.blockSize,H=L.slice(O,O+q);B.decryptBlock(L,O),N.call(this,L,O,q),this._prevBlock=H}});function N(L,O,B){var q,H=this._iv;H?(q=H,this._iv=r):q=this._prevBlock;for(var G=0;G<B;G++)L[O+G]^=q[G]}return k}(),y=i.pad={},v=y.Pkcs7={pad:function(k,N){for(var L=N*4,O=L-k.sigBytes%L,B=O<<24|O<<16|O<<8|O,q=[],H=0;H<O;H+=4)q.push(B);var G=a.create(q,O);k.concat(G)},unpad:function(k){var N=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=N}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var k;h.reset.call(this);var N=this.cfg,L=N.iv,O=N.mode;this._xformMode==this._ENC_XFORM_MODE?k=O.createEncryptor:(k=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,L&&L.words):(this._mode=k.call(O,this,L&&L.words),this._mode.__creator=k)},_doProcessBlock:function(k,N){this._mode.processBlock(k,N)},_doFinalize:function(){var k,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),N.unpad(k)),k},blockSize:128/32});var b=s.CipherParams=o.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),_=i.format={},E=_.OpenSSL={stringify:function(k){var N,L=k.ciphertext,O=k.salt;return O?N=a.create([1398893684,1701076831]).concat(O).concat(L):N=L,N.toString(c)},parse:function(k){var N,L=c.parse(k),O=L.words;return O[0]==1398893684&&O[1]==1701076831&&(N=a.create(O.slice(2,4)),O.splice(0,4),L.sigBytes-=16),b.create({ciphertext:L,salt:N})}},S=s.SerializableCipher=o.extend({cfg:o.extend({format:E}),encrypt:function(k,N,L,O){O=this.cfg.extend(O);var B=k.createEncryptor(L,O),q=B.finalize(N),H=B.cfg;return b.create({ciphertext:q,key:L,iv:H.iv,algorithm:k,mode:H.mode,padding:H.padding,blockSize:k.blockSize,formatter:O.format})},decrypt:function(k,N,L,O){O=this.cfg.extend(O),N=this._parse(N,O.format);var B=k.createDecryptor(L,O).finalize(N.ciphertext);return B},_parse:function(k,N){return typeof k=="string"?N.parse(k,this):k}}),C=i.kdf={},A=C.OpenSSL={execute:function(k,N,L,O,B){if(O||(O=a.random(64/8)),B)var q=d.create({keySize:N+L,hasher:B}).compute(k,O);else var q=d.create({keySize:N+L}).compute(k,O);var H=a.create(q.words.slice(N),L*4);return q.sigBytes=N*4,b.create({key:q,iv:H,salt:O})}},R=s.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:A}),encrypt:function(k,N,L,O){O=this.cfg.extend(O);var B=O.kdf.execute(L,k.keySize,k.ivSize,O.salt,O.hasher);O.iv=B.iv;var q=S.encrypt.call(this,k,N,B.key,O);return q.mixIn(B),q},decrypt:function(k,N,L,O){O=this.cfg.extend(O),N=this._parse(N,O.format);var B=O.kdf.execute(L,k.keySize,k.ivSize,N.salt,O.hasher);O.iv=B.iv;var q=S.decrypt.call(this,k,N,B.key,O);return q}})}()})}(kU)),kU.exports}var RU={exports:{}},dme;function Hvt(){return dme||(dme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(RU)),RU.exports}var PU={exports:{}},hme;function qvt(){return hme||(hme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(PU)),PU.exports}var DU={exports:{}},pme;function Wvt(){return pme||(pme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(DU)),DU.exports}var NU={exports:{}},mme;function Gvt(){return mme||(mme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(NU)),NU.exports}var OU={exports:{}},gme;function Yvt(){return gme||(gme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(OU)),OU.exports}var $U={exports:{}},yme;function Kvt(){return yme||(yme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}($U)),$U.exports}var LU={exports:{}},vme;function Xvt(){return vme||(vme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(LU)),LU.exports}var MU={exports:{}},bme;function Qvt(){return bme||(bme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(MU)),MU.exports}var FU={exports:{}},xme;function Jvt(){return xme||(xme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(FU)),FU.exports}var BU={exports:{}},_me;function Zvt(){return _me||(_me=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(BU)),BU.exports}var jU={exports:{}},wme;function ebt(){return wme||(wme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xa())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(jU)),jU.exports}var UU={exports:{}},Eme;function tbt(){return Eme||(Eme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),K_(),X_(),Mv(),xa())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var b=[],_=0;_<256;_++)_<128?b[_]=_<<1:b[_]=_<<1^283;for(var E=0,S=0,_=0;_<256;_++){var C=S^S<<1^S<<2^S<<3^S<<4;C=C>>>8^C&255^99,a[E]=C,u[C]=E;var A=b[E],R=b[A],k=b[R],N=b[C]*257^C*16843008;l[E]=N<<24|N>>>8,c[E]=N<<16|N>>>16,f[E]=N<<8|N>>>24,d[E]=N;var N=k*16843009^R*65537^A*257^E*16843008;h[C]=N<<24|N>>>8,p[C]=N<<16|N>>>16,m[C]=N<<8|N>>>24,g[C]=N,E?(E=A^b[b[b[k^A]]],S^=b[b[S]]):E=S=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=s.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var _=this._keyPriorReset=this._key,E=_.words,S=_.sigBytes/4,C=this._nRounds=S+6,A=(C+1)*4,R=this._keySchedule=[],k=0;k<A;k++)k<S?R[k]=E[k]:(b=R[k-1],k%S?S>6&&k%S==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=y[k/S|0]<<24),R[k]=R[k-S]^b);for(var N=this._invKeySchedule=[],L=0;L<A;L++){var k=A-L;if(L%4)var b=R[k];else var b=R[k-4];L<4||k<=4?N[L]=b:N[L]=h[a[b>>>24]]^p[a[b>>>16&255]]^m[a[b>>>8&255]]^g[a[b&255]]}}},encryptBlock:function(b,_){this._doCryptBlock(b,_,this._keySchedule,l,c,f,d,a)},decryptBlock:function(b,_){var E=b[_+1];b[_+1]=b[_+3],b[_+3]=E,this._doCryptBlock(b,_,this._invKeySchedule,h,p,m,g,u);var E=b[_+1];b[_+1]=b[_+3],b[_+3]=E},_doCryptBlock:function(b,_,E,S,C,A,R,k){for(var N=this._nRounds,L=b[_]^E[0],O=b[_+1]^E[1],B=b[_+2]^E[2],q=b[_+3]^E[3],H=4,G=1;G<N;G++){var K=S[L>>>24]^C[O>>>16&255]^A[B>>>8&255]^R[q&255]^E[H++],J=S[O>>>24]^C[B>>>16&255]^A[q>>>8&255]^R[L&255]^E[H++],F=S[B>>>24]^C[q>>>16&255]^A[L>>>8&255]^R[O&255]^E[H++],j=S[q>>>24]^C[L>>>16&255]^A[O>>>8&255]^R[B&255]^E[H++];L=K,O=J,B=F,q=j}var K=(k[L>>>24]<<24|k[O>>>16&255]<<16|k[B>>>8&255]<<8|k[q&255])^E[H++],J=(k[O>>>24]<<24|k[B>>>16&255]<<16|k[q>>>8&255]<<8|k[L&255])^E[H++],F=(k[B>>>24]<<24|k[q>>>16&255]<<16|k[L>>>8&255]<<8|k[O&255])^E[H++],j=(k[q>>>24]<<24|k[L>>>16&255]<<16|k[O>>>8&255]<<8|k[B&255])^E[H++];b[_]=K,b[_+1]=J,b[_+2]=F,b[_+3]=j},keySize:256/32});r.AES=s._createHelper(v)}(),n.AES})}(UU)),UU.exports}var zU={exports:{}},Tme;function nbt(){return Tme||(Tme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),K_(),X_(),Mv(),xa())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var y=this._key,v=y.words,b=[],_=0;_<56;_++){var E=u[_]-1;b[_]=v[E>>>5]>>>31-E%32&1}for(var S=this._subKeys=[],C=0;C<16;C++){for(var A=S[C]=[],R=c[C],_=0;_<24;_++)A[_/6|0]|=b[(l[_]-1+R)%28]<<31-_%6,A[4+(_/6|0)]|=b[28+(l[_+24]-1+R)%28]<<31-_%6;A[0]=A[0]<<1|A[0]>>>31;for(var _=1;_<7;_++)A[_]=A[_]>>>(_-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var k=this._invSubKeys=[],_=0;_<16;_++)k[_]=S[15-_]},encryptBlock:function(y,v){this._doCryptBlock(y,v,this._subKeys)},decryptBlock:function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},_doCryptBlock:function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var _=0;_<16;_++){for(var E=b[_],S=this._lBlock,C=this._rBlock,A=0,R=0;R<8;R++)A|=f[R][((C^E[R])&d[R])>>>0];this._lBlock=C,this._rBlock=S^A}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}function m(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),_=v.length<4?v.slice(0,2):v.slice(2,4),E=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=h.createEncryptor(s.create(b)),this._des2=h.createEncryptor(s.create(_)),this._des3=h.createEncryptor(s.create(E))},encryptBlock:function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},decryptBlock:function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(zU)),zU.exports}var VU={exports:{}},Sme;function rbt(){return Sme||(Sme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),K_(),X_(),Mv(),xa())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,y=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+y)%256;var v=h[p];h[p]=h[m],h[m]=v}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(VU)),VU.exports}var HU={exports:{}},Cme;function ibt(){return Cme||(Cme=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),K_(),X_(),Mv(),xa())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var y=h.words,v=y[0],b=y[1],_=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=_>>>16|E&4294901760,C=E<<16|_&65535;g[0]^=_,g[1]^=S,g[2]^=E,g[3]^=C,g[4]^=_,g[5]^=S,g[6]^=E,g[7]^=C;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(HU)),HU.exports}var qU={exports:{}},Ame;function sbt(){return Ame||(Ame=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),K_(),X_(),Mv(),xa())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var y=h.words,v=y[0],b=y[1],_=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=_>>>16|E&4294901760,C=E<<16|_&65535;m[0]^=_,m[1]^=S,m[2]^=E,m[3]^=C,m[4]^=_,m[5]^=S,m[6]^=E,m[7]^=C;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(qU)),qU.exports}var WU={exports:{}},Ime;function obt(){return Ime||(Ime=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),K_(),X_(),Mv(),xa())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,y){let v=y>>24&255,b=y>>16&255,_=y>>8&255,E=y&255,S=g.sbox[0][v]+g.sbox[1][b];return S=S^g.sbox[2][_],S=S+g.sbox[3][E],S}function d(g,y,v){let b=y,_=v,E;for(let S=0;S<a;++S)b=b^g.pbox[S],_=f(g,b)^_,E=b,b=_,_=E;return E=b,b=_,_=E,_=_^g.pbox[a],b=b^g.pbox[a+1],{left:b,right:_}}function h(g,y,v){let b=y,_=v,E;for(let S=a+1;S>1;--S)b=b^g.pbox[S],_=f(g,b)^_,E=b,b=_,_=E;return E=b,b=_,_=E,_=_^g.pbox[1],b=b^g.pbox[0],{left:b,right:_}}function p(g,y,v){for(let C=0;C<4;C++){g.sbox[C]=[];for(let A=0;A<256;A++)g.sbox[C][A]=l[C][A]}let b=0;for(let C=0;C<a+2;C++)g.pbox[C]=u[C]^y[b],b++,b>=v&&(b=0);let _=0,E=0,S=0;for(let C=0;C<a+2;C+=2)S=d(g,_,E),_=S.left,E=S.right,g.pbox[C]=_,g.pbox[C+1]=E;for(let C=0;C<4;C++)for(let A=0;A<256;A+=2)S=d(g,_,E),_=S.left,E=S.right,g.sbox[C][A]=_,g.sbox[C][A+1]=E;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;p(c,y,v)}},encryptBlock:function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},decryptBlock:function(g,y){var v=h(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(WU)),WU.exports}(function(e,t){(function(n,r,i){e.exports=r(Fr(),VF(),Lvt(),Mvt(),K_(),Fvt(),X_(),Hke(),FZ(),Bvt(),qke(),jvt(),Uvt(),zvt(),BZ(),Vvt(),Mv(),xa(),Hvt(),qvt(),Wvt(),Gvt(),Yvt(),Kvt(),Xvt(),Qvt(),Jvt(),Zvt(),ebt(),tbt(),nbt(),rbt(),ibt(),sbt(),obt())})(Jt,function(n){return n})})(zke);var dW=zke.exports;function oh(e){const t=dW.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function abt(e){const t=dW.AES.decrypt(atob(e),"notSecret").toString(dW.enc.Utf8);return parseInt(t,10)}function Q_(){const{studyId:e}=lm();return`${e}`}function wd(){const{index:e}=lm();return e===void 0?0:e.startsWith("reviewer-")?e:abt(e)}function Ed(){const e=wd(),t=MZ();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var B$={exports:{}};B$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",_="[object RegExp]",E="[object Set]",S="[object String]",C="[object Undefined]",A="[object WeakMap]",R="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",L="[object Float64Array]",O="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",H="[object Uint8Array]",G="[object Uint8ClampedArray]",K="[object Uint16Array]",J="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,M={};M[N]=M[L]=M[O]=M[B]=M[q]=M[H]=M[G]=M[K]=M[J]=!0,M[a]=M[u]=M[R]=M[c]=M[k]=M[f]=M[d]=M[h]=M[m]=M[g]=M[v]=M[_]=M[E]=M[S]=M[A]=!1;var V=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,Q=typeof self=="object"&&self&&self.Object===Object&&self,se=V||Q||Function("return this")(),be=t&&!t.nodeType&&t,he=be&&!0&&e&&!e.nodeType&&e,Ae=he&&he.exports===be,Ne=Ae&&V.process,rt=function(){try{var le=he&&he.require&&he.require("util").types;return le||Ne&&Ne.binding&&Ne.binding("util")}catch{}}(),Re=rt&&rt.isTypedArray;function Tt(le,ye,Be){switch(Be.length){case 0:return le.call(ye);case 1:return le.call(ye,Be[0]);case 2:return le.call(ye,Be[0],Be[1]);case 3:return le.call(ye,Be[0],Be[1],Be[2])}return le.apply(ye,Be)}function Ze(le,ye){for(var Be=-1,Ht=Array(le);++Be<le;)Ht[Be]=ye(Be);return Ht}function It(le){return function(ye){return le(ye)}}function mt(le,ye){return le==null?void 0:le[ye]}function Se(le,ye){return function(Be){return le(ye(Be))}}var Fe=Array.prototype,st=Function.prototype,yt=Object.prototype,Pt=se["__core-js_shared__"],Je=st.toString,we=yt.hasOwnProperty,kt=function(){var le=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}(),Rt=yt.toString,Ee=Je.call(Object),Oe=RegExp("^"+Je.call(we).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=Ae?se.Buffer:void 0,xt=se.Symbol,jt=se.Uint8Array;ot&&ot.allocUnsafe;var Un=Se(Object.getPrototypeOf,Object),dr=Object.create,Sr=yt.propertyIsEnumerable,xi=Fe.splice,Sn=xt?xt.toStringTag:void 0,zn=function(){try{var le=at(Object,"defineProperty");return le({},"",{}),le}catch{}}(),hr=ot?ot.isBuffer:void 0,gr=Math.max,Qo=Date.now,ts=at(se,"Map"),hs=at(Object,"create"),Ns=function(){function le(){}return function(ye){if(!Dd(ye))return{};if(dr)return dr(ye);le.prototype=ye;var Be=new le;return le.prototype=void 0,Be}}();function Vr(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function ps(){this.__data__=hs?hs(null):{},this.size=0}function kc(le){var ye=this.has(le)&&delete this.__data__[le];return this.size-=ye?1:0,ye}function Jo(le){var ye=this.__data__;if(hs){var Be=ye[le];return Be===r?void 0:Be}return we.call(ye,le)?ye[le]:void 0}function Mu(le){var ye=this.__data__;return hs?ye[le]!==void 0:we.call(ye,le)}function Br(le,ye){var Be=this.__data__;return this.size+=this.has(le)?0:1,Be[le]=hs&&ye===void 0?r:ye,this}Vr.prototype.clear=ps,Vr.prototype.delete=kc,Vr.prototype.get=Jo,Vr.prototype.has=Mu,Vr.prototype.set=Br;function ki(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function mi(){this.__data__=[],this.size=0}function Qs(le){var ye=this.__data__,Be=yr(ye,le);if(Be<0)return!1;var Ht=ye.length-1;return Be==Ht?ye.pop():xi.call(ye,Be,1),--this.size,!0}function oi(le){var ye=this.__data__,Be=yr(ye,le);return Be<0?void 0:ye[Be][1]}function Ri(le){return yr(this.__data__,le)>-1}function me(le,ye){var Be=this.__data__,Ht=yr(Be,le);return Ht<0?(++this.size,Be.push([le,ye])):Be[Ht][1]=ye,this}ki.prototype.clear=mi,ki.prototype.delete=Qs,ki.prototype.get=oi,ki.prototype.has=Ri,ki.prototype.set=me;function ue(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function ge(){this.size=0,this.__data__={hash:new Vr,map:new(ts||ki),string:new Vr}}function Me(le){var ye=it(this,le).delete(le);return this.size-=ye?1:0,ye}function Le(le){return it(this,le).get(le)}function _t(le){return it(this,le).has(le)}function Ut(le,ye){var Be=it(this,le),Ht=Be.size;return Be.set(le,ye),this.size+=Be.size==Ht?0:1,this}ue.prototype.clear=ge,ue.prototype.delete=Me,ue.prototype.get=Le,ue.prototype.has=_t,ue.prototype.set=Ut;function dn(le){var ye=this.__data__=new ki(le);this.size=ye.size}function Zn(){this.__data__=new ki,this.size=0}function ur(le){var ye=this.__data__,Be=ye.delete(le);return this.size=ye.size,Be}function On(le){return this.__data__.get(le)}function Cr(le){return this.__data__.has(le)}function ai(le,ye){var Be=this.__data__;if(Be instanceof ki){var Ht=Be.__data__;if(!ts||Ht.length<n-1)return Ht.push([le,ye]),this.size=++Be.size,this;Be=this.__data__=new ue(Ht)}return Be.set(le,ye),this.size=Be.size,this}dn.prototype.clear=Zn,dn.prototype.delete=ur,dn.prototype.get=On,dn.prototype.has=Cr,dn.prototype.set=ai;function an(le,ye){var Be=Rd(le),Ht=!Be&&Ka(le),ir=!Be&&!Ht&&Pd(le),Wr=!Be&&!Ht&&!ir&&Cw(le),_i=Be||Ht||ir||Wr,un=_i?Ze(le.length,String):[],ui=un.length;for(var wi in le)_i&&(wi=="length"||ir&&(wi=="offset"||wi=="parent")||Wr&&(wi=="buffer"||wi=="byteLength"||wi=="byteOffset")||Lt(wi,ui))||un.push(wi);return un}function Ar(le,ye,Be){(Be!==void 0&&!Fu(le[ye],Be)||Be===void 0&&!(ye in le))&&Pi(le,ye,Be)}function Jr(le,ye,Be){var Ht=le[ye];(!(we.call(le,ye)&&Fu(Ht,Be))||Be===void 0&&!(ye in le))&&Pi(le,ye,Be)}function yr(le,ye){for(var Be=le.length;Be--;)if(Fu(le[Be][0],ye))return Be;return-1}function Pi(le,ye,Be){ye=="__proto__"&&zn?zn(le,ye,{configurable:!0,enumerable:!0,value:Be,writable:!0}):le[ye]=Be}var go=qe();function Di(le){return le==null?le===void 0?C:y:Sn&&Sn in Object(le)?ut(le):Io(le)}function Co(le){return Zo(le)&&Di(le)==a}function ns(le){if(!Dd(le)||er(le))return!1;var ye=ob(le)?Oe:j;return ye.test(ib(le))}function rs(le){return Zo(le)&&Sw(le.length)&&!!M[Di(le)]}function Ao(le){if(!Dd(le))return vr(le);var ye=Hr(le),Be=[];for(var Ht in le)Ht=="constructor"&&(ye||!we.call(le,Ht))||Be.push(Ht);return Be}function Ea(le,ye,Be,Ht,ir){le!==ye&&go(ye,function(Wr,_i){if(ir||(ir=new dn),Dd(Wr))yo(le,ye,_i,Be,Ea,Ht,ir);else{var un=Ht?Ht(kd(le,_i),Wr,_i+"",le,ye,ir):void 0;un===void 0&&(un=Wr),Ar(le,_i,un)}},Km)}function yo(le,ye,Be,Ht,ir,Wr,_i){var un=kd(le,Be),ui=kd(ye,Be),wi=_i.get(ui);if(wi){Ar(le,Be,wi);return}var ko=Wr?Wr(un,ui,Be+"",le,ye,_i):void 0,Nd=ko===void 0;if(Nd){var Os=Rd(ui),Xm=!Os&&Pd(ui),Qm=!Os&&!Xm&&Cw(ui);ko=ui,Os||Xm||Qm?Rd(un)?ko=un:sb(un)?ko=_e(un):Xm?(Nd=!1,ko=ee(ui)):Qm?(Nd=!1,ko=oe(ui)):ko=[]:FC(ui)||Ka(ui)?(ko=un,Ka(un)?ko=Ym(un):(!Dd(un)||ob(un))&&(ko=vt(ui))):Nd=!1}Nd&&(_i.set(ui,ko),ir(ko,ui,Ht,Wr,_i),_i.delete(ui)),Ar(le,Be,ko)}function Cl(le,ye){return sy(Rc(le,ye,Ir),le+"")}var Sf=zn?function(le,ye){return zn(le,"toString",{configurable:!0,enumerable:!1,value:qr(ye),writable:!0})}:Ir;function ee(le,ye){return le.slice()}function pe(le){var ye=new le.constructor(le.byteLength);return new jt(ye).set(new jt(le)),ye}function oe(le,ye){var Be=pe(le.buffer);return new le.constructor(Be,le.byteOffset,le.length)}function _e(le,ye){var Be=-1,Ht=le.length;for(ye||(ye=Array(Ht));++Be<Ht;)ye[Be]=le[Be];return ye}function Ce(le,ye,Be,Ht){var ir=!Be;Be||(Be={});for(var Wr=-1,_i=ye.length;++Wr<_i;){var un=ye[Wr],ui=void 0;ui===void 0&&(ui=le[un]),ir?Pi(Be,un,ui):Jr(Be,un,ui)}return Be}function xe(le){return Cl(function(ye,Be){var Ht=-1,ir=Be.length,Wr=ir>1?Be[ir-1]:void 0,_i=ir>2?Be[2]:void 0;for(Wr=le.length>3&&typeof Wr=="function"?(ir--,Wr):void 0,_i&&$n(Be[0],Be[1],_i)&&(Wr=ir<3?void 0:Wr,ir=1),ye=Object(ye);++Ht<ir;){var un=Be[Ht];un&&le(ye,un,Ht,Wr)}return ye})}function qe(le){return function(ye,Be,Ht){for(var ir=-1,Wr=Object(ye),_i=Ht(ye),un=_i.length;un--;){var ui=_i[++ir];if(Be(Wr[ui],ui,Wr)===!1)break}return ye}}function it(le,ye){var Be=le.__data__;return Kt(ye)?Be[typeof ye=="string"?"string":"hash"]:Be.map}function at(le,ye){var Be=mt(le,ye);return ns(Be)?Be:void 0}function ut(le){var ye=we.call(le,Sn),Be=le[Sn];try{le[Sn]=void 0;var Ht=!0}catch{}var ir=Rt.call(le);return Ht&&(ye?le[Sn]=Be:delete le[Sn]),ir}function vt(le){return typeof le.constructor=="function"&&!Hr(le)?Ns(Un(le)):{}}function Lt(le,ye){var Be=typeof le;return ye=ye??o,!!ye&&(Be=="number"||Be!="symbol"&&W.test(le))&&le>-1&&le%1==0&&le<ye}function $n(le,ye,Be){if(!Dd(Be))return!1;var Ht=typeof ye;return(Ht=="number"?oy(Be)&&Lt(ye,Be.length):Ht=="string"&&ye in Be)?Fu(Be[ye],le):!1}function Kt(le){var ye=typeof le;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?le!=="__proto__":le===null}function er(le){return!!kt&&kt in le}function Hr(le){var ye=le&&le.constructor,Be=typeof ye=="function"&&ye.prototype||yt;return le===Be}function vr(le){var ye=[];if(le!=null)for(var Be in Object(le))ye.push(Be);return ye}function Io(le){return Rt.call(le)}function Rc(le,ye,Be){return ye=gr(ye===void 0?le.length-1:ye,0),function(){for(var Ht=arguments,ir=-1,Wr=gr(Ht.length-ye,0),_i=Array(Wr);++ir<Wr;)_i[ir]=Ht[ye+ir];ir=-1;for(var un=Array(ye+1);++ir<ye;)un[ir]=Ht[ir];return un[ye]=Be(_i),Tt(le,this,un)}}function kd(le,ye){if(!(ye==="constructor"&&typeof le[ye]=="function")&&ye!="__proto__")return le[ye]}var sy=ip(Sf);function ip(le){var ye=0,Be=0;return function(){var Ht=Qo(),ir=s-(Ht-Be);if(Be=Ht,ir>0){if(++ye>=i)return arguments[0]}else ye=0;return le.apply(void 0,arguments)}}function ib(le){if(le!=null){try{return Je.call(le)}catch{}try{return le+""}catch{}}return""}function Fu(le,ye){return le===ye||le!==le&&ye!==ye}var Ka=Co(function(){return arguments}())?Co:function(le){return Zo(le)&&we.call(le,"callee")&&!Sr.call(le,"callee")},Rd=Array.isArray;function oy(le){return le!=null&&Sw(le.length)&&!ob(le)}function sb(le){return Zo(le)&&oy(le)}var Pd=hr||Iw;function ob(le){if(!Dd(le))return!1;var ye=Di(le);return ye==h||ye==p||ye==l||ye==b}function Sw(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=o}function Dd(le){var ye=typeof le;return le!=null&&(ye=="object"||ye=="function")}function Zo(le){return le!=null&&typeof le=="object"}function FC(le){if(!Zo(le)||Di(le)!=v)return!1;var ye=Un(le);if(ye===null)return!0;var Be=we.call(ye,"constructor")&&ye.constructor;return typeof Be=="function"&&Be instanceof Be&&Je.call(Be)==Ee}var Cw=Re?It(Re):rs;function Ym(le){return Ce(le,Km(le))}function Km(le){return oy(le)?an(le):Ao(le)}var Aw=xe(function(le,ye,Be){Ea(le,ye,Be)});function qr(le){return function(){return le}}function Ir(le){return le}function Iw(){return!1}e.exports=Aw})(B$,B$.exports);var ubt=B$.exports;const jZ=zh(ubt);function K0(e){return structuredClone(e)}function UZ(){const e=wd(),n=`${Ed()}_${e}`;return Xr(i=>i.answers[n])}const Wke=P.createContext(null);function lbt(){const e=P.useContext(Wke);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function yg(){return Xr(e=>e.config)}function jS(){const[e]=Ov();return!!e.get("participantId")}function kme(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Gke(){const e=wd(),t=MZ(),r=`${Ed()}_${e}`,i=Xr(R=>R.trialValidation),s=Xr(R=>R.sequence),o=Xr(R=>R.answers),a=Xr(R=>R.modes),u=Sc(),{saveTrialAnswer:l,setIframeAnswers:c,setMatrixAnswersRadio:f,setMatrixAnswersCheckbox:d}=hl(),{storageEngine:h}=po(),p=Q_(),m=P.useMemo(()=>a.dataCollectionEnabled,[a]),g=Dvt(r),y=jS(),v=typeof e!="number"||y||!g,b=UZ(),_=Hh(),E=yg(),S=P.useMemo(()=>Date.now(),[]),C=lbt(),A=P.useCallback((R=!0)=>{if(typeof e!="number")return;const k=K0(i[r]),N=Object.values(k).reduce((j,W)=>Object.hasOwn(W,"values")?{...j,...W.values}:j,{}),{provenanceGraph:L}=k,O=Date.now(),{incorrectAnswers:B,helpButtonClickedCount:q}=b,H=C&&"current"in C&&C.current?C.current.splice(0,C.current.length):[];if(m&&b.endTime===-1){const j={answer:R?N:{},startTime:S,endTime:O,incorrectAnswers:B,provenanceGraph:L,windowEvents:H,timedOut:!R,helpButtonClickedCount:q};u(l({identifier:r,...j})),h&&h.saveAnswers({...o,[r]:j}),u(c({})),u(d(null)),u(f(null))}let G=e+1;const K=$Z(s,e),J=K!==null&&K.some(j=>Object.hasOwn(j.currentBlock,"skip")&&j.currentBlock.skip!==void 0),F={...o,[r]:{answer:N,startTime:S,endTime:O,provenanceGraph:L,windowEvents:H}};J&&[...K.flatMap(W=>W.currentBlock.skip?W.currentBlock.skip.map(M=>({...M,firstIndex:W.firstIndex,lastIndex:W.lastIndex})):[])].some(W=>{let M=!1;const V=Object.fromEntries(Object.entries(F).filter(([se])=>{const be=parseInt(se.slice(se.lastIndexOf("_")+1),10);return be>=W.firstIndex&&be<=e})),Q=W.check!=="block"?Object.entries(V).filter(([se])=>se.slice(0,se.lastIndexOf("_"))===W.name):Object.entries(V);if(Q.length===0)return!1;if(Q.some(([se,be])=>!be))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(W,null,2)}`);if(W.check==="response"||W.check==="responses"){const[se,be]=Q[0];W.check==="response"?M=W.comparison==="equal"?W.value===be.answer[W.responseId]:W.value!==be.answer[W.responseId]:M=!kme(be.answer,se,E.components[se.slice(0,se.lastIndexOf("_"))],E)}else if(W.check==="block"||W.check==="repeatedComponent"){if(Q.length<W.value)return!1;const se=Q.map(([Ae,Ne])=>kme(Ne.answer,Ae,E.components[Ae.slice(0,Ae.lastIndexOf("_"))],E)),be=se.filter(Ae=>Ae).length,he=se.length-be;M=W.condition==="numCorrect"&&be===W.value||W.condition==="numIncorrect"&&he===W.value}if(M){const se=t.indexOf(W.to),be=se===-1?Rvt(s,W.to):-1;return G=se===-1?be:se,!0}return!1}),_(`/${p}/${oh(G)}${window.location.search}`)},[e,i,r,C,m,b,s,o,S,_,p,u,l,h,c,d,f,E,t]);return{isNextDisabled:v,goToNextStep:A}}function cbt({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=Gke(),o=yg(),a=Hh(),u=P.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=P.useState(void 0);P.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),P.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=P.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return w.jsxs(w.Fragment,{children:[w.jsx(on,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&w.jsxs(Y0,{mt:"md",title:"Please wait",color:"blue",icon:w.jsx(aZ,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?w.jsxs(Y0,{mt:"md",title:"Next button disables soon",color:"yellow",icon:w.jsx(sk,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&w.jsxs(Y0,{mt:"md",title:"Next button disabled",color:"red",icon:w.jsx(sk,{}),children:["The next button has timed out and is now disabled.",w.jsx(bi,{justify:"right",mt:"sm",children:w.jsx(on,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function fbt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const dbt=typeof window<"u"?P.useLayoutEffect:P.useEffect;function Sa(e,t){dbt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function hbt(e,t){e&&fbt(e),Sa(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Sa(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Sa(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Sa(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Sa(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Sa(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Sa(`mantine-form:${e}:clear-errors`,t.clearErrors),Sa(`mantine-form:${e}:reset`,t.reset),Sa(`mantine-form:${e}:validate`,t.validate),Sa(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Sa(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Sa(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Sa(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Sa(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Sa(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Sa(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Sa(`mantine-form:${e}:reset-touched`,t.resetTouched)}function pbt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function hW(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function mbt(e){const[t,n]=P.useState(hW(e)),r=P.useRef(t),i=P.useCallback(u=>{n(l=>{const c=hW(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=P.useCallback(()=>i({}),[]),o=P.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=P.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Yke(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Rme(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Pme(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Yke(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Rme(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Rme(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function gbt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Dme(e,t,n){typeof n.value=="object"&&(n.value=YE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function YE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(YE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(YE(a),YE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(YE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Dme(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Dme(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Kke(e){return typeof e!="string"?[]:e.split(".")}function Jl(e,t){const n=Kke(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function HF(e,t,n){const r=Kke(e);if(r.length===0)return n;const i=YE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function ybt(e,{from:t,to:n},r){const i=Jl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),HF(e,s,r)}function vbt(e,t,n,r){const i=Jl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),HF(e,s,r)}function bbt(e,t,n){const r=Jl(e,n);return Array.isArray(r)?HF(e,r.filter((i,s)=>s!==t),n):n}function xbt({$values:e,$errors:t,$status:n}){const r=P.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>gbt(o,a,u)),e.setValues({values:ybt(o,a,e.refValues.current),updateState:!0})},[]),i=P.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Pme(o,a,u,-1)),e.setValues({values:bbt(o,a,e.refValues.current),updateState:!0})},[]),s=P.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Pme(o,u,l,1)),e.setValues({values:vbt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var zZ=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const W4=zh(zZ);function iO(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function _bt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=P.useState(t),[o,a]=P.useState(e),u=P.useRef(t),l=P.useRef(e),c=P.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&s(S)},[]),f=P.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=P.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=P.useCallback((E,S)=>{c(C=>iO(C,E)===S?C:{...C,[E]:S})},[]),m=P.useCallback((E,S)=>{f(C=>iO(C,E)===S?C:{...C,[E]:S})},[]),g=P.useCallback(E=>iO(u.current,E),[]),y=P.useCallback(E=>f(S=>{if(typeof E!="string")return S;const C=Yke(E,S);return delete C[E],W4(C,S)?S:C}),[]),v=P.useCallback(E=>{if(E){const C=Jl(E,l.current);if(typeof C=="boolean")return C;const A=Jl(E,r.refValues.current),R=Jl(E,r.valuesSnapshot.current);return!W4(A,R)}return Object.keys(l.current).length>0?iO(l.current):!W4(r.refValues.current,r.valuesSnapshot.current)},[]),b=P.useCallback(()=>l.current,[]),_=P.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:_}}function wbt({initialValues:e,onValuesChange:t,mode:n}){const r=P.useRef(!1),[i,s]=P.useState(e||{}),o=P.useRef(i),a=P.useRef(i),u=P.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,_=y?{...v,...b}:b;o.current=_,g&&s(_),t==null||t(_,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:_,previousValues:v}))},[t]),l=P.useCallback(p=>{var y;const m=Jl(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=HF(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(_=>_({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=P.useCallback(p=>{a.current=p},[]),f=P.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=P.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=P.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Ebt({$status:e}){const t=P.useRef({}),n=P.useCallback((i,s)=>{P.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=P.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Jl(i,o.previousValues),value:Jl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Nme(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Ome(e){const t=hW(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function pW(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Jl(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>pW(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||pW(o,t,a,i)),i},r)}function mW(e,t){return Ome(typeof e=="function"?e(t):pW(e,t))}function sO(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=mW(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Tbt="__MANTINE_FORM_INDEX__";function $me(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Tbt}`)):!1:!1}function Xke({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=mbt(r),p=wbt({initialValues:n,onValuesChange:l,mode:t}),m=_bt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=xbt({$values:p,$errors:h,$status:m}),y=Ebt({$status:m}),[v,b]=P.useState(0),[_,E]=P.useState({}),S=P.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(F=>F+1)},[]),C=P.useCallback(F=>{p.initialize(F,()=>t==="uncontrolled"&&b(j=>j+1))},[]),A=P.useCallback((F,j,W)=>{const M=$me(F,a);m.clearFieldDirty(F),m.setFieldTouched(F,!0),!M&&o&&h.clearFieldError(F),p.setFieldValue({path:F,value:j,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(F),M?V=>{const Q=sO(F,d,V.updatedValues);Q.hasError?h.setFieldError(F,Q.error):h.clearFieldError(F)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(V=>({...V,[F]:(V[F]||0)+1})):null]})},[l,d]),R=P.useCallback(F=>{const j=p.refValues.current;p.setValues({values:F,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const M=Jl(W,p.refValues.current),V=Jl(W,j);M!==V&&y.getFieldSubscribers(W).forEach(Q=>Q({previousValues:j,updatedValues:p.refValues.current}))})},[l,o]),k=P.useCallback(()=>{const F=mW(d,p.refValues.current);return h.setErrors(F.errors),F},[d]),N=P.useCallback(F=>{const j=sO(F,d,p.refValues.current);return j.hasError?h.setFieldError(F,j.error):h.clearFieldError(F),j},[d]),L=(F,{type:j="input",withError:W=!0,withFocus:M=!0,...V}={})=>{const se={onChange:pbt(be=>A(F,be,{forceUpdate:!1})),"data-path":Nme(e,F)};return W&&(se.error=h.errorsState[F]),j==="checkbox"?se[t==="controlled"?"checked":"defaultChecked"]=Jl(F,p.refValues.current):se[t==="controlled"?"value":"defaultValue"]=Jl(F,p.refValues.current),M&&(se.onFocus=()=>m.setFieldTouched(F,!0),se.onBlur=()=>{if($me(F,u)){const be=sO(F,d,p.refValues.current);be.hasError?h.setFieldError(F,be.error):h.clearFieldError(F)}}),Object.assign(se,f==null?void 0:f({inputProps:se,field:F,options:{type:j,withError:W,withFocus:M,...V},form:J}))},O=(F,j)=>W=>{W==null||W.preventDefault();const M=k();M.hasErrors?j==null||j(M.errors,p.refValues.current,W):F==null||F(c(p.refValues.current),W)},B=F=>c(F||p.refValues.current),q=P.useCallback(F=>{F.preventDefault(),S()},[]),H=P.useCallback(F=>F?!sO(F,d,p.refValues.current).hasError:!mW(d,p.refValues.current).hasErrors,[d]),G=F=>`${v}-${F}-${_[F]||0}`,K=P.useCallback(F=>document.querySelector(`[data-path="${Nme(e,F)}"]`),[]),J={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:C,setValues:R,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:k,validateField:N,getInputProps:L,onSubmit:O,onReset:q,isValid:H,getTransformedValues:B,key:G,getInputNode:K};return hbt(e,J),J}function Sbt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Cbt(e){return Sbt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Qke(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Abt=new URLSearchParams(window.location.search),Ibt=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=Abt.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s}}}),{...n}},kbt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(i=>i!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?Qke(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Rbt(e,t,n){const[r,i]=P.useState(null),s=Xke({initialValues:Ibt(e,n),validate:kbt(e)});return P.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function J_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=Qke(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Pbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return w.jsx(Ql.Group,{label:w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:s,required:o})})]}),description:u,...n,error:J_(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsx(bi,{mt:"xs",children:l.map(c=>w.jsx(Ql,{disabled:t,value:c.value,label:c.label},c.value))})})}function Dbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return w.jsx(PS,{disabled:t,label:w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:J_(e,n,c)})}function Nbt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return w.jsx(Ys.Wrapper,{label:w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${n}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&w.jsx(io,{children:Array.isArray(t.value)?t.value.map(a=>w.jsx(io.Item,{children:a},a)):w.jsx(io.Item,{children:t.value})})})}function Jke({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f}=e,d=u.map(h=>typeof h=="string"?{value:h,label:h}:h);return w.jsx(pg.Group,{name:`radioInput${e.id}`,label:w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:o,required:a})})]}),description:f,...n,error:J_(e,n,d),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsxs(bi,{mt:"md",gap:"lg",style:{display:"flex",alignItems:"flex-end",justifyContent:s?"space-around":"inherit"},children:[l?w.jsx(ze,{children:l}):null,d.map(h=>w.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[w.jsx(ze,{children:h.label}),w.jsx(pg,{disabled:t,value:h.value,label:h.label,styles:{label:{display:"none"}}})]},h.label)),w.jsx(ze,{children:c})]})},e.id)}function Obt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return w.jsx(Jke,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function $bt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return w.jsx(FJ,{disabled:t,placeholder:l,label:w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:J_(e,n)})}function Lbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=P.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=J_(e,n);return w.jsx(Ys.Wrapper,{label:w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsx(z_,{disabled:t,marks:a,min:l,max:c,...n,h:40})})}function Mbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return w.jsx(L0,{disabled:t,placeholder:s,label:w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:J_(e,n)})}function Fbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return w.jsx(SJ,{disabled:t,placeholder:s,label:w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:J_(e,n)})}function Bbt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return w.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>w.jsx(Ql,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function jbt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return w.jsx(pg.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:w.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>w.jsx(pg,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function Ubt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=hl(),a=Sc(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(b=>({value:b,label:b})):u.map(b=>typeof b=="string"?{value:b,label:b}:b),p=l.map(b=>typeof b=="string"?{value:b,label:b}:b),m=(b,_)=>{const E={type:"radio",questionKey:_,val:b,responseId:e.id};a(s(E))},g=(b,_,E)=>{const S=b.target.checked,C={questionKey:_,responseId:e.id,value:E.value,label:E.label,isChecked:S,choiceOptions:h};a(o(C))},y=h.length,v=p.length;return w.jsxs(w.Fragment,{children:[w.jsxs(qt,{direction:"row",wrap:"nowrap",gap:0,children:[i&&w.jsx(ke,{style:{minWidth:"fit-content"},children:`${n}. `}),w.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(ku,{text:c,required:f})})]}),w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[w.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),w.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((b,_)=>w.jsx(ze,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:b.label},`choice-${_}-label`))}),w.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v}, 1fr)`},children:p.map((b,_)=>w.jsx(ze,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:b.label},`question-${_}-label`))}),w.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v},1fr)`},children:p.map((b,_)=>w.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?w.jsx(jbt,{disabled:r,idx:_,question:b,answer:t,_choices:h,_n:y,onChange:m,response:e}):w.jsx(Bbt,{disabled:r,idx:_,question:b,answer:t,_choices:h,_n:y,onChange:g})},`question-${_}`))})]})]})}function zbt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=Ov(),u=yg().uiConfig.enumerateQuestions??!1,l=P.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return w.jsxs(ke,{mb:"md",children:[e.type==="numerical"&&w.jsx($bt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&w.jsx(Mbt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&w.jsx(Fbt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&w.jsx(Obt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&w.jsx(Dbt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&w.jsx(Lbt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&w.jsx(Jke,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&w.jsx(Pbt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&w.jsx(Nbt,{response:e,answer:i,index:r,enumerateQuestions:u}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&w.jsx(Ubt,{disabled:l,response:e,answer:i,index:r,enumerateQuestions:u})]})}function j$({config:e,location:t,status:n,style:r}){var F;const{storageEngine:i}=po(),s=Sc(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=hl(),c=wd(),f=Ed(),d=n==null?void 0:n.answer,h=Q_(),p=Hh(),m=e,g=P.useMemo(()=>{var j;return((j=m==null?void 0:m.response)==null?void 0:j.filter(W=>W.location?W.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),y=P.useMemo(()=>g.map(j=>({...j,required:j.required===void 0?!0:j.required})),[g]),v=Rbt(y,c,d||{}),[b,_]=P.useState(void 0),E=Xr(j=>j.iframeAnswers),S=Xr(j=>j.iframeProvenance),C=Xr(j=>j.matrixAnswers),A=(m==null?void 0:m.provideFeedback)&&(((F=m==null?void 0:m.correctAnswer)==null?void 0:F.length)||0)>0,R=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[k,N]=P.useState(0),L=(m==null?void 0:m.trainingAttempts)||2,[O,B]=P.useState(!1),q=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");P.useEffect(()=>{const j=y.find(W=>W.type==="iframe");if(E&&j){const W=j.id;v.setValues({...v.values,[W]:E[W]})}},[E]),P.useEffect(()=>{S&&_(S)},[S]),P.useEffect(()=>{const j=y.filter(W=>W.type==="matrix-radio"||W.type==="matrix-checkbox");if(C&&j.length>0){const W={...v.values};j.forEach(M=>{const{id:V}=M;W[V]={...v.getInputProps(V).value,...C[V]}}),v.setValues(W)}},[C]),P.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:v.isValid(),values:K0(v.values),provenanceGraph:b}))},[v.values,f,c,t,s,o,b]);const[H,G]=P.useState(Object.fromEntries(y.map(j=>[j.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),K=(j,W,M,V,Q)=>{G(se=>({...se,[j]:{visible:W,title:M,message:V,color:Q}}))},J=()=>{const j=k+1;N(j);const W=Object.fromEntries(y.map(M=>{var se,be;const V=(be=(se=m.correctAnswer)==null?void 0:se.find(he=>he.id===M.id))==null?void 0:be.answer,Q=v.values[M.id];return[M.id,Array.isArray(Q)?typeof V=="string"?Q.length===1&&V===Q[0]:Q.length===V.length&&Q.every(he=>V.includes(he)):V===Q]}));A&&(y.forEach(M=>{var V;if(W[M.id]&&!((V=H[M.id])!=null&&V.message.includes("You've failed to answer this question correctly")))K(M.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:M.id,answer:v.values[M.id]}));let Q="";L===-1?Q="Please try again.":j>=L?(Q=`You didn't answer this question correctly after ${L} attempts. ${R?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!R&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./__trainingFailed")},5e3)})):L-j===1?Q="Please try again. You have 1 attempt left.":Q=`Please try again. You have ${L-j} attempts left.`,K(M.id,!0,"Incorrect Answer",Q,"red")}}),B(R&&j>=L||Object.values(W).every(M=>M)&&j<=L))};return w.jsxs("div",{style:r,children:[y.map((j,W)=>{var V,Q;const M=(Q=(V=m.correctAnswer)==null?void 0:V.find(se=>se.id===j.id))==null?void 0:Q.answer;return w.jsx(ni.Fragment,{children:j.hidden?"":w.jsxs(w.Fragment,{children:[w.jsx(zbt,{storedAnswer:d?d[j.id]:void 0,answer:{...v.getInputProps(j.id,{type:j.type==="checkbox"?"checkbox":"input"})},response:j,index:W+1}),H[j.id].visible&&w.jsxs(Y0,{mb:"md",title:H[j.id].title,color:H[j.id].color,children:[H[j.id].message," ",H[j.id].message.includes("Please try again")&&w.jsxs(w.Fragment,{children:[w.jsx("br",{}),w.jsx("br",{}),"If you're unsure"," ",w.jsx(Rv,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),w.jsx("br",{}),w.jsx("br",{}),k>=L&&L>=0&&M&&` The correct answer was: ${M}.`]})]})},`${j.id}-${c}`)}),w.jsxs(bi,{justify:"right",gap:"xs",children:[A&&q&&w.jsx(on,{onClick:()=>J(),disabled:!v.isValid()||k>=L&&L>=0,children:"Check Answer"}),q&&w.jsx(cbt,{disabled:A&&!O||!v.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const gA="@REVISIT_COMMS",Vbt={minHeight:"500px",width:"100%",border:0};function Hbt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=hl(),r=Sc(),i=_ke(),s=P.useRef(null),o=P.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ed(),u=Hh(),l=P.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${gA}/${c}`,iframeId:o,message:f},"*")},[s,o]);return P.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${gA}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${gA}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${gA}/ANSWERS`:r(t(d.message));break;case`${gA}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),w.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${dl}${e.path}?trialid=${a}&id=${o}`,style:Vbt})}async function VZ(e){const n=await(await fetch(`${dl}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function qbt(e){const t=await fetch(`${dl}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function U1({email:e,path:t}){const n=Nv();return w.jsxs(fl,{fluid:!0,my:50,maw:800,mx:"auto",children:[w.jsx(Vs,{order:2,children:w.jsx(ze,{span:!0,c:"orange",children:"404"})}),w.jsxs(ze,{children:[w.jsx(ze,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),w.jsx(Eu,{h:"lg"}),w.jsxs(io,{children:[w.jsx(io.Item,{children:w.jsx(ze,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),w.jsx(io.Item,{children:w.jsxs(ze,{children:["If you're a participant, please contact the study administrator"," ",e&&w.jsxs(w.Fragment,{children:["at"," ",w.jsxs(Rv,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Wbt={maxWidth:"100%"};function Gbt({currentConfig:e}){const t={...Wbt,...e.style},[n,r]=P.useState(!0),[i,s]=P.useState(!1);return P.useEffect(()=>{async function o(){const a=await VZ(e.path);s(!!a),r(!1)}o()},[e]),n||i?w.jsx(Dv,{mx:"auto",src:`${dl}${e.path}`,style:t}):w.jsx(U1,{path:e.path})}function X0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ybt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wh(e){let t,n,r;e.length!==2?(t=X0,n=(a,u)=>X0(e(a),u),r=(a,u)=>e(a)-u):(t=e===X0||e===Ybt?e:Kbt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Kbt(){return 0}function Zke(e){return e===null?NaN:+e}function*Xbt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const eRe=wh(X0),z1=eRe.right,Qbt=eRe.left;wh(Zke).center;function Jbt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Zbt(e,t){const n=Jbt(e,t);return n&&Math.sqrt(n)}function CR(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class ul{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Lme extends Map{constructor(t,n=rRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(gW(this,t))}has(t){return super.has(gW(this,t))}set(t,n){return super.set(tRe(this,t),n)}delete(t){return super.delete(nRe(this,t))}}class U$ extends Set{constructor(t,n=rRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(gW(this,t))}add(t){return super.add(tRe(this,t))}delete(t){return super.delete(nRe(this,t))}}function gW({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function tRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function nRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function rRe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ext(e,t){return Array.from(t,n=>e[n])}function txt(e=X0){if(e===X0)return iRe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function iRe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const nxt=Math.sqrt(50),rxt=Math.sqrt(10),ixt=Math.sqrt(2);function z$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=nxt?10:s>=rxt?5:s>=ixt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?z$(e,t,n*2):[a,u,l]}function yW(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?z$(t,e,n):z$(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function vW(e,t,n){return t=+t,e=+e,n=+n,z$(e,t,n)[2]}function V1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?vW(t,e,n):vW(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Q0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function bW(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function sRe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?iRe:txt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));sRe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(yA(e,n,t),i(e[r],s)>0&&yA(e,n,r);o<a;){for(yA(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?yA(e,n,a):(++a,yA(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function yA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function xW(e,t,n){if(e=Float64Array.from(Xbt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return bW(e);if(t>=1)return Q0(e);var r,i=(r-1)*t,s=Math.floor(i),o=Q0(sRe(e,s).subarray(0,s+1)),a=bW(e.subarray(s+1));return o+(a-o)*(i-s)}}function oRe(e,t,n=Zke){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function sxt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function aRe(e,t){return xW(e,.5,t)}function*oxt(e){for(const t of e)yield*t}function uRe(e){return Array.from(oxt(e))}function Zl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function lRe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function axt(e,...t){e=new U$(e),t=t.map(uxt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function uxt(e){return e instanceof U$?e:new U$(e)}function lxt(...e){const t=new U$;for(const n of e)for(const r of n)t.add(r);return t}function cxt(e){return e}var GU=1,YU=2,_W=3,cI=4,Mme=1e-6;function fxt(e){return"translate("+e+",0)"}function dxt(e){return"translate(0,"+e+")"}function hxt(e){return t=>+e(t)}function pxt(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function mxt(){return!this.__axis}function cRe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===GU||e===cI?-1:1,c=e===cI||e===YU?"x":"y",f=e===GU||e===_W?fxt:dxt;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):cxt),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,_=(t.bandwidth?pxt:hxt)(t.copy(),u),E=h.selection?h.selection():h,S=E.selectAll(".domain").data([null]),C=E.selectAll(".tick").data(p,t).order(),A=C.exit(),R=C.enter().append("g").attr("class","tick"),k=C.select("line"),N=C.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(R),k=k.merge(R.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),N=N.merge(R.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===GU?"0em":e===_W?"0.71em":"0.32em")),h!==E&&(S=S.transition(h),C=C.transition(h),k=k.transition(h),N=N.transition(h),A=A.transition(h).attr("opacity",Mme).attr("transform",function(L){return isFinite(L=_(L))?f(L+u):this.getAttribute("transform")}),R.attr("opacity",Mme).attr("transform",function(L){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(L))?O:_(L))+u)})),A.remove(),S.attr("d",e===cI||e===YU?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),C.attr("opacity",1).attr("transform",function(L){return f(_(L)+u)}),k.attr(c+"2",l*s),N.attr(c,l*g).text(m),E.filter(mxt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===YU?"start":e===cI?"end":"middle"),E.each(function(){this.__axis=_})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function fRe(e){return cRe(_W,e)}function dRe(e){return cRe(cI,e)}var gxt={value:()=>{}};function qF(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new G4(n)}function G4(e){this._=e}function yxt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}G4.prototype=qF.prototype={constructor:G4,on:function(e,t){var n=this._,r=yxt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=vxt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Fme(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Fme(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new G4(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function vxt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Fme(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=gxt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var wW="http://www.w3.org/1999/xhtml";const Bme={svg:"http://www.w3.org/2000/svg",xhtml:wW,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function WF(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Bme.hasOwnProperty(t)?{space:Bme[t],local:e}:e}function bxt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===wW&&t.documentElement.namespaceURI===wW?t.createElement(e):t.createElementNS(n,e)}}function xxt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hRe(e){var t=WF(e);return(t.local?xxt:bxt)(t)}function _xt(){}function HZ(e){return e==null?_xt:function(){return this.querySelector(e)}}function wxt(e){typeof e!="function"&&(e=HZ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new pl(r,this._parents)}function pRe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ext(){return[]}function mRe(e){return e==null?Ext:function(){return this.querySelectorAll(e)}}function Txt(e){return function(){return pRe(e.apply(this,arguments))}}function Sxt(e){typeof e=="function"?e=Txt(e):e=mRe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new pl(r,i)}function gRe(e){return function(){return this.matches(e)}}function yRe(e){return function(t){return t.matches(e)}}var Cxt=Array.prototype.find;function Axt(e){return function(){return Cxt.call(this.children,e)}}function Ixt(){return this.firstElementChild}function kxt(e){return this.select(e==null?Ixt:Axt(typeof e=="function"?e:yRe(e)))}var Rxt=Array.prototype.filter;function Pxt(){return Array.from(this.children)}function Dxt(e){return function(){return Rxt.call(this.children,e)}}function Nxt(e){return this.selectAll(e==null?Pxt:Dxt(typeof e=="function"?e:yRe(e)))}function Oxt(e){typeof e!="function"&&(e=gRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new pl(r,this._parents)}function vRe(e){return new Array(e.length)}function $xt(){return new pl(this._enter||this._groups.map(vRe),this._parents)}function V$(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}V$.prototype={constructor:V$,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Lxt(e){return function(){return e}}function Mxt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new V$(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Fxt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new V$(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Bxt(e){return e.__data__}function jxt(e,t){if(!arguments.length)return Array.from(this,Bxt);var n=t?Fxt:Mxt,r=this._parents,i=this._groups;typeof e!="function"&&(e=Lxt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Uxt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,_,E;v<p;++v)if(_=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);_._next=E||null}}return o=new pl(o,r),o._enter=a,o._exit=u,o}function Uxt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zxt(){return new pl(this._exit||this._groups.map(vRe),this._parents)}function Vxt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Hxt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new pl(a,this._parents)}function qxt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Wxt(e){e||(e=Gxt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new pl(i,this._parents).order()}function Gxt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yxt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Kxt(){return Array.from(this)}function Xxt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Qxt(){let e=0;for(const t of this)++e;return e}function Jxt(){return!this.node()}function Zxt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function e_t(e){return function(){this.removeAttribute(e)}}function t_t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function n_t(e,t){return function(){this.setAttribute(e,t)}}function r_t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function i_t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function s_t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function o_t(e,t){var n=WF(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?t_t:e_t:typeof t=="function"?n.local?s_t:i_t:n.local?r_t:n_t)(n,t))}function bRe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function a_t(e){return function(){this.style.removeProperty(e)}}function u_t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function l_t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function c_t(e,t,n){return arguments.length>1?this.each((t==null?a_t:typeof t=="function"?l_t:u_t)(e,t,n??"")):dT(this.node(),e)}function dT(e,t){return e.style.getPropertyValue(t)||bRe(e).getComputedStyle(e,null).getPropertyValue(t)}function f_t(e){return function(){delete this[e]}}function d_t(e,t){return function(){this[e]=t}}function h_t(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function p_t(e,t){return arguments.length>1?this.each((t==null?f_t:typeof t=="function"?h_t:d_t)(e,t)):this.node()[e]}function xRe(e){return e.trim().split(/^|\s+/)}function qZ(e){return e.classList||new _Re(e)}function _Re(e){this._node=e,this._names=xRe(e.getAttribute("class")||"")}_Re.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wRe(e,t){for(var n=qZ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ERe(e,t){for(var n=qZ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function m_t(e){return function(){wRe(this,e)}}function g_t(e){return function(){ERe(this,e)}}function y_t(e,t){return function(){(t.apply(this,arguments)?wRe:ERe)(this,e)}}function v_t(e,t){var n=xRe(e+"");if(arguments.length<2){for(var r=qZ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?y_t:t?m_t:g_t)(n,t))}function b_t(){this.textContent=""}function x_t(e){return function(){this.textContent=e}}function __t(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function w_t(e){return arguments.length?this.each(e==null?b_t:(typeof e=="function"?__t:x_t)(e)):this.node().textContent}function E_t(){this.innerHTML=""}function T_t(e){return function(){this.innerHTML=e}}function S_t(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function C_t(e){return arguments.length?this.each(e==null?E_t:(typeof e=="function"?S_t:T_t)(e)):this.node().innerHTML}function A_t(){this.nextSibling&&this.parentNode.appendChild(this)}function I_t(){return this.each(A_t)}function k_t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R_t(){return this.each(k_t)}function P_t(e){var t=typeof e=="function"?e:hRe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function D_t(){return null}function N_t(e,t){var n=typeof e=="function"?e:hRe(e),r=t==null?D_t:typeof t=="function"?t:HZ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function O_t(){var e=this.parentNode;e&&e.removeChild(this)}function $_t(){return this.each(O_t)}function L_t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function M_t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function F_t(e){return this.select(e?M_t:L_t)}function B_t(e){return arguments.length?this.property("__data__",e):this.node().__data__}function j_t(e){return function(t){e.call(this,t,this.__data__)}}function U_t(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function z_t(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function V_t(e,t,n){return function(){var r=this.__on,i,s=j_t(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function H_t(e,t,n){var r=U_t(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?V_t:z_t,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function TRe(e,t,n){var r=bRe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function q_t(e,t){return function(){return TRe(this,e,t)}}function W_t(e,t){return function(){return TRe(this,e,t.apply(this,arguments))}}function G_t(e,t){return this.each((typeof t=="function"?W_t:q_t)(e,t))}function*Y_t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var WZ=[null];function pl(e,t){this._groups=e,this._parents=t}function fP(){return new pl([[document.documentElement]],WZ)}function K_t(){return this}pl.prototype=fP.prototype={constructor:pl,select:wxt,selectAll:Sxt,selectChild:kxt,selectChildren:Nxt,filter:Oxt,data:jxt,enter:$xt,exit:zxt,join:Vxt,merge:Hxt,selection:K_t,order:qxt,sort:Wxt,call:Yxt,nodes:Kxt,node:Xxt,size:Qxt,empty:Jxt,each:Zxt,attr:o_t,style:c_t,property:p_t,classed:v_t,text:w_t,html:C_t,raise:I_t,lower:R_t,append:P_t,insert:N_t,remove:$_t,clone:F_t,datum:B_t,on:H_t,dispatch:G_t,[Symbol.iterator]:Y_t};function xr(e){return typeof e=="string"?new pl([[document.querySelector(e)]],[document.documentElement]):new pl([[e]],WZ)}function X_t(e){let t;for(;t=e.sourceEvent;)e=t;return e}function H$(e,t){if(e=X_t(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function SRe(e){return typeof e=="string"?new pl([document.querySelectorAll(e)],[document.documentElement]):new pl([pRe(e)],WZ)}const EW={capture:!0,passive:!1};function TW(e){e.preventDefault(),e.stopImmediatePropagation()}function Q_t(e){var t=e.document.documentElement,n=xr(e).on("dragstart.drag",TW,EW);"onselectstart"in t?n.on("selectstart.drag",TW,EW):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function J_t(e,t){var n=e.document.documentElement,r=xr(e).on("dragstart.drag",null);t&&(r.on("click.drag",TW,EW),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function US(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function dP(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Fv(){}var Jx=.7,hT=1/Jx,x2="\\s*([+-]?\\d+)\\s*",AR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Z_t=/^#([0-9a-f]{3,8})$/,ewt=new RegExp(`^rgb\\(${x2},${x2},${x2}\\)$`),twt=new RegExp(`^rgb\\(${Kp},${Kp},${Kp}\\)$`),nwt=new RegExp(`^rgba\\(${x2},${x2},${x2},${AR}\\)$`),rwt=new RegExp(`^rgba\\(${Kp},${Kp},${Kp},${AR}\\)$`),iwt=new RegExp(`^hsl\\(${AR},${Kp},${Kp}\\)$`),swt=new RegExp(`^hsla\\(${AR},${Kp},${Kp},${AR}\\)$`),jme={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};US(Fv,Zx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ume,formatHex:Ume,formatHex8:owt,formatHsl:awt,formatRgb:zme,toString:zme});function Ume(){return this.rgb().formatHex()}function owt(){return this.rgb().formatHex8()}function awt(){return CRe(this).formatHsl()}function zme(){return this.rgb().formatRgb()}function Zx(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Z_t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Vme(t):n===3?new ca(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oO(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oO(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ewt.exec(e))?new ca(t[1],t[2],t[3],1):(t=twt.exec(e))?new ca(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nwt.exec(e))?oO(t[1],t[2],t[3],t[4]):(t=rwt.exec(e))?oO(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iwt.exec(e))?Wme(t[1],t[2]/100,t[3]/100,1):(t=swt.exec(e))?Wme(t[1],t[2]/100,t[3]/100,t[4]):jme.hasOwnProperty(e)?Vme(jme[e]):e==="transparent"?new ca(NaN,NaN,NaN,0):null}function Vme(e){return new ca(e>>16&255,e>>8&255,e&255,1)}function oO(e,t,n,r){return r<=0&&(e=t=n=NaN),new ca(e,t,n,r)}function GZ(e){return e instanceof Fv||(e=Zx(e)),e?(e=e.rgb(),new ca(e.r,e.g,e.b,e.opacity)):new ca}function H1(e,t,n,r){return arguments.length===1?GZ(e):new ca(e,t,n,r??1)}function ca(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}US(ca,H1,dP(Fv,{brighter(e){return e=e==null?hT:Math.pow(hT,e),new ca(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jx:Math.pow(Jx,e),new ca(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ca(Nx(this.r),Nx(this.g),Nx(this.b),q$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hme,formatHex:Hme,formatHex8:uwt,formatRgb:qme,toString:qme}));function Hme(){return`#${gx(this.r)}${gx(this.g)}${gx(this.b)}`}function uwt(){return`#${gx(this.r)}${gx(this.g)}${gx(this.b)}${gx((isNaN(this.opacity)?1:this.opacity)*255)}`}function qme(){const e=q$(this.opacity);return`${e===1?"rgb(":"rgba("}${Nx(this.r)}, ${Nx(this.g)}, ${Nx(this.b)}${e===1?")":`, ${e})`}`}function q$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gx(e){return e=Nx(e),(e<16?"0":"")+e.toString(16)}function Wme(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ah(e,t,n,r)}function CRe(e){if(e instanceof ah)return new ah(e.h,e.s,e.l,e.opacity);if(e instanceof Fv||(e=Zx(e)),!e)return new ah;if(e instanceof ah)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new ah(o,a,u,e.opacity)}function W$(e,t,n,r){return arguments.length===1?CRe(e):new ah(e,t,n,r??1)}function ah(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}US(ah,W$,dP(Fv,{brighter(e){return e=e==null?hT:Math.pow(hT,e),new ah(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jx:Math.pow(Jx,e),new ah(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ca(KU(e>=240?e-240:e+120,i,r),KU(e,i,r),KU(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ah(Gme(this.h),aO(this.s),aO(this.l),q$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=q$(this.opacity);return`${e===1?"hsl(":"hsla("}${Gme(this.h)}, ${aO(this.s)*100}%, ${aO(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Gme(e){return e=(e||0)%360,e<0?e+360:e}function aO(e){return Math.max(0,Math.min(1,e||0))}function KU(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ARe=Math.PI/180,IRe=180/Math.PI,G$=18,kRe=.96422,RRe=1,PRe=.82521,DRe=4/29,_2=6/29,NRe=3*_2*_2,lwt=_2*_2*_2;function ORe(e){if(e instanceof Xp)return new Xp(e.l,e.a,e.b,e.opacity);if(e instanceof M0)return $Re(e);e instanceof ca||(e=GZ(e));var t=ZU(e.r),n=ZU(e.g),r=ZU(e.b),i=XU((.2225045*t+.7168786*n+.0606169*r)/RRe),s,o;return t===n&&n===r?s=o=i:(s=XU((.4360747*t+.3850649*n+.1430804*r)/kRe),o=XU((.0139322*t+.0971045*n+.7141733*r)/PRe)),new Xp(116*i-16,500*(s-i),200*(i-o),e.opacity)}function Y$(e,t,n,r){return arguments.length===1?ORe(e):new Xp(e,t,n,r??1)}function Xp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}US(Xp,Y$,dP(Fv,{brighter(e){return new Xp(this.l+G$*(e??1),this.a,this.b,this.opacity)},darker(e){return new Xp(this.l-G$*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=kRe*QU(t),e=RRe*QU(e),n=PRe*QU(n),new ca(JU(3.1338561*t-1.6168667*e-.4906146*n),JU(-.9787684*t+1.9161415*e+.033454*n),JU(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function XU(e){return e>lwt?Math.pow(e,1/3):e/NRe+DRe}function QU(e){return e>_2?e*e*e:NRe*(e-DRe)}function JU(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ZU(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function cwt(e){if(e instanceof M0)return new M0(e.h,e.c,e.l,e.opacity);if(e instanceof Xp||(e=ORe(e)),e.a===0&&e.b===0)return new M0(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*IRe;return new M0(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function K$(e,t,n,r){return arguments.length===1?cwt(e):new M0(e,t,n,r??1)}function M0(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function $Re(e){if(isNaN(e.h))return new Xp(e.l,0,0,e.opacity);var t=e.h*ARe;return new Xp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}US(M0,K$,dP(Fv,{brighter(e){return new M0(this.h,this.c,this.l+G$*(e??1),this.opacity)},darker(e){return new M0(this.h,this.c,this.l-G$*(e??1),this.opacity)},rgb(){return $Re(this).rgb()}}));var LRe=-.14861,YZ=1.78277,KZ=-.29227,GF=-.90649,IR=1.97294,Yme=IR*GF,Kme=IR*YZ,Xme=YZ*KZ-GF*LRe;function fwt(e){if(e instanceof Ox)return new Ox(e.h,e.s,e.l,e.opacity);e instanceof ca||(e=GZ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Xme*r+Yme*t-Kme*n)/(Xme+Yme-Kme),s=r-i,o=(IR*(n-i)-KZ*s)/GF,a=Math.sqrt(o*o+s*s)/(IR*i*(1-i)),u=a?Math.atan2(o,s)*IRe-120:NaN;return new Ox(u<0?u+360:u,a,i,e.opacity)}function SW(e,t,n,r){return arguments.length===1?fwt(e):new Ox(e,t,n,r??1)}function Ox(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}US(Ox,SW,dP(Fv,{brighter(e){return e=e==null?hT:Math.pow(hT,e),new Ox(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jx:Math.pow(Jx,e),new Ox(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*ARe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ca(255*(t+n*(LRe*r+YZ*i)),255*(t+n*(KZ*r+GF*i)),255*(t+n*(IR*r)),this.opacity)}}));function MRe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function FRe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return MRe((n-r/t)*t,o,i,s,a)}}function BRe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return MRe((n-r/t)*t,i,s,o,a)}}const YF=e=>()=>e;function jRe(e,t){return function(n){return e+n*t}}function dwt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function KF(e,t){var n=t-e;return n?jRe(e,n>180||n<-180?n-360*Math.round(n/360):n):YF(isNaN(e)?t:e)}function hwt(e){return(e=+e)==1?fa:function(t,n){return n-t?dwt(t,n,e):YF(isNaN(t)?n:t)}}function fa(e,t){var n=t-e;return n?jRe(e,n):YF(isNaN(e)?t:e)}const kR=function e(t){var n=hwt(t);function r(i,s){var o=n((i=H1(i)).r,(s=H1(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=fa(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function URe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=H1(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var pwt=URe(FRe),mwt=URe(BRe);function XZ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function zRe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gwt(e,t){return(zRe(t)?XZ:VRe)(e,t)}function VRe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Vg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function HRe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Gf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qRe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Vg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var CW=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ez=new RegExp(CW.source,"g");function ywt(e){return function(){return e}}function vwt(e){return function(t){return e(t)+""}}function QZ(e,t){var n=CW.lastIndex=ez.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=CW.exec(e))&&(i=ez.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Gf(r,i)})),n=ez.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?vwt(u[0].x):ywt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Vg(e,t){var n=typeof t,r;return t==null||n==="boolean"?YF(t):(n==="number"?Gf:n==="string"?(r=Zx(t))?(t=r,kR):QZ:t instanceof Zx?kR:t instanceof Date?HRe:zRe(t)?XZ:Array.isArray(t)?VRe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qRe:Gf)(e,t)}function bwt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function xwt(e,t){var n=KF(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function hP(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Qme=180/Math.PI,AW={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function WRe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Qme,skewX:Math.atan(u)*Qme,scaleX:o,scaleY:a}}var uO;function _wt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?AW:WRe(t.a,t.b,t.c,t.d,t.e,t.f)}function wwt(e){return e==null||(uO||(uO=document.createElementNS("http://www.w3.org/2000/svg","g")),uO.setAttribute("transform",e),!(e=uO.transform.baseVal.consolidate()))?AW:(e=e.matrix,WRe(e.a,e.b,e.c,e.d,e.e,e.f))}function GRe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Gf(l,f)},{i:m-2,x:Gf(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Gf(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Gf(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Gf(l,f)},{i:m-2,x:Gf(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var YRe=GRe(_wt,"px, ","px)","deg)"),KRe=GRe(wwt,", ",")",")"),Ewt=1e-12;function Jme(e){return((e=Math.exp(e))+1/e)/2}function Twt(e){return((e=Math.exp(e))-1/e)/2}function Swt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Cwt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Ewt)y=Math.log(d/l)/t,g=function(C){return[a+C*h,u+C*p,l*Math.exp(t*C*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),_=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(_*_+1)-_);y=(S-E)/t,g=function(C){var A=C*y,R=Jme(E),k=l/(n*v)*(R*Swt(t*A+E)-Twt(E));return[a+k*h,u+k*p,l*R/Jme(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function XRe(e){return function(t,n){var r=e((t=W$(t)).h,(n=W$(n)).h),i=fa(t.s,n.s),s=fa(t.l,n.l),o=fa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Awt=XRe(KF);var Iwt=XRe(fa);function kwt(e,t){var n=fa((e=Y$(e)).l,(t=Y$(t)).l),r=fa(e.a,t.a),i=fa(e.b,t.b),s=fa(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function QRe(e){return function(t,n){var r=e((t=K$(t)).h,(n=K$(n)).h),i=fa(t.c,n.c),s=fa(t.l,n.l),o=fa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Rwt=QRe(KF);var Pwt=QRe(fa);function JRe(e){return function t(n){n=+n;function r(i,s){var o=e((i=SW(i)).h,(s=SW(s)).h),a=fa(i.s,s.s),u=fa(i.l,s.l),l=fa(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Dwt=JRe(KF);var Nwt=JRe(fa);function JZ(e,t){t===void 0&&(t=e,e=Vg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Owt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const $wt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Vg,interpolateArray:gwt,interpolateBasis:FRe,interpolateBasisClosed:BRe,interpolateCubehelix:Dwt,interpolateCubehelixLong:Nwt,interpolateDate:HRe,interpolateDiscrete:bwt,interpolateHcl:Rwt,interpolateHclLong:Pwt,interpolateHsl:Awt,interpolateHslLong:Iwt,interpolateHue:xwt,interpolateLab:kwt,interpolateNumber:Gf,interpolateNumberArray:XZ,interpolateObject:qRe,interpolateRgb:kR,interpolateRgbBasis:pwt,interpolateRgbBasisClosed:mwt,interpolateRound:hP,interpolateString:QZ,interpolateTransformCss:YRe,interpolateTransformSvg:KRe,interpolateZoom:Cwt,piecewise:JZ,quantize:Owt},Symbol.toStringTag,{value:"Module"}));var pT=0,fI=0,vA=0,ZRe=1e3,X$,dI,Q$=0,e_=0,XF=0,RR=typeof performance=="object"&&performance.now?performance:Date,e3e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function QF(){return e_||(e3e(Lwt),e_=RR.now()+XF)}function Lwt(){e_=0}function PR(){this._call=this._time=this._next=null}PR.prototype=ZZ.prototype={constructor:PR,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?QF():+n)+(t==null?0:+t),!this._next&&dI!==this&&(dI?dI._next=this:X$=this,dI=this),this._call=e,this._time=n,IW()},stop:function(){this._call&&(this._call=null,this._time=1/0,IW())}};function ZZ(e,t,n){var r=new PR;return r.restart(e,t,n),r}function Mwt(){QF(),++pT;for(var e=X$,t;e;)(t=e_-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pT}function Zme(){e_=(Q$=RR.now())+XF,pT=fI=0;try{Mwt()}finally{pT=0,Bwt(),e_=0}}function Fwt(){var e=RR.now(),t=e-Q$;t>ZRe&&(XF-=t,Q$=e)}function Bwt(){for(var e,t=X$,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:X$=n);dI=e,IW(r)}function IW(e){if(!pT){fI&&(fI=clearTimeout(fI));var t=e-e_;t>24?(e<1/0&&(fI=setTimeout(Zme,e-RR.now()-XF)),vA&&(vA=clearInterval(vA))):(vA||(Q$=RR.now(),vA=setInterval(Fwt,ZRe)),pT=1,e3e(Zme))}}function e0e(e,t,n){var r=new PR;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function jwt(e,t,n){var r=new PR,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?QF():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Uwt=qF("start","end","cancel","interrupt"),zwt=[],t3e=0,t0e=1,kW=2,Y4=3,n0e=4,RW=5,K4=6;function JF(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Vwt(e,n,{name:t,index:r,group:i,on:Uwt,tween:zwt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:t3e})}function eee(e,t){var n=Wh(e,t);if(n.state>t3e)throw new Error("too late; already scheduled");return n}function Dm(e,t){var n=Wh(e,t);if(n.state>Y4)throw new Error("too late; already running");return n}function Wh(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Vwt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ZZ(s,0,n.time);function s(l){n.state=t0e,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==t0e)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Y4)return e0e(o);h.state===n0e?(h.state=K4,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=K4,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(e0e(function(){n.state===Y4&&(n.state=n0e,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=kW,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kW){for(n.state=Y4,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=RW,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===RW&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=K4,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function PW(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>kW&&r.state<RW,r.state=K4,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Hwt(e){return this.each(function(){PW(this,e)})}function qwt(e,t){var n,r;return function(){var i=Dm(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Wwt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Dm(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Gwt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Wh(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?qwt:Wwt)(n,e,t))}function tee(e,t,n){var r=e._id;return e.each(function(){var i=Dm(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Wh(i,r).value[t]}}function n3e(e,t){var n;return(typeof t=="number"?Gf:t instanceof Zx?kR:(n=Zx(t))?(t=n,kR):QZ)(e,t)}function Ywt(e){return function(){this.removeAttribute(e)}}function Kwt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xwt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Qwt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Jwt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Zwt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function eEt(e,t){var n=WF(e),r=n==="transform"?KRe:n3e;return this.attrTween(e,typeof t=="function"?(n.local?Zwt:Jwt)(n,r,tee(this,"attr."+e,t)):t==null?(n.local?Kwt:Ywt)(n):(n.local?Qwt:Xwt)(n,r,t))}function tEt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function nEt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rEt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&nEt(e,s)),n}return i._value=t,i}function iEt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&tEt(e,s)),n}return i._value=t,i}function sEt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=WF(e);return this.tween(n,(r.local?rEt:iEt)(r,t))}function oEt(e,t){return function(){eee(this,e).delay=+t.apply(this,arguments)}}function aEt(e,t){return t=+t,function(){eee(this,e).delay=t}}function uEt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oEt:aEt)(t,e)):Wh(this.node(),t).delay}function lEt(e,t){return function(){Dm(this,e).duration=+t.apply(this,arguments)}}function cEt(e,t){return t=+t,function(){Dm(this,e).duration=t}}function fEt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lEt:cEt)(t,e)):Wh(this.node(),t).duration}function dEt(e,t){if(typeof t!="function")throw new Error;return function(){Dm(this,e).ease=t}}function hEt(e){var t=this._id;return arguments.length?this.each(dEt(t,e)):Wh(this.node(),t).ease}function pEt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Dm(this,e).ease=n}}function mEt(e){if(typeof e!="function")throw new Error;return this.each(pEt(this._id,e))}function gEt(e){typeof e!="function"&&(e=gRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new vg(r,this._parents,this._name,this._id)}function yEt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new vg(o,this._parents,this._name,this._id)}function vEt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bEt(e,t,n){var r,i,s=vEt(t)?eee:Dm;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function xEt(e,t){var n=this._id;return arguments.length<2?Wh(this.node(),n).on.on(e):this.each(bEt(n,e,t))}function _Et(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function wEt(){return this.on("end.remove",_Et(this._id))}function EEt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=HZ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,JF(l[d],t,n,d,l,Wh(c,n)));return new vg(s,this._parents,t,n)}function TEt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=mRe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Wh(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&JF(h,t,n,m,d,p);s.push(d),o.push(c)}return new vg(s,o,t,n)}var SEt=fP.prototype.constructor;function CEt(){return new SEt(this._groups,this._parents)}function AEt(e,t){var n,r,i;return function(){var s=dT(this,e),o=(this.style.removeProperty(e),dT(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function r3e(e){return function(){this.style.removeProperty(e)}}function IEt(e,t,n){var r,i=n+"",s;return function(){var o=dT(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function kEt(e,t,n){var r,i,s;return function(){var o=dT(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),dT(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function REt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Dm(this,e),l=u.on,c=u.value[s]==null?a||(a=r3e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function PEt(e,t,n){var r=(e+="")=="transform"?YRe:n3e;return t==null?this.styleTween(e,AEt(e,r)).on("end.style."+e,r3e(e)):typeof t=="function"?this.styleTween(e,kEt(e,r,tee(this,"style."+e,t))).each(REt(this._id,e)):this.styleTween(e,IEt(e,r,t),n).on("end.style."+e,null)}function DEt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function NEt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&DEt(e,o,n)),r}return s._value=t,s}function OEt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,NEt(e,t,n??""))}function $Et(e){return function(){this.textContent=e}}function LEt(e){return function(){var t=e(this);this.textContent=t??""}}function MEt(e){return this.tween("text",typeof e=="function"?LEt(tee(this,"text",e)):$Et(e==null?"":e+""))}function FEt(e){return function(t){this.textContent=e.call(this,t)}}function BEt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&FEt(i)),t}return r._value=e,r}function jEt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,BEt(e))}function UEt(){for(var e=this._name,t=this._id,n=i3e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Wh(u,t);JF(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vg(r,this._parents,e,n)}function zEt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Dm(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var VEt=0;function vg(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function i3e(){return++VEt}var u0=fP.prototype;vg.prototype={constructor:vg,select:EEt,selectAll:TEt,selectChild:u0.selectChild,selectChildren:u0.selectChildren,filter:gEt,merge:yEt,selection:CEt,transition:UEt,call:u0.call,nodes:u0.nodes,node:u0.node,size:u0.size,empty:u0.empty,each:u0.each,on:xEt,attr:eEt,attrTween:sEt,style:PEt,styleTween:OEt,text:MEt,textTween:jEt,remove:wEt,tween:Gwt,delay:uEt,duration:fEt,ease:hEt,easeVarying:mEt,end:zEt,[Symbol.iterator]:u0[Symbol.iterator]};const HEt=e=>+e;function qEt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var WEt={time:null,delay:0,duration:250,ease:qEt};function GEt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function YEt(e){var t,n;e instanceof vg?(t=e._id,e=e._name):(t=i3e(),(n=WEt).time=QF(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&JF(u,e,t,l,o,n||GEt(u,t));return new vg(r,this._parents,e,t)}fP.prototype.interrupt=Hwt;fP.prototype.transition=YEt;const tz=e=>()=>e;function KEt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function XEt(e){e.stopImmediatePropagation()}function nz(e){e.preventDefault(),e.stopImmediatePropagation()}var r0e={name:"drag"},rz={name:"space"},eE={name:"handle"},tE={name:"center"};const{abs:i0e,max:nu,min:ru}=Math;function s0e(e){return[+e[0],+e[1]]}function DW(e){return[s0e(e[0]),s0e(e[1])]}var X4={name:"x",handles:["w","e"].map(DR),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Q4={name:"y",handles:["n","s"].map(DR),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},QEt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(DR),input:function(e){return e==null?null:DW(e)},output:function(e){return e}},l0={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},o0e={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},a0e={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},JEt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ZEt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function DR(e){return{type:e}}function e2t(e){return!e.ctrlKey&&!e.button}function t2t(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function n2t(){return navigator.maxTouchPoints||"ontouchstart"in this}function iz(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function r2t(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function s3e(){return nee(X4)}function o3e(){return nee(Q4)}function a3e(){return nee(QEt)}function nee(e){var t=t2t,n=e2t,r=n2t,i=!0,s=qF("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([DR("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",l0.overlay).merge(y).each(function(){var b=iz(this).extent;xr(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([DR("selection")]).enter().append("rect").attr("class","selection").attr("cursor",l0.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return l0[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,_=b.__brush,E=c(b,arguments),S=_.selection,C=e.input(typeof y=="function"?y.apply(this,arguments):y,_.extent),A=Vg(S,C);function R(k){_.selection=k===1&&C===null?null:A(k),l.call(b),E.brush()}return S!==null&&C!==null?R:R(1)}):g.each(function(){var b=this,_=arguments,E=b.__brush,S=e.input(typeof y=="function"?y.apply(b,_):y,E.extent),C=c(b,_).beforestart();PW(b),E.selection=S===null?null:S,l.call(b),C.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=xr(this),y=iz(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=xr(this.that).datum();s.call(g,this.that,new KEt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?r0e:i&&g.altKey?tE:eE,_=e===Q4?null:JEt[v],E=e===X4?null:ZEt[v],S=iz(y),C=S.extent,A=S.selection,R=C[0][0],k,N,L=C[0][1],O,B,q=C[1][0],H,G,K=C[1][1],J,F,j=0,W=0,M,V=_&&E&&i&&g.shiftKey,Q,se,be=Array.from(g.touches||[g],Se=>{const Fe=Se.identifier;return Se=H$(Se,y),Se.point0=Se.slice(),Se.identifier=Fe,Se});PW(y);var he=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(M=!0);const Se=[be[0],be[1]||be[0]];S.selection=A=[[k=e===Q4?R:ru(Se[0][0],Se[1][0]),O=e===X4?L:ru(Se[0][1],Se[1][1])],[H=e===Q4?q:nu(Se[0][0],Se[1][0]),J=e===X4?K:nu(Se[0][1],Se[1][1])]],be.length>1&&Tt(g)}else k=A[0][0],O=A[0][1],H=A[1][0],J=A[1][1];N=k,B=O,G=H,F=J;var Ae=xr(y).attr("pointer-events","none"),Ne=Ae.selectAll(".overlay").attr("cursor",l0[v]);if(g.touches)he.moved=Re,he.ended=Ze;else{var rt=xr(g.view).on("mousemove.brush",Re,!0).on("mouseup.brush",Ze,!0);i&&rt.on("keydown.brush",It,!0).on("keyup.brush",mt,!0),Q_t(g.view)}l.call(y),he.start(g,b.name);function Re(Se){for(const Fe of Se.changedTouches||[Se])for(const st of be)st.identifier===Fe.identifier&&(st.cur=H$(Fe,y));if(V&&!Q&&!se&&be.length===1){const Fe=be[0];i0e(Fe.cur[0]-Fe[0])>i0e(Fe.cur[1]-Fe[1])?se=!0:Q=!0}for(const Fe of be)Fe.cur&&(Fe[0]=Fe.cur[0],Fe[1]=Fe.cur[1]);M=!0,nz(Se),Tt(Se)}function Tt(Se){const Fe=be[0],st=Fe.point0;var yt;switch(j=Fe[0]-st[0],W=Fe[1]-st[1],b){case rz:case r0e:{_&&(j=nu(R-k,ru(q-H,j)),N=k+j,G=H+j),E&&(W=nu(L-O,ru(K-J,W)),B=O+W,F=J+W);break}case eE:{be[1]?(_&&(N=nu(R,ru(q,be[0][0])),G=nu(R,ru(q,be[1][0])),_=1),E&&(B=nu(L,ru(K,be[0][1])),F=nu(L,ru(K,be[1][1])),E=1)):(_<0?(j=nu(R-k,ru(q-k,j)),N=k+j,G=H):_>0&&(j=nu(R-H,ru(q-H,j)),N=k,G=H+j),E<0?(W=nu(L-O,ru(K-O,W)),B=O+W,F=J):E>0&&(W=nu(L-J,ru(K-J,W)),B=O,F=J+W));break}case tE:{_&&(N=nu(R,ru(q,k-j*_)),G=nu(R,ru(q,H+j*_))),E&&(B=nu(L,ru(K,O-W*E)),F=nu(L,ru(K,J+W*E)));break}}G<N&&(_*=-1,yt=k,k=H,H=yt,yt=N,N=G,G=yt,v in o0e&&Ne.attr("cursor",l0[v=o0e[v]])),F<B&&(E*=-1,yt=O,O=J,J=yt,yt=B,B=F,F=yt,v in a0e&&Ne.attr("cursor",l0[v=a0e[v]])),S.selection&&(A=S.selection),Q&&(N=A[0][0],G=A[1][0]),se&&(B=A[0][1],F=A[1][1]),(A[0][0]!==N||A[0][1]!==B||A[1][0]!==G||A[1][1]!==F)&&(S.selection=[[N,B],[G,F]],l.call(y),he.brush(Se,b.name))}function Ze(Se){if(XEt(Se),Se.touches){if(Se.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else J_t(Se.view,M),rt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ae.attr("pointer-events","all"),Ne.attr("cursor",l0.overlay),S.selection&&(A=S.selection),r2t(A)&&(S.selection=null,l.call(y)),he.end(Se,b.name)}function It(Se){switch(Se.keyCode){case 16:{V=_&&E;break}case 18:{b===eE&&(_&&(H=G-j*_,k=N+j*_),E&&(J=F-W*E,O=B+W*E),b=tE,Tt(Se));break}case 32:{(b===eE||b===tE)&&(_<0?H=G-j:_>0&&(k=N-j),E<0?J=F-W:E>0&&(O=B-W),b=rz,Ne.attr("cursor",l0.selection),Tt(Se));break}default:return}nz(Se)}function mt(Se){switch(Se.keyCode){case 16:{V&&(Q=se=V=!1,Tt(Se));break}case 18:{b===tE&&(_<0?H=G:_>0&&(k=N),E<0?J=F:E>0&&(O=B),b=eE,Tt(Se));break}case 32:{b===rz&&(Se.altKey?(_&&(H=G-j*_,k=N+j*_),E&&(J=F-W*E,O=B+W*E),b=tE):(_<0?H=G:_>0&&(k=N),E<0?J=F:E>0&&(O=B),b=eE),Ne.attr("cursor",l0[v]),Tt(Se));break}default:return}nz(Se)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=DW(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:tz(DW(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:tz(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:tz(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const NW=Math.PI,OW=2*NW,Bb=1e-6,i2t=OW-Bb;function u3e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function s2t(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return u3e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let ree=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?u3e:s2t(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Bb)if(!(Math.abs(f*u-l*c)>Bb)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((NW-Math.acos((m+d-g)/(2*y*v)))/2),_=b/v,E=b/y;Math.abs(_-1)>Bb&&this._append`L${t+_*c},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Bb||Math.abs(this._y1-c)>Bb)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%OW+OW),d>i2t?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Bb&&this._append`A${r},${r},0,${+(d>=NW)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function ZF(){return new ree}ZF.prototype=ree.prototype;const J0=11102230246251565e-32,iu=134217729,o2t=(3+8*J0)*J0;function sz(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function a2t(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function pP(e){return new Float64Array(e)}const u2t=(3+16*J0)*J0,l2t=(2+12*J0)*J0,c2t=(9+64*J0)*J0*J0,nE=pP(4),u0e=pP(8),l0e=pP(12),c0e=pP(16),qu=pP(4);function f2t(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,_,E,S,C,A;const R=e-i,k=n-i,N=t-s,L=r-s;_=R*L,d=iu*R,h=d-(d-R),p=R-h,d=iu*L,m=d-(d-L),g=L-m,E=p*g-(_-h*m-p*m-h*g),S=N*k,d=iu*N,h=d-(d-N),p=N-h,d=iu*k,m=d-(d-k),g=k-m,C=p*g-(S-h*m-p*m-h*g),y=E-C,f=E-y,nE[0]=E-(y+f)+(f-C),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,nE[1]=b-(y+f)+(f-S),A=v+y,f=A-v,nE[2]=v-(A-f)+(y-f),nE[3]=A;let O=a2t(4,nE),B=l2t*o;if(O>=B||-O>=B||(f=e-R,a=e-(R+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-L,c=r-(L+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(B=c2t*o+o2t*Math.abs(O),O+=R*c+L*a-(N*l+k*u),O>=B||-O>=B))return O;_=a*L,d=iu*a,h=d-(d-a),p=a-h,d=iu*L,m=d-(d-L),g=L-m,E=p*g-(_-h*m-p*m-h*g),S=u*k,d=iu*u,h=d-(d-u),p=u-h,d=iu*k,m=d-(d-k),g=k-m,C=p*g-(S-h*m-p*m-h*g),y=E-C,f=E-y,qu[0]=E-(y+f)+(f-C),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,qu[1]=b-(y+f)+(f-S),A=v+y,f=A-v,qu[2]=v-(A-f)+(y-f),qu[3]=A;const q=sz(4,nE,4,qu,u0e);_=R*c,d=iu*R,h=d-(d-R),p=R-h,d=iu*c,m=d-(d-c),g=c-m,E=p*g-(_-h*m-p*m-h*g),S=N*l,d=iu*N,h=d-(d-N),p=N-h,d=iu*l,m=d-(d-l),g=l-m,C=p*g-(S-h*m-p*m-h*g),y=E-C,f=E-y,qu[0]=E-(y+f)+(f-C),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,qu[1]=b-(y+f)+(f-S),A=v+y,f=A-v,qu[2]=v-(A-f)+(y-f),qu[3]=A;const H=sz(q,u0e,4,qu,l0e);_=a*c,d=iu*a,h=d-(d-a),p=a-h,d=iu*c,m=d-(d-c),g=c-m,E=p*g-(_-h*m-p*m-h*g),S=u*l,d=iu*u,h=d-(d-u),p=u-h,d=iu*l,m=d-(d-l),g=l-m,C=p*g-(S-h*m-p*m-h*g),y=E-C,f=E-y,qu[0]=E-(y+f)+(f-C),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,qu[1]=b-(y+f)+(f-S),A=v+y,f=A-v,qu[2]=v-(A-f)+(y-f),qu[3]=A;const G=sz(H,l0e,4,qu,c0e);return c0e[G-1]}function lO(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=u2t*l?u:-f2t(e,t,n,r,i,s,l)}const f0e=Math.pow(2,-52),cO=new Uint32Array(512);class J${static from(t,n=g2t,r=y2t){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new J$(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let R=0;R<o;R++){const k=t[2*R],N=t[2*R+1];k<a&&(a=k),N<u&&(u=N),k>l&&(l=k),N>c&&(c=N),this._ids[R]=R}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let R=0,k=1/0;R<o;R++){const N=oz(f,d,t[2*R],t[2*R+1]);N<k&&(h=R,k=N)}const g=t[2*h],y=t[2*h+1];for(let R=0,k=1/0;R<o;R++){if(R===h)continue;const N=oz(g,y,t[2*R],t[2*R+1]);N<k&&N>0&&(p=R,k=N)}let v=t[2*p],b=t[2*p+1],_=1/0;for(let R=0;R<o;R++){if(R===h||R===p)continue;const k=p2t(g,y,v,b,t[2*R],t[2*R+1]);k<_&&(m=R,_=k)}let E=t[2*m],S=t[2*m+1];if(_===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];KE(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let k=0;for(let N=0,L=-1/0;N<o;N++){const O=this._ids[N],B=this._dists[O];B>L&&(R[k++]=O,L=B)}this.hull=R.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(lO(g,y,v,b,E,S)<0){const R=p,k=v,N=b;p=m,v=E,b=S,m=R,E=k,S=N}const C=m2t(g,y,v,b,E,S);this._cx=C.x,this._cy=C.y;for(let R=0;R<o;R++)this._dists[R]=oz(t[2*R],t[2*R+1],C.x,C.y);KE(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let R=0,k,N;R<this._ids.length;R++){const L=this._ids[R],O=t[2*L],B=t[2*L+1];if(R>0&&Math.abs(O-k)<=f0e&&Math.abs(B-N)<=f0e||(k=O,N=B,L===h||L===p||L===m))continue;let q=0;for(let F=0,j=this._hashKey(O,B);F<this._hashSize&&(q=s[(j+F)%this._hashSize],!(q!==-1&&q!==r[q]));F++);q=n[q];let H=q,G;for(;G=r[H],lO(O,B,t[2*H],t[2*H+1],t[2*G],t[2*G+1])>=0;)if(H=G,H===q){H=-1;break}if(H===-1)continue;let K=this._addTriangle(H,L,r[H],-1,-1,i[H]);i[L]=this._legalize(K+2),i[H]=K,A++;let J=r[H];for(;G=r[J],lO(O,B,t[2*J],t[2*J+1],t[2*G],t[2*G+1])<0;)K=this._addTriangle(J,L,G,i[L],-1,i[J]),i[L]=this._legalize(K+2),r[J]=J,A--,J=G;if(H===q)for(;G=n[H],lO(O,B,t[2*G],t[2*G+1],t[2*H],t[2*H+1])<0;)K=this._addTriangle(G,L,H,-1,i[H],i[G]),this._legalize(K+2),i[G]=K,r[H]=H,A--,H=G;this._hullStart=n[L]=H,r[H]=n[J]=L,r[L]=J,s[this._hashKey(O,B)]=L,s[this._hashKey(t[2*H],t[2*H+1])]=H}this.hull=new Uint32Array(A);for(let R=0,k=this._hullStart;R<A;R++)this.hull[R]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(d2t(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=cO[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(h2t(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<cO.length&&(cO[s++]=v)}else{if(s===0)break;t=cO[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function d2t(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function oz(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function h2t(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function p2t(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function m2t(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function KE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;bA(e,i,s),t[e[n]]>t[e[r]]&&bA(e,n,r),t[e[s]]>t[e[r]]&&bA(e,s,r),t[e[n]]>t[e[s]]&&bA(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;bA(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(KE(e,t,s,r),KE(e,t,n,o-1)):(KE(e,t,n,o-1),KE(e,t,s,r))}}function bA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function g2t(e){return e[0]}function y2t(e){return e[1]}const d0e=1e-6;class yx{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>d0e||Math.abs(this._y1-s)>d0e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class $W{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let v2t=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const _=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,C=t[_],A=t[_+1],R=t[E],k=t[E+1],N=t[S],L=t[S+1],O=R-C,B=k-A,q=N-C,H=L-A,G=(O*H-B*q)*2;if(Math.abs(G)<1e-9){if(s===void 0){s=o=0;for(const J of n)s+=t[J*2],o+=t[J*2+1];s/=n.length,o/=n.length}const K=1e9*Math.sign((s-C)*H-(o-A)*q);v=(C+N)/2-K*H,b=(A+L)/2+K*q}else{const K=1/G,J=O*O+B*B,F=q*q+H*H;v=C+(H*J-B*F)*K,b=A+(O*F-q*J)*K}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new yx:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new yx:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new yx:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new $W;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const b2t=2*Math.PI,rE=Math.pow;function x2t(e){return e[0]}function _2t(e){return e[1]}function w2t(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function E2t(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class iee{static from(t,n=x2t,r=_2t,i){return new iee("length"in t?T2t(t,n,r,i):Float64Array.from(S2t(t,n,r,i)))}constructor(t){this._delaunator=new J$(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&w2t(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=E2t(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new J$(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new v2t(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=rE(n-l[t*2],2)+rE(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=rE(n-l[p*2],2)+rE(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&rE(n-l[h*2],2)+rE(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new yx:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new yx:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,b2t)}return r&&r.value()}renderHull(t){const n=t==null?t=new yx:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new $W;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new yx:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new $W;return this.renderTriangle(t,n),n.value()}}function T2t(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*S2t(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var h0e={},az={},uz=34,xA=10,lz=13;function l3e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function C2t(e,t){var n=l3e(e);return function(r,i){return t(n(r),i,e)}}function p0e(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ll(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function A2t(e){return e<0?"-"+Ll(-e,6):e>9999?"+"+Ll(e,6):Ll(e,4)}function I2t(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":A2t(e.getUTCFullYear())+"-"+Ll(e.getUTCMonth()+1,2)+"-"+Ll(e.getUTCDate(),2)+(i?"T"+Ll(t,2)+":"+Ll(n,2)+":"+Ll(r,2)+"."+Ll(i,3)+"Z":r?"T"+Ll(t,2)+":"+Ll(n,2)+":"+Ll(r,2)+"Z":n||t?"T"+Ll(t,2)+":"+Ll(n,2)+"Z":"")}function c3e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?C2t(g,d):l3e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===xA&&--p,f.charCodeAt(p-1)===lz&&--p;function _(){if(v)return az;if(b)return b=!1,h0e;var S,C=m,A;if(f.charCodeAt(C)===uz){for(;m++<p&&f.charCodeAt(m)!==uz||f.charCodeAt(++m)===uz;);return(S=m)>=p?v=!0:(A=f.charCodeAt(m++))===xA?b=!0:A===lz&&(b=!0,f.charCodeAt(m)===xA&&++m),f.slice(C+1,S-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(S=m++))===xA)b=!0;else if(A===lz)b=!0,f.charCodeAt(m)===xA&&++m;else if(A!==n)continue;return f.slice(C,S)}return v=!0,f.slice(C,p)}for(;(y=_())!==az;){for(var E=[];y!==h0e&&y!==az;)E.push(y),y=_();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=p0e(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=p0e(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?I2t(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var k2t=c3e(","),R2t=k2t.parse;function P2t(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function D2t(e,t){return fetch(e,t).then(P2t)}function N2t(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),D2t(t,n).then(function(i){return e(i,r)})}}var f3e=N2t(R2t);function O2t(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function $2t(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return d3e(this.cover(t,n),t,n,e)}function d3e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function L2t(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)d3e(this,o[n],a[n],e[n]);return this}function M2t(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function F2t(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function B2t(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function nl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function j2t(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new nl(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new nl(h[3],g,y,u,l),new nl(h[2],o,y,g,l),new nl(h[1],g,a,u,y),new nl(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),_=v*v+b*b;if(_<n){var E=Math.sqrt(n=_);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function U2t(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function z2t(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function V2t(){return this._root}function H2t(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function q2t(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new nl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new nl(i,l,c,a,u)),(i=r[2])&&t.push(new nl(i,s,c,l,u)),(i=r[1])&&t.push(new nl(i,l,o,a,c)),(i=r[0])&&t.push(new nl(i,s,o,l,c))}return this}function W2t(e){var t=[],n=[],r;for(this._root&&t.push(new nl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new nl(s,o,a,c,f)),(s=i[1])&&t.push(new nl(s,c,a,u,f)),(s=i[2])&&t.push(new nl(s,o,f,c,l)),(s=i[3])&&t.push(new nl(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function G2t(e){return e[0]}function Y2t(e){return arguments.length?(this._x=e,this):this._x}function K2t(e){return e[1]}function X2t(e){return arguments.length?(this._y=e,this):this._y}function see(e,t,n){var r=new oee(t??G2t,n??K2t,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function oee(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function m0e(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var wl=see.prototype=oee.prototype;wl.copy=function(){var e=new oee(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=m0e(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=m0e(r));return e};wl.add=$2t;wl.addAll=L2t;wl.cover=M2t;wl.data=F2t;wl.extent=B2t;wl.find=j2t;wl.remove=U2t;wl.removeAll=z2t;wl.root=V2t;wl.size=H2t;wl.visit=q2t;wl.visitAfter=W2t;wl.x=Y2t;wl.y=X2t;function il(e){return function(){return e}}function Zy(e){return(e()-.5)*1e-6}function Q2t(e){return e.x+e.vx}function J2t(e){return e.y+e.vy}function Z2t(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=il(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=see(t,Q2t,J2t).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,_,E,S,C){var A=b.data,R=b.r,k=m+R;if(A){if(A.index>d.index){var N=h-A.x-A.vx,L=p-A.y-A.vy,O=N*N+L*L;O<k*k&&(N===0&&(N=Zy(r),O+=N*N),L===0&&(L=Zy(r),O+=L*L),O=(k-(O=Math.sqrt(O)))/O*i,d.vx+=(N*=O)*(k=(R*=R)/(g+R)),d.vy+=(L*=O)*k,A.vx-=N*(k=1-k),A.vy-=L*k)}return}return _>h+k||S<h-k||E>p+k||C<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:il(+l),u(),o):e},o}function eTt(e){return e.index}function g0e(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function tTt(e){var t=eTt,n=f,r,i=il(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,_,E,S,C,A,R,k;b<v;++b)_=e[b],E=_.source,S=_.target,C=S.x+S.vx-E.x-E.vx||Zy(l),A=S.y+S.vy-E.y-E.vy||Zy(l),R=Math.sqrt(C*C+A*A),R=(R-s[b])/R*g*r[b],C*=R,A*=R,S.vx-=C*(k=u[b]),S.vy-=A*k,E.vx+=C*(k=1-k),E.vy+=A*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,S)=>[t(E,S,o),E])),_;for(g=0,a=new Array(y);g<v;++g)_=e[g],_.index=g,typeof _.source!="object"&&(_.source=g0e(b,_.source)),typeof _.target!="object"&&(_.target=g0e(b,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)_=e[g],u[g]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:il(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:il(+g),m(),d):i},d}const nTt=1664525,rTt=1013904223,y0e=4294967296;function iTt(){let e=1;return()=>(e=(nTt*e+rTt)%y0e)/y0e}function sTt(e){return e.x}function oTt(e){return e.y}var aTt=10,uTt=Math.PI*(3-Math.sqrt(5));function lTt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=ZZ(f),l=qF("tick","end"),c=iTt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(_){_(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=aTt*Math.sqrt(.5+m),b=m*uTt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,_,E,S,C,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)C=e[v],_=m-C.x,E=g-C.y,S=_*_+E*E,S<y&&(A=C,y=S);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function cTt(){var e,t,n,r,i=il(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=see(e,sTt,oTt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,_;if(h.length){for(v=b=_=0;_<4;++_)(m=h[_])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,_=y*y+v*v;if(b*b/u<_)return _<a&&(y===0&&(y=Zy(n),_+=y*y),v===0&&(v=Zy(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)),t.vx+=y*h.value*r/_,t.vy+=v*h.value*r/_),!0;if(h.length||_>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Zy(n),_+=y*y),v===0&&(v=Zy(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)));do h.data!==t&&(b=s[h.data.index]*r/_,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:il(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function fTt(e){var t=il(.1),n,r,i;typeof e!="function"&&(e=il(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:il(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:il(+a),o(),s):e},s}function dTt(e){var t=il(.1),n,r,i;typeof e!="function"&&(e=il(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:il(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:il(+a),o(),s):e},s}function hTt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Z$(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mT(e){return e=Z$(Math.abs(e)),e?e[1]:NaN}function pTt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function mTt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var gTt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function t_(e){if(!(t=gTt.exec(e)))throw new Error("invalid format: "+e);var t;return new aee({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}t_.prototype=aee.prototype;function aee(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}aee.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yTt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var h3e;function vTt(e,t){var n=Z$(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(h3e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Z$(e,Math.max(0,t+s-1))[0]}function v0e(e,t){var n=Z$(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const b0e={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:hTt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>v0e(e*100,t),r:v0e,s:vTt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function x0e(e){return e}var _0e=Array.prototype.map,w0e=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function p3e(e){var t=e.grouping===void 0||e.thousands===void 0?x0e:pTt(_0e.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?x0e:mTt(_0e.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=t_(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,_=f.trim,E=f.type;E==="n"?(v=!0,E="g"):b0e[E]||(b===void 0&&(b=12),_=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",C=m==="$"?r:/[%p]/.test(E)?o:"",A=b0e[E],R=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(N){var L=S,O=C,B,q,H;if(E==="c")O=A(N)+O,N="";else{N=+N;var G=N<0||1/N<0;if(N=isNaN(N)?u:A(Math.abs(N),b),_&&(N=yTt(N)),G&&+N==0&&p!=="+"&&(G=!1),L=(G?p==="("?p:a:p==="-"||p==="("?"":p)+L,O=(E==="s"?w0e[8+h3e/3]:"")+O+(G&&p==="("?")":""),R){for(B=-1,q=N.length;++B<q;)if(H=N.charCodeAt(B),48>H||H>57){O=(H===46?i+N.slice(B+1):N.slice(B))+O,N=N.slice(0,B);break}}}v&&!g&&(N=t(N,1/0));var K=L.length+N.length+O.length,J=K<y?new Array(y-K+1).join(d):"";switch(v&&g&&(N=t(J+N,J.length?y-O.length:1/0),J=""),h){case"<":N=L+N+O+J;break;case"=":N=L+J+N+O;break;case"^":N=J.slice(0,K=J.length>>1)+L+N+O+J.slice(K);break;default:N=J+L+N+O;break}return s(N)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=t_(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mT(d)/3)))*3,m=Math.pow(10,-p),g=w0e[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var fO,Bv,uee;bTt({thousands:",",grouping:[3],currency:["$",""]});function bTt(e){return fO=p3e(e),Bv=fO.format,uee=fO.formatPrefix,fO}function m3e(e){return Math.max(0,-mT(Math.abs(e)))}function g3e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mT(t)/3)))*3-mT(Math.abs(e)))}function y3e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mT(t)-mT(e))+1}var hn=1e-6,LW=1e-12,cr=Math.PI,qs=cr/2,e5=cr/4,ml=cr*2,no=180/cr,ar=cr/180,Lr=Math.abs,zS=Math.atan,ld=Math.atan2,fn=Math.cos,dO=Math.ceil,v3e=Math.exp,MW=Math.hypot,t5=Math.log,cz=Math.pow,rn=Math.sin,Zf=Math.sign||function(e){return e>0?1:e<0?-1:0},gl=Math.sqrt,lee=Math.tan;function b3e(e){return e>1?0:e<-1?cr:Math.acos(e)}function pc(e){return e>1?qs:e<-1?-qs:Math.asin(e)}function La(){}function n5(e,t){e&&T0e.hasOwnProperty(e.type)&&T0e[e.type](e,t)}var E0e={Feature:function(e,t){n5(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)n5(n[r].geometry,t)}},T0e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){FW(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)FW(n[r],t,0)},Polygon:function(e,t){S0e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)S0e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)n5(n[r],t)}};function FW(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function S0e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)FW(e[n],t,1);t.polygonEnd()}function C0(e,t){e&&E0e.hasOwnProperty(e.type)?E0e[e.type](e,t):n5(e,t)}var r5=new ul,i5=new ul,x3e,_3e,BW,jW,UW,cm={point:La,lineStart:La,lineEnd:La,polygonStart:function(){r5=new ul,cm.lineStart=xTt,cm.lineEnd=_Tt},polygonEnd:function(){var e=+r5;i5.add(e<0?ml+e:e),this.lineStart=this.lineEnd=this.point=La},sphere:function(){i5.add(ml)}};function xTt(){cm.point=wTt}function _Tt(){w3e(x3e,_3e)}function wTt(e,t){cm.point=w3e,x3e=e,_3e=t,e*=ar,t*=ar,BW=e,jW=fn(t=t/2+e5),UW=rn(t)}function w3e(e,t){e*=ar,t*=ar,t=t/2+e5;var n=e-BW,r=n>=0?1:-1,i=r*n,s=fn(t),o=rn(t),a=UW*o,u=jW*s+a*fn(i),l=a*r*rn(i);r5.add(ld(l,u)),BW=e,jW=s,UW=o}function ETt(e){return i5=new ul,C0(e,cm),i5*2}function s5(e){return[ld(e[1],e[0]),pc(e[2])]}function n_(e){var t=e[0],n=e[1],r=fn(n);return[r*fn(t),r*rn(t),rn(n)]}function hO(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gT(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function fz(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function pO(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function o5(e){var t=gl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Is,Hl,Ls,zc,jb,E3e,T3e,w2,pk,Dy,bg,_0={point:zW,lineStart:C0e,lineEnd:A0e,polygonStart:function(){_0.point=C3e,_0.lineStart=TTt,_0.lineEnd=STt,pk=new ul,cm.polygonStart()},polygonEnd:function(){cm.polygonEnd(),_0.point=zW,_0.lineStart=C0e,_0.lineEnd=A0e,r5<0?(Is=-(Ls=180),Hl=-(zc=90)):pk>hn?zc=90:pk<-1e-6&&(Hl=-90),bg[0]=Is,bg[1]=Ls},sphere:function(){Is=-(Ls=180),Hl=-(zc=90)}};function zW(e,t){Dy.push(bg=[Is=e,Ls=e]),t<Hl&&(Hl=t),t>zc&&(zc=t)}function S3e(e,t){var n=n_([e*ar,t*ar]);if(w2){var r=gT(w2,n),i=[r[1],-r[0],0],s=gT(i,r);o5(s),s=s5(s);var o=e-jb,a=o>0?1:-1,u=s[0]*no*a,l,c=Lr(o)>180;c^(a*jb<u&&u<a*e)?(l=s[1]*no,l>zc&&(zc=l)):(u=(u+360)%360-180,c^(a*jb<u&&u<a*e)?(l=-s[1]*no,l<Hl&&(Hl=l)):(t<Hl&&(Hl=t),t>zc&&(zc=t))),c?e<jb?jc(Is,e)>jc(Is,Ls)&&(Ls=e):jc(e,Ls)>jc(Is,Ls)&&(Is=e):Ls>=Is?(e<Is&&(Is=e),e>Ls&&(Ls=e)):e>jb?jc(Is,e)>jc(Is,Ls)&&(Ls=e):jc(e,Ls)>jc(Is,Ls)&&(Is=e)}else Dy.push(bg=[Is=e,Ls=e]);t<Hl&&(Hl=t),t>zc&&(zc=t),w2=n,jb=e}function C0e(){_0.point=S3e}function A0e(){bg[0]=Is,bg[1]=Ls,_0.point=zW,w2=null}function C3e(e,t){if(w2){var n=e-jb;pk.add(Lr(n)>180?n+(n>0?360:-360):n)}else E3e=e,T3e=t;cm.point(e,t),S3e(e,t)}function TTt(){cm.lineStart()}function STt(){C3e(E3e,T3e),cm.lineEnd(),Lr(pk)>hn&&(Is=-(Ls=180)),bg[0]=Is,bg[1]=Ls,w2=null}function jc(e,t){return(t-=e)<0?t+360:t}function CTt(e,t){return e[0]-t[0]}function I0e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ATt(e){var t,n,r,i,s,o,a;if(zc=Ls=-(Is=Hl=1/0),Dy=[],C0(e,_0),n=Dy.length){for(Dy.sort(CTt),t=1,r=Dy[0],s=[r];t<n;++t)i=Dy[t],I0e(r,i[0])||I0e(r,i[1])?(jc(r[0],i[1])>jc(r[0],r[1])&&(r[1]=i[1]),jc(i[0],r[1])>jc(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=jc(r[1],i[0]))>o&&(o=a,Is=i[0],Ls=r[1])}return Dy=bg=null,Is===1/0||Hl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Is,Hl],[Ls,zc]]}var hI,a5,u5,l5,c5,f5,d5,h5,VW,HW,qW,A3e,I3e,Zu,el,tl,ph={sphere:La,point:cee,lineStart:k0e,lineEnd:R0e,polygonStart:function(){ph.lineStart=RTt,ph.lineEnd=PTt},polygonEnd:function(){ph.lineStart=k0e,ph.lineEnd=R0e}};function cee(e,t){e*=ar,t*=ar;var n=fn(t);mP(n*fn(e),n*rn(e),rn(t))}function mP(e,t,n){++hI,u5+=(e-u5)/hI,l5+=(t-l5)/hI,c5+=(n-c5)/hI}function k0e(){ph.point=ITt}function ITt(e,t){e*=ar,t*=ar;var n=fn(t);Zu=n*fn(e),el=n*rn(e),tl=rn(t),ph.point=kTt,mP(Zu,el,tl)}function kTt(e,t){e*=ar,t*=ar;var n=fn(t),r=n*fn(e),i=n*rn(e),s=rn(t),o=ld(gl((o=el*s-tl*i)*o+(o=tl*r-Zu*s)*o+(o=Zu*i-el*r)*o),Zu*r+el*i+tl*s);a5+=o,f5+=o*(Zu+(Zu=r)),d5+=o*(el+(el=i)),h5+=o*(tl+(tl=s)),mP(Zu,el,tl)}function R0e(){ph.point=cee}function RTt(){ph.point=DTt}function PTt(){k3e(A3e,I3e),ph.point=cee}function DTt(e,t){A3e=e,I3e=t,e*=ar,t*=ar,ph.point=k3e;var n=fn(t);Zu=n*fn(e),el=n*rn(e),tl=rn(t),mP(Zu,el,tl)}function k3e(e,t){e*=ar,t*=ar;var n=fn(t),r=n*fn(e),i=n*rn(e),s=rn(t),o=el*s-tl*i,a=tl*r-Zu*s,u=Zu*i-el*r,l=MW(o,a,u),c=pc(l),f=l&&-c/l;VW.add(f*o),HW.add(f*a),qW.add(f*u),a5+=c,f5+=c*(Zu+(Zu=r)),d5+=c*(el+(el=i)),h5+=c*(tl+(tl=s)),mP(Zu,el,tl)}function NTt(e){hI=a5=u5=l5=c5=f5=d5=h5=0,VW=new ul,HW=new ul,qW=new ul,C0(e,ph);var t=+VW,n=+HW,r=+qW,i=MW(t,n,r);return i<LW&&(t=f5,n=d5,r=h5,a5<hn&&(t=u5,n=l5,r=c5),i=MW(t,n,r),i<LW)?[NaN,NaN]:[ld(n,t)*no,pc(r/i)*no]}function WW(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function GW(e,t){return Lr(e)>cr&&(e-=Math.round(e/ml)*ml),[e,t]}GW.invert=GW;function R3e(e,t,n){return(e%=ml)?t||n?WW(D0e(e),N0e(t,n)):D0e(e):t||n?N0e(t,n):GW}function P0e(e){return function(t,n){return t+=e,Lr(t)>cr&&(t-=Math.round(t/ml)*ml),[t,n]}}function D0e(e){var t=P0e(e);return t.invert=P0e(-e),t}function N0e(e,t){var n=fn(e),r=rn(e),i=fn(t),s=rn(t);function o(a,u){var l=fn(u),c=fn(a)*l,f=rn(a)*l,d=rn(u),h=d*n+c*r;return[ld(f*i-h*s,c*n-d*r),pc(h*i+f*s)]}return o.invert=function(a,u){var l=fn(u),c=fn(a)*l,f=rn(a)*l,d=rn(u),h=d*i-f*s;return[ld(f*i+d*s,c*n+h*r),pc(h*n-c*r)]},o}function OTt(e){e=R3e(e[0]*ar,e[1]*ar,e.length>2?e[2]*ar:0);function t(n){return n=e(n[0]*ar,n[1]*ar),n[0]*=no,n[1]*=no,n}return t.invert=function(n){return n=e.invert(n[0]*ar,n[1]*ar),n[0]*=no,n[1]*=no,n},t}function $Tt(e,t,n,r,i,s){if(n){var o=fn(t),a=rn(t),u=r*n;i==null?(i=t+r*ml,s=t-u/2):(i=O0e(o,i),s=O0e(o,s),(r>0?i<s:i>s)&&(i+=r*ml));for(var l,c=i;r>0?c>s:c<s;c-=u)l=s5([o,-a*fn(c),-a*rn(c)]),e.point(l[0],l[1])}}function O0e(e,t){t=n_(t),t[0]-=e,o5(t);var n=b3e(-t[1]);return((-t[2]<0?-n:n)+ml-hn)%ml}function P3e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:La,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function J4(e,t){return Lr(e[0]-t[0])<hn&&Lr(e[1]-t[1])<hn}function mO(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function D3e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(J4(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*hn}s.push(v=new mO(g,p,null,!0)),o.push(v.o=new mO(g,null,v,!1)),s.push(v=new mO(y,p,null,!1)),o.push(v.o=new mO(y,null,v,!0))}}),!!s.length){for(o.sort(t),$0e(s),$0e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function $0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function dz(e){return Lr(e[0])<=cr?e[0]:Zf(e[0])*((Lr(e[0])+cr)%ml-cr)}function LTt(e,t){var n=dz(t),r=t[1],i=rn(r),s=[rn(n),-fn(n),0],o=0,a=0,u=new ul;i===1?r=qs+hn:i===-1&&(r=-qs-hn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=dz(h),m=h[1]/2+e5,g=rn(m),y=fn(m),v=0;v<d;++v,p=_,g=S,y=C,h=b){var b=f[v],_=dz(b),E=b[1]/2+e5,S=rn(E),C=fn(E),A=_-p,R=A>=0?1:-1,k=R*A,N=k>cr,L=g*S;if(u.add(ld(L*R*rn(k),y*C+L*fn(k))),o+=N?A+R*ml:A,N^p>=n^_>=n){var O=gT(n_(h),n_(b));o5(O);var B=gT(s,O);o5(B);var q=(N^A>=0?-1:1)*pc(B[2]);(r>q||r===q&&(O[0]||O[1]))&&(a+=N^A>=0?1:-1)}}return(o<-1e-6||o<hn&&u<-1e-12)^a&1}function N3e(e,t,n,r){return function(i){var s=t(i),o=P3e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=uRe(c);var _=LTt(l,r);c.length?(u||(i.polygonStart(),u=!0),D3e(c,FTt,_,n,i)):_&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(_,E){e(_,E)&&i.point(_,E)}function p(_,E){s.point(_,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(_,E){f.push([_,E]),a.point(_,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var _=a.clean(),E=o.result(),S,C=E.length,A,R,k;if(f.pop(),l.push(f),f=null,!!C){if(_&1){if(R=E[0],(A=R.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<A;++S)i.point((k=R[S])[0],k[1]);i.lineEnd()}return}C>1&&_&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(MTt))}}return d}}function MTt(e){return e.length>1}function FTt(e,t){return((e=e.x)[0]<0?e[1]-qs-hn:qs-e[1])-((t=t.x)[0]<0?t[1]-qs-hn:qs-t[1])}const L0e=N3e(function(){return!0},BTt,UTt,[-cr,-qs]);function BTt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?cr:-cr,u=Lr(s-t);Lr(u-cr)<hn?(e.point(t,n=(n+o)/2>0?qs:-qs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=cr&&(Lr(t-r)<hn&&(t-=r*hn),Lr(s-a)<hn&&(s-=a*hn),n=jTt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function jTt(e,t,n,r){var i,s,o=rn(e-n);return Lr(o)>hn?zS((rn(t)*(s=fn(r))*rn(n)-rn(r)*(i=fn(t))*rn(e))/(i*s*o)):(t+r)/2}function UTt(e,t,n,r){var i;if(e==null)i=n*qs,r.point(-cr,i),r.point(0,i),r.point(cr,i),r.point(cr,0),r.point(cr,-i),r.point(0,-i),r.point(-cr,-i),r.point(-cr,0),r.point(-cr,i);else if(Lr(e[0]-t[0])>hn){var s=e[0]<t[0]?cr:-cr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function zTt(e){var t=fn(e),n=2*ar,r=t>0,i=Lr(t)>hn;function s(c,f,d,h){$Tt(h,e,n,d,c,f)}function o(c,f){return fn(c)*fn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,_=o(g,y),E=r?_?0:l(g,y):_?l(g+(g<0?cr:-cr),y):0;if(!f&&(p=h=_)&&c.lineStart(),_!==h&&(b=u(f,v),(!b||J4(f,b)||J4(v,b))&&(v[2]=1)),_!==h)m=0,_?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^_){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}_&&(!f||!J4(f,v))&&c.point(v[0],v[1]),f=v,h=_,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=n_(c),p=n_(f),m=[1,0,0],g=gT(h,p),y=hO(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var _=t*y/b,E=-t*v/b,S=gT(m,g),C=pO(m,_),A=pO(g,E);fz(C,A);var R=S,k=hO(C,R),N=hO(R,R),L=k*k-N*(hO(C,C)-1);if(!(L<0)){var O=gl(L),B=pO(R,(-k-O)/N);if(fz(B,C),B=s5(B),!d)return B;var q=c[0],H=f[0],G=c[1],K=f[1],J;H<q&&(J=q,q=H,H=J);var F=H-q,j=Lr(F-cr)<hn,W=j||F<hn;if(!j&&K<G&&(J=G,G=K,K=J),W?j?G+K>0^B[1]<(Lr(B[0]-q)<hn?G:K):G<=B[1]&&B[1]<=K:F>cr^(q<=B[0]&&B[0]<=H)){var M=pO(R,(-k+O)/N);return fz(M,C),[B,s5(M)]}}}function l(c,f){var d=r?e:cr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return N3e(o,a,s,r?[0,-e]:[-cr,e-cr])}function VTt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var gO=1e9,yO=-1e9;function O3e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Lr(l[0]-e)<hn?c>0?0:3:Lr(l[0]-n)<hn?c>0?2:1:Lr(l[1]-t)<hn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=P3e(),d,h,p,m,g,y,v,b,_,E,S,C={point:A,lineStart:L,lineEnd:O,polygonStart:k,polygonEnd:N};function A(q,H){i(q,H)&&c.point(q,H)}function R(){for(var q=0,H=0,G=h.length;H<G;++H)for(var K=h[H],J=1,F=K.length,j=K[0],W,M,V=j[0],Q=j[1];J<F;++J)W=V,M=Q,j=K[J],V=j[0],Q=j[1],M<=r?Q>r&&(V-W)*(r-M)>(Q-M)*(e-W)&&++q:Q<=r&&(V-W)*(r-M)<(Q-M)*(e-W)&&--q;return q}function k(){c=f,d=[],h=[],S=!0}function N(){var q=R(),H=S&&q,G=(d=uRe(d)).length;(H||G)&&(l.polygonStart(),H&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),G&&D3e(d,a,q,s,l),l.polygonEnd()),c=l,d=h=p=null}function L(){C.point=B,h&&h.push(p=[]),E=!0,_=!1,v=b=NaN}function O(){d&&(B(m,g),y&&_&&f.rejoin(),d.push(f.result())),C.point=A,_&&c.lineEnd()}function B(q,H){var G=i(q,H);if(h&&p.push([q,H]),E)m=q,g=H,y=G,E=!1,G&&(c.lineStart(),c.point(q,H));else if(G&&_)c.point(q,H);else{var K=[v=Math.max(yO,Math.min(gO,v)),b=Math.max(yO,Math.min(gO,b))],J=[q=Math.max(yO,Math.min(gO,q)),H=Math.max(yO,Math.min(gO,H))];VTt(K,J,e,t,n,r)?(_||(c.lineStart(),c.point(K[0],K[1])),c.point(J[0],J[1]),G||c.lineEnd(),S=!1):G&&(c.lineStart(),c.point(q,H),S=!1)}v=q,b=H,_=G}return C}}function M0e(e,t,n){var r=Zl(e,t-hn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function F0e(e,t,n){var r=Zl(e,t-hn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function HTt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Zl(dO(r/c)*c,n,c).map(p).concat(Zl(dO(a/f)*f,o,f).map(m)).concat(Zl(dO(t/u)*u,e,u).filter(function(b){return Lr(b%c)>hn}).map(d)).concat(Zl(dO(s/l)*l,i,l).filter(function(b){return Lr(b%f)>hn}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=M0e(s,i,90),h=F0e(t,e,g),p=M0e(a,o,90),m=F0e(r,n,g),y):g},y.extentMajor([[-180,-90+hn],[180,90-hn]]).extentMinor([[-180,-80-hn],[180,80+hn]])}const NR=e=>e;var hz=new ul,YW=new ul,$3e,L3e,KW,XW,A0={point:La,lineStart:La,lineEnd:La,polygonStart:function(){A0.lineStart=qTt,A0.lineEnd=GTt},polygonEnd:function(){A0.lineStart=A0.lineEnd=A0.point=La,hz.add(Lr(YW)),YW=new ul},result:function(){var e=hz/2;return hz=new ul,e}};function qTt(){A0.point=WTt}function WTt(e,t){A0.point=M3e,$3e=KW=e,L3e=XW=t}function M3e(e,t){YW.add(XW*e-KW*t),KW=e,XW=t}function GTt(){M3e($3e,L3e)}var yT=1/0,p5=yT,OR=-yT,m5=OR,g5={point:YTt,lineStart:La,lineEnd:La,polygonStart:La,polygonEnd:La,result:function(){var e=[[yT,p5],[OR,m5]];return OR=m5=-(p5=yT=1/0),e}};function YTt(e,t){e<yT&&(yT=e),e>OR&&(OR=e),t<p5&&(p5=t),t>m5&&(m5=t)}var QW=0,JW=0,pI=0,y5=0,v5=0,XE=0,ZW=0,eG=0,mI=0,F3e,B3e,kp,Rp,Xf={point:r_,lineStart:B0e,lineEnd:j0e,polygonStart:function(){Xf.lineStart=QTt,Xf.lineEnd=JTt},polygonEnd:function(){Xf.point=r_,Xf.lineStart=B0e,Xf.lineEnd=j0e},result:function(){var e=mI?[ZW/mI,eG/mI]:XE?[y5/XE,v5/XE]:pI?[QW/pI,JW/pI]:[NaN,NaN];return QW=JW=pI=y5=v5=XE=ZW=eG=mI=0,e}};function r_(e,t){QW+=e,JW+=t,++pI}function B0e(){Xf.point=KTt}function KTt(e,t){Xf.point=XTt,r_(kp=e,Rp=t)}function XTt(e,t){var n=e-kp,r=t-Rp,i=gl(n*n+r*r);y5+=i*(kp+e)/2,v5+=i*(Rp+t)/2,XE+=i,r_(kp=e,Rp=t)}function j0e(){Xf.point=r_}function QTt(){Xf.point=ZTt}function JTt(){j3e(F3e,B3e)}function ZTt(e,t){Xf.point=j3e,r_(F3e=kp=e,B3e=Rp=t)}function j3e(e,t){var n=e-kp,r=t-Rp,i=gl(n*n+r*r);y5+=i*(kp+e)/2,v5+=i*(Rp+t)/2,XE+=i,i=Rp*e-kp*t,ZW+=i*(kp+e),eG+=i*(Rp+t),mI+=i*3,r_(kp=e,Rp=t)}function U3e(e){this._context=e}U3e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ml);break}}},result:La};var tG=new ul,pz,z3e,V3e,gI,yI,$R={point:La,lineStart:function(){$R.point=eSt},lineEnd:function(){pz&&H3e(z3e,V3e),$R.point=La},polygonStart:function(){pz=!0},polygonEnd:function(){pz=null},result:function(){var e=+tG;return tG=new ul,e}};function eSt(e,t){$R.point=H3e,z3e=gI=e,V3e=yI=t}function H3e(e,t){gI-=e,yI-=t,tG.add(gl(gI*gI+yI*yI)),gI=e,yI=t}let U0e,b5,z0e,V0e;class H0e{constructor(t){this._append=t==null?q3e:tSt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==z0e||this._append!==b5){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,z0e=r,b5=this._append,V0e=this._,this._=i}this._+=V0e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function q3e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function tSt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return q3e;if(t!==U0e){const n=10**t;U0e=t,b5=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return b5}function W3e(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),C0(a,i(s))),s.result()}return o.area=function(a){return C0(a,i(A0)),A0.result()},o.measure=function(a){return C0(a,i($R)),$R.result()},o.bounds=function(a){return C0(a,i(g5)),g5.result()},o.centroid=function(a){return C0(a,i(Xf)),Xf.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,NR):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new H0e(n)):new U3e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new H0e(n)),o},o.projection(e).digits(n).context(t)}function e8(e){return function(t){var n=new nG;for(var r in e)n[r]=e[r];return n.stream=t,n}}function nG(){}nG.prototype={constructor:nG,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fee(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),C0(n,e.stream(g5)),t(g5.result()),r!=null&&e.clipExtent(r),e}function t8(e,t,n){return fee(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function dee(e,t,n){return t8(e,[[0,0],t],n)}function hee(e,t,n){return fee(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function pee(e,t,n){return fee(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var q0e=16,nSt=fn(30*ar);function W0e(e,t){return+t?iSt(e,t):rSt(e)}function rSt(e){return e8({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function iSt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var _=o+d,E=a+h,S=u+p,C=gl(_*_+E*E+S*S),A=pc(S/=C),R=Lr(Lr(S)-1)<hn||Lr(s-f)<hn?(s+f)/2:ld(E,_),k=e(R,A),N=k[0],L=k[1],O=N-r,B=L-i,q=v*O-y*B;(q*q/b>t||Lr((y*O+v*B)/b-.5)>.3||o*d+a*h+u*p<nSt)&&(n(r,i,s,o,a,u,N,L,R,_/=C,E/=C,S,m,g),g.point(N,L),n(N,L,R,_,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,R){A=e(A,R),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,R){var k=n_([A,R]),N=e(A,R);n(f,d,c,h,p,m,f=N[0],d=N[1],c=A,h=k[0],p=k[1],m=k[2],q0e,r),r.point(f,d)}function _(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=C}function S(A,R){b(i=A,R),s=f,o=d,a=h,u=p,l=m,g.point=b}function C(){n(f,d,c,h,p,m,s,o,i,a,u,l,q0e,r),g.lineEnd=_,_()}return g}}var sSt=e8({point:function(e,t){this.stream.point(e*ar,t*ar)}});function oSt(e){return e8({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function aSt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function G0e(e,t,n,r,i,s){if(!s)return aSt(e,t,n,r,i);var o=fn(s),a=rn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Nm(e){return G3e(function(){return e})()}function G3e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=L0e,g=null,y,v,b,_=NR,E=.5,S,C,A,R,k;function N(q){return A(q[0]*ar,q[1]*ar)}function L(q){return q=A.invert(q[0],q[1]),q&&[q[0]*no,q[1]*no]}N.stream=function(q){return R&&k===q?R:R=sSt(oSt(c)(m(S(_(k=q)))))},N.preclip=function(q){return arguments.length?(m=q,p=void 0,B()):m},N.postclip=function(q){return arguments.length?(_=q,g=y=v=b=null,B()):_},N.clipAngle=function(q){return arguments.length?(m=+q?zTt(p=q*ar):(p=null,L0e),B()):p*no},N.clipExtent=function(q){return arguments.length?(_=q==null?(g=y=v=b=null,NR):O3e(g=+q[0][0],y=+q[0][1],v=+q[1][0],b=+q[1][1]),B()):g==null?null:[[g,y],[v,b]]},N.scale=function(q){return arguments.length?(n=+q,O()):n},N.translate=function(q){return arguments.length?(r=+q[0],i=+q[1],O()):[r,i]},N.center=function(q){return arguments.length?(s=q[0]%360*ar,o=q[1]%360*ar,O()):[s*no,o*no]},N.rotate=function(q){return arguments.length?(a=q[0]%360*ar,u=q[1]%360*ar,l=q.length>2?q[2]%360*ar:0,O()):[a*no,u*no,l*no]},N.angle=function(q){return arguments.length?(f=q%360*ar,O()):f*no},N.reflectX=function(q){return arguments.length?(d=q?-1:1,O()):d<0},N.reflectY=function(q){return arguments.length?(h=q?-1:1,O()):h<0},N.precision=function(q){return arguments.length?(S=W0e(C,E=q*q),B()):gl(E)},N.fitExtent=function(q,H){return t8(N,q,H)},N.fitSize=function(q,H){return dee(N,q,H)},N.fitWidth=function(q,H){return hee(N,q,H)},N.fitHeight=function(q,H){return pee(N,q,H)};function O(){var q=G0e(n,0,0,d,h,f).apply(null,t(s,o)),H=G0e(n,r-q[0],i-q[1],d,h,f);return c=R3e(a,u,l),C=WW(t,H),A=WW(c,C),S=W0e(C,E),B()}function B(){return R=k=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&L,O()}}function mee(e){var t=0,n=cr/3,r=G3e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*ar,n=s[1]*ar):[t*no,n*no]},i}function uSt(e){var t=fn(e);function n(r,i){return[r*t,rn(i)/t]}return n.invert=function(r,i){return[r/t,pc(i*t)]},n}function lSt(e,t){var n=rn(e),r=(n+rn(t))/2;if(Lr(r)<hn)return uSt(e);var i=1+n*(2*r-n),s=gl(i)/r;function o(a,u){var l=gl(i-2*r*rn(u))/r;return[l*rn(a*=r),s-l*fn(a)]}return o.invert=function(a,u){var l=s-u,c=ld(a,Lr(l))*Zf(l);return l*r<0&&(c-=cr*Zf(a)*Zf(l)),[c/r,pc((i-(a*a+l*l)*r*r)/(2*r))]},o}function x5(){return mee(lSt).scale(155.424).center([0,33.6442])}function Y3e(){return x5().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function cSt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function fSt(){var e,t,n=Y3e(),r,i=x5().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=x5().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=cSt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+hn,m+.12*h+hn],[p-.214*h-hn,m+.234*h-hn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+hn,m+.166*h+hn],[p-.115*h-hn,m+.234*h-hn]]).stream(l),f()},c.fitExtent=function(d,h){return t8(c,d,h)},c.fitSize=function(d,h){return dee(c,d,h)},c.fitWidth=function(d,h){return hee(c,d,h)},c.fitHeight=function(d,h){return pee(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function K3e(e){return function(t,n){var r=fn(t),i=fn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*rn(t),s*rn(n)]}}function gP(e){return function(t,n){var r=gl(t*t+n*n),i=e(r),s=rn(i),o=fn(i);return[ld(t*s,r*o),pc(r&&n*s/r)]}}var X3e=K3e(function(e){return gl(2/(1+e))});X3e.invert=gP(function(e){return 2*pc(e/2)});function dSt(){return Nm(X3e).scale(124.75).clipAngle(180-.001)}var Q3e=K3e(function(e){return(e=b3e(e))&&e/rn(e)});Q3e.invert=gP(function(e){return e});function hSt(){return Nm(Q3e).scale(79.4188).clipAngle(180-.001)}function n8(e,t){return[e,t5(lee((qs+t)/2))]}n8.invert=function(e,t){return[e,2*zS(v3e(t))-qs]};function pSt(){return J3e(n8).scale(961/ml)}function J3e(e){var t=Nm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=cr*r(),d=t(OTt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===n8?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function vO(e){return lee((qs+e)/2)}function mSt(e,t){var n=fn(e),r=e===t?rn(e):t5(n/fn(t))/t5(vO(t)/vO(e)),i=n*cz(vO(e),r)/r;if(!r)return n8;function s(o,a){i>0?a<-qs+hn&&(a=-qs+hn):a>qs-hn&&(a=qs-hn);var u=i/cz(vO(a),r);return[u*rn(r*o),i-u*fn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Zf(r)*gl(o*o+u*u),c=ld(o,Lr(u))*Zf(u);return u*r<0&&(c-=cr*Zf(o)*Zf(u)),[c/r,2*zS(cz(i/l,1/r))-qs]},s}function gSt(){return mee(mSt).scale(109.5).parallels([30,30])}function _5(e,t){return[e,t]}_5.invert=_5;function ySt(){return Nm(_5).scale(152.63)}function vSt(e,t){var n=fn(e),r=e===t?rn(e):(n-fn(t))/(t-e),i=n/r+e;if(Lr(r)<hn)return _5;function s(o,a){var u=i-a,l=r*o;return[u*rn(l),i-u*fn(l)]}return s.invert=function(o,a){var u=i-a,l=ld(o,Lr(u))*Zf(u);return u*r<0&&(l-=cr*Zf(o)*Zf(u)),[l/r,i-Zf(r)*gl(o*o+u*u)]},s}function bSt(){return mee(vSt).scale(131.154).center([0,13.9389])}var mk=1.340264,gk=-.081106,yk=893e-6,vk=.003796,w5=gl(3)/2,xSt=12;function Z3e(e,t){var n=pc(w5*rn(t)),r=n*n,i=r*r*r;return[e*fn(n)/(w5*(mk+3*gk*r+i*(7*yk+9*vk*r))),n*(mk+gk*r+i*(yk+vk*r))]}Z3e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<xSt&&(a=n*(mk+gk*r+i*(yk+vk*r))-t,u=mk+3*gk*r+i*(7*yk+9*vk*r),n-=o=a/u,r=n*n,i=r*r*r,!(Lr(o)<LW));++s);return[w5*e*(mk+3*gk*r+i*(7*yk+9*vk*r))/fn(n),pc(rn(n)/w5)]};function _St(){return Nm(Z3e).scale(177.158)}function ePe(e,t){var n=fn(t),r=fn(e)*n;return[n*rn(e)/r,rn(t)/r]}ePe.invert=gP(zS);function wSt(){return Nm(ePe).scale(144.049).clipAngle(60)}function ESt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=e8({point:function(_,E){var S=b([_,E]);this.stream.point(S[0],S[1])}}),m=NR,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(_){var E=_[0]*d,S=_[1]*h;if(s){var C=S*o-E*a;E=E*o+S*a,S=C}return[E+t,S+n]}return b.invert=function(_){var E=_[0]-t,S=_[1]-n;if(s){var C=S*o+E*a;E=E*o-S*a,S=C}return[E/d,S/h]},b.stream=function(_){return g&&y===_?g:g=p(m(y=_))},b.postclip=function(_){return arguments.length?(m=_,u=l=c=f=null,v()):m},b.clipExtent=function(_){return arguments.length?(m=_==null?(u=l=c=f=null,NR):O3e(u=+_[0][0],l=+_[0][1],c=+_[1][0],f=+_[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(_){return arguments.length?(e=+_,v()):e},b.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],v()):[t,n]},b.angle=function(_){return arguments.length?(s=_%360*ar,a=rn(s),o=fn(s),v()):s*no},b.reflectX=function(_){return arguments.length?(r=_?-1:1,v()):r<0},b.reflectY=function(_){return arguments.length?(i=_?-1:1,v()):i<0},b.fitExtent=function(_,E){return t8(b,_,E)},b.fitSize=function(_,E){return dee(b,_,E)},b.fitWidth=function(_,E){return hee(b,_,E)},b.fitHeight=function(_,E){return pee(b,_,E)},b}function tPe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}tPe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Lr(i)>hn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function TSt(){return Nm(tPe).scale(175.295)}function nPe(e,t){return[fn(t)*rn(e),rn(t)]}nPe.invert=gP(pc);function SSt(){return Nm(nPe).scale(249.5).clipAngle(90+hn)}function rPe(e,t){var n=fn(t),r=1+fn(e)*n;return[n*rn(e)/r,rn(t)/r]}rPe.invert=gP(function(e){return 2*zS(e)});function CSt(){return Nm(rPe).scale(250).clipAngle(142)}function iPe(e,t){return[t5(lee((qs+t)/2)),-e]}iPe.invert=function(e,t){return[-t,2*zS(v3e(e))-qs]};function ASt(){var e=J3e(iPe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function ISt(e,t){return e.parent===t.parent?1:2}function kSt(e){return e.reduce(RSt,0)/e.length}function RSt(e,t){return e+t.x}function PSt(e){return 1+e.reduce(DSt,0)}function DSt(e,t){return Math.max(e,t.y)}function NSt(e){for(var t;t=e.children;)e=t[0];return e}function OSt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function $St(){var e=ISt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=kSt(h),d.y=PSt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=NSt(s),l=OSt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function LSt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function MSt(){return this.eachAfter(LSt)}function FSt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function BSt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function jSt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function USt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function zSt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function VSt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function HSt(e){for(var t=this,n=qSt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function qSt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function WSt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function GSt(){return Array.from(this)}function YSt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function KSt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*XSt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function r8(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=ZSt)):t===void 0&&(t=JSt);for(var n=new vT(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new vT(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(sPe)}function QSt(){return r8(this).eachBefore(eCt)}function JSt(e){return e.children}function ZSt(e){return Array.isArray(e)?e[1]:null}function eCt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function sPe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function vT(e){this.data=e,this.depth=this.height=0,this.parent=null}vT.prototype=r8.prototype={constructor:vT,count:MSt,each:FSt,eachAfter:jSt,eachBefore:BSt,find:USt,sum:zSt,sort:VSt,path:HSt,ancestors:WSt,descendants:GSt,leaves:YSt,links:KSt,copy:QSt,[Symbol.iterator]:XSt};function Z4(e){return e==null?null:oPe(e)}function oPe(e){if(typeof e!="function")throw new Error;return e}function Zb(){return 0}function TE(e){return function(){return e}}const tCt=1664525,nCt=1013904223,Y0e=4294967296;function rCt(){let e=1;return()=>(e=(tCt*e+nCt)%Y0e)/Y0e}function iCt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sCt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function oCt(e,t){for(var n=0,r=(e=sCt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&aPe(o,s)?++n:(o=uCt(i=aCt(i,s)),n=0);return o}function aCt(e,t){var n,r;if(mz(t,e))return[t];for(n=0;n<e.length;++n)if(bO(t,e[n])&&mz(vI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(bO(vI(e[n],e[r]),t)&&bO(vI(e[n],t),e[r])&&bO(vI(e[r],t),e[n])&&mz(uPe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function bO(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function aPe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function mz(e,t){for(var n=0;n<t.length;++n)if(!aPe(e,t[n]))return!1;return!0}function uCt(e){switch(e.length){case 1:return lCt(e[0]);case 2:return vI(e[0],e[1]);case 3:return uPe(e[0],e[1],e[2])}}function lCt(e){return{x:e.x,y:e.y,r:e.r}}function vI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function uPe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,_=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*_-m*b)/(E*2)-r,C=(m*g-p*y)/E,A=(h*b-d*_)/(E*2)-i,R=(d*y-h*g)/E,k=C*C+R*R-1,N=2*(s+S*C+A*R),L=S*S+A*A-s*s,O=-(Math.abs(k)>1e-6?(N+Math.sqrt(N*N-4*k*L))/(2*k):L/N);return{x:r+S+C*O,y:i+A+R*O,r:O}}function K0e(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function X0e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Q0e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function xO(e){this._=e,this.next=null,this.previous=null}function cCt(e,t){if(!(s=(e=iCt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;K0e(r,n,i=e[2]),n=new xO(n),r=new xO(r),i=new xO(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){K0e(n._,r._,i=e[u]),i=new xO(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(X0e(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(X0e(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Q0e(n);(i=i.next)!==r;)(a=Q0e(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=oCt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function fCt(e){return Math.sqrt(e.value)}function lPe(){var e=null,t=1,n=1,r=Zb;function i(s){const o=rCt();return s.x=t/2,s.y=n/2,e?s.eachBefore(J0e(e)).eachAfter(gz(r,.5,o)).eachBefore(Z0e(1)):s.eachBefore(J0e(fCt)).eachAfter(gz(Zb,1,o)).eachAfter(gz(r,s.r/Math.min(t,n),o)).eachBefore(Z0e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=Z4(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:TE(+s),i):r},i}function J0e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function gz(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=cCt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Z0e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function cPe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function yP(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function dCt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(cPe),o}function s(o,a){return function(u){u.children&&yP(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var hCt={depth:-1},ege={},yz={};function pCt(e){return e.id}function mCt(e){return e.parentId}function tge(){var e=pCt,t=mCt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((_,E)=>gCt(n(_,E,i))),v=y.map(nge),b=new Set(y).add("");for(const _ of v)b.has(_)||(b.add(_),y.push(_),v.push(nge(_)),s.push(yz));o=(_,E)=>y[E],a=(_,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new vT(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?ege:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===ege)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===yz&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===yz);--y)h.data=null}if(f.parent=hCt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(sPe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Z4(i),r):e},r.parentId=function(i){return arguments.length?(t=Z4(i),r):t},r.path=function(i){return arguments.length?(n=Z4(i),r):n},r}function gCt(e){e=`${e}`;let t=e.length;return rG(e,t-1)&&!rG(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function nge(e){let t=e.length;if(t<2)return"";for(;--t>1&&!rG(e,t););return e.slice(0,t)}function rG(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function yCt(e,t){return e.parent===t.parent?1:2}function vz(e){var t=e.children;return t?t[0]:e.t}function bz(e){var t=e.children;return t?t[t.length-1]:e.t}function vCt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function bCt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function xCt(e,t,n){return e.a.parent===t.parent?e.a:n}function e6(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}e6.prototype=Object.create(vT.prototype);function _Ct(e){for(var t=new e6(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new e6(s[o],o)),i.parent=n;return(t.parent=new e6(null,0)).children=[t],t}function wCt(){var e=yCt,t=1,n=1,r=null;function i(l){var c=_Ct(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){bCt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,_;p=bz(p),d=vz(d),p&&d;)m=vz(m),h=bz(h),h.a=l,_=p.z+v-d.z-g+e(p._,d._),_>0&&(vCt(xCt(p,l,f),l,_),g+=_,y+=_),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!bz(h)&&(h.t=p,h.m+=v-y),d&&!vz(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function i8(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var fPe=(1+Math.sqrt(5))/2;function dPe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,_,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,_=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,b=Math.max(v/S,S/y),b>_){g-=l;break}_=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?yP(u,n,r,i,m?r+=p*g/m:s):i8(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const hPe=function e(t){function n(r,i,s,o,a){dPe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(fPe);function ECt(){var e=hPe,t=!1,n=1,r=1,i=[0],s=Zb,o=Zb,a=Zb,u=Zb,l=Zb;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(cPe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=oPe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:TE(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:TE(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:TE(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:TE(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:TE(+d),c):l},c}function TCt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],_=h/2+b,E=f+1,S=d-1;E<S;){var C=E+S>>>1;l[C]<_?E=C+1:S=C}_-l[E-1]<l[E]-_&&f+1<E&&--E;var A=l[E]-b,R=h-A;if(g-p>y-m){var k=h?(p*R+g*A)/h:g;c(f,E,A,p,m,k,y),c(E,d,R,k,m,g,y)}else{var N=h?(m*R+y*A)/h:y;c(f,E,A,p,m,g,N),c(E,d,R,p,N,g,y)}}}function SCt(e,t,n,r,i){(e.depth&1?i8:yP)(e,t,n,r,i)}const CCt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?yP(l,i,s,o,m?s+=(a-s)*l.value/m:a):i8(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=dPe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(fPe);function Gh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function jv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const iG=Symbol("implicit");function Uv(){var e=new Lme,t=[],n=[],r=iG;function i(s){let o=e.get(s);if(o===void 0){if(r!==iG)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Lme;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Uv(t,n).unknown(r)},Gh.apply(i,arguments),i}function VS(){var e=Uv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Zl(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return VS(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Gh.apply(f(),arguments)}function ACt(e){return function(){return e}}function sG(e){return+e}var rge=[0,1];function ec(e){return e}function oG(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ACt(isNaN(t)?NaN:.5)}function ICt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function kCt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=oG(i,r),s=n(o,s)):(r=oG(r,i),s=n(s,o)),function(a){return s(r(a))}}function RCt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=oG(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=z1(e,a,1,r)-1;return s[u](i[u](a))}}function vP(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function s8(){var e=rge,t=rge,n=Vg,r,i,s,o=ec,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==ec&&(o=ICt(e[0],e[d-1])),a=d>2?RCt:kCt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Gf)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,sG),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=hP,c()},f.clamp=function(d){return arguments.length?(o=d?!0:ec,c()):o!==ec},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function pPe(){return s8()(ec,ec)}function mPe(e,t,n,r){var i=V1(e,t,n),s;switch(r=t_(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=g3e(i,o))&&(r.precision=s),uee(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=y3e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=m3e(i))&&(r.precision=s-(r.type==="%")*2);break}}return Bv(r)}function Z_(e){var t=e.domain;return e.ticks=function(n){var r=t();return yW(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return mPe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=vW(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function va(){var e=pPe();return e.copy=function(){return vP(e,va())},Gh.apply(e,arguments),Z_(e)}function gPe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,sG),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return gPe(e).unknown(t)},e=arguments.length?Array.from(e,sG):[0,1],Z_(n)}function yPe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function ige(e){return Math.log(e)}function sge(e){return Math.exp(e)}function PCt(e){return-Math.log(-e)}function DCt(e){return-Math.exp(-e)}function NCt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function OCt(e){return e===10?NCt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $Ct(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function oge(e){return(t,n)=>-e(-t,n)}function gee(e){const t=e(ige,sge),n=t.domain;let r=10,i,s;function o(){return i=$Ct(r),s=OCt(r),n()[0]<0?(i=oge(i),s=oge(s),e(PCt,DCt)):e(ige,sge),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=yW(l,c,g))}else y=yW(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=t_(u)).precision==null&&(u.trim=!0),u=Bv(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(yPe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function vPe(){const e=gee(s8()).domain([1,10]);return e.copy=()=>vP(e,vPe()).base(e.base()),Gh.apply(e,arguments),e}function age(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uge(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function yee(e){var t=1,n=e(age(t),uge(t));return n.constant=function(r){return arguments.length?e(age(t=+r),uge(t)):t},Z_(n)}function bPe(){var e=yee(s8());return e.copy=function(){return vP(e,bPe()).constant(e.constant())},Gh.apply(e,arguments)}function lge(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function LCt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function MCt(e){return e<0?-e*e:e*e}function vee(e){var t=e(ec,ec),n=1;function r(){return n===1?e(ec,ec):n===.5?e(LCt,MCt):e(lge(n),lge(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Z_(t)}function bee(){var e=vee(s8());return e.copy=function(){return vP(e,bee()).exponent(e.exponent())},Gh.apply(e,arguments),e}function FCt(){return bee.apply(null,arguments).exponent(.5)}function xPe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=oRe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[z1(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(X0),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return xPe().domain(e).range(t).unknown(r)},Gh.apply(s,arguments)}function _Pe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[z1(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return _Pe().domain([e,t]).range(i).unknown(s)},Gh.apply(Z_(o),arguments)}function wPe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[z1(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return wPe().domain(e).range(t).unknown(n)},Gh.apply(i,arguments)}const xz=new Date,_z=new Date;function Ko(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Ko(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(xz.setTime(+s),_z.setTime(+o),e(xz),e(_z),Math.floor(n(xz,_z))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const bT=Ko(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bT.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ko(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):bT);bT.range;const F0=1e3,ed=F0*60,B0=ed*60,xg=B0*24,xee=xg*7,cge=xg*30,wz=xg*365,j0=Ko(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*F0)},(e,t)=>(t-e)/F0,e=>e.getUTCSeconds());j0.range;const o8=Ko(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*F0)},(e,t)=>{e.setTime(+e+t*ed)},(e,t)=>(t-e)/ed,e=>e.getMinutes());o8.range;const a8=Ko(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ed)},(e,t)=>(t-e)/ed,e=>e.getUTCMinutes());a8.range;const u8=Ko(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*F0-e.getMinutes()*ed)},(e,t)=>{e.setTime(+e+t*B0)},(e,t)=>(t-e)/B0,e=>e.getHours());u8.range;const l8=Ko(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*B0)},(e,t)=>(t-e)/B0,e=>e.getUTCHours());l8.range;const Z0=Ko(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ed)/xg,e=>e.getDate()-1);Z0.range;const w1=Ko(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xg,e=>e.getUTCDate()-1);w1.range;const EPe=Ko(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xg,e=>Math.floor(e/xg));EPe.range;function ew(e){return Ko(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ed)/xee)}const HS=ew(0),E5=ew(1),BCt=ew(2),jCt=ew(3),xT=ew(4),UCt=ew(5),zCt=ew(6);HS.range;E5.range;BCt.range;jCt.range;xT.range;UCt.range;zCt.range;function tw(e){return Ko(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/xee)}const qS=tw(0),T5=tw(1),VCt=tw(2),HCt=tw(3),_T=tw(4),qCt=tw(5),WCt=tw(6);qS.range;T5.range;VCt.range;HCt.range;_T.range;qCt.range;WCt.range;const LR=Ko(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());LR.range;const MR=Ko(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());MR.range;const fm=Ko(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());fm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ko(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});fm.range;const dm=Ko(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());dm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ko(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});dm.range;function TPe(e,t,n,r,i,s){const o=[[j0,1,F0],[j0,5,5*F0],[j0,15,15*F0],[j0,30,30*F0],[s,1,ed],[s,5,5*ed],[s,15,15*ed],[s,30,30*ed],[i,1,B0],[i,3,3*B0],[i,6,6*B0],[i,12,12*B0],[r,1,xg],[r,2,2*xg],[n,1,xee],[t,1,cge],[t,3,3*cge],[e,1,wz]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=wh(([,,g])=>g).right(o,d);if(h===o.length)return e.every(V1(l/wz,c/wz,f));if(h===0)return bT.every(Math.max(V1(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[GCt,YCt]=TPe(dm,MR,qS,EPe,l8,a8),[KCt,XCt]=TPe(fm,LR,HS,Z0,u8,o8);function Ez(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Tz(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function _A(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function SPe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=wA(i),c=EA(i),f=wA(s),d=EA(s),h=wA(o),p=EA(o),m=wA(a),g=EA(a),y=wA(u),v=EA(u),b={a:G,A:K,b:J,B:F,c:null,d:gge,e:gge,f:bAt,g:kAt,G:PAt,H:gAt,I:yAt,j:vAt,L:CPe,m:xAt,M:_At,p:j,q:W,Q:bge,s:xge,S:wAt,u:EAt,U:TAt,V:SAt,w:CAt,W:AAt,x:null,X:null,y:IAt,Y:RAt,Z:DAt,"%":vge},_={a:M,A:V,b:Q,B:se,c:null,d:yge,e:yge,f:LAt,g:WAt,G:YAt,H:NAt,I:OAt,j:$At,L:IPe,m:MAt,M:FAt,p:be,q:he,Q:bge,s:xge,S:BAt,u:jAt,U:UAt,V:zAt,w:VAt,W:HAt,x:null,X:null,y:qAt,Y:GAt,Z:KAt,"%":vge},E={a:k,A:N,b:L,B:O,c:B,d:pge,e:pge,f:dAt,g:hge,G:dge,H:mge,I:mge,j:uAt,L:fAt,m:aAt,M:lAt,p:R,q:oAt,Q:pAt,s:mAt,S:cAt,u:tAt,U:nAt,V:rAt,w:eAt,W:iAt,x:q,X:H,y:hge,Y:dge,Z:sAt,"%":hAt};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),_.x=S(n,_),_.X=S(r,_),_.c=S(t,_);function S(Ae,Ne){return function(rt){var Re=[],Tt=-1,Ze=0,It=Ae.length,mt,Se,Fe;for(rt instanceof Date||(rt=new Date(+rt));++Tt<It;)Ae.charCodeAt(Tt)===37&&(Re.push(Ae.slice(Ze,Tt)),(Se=fge[mt=Ae.charAt(++Tt)])!=null?mt=Ae.charAt(++Tt):Se=mt==="e"?" ":"0",(Fe=Ne[mt])&&(mt=Fe(rt,Se)),Re.push(mt),Ze=Tt+1);return Re.push(Ae.slice(Ze,Tt)),Re.join("")}}function C(Ae,Ne){return function(rt){var Re=_A(1900,void 0,1),Tt=A(Re,Ae,rt+="",0),Ze,It;if(Tt!=rt.length)return null;if("Q"in Re)return new Date(Re.Q);if("s"in Re)return new Date(Re.s*1e3+("L"in Re?Re.L:0));if(Ne&&!("Z"in Re)&&(Re.Z=0),"p"in Re&&(Re.H=Re.H%12+Re.p*12),Re.m===void 0&&(Re.m="q"in Re?Re.q:0),"V"in Re){if(Re.V<1||Re.V>53)return null;"w"in Re||(Re.w=1),"Z"in Re?(Ze=Tz(_A(Re.y,0,1)),It=Ze.getUTCDay(),Ze=It>4||It===0?T5.ceil(Ze):T5(Ze),Ze=w1.offset(Ze,(Re.V-1)*7),Re.y=Ze.getUTCFullYear(),Re.m=Ze.getUTCMonth(),Re.d=Ze.getUTCDate()+(Re.w+6)%7):(Ze=Ez(_A(Re.y,0,1)),It=Ze.getDay(),Ze=It>4||It===0?E5.ceil(Ze):E5(Ze),Ze=Z0.offset(Ze,(Re.V-1)*7),Re.y=Ze.getFullYear(),Re.m=Ze.getMonth(),Re.d=Ze.getDate()+(Re.w+6)%7)}else("W"in Re||"U"in Re)&&("w"in Re||(Re.w="u"in Re?Re.u%7:"W"in Re?1:0),It="Z"in Re?Tz(_A(Re.y,0,1)).getUTCDay():Ez(_A(Re.y,0,1)).getDay(),Re.m=0,Re.d="W"in Re?(Re.w+6)%7+Re.W*7-(It+5)%7:Re.w+Re.U*7-(It+6)%7);return"Z"in Re?(Re.H+=Re.Z/100|0,Re.M+=Re.Z%100,Tz(Re)):Ez(Re)}}function A(Ae,Ne,rt,Re){for(var Tt=0,Ze=Ne.length,It=rt.length,mt,Se;Tt<Ze;){if(Re>=It)return-1;if(mt=Ne.charCodeAt(Tt++),mt===37){if(mt=Ne.charAt(Tt++),Se=E[mt in fge?Ne.charAt(Tt++):mt],!Se||(Re=Se(Ae,rt,Re))<0)return-1}else if(mt!=rt.charCodeAt(Re++))return-1}return Re}function R(Ae,Ne,rt){var Re=l.exec(Ne.slice(rt));return Re?(Ae.p=c.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function k(Ae,Ne,rt){var Re=h.exec(Ne.slice(rt));return Re?(Ae.w=p.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function N(Ae,Ne,rt){var Re=f.exec(Ne.slice(rt));return Re?(Ae.w=d.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function L(Ae,Ne,rt){var Re=y.exec(Ne.slice(rt));return Re?(Ae.m=v.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function O(Ae,Ne,rt){var Re=m.exec(Ne.slice(rt));return Re?(Ae.m=g.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function B(Ae,Ne,rt){return A(Ae,t,Ne,rt)}function q(Ae,Ne,rt){return A(Ae,n,Ne,rt)}function H(Ae,Ne,rt){return A(Ae,r,Ne,rt)}function G(Ae){return o[Ae.getDay()]}function K(Ae){return s[Ae.getDay()]}function J(Ae){return u[Ae.getMonth()]}function F(Ae){return a[Ae.getMonth()]}function j(Ae){return i[+(Ae.getHours()>=12)]}function W(Ae){return 1+~~(Ae.getMonth()/3)}function M(Ae){return o[Ae.getUTCDay()]}function V(Ae){return s[Ae.getUTCDay()]}function Q(Ae){return u[Ae.getUTCMonth()]}function se(Ae){return a[Ae.getUTCMonth()]}function be(Ae){return i[+(Ae.getUTCHours()>=12)]}function he(Ae){return 1+~~(Ae.getUTCMonth()/3)}return{format:function(Ae){var Ne=S(Ae+="",b);return Ne.toString=function(){return Ae},Ne},parse:function(Ae){var Ne=C(Ae+="",!1);return Ne.toString=function(){return Ae},Ne},utcFormat:function(Ae){var Ne=S(Ae+="",_);return Ne.toString=function(){return Ae},Ne},utcParse:function(Ae){var Ne=C(Ae+="",!0);return Ne.toString=function(){return Ae},Ne}}}var fge={"-":"",_:" ",0:"0"},_a=/^\s*\d+/,QCt=/^%/,JCt=/[\\^$*+?|[\]().{}]/g;function ri(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function ZCt(e){return e.replace(JCt,"\\$&")}function wA(e){return new RegExp("^(?:"+e.map(ZCt).join("|")+")","i")}function EA(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function eAt(e,t,n){var r=_a.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function tAt(e,t,n){var r=_a.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function nAt(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function rAt(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function iAt(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function dge(e,t,n){var r=_a.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function hge(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sAt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function oAt(e,t,n){var r=_a.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function aAt(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function pge(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function uAt(e,t,n){var r=_a.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function mge(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function lAt(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function cAt(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function fAt(e,t,n){var r=_a.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function dAt(e,t,n){var r=_a.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hAt(e,t,n){var r=QCt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function pAt(e,t,n){var r=_a.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function mAt(e,t,n){var r=_a.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function gge(e,t){return ri(e.getDate(),t,2)}function gAt(e,t){return ri(e.getHours(),t,2)}function yAt(e,t){return ri(e.getHours()%12||12,t,2)}function vAt(e,t){return ri(1+Z0.count(fm(e),e),t,3)}function CPe(e,t){return ri(e.getMilliseconds(),t,3)}function bAt(e,t){return CPe(e,t)+"000"}function xAt(e,t){return ri(e.getMonth()+1,t,2)}function _At(e,t){return ri(e.getMinutes(),t,2)}function wAt(e,t){return ri(e.getSeconds(),t,2)}function EAt(e){var t=e.getDay();return t===0?7:t}function TAt(e,t){return ri(HS.count(fm(e)-1,e),t,2)}function APe(e){var t=e.getDay();return t>=4||t===0?xT(e):xT.ceil(e)}function SAt(e,t){return e=APe(e),ri(xT.count(fm(e),e)+(fm(e).getDay()===4),t,2)}function CAt(e){return e.getDay()}function AAt(e,t){return ri(E5.count(fm(e)-1,e),t,2)}function IAt(e,t){return ri(e.getFullYear()%100,t,2)}function kAt(e,t){return e=APe(e),ri(e.getFullYear()%100,t,2)}function RAt(e,t){return ri(e.getFullYear()%1e4,t,4)}function PAt(e,t){var n=e.getDay();return e=n>=4||n===0?xT(e):xT.ceil(e),ri(e.getFullYear()%1e4,t,4)}function DAt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ri(t/60|0,"0",2)+ri(t%60,"0",2)}function yge(e,t){return ri(e.getUTCDate(),t,2)}function NAt(e,t){return ri(e.getUTCHours(),t,2)}function OAt(e,t){return ri(e.getUTCHours()%12||12,t,2)}function $At(e,t){return ri(1+w1.count(dm(e),e),t,3)}function IPe(e,t){return ri(e.getUTCMilliseconds(),t,3)}function LAt(e,t){return IPe(e,t)+"000"}function MAt(e,t){return ri(e.getUTCMonth()+1,t,2)}function FAt(e,t){return ri(e.getUTCMinutes(),t,2)}function BAt(e,t){return ri(e.getUTCSeconds(),t,2)}function jAt(e){var t=e.getUTCDay();return t===0?7:t}function UAt(e,t){return ri(qS.count(dm(e)-1,e),t,2)}function kPe(e){var t=e.getUTCDay();return t>=4||t===0?_T(e):_T.ceil(e)}function zAt(e,t){return e=kPe(e),ri(_T.count(dm(e),e)+(dm(e).getUTCDay()===4),t,2)}function VAt(e){return e.getUTCDay()}function HAt(e,t){return ri(T5.count(dm(e)-1,e),t,2)}function qAt(e,t){return ri(e.getUTCFullYear()%100,t,2)}function WAt(e,t){return e=kPe(e),ri(e.getUTCFullYear()%100,t,2)}function GAt(e,t){return ri(e.getUTCFullYear()%1e4,t,4)}function YAt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?_T(e):_T.ceil(e),ri(e.getUTCFullYear()%1e4,t,4)}function KAt(){return"+0000"}function vge(){return"%"}function bge(e){return+e}function xge(e){return Math.floor(+e/1e3)}var iE,_ee,RPe,bP,PPe;XAt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function XAt(e){return iE=SPe(e),_ee=iE.format,RPe=iE.parse,bP=iE.utcFormat,PPe=iE.utcParse,iE}function QAt(e){return new Date(e)}function JAt(e){return e instanceof Date?+e:+new Date(+e)}function wee(e,t,n,r,i,s,o,a,u,l){var c=pPe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),_=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:_)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,JAt)):d().map(QAt)},c.ticks=function(S){var C=d();return e(C[0],C[C.length-1],S??10)},c.tickFormat=function(S,C){return C==null?E:l(C)},c.nice=function(S){var C=d();return(!S||typeof S.range!="function")&&(S=t(C[0],C[C.length-1],S??10)),S?d(yPe(C,S)):c},c.copy=function(){return vP(c,wee(e,t,n,r,i,s,o,a,u,l))},c}function Eee(){return Gh.apply(wee(KCt,XCt,fm,LR,HS,Z0,u8,o8,j0,_ee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZAt(){return Gh.apply(wee(GCt,YCt,dm,MR,qS,w1,l8,a8,j0,bP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function c8(){var e=0,t=1,n,r,i,s,o=ec,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Vg),l.rangeRound=c(hP),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function zv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Tee(){var e=Z_(c8()(ec));return e.copy=function(){return zv(e,Tee())},jv.apply(e,arguments)}function DPe(){var e=gee(c8()).domain([1,10]);return e.copy=function(){return zv(e,DPe()).base(e.base())},jv.apply(e,arguments)}function NPe(){var e=yee(c8());return e.copy=function(){return zv(e,NPe()).constant(e.constant())},jv.apply(e,arguments)}function See(){var e=vee(c8());return e.copy=function(){return zv(e,See()).exponent(e.exponent())},jv.apply(e,arguments)}function eIt(){return See.apply(null,arguments).exponent(.5)}function f8(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=ec,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=JZ(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Vg),h.rangeRound=p(hP),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function OPe(){var e=Z_(f8()(ec));return e.copy=function(){return zv(e,OPe())},jv.apply(e,arguments)}function $Pe(){var e=gee(f8()).domain([.1,1,10]);return e.copy=function(){return zv(e,$Pe()).base(e.base())},jv.apply(e,arguments)}function LPe(){var e=yee(f8());return e.copy=function(){return zv(e,LPe()).constant(e.constant())},jv.apply(e,arguments)}function Cee(){var e=vee(f8());return e.copy=function(){return zv(e,Cee()).exponent(e.exponent())},jv.apply(e,arguments)}function tIt(){return Cee.apply(null,arguments).exponent(.5)}function Yh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const nIt=Yh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),rIt=Yh("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),iIt=Yh("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),sIt=Yh("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),oIt=Yh("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),aIt=Yh("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),uIt=Yh("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),lIt=Yh("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),cIt=Yh("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),fIt=Yh("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),d8=Yh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Qn(e){return function(){return e}}const _ge=Math.abs,su=Math.atan2,_b=Math.cos,dIt=Math.max,Sz=Math.min,lp=Math.sin,vx=Math.sqrt,lu=1e-12,wT=Math.PI,S5=wT/2,bk=2*wT;function hIt(e){return e>1?0:e<-1?wT:Math.acos(e)}function wge(e){return e>=1?S5:e<=-1?-S5:Math.asin(e)}function h8(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new ree(t)}function pIt(e){return e.innerRadius}function mIt(e){return e.outerRadius}function gIt(e){return e.startAngle}function yIt(e){return e.endAngle}function vIt(e){return e&&e.padAngle}function bIt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<lu))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function _O(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/vx(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,_=v*v+b*b,E=i-s,S=d*m-p*h,C=(b<0?-1:1)*vx(dIt(0,E*E*_-S*S)),A=(S*b-v*C)/_,R=(-S*v-b*C)/_,k=(S*b+v*C)/_,N=(-S*v+b*C)/_,L=A-g,O=R-y,B=k-g,q=N-y;return L*L+O*O>B*B+q*q&&(A=k,R=N),{cx:A,cy:R,x01:-c,y01:-f,x11:A*(i/E-1),y11:R*(i/E-1)}}function aG(){var e=pIt,t=mIt,n=Qn(0),r=null,i=gIt,s=yIt,o=vIt,a=null,u=h8(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-S5,m=s.apply(this,arguments)-S5,g=_ge(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>lu))a.moveTo(0,0);else if(g>bk-lu)a.moveTo(h*_b(p),h*lp(p)),a.arc(0,0,h,p,m,!y),d>lu&&(a.moveTo(d*_b(m),d*lp(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,_=p,E=m,S=g,C=g,A=o.apply(this,arguments)/2,R=A>lu&&(r?+r.apply(this,arguments):vx(d*d+h*h)),k=Sz(_ge(h-d)/2,+n.apply(this,arguments)),N=k,L=k,O,B;if(R>lu){var q=wge(R/d*lp(A)),H=wge(R/h*lp(A));(S-=q*2)>lu?(q*=y?1:-1,_+=q,E-=q):(S=0,_=E=(p+m)/2),(C-=H*2)>lu?(H*=y?1:-1,v+=H,b-=H):(C=0,v=b=(p+m)/2)}var G=h*_b(v),K=h*lp(v),J=d*_b(E),F=d*lp(E);if(k>lu){var j=h*_b(b),W=h*lp(b),M=d*_b(_),V=d*lp(_),Q;if(g<wT)if(Q=bIt(G,K,M,V,j,W,J,F)){var se=G-Q[0],be=K-Q[1],he=j-Q[0],Ae=W-Q[1],Ne=1/lp(hIt((se*he+be*Ae)/(vx(se*se+be*be)*vx(he*he+Ae*Ae)))/2),rt=vx(Q[0]*Q[0]+Q[1]*Q[1]);N=Sz(k,(d-rt)/(Ne-1)),L=Sz(k,(h-rt)/(Ne+1))}else N=L=0}C>lu?L>lu?(O=_O(M,V,G,K,h,L,y),B=_O(j,W,J,F,h,L,y),a.moveTo(O.cx+O.x01,O.cy+O.y01),L<k?a.arc(O.cx,O.cy,L,su(O.y01,O.x01),su(B.y01,B.x01),!y):(a.arc(O.cx,O.cy,L,su(O.y01,O.x01),su(O.y11,O.x11),!y),a.arc(0,0,h,su(O.cy+O.y11,O.cx+O.x11),su(B.cy+B.y11,B.cx+B.x11),!y),a.arc(B.cx,B.cy,L,su(B.y11,B.x11),su(B.y01,B.x01),!y))):(a.moveTo(G,K),a.arc(0,0,h,v,b,!y)):a.moveTo(G,K),!(d>lu)||!(S>lu)?a.lineTo(J,F):N>lu?(O=_O(J,F,j,W,d,-N,y),B=_O(G,K,M,V,d,-N,y),a.lineTo(O.cx+O.x01,O.cy+O.y01),N<k?a.arc(O.cx,O.cy,N,su(O.y01,O.x01),su(B.y01,B.x01),!y):(a.arc(O.cx,O.cy,N,su(O.y01,O.x01),su(O.y11,O.x11),!y),a.arc(0,0,d,su(O.cy+O.y11,O.cx+O.x11),su(B.cy+B.y11,B.cx+B.x11),y),a.arc(B.cx,B.cy,N,su(B.y11,B.x11),su(B.y01,B.x01),!y))):a.arc(0,0,d,E,_,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-wT/2;return[_b(f)*c,lp(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Qn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Qn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Qn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Qn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Qn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Qn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Qn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function p8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function MPe(e){this._context=e}MPe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Aee(e){return new MPe(e)}function FPe(e){return e[0]}function BPe(e){return e[1]}function m8(e,t){var n=Qn(!0),r=null,i=Aee,s=null,o=h8(a);e=typeof e=="function"?e:e===void 0?FPe:Qn(e),t=typeof t=="function"?t:t===void 0?BPe:Qn(t);function a(u){var l,c=(u=p8(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Qn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Qn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Qn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function jPe(e,t,n){var r=null,i=Qn(!0),s=null,o=Aee,a=null,u=h8(l);e=typeof e=="function"?e:e===void 0?FPe:Qn(+e),t=typeof t=="function"?t:Qn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?BPe:Qn(+n);function l(f){var d,h,p,m=(f=p8(f)).length,g,y=!1,v,b=new Array(m),_=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],_[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),_[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):_[d]))}if(v)return a=null,v+""||null}function c(){return m8().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Qn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function xIt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function _It(e){return e}function wIt(){var e=_It,t=xIt,n=null,r=Qn(0),i=Qn(bk),s=Qn(0);function o(a){var u,l=(a=p8(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(bk,Math.max(-bk,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),_;for(u=0;u<l;++u)(_=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=_);for(t!=null?h.sort(function(E,S){return t(p[E],p[S])}):n!=null&&h.sort(function(E,S){return n(a[E],a[S])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],_=p[c],y=m+(_>0?_*f:0)+b,p[c]={data:a[c],index:u,value:_,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:Qn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Qn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Qn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Qn(+a),o):s},o}const EIt={draw(e,t){const n=vx(t/wT);e.moveTo(n,0),e.arc(0,0,n,0,bk)}};function TIt(e,t){let n=null,r=h8(i);e=typeof e=="function"?e:Qn(e||EIt),t=typeof t=="function"?t:Qn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Qn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function q1(){}function C5(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function g8(e){this._context=e}g8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SIt(e){return new g8(e)}function UPe(e){this._context=e}UPe.prototype={areaStart:q1,areaEnd:q1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CIt(e){return new UPe(e)}function zPe(e){this._context=e}zPe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function AIt(e){return new zPe(e)}function VPe(e,t){this._basis=new g8(e),this._beta=t}VPe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const IIt=function e(t){function n(r){return t===1?new g8(r):new VPe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function A5(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Iee(e,t){this._context=e,this._k=(1-t)/6}Iee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:A5(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:A5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kIt=function e(t){function n(r){return new Iee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function kee(e,t){this._context=e,this._k=(1-t)/6}kee.prototype={areaStart:q1,areaEnd:q1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:A5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RIt=function e(t){function n(r){return new kee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Ree(e,t){this._context=e,this._k=(1-t)/6}Ree.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const PIt=function e(t){function n(r){return new Ree(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Pee(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>lu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>lu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function HPe(e,t){this._context=e,this._alpha=t}HPe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Pee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const DIt=function e(t){function n(r){return t?new HPe(r,t):new Iee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function qPe(e,t){this._context=e,this._alpha=t}qPe.prototype={areaStart:q1,areaEnd:q1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Pee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const NIt=function e(t){function n(r){return t?new qPe(r,t):new kee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function WPe(e,t){this._context=e,this._alpha=t}WPe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const OIt=function e(t){function n(r){return t?new WPe(r,t):new Ree(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function GPe(e){this._context=e}GPe.prototype={areaStart:q1,areaEnd:q1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function $It(e){return new GPe(e)}function Ege(e){return e<0?-1:1}function Tge(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Ege(s)+Ege(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Sge(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Cz(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function I5(e){this._context=e}I5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Cz(this,this._t0,Sge(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Cz(this,Sge(this,n=Tge(this,e,t)),n);break;default:Cz(this,this._t0,n=Tge(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function YPe(e){this._context=new KPe(e)}(YPe.prototype=Object.create(I5.prototype)).point=function(e,t){I5.prototype.point.call(this,t,e)};function KPe(e){this._context=e}KPe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function LIt(e){return new I5(e)}function MIt(e){return new YPe(e)}function XPe(e){this._context=e}XPe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Cge(e),i=Cge(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Cge(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function FIt(e){return new XPe(e)}function y8(e,t){this._context=e,this._t=t}y8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function BIt(e){return new y8(e,.5)}function jIt(e){return new y8(e,0)}function UIt(e){return new y8(e,1)}function Age(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ige(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function zIt(e,t){return e[t]}function VIt(e){const t=[];return t.key=e,t}function HIt(){var e=Qn([]),t=Ige,n=Age,r=zIt;function i(s){var o=Array.from(e.apply(this,arguments),VIt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=p8(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Qn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Ige:typeof s=="function"?s:Qn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Age,i):n},i}function bI(e,t,n){this.k=e,this.x=t,this.y=n}bI.prototype={constructor:bI,scale:function(e){return e===1?this:new bI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new bI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};bI.prototype;function uh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function W1(e){return!!e&&!!e[xs]}function _g(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ZIt}(e)||Array.isArray(e)||!!e[$ge]||!!(!((t=e.constructor)===null||t===void 0)&&t[$ge])||Dee(e)||Nee(e))}function i_(e,t,n){n===void 0&&(n=!1),WS(e)===0?(n?Object.keys:T2)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function WS(e){var t=e[xs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Dee(e)?2:Nee(e)?3:0}function E2(e,t){return WS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qIt(e,t){return WS(e)===2?e.get(t):e[t]}function QPe(e,t,n){var r=WS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function JPe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Dee(e){return QIt&&e instanceof Map}function Nee(e){return JIt&&e instanceof Set}function Ub(e){return e.o||e.t}function Oee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=eDe(e);delete t[xs];for(var n=T2(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function $ee(e,t){return t===void 0&&(t=!1),Lee(e)||W1(e)||!_g(e)||(WS(e)>1&&(e.set=e.add=e.clear=e.delete=WIt),Object.freeze(e),t&&i_(e,function(n,r){return $ee(r,!0)},!0)),e}function WIt(){uh(2)}function Lee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Qp(e){var t=fG[e];return t||uh(18,e),t}function GIt(e,t){fG[e]||(fG[e]=t)}function uG(){return FR}function Az(e,t){t&&(Qp("Patches"),e.u=[],e.s=[],e.v=t)}function k5(e){lG(e),e.p.forEach(YIt),e.p=null}function lG(e){e===FR&&(FR=e.l)}function kge(e){return FR={p:[],l:FR,h:e,m:!0,_:0}}function YIt(e){var t=e[xs];t.i===0||t.i===1?t.j():t.g=!0}function Iz(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Qp("ES5").S(t,e,r),r?(n[xs].P&&(k5(t),uh(4)),_g(e)&&(e=R5(t,e),t.l||P5(t,e)),t.u&&Qp("Patches").M(n[xs].t,e,t.u,t.s)):e=R5(t,n,[]),k5(t),t.u&&t.v(t.u,t.s),e!==ZPe?e:void 0}function R5(e,t,n){if(Lee(t))return t;var r=t[xs];if(!r)return i_(t,function(a,u){return Rge(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return P5(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Oee(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),i_(s,function(a,u){return Rge(e,r,i,a,u,n,o)}),P5(e,i,!1),n&&e.u&&Qp("Patches").N(r,n,e.u,e.s)}return r.o}function Rge(e,t,n,r,i,s,o){if(W1(i)){var a=R5(e,i,s&&t&&t.i!==3&&!E2(t.R,r)?s.concat(r):void 0);if(QPe(n,r,a),!W1(a))return;e.m=!1}else o&&n.add(i);if(_g(i)&&!Lee(i)){if(!e.h.D&&e._<1)return;R5(e,i),t&&t.A.l||P5(e,i)}}function P5(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&$ee(t,n)}function kz(e,t){var n=e[xs];return(n?Ub(n):e)[t]}function Pge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Hy(e){e.P||(e.P=!0,e.l&&Hy(e.l))}function Rz(e){e.o||(e.o=Oee(e.t))}function cG(e,t,n){var r=Dee(t)?Qp("MapSet").F(t,n):Nee(t)?Qp("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:uG(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=BR;o&&(u=[a],l=xI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Qp("ES5").J(t,n);return(n?n.A:uG()).p.push(r),r}function KIt(e){return W1(e)||uh(22,e),function t(n){if(!_g(n))return n;var r,i=n[xs],s=WS(n);if(i){if(!i.P&&(i.i<4||!Qp("ES5").K(i)))return i.t;i.I=!0,r=Dge(n,s),i.I=!1}else r=Dge(n,s);return i_(r,function(o,a){i&&qIt(i.t,o)===a||QPe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Dge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Oee(e)}function XIt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[xs];return BR.get(u,s)},set:function(u){var l=this[xs];BR.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][xs];if(!a.P)switch(a.i){case 5:r(a)&&Hy(a);break;case 4:n(a)&&Hy(a)}}}function n(s){for(var o=s.t,a=s.k,u=T2(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==xs){var f=o[c];if(f===void 0&&!E2(o,c))return!0;var d=a[c],h=d&&d[xs];if(h?h.t!==f:!JPe(d,f))return!0}}var p=!!o[xs];return u.length!==T2(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};GIt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=eDe(f);delete p[xs];for(var m=T2(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:uG(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,xs,{value:l,writable:!0}),u},S:function(s,o,a){a?W1(o)&&o[xs].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[xs];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)i_(d,function(b){b!==xs&&(f[b]!==void 0||E2(f,b)?h[b]||u(d[b]):(h[b]=!0,Hy(c)))}),i_(f,function(b){d[b]!==void 0||E2(d,b)||(h[b]=!1,Hy(c))});else if(p===5){if(r(c)&&(Hy(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Nge,FR,Mee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",QIt=typeof Map<"u",JIt=typeof Set<"u",Oge=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ZPe=Mee?Symbol.for("immer-nothing"):((Nge={})["immer-nothing"]=!0,Nge),$ge=Mee?Symbol.for("immer-draftable"):"__$immer_draftable",xs=Mee?Symbol.for("immer-state"):"__$immer_state",ZIt=""+Object.prototype.constructor,T2=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,eDe=Object.getOwnPropertyDescriptors||function(e){var t={};return T2(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},fG={},BR={get:function(e,t){if(t===xs)return e;var n=Ub(e);if(!E2(n,t))return function(i,s,o){var a,u=Pge(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!_g(r)?r:r===kz(e.t,t)?(Rz(e),e.o[t]=cG(e.A.h,r,e)):r},has:function(e,t){return t in Ub(e)},ownKeys:function(e){return Reflect.ownKeys(Ub(e))},set:function(e,t,n){var r=Pge(Ub(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=kz(Ub(e),t),s=i==null?void 0:i[xs];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(JPe(n,i)&&(n!==void 0||E2(e.t,t)))return!0;Rz(e),Hy(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return kz(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Rz(e),Hy(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Ub(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){uh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){uh(12)}},xI={};i_(BR,function(e,t){xI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),xI.deleteProperty=function(e,t){return xI.set.call(this,e,t,void 0)},xI.set=function(e,t,n){return BR.set.call(this,e[0],t,n,e[0])};var ekt=function(){function e(n){var r=this;this.O=Oge,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(_){var E;return(E=s).call.apply(E,[g,_].concat(v))})}}var l;if(typeof s!="function"&&uh(6),o!==void 0&&typeof o!="function"&&uh(7),_g(i)){var c=kge(r),f=cG(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?k5(c):lG(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Az(c,o),Iz(m,c)},function(m){throw k5(c),m}):(Az(c,o),Iz(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===ZPe&&(l=void 0),r.D&&$ee(l,!0),o){var h=[],p=[];Qp("Patches").M(i,l,h,p),o(h,p)}return l}uh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){_g(n)||uh(8),W1(n)&&(n=KIt(n));var r=kge(this),i=cG(this,n,void 0);return i[xs].C=!0,lG(r),i},t.finishDraft=function(n,r){var i=n&&n[xs],s=i.A;return Az(s,r),Iz(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Oge&&uh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Qp("Patches").$;return W1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),hf=new ekt,tDe=hf.produce;hf.produceWithPatches.bind(hf);hf.setAutoFreeze.bind(hf);hf.setUseProxies.bind(hf);hf.applyPatches.bind(hf);hf.createDraft.bind(hf);hf.finishDraft.bind(hf);function jR(e){"@babel/helpers - typeof";return jR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jR(e)}function tkt(e,t){if(jR(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nkt(e){var t=tkt(e,"string");return jR(t)=="symbol"?t:t+""}function rkt(e,t,n){return(t=nkt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lge(Object(n),!0).forEach(function(r){rkt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lge(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Fge=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Pz=function(){return Math.random().toString(36).substring(7).split("").join(".")},D5={INIT:"@@redux/INIT"+Pz(),REPLACE:"@@redux/REPLACE"+Pz(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Pz()}};function ikt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function nDe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(fu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(fu(1));return n(nDe)(e,t)}if(typeof e!="function")throw new Error(fu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(fu(3));return s}function f(m){if(typeof m!="function")throw new Error(fu(4));if(u)throw new Error(fu(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(fu(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!ikt(m))throw new Error(fu(7));if(typeof m.type>"u")throw new Error(fu(8));if(u)throw new Error(fu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(fu(10));i=m,d({type:D5.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(fu(11));function b(){v.next&&v.next(c())}b();var _=g(b);return{unsubscribe:_}}},m[Fge]=function(){return this},m}return d({type:D5.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Fge]=p,r}function skt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:D5.INIT});if(typeof r>"u")throw new Error(fu(12));if(typeof n(void 0,{type:D5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fu(13))})}function okt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{skt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(fu(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function N5(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function akt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(fu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=N5.apply(void 0,a)(i.dispatch),Mge(Mge({},i),{},{dispatch:s})}}}function rDe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var dG=rDe();dG.withExtraArgument=rDe;var iDe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xP=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},s_=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ukt=Object.defineProperty,lkt=Object.defineProperties,ckt=Object.getOwnPropertyDescriptors,Bge=Object.getOwnPropertySymbols,fkt=Object.prototype.hasOwnProperty,dkt=Object.prototype.propertyIsEnumerable,jge=function(e,t,n){return t in e?ukt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},E1=function(e,t){for(var n in t||(t={}))fkt.call(t,n)&&jge(e,n,t[n]);if(Bge)for(var r=0,i=Bge(t);r<i.length;r++){var n=i[r];dkt.call(t,n)&&jge(e,n,t[n])}return e},Dz=function(e,t){return lkt(e,ckt(t))},_P=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},hkt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?N5:N5.apply(null,arguments)};function sDe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var pkt=function(e){return e&&typeof e.match=="function"};function Jp(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return E1(E1({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function mkt(e){return sDe(e)&&"type"in e}var gkt=function(e){iDe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,s_([void 0],n[0].concat(this)))):new(t.bind.apply(t,s_([void 0],n.concat(this))))},t}(Array),ykt=function(e){iDe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,s_([void 0],n[0].concat(this)))):new(t.bind.apply(t,s_([void 0],n.concat(this))))},t}(Array);function hG(e){return _g(e)?tDe(e,function(){}):e}function vkt(e){return typeof e=="boolean"}function bkt(){return function(t){return xkt(t)}}function xkt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new gkt;return n&&(vkt(n)?r.push(dG):r.push(dG.withExtraArgument(n.extraArgument))),r}function _kt(e){var t=bkt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(sDe(i))h=okt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=akt.apply(void 0,p),g=N5;u&&(g=hkt(E1({trace:!1},typeof u=="object"&&u)));var y=new ykt(m),v=y;Array.isArray(d)?v=s_([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return nDe(h,c,b)}function oDe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function wkt(e){return typeof e=="function"}function Ekt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?oDe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(wkt(e))u=function(){return hG(e())};else{var l=hG(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=s_([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(W1(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(_g(p))return tDe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function Tkt(e,t){return e+"/"+t}function Skt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:hG(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=Tkt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Jp(d,p):Jp(d)});function u(){var c=typeof e.extraReducers=="function"?oDe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=E1(E1({},d),o);return Ekt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var _=0,E=p;_<E.length;_++){var S=E[_];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Ckt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",aDe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Ckt[Math.random()*64|0];return t},Akt=["name","message","stack","code"],Nz=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Uge=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Ikt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Akt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Jp(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Dz(E1({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Jp(t+"/pending",function(l,c,f){return{payload:void 0,meta:Dz(E1({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Jp(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Ikt)(l||"Rejected"),meta:Dz(E1({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):aDe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return _P(this,null,function(){var v,b,_,E,S,C,A;return xP(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Rkt(E)?[4,E]:[3,2];case 1:E=R.sent(),R.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(k,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,N){return new Nz(k,N)},fulfillWithValue:function(k,N){return new Uge(k,N)}})).then(function(k){if(k instanceof Nz)throw k;return k instanceof Uge?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return _=R.sent(),[3,5];case 4:return C=R.sent(),_=C instanceof Nz?o(null,h,l,C.payload,C.meta):o(C,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(_)&&_.meta.condition,A||c(_),[2,_]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(kkt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function kkt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Rkt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Pkt=function(e,t){return pkt(e)?e.match(t):e(t)};function zge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Pkt(r,n)})}}var Fee=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},pG=function(){},uDe=function(e,t){return t===void 0&&(t=pG),e.catch(t),e},lDe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},S2=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Dkt="task",cDe="listener",fDe="completed",Bee="cancelled",Nkt="task-"+Bee,Okt="task-"+fDe,dDe=cDe+"-"+Bee,$kt=cDe+"-"+fDe,v8=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Dkt+" "+Bee+" (reason: "+t+")"}return e}(),C2=function(e){if(e.aborted)throw new v8(e.reason)};function hDe(e,t){var n=pG;return new Promise(function(r,i){var s=function(){return i(new v8(e.reason))};if(e.aborted){s();return}n=lDe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=pG})}var Lkt=function(e,t){return _P(void 0,null,function(){var n,r;return xP(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof v8?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},O5=function(e){return function(t){return uDe(hDe(e,t).then(function(n){return C2(e),n}))}},pDe=function(e){var t=O5(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Mkt=Object.assign,Vge={},wP="listenerMiddleware",Fkt=function(e,t){var n=function(r){return lDe(e,function(){return S2(r,e.reason)})};return function(r,i){Fee(r,"taskExecutor");var s=new AbortController;n(s);var o=Lkt(function(){return _P(void 0,null,function(){var a;return xP(this,function(u){switch(u.label){case 0:return C2(e),C2(s.signal),[4,r({pause:O5(s.signal),delay:pDe(s.signal),signal:s.signal})];case 1:return a=u.sent(),C2(s.signal),[2,a]}})})},function(){return S2(s,Okt)});return i!=null&&i.autoJoin&&t.push(o),{result:O5(e)(o),cancel:function(){S2(s,Nkt)}}}},Bkt=function(e,t){var n=function(r,i){return _P(void 0,null,function(){var s,o,a,u;return xP(this,function(l){switch(l.label){case 0:C2(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,hDe(t,Promise.race(a))];case 2:return u=l.sent(),C2(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return uDe(n(r,i))}},mDe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Jp(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Fee(s,"options.listener"),{predicate:i,type:t,effect:s}},jkt=function(e){var t=mDe(e),n=t.type,r=t.predicate,i=t.effect,s=aDe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},mG=function(e){e.pending.forEach(function(t){S2(t,dDe)})},Ukt=function(e){return function(){e.forEach(mG),e.clear()}},Hge=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},zkt=Jp(wP+"/add"),Vkt=Jp(wP+"/removeAll"),Hkt=Jp(wP+"/remove"),qkt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,s_([wP+"/error"],e))};function Wkt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?qkt:i;Fee(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&mG(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=jkt(h)),o(p)},l=function(h){var p=mDe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var _=typeof m=="string"?b.type===m:b.predicate===y;return _&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&mG(v)),!!v},c=function(h,p,m,g){return _P(t,null,function(){var y,v,b,_;return xP(this,function(E){switch(E.label){case 0:y=new AbortController,v=Bkt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,Mkt({},m,{getOriginalState:g,condition:function(S,C){return v(S,C).then(Boolean)},take:v,delay:pDe(y.signal),pause:O5(y.signal),extra:r,signal:y.signal,fork:Fkt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,C,A){S!==y&&(S2(S,dDe),A.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return _=E.sent(),_ instanceof v8||Hge(s,_,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),S2(y,$kt),h.pending.delete(y),[7];case 6:return[2]}})})},f=Ukt(n),d=function(h){return function(p){return function(m){if(!mkt(m))return p(m);if(zkt.match(m))return u(m.payload);if(Vkt.match(m)){f();return}if(Hkt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Vge)throw new Error(wP+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),_=Array.from(n.values()),E=0,S=_;E<S.length;E++){var C=S[E],A=!1;try{A=C.predicate(m,b,g)}catch(R){A=!1,Hge(s,R,{raisedBy:"predicate"})}A&&c(C,m,h,y)}}finally{g=Vge}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var qge;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);XIt();function Gkt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let wO;const Ykt=new Uint8Array(16);function Kkt(){if(!wO&&(wO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wO(Ykt)}const Ca=[];for(let e=0;e<256;++e)Ca.push((e+256).toString(16).slice(1));function Xkt(e,t=0){return(Ca[e[t+0]]+Ca[e[t+1]]+Ca[e[t+2]]+Ca[e[t+3]]+"-"+Ca[e[t+4]]+Ca[e[t+5]]+"-"+Ca[e[t+6]]+Ca[e[t+7]]+"-"+Ca[e[t+8]]+Ca[e[t+9]]+"-"+Ca[e[t+10]]+Ca[e[t+11]]+Ca[e[t+12]]+Ca[e[t+13]]+Ca[e[t+14]]+Ca[e[t+15]]).toLowerCase()}const Qkt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wge={randomUUID:Qkt};function Gge(e,t,n){if(Wge.randomUUID&&!e)return Wge.randomUUID();e=e||{};const r=e.random||(e.rng||Kkt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Xkt(r)}class Zp{static get(){let t=Gge();for(;this.ids.has(t);)t=Gge();return this.ids.set(t,!0),t}}Zp.ids=new Map;function Eh(e){return"parent"in e}function Jkt(e){return!Eh(e)}function Zkt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Zp.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Zp.get(),createdOn:Date.now(),val:r}]:[];return{id:Zp.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function eRt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Zp.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Zp.get(),createdOn:Date.now(),val:s}]:[];return{id:Zp.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Us(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=lRt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o_(e){return!!e&&!!e[pf]}function G1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===cRt}(e)||Array.isArray(e)||!!e[xk]||!!(!((t=e.constructor)===null||t===void 0)&&t[xk])||b8(e)||x8(e))}function ET(e,t,n){n===void 0&&(n=!1),Y1(e)===0?(n?Object.keys:qee)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Y1(e){var t=e[pf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:b8(e)?2:x8(e)?3:0}function UR(e,t){return Y1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function t6(e,t){return Y1(e)===2?e.get(t):e[t]}function gDe(e,t,n){var r=Y1(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function tRt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function b8(e){return aRt&&e instanceof Map}function x8(e){return uRt&&e instanceof Set}function zb(e){return e.o||e.t}function jee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=fRt(e);delete t[pf];for(var n=qee(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Uee(e,t){return t===void 0&&(t=!1),zee(e)||o_(e)||!G1(e)||(Y1(e)>1&&(e.set=e.add=e.clear=e.delete=nRt),Object.freeze(e),t&&ET(e,function(n,r){return Uee(r,!0)},!0)),e}function nRt(){Us(2)}function zee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function em(e){var t=bG[e];return t||Us(18,e),t}function rRt(e,t){bG[e]||(bG[e]=t)}function Yge(){return{}.NODE_ENV==="production"||TT||Us(0),TT}function Oz(e,t){t&&(em("Patches"),e.u=[],e.s=[],e.v=t)}function $5(e){gG(e),e.p.forEach(iRt),e.p=null}function gG(e){e===TT&&(TT=e.l)}function Kge(e){return TT={p:[],l:TT,h:e,m:!0,_:0}}function iRt(e){var t=e[pf];t.i===0||t.i===1?t.j():t.O=!0}function $z(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||em("ES5").S(t,e,r),r?(n[pf].P&&($5(t),Us(4)),G1(e)&&(e=L5(t,e),t.l||M5(t,e)),t.u&&em("Patches").M(n[pf].t,e,t.u,t.s)):e=L5(t,n,[]),$5(t),t.u&&t.v(t.u,t.s),e!==Hee?e:void 0}function L5(e,t,n){if(zee(t))return t;var r=t[pf];if(!r)return ET(t,function(s,o){return Xge(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return M5(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=jee(r.k):r.o;ET(r.i===3?new Set(i):i,function(s,o){return Xge(e,r,i,s,o,n)}),M5(e,i,!1),n&&e.u&&em("Patches").R(r,n,e.u,e.s)}return r.o}function Xge(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Us(5),o_(i)){var o=L5(e,i,s&&t&&t.i!==3&&!UR(t.D,r)?s.concat(r):void 0);if(gDe(n,r,o),!o_(o))return;e.m=!1}if(G1(i)&&!zee(i)){if(!e.h.F&&e._<1)return;L5(e,i),t&&t.A.l||M5(e,i)}}function M5(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Uee(t,n)}function Lz(e,t){var n=e[pf];return(n?zb(n):e)[t]}function Qge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function yG(e){e.P||(e.P=!0,e.l&&yG(e.l))}function Mz(e){e.o||(e.o=jee(e.t))}function vG(e,t,n){var r=b8(t)?em("MapSet").N(t,n):x8(t)?em("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Yge(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=xG;o&&(u=[a],l=_I);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):em("ES5").J(t,n);return(n?n.A:Yge()).p.push(r),r}function sRt(e){return o_(e)||Us(22,e),function t(n){if(!G1(n))return n;var r,i=n[pf],s=Y1(n);if(i){if(!i.P&&(i.i<4||!em("ES5").K(i)))return i.t;i.I=!0,r=Jge(n,s),i.I=!1}else r=Jge(n,s);return ET(r,function(o,a){i&&t6(i.t,o)===a||gDe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Jge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return jee(e)}function oRt(){function e(r){if(!G1(r))return r;if(Array.isArray(r))return r.map(e);if(b8(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(x8(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return UR(r,xk)&&(i[xk]=r[xk]),i}function t(r){return o_(r)?e(r):r}var n="add";rRt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Y1(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Us(24),typeof u=="function"&&f==="prototype"&&Us(24),typeof(u=t6(u,f))!="object"&&Us(15,o.join("/"))}var d=Y1(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Us(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Us(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;ET(a.D,function(h,p){var m=t6(f,h),g=t6(d,h),y=p?UR(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Hee?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Zge,TT,Vee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",aRt=typeof Map<"u",uRt=typeof Set<"u",eye=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Hee=Vee?Symbol.for("immer-nothing"):((Zge={})["immer-nothing"]=!0,Zge),xk=Vee?Symbol.for("immer-draftable"):"__$immer_draftable",pf=Vee?Symbol.for("immer-state"):"__$immer_state",lRt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},cRt=""+Object.prototype.constructor,qee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,fRt=Object.getOwnPropertyDescriptors||function(e){var t={};return qee(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},bG={},xG={get:function(e,t){if(t===pf)return e;var n=zb(e);if(!UR(n,t))return function(i,s,o){var a,u=Qge(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!G1(r)?r:r===Lz(e.t,t)?(Mz(e),e.o[t]=vG(e.A.h,r,e)):r},has:function(e,t){return t in zb(e)},ownKeys:function(e){return Reflect.ownKeys(zb(e))},set:function(e,t,n){var r=Qge(zb(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Lz(zb(e),t),s=i==null?void 0:i[pf];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(tRt(n,i)&&(n!==void 0||UR(e.t,t)))return!0;Mz(e),yG(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Lz(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Mz(e),yG(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=zb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Us(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Us(12)}},_I={};ET(xG,function(e,t){_I[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),_I.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Us(13),_I.set.call(this,e,t,void 0)},_I.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Us(14),xG.set.call(this,e[0],t,n,e[0])};var dRt=function(){function e(n){var r=this;this.g=eye,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(_){var E;return(E=s).call.apply(E,[g,_].concat(v))})}}var l;if(typeof s!="function"&&Us(6),o!==void 0&&typeof o!="function"&&Us(7),G1(i)){var c=Kge(r),f=vG(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?$5(c):gG(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Oz(c,o),$z(m,c)},function(m){throw $5(c),m}):(Oz(c,o),$z(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Hee&&(l=void 0),r.F&&Uee(l,!0),o){var h=[],p=[];em("Patches").M(i,l,h,p),o(h,p)}return l}Us(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){G1(n)||Us(8),o_(n)&&(n=sRt(n));var r=Kge(this),i=vG(this,n,void 0);return i[pf].C=!0,gG(r),i},t.finishDraft=function(n,r){var i=n&&n[pf];({}).NODE_ENV!=="production"&&(i&&i.C||Us(9),i.I&&Us(10));var s=i.A;return Oz(s,r),$z(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!eye&&Us(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=em("Patches").$;return o_(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),mf=new dRt,hRt=mf.produce;mf.produceWithPatches.bind(mf);mf.setAutoFreeze.bind(mf);mf.setUseProxies.bind(mf);mf.applyPatches.bind(mf);mf.createDraft.bind(mf);mf.finishDraft.bind(mf);function pRt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=Zkt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return Skt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Zp.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Zp.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function mRt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=pRt(e),s=Wkt();s.startListening({matcher:zge(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=zge(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=_kt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Zp.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var gRt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yRt=Object.prototype.hasOwnProperty;function _G(e,t){return yRt.call(e,t)}function wG(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)_G(e,i)&&r.push(i);return r}function tc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function EG(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Vb(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function yDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function TG(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(TG(e[t]))return!0}else if(typeof e=="object"){for(var r=wG(e),i=r.length,s=0;s<i;s++)if(TG(e[r[s]]))return!0}}return!1}function tye(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var vDe=function(e){gRt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,tye(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=tye(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ms=vDe,vRt=tc,QE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=F5(n,this.path);r&&(r=tc(r));var i=$x(n,{op:"remove",path:this.from}).removed;return $x(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=F5(n,this.from);return $x(n,{op:"add",path:this.path,value:tc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:zR(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},bRt={add:function(e,t,n){return EG(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:QE.move,copy:QE.copy,test:QE.test,_get:QE._get};function F5(e,t){if(t=="")return e;var n={op:"_get",path:t};return $x(e,n),n.value}function $x(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):B5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=F5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=zR(e,t.value),o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=tc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=B5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=yDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!EG(h))throw new Ms("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);EG(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ms("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=bRt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=QE[t.op].call(t,l,h,e);if(o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ms("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function _8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=tc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=$x(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function xRt(e,t,n){var r=$x(e,t);if(r.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function B5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ms("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(QE[e.op]){if(typeof e.path!="string")throw new Ms("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ms('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ms("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&TG(e.value))throw new Ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ms("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ms("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=bDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ms("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function bDe(e,t,n){try{if(!Array.isArray(e))throw new Ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)_8(tc(t),tc(e),n||!0);else{n=n||B5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ms)return i;throw i}}function zR(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!zR(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!zR(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const _Rt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ms,_areEquals:zR,applyOperation:$x,applyPatch:_8,applyReducer:xRt,deepClone:vRt,getValueByPointer:F5,validate:bDe,validator:B5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Wee=new WeakMap,wRt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ERt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function TRt(e){return Wee.get(e)}function SRt(e,t){return e.observers.get(t)}function CRt(e,t){e.observers.delete(t.callback)}function ARt(e,t){t.unobserve()}function IRt(e,t){var n=[],r,i=TRt(e);if(!i)i=new wRt(e),Wee.set(e,i);else{var s=SRt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=tc(e),t){r.callback=t,r.next=null;var o=function(){SG(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){SG(r),clearTimeout(r.next),CRt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new ERt(t,r)),r}function SG(e,t){t===void 0&&(t=!1);var n=Wee.get(e.object);Gee(n.value,e.object,e.patches,"",t),e.patches.length&&_8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Gee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=wG(t),o=wG(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(_G(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Gee(c,f,n,r+"/"+Vb(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Vb(l),value:tc(c)}),n.push({op:"replace",path:r+"/"+Vb(l),value:tc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Vb(l),value:tc(c)}),n.push({op:"remove",path:r+"/"+Vb(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!_G(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Vb(l),value:tc(t[l])})}}}function xDe(e,t,n){n===void 0&&(n=!1);var r=[];return Gee(e,t,r,"",n),r}const kRt=Object.freeze(Object.defineProperty({__proto__:null,compare:xDe,generate:SG,observe:IRt,unobserve:ARt},Symbol.toStringTag,{value:"Module"}));Object.assign({},_Rt,kRt,{JsonPatchError:vDe,deepClone:tc,escapePathComponent:Vb,unescapePathComponent:yDe});var wI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(wI||{});function n6(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=_De(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=n6(i,t);return _8(a,tc(o),!0,!1).newDocument}function RRt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function EP({registry:e,initialState:t}){let n=!1;const r=Gkt(),i=mRt(t);function s(c){return i.backend.nodes[c]}r.listen(wI.TRAVERSAL_START,()=>{n=!0}),r.listen(wI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return n6(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=n6(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=xDe(y,f);if(RRt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=eRt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=n6(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(wI.TRAVERSAL_START);const f=_De(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);DRt(p,m)?Eh(p)&&d.push(...p.sideEffects.undo):Eh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(wI.TRAVERSAL_END)},undo(){const{current:c}=i;return Eh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return wDe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function PRt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Eh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Eh(r)&&(r=n[r.parent]),Eh(i)&&(i=n[i.parent]);return r.id}function _De(e,t,n){const r=PRt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Eh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Eh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function DRt(e,t){if(Eh(e)&&e.parent===t.id)return!0;if(Eh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function wDe(e,t){return{...e,children:e.children.map(n=>wDe(t[n],t)),name:`${e.label}`}}oRt();function NRt(e){return e.length===2?hRt(e):e}class nw{static create(){return new nw}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:NRt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Jp(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const nye=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},GS=e=>{const t=P.useRef(null),n=nye(e),[r,i]=P.useState(0),[s,o]=P.useState(0);P.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=nye({...n,width:n.width||r,height:n.height||s});return[t,a]},ORt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:GS},Symbol.toStringTag,{value:"Module"})),$Rt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function LRt({parameters:e,setAnswer:t}){const[n,r]=GS($Rt),[i,s]=P.useState(100),[o,a]=P.useState(100),[u,l]=P.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=P.useMemo(()=>{const p=nw.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=EP({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=P.useCallback(p=>{const m=xr("#movingCircle"),g=xr("#clickAccuracySvg"),y=H$(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return P.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;xr(n.current).select("circle").transition().duration(y).ease(HEt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:w.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:w.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[w.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),w.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),w.jsxs(ke,{children:["Adjust speed (px/s):",w.jsx(z_,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const MRt=Object.freeze(Object.defineProperty({__proto__:null,default:LRt},Symbol.toStringTag,{value:"Module"}));function Yee({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?bP("%B"):Bv(".2s"))(c),[s]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:w.jsx(Wo,{children:w.jsx(bi,{gap:3,children:w.jsx(ze,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?w.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>w.jsxs("g",{transform:`translate(${f}, ${n})`,children:[w.jsx("line",{y2:"6",stroke:"currentColor"}),o?w.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,w.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:w.jsx(Wo,{children:w.jsx(os,{withinPortal:!0,label:c,children:w.jsx(ze,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const FRt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Yee},Symbol.toStringTag,{value:"Module"}));function EDe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(Wo,{children:w.jsx(bi,{gap:3,children:w.jsx(ze,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>w.jsxs("g",{transform:`translate(${n}, ${l})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),s?w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,w.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:w.jsx("foreignObject",{width:a,height:20,children:w.jsx(bi,{style:{width:"100%",height:"100%"},justify:"right",children:w.jsx(ze,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const BRt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:EDe},Symbol.toStringTag,{value:"Module"})),Of={top:15,left:100,right:50,bottom:50};function CG({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=tf(),o=P.useMemo(()=>s-Of.left-Of.right,[s]),a=P.useMemo(()=>i-Of.top-Of.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Uv(d8).domain(d)},[n,t.category]),l=P.useMemo(()=>e?va([Of.left,o+Of.left]).domain([0,Q0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?VS([Of.top,a+Of.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:w.jsxs("g",{children:[w.jsx("rect",{x:Of.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Of.left},h),w.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?w.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w.jsx(Yee,{xScale:l,yRange:c.range(),vertPosition:a+Of.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?w.jsx(EDe,{yScale:c,horizontalPosition:Of.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):w.jsx(Tc,{})}const jRt=Object.freeze(Object.defineProperty({__proto__:null,Bar:CG,default:CG},Symbol.toStringTag,{value:"Module"})),Zr=Array.isArray;function mc(e){return e!=null?Zr(e)?e:[e]:[]}function URt(e=0,t=1/0){return`${rye(e)} < row_number() && row_number() <= ${rye(t)}`}function rye(e){return e<0?`count() + ${e}`:e}class TDe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(URt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,mc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Jn(e){throw Error(e)}function yl(e){return typeof e=="number"}function ds(e){return typeof e=="function"}function w8(e,t){const n=Array(e);if(ds(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let zRt=class extends TDe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Jn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Jn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Jn("Not implemented")}getter(t){Jn("Not implemented")}objects(t){Jn("Not implemented")}object(t){Jn("Not implemented")}[Symbol.iterator](){Jn("Not implemented")}print(t={}){yl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=w8(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},VRt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},HRt=function(e){return e&&ds(e.get)?e:new VRt(e)};function wg(e){return e instanceof Date}function Ru(e){return e===Object(e)}function j5(e){return e instanceof RegExp}function Ga(e){return typeof e=="string"}function qRt(e,t){const n=r=>Jn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?iye(e.entries(),t):wg(e)?n("Date"):j5(e)?n("RegExp"):Ga(e)?n():Zr(e)?WRt(e,t):ds(e[Symbol.iterator])?GRt(e,t):Ru(e)?iye(Object.entries(e),t):n()}function iye(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function WRt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function GRt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:YRt}=Object.prototype;function Nh(e,t){return YRt.call(e,t)}function Tf(e){return e?new sye({...e.data()},e.columnNames()):new sye}class sye{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Nh(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Yr=void 0,KRt=Object.getPrototypeOf(Int8Array);function TP(e){return e instanceof KRt}function bx(e){return Zr(e)||TP(e)}function mh(e){return e!=null&&e===e}const TA=e=>bx(e)||Ga(e),XRt={compact:e=>bx(e)?e.filter(t=>mh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>TA(e)?e.includes(t,n):!1,indexof:(e,t)=>TA(e)?e.indexOf(t):-1,join:(e,t)=>bx(e)?e.join(t):Yr,lastindexof:(e,t)=>TA(e)?e.lastIndexOf(t):-1,length:e=>TA(e)?e.length:0,pluck:(e,t)=>bx(e)?e.map(n=>mh(n)?n[t]:Yr):Yr,reverse:e=>bx(e)?e.slice().reverse():Ga(e)?e.split("").reverse().join(""):Yr,slice:(e,t,n)=>TA(e)?e.slice(t,n):Yr};function QRt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function r6(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const cp=e=>(e<10?"0":"")+e,JRt=e=>e<0?"-"+r6(-e,6):e>9999?"+"+r6(e,6):r6(e,4);function SDe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return JRt(e)+"-"+cp(t+1)+"-"+cp(n)+(!u||o?"T"+cp(r)+":"+cp(i)+":"+cp(s)+"."+r6(o,3)+l:s?"T"+cp(r)+":"+cp(i)+":"+cp(s)+l:i||r||!a?"T"+cp(r)+":"+cp(i)+l:"")}function CDe(e,t){return isNaN(e)?"Invalid Date":SDe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function E8(e,t){return isNaN(e)?"Invalid Date":SDe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const ZRt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function e3t(e){return e.match(ZRt)&&!isNaN(Date.parse(e))}function t3t(e,t=Date.parse){return e3t(e)?t(e):e}const ADe=6e4,IDe=864e5,kDe=6048e5,js=new Date,zs=new Date,eo=e=>(js.setTime(typeof e=="string"?t3t(e):e),js);function n3t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function r3t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function i3t(e){zs.setTime(+e),zs.setHours(0,0,0,0),js.setTime(+zs),js.setMonth(0),js.setDate(1);const t=(zs.getTimezoneOffset()-js.getTimezoneOffset())*ADe;return Math.floor(1+(zs-js-t)/IDe)}function s3t(e){zs.setTime(+e),zs.setUTCHours(0,0,0,0);const t=Date.UTC(zs.getUTCFullYear(),0,1);return Math.floor(1+(zs-t)/IDe)}function o3t(e,t){const n=t||0;zs.setTime(+e),zs.setDate(zs.getDate()-(zs.getDay()+7-n)%7),zs.setHours(0,0,0,0),js.setTime(+e),js.setMonth(0),js.setDate(1),js.setDate(1-(js.getDay()+7-n)%7),js.setHours(0,0,0,0);const r=(zs.getTimezoneOffset()-js.getTimezoneOffset())*ADe;return Math.floor((1+(zs-js)-r)/kDe)}function a3t(e,t){const n=t||0;return zs.setTime(+e),zs.setUTCDate(zs.getUTCDate()-(zs.getUTCDay()+7-n)%7),zs.setUTCHours(0,0,0,0),js.setTime(+e),js.setUTCMonth(0),js.setUTCDate(1),js.setUTCDate(1-(js.getUTCDay()+7-n)%7),js.setUTCHours(0,0,0,0),Math.floor((1+(zs-js))/kDe)}const u3t={format_date:(e,t)=>CDe(eo(e),!t),format_utcdate:(e,t)=>E8(eo(e),!t),timestamp:e=>+eo(e),year:e=>eo(e).getFullYear(),quarter:e=>Math.floor(eo(e).getMonth()/3),month:e=>eo(e).getMonth(),date:e=>eo(e).getDate(),dayofweek:e=>eo(e).getDay(),hours:e=>eo(e).getHours(),minutes:e=>eo(e).getMinutes(),seconds:e=>eo(e).getSeconds(),milliseconds:e=>eo(e).getMilliseconds(),utcyear:e=>eo(e).getUTCFullYear(),utcquarter:e=>Math.floor(eo(e).getUTCMonth()/3),utcmonth:e=>eo(e).getUTCMonth(),utcdate:e=>eo(e).getUTCDate(),utcdayofweek:e=>eo(e).getUTCDay(),utchours:e=>eo(e).getUTCHours(),utcminutes:e=>eo(e).getUTCMinutes(),utcseconds:e=>eo(e).getUTCSeconds(),utcmilliseconds:e=>eo(e).getUTCMilliseconds(),datetime:n3t,dayofyear:i3t,week:o3t,utcdatetime:r3t,utcdayofyear:s3t,utcweek:a3t,now:Date.now};function Kee(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:wg(e)||wg(t)?+e==+t:j5(e)&&j5(t)?e+""==t+"":Ru(e)&&Ru(t)?l3t(e,t):!1}function l3t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return oye(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!oye(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Kee(e[o],t[o]))return!1}return!0}function oye(e,t,n=Kee){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const c3t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let f3t=Math.random;function YS(){return f3t()}const d3t={random:YS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Xee(e){return e instanceof Map}function h3t(e){return e instanceof Set}function i6(e){return Xee(e)||h3t(e)}function Fz(e){return Array.from(e)}const p3t={has:(e,t)=>i6(e)?e.has(t):e!=null?Nh(e,t):!1,keys:e=>Xee(e)?Fz(e.keys()):e!=null?Object.keys(e):[],values:e=>i6(e)?Fz(e.values()):e!=null?Object.values(e):[],entries:e=>i6(e)?Fz(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Yr};function m3t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Nh(t,e))return t[e];return n!==void 0?n:e}function g3t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const y3t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},JE={bin:QRt,equal:Kee,recode:m3t,sequence:g3t,...XRt,...u3t,...c3t,...d3t,...p3t,...y3t};function VR(e){return typeof e=="bigint"}function hm(e){return e===void 0?e+"":VR(e)?e+"n":JSON.stringify(e)}function qn(e,t=[],n=[]){return new v3t(e,mc(t),mc(n))}let v3t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${hm(n)}]`),...this.params.map(hm)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const RDe=e=>qn("any",e),PDe=()=>qn("count"),DDe=e=>qn("array_agg",e),NDe=e=>qn("array_agg_distinct",e),ODe=(e,t)=>qn("map_agg",[e,t]),$De=(e,t)=>qn("object_agg",[e,t]),LDe=(e,t)=>qn("entries_agg",[e,t]);({...JE});function b3t(e,t){e=i6(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function x3t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function _3t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function w3t(e,t,n,r){const i=r==="map"||r===!0?ODe:r==="entries"?LDe:r==="object"?$De:Jn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=b3t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:DDe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const E3t="ArrayPattern",T3t="ArrowFunctionExpression",S3t="FunctionExpression",T1="Identifier",KS="Literal",MDe="MemberExpression",C3t="ObjectExpression",FDe="ObjectPattern",BDe="Property",SP="Column",A3t="Constant",I3t="Dictionary",k3t="Function",R3t="Parameter",jDe="Op",Yi=(e,t)=>{const n=P3t[e.type];return n?n(e,t):Jn(`Unsupported expression construct: ${e.type}`)},Bz=(e,t)=>"("+Yi(e.left,t)+" "+e.operator+" "+Yi(e.right,t)+")",jz=(e,t)=>"("+vp(e.params,t)+")=>"+Yi(e.body,t),aye=(e,t)=>Yi(e.callee,t)+"("+vp(e.arguments,t)+")",vp=(e,t,n=",")=>e.map(r=>Yi(r,t)).join(n),UDe=e=>e.computed?`[${hm(e.name)}]`:`.${e.name}`,uye=(e,t,n)=>{const r=e.table||"";return`data${r}${UDe(e)}.${n}(${t.index}${r})`},P3t={Constant:e=>e.raw,Column:(e,t)=>uye(e,t,"get"),Dictionary:(e,t)=>uye(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${UDe(e)}`,Op:(e,t)=>`op(${hm(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Yi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Yi(e.object,t),i=Yi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:aye,NewExpression:(e,t)=>"new "+aye(e,t),ArrayExpression:(e,t)=>"["+vp(e.elements,t)+"]",AssignmentExpression:Bz,BinaryExpression:Bz,LogicalExpression:Bz,UnaryExpression:(e,t)=>"("+e.operator+Yi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Yi(e.test,t)+"?"+Yi(e.consequent,t)+":"+Yi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+vp(e.properties,t)+"})",Property:(e,t)=>{const n=Yi(e.key,t);return(e.computed?`[${n}]`:n)+":"+Yi(e.value,t)},ArrowFunctionExpression:jz,FunctionExpression:jz,FunctionDeclaration:jz,ArrayPattern:(e,t)=>"["+vp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+vp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+vp(e.declarations,t,","),VariableDeclarator:(e,t)=>Yi(e.id,t)+"="+Yi(e.init,t),SpreadElement:(e,t)=>"..."+Yi(e.argument,t),BlockStatement:(e,t)=>"{"+vp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Yi(e.expression,t),IfStatement:(e,t)=>"if ("+Yi(e.test,t)+")"+Yi(e.consequent,t)+(e.alternate?" else "+Yi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Yi(e.discriminant,t)+") {"+vp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Yi(e.test,t):"default")+": "+vp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Yi(e.argument,t),Program:(e,t)=>Yi(e.body[0],t)};function U5(e,t={index:"row"}){return Yi(e,t)}function D3t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function ST(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:wg(e)?+e:Zr(e)||TP(e)?`[${e.map(ST)}]`:j5(e)?e+"":N3t(e)}function N3t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ST(e[r])}`;return t+="}",t}function z5(e,t){const n=e.length;return n===1?(r,i)=>ST(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=ST(a)}return s}}function O3t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=ST(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=ST(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function w0(){}function $3t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function No(e){return e.init=e.init||w0,e.add=e.add||w0,e.rem=e.rem||w0,e}function lye(e,t){return e.product_v=!1,e.product=t}const zDe={count:{create:()=>No({value:e=>e.count}),param:[]},array_agg:{create:()=>No({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>No({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>No({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>No({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>No({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Yr}),param:[1]},valid:{create:()=>No({value:e=>e.valid}),param:[1]},invalid:{create:()=>No({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=O3t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>No({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>No({value:e=>{let t=Yr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Yr,add:(e,t)=>VR(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>lye(e,1),value:e=>e.valid?e.product_v?lye(e,$3t(e.list.values())):e.product:void 0,add:(e,t)=>VR(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Yr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>No({value:e=>e.valid?e.mean:Yr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Yr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>No({value:e=>e.valid>1?e.dev/e.valid:Yr}),param:[1],req:["variance"]},stdev:{create:()=>No({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Yr}),param:[1],req:["variance"]},stdevp:{create:()=>No({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Yr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Yr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Yr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Yr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Yr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>No({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>No({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Yr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>No({value:e=>e.valid>1?e.cov/e.valid:Yr}),param:[2],req:["covariance"]},corr:{create:()=>No({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Yr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>No({value:i=>D3t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},cye={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},fye={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},VDe={row_number:{create(){return{init:w0,value:e=>e.index+1}},param:[]},rank:cye,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=cye.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:fye,ntile:{create(e){e=+e,e>0||Jn("ntile num must be greater than zero.");const{init:t,value:n}=fye.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Yr){return e=+e||1,{init:w0,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Yr){return e=+e||1,{init:w0,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:w0,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:w0,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Jn("nth_value nth must be greater than zero."),{init:w0,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Yr}}},param:[1,1]},fill_down:{create(e=Yr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return mh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Yr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=L3t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function L3t(e,t,n){for(const r=e.size;n<r;++n)if(mh(e.value(n,t)))return n;return-1}function Qee(e){return Nh(zDe,e)}function Jee(e){return Nh(VDe,e)}function HDe(e){return Nh(JE,e)||e==="row_object"}function qDe(e){return Qee(e)&&zDe[e]}function WDe(e){return Jee(e)&&VDe[e]}function SA(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Zee={escape:(e,t,n)=>SA(e,t,n),expr:(e,t)=>SA(`(row,data,op)=>${e}`,JE,t),expr2:(e,t)=>SA(`(row0,data0,row,data)=>${e}`,JE,t),join:(e,t)=>SA(`(row1,data1,row2,data2)=>${e}`,JE,t),param:(e,t)=>SA(e,JE,t)},M3t={"==":1,"!=":1,"===":1,"!==":1};function GDe(e,t,n=0,r,i){if(e.type=SP,e.name=t,e.table=n,i&&r&&ds(r.keyFor)){const s=M3t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===KS&&F3t(i,e,s,r.keyFor(s.value))}return e}function F3t(e,t,n,r){return r<0?(e.type=KS,e.value=!1,e.raw="false"):(t.type=I3t,n.value=r,n.raw=r+""),!0}function T8(e){return Zr(e)?e:Xee(e)?e.entries():e?Object.entries(e):[]}const YDe="row_object";function KDe(e,t){e.type=C3t;const n=e.properties=[];for(const r of T8(t)){const[i,s]=Zr(r)?r:[r,r];n.push({type:BDe,key:{type:KS,raw:hm(s)},value:GDe({computed:!0},i)})}return e}function XDe(e){return U5(KDe({},e))}function QDe(e){return Zee.expr(XDe(e))}const B3t=new TextDecoder("utf-8"),AG=e=>B3t.decode(e),j3t=new TextEncoder,ete=e=>j3t.encode(e),U3t=e=>typeof e=="boolean",jl=e=>typeof e=="function",Vv=e=>e!=null&&Object(e)===e,S8=e=>Vv(e)&&jl(e.then),tte=e=>Vv(e)&&jl(e[Symbol.iterator]),C8=e=>Vv(e)&&jl(e[Symbol.asyncIterator]),z3t=e=>Vv(e)&&"done"in e&&"value"in e,JDe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,V3t=e=>Vv(e)&&jl(e.abort)&&jl(e.getWriter)&&!JDe(e),H3t=e=>Vv(e)&&jl(e.end)&&jl(e.write)&&U3t(e.writable)&&!JDe(e),q3t=e=>Vv(e)&&jl(e.clear)&&jl(e.bytes)&&jl(e.position)&&jl(e.setPosition)&&jl(e.capacity)&&jl(e.getBufferIdentifier)&&jl(e.createLong),nte=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function W3t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function V5(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function pm(e,t){const n=W3t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?V5(o,s,a):o=s;break}V5(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function ra(e,t){let n=z3t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=ete(n)),n instanceof ArrayBuffer?new e(n):n instanceof nte?new e(n):q3t(n)?ra(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const CA=e=>ra(Int32Array,e),Si=e=>ra(Uint8Array,e),IG=e=>(e.next(),e);function*G3t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof nte?n(t):tte(t)?t:n(t);return yield*IG(function*(i){let s=null;do s=i.next(yield ra(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Y3t=e=>G3t(Uint8Array,e);function ZDe(e,t){return dx(this,arguments,function*(){if(S8(t))return yield Or(yield Or(yield*Cj(rk(ZDe(e,yield Or(t))))));const r=function(o){return dx(this,arguments,function*(){yield yield Or(yield Or(o))})},i=function(o){return dx(this,arguments,function*(){yield Or(yield*Cj(rk(IG(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof nte?r(t):tte(t)?i(t):C8(t)?t:r(t);return yield Or(yield*Cj(rk(IG(function(o){return dx(this,arguments,function*(){let a=null;do a=yield Or(o.next(yield yield Or(ra(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Or(new e)})}const K3t=e=>ZDe(Uint8Array,e);function eNe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function X3t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const dye={fromIterable(e){return EO(Q3t(e))},fromAsyncIterable(e){return EO(J3t(e))},fromDOMStream(e){return EO(Z3t(e))},fromNodeStream(e){return EO(tPt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},EO=e=>(e.next(),e);function*Q3t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?pm(r,o)[0]:([i,r,a]=pm(r,o),i)}({cmd:s,size:o}=yield null);const l=Y3t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function J3t(e){return dx(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?pm(i,a)[0]:([s,i,u]=pm(i,a),s)}({cmd:o,size:a}=yield yield Or(null));const c=K3t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Or(c.next()):yield Or(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Or(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Or(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Or(c.return(new Uint8Array(0))))}return yield Or(null)})}function Z3t(e){return dx(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?pm(i,a)[0]:([s,i,u]=pm(i,a),s)}({cmd:o,size:a}=yield yield Or(null));const c=new ePt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Or(c.read()):yield Or(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Si(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Or(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Or(c.cancel(f)))}finally{r===!1?yield Or(c.cancel()):e.locked&&c.releaseLock()}return yield Or(null)})}class ePt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return S0(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return S0(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Si(n)),n})}}const Uz=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function tPt(e){return dx(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?pm(l,a)[0]:([c,l,u]=pm(l,a),c)}if({cmd:o,size:a}=yield yield Or(null),e.isTTY)return yield yield Or(new Uint8Array(0)),yield Or(null);try{n[0]=Uz(e,"end"),n[1]=Uz(e,"error");do{if(n[2]=Uz(e,"readable"),[r,s]=yield Or(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Si(e.read(a-u)),c.byteLength<a-u&&(c=Si(e.read()))):c=Si(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Or(f()));while(a<u)}while(!i)}finally{yield Or(d(n,r==="error"?s:null))}return yield Or(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var rl;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(rl||(rl={}));var gc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(gc||(gc={}));var Ba;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ba||(Ba={}));var mm;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(mm||(mm={}));var yn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(yn||(yn={}));var gm;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(gm||(gm={}));var oa;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(oa||(oa={}));var fe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(fe||(fe={}));var g0;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(g0||(g0={}));const nPt=void 0;function a_(e){if(e===null)return"null";if(e===nPt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>a_(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const rPt=Symbol.for("isArrowBigNum");function Kh(e,...t){return t.length===0?Object.setPrototypeOf(ra(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Kh.prototype[rPt]=!0;Kh.prototype.toJSON=function(){return`"${qR(this)}"`};Kh.prototype.valueOf=function(){return tNe(this)};Kh.prototype.toString=function(){return qR(this)};Kh.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return tNe(this);case"string":return qR(this);case"default":return iPt(this)}return qR(this)};function A2(...e){return Kh.apply(this,e)}function I2(...e){return Kh.apply(this,e)}function HR(...e){return Kh.apply(this,e)}Object.setPrototypeOf(A2.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(I2.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(HR.prototype,Object.create(Uint32Array.prototype));Object.assign(A2.prototype,Kh.prototype,{constructor:A2,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(I2.prototype,Kh.prototype,{constructor:I2,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(HR.prototype,Kh.prototype,{constructor:HR,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function tNe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const qR=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return zz(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return zz(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${zz(t)}`},iPt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:qR(e);function zz(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class rte{static new(t,n){switch(n){case!0:return new A2(t);case!1:return new I2(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new A2(t)}return t.byteLength===16?new HR(t):new I2(t)}static signed(t){return new A2(t)}static unsigned(t){return new I2(t)}static decimal(t){return new HR(t)}constructor(t,n){return rte.new(t,n)}}function Oh(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var nNe,rNe,iNe,sNe,oNe,aNe,uNe,lNe,cNe,fNe,dNe,hNe,pNe,mNe,gNe,yNe,vNe,bNe,xNe,_Ne;let nr=class kG{static isNull(t){return(t==null?void 0:t.typeId)===fe.Null}static isInt(t){return(t==null?void 0:t.typeId)===fe.Int}static isFloat(t){return(t==null?void 0:t.typeId)===fe.Float}static isBinary(t){return(t==null?void 0:t.typeId)===fe.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===fe.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===fe.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===fe.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===fe.Date}static isTime(t){return(t==null?void 0:t.typeId)===fe.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===fe.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===fe.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===fe.Duration}static isList(t){return(t==null?void 0:t.typeId)===fe.List}static isStruct(t){return(t==null?void 0:t.typeId)===fe.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===fe.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===fe.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===fe.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===fe.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===fe.Dictionary}static isDenseUnion(t){return kG.isUnion(t)&&t.mode===gc.Dense}static isSparseUnion(t){return kG.isUnion(t)&&t.mode===gc.Sparse}get typeId(){return fe.NONE}};nNe=Symbol.toStringTag;nr[nNe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(nr.prototype);let Eg=class extends nr{toString(){return"Null"}get typeId(){return fe.Null}};rNe=Symbol.toStringTag;Eg[rNe]=(e=>e[Symbol.toStringTag]="Null")(Eg.prototype);class vl extends nr{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return fe.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}iNe=Symbol.toStringTag;vl[iNe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(vl.prototype);class ite extends vl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class ste extends vl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class K1 extends vl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class ote extends vl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class ate extends vl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class ute extends vl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class lte extends vl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class cte extends vl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(ite.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(ste.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(K1.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(ote.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(ate.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(ute.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(lte.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(cte.prototype,"ArrayType",{value:BigUint64Array});class X1 extends nr{constructor(t){super(),this.precision=t}get typeId(){return fe.Float}get ArrayType(){switch(this.precision){case Ba.HALF:return Uint16Array;case Ba.SINGLE:return Float32Array;case Ba.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}sNe=Symbol.toStringTag;X1[sNe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(X1.prototype);class wNe extends X1{constructor(){super(Ba.HALF)}}class fte extends X1{constructor(){super(Ba.SINGLE)}}class dte extends X1{constructor(){super(Ba.DOUBLE)}}Object.defineProperty(wNe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(fte.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(dte.prototype,"ArrayType",{value:Float64Array});let WR=class extends nr{constructor(){super()}get typeId(){return fe.Binary}toString(){return"Binary"}};oNe=Symbol.toStringTag;WR[oNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(WR.prototype);let CT=class extends nr{constructor(){super()}get typeId(){return fe.Utf8}toString(){return"Utf8"}};aNe=Symbol.toStringTag;CT[aNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(CT.prototype);let GR=class extends nr{constructor(){super()}get typeId(){return fe.Bool}toString(){return"Bool"}};uNe=Symbol.toStringTag;GR[uNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(GR.prototype);let H5=class extends nr{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return fe.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};lNe=Symbol.toStringTag;H5[lNe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(H5.prototype);class AT extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Date}toString(){return`Date${(this.unit+1)*32}<${mm[this.unit]}>`}}cNe=Symbol.toStringTag;AT[cNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(AT.prototype);class sPt extends AT{constructor(){super(mm.DAY)}}class oPt extends AT{constructor(){super(mm.MILLISECOND)}}class Tg extends nr{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return fe.Time}toString(){return`Time${this.bitWidth}<${yn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}fNe=Symbol.toStringTag;Tg[fNe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Tg.prototype);class aPt extends Tg{constructor(){super(yn.SECOND,32)}}class uPt extends Tg{constructor(){super(yn.MILLISECOND,32)}}class lPt extends Tg{constructor(){super(yn.MICROSECOND,64)}}class cPt extends Tg{constructor(){super(yn.NANOSECOND,64)}}class q5 extends nr{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return fe.Timestamp}toString(){return`Timestamp<${yn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}dNe=Symbol.toStringTag;q5[dNe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(q5.prototype);class IT extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Interval}toString(){return`Interval<${gm[this.unit]}>`}}hNe=Symbol.toStringTag;IT[hNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(IT.prototype);class fPt extends IT{constructor(){super(gm.DAY_TIME)}}class dPt extends IT{constructor(){super(gm.YEAR_MONTH)}}let W5=class extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Duration}toString(){return`Duration<${yn[this.unit]}>`}};pNe=Symbol.toStringTag;W5[pNe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(W5.prototype);let kT=class extends nr{constructor(t){super(),this.children=[t]}get typeId(){return fe.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};mNe=Symbol.toStringTag;kT[mNe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(kT.prototype);class yu extends nr{constructor(t){super(),this.children=t}get typeId(){return fe.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}gNe=Symbol.toStringTag;yu[gNe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(yu.prototype);class YR extends nr{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return fe.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}yNe=Symbol.toStringTag;YR[yNe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(YR.prototype);let G5=class extends nr{constructor(t){super(),this.byteWidth=t}get typeId(){return fe.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};vNe=Symbol.toStringTag;G5[vNe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(G5.prototype);let RT=class extends nr{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return fe.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};bNe=Symbol.toStringTag;RT[bNe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(RT.prototype);class KR extends nr{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return fe.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}xNe=Symbol.toStringTag;KR[xNe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(KR.prototype);const hPt=(e=>()=>++e)(-1);class Q1 extends nr{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?hPt():Oh(r)}get typeId(){return fe.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}_Ne=Symbol.toStringTag;Q1[_Ne]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Q1.prototype);function _p(e){const t=e;switch(e.typeId){case fe.Decimal:return e.bitWidth/32;case fe.Timestamp:return 2;case fe.Date:return 1+t.unit;case fe.Interval:return 1+t.unit;case fe.FixedSizeList:return t.listSize;case fe.FixedSizeBinary:return t.byteWidth;default:return 1}}class rr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return pPt(this,t,n)}getVisitFnByTypeId(t,n=!0){return SE(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function pPt(e,t,n=!0){return typeof t=="number"?SE(e,t,n):typeof t=="string"&&t in fe?SE(e,fe[t],n):t&&t instanceof nr?SE(e,hye(t),n):t!=null&&t.type&&t.type instanceof nr?SE(e,hye(t.type),n):SE(e,fe.NONE,n)}function SE(e,t,n=!0){let r=null;switch(t){case fe.Null:r=e.visitNull;break;case fe.Bool:r=e.visitBool;break;case fe.Int:r=e.visitInt;break;case fe.Int8:r=e.visitInt8||e.visitInt;break;case fe.Int16:r=e.visitInt16||e.visitInt;break;case fe.Int32:r=e.visitInt32||e.visitInt;break;case fe.Int64:r=e.visitInt64||e.visitInt;break;case fe.Uint8:r=e.visitUint8||e.visitInt;break;case fe.Uint16:r=e.visitUint16||e.visitInt;break;case fe.Uint32:r=e.visitUint32||e.visitInt;break;case fe.Uint64:r=e.visitUint64||e.visitInt;break;case fe.Float:r=e.visitFloat;break;case fe.Float16:r=e.visitFloat16||e.visitFloat;break;case fe.Float32:r=e.visitFloat32||e.visitFloat;break;case fe.Float64:r=e.visitFloat64||e.visitFloat;break;case fe.Utf8:r=e.visitUtf8;break;case fe.Binary:r=e.visitBinary;break;case fe.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case fe.Date:r=e.visitDate;break;case fe.DateDay:r=e.visitDateDay||e.visitDate;break;case fe.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case fe.Timestamp:r=e.visitTimestamp;break;case fe.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case fe.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case fe.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case fe.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case fe.Time:r=e.visitTime;break;case fe.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case fe.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case fe.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case fe.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case fe.Decimal:r=e.visitDecimal;break;case fe.List:r=e.visitList;break;case fe.Struct:r=e.visitStruct;break;case fe.Union:r=e.visitUnion;break;case fe.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case fe.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case fe.Dictionary:r=e.visitDictionary;break;case fe.Interval:r=e.visitInterval;break;case fe.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case fe.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case fe.Duration:r=e.visitDuration;break;case fe.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case fe.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case fe.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case fe.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case fe.FixedSizeList:r=e.visitFixedSizeList;break;case fe.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${fe[t]}'`)}function hye(e){switch(e.typeId){case fe.Null:return fe.Null;case fe.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?fe.Int8:fe.Uint8;case 16:return n?fe.Int16:fe.Uint16;case 32:return n?fe.Int32:fe.Uint32;case 64:return n?fe.Int64:fe.Uint64}return fe.Int}case fe.Float:switch(e.precision){case Ba.HALF:return fe.Float16;case Ba.SINGLE:return fe.Float32;case Ba.DOUBLE:return fe.Float64}return fe.Float;case fe.Binary:return fe.Binary;case fe.Utf8:return fe.Utf8;case fe.Bool:return fe.Bool;case fe.Decimal:return fe.Decimal;case fe.Time:switch(e.unit){case yn.SECOND:return fe.TimeSecond;case yn.MILLISECOND:return fe.TimeMillisecond;case yn.MICROSECOND:return fe.TimeMicrosecond;case yn.NANOSECOND:return fe.TimeNanosecond}return fe.Time;case fe.Timestamp:switch(e.unit){case yn.SECOND:return fe.TimestampSecond;case yn.MILLISECOND:return fe.TimestampMillisecond;case yn.MICROSECOND:return fe.TimestampMicrosecond;case yn.NANOSECOND:return fe.TimestampNanosecond}return fe.Timestamp;case fe.Date:switch(e.unit){case mm.DAY:return fe.DateDay;case mm.MILLISECOND:return fe.DateMillisecond}return fe.Date;case fe.Interval:switch(e.unit){case gm.DAY_TIME:return fe.IntervalDayTime;case gm.YEAR_MONTH:return fe.IntervalYearMonth}return fe.Interval;case fe.Duration:switch(e.unit){case yn.SECOND:return fe.DurationSecond;case yn.MILLISECOND:return fe.DurationMillisecond;case yn.MICROSECOND:return fe.DurationMicrosecond;case yn.NANOSECOND:return fe.DurationNanosecond}return fe.Duration;case fe.Map:return fe.Map;case fe.List:return fe.List;case fe.Struct:return fe.Struct;case fe.Union:switch(e.mode){case gc.Dense:return fe.DenseUnion;case gc.Sparse:return fe.SparseUnion}return fe.Union;case fe.FixedSizeBinary:return fe.FixedSizeBinary;case fe.FixedSizeList:return fe.FixedSizeList;case fe.Dictionary:return fe.Dictionary}throw new Error(`Unrecognized type '${fe[e.typeId]}'`)}rr.prototype.visitInt8=null;rr.prototype.visitInt16=null;rr.prototype.visitInt32=null;rr.prototype.visitInt64=null;rr.prototype.visitUint8=null;rr.prototype.visitUint16=null;rr.prototype.visitUint32=null;rr.prototype.visitUint64=null;rr.prototype.visitFloat16=null;rr.prototype.visitFloat32=null;rr.prototype.visitFloat64=null;rr.prototype.visitDateDay=null;rr.prototype.visitDateMillisecond=null;rr.prototype.visitTimestampSecond=null;rr.prototype.visitTimestampMillisecond=null;rr.prototype.visitTimestampMicrosecond=null;rr.prototype.visitTimestampNanosecond=null;rr.prototype.visitTimeSecond=null;rr.prototype.visitTimeMillisecond=null;rr.prototype.visitTimeMicrosecond=null;rr.prototype.visitTimeNanosecond=null;rr.prototype.visitDenseUnion=null;rr.prototype.visitSparseUnion=null;rr.prototype.visitIntervalDayTime=null;rr.prototype.visitIntervalYearMonth=null;rr.prototype.visitDuration=null;rr.prototype.visitDurationSecond=null;rr.prototype.visitDurationMillisecond=null;rr.prototype.visitDurationMicrosecond=null;rr.prototype.visitDurationNanosecond=null;const ENe=new Float64Array(1),sE=new Uint32Array(ENe.buffer);function TNe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function SNe(e){if(e!==e)return 32256;ENe[0]=e;const t=(sE[1]&2147483648)>>16&65535;let n=sE[1]&2146435072,r=0;return n>=1089470464?sE[0]>0?n=31744:(n=(n&2080374784)>>16,r=(sE[1]&1048575)>>10):n<=1056964608?(r=1048576+(sE[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(sE[1]&1048575)+512>>10),t|n|r&65535}class wn extends rr{}function In(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const mPt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},hte=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},gPt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},yPt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},CNe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},vPt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Hg=({values:e},t,n)=>{e[t]=n},pte=({values:e},t,n)=>{e[t]=n},ANe=({values:e},t,n)=>{e[t]=SNe(n)},bPt=(e,t,n)=>{switch(e.type.precision){case Ba.HALF:return ANe(e,t,n);case Ba.SINGLE:case Ba.DOUBLE:return pte(e,t,n)}},mte=({values:e},t,n)=>{mPt(e,t,n.valueOf())},gte=({values:e},t,n)=>{hte(e,t*2,n.valueOf())},INe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},xPt=({values:e,valueOffsets:t},n,r)=>CNe(e,t,n,r),_Pt=({values:e,valueOffsets:t},n,r)=>{CNe(e,t,n,ete(r))},kNe=(e,t,n)=>{e.type.unit===mm.DAY?mte(e,t,n):gte(e,t,n)},yte=({values:e},t,n)=>hte(e,t*2,n/1e3),vte=({values:e},t,n)=>hte(e,t*2,n),bte=({values:e},t,n)=>gPt(e,t*2,n),xte=({values:e},t,n)=>yPt(e,t*2,n),RNe=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return yte(e,t,n);case yn.MILLISECOND:return vte(e,t,n);case yn.MICROSECOND:return bte(e,t,n);case yn.NANOSECOND:return xte(e,t,n)}},_te=({values:e},t,n)=>{e[t]=n},wte=({values:e},t,n)=>{e[t]=n},Ete=({values:e},t,n)=>{e[t]=n},Tte=({values:e},t,n)=>{e[t]=n},PNe=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return _te(e,t,n);case yn.MILLISECOND:return wte(e,t,n);case yn.MICROSECOND:return Ete(e,t,n);case yn.NANOSECOND:return Tte(e,t,n)}},DNe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},wPt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=cd.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},EPt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=cd.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},TPt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),SPt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),CPt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),APt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),IPt=(e,t,n)=>{const r=e.type.children.map(s=>cd.getVisitFn(s.type)),i=n instanceof Map?CPt(t,n):n instanceof ei?SPt(t,n):Array.isArray(n)?TPt(t,n):APt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},kPt=(e,t,n)=>{e.type.mode===gc.Dense?NNe(e,t,n):ONe(e,t,n)},NNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];cd.visit(i,e.valueOffsets[t],n)},ONe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];cd.visit(i,t,n)},RPt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},$Ne=(e,t,n)=>{e.type.unit===gm.DAY_TIME?Ste(e,t,n):Cte(e,t,n)},Ste=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},Cte=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},Ate=({values:e},t,n)=>{e[t]=n},Ite=({values:e},t,n)=>{e[t]=n},kte=({values:e},t,n)=>{e[t]=n},Rte=({values:e},t,n)=>{e[t]=n},LNe=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return Ate(e,t,n);case yn.MILLISECOND:return Ite(e,t,n);case yn.MICROSECOND:return kte(e,t,n);case yn.NANOSECOND:return Rte(e,t,n)}},PPt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=cd.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};wn.prototype.visitBool=In(vPt);wn.prototype.visitInt=In(Hg);wn.prototype.visitInt8=In(Hg);wn.prototype.visitInt16=In(Hg);wn.prototype.visitInt32=In(Hg);wn.prototype.visitInt64=In(Hg);wn.prototype.visitUint8=In(Hg);wn.prototype.visitUint16=In(Hg);wn.prototype.visitUint32=In(Hg);wn.prototype.visitUint64=In(Hg);wn.prototype.visitFloat=In(bPt);wn.prototype.visitFloat16=In(ANe);wn.prototype.visitFloat32=In(pte);wn.prototype.visitFloat64=In(pte);wn.prototype.visitUtf8=In(_Pt);wn.prototype.visitBinary=In(xPt);wn.prototype.visitFixedSizeBinary=In(INe);wn.prototype.visitDate=In(kNe);wn.prototype.visitDateDay=In(mte);wn.prototype.visitDateMillisecond=In(gte);wn.prototype.visitTimestamp=In(RNe);wn.prototype.visitTimestampSecond=In(yte);wn.prototype.visitTimestampMillisecond=In(vte);wn.prototype.visitTimestampMicrosecond=In(bte);wn.prototype.visitTimestampNanosecond=In(xte);wn.prototype.visitTime=In(PNe);wn.prototype.visitTimeSecond=In(_te);wn.prototype.visitTimeMillisecond=In(wte);wn.prototype.visitTimeMicrosecond=In(Ete);wn.prototype.visitTimeNanosecond=In(Tte);wn.prototype.visitDecimal=In(DNe);wn.prototype.visitList=In(wPt);wn.prototype.visitStruct=In(IPt);wn.prototype.visitUnion=In(kPt);wn.prototype.visitDenseUnion=In(NNe);wn.prototype.visitSparseUnion=In(ONe);wn.prototype.visitDictionary=In(RPt);wn.prototype.visitInterval=In($Ne);wn.prototype.visitIntervalDayTime=In(Ste);wn.prototype.visitIntervalYearMonth=In(Cte);wn.prototype.visitDuration=In(LNe);wn.prototype.visitDurationSecond=In(Ate);wn.prototype.visitDurationMillisecond=In(Ite);wn.prototype.visitDurationMicrosecond=In(kte);wn.prototype.visitDurationNanosecond=In(Rte);wn.prototype.visitFixedSizeList=In(PPt);wn.prototype.visitMap=In(EPt);const cd=new wn,Zd=Symbol.for("parent"),k2=Symbol.for("rowIndex");class Pte{constructor(t,n){return this[Zd]=t,this[k2]=n,new Proxy(this,new NPt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[k2],n=this[Zd],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=yc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${a_(t)}: ${a_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new DPt(this[Zd],this[k2])}}class DPt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,yc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Pte.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Zd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[k2]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class NPt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Zd].type.children.map(n=>n.name)}has(t,n){return t[Zd].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Zd].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Zd].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=yc.visit(t[Zd].children[r],t[k2]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Zd].type.children.findIndex(s=>s.name===n);return i!==-1?(cd.visit(t[Zd].children[i],t[k2],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class vn extends rr{}function En(e){return(t,n)=>t.getValid(n)?e(t,n):null}const OPt=(e,t)=>864e5*e[t],Dte=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),$Pt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,LPt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,MNe=e=>new Date(e),MPt=(e,t)=>MNe(OPt(e,t)),FPt=(e,t)=>MNe(Dte(e,t)),BPt=(e,t)=>null,FNe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},jPt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},BNe=({values:e},t)=>MPt(e,t),jNe=({values:e},t)=>FPt(e,t*2),Hv=({stride:e,values:t},n)=>t[e*n],UPt=({stride:e,values:t},n)=>TNe(t[e*n]),UNe=({values:e},t)=>e[t],zPt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),VPt=({values:e,valueOffsets:t},n)=>FNe(e,t,n),HPt=({values:e,valueOffsets:t},n)=>{const r=FNe(e,t,n);return r!==null?AG(r):null},qPt=({values:e},t)=>e[t],WPt=({type:e,values:t},n)=>e.precision!==Ba.HALF?t[n]:TNe(t[n]),GPt=(e,t)=>e.type.unit===mm.DAY?BNe(e,t):jNe(e,t),zNe=({values:e},t)=>1e3*Dte(e,t*2),VNe=({values:e},t)=>Dte(e,t*2),HNe=({values:e},t)=>$Pt(e,t*2),qNe=({values:e},t)=>LPt(e,t*2),YPt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return zNe(e,t);case yn.MILLISECOND:return VNe(e,t);case yn.MICROSECOND:return HNe(e,t);case yn.NANOSECOND:return qNe(e,t)}},WNe=({values:e},t)=>e[t],GNe=({values:e},t)=>e[t],YNe=({values:e},t)=>e[t],KNe=({values:e},t)=>e[t],KPt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return WNe(e,t);case yn.MILLISECOND:return GNe(e,t);case yn.MICROSECOND:return YNe(e,t);case yn.NANOSECOND:return KNe(e,t)}},XPt=({values:e,stride:t},n)=>rte.decimal(e.subarray(t*n,t*(n+1))),QPt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new ei([u])},JPt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new A8(o.slice(i,s-i))},ZPt=(e,t)=>new Pte(e,t),eDt=(e,t)=>e.type.mode===gc.Dense?XNe(e,t):QNe(e,t),XNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return yc.visit(r,e.valueOffsets[t])},QNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return yc.visit(r,t)},tDt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},nDt=(e,t)=>e.type.unit===gm.DAY_TIME?JNe(e,t):ZNe(e,t),JNe=({values:e},t)=>e.subarray(2*t,2*(t+1)),ZNe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},eOe=({values:e},t)=>e[t],tOe=({values:e},t)=>e[t],nOe=({values:e},t)=>e[t],rOe=({values:e},t)=>e[t],rDt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return eOe(e,t);case yn.MILLISECOND:return tOe(e,t);case yn.MICROSECOND:return nOe(e,t);case yn.NANOSECOND:return rOe(e,t)}},iDt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new ei([s])};vn.prototype.visitNull=En(BPt);vn.prototype.visitBool=En(jPt);vn.prototype.visitInt=En(qPt);vn.prototype.visitInt8=En(Hv);vn.prototype.visitInt16=En(Hv);vn.prototype.visitInt32=En(Hv);vn.prototype.visitInt64=En(UNe);vn.prototype.visitUint8=En(Hv);vn.prototype.visitUint16=En(Hv);vn.prototype.visitUint32=En(Hv);vn.prototype.visitUint64=En(UNe);vn.prototype.visitFloat=En(WPt);vn.prototype.visitFloat16=En(UPt);vn.prototype.visitFloat32=En(Hv);vn.prototype.visitFloat64=En(Hv);vn.prototype.visitUtf8=En(HPt);vn.prototype.visitBinary=En(VPt);vn.prototype.visitFixedSizeBinary=En(zPt);vn.prototype.visitDate=En(GPt);vn.prototype.visitDateDay=En(BNe);vn.prototype.visitDateMillisecond=En(jNe);vn.prototype.visitTimestamp=En(YPt);vn.prototype.visitTimestampSecond=En(zNe);vn.prototype.visitTimestampMillisecond=En(VNe);vn.prototype.visitTimestampMicrosecond=En(HNe);vn.prototype.visitTimestampNanosecond=En(qNe);vn.prototype.visitTime=En(KPt);vn.prototype.visitTimeSecond=En(WNe);vn.prototype.visitTimeMillisecond=En(GNe);vn.prototype.visitTimeMicrosecond=En(YNe);vn.prototype.visitTimeNanosecond=En(KNe);vn.prototype.visitDecimal=En(XPt);vn.prototype.visitList=En(QPt);vn.prototype.visitStruct=En(ZPt);vn.prototype.visitUnion=En(eDt);vn.prototype.visitDenseUnion=En(XNe);vn.prototype.visitSparseUnion=En(QNe);vn.prototype.visitDictionary=En(tDt);vn.prototype.visitInterval=En(nDt);vn.prototype.visitIntervalDayTime=En(JNe);vn.prototype.visitIntervalYearMonth=En(ZNe);vn.prototype.visitDuration=En(rDt);vn.prototype.visitDurationSecond=En(eOe);vn.prototype.visitDurationMillisecond=En(tOe);vn.prototype.visitDurationMicrosecond=En(nOe);vn.prototype.visitDurationNanosecond=En(rOe);vn.prototype.visitFixedSizeList=En(iDt);vn.prototype.visitMap=En(JPt);const yc=new vn,lh=Symbol.for("keys"),R2=Symbol.for("vals");class A8{constructor(t){return this[lh]=new ei([t.children[0]]).memoize(),this[R2]=t.children[1],new Proxy(this,new oDt)}[Symbol.iterator](){return new sDt(this[lh],this[R2])}get size(){return this[lh].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[lh],n=this[R2],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=yc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${a_(t)}: ${a_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class sDt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),yc.visit(this.vals,t)]})}}class oDt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[lh].toArray().map(String)}has(t,n){return t[lh].includes(n)}getOwnPropertyDescriptor(t,n){if(t[lh].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[lh].indexOf(n);if(r!==-1){const i=yc.visit(Reflect.get(t,R2),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[lh].indexOf(n);return i!==-1?(cd.visit(Reflect.get(t,R2),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(A8.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[lh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[R2]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let pye;function iOe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(pye=s,s=o,o=pye),o>i&&(o=i),r?r(e,s,o):[s,o]}const mye=e=>e!==e;function XS(e){if(typeof e!=="object"||e===null)return mye(e)?mye:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?X3t(e,n):!1:e instanceof Map?uDt(e):Array.isArray(e)?aDt(e):e instanceof ei?lDt(e):cDt(e,!0)}function aDt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=XS(e[n]);return I8(t)}function uDt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=XS(r);return I8(n)}function lDt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=XS(e.get(n));return I8(t)}function cDt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=XS(e[n[i]]);return I8(r,n)}function I8(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return fDt(e,n);case Map:return gye(e,n,n.keys());case A8:case Pte:case Object:case void 0:return gye(e,n,t||Object.keys(n))}return n instanceof ei?dDt(e,n):!1}}function fDt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function dDt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function gye(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function sOe(e,t,n,r){return(n&1<<r)!==0}function hDt(e,t,n,r){return(n&1<<r)>>r}function Y5(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):oOe(new Nte(n,e,t,null,sOe)).subarray(0,r)),i}return n}function oOe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class Nte{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function RG(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new Nte(e,t,n-t,e,hDt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return RG(e,t,i)+RG(e,r,n)+pDt(e,i>>3,r-i>>3)}function pDt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Vz(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Vz(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Vz(s.getUint8(i)),i+=1;return r}function Vz(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const mDt=-1;class Ti{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return nr.isSparseUnion(t)?this.children.some(n=>n.nullable):nr.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(nr.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=mDt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-RG(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Ti?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=_p(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(nr.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===gc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(nr.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===gc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(Y5(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Ti(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===fe.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(Y5(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[g0.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[g0.TYPE])&&(o[g0.TYPE]=s.subarray(t,t+n)),(s=o[g0.OFFSET])&&(o[g0.OFFSET]=s.subarray(t,t+n+1))||(s=o[g0.DATA])&&(o[g0.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Ti.prototype.children=Object.freeze([]);class _k extends rr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Ti(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.data),s=Si(t.nullBitmap),o=CA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.data),s=Si(t.nullBitmap),o=CA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length/_p(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length/_p(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length/_p(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length/_p(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length/_p(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Si(t.nullBitmap),o=CA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Si(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ra(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(nr.isSparseUnion(n))return new Ti(n,r,o,a,[void 0,void 0,void 0,s],i);const u=CA(t.valueOffsets);return new Ti(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.indices.ArrayType,t.data),{["dictionary"]:o=new ei([new _k().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length/_p(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=ra(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new _k().visit({type:n.valueType})}=t,s=Si(t.nullBitmap),{["length"]:o=i.length/_p(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new _k().visit({type:n.childType})}=t,s=Si(t.nullBitmap),o=CA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[o,void 0,s],[i])}}const gDt=new _k;function hu(e){return gDt.visit(e)}class yye{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function aOe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function uOe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function lOe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function Ote(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function $te(e,t){return e.getValid(t)}function P2(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return Ote(r,this._offsets,n,t)}}function cOe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=Ote(s,this._offsets,r,n);return t=void 0,o}}function fOe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):Ote(s,this._offsets,i,n);return t=void 0,o}}class bn extends rr{}function yDt(e,t){return t===null&&e.length>0?0:-1}function vDt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new Nte(n,e.offset+(t||0),e.length,n,sOe)){if(!i)return r;++r}return-1}function Mn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case fe.Union:break;case fe.Dictionary:break;default:return vDt(e,n)}const r=yc.getVisitFn(e),i=XS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function dOe(e,t,n){const r=yc.getVisitFn(e),i=XS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}bn.prototype.visitNull=yDt;bn.prototype.visitBool=Mn;bn.prototype.visitInt=Mn;bn.prototype.visitInt8=Mn;bn.prototype.visitInt16=Mn;bn.prototype.visitInt32=Mn;bn.prototype.visitInt64=Mn;bn.prototype.visitUint8=Mn;bn.prototype.visitUint16=Mn;bn.prototype.visitUint32=Mn;bn.prototype.visitUint64=Mn;bn.prototype.visitFloat=Mn;bn.prototype.visitFloat16=Mn;bn.prototype.visitFloat32=Mn;bn.prototype.visitFloat64=Mn;bn.prototype.visitUtf8=Mn;bn.prototype.visitBinary=Mn;bn.prototype.visitFixedSizeBinary=Mn;bn.prototype.visitDate=Mn;bn.prototype.visitDateDay=Mn;bn.prototype.visitDateMillisecond=Mn;bn.prototype.visitTimestamp=Mn;bn.prototype.visitTimestampSecond=Mn;bn.prototype.visitTimestampMillisecond=Mn;bn.prototype.visitTimestampMicrosecond=Mn;bn.prototype.visitTimestampNanosecond=Mn;bn.prototype.visitTime=Mn;bn.prototype.visitTimeSecond=Mn;bn.prototype.visitTimeMillisecond=Mn;bn.prototype.visitTimeMicrosecond=Mn;bn.prototype.visitTimeNanosecond=Mn;bn.prototype.visitDecimal=Mn;bn.prototype.visitList=Mn;bn.prototype.visitStruct=Mn;bn.prototype.visitUnion=Mn;bn.prototype.visitDenseUnion=dOe;bn.prototype.visitSparseUnion=dOe;bn.prototype.visitDictionary=Mn;bn.prototype.visitInterval=Mn;bn.prototype.visitIntervalDayTime=Mn;bn.prototype.visitIntervalYearMonth=Mn;bn.prototype.visitDuration=Mn;bn.prototype.visitDurationSecond=Mn;bn.prototype.visitDurationMillisecond=Mn;bn.prototype.visitDurationMicrosecond=Mn;bn.prototype.visitDurationNanosecond=Mn;bn.prototype.visitFixedSizeList=Mn;bn.prototype.visitMap=Mn;const K5=new bn;class xn extends rr{}function Tn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===fe.Timestamp||t instanceof vl&&t.bitWidth!==64||t instanceof Tg&&t.bitWidth!==64||t instanceof X1&&t.precision!==Ba.HALF))return new yye(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new yye(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new bDt(o)})}class bDt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}xn.prototype.visitNull=Tn;xn.prototype.visitBool=Tn;xn.prototype.visitInt=Tn;xn.prototype.visitInt8=Tn;xn.prototype.visitInt16=Tn;xn.prototype.visitInt32=Tn;xn.prototype.visitInt64=Tn;xn.prototype.visitUint8=Tn;xn.prototype.visitUint16=Tn;xn.prototype.visitUint32=Tn;xn.prototype.visitUint64=Tn;xn.prototype.visitFloat=Tn;xn.prototype.visitFloat16=Tn;xn.prototype.visitFloat32=Tn;xn.prototype.visitFloat64=Tn;xn.prototype.visitUtf8=Tn;xn.prototype.visitBinary=Tn;xn.prototype.visitFixedSizeBinary=Tn;xn.prototype.visitDate=Tn;xn.prototype.visitDateDay=Tn;xn.prototype.visitDateMillisecond=Tn;xn.prototype.visitTimestamp=Tn;xn.prototype.visitTimestampSecond=Tn;xn.prototype.visitTimestampMillisecond=Tn;xn.prototype.visitTimestampMicrosecond=Tn;xn.prototype.visitTimestampNanosecond=Tn;xn.prototype.visitTime=Tn;xn.prototype.visitTimeSecond=Tn;xn.prototype.visitTimeMillisecond=Tn;xn.prototype.visitTimeMicrosecond=Tn;xn.prototype.visitTimeNanosecond=Tn;xn.prototype.visitDecimal=Tn;xn.prototype.visitList=Tn;xn.prototype.visitStruct=Tn;xn.prototype.visitUnion=Tn;xn.prototype.visitDenseUnion=Tn;xn.prototype.visitSparseUnion=Tn;xn.prototype.visitDictionary=Tn;xn.prototype.visitInterval=Tn;xn.prototype.visitIntervalDayTime=Tn;xn.prototype.visitIntervalYearMonth=Tn;xn.prototype.visitDuration=Tn;xn.prototype.visitDurationSecond=Tn;xn.prototype.visitDurationMillisecond=Tn;xn.prototype.visitDurationMicrosecond=Tn;xn.prototype.visitDurationNanosecond=Tn;xn.prototype.visitFixedSizeList=Tn;xn.prototype.visitMap=Tn;const Lte=new xn,xDt=(e,t)=>e+t;class qv extends rr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===yn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+ym.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+ym.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const _Dt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),wDt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),EDt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=ym.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},TDt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=ym.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},SDt=(e,t)=>e.type.mode===gc.Dense?hOe(e,t):pOe(e,t),hOe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+ym.visit(t[s],r[i])},pOe=({children:e},t)=>4+ym.visitMany(e,e.map(()=>t)).reduce(xDt,0);qv.prototype.visitUtf8=_Dt;qv.prototype.visitBinary=wDt;qv.prototype.visitList=EDt;qv.prototype.visitFixedSizeList=TDt;qv.prototype.visitUnion=SDt;qv.prototype.visitDenseUnion=hOe;qv.prototype.visitSparseUnion=pOe;const ym=new qv;var mOe;const gOe={},yOe={};class ei{constructor(t){var n,r,i;const s=t[0]instanceof ei?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Ti)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=gOe[o.typeId],f=s[0];this.isValid=d=>$te(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,yOe[o.typeId]),this._offsets=uOe(s);break}this.data=s,this.type=o,this.stride=_p(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return aOe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${fe[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Lte.visit(this)}concat(...t){return new ei(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ei(iOe(this,t,n,({data:r,_offsets:i},s,o)=>lOe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case fe.Int:case fe.Float:case fe.Decimal:case fe.Time:case fe.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ei(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return nr.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(nr.isDictionary(this.type)){const t=new X5(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ei(n)}return new X5(this)}unmemoize(){if(nr.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ei(n)}return this}}mOe=Symbol.toStringTag;ei[mOe]=(e=>{e.type=nr.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(fe).map(n=>fe[n]).filter(n=>typeof n=="number"&&n!==fe.NONE);for(const n of t){const r=yc.getVisitFnByTypeId(n),i=cd.getVisitFnByTypeId(n),s=K5.getVisitFnByTypeId(n),o=ym.getVisitFnByTypeId(n);gOe[n]={get:r,set:i,indexOf:s,byteLength:o},yOe[n]=Object.create(e,{isValid:{value:P2($te)},get:{value:P2(yc.getVisitFnByTypeId(n))},set:{value:cOe(cd.getVisitFnByTypeId(n))},indexOf:{value:fOe(K5.getVisitFnByTypeId(n))},getByteLength:{value:P2(ym.getVisitFnByTypeId(n))}})}return"Vector"})(ei.prototype);class X5 extends ei{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new X5(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ei(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function CDt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${ADt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function ADt(e){return typeof e!="bigint"?a_(e):`${a_(e)}n`}const Hz=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,IDt=(e,t=0)=>e.length>=t?e.subarray(0,t):V5(new e.constructor(t),e,0);class k8{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?Hz(r*1,this.BYTES_PER_ELEMENT):Hz(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Hz(t*this.stride,this.BYTES_PER_ELEMENT);const n=IDt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=V5(new this.ArrayType(t),this.buffer)}}k8.prototype.offset=0;class CP extends k8{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class vOe extends CP{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class bOe extends CP{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Cc=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=_p(t),this._nulls=new vOe,n&&n.length>0&&(this._isValid=CDt(n))}toVector(){return new ei([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),hu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Cc.prototype.length=1;Cc.prototype.stride=1;Cc.prototype.children=null;Cc.prototype.finished=!1;Cc.prototype.nullValues=null;Cc.prototype._isValid=()=>!0;class qg extends Cc{constructor(t){super(t),this._values=new CP(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class R8 extends Cc{constructor(t){super(t),this._pendingLength=0,this._offsets=new bOe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof A8?n[lh].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class PG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const qz=2,Pp=4,I0=4,ji=4,Ny=new Int32Array(2),vye=new Float32Array(Ny.buffer),bye=new Float64Array(Ny.buffer),TO=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var DG;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(DG||(DG={}));let Q5=class xOe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new xOe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ny[0]=this.readInt32(t),vye[0]}readFloat64(t){return Ny[TO?0:1]=this.readInt32(t),Ny[TO?1:0]=this.readInt32(t+4),bye[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){vye[0]=n,this.writeInt32(t,Ny[0])}writeFloat64(t,n){bye[0]=n,this.writeInt32(t,Ny[TO?0:1]),this.writeInt32(t+4,Ny[TO?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Pp+I0)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<I0;n++)t+=String.fromCharCode(this.readInt8(this.position_+Pp+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Pp;const i=this.bytes_.subarray(t,t+r);return n===DG.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Pp}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=I0)throw new Error("FlatBuffers: file identifier must be length "+I0);for(let n=0;n<I0;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Pp+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},_Oe=class wOe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=Q5.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=wOe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=Q5.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Pp,0),this.writeInt32(this.offset()-t+Pp)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*qz;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=qz;l<s;l+=qz)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ji:0;if(n){const s=n;if(this.prep(this.minalign,Pp+I0+i),s.length!=I0)throw new TypeError("FlatBuffers: file identifier must be length "+I0);for(let o=I0-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Pp+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Pp,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Lo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Lo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ji),(n||new Lo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Lo.startKeyValue(t),Lo.addKey(t,n),Lo.addValue(t,r),Lo.endKeyValue(t)}}var PT;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(PT||(PT={}));var DT;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(DT||(DT={}));var J5;(function(e){e[e.DenseArray=0]="DenseArray"})(J5||(J5={}));class Vc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Vc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ji),(n||new Vc).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Vc.startInt(t),Vc.addBitWidth(t,n),Vc.addIsSigned(t,r),Vc.endInt(t)}}class k0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new k0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ji),(n||new k0).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Vc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):J5.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,J5.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class xx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new xx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ji),(n||new xx).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return xx.startBinary(t),xx.endBinary(t)}}class _x{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new _x).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ji),(n||new _x).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return _x.startBool(t),_x.endBool(t)}}var Z5;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Z5||(Z5={}));let s6=class CE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new CE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ji),(n||new CE).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Z5.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Z5.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return CE.startDate(t),CE.addUnit(t,n),CE.endDate(t)}};class Ul{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ul).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ji),(n||new Ul).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Ul.startDecimal(t),Ul.addPrecision(t,n),Ul.addScale(t,r),Ul.addBitWidth(t,i),Ul.endDecimal(t)}}var J1;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(J1||(J1={}));class Dp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Dp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+ji),(n||new Dp).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J1.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,J1.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Dp.startDuration(t),Dp.addUnit(t,n),Dp.endDuration(t)}}class Np{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ji),(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Np.startFixedSizeBinary(t),Np.addByteWidth(t,n),Np.endFixedSizeBinary(t)}}class Op{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Op).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ji),(n||new Op).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Op.startFixedSizeList(t),Op.addListSize(t,n),Op.endFixedSizeList(t)}}var eL;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(eL||(eL={}));class $p{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new $p).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ji),(n||new $p).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):eL.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,eL.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return $p.startFloatingPoint(t),$p.addPrecision(t,n),$p.endFloatingPoint(t)}}var tL;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(tL||(tL={}));class Lp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Lp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ji),(n||new Lp).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):tL.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,tL.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Lp.startInterval(t),Lp.addUnit(t,n),Lp.endInterval(t)}}class wx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new wx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ji),(n||new wx).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return wx.startList(t),wx.endList(t)}}let o6=class AE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new AE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ji),(n||new AE).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return AE.startMap(t),AE.addKeysSorted(t,n),AE.endMap(t)}};class Ex{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Ex).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ji),(n||new Ex).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Ex.startNull(t),Ex.endNull(t)}}class Tx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Tx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ji),(n||new Tx).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Tx.startStruct_(t),Tx.endStruct_(t)}}let EI=class Hb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Hb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ji),(n||new Hb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J1.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,J1.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Hb.startTime(t),Hb.addUnit(t,n),Hb.addBitWidth(t,r),Hb.endTime(t)}},TI=class qb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new qb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ji),(n||new qb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J1.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,J1.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return qb.startTimestamp(t),qb.addUnit(t,n),qb.addTimezone(t,r),qb.endTimestamp(t)}};var nL;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(nL||(nL={}));let Wb=class Gb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Gb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ji),(n||new Gb).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nL.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,nL.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Gb.startUnion(t),Gb.addMode(t,n),Gb.addTypeIds(t,r),Gb.endUnion(t)}};class Sx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Sx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ji),(n||new Sx).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Sx.startUtf8(t),Sx.endUtf8(t)}}var vs;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(vs||(vs={}));let jf=class a6{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new a6).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ji),(n||new a6).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):vs.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new k0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new a6).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Lo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,vs.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},bp=class p0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new p0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ji),(n||new p0).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):DT.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new jf).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Lo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,DT.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return p0.startSchema(t),p0.addEndianness(t,n),p0.addFields(t,r),p0.addCustomMetadata(t,i),p0.addFeatures(t,s),p0.endSchema(t)}};class Fc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Fc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ji),(n||new Fc).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PT.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new bp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new PG).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new PG).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Lo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,PT.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class vi{constructor(t=[],n,r,i=rl.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=OG(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new vi(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new vi(n,this.metadata)}assign(...t){const n=t[0]instanceof vi?t[0]:Array.isArray(t[0])?new vi(t[0]):new vi(t),r=[...this.fields],i=SO(SO(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:SO(SO(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=OG(s,new Map);return new vi([...r,...s],i,new Map([...this.dictionaries,...o]))}}vi.prototype.fields=null;vi.prototype.metadata=null;vi.prototype.dictionaries=null;let Li=class NG{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new NG(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],NG.new(n,r,i,s)}};Li.prototype.type=null;Li.prototype.name=null;Li.prototype.nullable=null;Li.prototype.metadata=null;function SO(e,t){return new Map([...e||new Map,...t||new Map])}function OG(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(nr.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&OG(s.children,t)}return t}var kDt=_Oe,RDt=Q5;class $G{static decode(t){t=new RDt(Si(t));const n=Fc.getRootAsFooter(t),r=vi.decode(n.schema(),new Map,n.version());return new PDt(r,n)}static encode(t){const n=new kDt,r=vi.encode(n,t.schema);Fc.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Z1.encode(n,o);const i=n.endVector();Fc.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Z1.encode(n,o);const s=n.endVector();return Fc.startFooter(n),Fc.addSchema(n,r),Fc.addVersion(n,rl.V5),Fc.addRecordBatches(n,i),Fc.addDictionaries(n,s),Fc.finishFooterBuffer(n,Fc.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=rl.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class PDt extends $G{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Z1.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Z1.decode(n)}return null}}class Z1{static decode(t){return new Z1(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return PG.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Oh(r),this.bodyLength=Oh(n)}}const CO=Object.freeze({done:!0,value:void 0});class EOe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class DDt extends EOe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return S0(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(CO);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return dye.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return dye.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return S0(this,void 0,void 0,function*(){return yield this.abort(t),CO})}return(t){return S0(this,void 0,void 0,function*(){return yield this.close(),CO})}read(t){return S0(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return S0(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(CO)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Wz extends DDt{write(t){if((t=Si(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?AG(this.toUint8Array(!0)):this.toUint8Array(!1).then(AG)}toUint8Array(t=!1){return t?pm(this._values)[0]:S0(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=rk(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return pm(o,a)[0]})}}class TOe extends R8{constructor(t){super(t),this._values=new k8(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Si(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class NDt extends Cc{constructor(t){super(t),this._values=new vOe}setValue(t,n){this._values.set(t,+n)}}class P8 extends qg{}P8.prototype._setValue=kNe;class SOe extends P8{}SOe.prototype._setValue=mte;class COe extends P8{}COe.prototype._setValue=gte;class AOe extends qg{}AOe.prototype._setValue=DNe;class ODt extends Cc{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Q1(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=rL({type:this.type.indices,nullValues:n}),this.dictionary=rL({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class IOe extends qg{}IOe.prototype._setValue=INe;class $Dt extends Cc{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new RT(this.type.listSize,new Li(n,t.type,!0)),r}}class D8 extends qg{setValue(t,n){this._values.set(t,n)}}class LDt extends D8{setValue(t,n){super.setValue(t,SNe(n))}}class MDt extends D8{}class FDt extends D8{}class N8 extends qg{}N8.prototype._setValue=$Ne;class kOe extends N8{}kOe.prototype._setValue=Ste;class ROe extends N8{}ROe.prototype._setValue=Cte;class QS extends qg{}QS.prototype._setValue=LNe;class POe extends QS{}POe.prototype._setValue=Ate;class DOe extends QS{}DOe.prototype._setValue=Ite;class NOe extends QS{}NOe.prototype._setValue=kte;class OOe extends QS{}OOe.prototype._setValue=Rte;class Wg extends qg{setValue(t,n){this._values.set(t,n)}}class BDt extends Wg{}class jDt extends Wg{}class UDt extends Wg{}class zDt extends Wg{}class VDt extends Wg{}class HDt extends Wg{}class qDt extends Wg{}class WDt extends Wg{}class GDt extends R8{constructor(t){super(t),this._offsets=new bOe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new kT(new Li(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class YDt extends R8{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new KR(new Li(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class KDt extends Cc{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class XDt extends Cc{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new yu([...this.type.children,new Li(n,t.type,!0)]),r}}class JS extends qg{}JS.prototype._setValue=RNe;class $Oe extends JS{}$Oe.prototype._setValue=yte;class LOe extends JS{}LOe.prototype._setValue=vte;class MOe extends JS{}MOe.prototype._setValue=bte;class FOe extends JS{}FOe.prototype._setValue=xte;class ZS extends qg{}ZS.prototype._setValue=PNe;class BOe extends ZS{}BOe.prototype._setValue=_te;class jOe extends ZS{}jOe.prototype._setValue=wte;class UOe extends ZS{}UOe.prototype._setValue=Ete;class zOe extends ZS{}zOe.prototype._setValue=Tte;class Mte extends Cc{constructor(t){super(t),this._typeIds=new CP(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Li(n,t.type)];return this.type=new YR(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class QDt extends Mte{}class JDt extends Mte{constructor(t){super(t),this._offsets=new CP(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class VOe extends R8{constructor(t){super(t),this._values=new k8(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,ete(n))}_flushPending(t,n){}}VOe.prototype._flushPending=TOe.prototype._flushPending;class ZDt extends rr{visitNull(){return KDt}visitBool(){return NDt}visitInt(){return Wg}visitInt8(){return BDt}visitInt16(){return jDt}visitInt32(){return UDt}visitInt64(){return zDt}visitUint8(){return VDt}visitUint16(){return HDt}visitUint32(){return qDt}visitUint64(){return WDt}visitFloat(){return D8}visitFloat16(){return LDt}visitFloat32(){return MDt}visitFloat64(){return FDt}visitUtf8(){return VOe}visitBinary(){return TOe}visitFixedSizeBinary(){return IOe}visitDate(){return P8}visitDateDay(){return SOe}visitDateMillisecond(){return COe}visitTimestamp(){return JS}visitTimestampSecond(){return $Oe}visitTimestampMillisecond(){return LOe}visitTimestampMicrosecond(){return MOe}visitTimestampNanosecond(){return FOe}visitTime(){return ZS}visitTimeSecond(){return BOe}visitTimeMillisecond(){return jOe}visitTimeMicrosecond(){return UOe}visitTimeNanosecond(){return zOe}visitDecimal(){return AOe}visitList(){return GDt}visitStruct(){return XDt}visitUnion(){return Mte}visitDenseUnion(){return JDt}visitSparseUnion(){return QDt}visitDictionary(){return ODt}visitInterval(){return N8}visitIntervalDayTime(){return kOe}visitIntervalYearMonth(){return ROe}visitDuration(){return QS}visitDurationSecond(){return POe}visitDurationMillisecond(){return DOe}visitDurationMicrosecond(){return NOe}visistDurationNanosecond(){return OOe}visitFixedSizeList(){return $Dt}visitMap(){return YDt}}const eNt=new ZDt;class _n extends rr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function El(e,t){return t instanceof e.constructor}function AP(e,t){return e===t||El(e,t)}function Gg(e,t){return e===t||El(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function O8(e,t){return e===t||El(e,t)&&e.precision===t.precision}function tNt(e,t){return e===t||El(e,t)&&e.byteWidth===t.byteWidth}function Fte(e,t){return e===t||El(e,t)&&e.unit===t.unit}function IP(e,t){return e===t||El(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function kP(e,t){return e===t||El(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function nNt(e,t){return e===t||El(e,t)&&e.children.length===t.children.length&&ev.compareManyFields(e.children,t.children)}function rNt(e,t){return e===t||El(e,t)&&e.children.length===t.children.length&&ev.compareManyFields(e.children,t.children)}function Bte(e,t){return e===t||El(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&ev.compareManyFields(e.children,t.children)}function iNt(e,t){return e===t||El(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ev.visit(e.indices,t.indices)&&ev.visit(e.dictionary,t.dictionary)}function jte(e,t){return e===t||El(e,t)&&e.unit===t.unit}function RP(e,t){return e===t||El(e,t)&&e.unit===t.unit}function sNt(e,t){return e===t||El(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ev.compareManyFields(e.children,t.children)}function oNt(e,t){return e===t||El(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ev.compareManyFields(e.children,t.children)}_n.prototype.visitNull=AP;_n.prototype.visitBool=AP;_n.prototype.visitInt=Gg;_n.prototype.visitInt8=Gg;_n.prototype.visitInt16=Gg;_n.prototype.visitInt32=Gg;_n.prototype.visitInt64=Gg;_n.prototype.visitUint8=Gg;_n.prototype.visitUint16=Gg;_n.prototype.visitUint32=Gg;_n.prototype.visitUint64=Gg;_n.prototype.visitFloat=O8;_n.prototype.visitFloat16=O8;_n.prototype.visitFloat32=O8;_n.prototype.visitFloat64=O8;_n.prototype.visitUtf8=AP;_n.prototype.visitBinary=AP;_n.prototype.visitFixedSizeBinary=tNt;_n.prototype.visitDate=Fte;_n.prototype.visitDateDay=Fte;_n.prototype.visitDateMillisecond=Fte;_n.prototype.visitTimestamp=IP;_n.prototype.visitTimestampSecond=IP;_n.prototype.visitTimestampMillisecond=IP;_n.prototype.visitTimestampMicrosecond=IP;_n.prototype.visitTimestampNanosecond=IP;_n.prototype.visitTime=kP;_n.prototype.visitTimeSecond=kP;_n.prototype.visitTimeMillisecond=kP;_n.prototype.visitTimeMicrosecond=kP;_n.prototype.visitTimeNanosecond=kP;_n.prototype.visitDecimal=AP;_n.prototype.visitList=nNt;_n.prototype.visitStruct=rNt;_n.prototype.visitUnion=Bte;_n.prototype.visitDenseUnion=Bte;_n.prototype.visitSparseUnion=Bte;_n.prototype.visitDictionary=iNt;_n.prototype.visitInterval=jte;_n.prototype.visitIntervalDayTime=jte;_n.prototype.visitIntervalYearMonth=jte;_n.prototype.visitDuration=RP;_n.prototype.visitDurationSecond=RP;_n.prototype.visitDurationMillisecond=RP;_n.prototype.visitDurationMicrosecond=RP;_n.prototype.visitDurationNanosecond=RP;_n.prototype.visitFixedSizeList=sNt;_n.prototype.visitMap=oNt;const ev=new _n;function LG(e,t){return ev.compareSchemas(e,t)}function rL(e){const t=e.type,n=new(eNt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(rL(Object.assign(Object.assign({},l),{type:u})))}}return n}function Gz(e,t){return aNt(e,t.map(n=>n.data.concat()))}function aNt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=uNt(n,o,c,t,i),o>0&&(r[s++]=hu({type:new yu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Hc(e,f))]}function uNt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:hu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var HOe;class ql{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new vi([]),this._offsets=[0],this;let i,s;t[0]instanceof vi&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Hc)return[u];if(u instanceof ql)return u.batches;if(u instanceof Ti){if(u.type instanceof yu)return[new Hc(new vi(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new ei([u[h]])),f=new vi(l.map((h,p)=>new Li(String(h),c[p].type))),[,d]=Gz(f,c);return d.length===0?[new Hc(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new vi([]),!(i instanceof vi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Hc))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!LG(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??uOe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=aOe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Lte.visit(new ei(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new ql(n,r.map(i=>new Hc(n,i)))}slice(t,n){const r=this.schema;[t,n]=iOe({length:this.numRows},t,n);const i=lOe(this.data,this._offsets,t,n);return new ql(r,i.map(s=>new Hc(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=hu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new ei(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new ei([hu({type:new Eg,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=Gz(r,a)}return new ql(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new ql(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new ql(...Gz(s,o))}}HOe=Symbol.toStringTag;ql[HOe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=P2($te),e.get=P2(yc.getVisitFn(fe.Struct)),e.set=cOe(cd.getVisitFn(fe.Struct)),e.indexOf=fOe(K5.getVisitFn(fe.Struct)),e.getByteLength=P2(ym.getVisitFn(fe.Struct)),"Table"))(ql.prototype);var qOe;let Hc=class SI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof vi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=hu({nullCount:0,type:new yu(this.schema.fields),children:this.schema.fields.map(n=>hu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Ti))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=xye(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Li.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new vi(r),a=hu({type:new yu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=xye(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=WOe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return yc.visit(this.data,t)}set(t,n){return cd.visit(this.data,t,n)}indexOf(t,n){return K5.visit(this.data,t,n)}getByteLength(t){return ym.visit(this.data,t)}[Symbol.iterator](){return Lte.visit(new ei([this.data]))}toArray(){return[...this]}concat(...t){return new ql(this.schema,[this,...t])}slice(t,n){const[r]=new ei([this.data]).slice(t,n).data;return new SI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new ei([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new ei([hu({type:new Eg,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new vi(s,new Map(this.schema.metadata)),i=hu({type:new yu(s),children:o})}return new SI(r,i)}select(t){const n=this.schema.select(t),r=new yu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new SI(n,hu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=hu({type:new yu(n.fields),length:this.numRows,children:r});return new SI(n,i)}};qOe=Symbol.toStringTag;Hc[qOe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Hc.prototype);function xye(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:hu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),hu({type:new yu(i),length:n,children:s})]}function WOe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])WOe(a.children,l==null?void 0:l.children,n);if(nr.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class lNt extends Hc{constructor(t){const n=t.fields.map(i=>hu({type:i.type})),r=hu({type:new yu(t.fields),nullCount:0,children:n});super(t,r)}}var iL;(function(e){e[e.BUFFER=0]="BUFFER"})(iL||(iL={}));var sL;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(sL||(sL={}));class Oy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Oy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ji),(n||new Oy).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):sL.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):iL.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,sL.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,iL.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Oy.startBodyCompression(t),Oy.addCodec(t,n),Oy.addMethod(t,r),Oy.endBodyCompression(t)}}let GOe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},YOe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},y0=class MG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new MG).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ji),(n||new MG).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new YOe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new GOe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Oy).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},IE=class FG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new FG).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ji),(n||new FG).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new y0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var oL;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(oL||(oL={}));let vy=class dp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new dp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ji),(n||new dp).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PT.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):oL.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Lo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,PT.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,oL.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return dp.startMessage(t),dp.addVersion(t,n),dp.addHeaderType(t,r),dp.addHeader(t,i),dp.addBodyLength(t,s),dp.addCustomMetadata(t,o),dp.endMessage(t)}};class cNt extends rr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Ex.startNull(n),Ex.endNull(n)}visitInt(t,n){return Vc.startInt(n),Vc.addBitWidth(n,t.bitWidth),Vc.addIsSigned(n,t.isSigned),Vc.endInt(n)}visitFloat(t,n){return $p.startFloatingPoint(n),$p.addPrecision(n,t.precision),$p.endFloatingPoint(n)}visitBinary(t,n){return xx.startBinary(n),xx.endBinary(n)}visitBool(t,n){return _x.startBool(n),_x.endBool(n)}visitUtf8(t,n){return Sx.startUtf8(n),Sx.endUtf8(n)}visitDecimal(t,n){return Ul.startDecimal(n),Ul.addScale(n,t.scale),Ul.addPrecision(n,t.precision),Ul.addBitWidth(n,t.bitWidth),Ul.endDecimal(n)}visitDate(t,n){return s6.startDate(n),s6.addUnit(n,t.unit),s6.endDate(n)}visitTime(t,n){return EI.startTime(n),EI.addUnit(n,t.unit),EI.addBitWidth(n,t.bitWidth),EI.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return TI.startTimestamp(n),TI.addUnit(n,t.unit),r!==void 0&&TI.addTimezone(n,r),TI.endTimestamp(n)}visitInterval(t,n){return Lp.startInterval(n),Lp.addUnit(n,t.unit),Lp.endInterval(n)}visitDuration(t,n){return Dp.startDuration(n),Dp.addUnit(n,t.unit),Dp.endDuration(n)}visitList(t,n){return wx.startList(n),wx.endList(n)}visitStruct(t,n){return Tx.startStruct_(n),Tx.endStruct_(n)}visitUnion(t,n){Wb.startTypeIdsVector(n,t.typeIds.length);const r=Wb.createTypeIdsVector(n,t.typeIds);return Wb.startUnion(n),Wb.addMode(n,t.mode),Wb.addTypeIds(n,r),Wb.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return k0.startDictionaryEncoding(n),k0.addId(n,BigInt(t.id)),k0.addIsOrdered(n,t.isOrdered),r!==void 0&&k0.addIndexType(n,r),k0.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Np.startFixedSizeBinary(n),Np.addByteWidth(n,t.byteWidth),Np.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Op.startFixedSizeList(n),Op.addListSize(n,t.listSize),Op.endFixedSizeList(n)}visitMap(t,n){return o6.startMap(n),o6.addKeysSorted(n,t.keysSorted),o6.endMap(n)}}const Yz=new cNt;function fNt(e,t=new Map){return new vi(hNt(e,t),u6(e.metadata),t)}function KOe(e){return new gf(e.count,XOe(e.columns),QOe(e.columns))}function dNt(e){return new vm(KOe(e.data),e.id,e.isDelta)}function hNt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Li.fromJSON(n,t))}function _ye(e,t){return(e.children||[]).filter(Boolean).map(n=>Li.fromJSON(n,t))}function XOe(e){return(e||[]).reduce((t,n)=>[...t,new tv(n.count,pNt(n.VALIDITY)),...XOe(n.children)],[])}function QOe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Up(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Up(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Up(t.length,i.OFFSET.length)),i.DATA&&t.push(new Up(t.length,i.DATA.length)),t=QOe(i.children,t)}return t}function pNt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function mNt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Eye(e,_ye(e,t)),i=new Li(e.name,o,e.nullable,u6(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?wye(r):new K1,a=new Q1(t.get(n),r,n,s.isOrdered),i=new Li(e.name,a,e.nullable,u6(e.metadata))):(r=(r=s.indexType)?wye(r):new K1,t.set(n,o=Eye(e,_ye(e,t))),a=new Q1(o,r,n,s.isOrdered),i=new Li(e.name,a,e.nullable,u6(e.metadata))),i||null}function u6(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function wye(e){return new vl(e.isSigned,e.bitWidth)}function Eye(e,t){const n=e.type.name;switch(n){case"NONE":return new Eg;case"null":return new Eg;case"binary":return new WR;case"utf8":return new CT;case"bool":return new GR;case"list":return new kT((t||[])[0]);case"struct":return new yu(t||[]);case"struct_":return new yu(t||[])}switch(n){case"int":{const r=e.type;return new vl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new X1(Ba[r.precision])}case"decimal":{const r=e.type;return new H5(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new AT(mm[r.unit])}case"time":{const r=e.type;return new Tg(yn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new q5(yn[r.unit],r.timezone)}case"interval":{const r=e.type;return new IT(gm[r.unit])}case"duration":{const r=e.type;return new W5(yn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new YR(gc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new G5(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new RT(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new KR((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var gNt=_Oe,yNt=Q5;class Mp{static fromJSON(t,n){const r=new Mp(0,rl.V5,n);return r._createHeader=vNt(t,n),r}static decode(t){t=new yNt(Si(t));const n=vy.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Mp(r,i,s);return o._createHeader=bNt(n,s),o}static encode(t){const n=new gNt;let r=-1;return t.isSchema()?r=vi.encode(n,t.header()):t.isRecordBatch()?r=gf.encode(n,t.header()):t.isDictionaryBatch()&&(r=vm.encode(n,t.header())),vy.startMessage(n),vy.addVersion(n,rl.V5),vy.addHeader(n,r),vy.addHeaderType(n,t.headerType),vy.addBodyLength(n,BigInt(t.bodyLength)),vy.finishMessageBuffer(n,vy.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof vi)return new Mp(0,rl.V5,oa.Schema,t);if(t instanceof gf)return new Mp(n,rl.V5,oa.RecordBatch,t);if(t instanceof vm)return new Mp(n,rl.V5,oa.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===oa.Schema}isRecordBatch(){return this.headerType===oa.RecordBatch}isDictionaryBatch(){return this.headerType===oa.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Oh(t)}}class gf{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Oh(t)}}class vm{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Oh(n)}}class Up{constructor(t,n){this.offset=Oh(t),this.length=Oh(n)}}class tv{constructor(t,n){this.length=Oh(t),this.nullCount=Oh(n)}}function vNt(e,t){return()=>{switch(t){case oa.Schema:return vi.fromJSON(e);case oa.RecordBatch:return gf.fromJSON(e);case oa.DictionaryBatch:return vm.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${oa[t]}, type: ${t} }`)}}function bNt(e,t){return()=>{switch(t){case oa.Schema:return vi.decode(e.header(new bp),new Map,e.version());case oa.RecordBatch:return gf.decode(e.header(new y0),e.version());case oa.DictionaryBatch:return vm.decode(e.header(new IE),e.version())}throw new Error(`Unrecognized Message type: { name: ${oa[t]}, type: ${t} }`)}}Li.encode=RNt;Li.decode=INt;Li.fromJSON=mNt;vi.encode=kNt;vi.decode=xNt;vi.fromJSON=fNt;gf.encode=PNt;gf.decode=_Nt;gf.fromJSON=KOe;vm.encode=DNt;vm.decode=wNt;vm.fromJSON=dNt;tv.encode=NNt;tv.decode=TNt;Up.encode=ONt;Up.decode=ENt;function xNt(e,t=new Map,n=rl.V5){const r=ANt(e,t);return new vi(r,l6(e),t,n)}function _Nt(e,t=rl.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new gf(e.length(),SNt(e),CNt(e,t))}function wNt(e,t=rl.V5){return new vm(gf.decode(e.data(),t),e.id(),e.isDelta())}function ENt(e){return new Up(e.offset(),e.length())}function TNt(e){return new tv(e.length(),e.nullCount())}function SNt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=tv.decode(n));return t}function CNt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<rl.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Up.decode(r));return n}function ANt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Li.decode(r,t));return n}function Tye(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Li.decode(r,t));return n}function INt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Cye(e,Tye(e,t)),r=new Li(e.name(),i,e.nullable(),l6(e))):t.has(n=Oh(a.id()))?(s=(s=a.indexType())?Sye(s):new K1,o=new Q1(t.get(n),s,n,a.isOrdered()),r=new Li(e.name(),o,e.nullable(),l6(e))):(s=(s=a.indexType())?Sye(s):new K1,t.set(n,i=Cye(e,Tye(e,t))),o=new Q1(i,s,n,a.isOrdered()),r=new Li(e.name(),o,e.nullable(),l6(e))),r||null}function l6(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Sye(e){return new vl(e.isSigned(),e.bitWidth())}function Cye(e,t){const n=e.typeType();switch(n){case vs.NONE:return new Eg;case vs.Null:return new Eg;case vs.Binary:return new WR;case vs.Utf8:return new CT;case vs.Bool:return new GR;case vs.List:return new kT((t||[])[0]);case vs.Struct_:return new yu(t||[])}switch(n){case vs.Int:{const r=e.type(new Vc);return new vl(r.isSigned(),r.bitWidth())}case vs.FloatingPoint:{const r=e.type(new $p);return new X1(r.precision())}case vs.Decimal:{const r=e.type(new Ul);return new H5(r.scale(),r.precision(),r.bitWidth())}case vs.Date:{const r=e.type(new s6);return new AT(r.unit())}case vs.Time:{const r=e.type(new EI);return new Tg(r.unit(),r.bitWidth())}case vs.Timestamp:{const r=e.type(new TI);return new q5(r.unit(),r.timezone())}case vs.Interval:{const r=e.type(new Lp);return new IT(r.unit())}case vs.Duration:{const r=e.type(new Dp);return new W5(r.unit())}case vs.Union:{const r=e.type(new Wb);return new YR(r.mode(),r.typeIdsArray()||[],t||[])}case vs.FixedSizeBinary:{const r=e.type(new Np);return new G5(r.byteWidth())}case vs.FixedSizeList:{const r=e.type(new Op);return new RT(r.listSize(),(t||[])[0])}case vs.Map:{const r=e.type(new o6);return new KR((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${vs[n]}" (${n})`)}function kNt(e,t){const n=t.fields.map(s=>Li.encode(e,s));bp.startFieldsVector(e,n.length);const r=bp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?bp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Lo.startKeyValue(e),Lo.addKey(e,a),Lo.addValue(e,u),Lo.endKeyValue(e)})):-1;return bp.startSchema(e),bp.addFields(e,r),bp.addEndianness(e,$Nt?DT.Little:DT.Big),i!==-1&&bp.addCustomMetadata(e,i),bp.endSchema(e)}function RNt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;nr.isDictionary(s)?(o=s.dictionary.typeId,i=Yz.visit(s,e),r=Yz.visit(s.dictionary,e)):r=Yz.visit(s,e);const a=(s.children||[]).map(c=>Li.encode(e,c)),u=jf.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?jf.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Lo.startKeyValue(e),Lo.addKey(e,d),Lo.addValue(e,h),Lo.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),jf.startField(e),jf.addType(e,r),jf.addTypeType(e,o),jf.addChildren(e,u),jf.addNullable(e,!!t.nullable),n!==-1&&jf.addName(e,n),i!==-1&&jf.addDictionary(e,i),l!==-1&&jf.addCustomMetadata(e,l),jf.endField(e)}function PNt(e,t){const n=t.nodes||[],r=t.buffers||[];y0.startNodesVector(e,n.length);for(const o of n.slice().reverse())tv.encode(e,o);const i=e.endVector();y0.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Up.encode(e,o);const s=e.endVector();return y0.startRecordBatch(e),y0.addLength(e,BigInt(t.length)),y0.addNodes(e,i),y0.addBuffers(e,s),y0.endRecordBatch(e)}function DNt(e,t){const n=gf.encode(e,t.data);return IE.startDictionaryBatch(e),IE.addId(e,BigInt(t.id)),IE.addIsDelta(e,t.isDelta),IE.addData(e,n),IE.endDictionaryBatch(e)}function NNt(e,t){return YOe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function ONt(e,t){return GOe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const $Nt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),BG="ARROW1",Ute=new Uint8Array(BG.length);for(let e=0;e<BG.length;e+=1)Ute[e]=BG.codePointAt(e);Ute.length;class uo extends rr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Hc?s.data.children:s.data),r=new uo;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof ei)return this.visitMany(t.data),this;const{type:n}=t;if(!nr.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(nr.isUnion(n))this.nodes.push(new tv(r,0));else{const{nullCount:i}=t;nr.isNull(n)||Th.call(this,i<=0?new Uint8Array(0):Y5(t.offset,r,t.nullBitmap)),this.nodes.push(new tv(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Th(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Up(this._byteLength,t)),this._byteLength+=t,this}function LNt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Th.call(this,i),n.mode===gc.Sparse)return jG.call(this,e);if(n.mode===gc.Dense){if(e.offset<=0)return Th.call(this,s),jG.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Th.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function MNt(e){let t;return e.nullCount>=e.length?Th.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Th.call(this,Y5(e.offset,e.length,t)):Th.call(this,oOe(e.values))}function Yg(e){return Th.call(this,e.values.subarray(0,e.length*e.stride))}function JOe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Th.call(this,eNe(-i,t+1,r)),Th.call(this,n.subarray(i,i+o)),this}function zte(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Th.call(this,eNe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function jG(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}uo.prototype.visitBool=MNt;uo.prototype.visitInt=Yg;uo.prototype.visitFloat=Yg;uo.prototype.visitUtf8=JOe;uo.prototype.visitBinary=JOe;uo.prototype.visitFixedSizeBinary=Yg;uo.prototype.visitDate=Yg;uo.prototype.visitTimestamp=Yg;uo.prototype.visitTime=Yg;uo.prototype.visitDecimal=Yg;uo.prototype.visitList=zte;uo.prototype.visitStruct=jG;uo.prototype.visitUnion=LNt;uo.prototype.visitInterval=Yg;uo.prototype.visitDuration=Yg;uo.prototype.visitFixedSizeList=zte;uo.prototype.visitMap=zte;class ZOe extends EOe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Wz,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Vv(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return S8(t)?t.then(n=>this.writeAll(n)):C8(t)?Wte(this,t):qte(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Wz?this._sink=t:(this._sink=new Wz,t&&V3t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&H3t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!LG(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof ql&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Hc&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!LG(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Hc?t instanceof lNt||this._writeRecordBatch(t):t instanceof ql?this.writeAll(t.batches):tte(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Mp.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===oa.RecordBatch?this._recordBatchBlocks.push(new Z1(a,t.bodyLength,this._position)):t.headerType===oa.DictionaryBatch&&this._dictionaryBlocks.push(new Z1(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Si(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Mp.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Ute)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=uo.assemble(t),o=new gf(t.numRows,r,i),a=Mp.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=uo.assemble(new ei([t])),u=new gf(t.length,s,o),l=new vm(u,n,r),c=Mp.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class Vte extends ZOe{static writeAll(t,n){const r=new Vte(n);return S8(t)?t.then(i=>r.writeAll(i)):C8(t)?Wte(r,t):qte(r,t)}}class Hte extends ZOe{static writeAll(t){const n=new Hte;return S8(t)?t.then(r=>n.writeAll(r)):C8(t)?Wte(n,t):qte(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=$G.encode(new $G(t,rl.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function qte(e,t){let n=t;t instanceof ql&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Wte(e,t){var n,r,i,s,o,a,u;return S0(this,void 0,void 0,function*(){try{for(n=!0,r=rk(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function FNt(e,t="stream"){return(t==="stream"?Vte:Hte).writeAll(e).toUint8Array(!0)}function Gte(e,t=1){return(e*t+63&-64||64)/t}function nv(e,t,n=e.BYTES_PER_ELEMENT){return new e(Gte(t,n))}function Yte(e){return e instanceof Ti?e:new Ti(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function BNt(e){return new ei([Yte(e)])}const Kte=new TextEncoder;function jNt(e,t,n){const r=Kte.encode(n);return e.set(r,t),r.length}function UNt(e,t,n){return Kte.encodeInto(n,e.subarray(t)).written}const zNt=Kte.encodeInto?UNt:jNt;function Aye(e,t){const n=nv(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function VNt(e,t){const n=nv(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function HNt(e,t){const n=nv(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function qNt(e,t){const n=nv(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function WNt(e){const t=rL({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function GNt(e,t,n){const r=nv(Int32Array,t+1),i=nv(Uint8Array,3*n);let s=0;return{set(o,a){s+=zNt(i,s,o),r[a+1]=s},data:()=>{const o=Gte(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function YNt(e,t){const n=[],r=nv(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:KNt(e.dictionary,n,o)})}}function KNt(e,t,n){const r=GNt(e,t.length,n);return t.forEach(r.set),BNt(r.data())}function XNt(e,t){const n=nv(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function QNt(e,t,n=!0){let r;switch(e.typeId){case fe.Int:r=e.bitWidth<64?Aye:null;break;case fe.Float:r=e.precision>0?Aye:null;break;case fe.Dictionary:r=e.dictionary.typeId===fe.Utf8&&e.indices.typeId===fe.Int&&e.indices.bitWidth<64?YNt:null;break;case fe.Bool:r=VNt;break;case fe.Date:r=e.unit?qNt:HNt;break}return r==null?WNt(e):n?XNt(r(e,t),t):r(e,t)}function JNt(e,t){const n=e.length,r=Gte(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),Yte({type:t,length:n,buffers:[null,i]})}function e4e(e,t,n,r,i=!0){const s=QNt(r,e,i);return t(n,s.set),Yte(s.data())}function Xte(e){if(e instanceof nr||e==null)return e;switch(e){case fe.Binary:return new WR;case fe.Bool:return new GR;case fe.DateDay:return new sPt;case fe.DateMillisecond:case fe.Date:return new oPt;case fe.Dictionary:return new Q1(new CT,new K1);case fe.Float16:return new wNe;case fe.Float32:return new fte;case fe.Float64:case fe.Float:return new dte;case fe.Int8:return new ite;case fe.Int16:return new ste;case fe.Int32:case fe.Int:return new K1;case fe.Int64:return new ote;case fe.IntervalDayTime:return new fPt;case fe.Interval:case fe.IntervalYearMonth:return new dPt;case fe.Null:return new Eg;case fe.TimeMicrosecond:return new lPt;case fe.TimeMillisecond:case fe.Time:return new uPt;case fe.TimeNanosecond:return new cPt;case fe.TimeSecond:return new aPt;case fe.Uint8:return new ate;case fe.Uint16:return new ute;case fe.Uint32:return new lte;case fe.Uint64:return new cte;case fe.Utf8:return new CT;default:Jn(`Unsupported type code: ${hm(e)}. Use a data type constructor instead?`)}}function ZNt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function t4e(e,t){const n=UG();return e(t,n.add),n}function UG(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(wg(t))++e.dates,ZNt(t)&&++e.utcdays;else if(bx(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=UG());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=UG())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Xte(eOt(e))}};return e}function eOt(e){const t=e.count-e.nulls;if(t===0)return fe.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?fe.Float64:n<128?fe.Int8:n<32768?fe.Int16:fe.Int32:n>=2**32?fe.Float64:n<256?fe.Uint8:n<65536?fe.Uint16:fe.Uint32}else{if(e.nums===t)return fe.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?fe.Int64:Jn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?fe.Uint64:Jn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return fe.Bool;if(e.utcdays===t)return fe.DateDay;if(e.dates===t)return fe.DateMillisecond;if(e.arrays===t){const n=Li.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new RT(e.minlen,n):new kT(n)}else if(e.structs===t){const n=e.struct_prof;return new yu(Object.keys(n).map(r=>Li.new(r,n[r].type(),!0)))}else{if(e.strings>0)return fe.Dictionary;Jn("Type inference failure")}}}}function tOt(e,t,n,r,i,s=!0){if(i=Xte(i),!i){const o=t4e(r,t);s=o.nulls>0,i=o.type()}return e4e(n,r,t,i,s)}function nOt(e,t,n,r,i,s=!0){i=Xte(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=rOt(o);if(u&&a&&Iye(u.type,i))return u;const l=o.data;if(TP(l)){const c=iOt(l);if(a&&c&&Iye(c,i))return JNt(l,c);i=i||c,s=!1}if(!i){const c=t4e(r,o);s=c.nulls>0,i=c.type()}return e4e(n,r,o,i,s)}function rOt(e){return e instanceof ei?e:e.vector instanceof ei?e.vector:null}function iOt(e){const n={Float32Array:fte,Float64Array:dte,Int8Array:ite,Int16Array:ste,Int32Array:K1,Uint8Array:ate,Uint16Array:ute,Uint32Array:lte,BigInt64Array:ote,BigUint64Array:cte}[e.constructor.name];return n?new n:null}function Iye(e,t){return!e||!t?!0:e.compareTo(t)}function sOt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function oOt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&bx(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const aOt=()=>Jn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function uOt(){try{return ql}catch{aOt()}}function n4e(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=lOt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Jn("Column length mismatch"),a[l]=c});const u=uOt();return new u(a)}function lOt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=ds(n)?n(e):Zr(n)?n:null;if(Zr(e))return{dataFrom:tOt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:sOt(e,r,i)};if(cOt(e))return{dataFrom:nOt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:oOt(e,r,i)};Jn("Unsupported input data type")}function cOt(e){return e&&ds(e.reify)}function fOt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return FNt(n4e(e,r),n)}function dOt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function hOt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&wg(u))++i,dOt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function $8(e,t){return ds(t)?t(e):t||e.columnNames()}function r4e(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=hOt(pOt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function pOt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function Qte(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function mOt(e,t={}){const n=$8(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":wg(l)?E8(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return Qte(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function i4e(e,t={}){if(ds(t))return t(e)+"";const n=typeof e;if(n==="object"){if(wg(e))return t.utc?E8(e):CDe(e);{const r=JSON.stringify(e,(s,o)=>TP(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function L8(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function gOt(e,t={}){const n=$8(e,t.columns),{align:r,format:i}=r4e(e,n,t),s=yOt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(i4e(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",_=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${_?` style="${_}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Qte(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function yOt(e){return L8(e.style,t=>ds(t)?t:()=>t)}function vOt(e,t=!0,n=!1){return e===void 0||e?t:n}const bOt=e=>wg(e)?E8(e,!0):e;function xOt(e,t={}){const n=vOt(t.schema),r=t.format||{},i=$8(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||bOt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function _Ot(e,t={}){const n=$8(e,t.columns),{align:r,format:i}=r4e(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return Qte(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(i4e(u,i[l]))+"|"}}),a+`
`}function s4e(e,t){for(const[n,r]of T8(t))e.set(n,r);return e}function wOt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Sg(e,t,n=new Map){return t=yl(t)?e.columnName(t):t,Ga(t)?n.set(t,t):Zr(t)?t.forEach(r=>Sg(e,r,n)):ds(t)?Sg(e,t(e),n):Ru(t)?s4e(n,t):Jn(`Invalid column selection: ${hm(t)}`),n}function M8(e,t){return e.toObject=t,e}function o4e(e){return Zr(e)?e.map(o4e):e&&e.toObject?e.toObject():e}function NT(){return M8(e=>e.columnNames(),()=>({all:[]}))}function a4e(...e){return e=e.flat(),M8(t=>{const n=Sg(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:o4e(e)}))}function EOt(e,t){return M8(n=>{let r=yl(e)?e:n.columnIndex(e),i=yl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function TOt(e){return Ga(e)&&(e=RegExp(wOt(e))),M8(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function SOt(e){return TP(e.data)?e.data.constructor:Array}class R0 extends zRt{static from(t,n){return new R0(qRt(t,n),n)}static new(t,n){if(t instanceof R0)return t;const r={},i=[];for(const[s,o]of T8(t))r[s]=o,i.push(s);return new R0(r,n||i)}constructor(t,n,r,i,s,o){L8(t,HRt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new R0(t||this._data,n||(t?null:this._names),o,i!==void 0?i:x3t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Tf(r).groupby(r.groups());return t.forEach(s=>{s=R0.new(s),s.numRows()!==n&&Jn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Jn(`Unrecognized column: ${t}`)}object(t=0){return kye(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Sg(this,t.columns||NT()),o=QDe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),w3t(this,u,a,n)}return a}*[Symbol.iterator](){const t=kye(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(SOt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=_3t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return n4e(this,t)}toArrowBuffer(t){return fOt(this,t)}toCSV(t){return mOt(this,t)}toHTML(t){return gOt(this,t)}toJSON(t){return xOt(this,t)}toMarkdown(t){return _Ot(this,t)}}function kye(e){let t=e._builder;if(!t){const n=QDe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class COt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Ur(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=AOt[e.type];s&&s(e,t,n)}const AO=(e,t,n)=>{Ur(e.argument,t,n,e)},Kz=(e,t,n)=>{Ur(e.left,t,n,e),Ur(e.right,t,n,e)},Rye=(e,t,n)=>{Ur(e.test,t,n,e),Ur(e.consequent,t,n,e),e.alternate&&Ur(e.alternate,t,n,e)},Xz=(e,t,n)=>{xp(e.params,t,n,e),Ur(e.body,t,n,e)},Pye=(e,t,n)=>{Ur(e.callee,t,n,e),xp(e.arguments,t,n,e)},xp=(e,t,n,r)=>{e.forEach(i=>Ur(i,t,n,r))},AOt={TemplateLiteral:(e,t,n)=>{xp(e.expressions,t,n,e),xp(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Ur(e.object,t,n,e),Ur(e.property,t,n,e)},CallExpression:Pye,NewExpression:Pye,ArrayExpression:(e,t,n)=>{xp(e.elements,t,n,e)},AssignmentExpression:Kz,AwaitExpression:AO,BinaryExpression:Kz,LogicalExpression:Kz,UnaryExpression:AO,UpdateExpression:AO,ConditionalExpression:Rye,ObjectExpression:(e,t,n)=>{xp(e.properties,t,n,e)},Property:(e,t,n)=>{Ur(e.key,t,n,e),Ur(e.value,t,n,e)},ArrowFunctionExpression:Xz,FunctionExpression:Xz,FunctionDeclaration:Xz,VariableDeclaration:(e,t,n)=>{xp(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Ur(e.id,t,n,e),Ur(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Ur(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{xp(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Ur(e.expression,t,n,e)},IfStatement:Rye,ForStatement:(e,t,n)=>{Ur(e.init,t,n,e),Ur(e.test,t,n,e),Ur(e.update,t,n,e),Ur(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Ur(e.test,t,n,e),Ur(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Ur(e.body,t,n,e),Ur(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Ur(e.discriminant,t,n,e),xp(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Ur(e.test,t,n,e),xp(e.consequent,t,n,e)},ReturnStatement:AO,Program:(e,t,n)=>{Ur(e.body[0],t,n,e)}};function u4e(e){delete e.start,delete e.end,delete e.optional}function Dye(e){u4e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function IOt(e){return Ur(e,null,{Column:Dye,Constant:Dye,Default:u4e}),e}function Fo(e,t){return t&&t.type===e}function kOt(e){return Fo(S3t,e)||Fo(T3t,e)}function ROt(e){return ds(e)?e:()=>e}const POt="Escaped functions are not valid as rollup or pivot values.";function DOt(e,t,n){e.aggronly&&Jn(POt);const r="(row,data)=>fn("+XDe(e.table.columnNames())+",$)";return{escape:Zee.escape(r,ROt(t.expr),n)}}var NOt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],l4e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],OOt="-----------------------------------------------------------------------------------------------------------------------------------------------------",c4e="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Qz={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Jz="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",$Ot={5:Jz,"5module":Jz+" export import",6:Jz+" const class extends export import super"},LOt=/^in(stanceof)?$/,MOt=new RegExp("["+c4e+"]"),FOt=new RegExp("["+c4e+OOt+"]");function zG(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Cg(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&MOt.test(String.fromCharCode(e)):t===!1?!1:zG(e,l4e)}function OT(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&FOt.test(String.fromCharCode(e)):t===!1?!1:zG(e,l4e)||zG(e,NOt)}var Gr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function $f(e,t){return new Gr(e,{beforeExpr:!0,binop:t})}var Lf={beforeExpr:!0},Nl={startsExpr:!0},Jte={};function Pr(e,t){return t===void 0&&(t={}),t.keyword=e,Jte[e]=new Gr(e,t)}var te={num:new Gr("num",Nl),regexp:new Gr("regexp",Nl),string:new Gr("string",Nl),name:new Gr("name",Nl),privateId:new Gr("privateId",Nl),eof:new Gr("eof"),bracketL:new Gr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Gr("]"),braceL:new Gr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Gr("}"),parenL:new Gr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Gr(")"),comma:new Gr(",",Lf),semi:new Gr(";",Lf),colon:new Gr(":",Lf),dot:new Gr("."),question:new Gr("?",Lf),questionDot:new Gr("?."),arrow:new Gr("=>",Lf),template:new Gr("template"),invalidTemplate:new Gr("invalidTemplate"),ellipsis:new Gr("...",Lf),backQuote:new Gr("`",Nl),dollarBraceL:new Gr("${",{beforeExpr:!0,startsExpr:!0}),eq:new Gr("=",{beforeExpr:!0,isAssign:!0}),assign:new Gr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Gr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Gr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:$f("||",1),logicalAND:$f("&&",2),bitwiseOR:$f("|",3),bitwiseXOR:$f("^",4),bitwiseAND:$f("&",5),equality:$f("==/!=/===/!==",6),relational:$f("</>/<=/>=",7),bitShift:$f("<</>>/>>>",8),plusMin:new Gr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:$f("%",10),star:$f("*",10),slash:$f("/",10),starstar:new Gr("**",{beforeExpr:!0}),coalesce:$f("??",1),_break:Pr("break"),_case:Pr("case",Lf),_catch:Pr("catch"),_continue:Pr("continue"),_debugger:Pr("debugger"),_default:Pr("default",Lf),_do:Pr("do",{isLoop:!0,beforeExpr:!0}),_else:Pr("else",Lf),_finally:Pr("finally"),_for:Pr("for",{isLoop:!0}),_function:Pr("function",Nl),_if:Pr("if"),_return:Pr("return",Lf),_switch:Pr("switch"),_throw:Pr("throw",Lf),_try:Pr("try"),_var:Pr("var"),_const:Pr("const"),_while:Pr("while",{isLoop:!0}),_with:Pr("with"),_new:Pr("new",{beforeExpr:!0,startsExpr:!0}),_this:Pr("this",Nl),_super:Pr("super",Nl),_class:Pr("class",Nl),_extends:Pr("extends",Lf),_export:Pr("export"),_import:Pr("import",Nl),_null:Pr("null",Nl),_true:Pr("true",Nl),_false:Pr("false",Nl),_in:Pr("in",{beforeExpr:!0,binop:7}),_instanceof:Pr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Pr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Pr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Pr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Td=/\r\n?|\n|\u2028|\u2029/,BOt=new RegExp(Td.source,"g");function eC(e){return e===10||e===13||e===8232||e===8233}function f4e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(eC(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var d4e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Yf=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,h4e=Object.prototype,jOt=h4e.hasOwnProperty,UOt=h4e.toString,PP=Object.hasOwn||function(e,t){return jOt.call(e,t)},Nye=Array.isArray||function(e){return UOt.call(e)==="[object Array]"},Oye=Object.create(null);function e1(e){return Oye[e]||(Oye[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function rv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var zOt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,XR=function(t,n){this.line=t,this.column=n};XR.prototype.offset=function(t){return new XR(this.line,this.column+t)};var F8=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function p4e(e,t){for(var n=1,r=0;;){var i=f4e(e,r,t);if(i<0)return new XR(n,t-r);++n,r=i}}var VG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},$ye=!1;function VOt(e){var t={};for(var n in VG)t[n]=e&&PP(e,n)?e[n]:VG[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!$ye&&typeof console=="object"&&console.warn&&($ye=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Nye(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Nye(t.onComment)&&(t.onComment=HOt(t,t.onComment)),t}function HOt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new F8(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var QR=1,tC=2,Zte=4,m4e=8,g4e=16,y4e=32,ene=64,v4e=128,DP=256,tne=QR|tC|DP;function nne(e,t){return tC|(e?Zte:0)|(t?m4e:0)}var aL=0,rne=1,Kg=2,b4e=3,x4e=4,_4e=5,Go=function(t,n,r){this.options=t=VOt(t),this.sourceFile=t.sourceFile,this.keywords=e1($Ot[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=Qz[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=e1(i);var s=(i?i+" ":"")+Qz.strict;this.reservedWordsStrict=e1(s),this.reservedWordsStrictBind=e1(s+" "+Qz.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Td).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=te.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(QR),this.regexpState=null,this.privateNameStack=[]},Om={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Go.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Om.inFunction.get=function(){return(this.currentVarScope().flags&tC)>0};Om.inGenerator.get=function(){return(this.currentVarScope().flags&m4e)>0&&!this.currentVarScope().inClassFieldInit};Om.inAsync.get=function(){return(this.currentVarScope().flags&Zte)>0&&!this.currentVarScope().inClassFieldInit};Om.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&DP)return!1;if(t.flags&tC)return(t.flags&Zte)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Om.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&ene)>0||n||this.options.allowSuperOutsideMethod};Om.allowDirectSuper.get=function(){return(this.currentThisScope().flags&v4e)>0};Om.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Om.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(tC|DP))>0||n};Om.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&DP)>0};Go.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Go.parse=function(t,n){return new this(n,t).parse()};Go.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Go.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Go.prototype,Om);var Tl=Go.prototype,qOt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Tl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Yf.lastIndex=e,e+=Yf.exec(this.input)[0].length;var t=qOt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Yf.lastIndex=e+t[0].length;var n=Yf.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Td.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Yf.lastIndex=e,e+=Yf.exec(this.input)[0].length,this.input[e]===";"&&e++}};Tl.eat=function(e){return this.type===e?(this.next(),!0):!1};Tl.isContextual=function(e){return this.type===te.name&&this.value===e&&!this.containsEsc};Tl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Tl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Tl.canInsertSemicolon=function(){return this.type===te.eof||this.type===te.braceR||Td.test(this.input.slice(this.lastTokEnd,this.start))};Tl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Tl.semicolon=function(){!this.eat(te.semi)&&!this.insertSemicolon()&&this.unexpected()};Tl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Tl.expect=function(e){this.eat(e)||this.unexpected()};Tl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var B8=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Tl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Tl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Tl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Tl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var en=Go.prototype;en.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==te.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ine={kind:"loop"},WOt={kind:"switch"};en.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Yf.lastIndex=this.pos;var t=Yf.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Cg(r,!0)){for(var i=n+1;OT(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!LOt.test(s))return!0}return!1};en.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Yf.lastIndex=this.pos;var e=Yf.exec(this.input),t=this.pos+e[0].length,n;return!Td.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(OT(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};en.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=te._var,s="let"),r){case te._break:case te._continue:return this.parseBreakContinueStatement(i,r.keyword);case te._debugger:return this.parseDebuggerStatement(i);case te._do:return this.parseDoStatement(i);case te._for:return this.parseForStatement(i);case te._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case te._class:return e&&this.unexpected(),this.parseClass(i,!0);case te._if:return this.parseIfStatement(i);case te._return:return this.parseReturnStatement(i);case te._switch:return this.parseSwitchStatement(i);case te._throw:return this.parseThrowStatement(i);case te._try:return this.parseTryStatement(i);case te._const:case te._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case te._while:return this.parseWhileStatement(i);case te._with:return this.parseWithStatement(i);case te.braceL:return this.parseBlock(!0,i);case te.semi:return this.parseEmptyStatement(i);case te._export:case te._import:if(this.options.ecmaVersion>10&&r===te._import){Yf.lastIndex=this.pos;var o=Yf.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===te._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===te.name&&c.type==="Identifier"&&this.eat(te.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};en.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(te.semi)||this.insertSemicolon()?e.label=null:this.type!==te.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};en.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};en.parseDoStatement=function(e){return this.next(),this.labels.push(ine),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(te._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(te.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};en.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ine),this.enterScope(0),this.expect(te.parenL),this.type===te.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===te._var||this.type===te._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new B8,u=this.parseExpression(t>-1?"await":!0,a);return this.type===te._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};en.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,wk|(n?0:HG),!1,t)};en.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(te._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};en.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(te.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};en.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(te.braceL),this.labels.push(WOt),this.enterScope(0);for(var t,n=!1;this.type!==te.braceR;)if(this.type===te._case||this.type===te._default){var r=this.type===te._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(te.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};en.parseThrowStatement=function(e){return this.next(),Td.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var GOt=[];en.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?y4e:0),this.checkLValPattern(e,t?x4e:Kg),this.expect(te.parenR),e};en.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===te._catch){var t=this.startNode();this.next(),this.eat(te.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(te._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};en.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};en.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ine),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};en.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};en.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};en.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===te._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};en.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};en.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(te.braceL),e&&this.enterScope(0);this.type!==te.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};en.parseFor=function(e,t){return e.init=t,this.expect(te.semi),e.test=this.type===te.semi?null:this.parseExpression(),this.expect(te.semi),e.update=this.type===te.parenR?null:this.parseExpression(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};en.parseForIn=function(e,t){var n=this.type===te._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};en.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(te.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===te._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(te.comma))break}return e};en.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?rne:Kg,!1)};var wk=1,HG=2,w4e=4;en.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===te.star&&t&HG&&this.unexpected(),e.generator=this.eat(te.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&wk&&(e.id=t&w4e&&this.type!==te.name?null:this.parseIdent(),e.id&&!(t&HG)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?rne:Kg:b4e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(nne(e.async,e.generator)),t&wk||(e.id=this.type===te.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&wk?"FunctionDeclaration":"FunctionExpression")};en.parseFunctionParams=function(e){this.expect(te.parenL),e.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};en.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(te.braceL);this.type!==te.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&YOt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};en.parseClassElement=function(e){if(this.eat(te.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(te.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===te.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===te.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(te.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===te.parenL||o!=="method"||i||s){var l=!n.static&&uL(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};en.isClassElementNameStart=function(){return this.type===te.name||this.type===te.privateId||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword};en.parseClassElementName=function(e){this.type===te.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};en.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&uL(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};en.parseClassField=function(e){if(uL(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&uL(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(te.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};en.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(DP|ene);this.type!==te.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};en.parseClassId=function(e,t){this.type===te.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Kg,!1)):(t===!0&&this.unexpected(),e.id=null)};en.parseClassSuper=function(e){e.superClass=this.eat(te._extends)?this.parseExprSubscripts(null,!1):null};en.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};en.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];PP(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function YOt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function uL(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}en.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};en.parseExport=function(e,t){if(this.next(),this.eat(te.star))return this.parseExportAllDeclaration(e,t);if(this.eat(te._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};en.parseExportDeclaration=function(e){return this.parseStatement(null)};en.parseExportDefaultDeclaration=function(){var e;if(this.type===te._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,wk|w4e,!1,e)}else if(this.type===te._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};en.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),PP(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};en.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};en.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};en.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};en.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};en.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(te.braceL);!this.eat(te.braceR);){if(n)n=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;t.push(this.parseExportSpecifier(e))}return t};en.parseImport=function(e){return this.next(),this.type===te.string?(e.specifiers=GOt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===te.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};en.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Kg),this.finishNode(e,"ImportSpecifier")};en.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Kg),this.finishNode(e,"ImportDefaultSpecifier")};en.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Kg),this.finishNode(e,"ImportNamespaceSpecifier")};en.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===te.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(te.comma)))return e;if(this.type===te.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(te.braceL);!this.eat(te.braceR);){if(t)t=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;e.push(this.parseImportSpecifier())}return e};en.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===te.string){var e=this.parseLiteral(this.value);return zOt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};en.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};en.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Sd=Go.prototype;Sd.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Sd.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Sd.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Sd.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==te.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Sd.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case te.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(te.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case te.braceL:return this.parseObj(!0)}return this.parseIdent()};Sd.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(te.comma),t&&this.type===te.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===te.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Sd.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Sd.parseBindingListItem=function(e){return e};Sd.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(te.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Sd.checkLValSimple=function(e,t,n){t===void 0&&(t=aL);var r=t!==aL;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Kg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(PP(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==_4e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Sd.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=aL),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Sd.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=aL),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Vd=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ts={b_stat:new Vd("{",!1),b_expr:new Vd("{",!0),b_tmpl:new Vd("${",!1),p_stat:new Vd("(",!1),p_expr:new Vd("(",!0),q_tmpl:new Vd("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Vd("function",!1),f_expr:new Vd("function",!0),f_expr_gen:new Vd("function",!0,!1,null,!0),f_gen:new Vd("function",!1,!1,null,!0)},nC=Go.prototype;nC.initialContext=function(){return[Ts.b_stat]};nC.curContext=function(){return this.context[this.context.length-1]};nC.braceIsBlock=function(e){var t=this.curContext();return t===Ts.f_expr||t===Ts.f_stat?!0:e===te.colon&&(t===Ts.b_stat||t===Ts.b_expr)?!t.isExpr:e===te._return||e===te.name&&this.exprAllowed?Td.test(this.input.slice(this.lastTokEnd,this.start)):e===te._else||e===te.semi||e===te.eof||e===te.parenR||e===te.arrow?!0:e===te.braceL?t===Ts.b_stat:e===te._var||e===te._const||e===te.name?!1:!this.exprAllowed};nC.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};nC.updateContext=function(e){var t,n=this.type;n.keyword&&e===te.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};nC.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};te.parenR.updateContext=te.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ts.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};te.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ts.b_stat:Ts.b_expr),this.exprAllowed=!0};te.dollarBraceL.updateContext=function(){this.context.push(Ts.b_tmpl),this.exprAllowed=!0};te.parenL.updateContext=function(e){var t=e===te._if||e===te._for||e===te._with||e===te._while;this.context.push(t?Ts.p_stat:Ts.p_expr),this.exprAllowed=!0};te.incDec.updateContext=function(){};te._function.updateContext=te._class.updateContext=function(e){e.beforeExpr&&e!==te._else&&!(e===te.semi&&this.curContext()!==Ts.p_stat)&&!(e===te._return&&Td.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===te.colon||e===te.braceL)&&this.curContext()===Ts.b_stat)?this.context.push(Ts.f_expr):this.context.push(Ts.f_stat),this.exprAllowed=!1};te.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};te.backQuote.updateContext=function(){this.curContext()===Ts.q_tmpl?this.context.pop():this.context.push(Ts.q_tmpl),this.exprAllowed=!1};te.star.updateContext=function(e){if(e===te._function){var t=this.context.length-1;this.context[t]===Ts.f_expr?this.context[t]=Ts.f_expr_gen:this.context[t]=Ts.f_gen}this.exprAllowed=!0};te.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==te.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Nn=Go.prototype;Nn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Nn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===te.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(te.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Nn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new B8,r=!0);var a=this.start,u=this.startLoc;(this.type===te.parenL||this.type===te.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===te.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===te.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Nn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(te.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(te.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Nn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Nn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==te._in)&&s>r){var o=this.type===te.logicalOR||this.type===te.logicalAND,a=this.type===te.coalesce;a&&(s=te.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===te.coalesce||a&&(this.type===te.logicalOR||this.type===te.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Nn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Nn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===te.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&E4e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===te.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==te._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(te.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function E4e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&E4e(e.expression)}Nn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Nn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Nn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(te.arrow)};Nn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Nn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(te.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(te.bracketL);if(l||u&&this.type!==te.parenL&&this.type!==te.backQuote||this.eat(te.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(te.bracketR)):this.type===te.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(te.parenL)){var f=new B8,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===te.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Nn.parseExprAtom=function(e,t,n){this.type===te.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case te._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===te.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==te.dot&&this.type!==te.bracketL&&this.type!==te.parenL&&this.unexpected(),this.finishNode(r,"Super");case te._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case te.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(te._function))return this.overrideContext(Ts.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(te.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===te.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(te.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case te.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case te.num:case te.string:return this.parseLiteral(this.value);case te._null:case te._true:case te._false:return r=this.startNode(),r.value=this.type===te._null?null:this.type===te._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case te.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case te.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(te.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case te.braceL:return this.overrideContext(Ts.b_expr),this.parseObj(!1,e);case te._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case te._class:return this.parseClass(this.startNode(),!1);case te._new:return this.parseNew();case te.backQuote:return this.parseTemplate();case te._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Nn.parseExprAtomDefault=function(){this.unexpected()};Nn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===te.parenL&&!e)return this.parseDynamicImport(t);if(this.type===te.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Nn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(te.parenR)){var t=this.start;this.eat(te.comma)&&this.eat(te.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Nn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Nn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Nn.parseParenExpression=function(){this.expect(te.parenL);var e=this.parseExpression();return this.expect(te.parenR),e};Nn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Nn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new B8,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==te.parenR;)if(l?l=!1:this.expect(te.comma),s&&this.afterTrailingComma(te.parenR,!0)){c=!0;break}else if(this.type===te.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(te.parenR),e&&this.shouldParseArrow(u)&&this.eat(te.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Nn.parseParenItem=function(e){return e};Nn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var KOt=[];Nn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===te.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(te.parenL)?e.arguments=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1):e.arguments=KOt,this.finishNode(e,"NewExpression")};Nn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===te.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===te.backQuote,this.finishNode(n,"TemplateElement")};Nn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===te.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(te.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(te.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Nn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===te.name||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===te.star)&&!Td.test(this.input.slice(this.lastTokEnd,this.start))};Nn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(te.braceR);){if(r)r=!1;else if(this.expect(te.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(te.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Nn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(te.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===te.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(te.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(te.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Nn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Nn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===te.colon&&this.unexpected(),this.eat(te.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===te.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==te.comma&&this.type!==te.braceR&&this.type!==te.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===te.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Nn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(te.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(te.bracketR),e.key;e.computed=!1}return e.key=this.type===te.num||this.type===te.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Nn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Nn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(nne(t,r.generator)|ene|(n?v4e:0)),this.expect(te.parenL),r.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Nn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(nne(n,!1)|g4e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Nn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==te.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,_4e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Nn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Nn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,rne,t?null:n)}};Nn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(te.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===te.comma?o=null:this.type===te.ellipsis?(o=this.parseSpread(r),r&&this.type===te.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Nn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Nn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Nn.parseIdentNode=function(){var e=this.startNode();return this.type===te.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=te.name):this.unexpected(),e};Nn.parsePrivateIdent=function(){var e=this.startNode();return this.type===te.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Nn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===te.semi||this.canInsertSemicolon()||this.type!==te.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(te.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Nn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var lL=Go.prototype;lL.raise=function(e,t){var n=p4e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};lL.raiseRecoverable=lL.raise;lL.curPosition=function(){if(this.options.locations)return new XR(this.curLine,this.pos-this.lineStart)};var Wv=Go.prototype,XOt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Wv.enterScope=function(e){this.scopeStack.push(new XOt(e))};Wv.exitScope=function(){this.scopeStack.pop()};Wv.treatFunctionsAsVarInScope=function(e){return e.flags&tC||!this.inModule&&e.flags&QR};Wv.declareName=function(e,t,n){var r=!1;if(t===Kg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&QR&&delete this.undefinedExports[e]}else if(t===x4e){var s=this.currentScope();s.lexical.push(e)}else if(t===b4e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&y4e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&QR&&delete this.undefinedExports[e],u.flags&tne)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Wv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Wv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Wv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&tne)return t}};Wv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&tne&&!(t.flags&g4e))return t}};var j8=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new F8(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},NP=Go.prototype;NP.startNode=function(){return new j8(this,this.start,this.startLoc)};NP.startNodeAt=function(e,t){return new j8(this,e,t)};function T4e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}NP.finishNode=function(e,t){return T4e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};NP.finishNodeAt=function(e,t,n,r){return T4e.call(this,e,t,n,r)};NP.copyNode=function(e){var t=new j8(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var S4e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",C4e=S4e+" Extended_Pictographic",A4e=C4e,I4e=A4e+" EBase EComp EMod EPres ExtPict",k4e=I4e,QOt=k4e,JOt={9:S4e,10:C4e,11:A4e,12:I4e,13:k4e,14:QOt},ZOt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",e4t={9:"",10:"",11:"",12:"",13:"",14:ZOt},Lye="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",R4e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",P4e=R4e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",D4e=P4e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",N4e=D4e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",O4e=N4e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",t4t=O4e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",n4t={9:R4e,10:P4e,11:D4e,12:N4e,13:O4e,14:t4t},$4e={};function r4t(e){var t=$4e[e]={binary:e1(JOt[e]+" "+Lye),binaryOfStrings:e1(e4t[e]),nonBinary:{General_Category:e1(Lye),Script:e1(n4t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Zz=0,Mye=[9,10,11,12,13,14];Zz<Mye.length;Zz+=1){var i4t=Mye[Zz];r4t(i4t)}var Wt=Go.prototype,$m=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=$4e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};$m.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};$m.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};$m.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};$m.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};$m.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};$m.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};$m.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};$m.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};$m.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Wt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Wt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Wt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Wt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Wt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Wt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Wt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Wt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Wt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Wt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Wt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Wt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Wt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Wt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Wt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Wt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Wt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return L4e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function L4e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Wt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!L4e(n);)e.advance();return e.pos!==t};Wt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Wt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Wt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Wt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=rv(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=rv(e.lastIntValue);return!0}return!1};Wt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),s4t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function s4t(e){return Cg(e,!0)||e===36||e===95}Wt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),o4t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function o4t(e){return OT(e,!0)||e===36||e===95||e===8204||e===8205}Wt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Wt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Wt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Wt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Wt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Wt.regexp_eatZero=function(e){return e.current()===48&&!U8(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Wt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Wt.regexp_eatControlLetter=function(e){var t=e.current();return M4e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function M4e(e){return e>=65&&e<=90||e>=97&&e<=122}Wt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&a4t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function a4t(e){return e>=0&&e<=1114111}Wt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Wt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var F4e=0,Ag=1,Qf=2;Wt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(u4t(t))return e.lastIntValue=-1,e.advance(),Ag;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Qf&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return F4e};function u4t(e){return e===100||e===68||e===115||e===83||e===119||e===87}Wt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Ag}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return F4e};Wt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){PP(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Wt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Ag;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Qf;e.raise("Invalid property name")};Wt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";B4e(t=e.current());)e.lastStringValue+=rv(t),e.advance();return e.lastStringValue!==""};function B4e(e){return M4e(e)||e===95}Wt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";l4t(t=e.current());)e.lastStringValue+=rv(t),e.advance();return e.lastStringValue!==""};function l4t(e){return B4e(e)||U8(e)}Wt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Wt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Qf&&e.raise("Negated character class may contain strings"),!0}return!1};Wt.regexp_classContents=function(e){return e.current()===93?Ag:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Ag)};Wt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Wt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||z4e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Wt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Wt.regexp_classSetExpression=function(e){var t=Ag,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Qf&&(t=Qf);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Qf&&(t=Ag);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Qf&&(t=Qf)}};Wt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Wt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Ag:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Wt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Qf&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Wt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Wt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Qf&&(t=Qf);return t};Wt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Ag:Qf};Wt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&c4t(n)||f4t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function c4t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function f4t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Wt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return d4t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function d4t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Wt.regexp_eatClassControlLetter=function(e){var t=e.current();return U8(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Wt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Wt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;U8(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function U8(e){return e>=48&&e<=57}Wt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;j4e(n=e.current());)e.lastIntValue=16*e.lastIntValue+U4e(n),e.advance();return e.pos!==t};function j4e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function U4e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Wt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Wt.regexp_eatOctalDigit=function(e){var t=e.current();return z4e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function z4e(e){return e>=48&&e<=55}Wt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!j4e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+U4e(i),e.advance()}return!0};var sne=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new F8(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Tr=Go.prototype;Tr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new sne(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Tr.getToken=function(){return this.next(),new sne(this)};typeof Symbol<"u"&&(Tr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===te.eof,value:t}}}});Tr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(te.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Tr.readToken=function(e){return Cg(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Tr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Tr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=f4e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Tr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!eC(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Tr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&d4e.test(String.fromCharCode(e)))++this.pos;else break e}}};Tr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Tr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(te.ellipsis)):(++this.pos,this.finishToken(te.dot))};Tr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(te.assign,2):this.finishOp(te.slash,1)};Tr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?te.star:te.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=te.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(te.assign,n+1):this.finishOp(r,n)};Tr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(te.assign,3)}return this.finishOp(e===124?te.logicalOR:te.logicalAND,2)}return t===61?this.finishOp(te.assign,2):this.finishOp(e===124?te.bitwiseOR:te.bitwiseAND,1)};Tr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(te.assign,2):this.finishOp(te.bitwiseXOR,1)};Tr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Td.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(te.incDec,2):t===61?this.finishOp(te.assign,2):this.finishOp(te.plusMin,1)};Tr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(te.assign,n+1):this.finishOp(te.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(te.relational,n))};Tr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(te.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(te.arrow)):this.finishOp(e===61?te.eq:te.prefix,1)};Tr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(te.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(te.assign,3)}return this.finishOp(te.coalesce,2)}}return this.finishOp(te.question,1)};Tr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Cg(t,!0)||t===92))return this.finishToken(te.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+rv(t)+"'")};Tr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(te.parenL);case 41:return++this.pos,this.finishToken(te.parenR);case 59:return++this.pos,this.finishToken(te.semi);case 44:return++this.pos,this.finishToken(te.comma);case 91:return++this.pos,this.finishToken(te.bracketL);case 93:return++this.pos,this.finishToken(te.bracketR);case 123:return++this.pos,this.finishToken(te.braceL);case 125:return++this.pos,this.finishToken(te.braceR);case 58:return++this.pos,this.finishToken(te.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(te.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(te.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+rv(e)+"'")};Tr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Tr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Td.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new $m(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(te.regexp,{pattern:i,flags:o,value:u})};Tr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function h4t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function V4e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Tr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=V4e(this.input.slice(t,this.pos)),++this.pos):Cg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,n)};Tr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=V4e(this.input.slice(t,this.pos));return++this.pos,Cg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Cg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=h4t(this.input.slice(t,this.pos),n);return this.finishToken(te.num,s)};Tr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Tr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(eC(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(te.string,t)};var H4e={};Tr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===H4e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Tr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw H4e;this.raise(e,t)};Tr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===te.template||this.type===te.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(te.dollarBraceL)):(++this.pos,this.finishToken(te.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(te.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(eC(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Tr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(te.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Tr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return rv(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return eC(t)?"":String.fromCharCode(t)}};Tr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Tr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(OT(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Cg:OT)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=rv(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Tr.readWord=function(){var e=this.readWord1(),t=te.name;return this.keywords.test(e)&&(t=Jte[e]),this.finishToken(t,e)};var p4t="8.11.3";Go.acorn={Parser:Go,version:p4t,defaultOptions:VG,Position:XR,SourceLocation:F8,getLineInfo:p4e,Node:j8,TokenType:Gr,tokTypes:te,keywordTypes:Jte,TokContext:Vd,tokContexts:Ts,isIdentifierChar:OT,isIdentifierStart:Cg,Token:sne,isNewLine:eC,lineBreak:Td,lineBreakG:BOt,nonASCIIwhitespace:d4e};function m4t(e,t){return Go.parse(e,t)}const one={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},g4t={ecmaVersion:11},Fye="$",y4t="d",v4t="d1",b4t="d2",Pa=e=>(t,n)=>n.error(t,e+" not allowed"),x4t=Pa("Aggregate function"),_4t=Pa("Window function"),w4t="Invalid argument",ane="Invalid column reference",E4t=ane+" (must be input to an aggregate function)",q4e="Invalid function call",T4t="Invalid member expression",S4t="Invalid operator parameter",C4t="Invalid param reference",A4t="Invalid variable reference",I4t="Variable not accessible in operator call",k4t="Unsupported variable declaration",R4t="Unsupported destructuring pattern",W4e="Table expressions do not support closures",G4e="Use aq.escape(fn) to use a function as-is (including closures)",P4t="use table.params({ name: value }) to define dynamic parameters",D4t="use aq.addFunction(name, fn) to add new op functions",N4t=`
Note: ${W4e}. ${G4e}, or ${P4t}.`,Y4e=`
Note: ${W4e}. ${G4e}, or ${D4t}.`,O4t=`The ${YDe} method is not valid in multi-table expressions.`;function $4t(e,t){const n=L4t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,kOt(r)?(F4t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=v4t),e.scope.add(e.tuple2=b4t),e.scope.add(e.$param=Fye)):(e.scope.add(e.tuple=y4t),e.scope.add(e.$param=Fye)),Ur(r,e,une),e.root}function L4t(e){try{const t=e.field?M4t(e):Zr(e)?hm(e):e;return m4t(`expr=(${t})`,g4t).body[0].expression.right}catch{Jn(`Expression parse error: ${e+""}`)}}function M4t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const une={FunctionDeclaration:Pa("Function definitions"),ForStatement:Pa("For loops"),ForOfStatement:Pa("For-of loops"),ForInStatement:Pa("For-in loops"),WhileStatement:Pa("While loops"),DoWhileStatement:Pa("Do-while loops"),AwaitExpression:Pa("Await expressions"),ArrowFunctionExpression:Pa("Function definitions"),AssignmentExpression:Pa("Assignments"),FunctionExpression:Pa("Function definitions"),NewExpression:Pa('Use of "new"'),UpdateExpression:Pa("Update expressions"),VariableDeclarator(e,t){GG(e.id,t)},Identifier(e,t,n){Q4e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,A4t,N4t)},CallExpression(e,t){const n=K4e(e.callee),r=qDe(n)||WDe(n);if(r){if((t.join||t.aggregate===!1)&&Qee(n)&&x4t(e,t),(t.join||t.window===!1)&&Jee(n)&&_4t(e,t),t.$op=1,t.ast)WG(e,n,t),e.arguments.forEach(i=>Ur(i,t,qG));else{const i=t.op(B4t(t,r,n,e.arguments));Object.assign(e,{type:jDe,name:i.id})}return t.$op=0,!1}else HDe(n)?WG(e,n,t):t.error(e,q4e,Y4e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Fo(T1,r))return;const{name:s}=r;if(X4e(e)&&Fo(T1,i)&&Nh(one,i.name)){e6e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Bye(e,o,t,J4e,n);if(s===t.$param)return Bye(e,o,t,U4t);t.paramsRef.has(s)?JR(e,t.paramsRef.get(s)):t.columnRef.has(s)?Z4e(r,s,t,e):Nh(t.params,s)&&JR(r,s)}};function Bye(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Fo(KS,s))a=s.value;else try{Ur(s,n,une,e),a=n.param(s)}catch{n.error(e,T4t)}return r(e,a,t,n,i),!1}const qG={...une,VariableDeclarator:Pa("Variable declaration in operator call"),Identifier(e,t,n){Q4e(e,t,n)&&t.error(e,I4t)},CallExpression(e,t){const n=K4e(e.callee);HDe(n)?WG(e,n,t):t.error(e,q4e,Y4e)}};function F4t(e,t){e.generator&&Pa("Generator functions")(e,t),e.async&&Pa("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(AA(t,n[0],"tuple1",i(1)),r>1&&AA(t,n[1],"tuple2",i(2)),r>2&&AA(t,n[2],"$param",s)):(AA(t,n[0],"tuple",i(0)),r>1&&AA(t,n[1],"$param",s))),t.root=e.body}function AA(e,t,n,r){Fo(T1,t)?(e.scope.add(t.name),e[n]=t.name):Fo(FDe,t)&&t.properties.forEach(i=>{const s=Fo(T1,i.key)?i.key.name:Fo(KS,i.key)?i.key.value:e.error(i,w4t);Fo(T1,i.value)||e.error(i.value,R4t),r(i.value.name,s)})}function B4t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Ur(u,e,qG),i.push(e.field(u))):l<a?(Ur(u,e,qG),s.push(e.param(u))):e.error(u,S4t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function K4e(e){return Fo(T1,e)?e.name:Fo(MDe,e)?X4e(e)?j4t(e.property.name):e.property.name:null}function X4e(e){return Fo(T1,e.object)&&e.object.name==="Math"}function j4t(e){return e==="max"?"greatest":e==="min"?"least":e}function Q4e(e,t,n){const{name:r}=e;if(!(Fo(MDe,n)&&n.property===e)){if(!(Fo(BDe,n)&&n.key===e))if(t.paramsRef.has(r))JR(e,t.paramsRef.get(r));else if(t.columnRef.has(r))Z4e(e,r,t,n);else if(Nh(t.params,r))JR(e,r);else if(Nh(one,r))e6e(e,r);else return!0}}function J4e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,ane),r.aggronly&&!r.$op&&r.error(e,E4t),GDe(e,t,n,o,i)}function Z4e(e,t,n,r){const[i,s]=n.columnRef.get(t);J4e(e,i,s,n,r)}function U4t(e,t,n,r){r.params&&!Nh(r.params,t)&&r.error(e,C4t),JR(e,t)}function JR(e,t){e.type=R3t,e.name=t}function e6e(e,t){e.type=A3t,e.name=t,e.raw=one[t]}function WG(e,t,n){if(t===YDe){const r=n.table;r||n.error(e,O4t),KDe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=yl(s)?r.columnName(s):s;return r.column(o)||n.error(i,ane),o}):r.columnNames())}else e.callee={type:k3t,name:t}}function GG(e,t){Fo(T1,e)?t.scope.add(e.name):Fo(E3t,e)?e.elements.forEach(n=>GG(n,t)):Fo(FDe,e)?e.properties.forEach(n=>GG(n.value,t)):t.error(e.id,k4t)}const z4t={[SP]:1,[jDe]:1};function vc(e,t={}){const n=t.generate||U5,r=t.compiler||Zee,i=H4t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=V4t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Fo(KS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?IOt(g):f(n(g),i));u.push(y),z4t[g.type]&&y!==g&&Ru(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,_=String(d.spec).slice(v,b);Jn(`${g}: "${_}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of T8(e))d.value(m+"",g.escape?DOt(d,g,i):$4t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function V4t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function H4t(e){return(e.table?eV(e.table):e.join?{...eV(e.join[1]),...eV(e.join[0])}:{})||{}}function eV(e){return e&&ds(e.params)?e.params():{}}const t6e="Expr",Hd="ExprList",n6e="ExprNumber",CI="ExprObject",ZE="JoinKeys",cL="JoinValues",Uf="Options",lne="OrderKeys",Sy="SelectionList",ex="TableRef",e2="TableRefList",q4t="Descending",W4t="Query",G4t="Selection",Y4t="Verb",K4t="Window";function z8(e,t){return e&&e.expr?new jye({...e,...t}):new jye(t,e)}class jye{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...ds(this.expr)?{func:!0}:{}}}}function X4t(e){return z8(e,{desc:!0})}function u_(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return z8(e,t?{expr:t,...r}:r)}function Q4t(e,t,n){return z8(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function J4t(e){const t=n=>n;return t.toString=()=>e,t}function Uye(e,t){return t=t&&ds(t.query)?t.query():t,t&&ds(t.evaluate)?t.evaluate(null,e):e(t)}function r6e(e){return Ru(e)&&(Zr(e.all)||Zr(e.matches)||Zr(e.not)||Zr(e.range))}function ZR(e){return e&&ds(e.toObject)?e.toObject():ds(e)?{expr:String(e),func:!0}:Zr(e)?e.map(ZR):Ru(e)?L8(e,t=>ZR(t)):e}function cne(e){return Zr(e)?e.map(cne):Ru(e)?Zr(e.verbs)?dne.from(e):Zr(e.all)?NT():Zr(e.range)?EOt(...e.range):Zr(e.match)?TOt(RegExp(...e.match)):Zr(e.not)?a4e(e.not.map(ZR)):Z4t(e):e}function Z4t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=u_(n):e.func===!0&&(t=n=J4t(n)),Ru(e.window)){const{frame:r,peers:i}=e.window;t=n=Q4t(n,r,i)}e.desc===!0&&(t=X4t(n))}return e===t?L8(e,r=>cne(r)):t}function e6t(e){return Zr(e)?e.map(t6t):e}function t6t(e){const t=[];return mc(e).forEach(n=>{yl(n)?t.push(n):Ga(n)?t.push(u_(n,null)):Ru(n)&&n.expr||ds(n)?t.push(n):Jn(`Invalid key value: ${n+""}`)}),t}function n6t(e){return Zr(e)?e.map(r6t):e}function r6t(e,t){return t<2?mc(e):e}function i6t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Ru(r)&&!ds(r))for(const i in r)t.push(r[i]);else n=yl(r)?r:Ga(r)?u_(n):ds(r)?n:Jn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const s6t={[t6e]:a6e,[Hd]:$T,[n6e]:f6t,[CI]:iv,[ZE]:d6t,[cL]:h6t,[lne]:$T,[Sy]:l6t};function o6t(e,t,n){return t===ex?zye(e):t===e2?e.map(zye):i6e(ZR(e),t,n)}function i6e(e,t,n){return t===Uf?e&&a6t(e,n):s6t[t](e)}function a6t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?i6e(i,t[r]):i}return n}function u6t(e,t){return vc({expr:e},{...t,ast:!0}).exprs[0]}function fne(e){return{type:SP,name:e}}function s6e(e){return{type:SP,index:e}}function iv(e,t){if(Ga(e))return u6t(e,t);if(e.expr){let n;if(e.field===!0?n=fne(e.expr):e.func===!0&&(n=iv(e.expr,t)),n)return e.desc&&(n={type:q4t,expr:n}),e.window&&(n={type:K4t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...iv(e[n],t),as:n}))}function o6e(e){const t=G4t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:$T(e.not)}:e.range?{type:t,operator:"range",arguments:$T(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Jn("Invalid input")}function l6t(e){return mc(e).map(c6t).flat()}function c6t(e){return r6e(e)?o6e(e):yl(e)?s6e(e):Ga(e)?fne(e):Ru(e)?Object.keys(e).map(t=>({type:SP,name:t,as:e[t]})):Jn("Invalid input")}function a6e(e){return r6e(e)?o6e(e):yl(e)?s6e(e):Ga(e)?fne(e):Ru(e)?iv(e):Jn("Invalid input")}function $T(e){return mc(e).map(a6e).flat()}function f6t(e){return yl(e)?e:iv(e)}function d6t(e){return Zr(e)?e.map($T):iv(e,{join:!0})}function h6t(e){return Zr(e)?e.map((t,n)=>n<2?$T(t):iv(t,{join:!0})):iv(e,{join:!0})}function zye(e){return e&&ds(e.toAST)?e.toAST():e}class u6e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===ZE?e6t(a):o===cL?n6t(a):o===lne?i6t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=YG[t.verb],r=(n.schema||[]).map(({name:i})=>cne(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===ex?Uye(n,o):s===e2?o.map(a=>Uye(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=ZR(this[n])}),t}toAST(){const t={type:Y4t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=o6t(this[n],r,i)}),t}}function Ni(e,t){return Object.assign((...n)=>new u6e(e,t,n),{schema:t})}const YG={count:Ni("count",[{name:"options",type:Uf}]),derive:Ni("derive",[{name:"values",type:CI},{name:"options",type:Uf,props:{before:Sy,after:Sy}}]),filter:Ni("filter",[{name:"criteria",type:CI}]),groupby:Ni("groupby",[{name:"keys",type:Hd}]),orderby:Ni("orderby",[{name:"keys",type:lne}]),relocate:Ni("relocate",[{name:"columns",type:Sy},{name:"options",type:Uf,props:{before:Sy,after:Sy}}]),rename:Ni("rename",[{name:"columns",type:Sy}]),rollup:Ni("rollup",[{name:"values",type:CI}]),sample:Ni("sample",[{name:"size",type:n6e},{name:"options",type:Uf,props:{weight:t6e}}]),select:Ni("select",[{name:"columns",type:Sy}]),ungroup:Ni("ungroup"),unorder:Ni("unorder"),reify:Ni("reify"),dedupe:Ni("dedupe",[{name:"keys",type:Hd,default:[]}]),impute:Ni("impute",[{name:"values",type:CI},{name:"options",type:Uf,props:{expand:Hd}}]),fold:Ni("fold",[{name:"values",type:Hd},{name:"options",type:Uf}]),pivot:Ni("pivot",[{name:"keys",type:Hd},{name:"values",type:Hd},{name:"options",type:Uf}]),spread:Ni("spread",[{name:"values",type:Hd},{name:"options",type:Uf}]),unroll:Ni("unroll",[{name:"values",type:Hd},{name:"options",type:Uf,props:{drop:Hd}}]),lookup:Ni("lookup",[{name:"table",type:ex},{name:"on",type:ZE},{name:"values",type:Hd}]),join:Ni("join",[{name:"table",type:ex},{name:"on",type:ZE},{name:"values",type:cL},{name:"options",type:Uf}]),cross:Ni("cross",[{name:"table",type:ex},{name:"values",type:cL},{name:"options",type:Uf}]),semijoin:Ni("semijoin",[{name:"table",type:ex},{name:"on",type:ZE}]),antijoin:Ni("antijoin",[{name:"table",type:ex},{name:"on",type:ZE}]),concat:Ni("concat",[{name:"tables",type:e2}]),union:Ni("union",[{name:"tables",type:e2}]),intersect:Ni("intersect",[{name:"tables",type:e2}]),except:Ni("except",[{name:"tables",type:e2}])};let dne=class l6e extends TDe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new l6e(t.map(u6e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Vye(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Vye(this,"toAST",{type:W4t})}};function Vye(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function p6t(e,t){return new dne(e._verbs.concat(t),e._params,e._table)}for(const e in YG){const t=YG[e];dne.prototype["__"+e]=function(n,...r){return p6t(n,t(...r))}}function rC(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function m6t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function hne(e,t){const n=Tf();return t.forEach((r,i)=>{const s=Ga(r)?r:i;if(s){const o=e.column(i)||Jn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function c6e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Jn("relocate requires a before or after option."),i&&s&&Jn("relocate accepts only one of the before or after options."),t=Sg(e,t);const o=[...Sg(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),hne(e,u)}function OP(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function pne(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g6t(e,t=0,n=e.length){let r=n?e[t++]:Yr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function y6t(e,t=0,n=e.length){let r=n?e[t++]:Yr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function IO(e){return VR(e)?e:+e}function v6t(e,t){const n=e.length;if(!n)return Yr;if((t=+t)<=0||n<2)return IO(e[0]);if(t>=1)return IO(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=IO(e[i]);return VR(s)?s:s+(IO(e[i+1])-s)*(r-i)}class b6t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:g6t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:y6t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(pne)),v6t(this._sorted,t)}}const fL=(e,t,n)=>rC(t,"{"+OP(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function x6t(e,t){const{ops:n,output:r}=_6t(e,t),i=e[0].fields,s=i.length,o=s===0?mne:s===1?w6t:s===2?E6t:Jn("Unsupported field count: "+s);return new o(i,n,r,t)}function _6t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=qDe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class mne extends COt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new b6t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class w6t extends mne{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=fL(n,s,"add"),this._rem=fL(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,mh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,mh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class E6t extends mne{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=fL(n,s,"add"),this._rem=fL(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,mh(i)&&mh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,mh(i)&&mh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function rw(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=iC(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function iC(e,t,n){if(!t.length)return n;const r=f6e(t),i=e.groups(),s=i?i.size:1;return n=n||w8(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=h6e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=d6e(e,o);o.write(a,n,0)}),n}function f6e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(x6t(r[i],t));return n}function d6e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function h6e(e,t,n){const{keys:r,size:i}=n,s=w8(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function p6e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function m6e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Hye=m6e(pne);function T6t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?rC(["w","r","k"],"{"+OP(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i.map(b=>b.init());for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,_=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Hye.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Hye.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],C=a[E];for(let A=b;A<p.i0;++A)S.rem(C,s[A],e);for(let A=_;A<p.i1;++A)S.add(C,s[A],e);S.write(C,u,l)}return h(p,u,l),u}};return p}const S6t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),C6t=e=>!!e.peers;function A6t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=WDe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function I6t(e,t,n,r={},i){const s=e.data(),o=k6t(i,s),a=o.length,u=rC(["r","d","op"],"{"+OP(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=R6t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function k6t(e,t){const n={};return e.forEach(r=>{const i=S6t(r),s=C6t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Qee(r.name)?a.push(r):u.push(A6t(r))}),Object.values(n).map(r=>T6t(t,r.frame,r.peers,r.winOps,f6e(r.aggOps,r.frame[0]!=null?-1:1)))}function R6t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function P6t(e){return Jee(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function gne(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Tf(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=D6t(r),c=e.isGrouped()?e.groups().size:1,f=iC(e,u,w8(r.length,()=>Array(c)));return l.length?I6t(e,a,n,f,l):N6t(e,a,n,f),e.create(o)}function D6t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(P6t(s)?n:t).push(s)}return[t,n]}function N6t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function O6t(e,t,n={}){const r=gne(e,vc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:c6e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function $6t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const kO=2147483648,L6t=4294967295;class g6e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&kO>>>t}set(t){this._bits[t>>5]|=kO>>>t}clear(t){this._bits[t>>5]&=~(kO>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&L6t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=kO>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function M6t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new g6e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function F6t(e,t){const n=vc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=gne(e,n,{drop:!0}).column("p");r=s=>i[s]}return M6t(e,r)}function y6e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=rw(e,r,n),l=Tf(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(_=>{if(!a.has(_)){const E=l.add(_,[]);c.has(_)||(f.push(e.column(_)),d.push(E))}}),t.forEach(_=>{a.has(_)||(l.has(_)||l.add(_,[]),h.push(l.data[_]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(_,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(_),m,m+E)},b=p?(_,E)=>{for(let S=0;S<E;++S)p[_+S]=S}:()=>{};if(y===1){const _=u[0],E=h[0];e.scan((S,C)=>{const A=mc(_(S,C)),R=Math.min(A.length,s);v(S,R);for(let k=0;k<R;++k)E[m+k]=A[k];b(m,R),m+=R})}else e.scan((_,E)=>{let S=0;const C=u.map(A=>{const R=mc(A(_,E));return S=Math.min(Math.max(S,R.length),s),R});v(_,S);for(let A=0;A<y;++A){const R=h[A],k=C[A];for(let N=0;N<S;++N)R[m+N]=k[N]}b(m,S),m+=S});return e.create(l.new())}function B6t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=rw(e,r,n);return y6e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function $h(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=yl(o)?t.columnName(o):o,Ga(o)?i.set(o,u_(o)):ds(o)?Sg(t,o).forEach(s):Ru(o)?s4e(i,o):Jn(`Invalid ${e} value: ${o+""}`)};return mc(n).forEach(s),r.preparse&&r.preparse(i),vc(i,{table:t,...r})}function j6t(e,t,n){return B6t(e,$h("fold",e,t),n)}function qye(e,t,n,r){const i=n&&n.length;return U6t(i?z6t(e,n,r):e,t,i)}function U6t(e,{names:t,exprs:n,ops:r},i){const s=rw(e,r,n),o=i?null:Tf(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=mh(p)?p:d(h)})}),i?e:e.create(o)}function z6t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=z5(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Tf(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=z5(o.map((p,m)=>g=>g[m])),h=rC("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Wye(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Wye(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Wye(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function yne(e,{names:t,exprs:n,ops:r}){const i=Tf(),s=e.groups();return s&&p6e(i,s),V6t(t,n,s,iC(e,r),i),e.create(i.new())}function V6t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function H6t(e,t,n={}){if(t=vc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Jn(`Invalid impute column ${hm(r)}`)),n.expand){const r={preparse:q6t,aggronly:!0},i=$h("impute",e,n.expand,r),s=yne(e.ungroup(),i);return qye(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return qye(e,t)}function q6t(e){e.forEach((t,n)=>t.field?e.set(n,NDe(t+"")):0)}function W6t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function v6e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function G6t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function Y6t(e,t){const n=["i","a","j","b"];return rC(n,"{"+OP(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function K6t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Tf(),g=Array(p),y=Array(p);for(let _=0;_<r.length;++_)g[_]=m.add(r[_],[]),y[_]=i[_];const v=Y6t(g,y);if((Zr(n)?Q6t:X6t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let _=0;_<u;++_)l[_]||v(a[_],o,-1,c);if(s.right)for(let _=0;_<d;++_)h[_]||v(-1,o,f[_],c);return e.create(m.new())}function X6t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function Q6t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,C,A,R)=>e(A,R,S,C));const _=G6t(v,m,g),E=p.length;for(let S=0;S<E;++S){const C=p[S],A=_.get(d(C,f));if(A){const R=A.length;for(let k=0;k<R;++k){const N=A[k];b(C,f,v[N],m),y[N]=1}h[S]=1}}}function dL(e,t,n){const r=new Map;mc(n).forEach((s,o)=>{s=yl(s)?t.columnName(s):s,Ga(s)?r.set(o,u_(s)):ds(s)||Ru(s)&&s.expr?r.set(o,s):Jn(`Invalid ${e} key value: ${s+""}`)});const i=vc(r,{table:t,aggregate:!1,window:!1});return z5(i.exprs,!0)}function J6t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function vne(e,t,n){if(n)Ga(n)?n=[n,n]:Zr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=J6t(e.columnNames(),t.columnNames());r.length||Jn("Natural join requires shared column names."),n=[r,r]}return n}function b6e(e,t,n,r){return n.length!==r.length&&Jn("Mismatched number of join keys"),[dL("join",e,n),dL("join",t,r)]}const Z6t={aggregate:!1,window:!1},e$t={...Z6t,index:1};function Gye(e,t,n,r,i={}){n=vne(e,t,n);const s={join:[e,t]};let o;if(Zr(n)){const[a,u]=n.map(mc);o=b6e(e,t,a,u),r||(r=t$t(e,a,u,i))}else o=vc({on:n},s).exprs[0],r||(r=[NT(),NT()]);return K6t(e,t,o,n$t(e,t,r,s,i&&i.suffix),i)}function t$t(e,t,n,r){const i=[];t.forEach((o,a)=>Ga(o)&&o===n[a]?i.push(o):0);const s=a4e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${hm(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,NT()]:[NT(),s]}function n$t(e,t,n,r,i=[]){if(Zr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=$h("join",e,n[0],r)),u--&&(o=$h("join",t,n[1],e$t)),u--&&(a=vc(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Yye(s.names,l,i[0]||"_1"),i[1]!==""&&Yye(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return vc(n,r)}function Yye(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function r$t(e,t,n,r={}){const i=new g6e(e.totalRows());return(Zr(n)?i$t:s$t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function i$t(e,t,n,[r,i]){const s=v6e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function s$t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Kye(e,t,n,r){n=vne(e,t,n);const i=Zr(n)?b6e(e,t,...n.map(mc)):vc({on:n},{join:[e,t]}).exprs[0];return r$t(e,t,i,r)}function o$t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Tf(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Yr)));const l=v6e(t,r),c=rC(["lr","rr","data"],"{"+OP(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),rw(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function a$t(e,t,n,r){return n=vne(e,t,n),o$t(e,t,[dL("lookup",e,n[0]),dL("lookup",t,n[1])],$h("lookup",t,r))}const KG=(e,t)=>e??t;function u$t(e,t,n,r={}){const{keys:i,keyColumn:s}=l$t(e,t,r),o=KG(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>iC(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(c$t(n,a,e.groups(),u))}function l$t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=KG(n.sort,!0),s=KG(n.keySeparator,"_"),o=rw(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=iC(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function c$t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Tf(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&p6e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function f$t(e,t,n,r){return u$t(e,$h("fold",e,t),$h("fold",e,n,{preparse:d$t,aggronly:!0}),r)}function d$t(e){e.forEach((t,n)=>t.field?e.set(n,RDe(t+"")):0)}function h$t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),hne(e,Sg(e,t,n))}function Xye(e,t){return yne(e,vc(t,{table:e,aggronly:!0,window:!1}))}function p$t(e,t,n,r){return(t?r?g$t:m$t:r?v$t:y$t)(e.length,e,n,r)}function m$t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*YS()|0];return t}function g$t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=m6e(pne).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*YS())];return t}function y$t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*YS();s<e&&(t[s|0]=n[i])}return t}function v$t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(YS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function b$t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=YS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function x$t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):p$t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&b$t(u),e.reify(u)}function _$t(e,t,n={}){return x$t(e,w$t(e,t),E$t(e,n.weight),n)}const x6e=e=>t=>e.get(t)||0;function w$t(e,t){return yl(t)?()=>t:x6e(yne(e,vc({size:t},{table:e,window:!1})).column("size"))}function E$t(e,t){return t==null?null:(t=yl(t)?e.columnName(t):t,x6e(Ga(t)?e.column(t):gne(e,vc({w:t},{table:e}),{drop:!0}).column("w")))}function T$t(e,t){return hne(e,Sg(e,t))}function S$t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=rw(e,r,n),l=Tf(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=C$t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function C$t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=mc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Yr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function A$t(e,t,n){return S$t(e,$h("spread",e,t),n)}function I$t(e,t){return e.concat(t).dedupe()}function k$t(e,t,n){return y6e(e,$h("unroll",e,t),n&&n.drop?{...n,drop:$h("unroll",e,n.drop).names}:n)}function R$t(e,t){return e.create({groups:P$t(e,t)})}function P$t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=rw(e,r,n);const o=z5(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function D$t(e,t){return R$t(e,$h("groupby",e,t))}function N$t(e,t){return e.create({order:t})}const O$t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function $$t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=vc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([U5(p,{index:"a",op:o}),U5(p,{index:"b",op:a})])},window:!1}),l=iC(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=O$t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function L$t(e,t){return N$t(e,M$t(e,t))}function M$t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Ru(o)&&!ds(o))for(const a in o)i(o[a]);else i(yl(o)?u_(s,e.columnName(o)):Ga(o)?u_(s):ds(o)?s:Jn(`Invalid orderby field: ${s+""}`))}),$$t(e,r)}function F$t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Tf();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Yr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function B$t(e,t){const n=Tf(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?h6e(e,t,r):[d6e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function j$t(e){return e.isGrouped()?e.create({groups:null}):e}function U$t(e){return e.isOrdered()?e.create({order:null}):e}const z$t={__antijoin:(e,t,n)=>Kye(e,t,n,{anti:!0}),__count:(e,t={})=>Xye(e,{[t.as||"count"]:PDe()}),__cross:(e,t,n,r)=>Gye(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:F$t,__dedupe:m6t,__derive:O6t,__except:$6t,__filter:F6t,__fold:j6t,__impute:H6t,__intersect:W6t,__join:Gye,__lookup:a$t,__pivot:f$t,__relocate:c6e,__rename:h$t,__rollup:Xye,__sample:_$t,__select:T$t,__semijoin:Kye,__spread:A$t,__union:I$t,__unroll:k$t,__groupby:D$t,__orderby:L$t,__ungroup:j$t,__unorder:U$t,__reduce:B$t};Object.assign(R0.prototype,z$t);function _6e(e,t){return R0.from(e,t)}function D2(e){return z8(e,{escape:!0,toString(){Jn("Escaped values can not be serialized.")}})}R0.prototype;var V$t="Expected a function",Qye=NaN,H$t="[object Symbol]",q$t=/^\s+|\s+$/g,W$t=/^[-+]0x[0-9a-f]+$/i,G$t=/^0b[01]+$/i,Y$t=/^0o[0-7]+$/i,K$t=parseInt,X$t=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,Q$t=typeof self=="object"&&self&&self.Object===Object&&self,J$t=X$t||Q$t||Function("return this")(),Z$t=Object.prototype,e5t=Z$t.toString,t5t=Math.max,n5t=Math.min,tV=function(){return J$t.Date.now()};function r5t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(V$t);t=Jye(t)||0,XG(n)&&(c=!!n.leading,f="maxWait"in n,s=f?t5t(Jye(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var C=r,A=i;return r=i=void 0,l=S,o=e.apply(A,C),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var C=S-u,A=S-l,R=t-C;return f?n5t(R,s-A):R}function g(S){var C=S-u,A=S-l;return u===void 0||C>=t||C<0||f&&A>=s}function y(){var S=tV();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function _(){return a===void 0?o:v(tV())}function E(){var S=tV(),C=g(S);if(r=arguments,i=this,u=S,C){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=_,E}function XG(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function i5t(e){return!!e&&typeof e=="object"}function s5t(e){return typeof e=="symbol"||i5t(e)&&e5t.call(e)==H$t}function Jye(e){if(typeof e=="number")return e;if(s5t(e))return Qye;if(XG(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=XG(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(q$t,"");var n=G$t.test(e);return n||Y$t.test(e)?K$t(e.slice(2),n?2:8):W$t.test(e)?Qye:+e}var o5t=r5t;const Yd=zh(o5t);function w6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>Bv(".2s"),[]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(Wo,{children:w.jsx(bi,{gap:3,children:w.jsx(ze,{size:"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>w.jsxs("g",{transform:`translate(${n}, ${a})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),w.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const a5t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:w6e},Symbol.toStringTag,{value:"Module"})),nV=15;function E6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=xr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<nV&&Math.abs(t(g[r.y])-p[1])<nV);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),w.jsx("circle",{style:{cursor:l?"pointer":"default"},r:nV,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const u5t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:E6e},Symbol.toStringTag,{value:"Module"})),ms={top:15,left:100,right:15,bottom:70};function QG({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=tf(),[c]=tf(),[f]=tf(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-ms.left-ms.right,[l]),m=P.useMemo(()=>u-ms.top-ms.bottom,[u]),g=P.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return Uv(d8).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:_}=P.useMemo(()=>{const k=s.map(H=>+H[i.x]).filter(H=>H!==null),[N,L]=CR(k),O=s.map(H=>+H[i.y]).filter(H=>H!==null),[B,q]=CR(O);return{xMin:N,xMax:L,yMin:B,yMax:q}},[s,i.x,i.y]),E=P.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?Eee([ms.left,p+ms.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):va([ms.left,p+ms.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),S=P.useMemo(()=>{const k=_-v;return m<=0?null:va([m+ms.top,ms.top]).domain([v-k/10,_+k/10]).nice()},[m,_,v]),C=P.useMemo(()=>{if(!E||!S)return()=>null;if(r==="Axis Selection"){const k=s3e().extent([[ms.left,ms.top+m-5],[ms.left+p,ms.top+m+5]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[L.selection[0],null],[L.selection[1],null]],E,S,L.mode)}),N=o3e().extent([[ms.left-5,ms.top],[ms.left+5,ms.top+m]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[null,L.selection[0]],[null,L.selection[1]]],E,S,L.mode)});return c.current&&f.current&&(xr(f.current).call(N),xr(c.current).call(k),t.hasBrush||(xr(f.current).call(N.move,[S(_),S(v)]),xr(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(_)],[E(new Date("2015-12-31")),S(v)]],E,S,"drag"))),()=>{xr(f.current).call(N.move,[S(_),S(v)]),xr(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(_)],[E(new Date("2015-12-31")),S(v)]],E,S,"clear")}}if(r==="Rectangular Selection"){const k=a3e().extent([[ms.left,ms.top],[ms.left+p,ms.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,S,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(xr(a.current).call(k.move,null),e(null))});return xr(a.current).call(k),()=>{xr(a.current).call(k.move,null),n([[null,null],[null,null]],E,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),S(_)],[E(b),S(v)]],E,S,null),()=>n([[E(y),S(_)],[E(b),S(v)]],E,S,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),S(_)],[E(b),S(v)]],E,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,_,v,S]),A=P.useMemo(()=>o.length===0?null:new Set(o),[o]),R=P.useMemo(()=>!E||!S?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const L=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return w.jsx("circle",{opacity:A&&!A.has(k[i.ids])?.3:1,r:3,fill:A&&!A.has(k[i.ids])?"lightgray":g(k[i.category]),cx:L,cy:S(k[i.y])},N)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,S]);return P.useEffect(()=>{r==="Axis Selection"&&SRe(".handle").style("fill","darkgrey")},[t,r]),w.jsxs(qi,{children:[w.jsxs(bi,{children:[w.jsx(on,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?w.jsx(SF,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),w.jsxs(bi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[w.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&S?w.jsxs("g",{children:[w.jsx(w6e,{yScale:S,label:i.y,horizontalPosition:ms.left,xRange:E.range()}),w.jsx(Yee,{xScale:E,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+ms.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,R,w.jsx("g",{id:"brushXRef",ref:c}),w.jsx("g",{id:"brushYRef",ref:f}),E&&S&&r==="Paintbrush Selection"?w.jsx(E6e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:S}):null]}),r==="Slider Selection"&&E&&S?w.jsxs(qi,{style:{flexGrow:1},gap:50,children:[w.jsxs(qi,{gap:0,children:[w.jsx(ze,{children:i.x}),w.jsx(aT,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,S,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),w.jsxs(qi,{gap:0,children:[w.jsx(ze,{children:i.y}),w.jsx(aT,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:k=>{n([[t.x1,S(k[1])],[t.x2,S(k[0])]],E,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(k=>({value:k,label:k})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const l5t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:QG,default:QG},Symbol.toStringTag,{value:"Module"}));function Zye({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=P.useState(null),[s,o]=P.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});P.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=P.useState(null);P.useEffect(()=>{f3e(`./data/${e.dataset}.csv`).then(y=>{u(y)})},[e]);const l=P.useMemo(()=>a?_6e(a):null,[a]),{actions:c,trrack:f}=P.useMemo(()=>{const y=nw.create(),v=y.register("brush",(C,A)=>(C.all={brush:A},C)),b=y.register("brushMove",(C,A)=>(C.all={brush:A},C)),_=y.register("brushResize",(C,A)=>(C.all={brush:A},C)),E=y.register("brushClear",(C,A)=>(C.all={brush:A},C)),S=EP({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:v,brushMove:b,brushResize:_,clearBrush:E},trrack:S}},[]),d=P.useCallback((y,v)=>{y==="drag"?f.apply("Move Brush",c.brushMove(v)):y==="handle"&&f.apply("Brush",c.brush(v))},[c,f]),h=P.useMemo(()=>Yd(d,100,{maxWait:100}),[d]),p=P.useCallback((y,v,b,_,E)=>{if(!v||!b)return;const S=v.invert(y[0][0]||s.x1),C=v.invert(y[1][0]||s.x2),A=b.invert(y[1][1]||s.y2),R=b.invert(y[0][1]||s.y1);let k=null;if(_==="clear")k=l;else if(E){const L=new Set(E);k=l.filter(D2(O=>L.has(O[e.ids])))}else e.brushType==="Axis Selection"?k=l.filter(D2(L=>new Date(L[e.x])>=new Date(S)&&new Date(L[e.x])<=new Date(C)&&L[e.y]>=A&&L[e.y]<=R)):k=l.filter(D2(L=>L[e.x]>=S&&L[e.x]<=C&&L[e.y]>=A&&L[e.y]<=R));const N={x1:y[0][0]||(s==null?void 0:s.x1)||0,x2:y[1][0]||(s==null?void 0:s.x2)||0,y1:y[0][1]||(s==null?void 0:s.y1)||0,y2:y[1][1]||(s==null?void 0:s.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?k==null?void 0:k.array("id"):[]};o(N),_==="drag"||_==="handle"?h(_,N):_==="clear"&&f.apply("Clear Brush",c.clearBrush(N)),i(k),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=P.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=P.useCallback(y=>{i(y)},[]);return a?w.jsxs(qi,{gap:"xs",children:[w.jsx(QG,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),w.jsx(CG,{data:a,parameters:e,barsTable:m})]}):w.jsx(Tc,{})}const c5t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Zye,default:Zye},Symbol.toStringTag,{value:"Module"})),f5t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function T6e({data:e,xScale:t,yScale:n,height:r}){return w.jsx("g",{children:e.map((i,s)=>w.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const d5t=Object.freeze(Object.defineProperty({__proto__:null,Bars:T6e},Symbol.toStringTag,{value:"Module"}));function bne({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=va().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return w.jsxs("g",{children:[w.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>w.jsxs("g",{transform:`translate(0,${a})`,children:[w.jsx("line",{x2:`${r}`,stroke:"currentColor"}),w.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const h5t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:bne},Symbol.toStringTag,{value:"Module"}));function S6e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=VS().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return w.jsxs("g",{children:[w.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>w.jsx("g",{transform:`translate(${a}, 10)`,children:w.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const p5t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:S6e},Symbol.toStringTag,{value:"Module"})),m5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function g5t({parameters:e}){const[n,r]=GS(m5t),i=VS().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=va().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return w.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:w.jsx("svg",{width:r.width,height:r.height,children:w.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[w.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:w.jsx(S6e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),w.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:w.jsx(bne,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),w.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:w.jsx(T6e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const y5t=Object.freeze(Object.defineProperty({__proto__:null,default:g5t},Symbol.toStringTag,{value:"Module"}));function C6e({data:e}){return w.jsx("g",{children:e.map(({bubble:t},n)=>w.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const v5t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:C6e},Symbol.toStringTag,{value:"Module"}));function xne({positions:e}){return w.jsx("g",{children:e.map((t,n)=>w.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const b5t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:xne},Symbol.toStringTag,{value:"Module"})),x5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},_5t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=lPe().size([t-10,n-10]).padding(1.5),o=r8(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},w5t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function E5t({parameters:e}){const[t,n]=GS(x5t),r=_5t(e,n.width,n.height),i=w5t(r,e.selectedIndices);return w.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:w.jsx("svg",{width:n.width,height:n.height,children:w.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[w.jsx(C6e,{data:r}),w.jsx(xne,{positions:i})]})})})}const T5t=Object.freeze(Object.defineProperty({__proto__:null,default:E5t},Symbol.toStringTag,{value:"Module"}));function A6e({arcs:e}){return w.jsx("g",{children:e.map((t,n)=>w.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const S5t=Object.freeze(Object.defineProperty({__proto__:null,Slices:A6e},Symbol.toStringTag,{value:"Module"}));function I6e({positions:e}){return w.jsx("g",{children:e.map((t,n)=>w.jsx("g",{transform:`translate(${t.centroid()})`,children:w.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const C5t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:I6e},Symbol.toStringTag,{value:"Module"})),A5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},I5t=wIt().value(e=>e.value),IA=150;function k5t({parameters:e}){const[t,n]=GS(A5t),r=I5t(e.data),i=r.map(o=>aG().innerRadius(0).outerRadius(IA).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>aG().outerRadius(IA+10).innerRadius(IA+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return w.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:w.jsx("svg",{width:n.width,height:n.height,children:w.jsxs("g",{transform:`translate(${[n.marginLeft+IA,n.marginTop+IA].join(",")})`,children:[w.jsx(A6e,{arcs:i}),w.jsx(I6e,{positions:s})]})})})}const R5t=Object.freeze(Object.defineProperty({__proto__:null,default:k5t},Symbol.toStringTag,{value:"Module"}));function k6e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=va().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return w.jsxs("g",{children:[w.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>w.jsxs("g",{transform:`translate(${a}, 0)`,children:[w.jsx("line",{y2:`${r}`,stroke:"currentColor"}),w.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const P5t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:k6e},Symbol.toStringTag,{value:"Module"}));function R6e({data:e,barWidth:t,yScale:n}){return w.jsx("g",{children:e.map((r,i)=>w.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const D5t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:R6e},Symbol.toStringTag,{value:"Module"})),N5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function O5t({parameters:e}){const[n,r]=GS(N5t),i=VS().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=va().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,_)=>Number(b)+Number(_))/100,y={};p.forEach((b,_)=>{y[String.fromCharCode(_+65)]=b/g});const v=[y];return HIt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return w.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:w.jsx("svg",{width:r.width,height:r.height,children:w.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[w.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:w.jsx(k6e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),w.jsx("g",{transform:"translate(0, 0)",children:w.jsx(bne,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),w.jsxs("g",{transform:"translate(0, 0)",children:[w.jsx(R6e,{data:c,barWidth:f,yScale:s}),w.jsx(xne,{positions:d})]})]})})})}const $5t=Object.freeze(Object.defineProperty({__proto__:null,default:O5t},Symbol.toStringTag,{value:"Module"}));function e1e({rankings:e}){return w.jsx("div",{style:{fontFamily:"sans-serif"},children:w.jsx("div",{children:e.map((t,n)=>w.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function L5t({parameters:e,setAnswer:t}){const n=Ed(),[r,i]=P.useState(""),{goToNextStep:s,isNextDisabled:o}=Gke(),a=P.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=P.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=P.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=P.useCallback(()=>{o||s()},[o,s]);P.useEffect(()=>{const h=Oet([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),w.jsxs("div",{children:[w.jsxs(Yc,{children:[w.jsxs(Yc.Col,{span:2,children:[w.jsx(e1e,{rankings:a==="r1"?e.data.r1:e.data.r2}),w.jsx(on,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?w.jsx(Che,{}):"Select this ranking"}),l&&r&&w.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),w.jsxs(Yc.Col,{span:2,children:[w.jsx(e1e,{rankings:a==="r1"?e.data.r2:e.data.r1}),w.jsx(on,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?w.jsx(Che,{}):"Select this ranking"}),l&&r&&w.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&w.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const M5t=Object.freeze(Object.defineProperty({__proto__:null,default:L5t},Symbol.toStringTag,{value:"Module"})),F5t=P.createContext(null);function vu(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let $P=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const RO={decode:function(e,t){return vu(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function P6e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(P6e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function t1e(e,t,n){const r=P6e(e,t||{});return n==null||n.appendChild(r),r}var B5t=Object.freeze({__proto__:null,createElement:t1e,default:t1e});const j5t={fetchBlob:function(e,t,n){return vu(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){vu(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>vu(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>vu(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class U5t extends $P{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return vu(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let JG=class ZG extends $P{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=E=>{if(E.preventDefault(),E.stopPropagation(),u&&Date.now()-m<a)return;const S=E.clientX,C=E.clientY,A=S-d,R=C-h;if(p||Math.abs(A)>s||Math.abs(R)>s){const k=t.getBoundingClientRect(),{left:N,top:L}=k;p||(r==null||r(d-N,h-L),p=!0),n(A,R,S-N,C-L),d=S,h=C}},y=E=>{if(p){const S=E.clientX,C=E.clientY,A=t.getBoundingClientRect(),{left:R,top:k}=A;i==null||i(S-R,C-k)}l()},v=E=>{E.relatedTarget&&E.relatedTarget!==document.documentElement||y(E)},b=E=>{p&&(E.stopPropagation(),E.preventDefault())},_=E=>{p&&E.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("click",b,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",_),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let _=0;_<=a;_++){const E=Math.round(_*m);if(E>y){const A=Math.round(v*c*i),R=A+Math.round(b*c*i)||1;let k=c-A;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=l-R),r[g](y*(d+h),k,d,R,p),y=E,v=0,b=0}const S=Math.abs(s[_]||0),C=Math.abs(o[_]||0);S>v&&(v=S),C>b&&(b=C)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(ZG.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,v=Math.min(l-y,c);if(v<=0)return;const b=t.map(_=>{const E=Math.floor(y/l*_.length),S=Math.floor((y+v)/l*_.length);return _.slice(E,S)});this.renderSingleCanvas(b,n,v,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,v=Math.floor(y/l*h);Object.keys(f).length>ZG.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(v-1),d(v),d(v+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return vu(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return vu(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};JG.MAX_CANVAS_WIDTH=8e3,JG.MAX_NODES=10;class z5t extends $P{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class n1e extends $P{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return vu(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return vu(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return vu(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const V5t={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class e3 extends U5t{static create(t){return new e3(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new n1e:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},V5t,t),this.timer=new z5t;const r=n?void 0:this.getMediaElement();this.renderer=new JG(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=RO.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=RO.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return vu(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield j5t.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof n1e&&(a.duration=o)}if(r)this.decodedData=RO.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield RO.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return vu(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return vu(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return vu(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return vu(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}e3.BasePlugin=class extends $P{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},e3.dom=B5t;function H5t(e){return e3.create(e)}function q5t(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const r1e=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),W5t=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:r1e(i),enabled:r1e(s)}};function i1e(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=q5t(i)}return n}function G5t({container:e,plugins:t=[],onMount:n,...r}){const i=P.useRef(!1),[s,o]=P.useState({}),a=P.useRef([]),[u,l]=P.useState(null);return P.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=i1e(s,t);a.current=Object.keys(f);const d=H5t({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),P.useEffect(()=>{if(u){const c=i1e(s,t),{disabled:f,enabled:d}=W5t(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function D6e({children:e,plugins:t=[],onMount:n,...r}){const i=G5t({plugins:t,onMount:n,...r});return ni.createElement(F5t.Provider,{value:i},e)}const N6e=({id:e="waveform",children:t})=>ni.createElement("div",{id:e},t);function rV(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let O6e=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},Y5t=class extends O6e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class K5t extends O6e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const X5t=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class _ne extends Y5t{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new K5t,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new _ne(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return rV(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return rV(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||X5t.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return rV(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function $6e({width:e=70,height:t=36}){const n=P.useRef(null),r=P.useRef(null),[i,s]=P.useState(!1);P.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(_ne.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=P.useCallback(a=>{n.current=a,s(!0)},[]);return w.jsx(ke,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:w.jsx(D6e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:w.jsx(N6e,{id:"waveform",height:t})})})}function s1e({setAnswer:e}){return P.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),w.jsx(Wo,{style:{height:"70%",width:"100%"},children:w.jsxs(qi,{children:[w.jsx(ze,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),w.jsx(ze,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),w.jsx(ze,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),w.jsx(Wo,{children:w.jsx($6e,{height:200,width:400})})]})})}const Q5t=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:s1e,default:s1e},Symbol.toStringTag,{value:"Module"}));function J5t(){return w.jsx("div",{children:"test react file"})}const Z5t=Object.freeze(Object.defineProperty({__proto__:null,default:J5t},Symbol.toStringTag,{value:"Module"}));function eLt({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=P.useRef(null),o=10,a=P.useCallback(u=>{const l=xr("#Circle"),c=xr("#click_svg"),f=H$(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return w.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:w.jsx("svg",{id:"click_svg",width:400,height:400,children:w.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const tLt=Object.freeze(Object.defineProperty({__proto__:null,default:eLt},Symbol.toStringTag,{value:"Module"}));function wne({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?bP("%B"):Bv(".2s"))(c),[s]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:w.jsx(Wo,{children:w.jsx(bi,{gap:3,children:w.jsx(ze,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?w.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>w.jsxs("g",{transform:`translate(${f}, ${n})`,children:[w.jsx("line",{y2:"6",stroke:"currentColor"}),o?w.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,w.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:w.jsx(Wo,{children:w.jsx(os,{withinPortal:!0,label:c,children:w.jsx(ze,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const nLt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:wne},Symbol.toStringTag,{value:"Module"}));function L6e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(Wo,{children:w.jsx(bi,{gap:3,children:w.jsx(ze,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>w.jsxs("g",{transform:`translate(${n}, ${l})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),s?w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,w.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:w.jsx("foreignObject",{width:a,height:20,children:w.jsx(bi,{style:{width:"100%",height:"100%"},justify:"right",children:w.jsx(ze,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const rLt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:L6e},Symbol.toStringTag,{value:"Module"})),Mf={top:15,left:100,right:50,bottom:50};function eY({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=tf(),o=P.useMemo(()=>s-Mf.left-Mf.right,[s]),a=P.useMemo(()=>i-Mf.top-Mf.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Uv(d8).domain(d)},[n,t.category]),l=P.useMemo(()=>e?va([Mf.left,o+Mf.left]).domain([0,Q0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?VS([Mf.top,a+Mf.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:w.jsxs("g",{children:[w.jsx("rect",{x:Mf.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Mf.left},h),w.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?w.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w.jsx(wne,{xScale:l,yRange:c.range(),vertPosition:a+Mf.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?w.jsx(L6e,{yScale:c,horizontalPosition:Mf.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):w.jsx(Tc,{})}const iLt=Object.freeze(Object.defineProperty({__proto__:null,Bar:eY,default:eY},Symbol.toStringTag,{value:"Module"}));function M6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>Bv(".2s"),[]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(Wo,{children:w.jsx(bi,{gap:3,children:w.jsx(ze,{size:"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>w.jsxs("g",{transform:`translate(${n}, ${a})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),w.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const sLt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:M6e},Symbol.toStringTag,{value:"Module"})),iV=15;function F6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=xr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<iV&&Math.abs(t(g[r.y])-p[1])<iV);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),w.jsx("circle",{style:{cursor:l?"pointer":"default"},r:iV,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const oLt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:F6e},Symbol.toStringTag,{value:"Module"})),gs={top:15,left:100,right:15,bottom:70};function tY({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=tf(),[c]=tf(),[f]=tf(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-gs.left-gs.right,[l]),m=P.useMemo(()=>u-gs.top-gs.bottom,[u]),g=P.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return Uv(d8).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:_}=P.useMemo(()=>{const k=s.map(H=>+H[i.x]).filter(H=>H!==null),[N,L]=CR(k),O=s.map(H=>+H[i.y]).filter(H=>H!==null),[B,q]=CR(O);return{xMin:N,xMax:L,yMin:B,yMax:q}},[s,i.x,i.y]),E=P.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?Eee([gs.left,p+gs.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):va([gs.left,p+gs.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),S=P.useMemo(()=>{const k=_-v;return m<=0?null:va([m+gs.top,gs.top]).domain([v-k/10,_+k/10]).nice()},[m,_,v]),C=P.useMemo(()=>{if(!E||!S)return()=>null;if(r==="Axis Selection"){const k=s3e().extent([[gs.left,gs.top+m-5],[gs.left+p,gs.top+m+5]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[L.selection[0],null],[L.selection[1],null]],E,S,L.mode)}),N=o3e().extent([[gs.left-5,gs.top],[gs.left+5,gs.top+m]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[null,L.selection[0]],[null,L.selection[1]]],E,S,L.mode)});return c.current&&f.current&&(xr(f.current).call(N),xr(c.current).call(k),t.hasBrush||(xr(f.current).call(N.move,[S(_),S(v)]),xr(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(_)],[E(new Date("2015-12-31")),S(v)]],E,S,"drag"))),()=>{xr(f.current).call(N.move,[S(_),S(v)]),xr(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(_)],[E(new Date("2015-12-31")),S(v)]],E,S,"clear")}}if(r==="Rectangular Selection"){const k=a3e().extent([[gs.left,gs.top],[gs.left+p,gs.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,S,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(xr(a.current).call(k.move,null),e(null))});return xr(a.current).call(k),()=>{xr(a.current).call(k.move,null),n([[null,null],[null,null]],E,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),S(_)],[E(b),S(v)]],E,S,null),()=>n([[E(y),S(_)],[E(b),S(v)]],E,S,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),S(_)],[E(b),S(v)]],E,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,_,v,S]),A=P.useMemo(()=>o.length===0?null:new Set(o),[o]),R=P.useMemo(()=>!E||!S?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const L=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return w.jsx("circle",{opacity:A&&!A.has(k[i.ids])?.3:1,r:3,fill:A&&!A.has(k[i.ids])?"lightgray":g(k[i.category]),cx:L,cy:S(k[i.y])},N)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,S]);return P.useEffect(()=>{r==="Axis Selection"&&SRe(".handle").style("fill","darkgrey")},[t,r]),w.jsxs(qi,{children:[w.jsxs(bi,{children:[w.jsx(on,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?w.jsx(SF,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),w.jsxs(bi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[w.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&S?w.jsxs("g",{children:[w.jsx(M6e,{yScale:S,label:i.y,horizontalPosition:gs.left,xRange:E.range()}),w.jsx(wne,{xScale:E,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+gs.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,R,w.jsx("g",{id:"brushXRef",ref:c}),w.jsx("g",{id:"brushYRef",ref:f}),E&&S&&r==="Paintbrush Selection"?w.jsx(F6e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:S}):null]}),r==="Slider Selection"&&E&&S?w.jsxs(qi,{style:{flexGrow:1},gap:50,children:[w.jsxs(qi,{gap:0,children:[w.jsx(ze,{children:i.x}),w.jsx(aT,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,S,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),w.jsxs(qi,{gap:0,children:[w.jsx(ze,{children:i.y}),w.jsx(aT,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:k=>{n([[t.x1,S(k[1])],[t.x2,S(k[0])]],E,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(k=>({value:k,label:k})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const aLt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:tY,default:tY},Symbol.toStringTag,{value:"Module"}));function o1e({parameters:e,setAnswer:t}){const[n,r]=P.useState(null),[i,s]=P.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=P.useState(null);P.useEffect(()=>{f3e(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=P.useMemo(()=>o?_6e(o):null,[o]),{actions:l,trrack:c}=P.useMemo(()=>{const g=nw.create(),y=g.register("brush",(S,C)=>(S.all={brush:C},S)),v=g.register("brushMove",(S,C)=>(S.all={brush:C},S)),b=g.register("brushResize",(S,C)=>(S.all={brush:C},S)),_=g.register("brushClear",(S,C)=>(S.all={brush:C},S)),E=EP({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:_},trrack:E}},[]),f=P.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=P.useMemo(()=>Yd(f,100,{maxWait:100}),[f]),h=P.useCallback((g,y,v,b,_)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),C=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let R=null;if(b==="clear")R=u;else if(_){const N=new Set(_);R=u.filter(D2(L=>N.has(L[e.ids])))}else e.brushType==="Axis Selection"?R=u.filter(D2(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(S)&&N[e.y]>=C&&N[e.y]<=A)):R=u.filter(D2(N=>N[e.x]>=E&&N[e.x]<=S&&N[e.y]>=C&&N[e.y]<=A));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?R==null?void 0:R.array("id"):[]};s(k),b==="drag"||b==="handle"?d(b,k):b==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(R),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=P.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=P.useCallback(g=>{r(g)},[]);return o?w.jsxs(qi,{gap:"xs",children:[w.jsx(tY,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),w.jsx(eY,{data:o,parameters:e,barsTable:p})]}):w.jsx(Tc,{})}const uLt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:o1e,default:o1e},Symbol.toStringTag,{value:"Module"})),lLt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),cLt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),B6e=P.createContext(null);function j6e({width:e,height:t,margin:n,xDomain:r,yDomain:i,children:s}){const o=P.useMemo(()=>{const a=va().domain(r).range([n.left,e-n.right]),u=va().domain(i).range([t-n.bottom,n.top]);return{xScale:a,yScale:u,width:e,height:t,margin:n}},[e,t,n,r,i]);return w.jsx(B6e.Provider,{value:o,children:s})}function iw(){const e=P.useContext(B6e);if(!e)throw new Error("useScales must be used within a ScalesProvider");return e}const fLt=Object.freeze(Object.defineProperty({__proto__:null,ScalesProvider:j6e,useScales:iw},Symbol.toStringTag,{value:"Module"}));function U6e({data:e,strokeColor:t="currentColor",strokeWidth:n=2}){const{xScale:r,yScale:i}=iw();if(!(e!=null&&e.length)||!r||!i)return null;const s=m8().x(o=>r(o.x)).y(o=>i(o.y)).defined(o=>!Number.isNaN(o.x)&&!Number.isNaN(o.y));return w.jsx("path",{d:s(e)||"",fill:"none",stroke:t,strokeWidth:n,"data-source":"Line"})}const dLt=Object.freeze(Object.defineProperty({__proto__:null,Line:U6e},Symbol.toStringTag,{value:"Module"}));function z6e({position:e}){return e?w.jsx("circle",{cx:e.x,cy:e.y,r:10,fill:"#666",stroke:"none",opacity:.8,pointerEvents:"none"}):null}const hLt=Object.freeze(Object.defineProperty({__proto__:null,default:z6e},Symbol.toStringTag,{value:"Module"}));function V6e({point:e}){const{xScale:t,yScale:n}=iw();return e?w.jsx("circle",{cx:t(e.x),cy:n(e.y),r:4,fill:"#ff0000",pointerEvents:"none","data-source":"ClickMarker"}):null}const pLt=Object.freeze(Object.defineProperty({__proto__:null,default:V6e},Symbol.toStringTag,{value:"Module"}));function H6e({point:e}){const{xScale:t,yScale:n}=iw();if(!e)return null;const r=e.pixelX!==void 0?e.pixelX:t(e.x),i=e.pixelY!==void 0?e.pixelY:n(e.y);return w.jsx("circle",{cx:r,cy:i,r:5,fill:"#2563eb",stroke:"#ffffff",strokeWidth:1.5,opacity:.8,pointerEvents:"none","data-source":"NearestPointMarker"})}const mLt=Object.freeze(Object.defineProperty({__proto__:null,default:H6e},Symbol.toStringTag,{value:"Module"}));function q6e({xValue:e,yValue:t,tangentLine:n}){const{xScale:r,yScale:i,width:s,height:o,margin:a}=iw(),u=()=>e==null?null:w.jsx("line",{x1:r(e),x2:r(e),y1:a.top,y2:o-a.bottom,stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-vertical"}),l=()=>t==null?null:w.jsx("line",{x1:a.left,x2:s-a.right,y1:i(t),y2:i(t),stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-horizontal"}),c=()=>{if(!n)return null;const f=(r.domain()[1]-r.domain()[0])*.2,d=n.point.x-f,h=n.point.y-f*n.slope,p=n.point.x+f,m=n.point.y+f*n.slope;return w.jsx("line",{x1:r(d),y1:i(h),x2:r(p),y2:i(m),stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-tangent"})};return w.jsxs("g",{children:[u(),l(),c()]})}const gLt=Object.freeze(Object.defineProperty({__proto__:null,default:q6e},Symbol.toStringTag,{value:"Module"}));function W6e({distributionData:e,showPDF:t=!0,isTraining:n=!1,strokeColor:r="#2563eb",strokeWidth:i=2,axisLabels:s,selectedPoint:o,nearestPoint:a,guidelines:u,cursor:l,children:c,onClick:f,onMouseMove:d,onMouseLeave:h}){const{xScale:p,yScale:m,width:g,height:y,margin:v}=iw(),b=P.useRef(null),_=P.useRef(null),E=P.useMemo(()=>{if(!(e!=null&&e.xVals)||!(e!=null&&e.pdfVals)||!(e!=null&&e.cdfVals))return[];const C=t?e.pdfVals:e.cdfVals;return e.xVals.map((A,R)=>({x:A,y:C[R]}))},[e,t]);P.useEffect(()=>{!p||!m||!b.current||!_.current||(b.current&&xr(b.current).call(fRe(p)).attr("transform",`translate(0,${y-v.bottom})`).selectAll("text").style("font-size","12px"),_.current&&xr(_.current).call(dRe(m)).attr("transform",`translate(${v.left},0)`).selectAll("text").style("font-size","12px"))},[p,m,v,y]);const S=P.useMemo(()=>s?w.jsxs(w.Fragment,{children:[s.x&&w.jsx("text",{x:g/2,y:y-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:s.x}),s.y&&w.jsx("text",{x:-y/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:s.y})]}):null,[s,g,y]);return w.jsx("svg",{width:g,height:y,style:{cursor:"none"},onClick:f,onMouseMove:d,onMouseLeave:h,children:w.jsxs("g",{children:[w.jsx(U6e,{data:E,strokeColor:r,strokeWidth:i}),w.jsx("g",{ref:b}),w.jsx("g",{ref:_}),S,l&&w.jsx(z6e,{position:{x:l.x,y:l.y}}),(l==null?void 0:l.isNearCurve)&&a&&w.jsx(H6e,{point:a}),o&&w.jsx(V6e,{point:o}),n&&u&&w.jsx(q6e,{xValue:u.x,yValue:u.y,tangentLine:u.tangentLine}),c]})})}const yLt=Object.freeze(Object.defineProperty({__proto__:null,default:W6e},Symbol.toStringTag,{value:"Module"}));var G6e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=function(r,i){var s=Array.prototype.concat,o=Array.prototype.slice,a=Object.prototype.toString;function u(v,b){var _=v>b?v:b;return r.pow(10,17-~~(r.log(_>0?_:-_)*r.LOG10E))}var l=Array.isArray||function(b){return a.call(b)==="[object Array]"};function c(v){return a.call(v)==="[object Function]"}function f(v){return typeof v=="number"?v-v===0:!1}function d(v){return s.apply([],v)}function h(){return new h._init(arguments)}h.fn=h.prototype,h._init=function(b){if(l(b[0]))if(l(b[0][0])){c(b[1])&&(b[0]=h.map(b[0],b[1]));for(var _=0;_<b[0].length;_++)this[_]=b[0][_];this.length=b[0].length}else this[0]=c(b[1])?h.map(b[0],b[1]):b[0],this.length=1;else if(f(b[0]))this[0]=h.seq.apply(null,b),this.length=1;else{if(b[0]instanceof h)return h(b[0].toArray());this[0]=[],this.length=1}return this},h._init.prototype=h.prototype,h._init.constructor=h,h.utils={calcRdx:u,isArray:l,isFunction:c,isNumber:f,toVector:d},h._random_fn=r.random,h.setRandom=function(b){if(typeof b!="function")throw new TypeError("fn is not a function");h._random_fn=b},h.extend=function(b){var _,E;if(arguments.length===1){for(E in b)h[E]=b[E];return this}for(_=1;_<arguments.length;_++)for(E in arguments[_])b[E]=arguments[_][E];return b},h.rows=function(b){return b.length||1},h.cols=function(b){return b[0].length||1},h.dimensions=function(b){return{rows:h.rows(b),cols:h.cols(b)}},h.row=function(b,_){return l(_)?_.map(function(E){return h.row(b,E)}):b[_]},h.rowa=function(b,_){return h.row(b,_)},h.col=function(b,_){if(l(_)){var E=h.arange(b.length).map(function(){return new Array(_.length)});return _.forEach(function(A,R){h.arange(b.length).forEach(function(k){E[k][R]=b[k][A]})}),E}for(var S=new Array(b.length),C=0;C<b.length;C++)S[C]=[b[C][_]];return S},h.cola=function(b,_){return h.col(b,_).map(function(E){return E[0]})},h.diag=function(b){for(var _=h.rows(b),E=new Array(_),S=0;S<_;S++)E[S]=[b[S][S]];return E},h.antidiag=function(b){for(var _=h.rows(b)-1,E=new Array(_),S=0;_>=0;_--,S++)E[S]=[b[S][_]];return E},h.transpose=function(b){var _=[],E,S,C,A,R;for(l(b[0])||(b=[b]),S=b.length,C=b[0].length,R=0;R<C;R++){for(E=new Array(S),A=0;A<S;A++)E[A]=b[A][R];_.push(E)}return _.length===1?_[0]:_},h.map=function(b,_,E){var S,C,A,R,k;for(l(b[0])||(b=[b]),C=b.length,A=b[0].length,R=E?b:new Array(C),S=0;S<C;S++)for(R[S]||(R[S]=new Array(A)),k=0;k<A;k++)R[S][k]=_(b[S][k],S,k);return R.length===1?R[0]:R},h.cumreduce=function(b,_,E){var S,C,A,R,k;for(l(b[0])||(b=[b]),C=b.length,A=b[0].length,R=E?b:new Array(C),S=0;S<C;S++)for(R[S]||(R[S]=new Array(A)),A>0&&(R[S][0]=b[S][0]),k=1;k<A;k++)R[S][k]=_(R[S][k-1],b[S][k]);return R.length===1?R[0]:R},h.alter=function(b,_){return h.map(b,_,!0)},h.create=function(b,_,E){var S=new Array(b),C,A;for(c(_)&&(E=_,_=b),C=0;C<b;C++)for(S[C]=new Array(_),A=0;A<_;A++)S[C][A]=E(C,A);return S};function p(){return 0}h.zeros=function(b,_){return f(_)||(_=b),h.create(b,_,p)};function m(){return 1}h.ones=function(b,_){return f(_)||(_=b),h.create(b,_,m)},h.rand=function(b,_){return f(_)||(_=b),h.create(b,_,h._random_fn)};function g(v,b){return v===b?1:0}h.identity=function(b,_){return f(_)||(_=b),h.create(b,_,g)},h.symmetric=function(b){var _=b.length,E,S;if(b.length!==b[0].length)return!1;for(E=0;E<_;E++)for(S=0;S<_;S++)if(b[S][E]!==b[E][S])return!1;return!0},h.clear=function(b){return h.alter(b,p)},h.seq=function(b,_,E,S){c(S)||(S=!1);var C=[],A=u(b,_),R=(_*A-b*A)/((E-1)*A),k=b,N;for(N=0;k<=_&&N<E;N++,k=(b*A+R*A*N)/A)C.push(S?S(k,N):k);return C},h.arange=function(b,_,E){var S=[],C;if(E=E||1,_===i&&(_=b,b=0),b===_||E===0)return[];if(b<_&&E<0)return[];if(b>_&&E>0)return[];if(E>0)for(C=b;C<_;C+=E)S.push(C);else for(C=b;C>_;C+=E)S.push(C);return S},h.slice=function(){function v(_,E,S,C){var A,R=[],k=_.length;if(E===i&&S===i&&C===i)return h.copy(_);if(E=E||0,S=S||_.length,E=E>=0?E:k+E,S=S>=0?S:k+S,C=C||1,E===S||C===0)return[];if(E<S&&C<0)return[];if(E>S&&C>0)return[];if(C>0)for(A=E;A<S;A+=C)R.push(_[A]);else for(A=E;A>S;A+=C)R.push(_[A]);return R}function b(_,E){var S,C;if(E=E||{},f(E.row)){if(f(E.col))return _[E.row][E.col];var A=h.rowa(_,E.row);return S=E.col||{},v(A,S.start,S.end,S.step)}if(f(E.col)){var R=h.cola(_,E.col);return C=E.row||{},v(R,C.start,C.end,C.step)}C=E.row||{},S=E.col||{};var k=v(_,C.start,C.end,C.step);return k.map(function(N){return v(N,S.start,S.end,S.step)})}return b}(),h.sliceAssign=function(b,_,E){var S,C;if(f(_.row)){if(f(_.col))return b[_.row][_.col]=E;_.col=_.col||{},_.col.start=_.col.start||0,_.col.end=_.col.end||b[0].length,_.col.step=_.col.step||1,S=h.arange(_.col.start,r.min(b.length,_.col.end),_.col.step);var A=_.row;return S.forEach(function(k,N){b[A][k]=E[N]}),b}if(f(_.col)){_.row=_.row||{},_.row.start=_.row.start||0,_.row.end=_.row.end||b.length,_.row.step=_.row.step||1,C=h.arange(_.row.start,r.min(b[0].length,_.row.end),_.row.step);var R=_.col;return C.forEach(function(k,N){b[k][R]=E[N]}),b}return E[0].length===i&&(E=[E]),_.row.start=_.row.start||0,_.row.end=_.row.end||b.length,_.row.step=_.row.step||1,_.col.start=_.col.start||0,_.col.end=_.col.end||b[0].length,_.col.step=_.col.step||1,C=h.arange(_.row.start,r.min(b.length,_.row.end),_.row.step),S=h.arange(_.col.start,r.min(b[0].length,_.col.end),_.col.step),C.forEach(function(k,N){S.forEach(function(L,O){b[k][L]=E[N][O]})}),b},h.diagonal=function(b){var _=h.zeros(b.length,b.length);return b.forEach(function(E,S){_[S][S]=E}),_},h.copy=function(b){return b.map(function(_){return f(_)?_:_.map(function(E){return E})})};var y=h.prototype;return y.length=0,y.push=Array.prototype.push,y.sort=Array.prototype.sort,y.splice=Array.prototype.splice,y.slice=Array.prototype.slice,y.toArray=function(){return this.length>1?o.call(this):o.call(this)[0]},y.map=function(b,_){return h(h.map(this,b,_))},y.cumreduce=function(b,_){return h(h.cumreduce(this,b,_))},y.alter=function(b){return h.alter(this,b),this},function(v){for(var b=0;b<v.length;b++)(function(_){y[_]=function(E){var S=this,C;return E?(setTimeout(function(){E.call(S,y[_].call(S))}),this):(C=h[_](this),l(C)?h(C):C)}})(v[b])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(v){for(var b=0;b<v.length;b++)(function(_){y[_]=function(E,S){var C=this;return S?(setTimeout(function(){S.call(C,y[_].call(C,E))}),this):h(h[_](this,E))}})(v[b])}("row col".split(" ")),function(v){for(var b=0;b<v.length;b++)(function(_){y[_]=function(){return h(h[_].apply(null,arguments))}})(v[b])}("create zeros ones rand identity".split(" ")),h}(Math);return function(r,i){var s=r.utils.isFunction;function o(l,c){return l-c}function a(l,c,f){return i.max(c,i.min(l,f))}r.sum=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d];return f},r.sumsqrd=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d]*c[d];return f},r.sumsqerr=function(c){for(var f=r.mean(c),d=0,h=c.length,p;--h>=0;)p=c[h]-f,d+=p*p;return d},r.sumrow=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d];return f},r.product=function(c){for(var f=1,d=c.length;--d>=0;)f*=c[d];return f},r.min=function(c){for(var f=c[0],d=0;++d<c.length;)c[d]<f&&(f=c[d]);return f},r.max=function(c){for(var f=c[0],d=0;++d<c.length;)c[d]>f&&(f=c[d]);return f},r.unique=function(c){for(var f={},d=[],h=0;h<c.length;h++)f[c[h]]||(f[c[h]]=!0,d.push(c[h]));return d},r.mean=function(c){return r.sum(c)/c.length},r.meansqerr=function(c){return r.sumsqerr(c)/c.length},r.geomean=function(c){var f=c.map(i.log),d=r.mean(f);return i.exp(d)},r.median=function(c){var f=c.length,d=c.slice().sort(o);return f&1?d[f/2|0]:(d[f/2-1]+d[f/2])/2},r.cumsum=function(c){return r.cumreduce(c,function(f,d){return f+d})},r.cumprod=function(c){return r.cumreduce(c,function(f,d){return f*d})},r.diff=function(c){var f=[],d=c.length,h;for(h=1;h<d;h++)f.push(c[h]-c[h-1]);return f},r.rank=function(l){var c,f=[],d={};for(c=0;c<l.length;c++){var h=l[c];d[h]?d[h]++:(d[h]=1,f.push(h))}var p=f.sort(o),m={},g=1;for(c=0;c<p.length;c++){var h=p[c],y=d[h],v=g,b=g+y-1,_=(v+b)/2;m[h]=_,g+=y}return l.map(function(E){return m[E]})},r.mode=function(c){var f=c.length,d=c.slice().sort(o),h=1,p=0,m=0,g=[],y;for(y=0;y<f;y++)d[y]===d[y+1]?h++:(h>p?(g=[d[y]],p=h,m=0):h===p&&(g.push(d[y]),m++),h=1);return m===0?g[0]:g},r.range=function(c){return r.max(c)-r.min(c)},r.variance=function(c,f){return r.sumsqerr(c)/(c.length-(f?1:0))},r.pooledvariance=function(c){var f=c.reduce(function(h,p){return h+r.sumsqerr(p)},0),d=c.reduce(function(h,p){return h+p.length},0);return f/(d-c.length)},r.deviation=function(l){for(var c=r.mean(l),f=l.length,d=new Array(f),h=0;h<f;h++)d[h]=l[h]-c;return d},r.stdev=function(c,f){return i.sqrt(r.variance(c,f))},r.pooledstdev=function(c){return i.sqrt(r.pooledvariance(c))},r.meandev=function(c){for(var f=r.mean(c),d=[],h=c.length-1;h>=0;h--)d.push(i.abs(c[h]-f));return r.mean(d)},r.meddev=function(c){for(var f=r.median(c),d=[],h=c.length-1;h>=0;h--)d.push(i.abs(c[h]-f));return r.median(d)},r.coeffvar=function(c){return r.stdev(c)/r.mean(c)},r.quartiles=function(c){var f=c.length,d=c.slice().sort(o);return[d[i.round(f/4)-1],d[i.round(f/2)-1],d[i.round(f*3/4)-1]]},r.quantiles=function(c,f,d,h){var p=c.slice().sort(o),m=[f.length],g=c.length,y,v,b,_,E,S;for(typeof d>"u"&&(d=3/8),typeof h>"u"&&(h=3/8),y=0;y<f.length;y++)v=f[y],b=d+v*(1-d-h),_=g*v+b,E=i.floor(a(_,1,g-1)),S=a(_-E,0,1),m[y]=(1-S)*p[E-1]+S*p[E];return m},r.percentile=function(c,f,d){var h=c.slice().sort(o),p=f*(h.length+(d?1:-1))+(d?0:1),m=parseInt(p),g=p-m;return m+1<h.length?h[m-1]+g*(h[m]-h[m-1]):h[m-1]},r.percentileOfScore=function(c,f,d){var h=0,p=c.length,m=!1,g,y;for(d==="strict"&&(m=!0),y=0;y<p;y++)g=c[y],(m&&g<f||!m&&g<=f)&&h++;return h/p},r.histogram=function(c,f){f=f||4;var d=r.min(c),h=(r.max(c)-d)/f,p=c.length,m=[],g;for(g=0;g<f;g++)m[g]=0;for(g=0;g<p;g++)m[i.min(i.floor((c[g]-d)/h),f-1)]+=1;return m},r.covariance=function(c,f){var d=r.mean(c),h=r.mean(f),p=c.length,m=new Array(p),g;for(g=0;g<p;g++)m[g]=(c[g]-d)*(f[g]-h);return r.sum(m)/(p-1)},r.corrcoeff=function(c,f){return r.covariance(c,f)/r.stdev(c,1)/r.stdev(f,1)},r.spearmancoeff=function(l,c){return l=r.rank(l),c=r.rank(c),r.corrcoeff(l,c)},r.stanMoment=function(c,f){for(var d=r.mean(c),h=r.stdev(c),p=c.length,m=0,g=0;g<p;g++)m+=i.pow((c[g]-d)/h,f);return m/c.length},r.skewness=function(c){return r.stanMoment(c,3)},r.kurtosis=function(c){return r.stanMoment(c,4)-3};var u=r.prototype;(function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(d,h){var p=[],m=0,g=this;if(s(d)&&(h=d,d=!1),h)return setTimeout(function(){h.call(g,u[f].call(g,d))}),this;if(this.length>1){for(g=d===!0?this:this.transpose();m<g.length;m++)p[m]=r[f](g[m]);return p}return r[f](this[0],d)}})(l[c])})("cumsum cumprod".split(" ")),function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(d,h){var p=[],m=0,g=this;if(s(d)&&(h=d,d=!1),h)return setTimeout(function(){h.call(g,u[f].call(g,d))}),this;if(this.length>1){for(f!=="sumrow"&&(g=d===!0?this:this.transpose());m<g.length;m++)p[m]=r[f](g[m]);return d===!0?r[f](r.utils.toVector(p)):p}return r[f](this[0],d)}})(l[c])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(){var d=[],h=0,p=this,m=Array.prototype.slice.call(arguments),g;if(s(m[m.length-1])){g=m[m.length-1];var y=m.slice(0,m.length-1);return setTimeout(function(){g.call(p,u[f].apply(p,y))}),this}else{g=void 0;var v=function(_){return r[f].apply(p,[_].concat(m))}}if(this.length>1){for(p=p.transpose();h<p.length;h++)d[h]=v(p[h]);return d}return v(this[0])}})(l[c])}("quantiles percentileOfScore".split(" "))}(n,Math),function(r,i){r.gammaln=function(o){var a=0,u=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],l=1.000000000190015,c,f,d;for(d=(f=c=o)+5.5,d-=(c+.5)*i.log(d);a<6;a++)l+=u[a]/++f;return i.log(2.5066282746310007*l/c)-d},r.loggam=function(o){var a,u,l,c,f,d,h,p=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(a=o,h=0,o==1||o==2)return 0;for(o<=7&&(h=i.floor(7-o),a=o+h),u=1/(a*a),l=2*i.PI,f=p[9],d=8;d>=0;d--)f*=u,f+=p[d];if(c=f/a+.5*i.log(l)+(a-.5)*i.log(a)-a,o<=7)for(d=1;d<=h;d++)c-=i.log(a-1),a-=1;return c},r.gammafn=function(o){var a=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],u=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],l=!1,c=0,f=0,d=0,h=o,p,m,g,y;if(o>171.6243769536076)return 1/0;if(h<=0)if(y=h%1+36e-17,y)l=(h&1?-1:1)*i.PI/i.sin(i.PI*y),h=1-h;else return 1/0;for(g=h,h<1?m=h++:m=(h-=c=(h|0)-1)-1,p=0;p<8;++p)d=(d+a[p])*m,f=f*m+u[p];if(y=d/f+1,g<h)y/=g;else if(g>h)for(p=0;p<c;++p)y*=h,h++;return l&&(y=l/y),y},r.gammap=function(o,a){return r.lowRegGamma(o,a)*r.gammafn(o)},r.lowRegGamma=function(o,a){var u=r.gammaln(o),l=o,c=1/o,f=c,d=a+1-o,h=1/1e-30,p=1/d,m=p,g=1,y=-~(i.log(o>=1?o:1/o)*8.5+o*.4+17),v;if(a<0||o<=0)return NaN;if(a<o+1){for(;g<=y;g++)c+=f*=a/++l;return c*i.exp(-a+o*i.log(a)-u)}for(;g<=y;g++)v=-g*(g-o),d+=2,p=v*p+d,h=d+v/h,p=1/p,m*=p*h;return 1-m*i.exp(-a+o*i.log(a)-u)},r.factorialln=function(o){return o<0?NaN:r.gammaln(o+1)},r.factorial=function(o){return o<0?NaN:r.gammafn(o+1)},r.combination=function(o,a){return o>170||a>170?i.exp(r.combinationln(o,a)):r.factorial(o)/r.factorial(a)/r.factorial(o-a)},r.combinationln=function(o,a){return r.factorialln(o)-r.factorialln(a)-r.factorialln(o-a)},r.permutation=function(o,a){return r.factorial(o)/r.factorial(o-a)},r.betafn=function(o,a){if(!(o<=0||a<=0))return o+a>170?i.exp(r.betaln(o,a)):r.gammafn(o)*r.gammafn(a)/r.gammafn(o+a)},r.betaln=function(o,a){return r.gammaln(o)+r.gammaln(a)-r.gammaln(o+a)},r.betacf=function(o,a,u){var l=1e-30,c=1,f=a+u,d=a+1,h=a-1,p=1,m=1-f*o/d,g,y,v,b;for(i.abs(m)<l&&(m=l),m=1/m,b=m;c<=100&&(g=2*c,y=c*(u-c)*o/((h+g)*(a+g)),m=1+y*m,i.abs(m)<l&&(m=l),p=1+y/p,i.abs(p)<l&&(p=l),m=1/m,b*=m*p,y=-(a+c)*(f+c)*o/((a+g)*(d+g)),m=1+y*m,i.abs(m)<l&&(m=l),p=1+y/p,i.abs(p)<l&&(p=l),m=1/m,v=m*p,b*=v,!(i.abs(v-1)<3e-7));c++);return b},r.gammapinv=function(o,a){var u=0,l=a-1,c=1e-8,f=r.gammaln(a),d,h,p,m,g,y,v;if(o>=1)return i.max(100,a+100*i.sqrt(a));if(o<=0)return 0;for(a>1?(y=i.log(l),v=i.exp(l*(y-1)-f),g=o<.5?o:1-o,p=i.sqrt(-2*i.log(g)),d=(2.30753+p*.27061)/(1+p*(.99229+p*.04481))-p,o<.5&&(d=-d),d=i.max(.001,a*i.pow(1-1/(9*a)-d/(3*i.sqrt(a)),3))):(p=1-a*(.253+a*.12),o<p?d=i.pow(o/p,1/a):d=1-i.log(1-(o-p)/(1-p)));u<12;u++){if(d<=0)return 0;if(h=r.lowRegGamma(a,d)-o,a>1?p=v*i.exp(-(d-l)+l*(i.log(d)-y)):p=i.exp(-d+l*i.log(d)-f),m=h/p,d-=p=m/(1-.5*i.min(1,m*((a-1)/d-1))),d<=0&&(d=.5*(d+p)),i.abs(p)<c*d)break}return d},r.erf=function(o){var a=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],u=a.length-1,l=!1,c=0,f=0,d,h,p,m;for(o<0&&(o=-o,l=!0),d=2/(2+o),h=4*d-2;u>0;u--)p=c,c=h*c-f+a[u],f=p;return m=d*i.exp(-o*o+.5*(a[0]+h*c)-f),l?m-1:1-m},r.erfc=function(o){return 1-r.erf(o)},r.erfcinv=function(o){var a=0,u,l,c,f;if(o>=2)return-100;if(o<=0)return 100;for(f=o<1?o:2-o,c=i.sqrt(-2*i.log(f/2)),u=-.70711*((2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c);a<2;a++)l=r.erfc(u)-f,u+=l/(1.1283791670955126*i.exp(-u*u)-u*l);return o<1?u:-u},r.ibetainv=function(o,a,u){var l=1e-8,c=a-1,f=u-1,d=0,h,p,m,g,y,v,b,_,E,S,C;if(o<=0)return 0;if(o>=1)return 1;for(a>=1&&u>=1?(m=o<.5?o:1-o,g=i.sqrt(-2*i.log(m)),b=(2.30753+g*.27061)/(1+g*(.99229+g*.04481))-g,o<.5&&(b=-b),_=(b*b-3)/6,E=2/(1/(2*a-1)+1/(2*u-1)),S=b*i.sqrt(_+E)/E-(1/(2*u-1)-1/(2*a-1))*(_+5/6-2/(3*E)),b=a/(a+u*i.exp(2*S))):(h=i.log(a/(a+u)),p=i.log(u/(a+u)),g=i.exp(a*h)/a,y=i.exp(u*p)/u,S=g+y,o<g/S?b=i.pow(a*S*o,1/a):b=1-i.pow(u*S*(1-o),1/u)),C=-r.gammaln(a)-r.gammaln(u)+r.gammaln(a+u);d<10;d++){if(b===0||b===1)return b;if(v=r.ibeta(b,a,u)-o,g=i.exp(c*i.log(b)+f*i.log(1-b)+C),y=v/g,b-=g=y/(1-.5*i.min(1,y*(c/b-f/(1-b)))),b<=0&&(b=.5*(b+g)),b>=1&&(b=.5*(b+g+1)),i.abs(g)<l*b&&d>0)break}return b},r.ibeta=function(o,a,u){var l=o===0||o===1?0:i.exp(r.gammaln(a+u)-r.gammaln(a)-r.gammaln(u)+a*i.log(o)+u*i.log(1-o));return o<0||o>1?!1:o<(a+1)/(a+u+2)?l*r.betacf(o,a,u)/a:1-l*r.betacf(1-o,u,a)/u},r.randn=function(o,a){var u,l,c,f,d;if(a||(a=o),o)return r.create(o,a,function(){return r.randn()});do u=r._random_fn(),l=1.7156*(r._random_fn()-.5),c=u-.449871,f=i.abs(l)+.386595,d=c*c+f*(.196*f-.25472*c);while(d>.27597&&(d>.27846||l*l>-4*i.log(u)*u*u));return l/u},r.randg=function(o,a,u){var l=o,c,f,d,h,p,m;if(u||(u=a),o||(o=1),a)return m=r.zeros(a,u),m.alter(function(){return r.randg(o)}),m;o<1&&(o+=1),c=o-1/3,f=1/i.sqrt(9*c);do{do p=r.randn(),h=1+f*p;while(h<=0);h=h*h*h,d=r._random_fn()}while(d>1-.331*i.pow(p,4)&&i.log(d)>.5*p*p+c*(1-h+i.log(h)));if(o==l)return c*h;do d=r._random_fn();while(d===0);return i.pow(d,1/l)*c*h},function(s){for(var o=0;o<s.length;o++)(function(a){r.fn[a]=function(){return r(r.map(this,function(u){return r[a](u)}))}})(s[o])}("gammaln gammafn factorial factorialln".split(" ")),function(s){for(var o=0;o<s.length;o++)(function(a){r.fn[a]=function(){return r(r[a].apply(null,arguments))}})(s[o])}("randn".split(" "))}(n,Math),function(r,i){(function(l){for(var c=0;c<l.length;c++)(function(f){r[f]=function d(h,p,m){return this instanceof d?(this._a=h,this._b=p,this._c=m,this):new d(h,p,m)},r.fn[f]=function(d,h,p){var m=r[f](d,h,p);return m.data=this,m},r[f].prototype.sample=function(d){var h=this._a,p=this._b,m=this._c;return d?r.alter(d,function(){return r[f].sample(h,p,m)}):r[f].sample(h,p,m)},function(d){for(var h=0;h<d.length;h++)(function(p){r[f].prototype[p]=function(m){var g=this._a,y=this._b,v=this._c;return!m&&m!==0&&(m=this.data),typeof m!="number"?r.fn.map.call(m,function(b){return r[f][p](b,g,y,v)}):r[f][p](m,g,y,v)}})(d[h])}("pdf cdf inv".split(" ")),function(d){for(var h=0;h<d.length;h++)(function(p){r[f].prototype[p]=function(){return r[f][p](this._a,this._b,this._c)}})(d[h])}("mean median mode variance".split(" "))})(l[c])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),r.extend(r.beta,{pdf:function(c,f,d){return c>1||c<0?0:f==1&&d==1?1:f<512&&d<512?i.pow(c,f-1)*i.pow(1-c,d-1)/r.betafn(f,d):i.exp((f-1)*i.log(c)+(d-1)*i.log(1-c)-r.betaln(f,d))},cdf:function(c,f,d){return c>1||c<0?(c>1)*1:r.ibeta(c,f,d)},inv:function(c,f,d){return r.ibetainv(c,f,d)},mean:function(c,f){return c/(c+f)},median:function(c,f){return r.ibetainv(.5,c,f)},mode:function(c,f){return(c-1)/(c+f-2)},sample:function(c,f){var d=r.randg(c);return d/(d+r.randg(f))},variance:function(c,f){return c*f/(i.pow(c+f,2)*(c+f+1))}}),r.extend(r.centralF,{pdf:function(c,f,d){var h,p,m;return c<0?0:f<=2?c===0&&f<2?1/0:c===0&&f===2?1:1/r.betafn(f/2,d/2)*i.pow(f/d,f/2)*i.pow(c,f/2-1)*i.pow(1+f/d*c,-(f+d)/2):(h=f*c/(d+c*f),p=d/(d+c*f),m=f*p/2,m*r.binomial.pdf((f-2)/2,(f+d-2)/2,h))},cdf:function(c,f,d){return c<0?0:r.ibeta(f*c/(f*c+d),f/2,d/2)},inv:function(c,f,d){return d/(f*(1/r.ibetainv(c,f/2,d/2)-1))},mean:function(c,f){return f>2?f/(f-2):void 0},mode:function(c,f){return c>2?f*(c-2)/(c*(f+2)):void 0},sample:function(c,f){var d=r.randg(c/2)*2,h=r.randg(f/2)*2;return d/c/(h/f)},variance:function(c,f){if(!(f<=4))return 2*f*f*(c+f-2)/(c*(f-2)*(f-2)*(f-4))}}),r.extend(r.cauchy,{pdf:function(c,f,d){return d<0?0:d/(i.pow(c-f,2)+i.pow(d,2))/i.PI},cdf:function(c,f,d){return i.atan((c-f)/d)/i.PI+.5},inv:function(l,c,f){return c+f*i.tan(i.PI*(l-.5))},median:function(c){return c},mode:function(c){return c},sample:function(c,f){return r.randn()*i.sqrt(1/(2*r.randg(.5)))*f+c}}),r.extend(r.chisquare,{pdf:function(c,f){return c<0?0:c===0&&f===2?.5:i.exp((f/2-1)*i.log(c)-c/2-f/2*i.log(2)-r.gammaln(f/2))},cdf:function(c,f){return c<0?0:r.lowRegGamma(f/2,c/2)},inv:function(l,c){return 2*r.gammapinv(l,.5*c)},mean:function(l){return l},median:function(c){return c*i.pow(1-2/(9*c),3)},mode:function(c){return c-2>0?c-2:0},sample:function(c){return r.randg(c/2)*2},variance:function(c){return 2*c}}),r.extend(r.exponential,{pdf:function(c,f){return c<0?0:f*i.exp(-f*c)},cdf:function(c,f){return c<0?0:1-i.exp(-f*c)},inv:function(l,c){return-i.log(1-l)/c},mean:function(l){return 1/l},median:function(l){return 1/l*i.log(2)},mode:function(){return 0},sample:function(c){return-1/c*i.log(r._random_fn())},variance:function(l){return i.pow(l,-2)}}),r.extend(r.gamma,{pdf:function(c,f,d){return c<0?0:c===0&&f===1?1/d:i.exp((f-1)*i.log(c)-c/d-r.gammaln(f)-f*i.log(d))},cdf:function(c,f,d){return c<0?0:r.lowRegGamma(f,c/d)},inv:function(l,c,f){return r.gammapinv(l,c)*f},mean:function(l,c){return l*c},mode:function(c,f){if(c>1)return(c-1)*f},sample:function(c,f){return r.randg(c)*f},variance:function(c,f){return c*f*f}}),r.extend(r.invgamma,{pdf:function(c,f,d){return c<=0?0:i.exp(-(f+1)*i.log(c)-d/c-r.gammaln(f)+f*i.log(d))},cdf:function(c,f,d){return c<=0?0:1-r.lowRegGamma(f,d/c)},inv:function(l,c,f){return f/r.gammapinv(1-l,c)},mean:function(l,c){return l>1?c/(l-1):void 0},mode:function(c,f){return f/(c+1)},sample:function(c,f){return f/r.randg(c)},variance:function(c,f){if(!(c<=2))return f*f/((c-1)*(c-1)*(c-2))}}),r.extend(r.kumaraswamy,{pdf:function(c,f,d){return c===0&&f===1?d:c===1&&d===1?f:i.exp(i.log(f)+i.log(d)+(f-1)*i.log(c)+(d-1)*i.log(1-i.pow(c,f)))},cdf:function(c,f,d){return c<0?0:c>1?1:1-i.pow(1-i.pow(c,f),d)},inv:function(c,f,d){return i.pow(1-i.pow(1-c,1/d),1/f)},mean:function(l,c){return c*r.gammafn(1+1/l)*r.gammafn(c)/r.gammafn(1+1/l+c)},median:function(c,f){return i.pow(1-i.pow(2,-1/f),1/c)},mode:function(c,f){if(c>=1&&f>=1&&c!==1&&f!==1)return i.pow((c-1)/(c*f-1),1/c)},variance:function(){throw new Error("variance not yet implemented")}}),r.extend(r.lognormal,{pdf:function(c,f,d){return c<=0?0:i.exp(-i.log(c)-.5*i.log(2*i.PI)-i.log(d)-i.pow(i.log(c)-f,2)/(2*d*d))},cdf:function(c,f,d){return c<0?0:.5+.5*r.erf((i.log(c)-f)/i.sqrt(2*d*d))},inv:function(l,c,f){return i.exp(-1.4142135623730951*f*r.erfcinv(2*l)+c)},mean:function(c,f){return i.exp(c+f*f/2)},median:function(c){return i.exp(c)},mode:function(c,f){return i.exp(c-f*f)},sample:function(c,f){return i.exp(r.randn()*f+c)},variance:function(c,f){return(i.exp(f*f)-1)*i.exp(2*c+f*f)}}),r.extend(r.noncentralt,{pdf:function(c,f,d){var h=1e-14;return i.abs(d)<h?r.studentt.pdf(c,f):i.abs(c)<h?i.exp(r.gammaln((f+1)/2)-d*d/2-.5*i.log(i.PI*f)-r.gammaln(f/2)):f/c*(r.noncentralt.cdf(c*i.sqrt(1+2/f),f+2,d)-r.noncentralt.cdf(c,f,d))},cdf:function(c,f,d){var h=1e-14,p=200;if(i.abs(d)<h)return r.studentt.cdf(c,f);var m=!1;c<0&&(m=!0,d=-d);for(var g=r.normal.cdf(-d,0,1),y=h+1,v=y,b=c*c/(c*c+f),_=0,E=i.exp(-d*d/2),S=i.exp(-d*d/2-.5*i.log(2)-r.gammaln(3/2))*d;_<p||v>h||y>h;)v=y,_>0&&(E*=d*d/(2*_),S*=d*d/(2*(_+1/2))),y=E*r.beta.cdf(b,_+.5,f/2)+S*r.beta.cdf(b,_+1,f/2),g+=.5*y,_++;return m?1-g:g}}),r.extend(r.normal,{pdf:function(c,f,d){return i.exp(-.5*i.log(2*i.PI)-i.log(d)-i.pow(c-f,2)/(2*d*d))},cdf:function(c,f,d){return .5*(1+r.erf((c-f)/i.sqrt(2*d*d)))},inv:function(l,c,f){return-1.4142135623730951*f*r.erfcinv(2*l)+c},mean:function(l){return l},median:function(c){return c},mode:function(l){return l},sample:function(c,f){return r.randn()*f+c},variance:function(l,c){return c*c}}),r.extend(r.pareto,{pdf:function(c,f,d){return c<f?0:d*i.pow(f,d)/i.pow(c,d+1)},cdf:function(c,f,d){return c<f?0:1-i.pow(f/c,d)},inv:function(c,f,d){return f/i.pow(1-c,1/d)},mean:function(c,f){if(!(f<=1))return f*i.pow(c,f)/(f-1)},median:function(c,f){return c*(f*i.SQRT2)},mode:function(c){return c},variance:function(l,c){if(!(c<=2))return l*l*c/(i.pow(c-1,2)*(c-2))}}),r.extend(r.studentt,{pdf:function(c,f){return f=f>1e100?1e100:f,1/(i.sqrt(f)*r.betafn(.5,f/2))*i.pow(1+c*c/f,-((f+1)/2))},cdf:function(c,f){var d=f/2;return r.ibeta((c+i.sqrt(c*c+f))/(2*i.sqrt(c*c+f)),d,d)},inv:function(l,c){var f=r.ibetainv(2*i.min(l,1-l),.5*c,.5);return f=i.sqrt(c*(1-f)/f),l>.5?f:-f},mean:function(c){return c>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(c){return r.randn()*i.sqrt(c/(2*r.randg(c/2)))},variance:function(c){return c>2?c/(c-2):c>1?1/0:void 0}}),r.extend(r.weibull,{pdf:function(c,f,d){return c<0||f<0||d<0?0:d/f*i.pow(c/f,d-1)*i.exp(-i.pow(c/f,d))},cdf:function(c,f,d){return c<0?0:1-i.exp(-i.pow(c/f,d))},inv:function(l,c,f){return c*i.pow(-i.log(1-l),1/f)},mean:function(l,c){return l*r.gammafn(1+1/c)},median:function(c,f){return c*i.pow(i.log(2),1/f)},mode:function(c,f){return f<=1?0:c*i.pow((f-1)/f,1/f)},sample:function(c,f){return c*i.pow(-i.log(r._random_fn()),1/f)},variance:function(c,f){return c*c*r.gammafn(1+2/f)-i.pow(r.weibull.mean(c,f),2)}}),r.extend(r.uniform,{pdf:function(c,f,d){return c<f||c>d?0:1/(d-f)},cdf:function(c,f,d){return c<f?0:c<d?(c-f)/(d-f):1},inv:function(l,c,f){return c+l*(f-c)},mean:function(c,f){return .5*(c+f)},median:function(c,f){return r.mean(c,f)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(c,f){return c/2+f/2+(f/2-c/2)*(2*r._random_fn()-1)},variance:function(c,f){return i.pow(f-c,2)/12}});function s(l,c,f,d){for(var h=0,p=1,m=1,g=1,y=0,v=0,b;i.abs((m-v)/m)>d;)v=m,b=-(c+y)*(c+f+y)*l/(c+2*y)/(c+2*y+1),h=m+b*h,p=g+b*p,y=y+1,b=y*(f-y)*l/(c+2*y-1)/(c+2*y),m=h+b*m,g=p+b*g,h=h/g,p=p/g,m=m/g,g=1;return m/c}r.extend(r.binomial,{pdf:function(c,f,d){return d===0||d===1?f*d===c?1:0:r.combination(f,c)*i.pow(d,c)*i.pow(1-d,f-c)},cdf:function(c,f,d){var h,p=1e-10;if(c<0)return 0;if(c>=f)return 1;if(d<0||d>1||f<=0)return NaN;c=i.floor(c);var m=d,g=c+1,y=f-c,v=g+y,b=i.exp(r.gammaln(v)-r.gammaln(y)-r.gammaln(g)+g*i.log(m)+y*i.log(1-m));return m<(g+1)/(v+2)?h=b*s(m,g,y,p):h=1-b*s(1-m,y,g,p),i.round((1-h)*(1/p))/(1/p)}}),r.extend(r.negbin,{pdf:function(c,f,d){return c!==c>>>0?!1:c<0?0:r.combination(c+f-1,f-1)*i.pow(1-d,c)*i.pow(d,f)},cdf:function(c,f,d){var h=0,p=0;if(c<0)return 0;for(;p<=c;p++)h+=r.negbin.pdf(p,f,d);return h}}),r.extend(r.hypgeom,{pdf:function(c,f,d,h){if(c!==c|0)return!1;if(c<0||c<d-(f-h))return 0;if(c>h||c>d)return 0;if(d*2>f)return h*2>f?r.hypgeom.pdf(f-d-h+c,f,f-d,f-h):r.hypgeom.pdf(h-c,f,f-d,h);if(h*2>f)return r.hypgeom.pdf(d-c,f,d,f-h);if(d<h)return r.hypgeom.pdf(c,f,h,d);for(var p=1,m=0,g=0;g<c;g++){for(;p>1&&m<h;)p*=1-d/(f-m),m++;p*=(h-g)*(d-g)/((g+1)*(f-d-h+g+1))}for(;m<h;m++)p*=1-d/(f-m);return i.min(1,i.max(0,p))},cdf:function(c,f,d,h){if(c<0||c<d-(f-h))return 0;if(c>=h||c>=d)return 1;if(d*2>f)return h*2>f?r.hypgeom.cdf(f-d-h+c,f,f-d,f-h):1-r.hypgeom.cdf(h-c-1,f,f-d,h);if(h*2>f)return 1-r.hypgeom.cdf(d-c-1,f,d,f-h);if(d<h)return r.hypgeom.cdf(c,f,h,d);for(var p=1,m=1,g=0,y=0;y<c;y++){for(;p>1&&g<h;){var v=1-d/(f-g);m*=v,p*=v,g++}m*=(h-y)*(d-y)/((y+1)*(f-d-h+y+1)),p+=m}for(;g<h;g++)p*=1-d/(f-g);return i.min(1,i.max(0,p))}}),r.extend(r.poisson,{pdf:function(c,f){return f<0||c%1!==0||c<0?0:i.pow(f,c)*i.exp(-f)/r.factorial(c)},cdf:function(c,f){var d=[],h=0;if(c<0)return 0;for(;h<=c;h++)d.push(r.poisson.pdf(h,f));return r.sum(d)},mean:function(l){return l},variance:function(l){return l},sampleSmall:function(c){var f=1,d=0,h=i.exp(-c);do d++,f*=r._random_fn();while(f>h);return d-1},sampleLarge:function(c){var f=c,d,h,p,m,g,y,v,b,_,E;for(m=i.sqrt(f),g=i.log(f),v=.931+2.53*m,y=-.059+.02483*v,b=1.1239+1.1328/(v-3.4),_=.9277-3.6224/(v-2);;){if(h=i.random()-.5,p=i.random(),E=.5-i.abs(h),d=i.floor((2*y/E+v)*h+f+.43),E>=.07&&p<=_)return d;if(!(d<0||E<.013&&p>E)&&i.log(p)+i.log(b)-i.log(y/(E*E)+v)<=-f+d*g-r.loggam(d+1))return d}},sample:function(c){return c<10?this.sampleSmall(c):this.sampleLarge(c)}}),r.extend(r.triangular,{pdf:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<f||c>d?0:c<h?2*(c-f)/((d-f)*(h-f)):c===h?2/(d-f):2*(d-c)/((d-f)*(d-h))},cdf:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<=f?0:c>=d?1:c<=h?i.pow(c-f,2)/((d-f)*(h-f)):1-i.pow(d-c,2)/((d-f)*(d-h))},inv:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<=(h-f)/(d-f)?f+(d-f)*i.sqrt(c*((h-f)/(d-f))):f+(d-f)*(1-i.sqrt((1-c)*(1-(h-f)/(d-f))))},mean:function(c,f,d){return(c+f+d)/3},median:function(c,f,d){if(d<=(c+f)/2)return f-i.sqrt((f-c)*(f-d))/i.sqrt(2);if(d>(c+f)/2)return c+i.sqrt((f-c)*(d-c))/i.sqrt(2)},mode:function(c,f,d){return d},sample:function(c,f,d){var h=r._random_fn();return h<(d-c)/(f-c)?c+i.sqrt(h*(f-c)*(d-c)):f-i.sqrt((1-h)*(f-c)*(f-d))},variance:function(c,f,d){return(c*c+f*f+d*d-c*f-c*d-f*d)/18}}),r.extend(r.arcsine,{pdf:function(c,f,d){return d<=f?NaN:c<=f||c>=d?0:2/i.PI*i.pow(i.pow(d-f,2)-i.pow(2*c-f-d,2),-.5)},cdf:function(c,f,d){return c<f?0:c<d?2/i.PI*i.asin(i.sqrt((c-f)/(d-f))):1},inv:function(l,c,f){return c+(.5-.5*i.cos(i.PI*l))*(f-c)},mean:function(c,f){return f<=c?NaN:(c+f)/2},median:function(c,f){return f<=c?NaN:(c+f)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(c,f){return(c+f)/2+(f-c)/2*i.sin(2*i.PI*r.uniform.sample(0,1))},variance:function(c,f){return f<=c?NaN:i.pow(f-c,2)/8}});function o(l){return l/i.abs(l)}r.extend(r.laplace,{pdf:function(c,f,d){return d<=0?0:i.exp(-i.abs(c-f)/d)/(2*d)},cdf:function(c,f,d){return d<=0?0:c<f?.5*i.exp((c-f)/d):1-.5*i.exp(-(c-f)/d)},mean:function(l){return l},median:function(l){return l},mode:function(l){return l},variance:function(l,c){return 2*c*c},sample:function(c,f){var d=r._random_fn()-.5;return c-f*o(d)*i.log(1-2*i.abs(d))}});function a(l,c,f){var d=12,h=6,p=-30,m=-50,g=60,y=8,v=3,b=2,_=3,E=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],S=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],C=l*.5;if(C>=y)return 1;var A=2*r.normal.cdf(C,0,1,1,0)-1;A>=i.exp(m/f)?A=i.pow(A,f):A=0;var R;l>v?R=b:R=_;for(var k=C,N=(y-C)/R,L=k+N,O=0,B=f-1,q=1;q<=R;q++){for(var H=0,G=.5*(L+k),K=.5*(L-k),J=1;J<=d;J++){var F,j;h<J?(F=d-J+1,j=E[F-1]):(F=J,j=-E[F-1]);var W=K*j,M=G+W,V=M*M;if(V>g)break;var Q=2*r.normal.cdf(M,0,1,1,0),se=2*r.normal.cdf(M,l,1,1,0),be=Q*.5-se*.5;be>=i.exp(p/B)&&(be=S[F-1]*i.exp(-(.5*V))*i.pow(be,B),H+=be)}H*=2*K*f/i.sqrt(2*i.PI),O+=H,k=L,L+=N}return A+=O,A<=i.exp(p/c)?0:(A=i.pow(A,c),A>=1?1:A)}function u(l,c,f){var d=.322232421088,h=.099348462606,p=-1,m=.588581570495,g=-.342242088547,y=.531103462366,v=-.204231210125,b=.10353775285,_=-453642210148e-16,E=.0038560700634,S=.8832,C=.2368,A=1.208,R=1.4142,k=120,N=.5-.5*l,L=i.sqrt(i.log(1/(N*N))),O=L+((((L*_+v)*L+g)*L+p)*L+d)/((((L*E+b)*L+y)*L+m)*L+h);f<k&&(O+=(O*O*O+O)/f/4);var B=S-C*O;return f<k&&(B+=-1.214/f+A*O/f),O*(B*i.log(c-1)+R)}r.extend(r.tukey,{cdf:function(c,f,d){var h=1,p=f,m=16,g=8,y=-30,v=1e-14,b=100,_=800,E=5e3,S=25e3,C=1,A=.5,R=.25,k=.125,N=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],L=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(c<=0)return 0;if(d<2||h<1||p<2)return NaN;if(!Number.isFinite(c))return 1;if(d>S)return a(c,h,p);var O=d*.5,B=O*i.log(d)-d*i.log(2)-r.gammaln(O),q=O-1,H=d*.25,G;d<=b?G=C:d<=_?G=A:d<=E?G=R:G=k,B+=i.log(G);for(var K=0,J=1;J<=50;J++){for(var F=0,j=(2*J-1)*G,W=1;W<=m;W++){var M,V;g<W?(M=W-g-1,V=B+q*i.log(j+N[M]*G)-(N[M]*G+j)*H):(M=W-1,V=B+q*i.log(j-N[M]*G)+(N[M]*G-j)*H);var Q;if(V>=y){g<W?Q=c*i.sqrt((N[M]*G+j)*.5):Q=c*i.sqrt((-(N[M]*G)+j)*.5);var se=a(Q,h,p),be=se*L[M]*i.exp(V);F+=be}}if(J*G>=1&&F<=v)break;K+=F}if(F>v)throw new Error("tukey.cdf failed to converge");return K>1&&(K=1),K},inv:function(l,c,f){var d=1,h=c,p=1e-4,m=50;if(f<2||d<1||h<2)return NaN;if(l<0||l>1)return NaN;if(l===0)return 0;if(l===1)return 1/0;var g=u(l,h,f),y=r.tukey.cdf(g,c,f)-l,v;y>0?v=i.max(0,g-1):v=g+1;for(var b=r.tukey.cdf(v,c,f)-l,_,E=1;E<m;E++){_=v-b*(v-g)/(b-y),y=b,g=v,_<0&&(_=0,b=-l),b=r.tukey.cdf(_,c,f)-l,v=_;var S=i.abs(v-g);if(S<p)return _}throw new Error("tukey.inv failed to converge")}})}(n,Math),function(r,i){var s=Array.prototype.push,o=r.utils.isArray;function a(u){return o(u)||u instanceof r}r.extend({add:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.map(l,function(f,d,h){return f+c[d][h]})):r.map(l,function(f){return f+c})},subtract:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.map(l,function(f,d,h){return f-c[d][h]||0})):r.map(l,function(f){return f-c})},divide:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.multiply(l,r.inv(c))):r.map(l,function(f){return f/c})},multiply:function(l,c){var f,d,h,p,m,g,y,v;if(l.length===void 0&&c.length===void 0)return l*c;if(m=l.length,g=l[0].length,y=r.zeros(m,h=a(c)?c[0].length:g),v=0,a(c)){for(;v<h;v++)for(f=0;f<m;f++){for(p=0,d=0;d<g;d++)p+=l[f][d]*c[d][v];y[f][v]=p}return m===1&&v===1?y[0][0]:y}return r.map(l,function(b){return b*c})},outer:function(l,c){return r.multiply(l.map(function(f){return[f]}),[c])},dot:function(l,c){a(l[0])||(l=[l]),a(c[0])||(c=[c]);for(var f=l[0].length===1&&l.length!==1?r.transpose(l):l,d=c[0].length===1&&c.length!==1?r.transpose(c):c,h=[],p=0,m=f.length,g=f[0].length,y,v;p<m;p++){for(h[p]=[],y=0,v=0;v<g;v++)y+=f[p][v]*d[p][v];h[p]=y}return h.length===1?h[0]:h},pow:function(l,c){return r.map(l,function(f){return i.pow(f,c)})},exp:function(l){return r.map(l,function(c){return i.exp(c)})},log:function(l){return r.map(l,function(c){return i.log(c)})},abs:function(l){return r.map(l,function(c){return i.abs(c)})},norm:function(l,c){var f=0,d=0;for(isNaN(c)&&(c=2),a(l[0])&&(l=l[0]);d<l.length;d++)f+=i.pow(i.abs(l[d]),c);return i.pow(f,1/c)},angle:function(l,c){return i.acos(r.dot(l,c)/(r.norm(l)*r.norm(c)))},aug:function(l,c){var f=[],d;for(d=0;d<l.length;d++)f.push(l[d].slice());for(d=0;d<f.length;d++)s.apply(f[d],c[d]);return f},inv:function(l){for(var c=l.length,f=l[0].length,d=r.identity(c,f),h=r.gauss_jordan(l,d),p=[],m=0,g;m<c;m++)for(p[m]=[],g=f;g<h[0].length;g++)p[m][g-f]=h[m][g];return p},det:function u(l){if(l.length===2)return l[0][0]*l[1][1]-l[0][1]*l[1][0];for(var c=0,f=0;f<l.length;f++){for(var d=[],h=1;h<l.length;h++){d[h-1]=[];for(var p=0;p<l.length;p++)p<f?d[h-1][p]=l[h][p]:p>f&&(d[h-1][p-1]=l[h][p])}var m=f%2?-1:1;c+=u(d)*l[0][f]*m}return c},gauss_elimination:function(l,c){var f=0,d=0,h=l.length,p=l[0].length,m=1,g=0,y=[],v,b,_,E;for(l=r.aug(l,c),v=l[0].length,f=0;f<h;f++){for(b=l[f][f],d=f,E=f+1;E<p;E++)b<i.abs(l[E][f])&&(b=l[E][f],d=E);if(d!=f)for(E=0;E<v;E++)_=l[f][E],l[f][E]=l[d][E],l[d][E]=_;for(d=f+1;d<h;d++)for(m=l[d][f]/l[f][f],E=f;E<v;E++)l[d][E]=l[d][E]-m*l[f][E]}for(f=h-1;f>=0;f--){for(g=0,d=f+1;d<=h-1;d++)g=g+y[d]*l[f][d];y[f]=(l[f][v-1]-g)/l[f][f]}return y},gauss_jordan:function(l,c){var f=r.aug(l,c),d=f.length,h=f[0].length,p=0,m,g,y;for(g=0;g<d;g++){var v=g;for(y=g+1;y<d;y++)i.abs(f[y][g])>i.abs(f[v][g])&&(v=y);var b=f[g];for(f[g]=f[v],f[v]=b,y=g+1;y<d;y++)for(p=f[y][g]/f[g][g],m=g;m<h;m++)f[y][m]-=f[g][m]*p}for(g=d-1;g>=0;g--){for(p=f[g][g],y=0;y<g;y++)for(m=h-1;m>g-1;m--)f[y][m]-=f[g][m]*f[y][g]/p;for(f[g][g]/=p,m=d;m<h;m++)f[g][m]/=p}return f},triaUpSolve:function(l,c){var f=l[0].length,d=r.zeros(1,f)[0],h,p=!1;return c[0].length!=null&&(c=c.map(function(m){return m[0]}),p=!0),r.arange(f-1,-1,-1).forEach(function(m){h=r.arange(m+1,f).map(function(g){return d[g]*l[m][g]}),d[m]=(c[m]-r.sum(h))/l[m][m]}),p?d.map(function(m){return[m]}):d},triaLowSolve:function(l,c){var f=l[0].length,d=r.zeros(1,f)[0],h,p=!1;return c[0].length!=null&&(c=c.map(function(m){return m[0]}),p=!0),r.arange(f).forEach(function(m){h=r.arange(m).map(function(g){return l[m][g]*d[g]}),d[m]=(c[m]-r.sum(h))/l[m][m]}),p?d.map(function(m){return[m]}):d},lu:function(l){var c=l.length,f=r.identity(c),d=r.zeros(l.length,l[0].length),h;return r.arange(c).forEach(function(p){d[0][p]=l[0][p]}),r.arange(1,c).forEach(function(p){r.arange(p).forEach(function(m){h=r.arange(m).map(function(g){return f[p][g]*d[g][m]}),f[p][m]=(l[p][m]-r.sum(h))/d[m][m]}),r.arange(p,c).forEach(function(m){h=r.arange(p).map(function(g){return f[p][g]*d[g][m]}),d[p][m]=l[h.length][m]-r.sum(h)})}),[f,d]},cholesky:function(l){var c=l.length,f=r.zeros(l.length,l[0].length),d;return r.arange(c).forEach(function(h){d=r.arange(h).map(function(p){return i.pow(f[h][p],2)}),f[h][h]=i.sqrt(l[h][h]-r.sum(d)),r.arange(h+1,c).forEach(function(p){d=r.arange(h).map(function(m){return f[h][m]*f[p][m]}),f[p][h]=(l[h][p]-r.sum(d))/f[h][h]})}),f},gauss_jacobi:function(l,c,f,d){for(var h=0,p=0,m=l.length,g=[],y=[],v=[],b,_,E,S;h<m;h++)for(g[h]=[],y[h]=[],v[h]=[],p=0;p<m;p++)h>p?(g[h][p]=l[h][p],y[h][p]=v[h][p]=0):h<p?(y[h][p]=l[h][p],g[h][p]=v[h][p]=0):(v[h][p]=l[h][p],g[h][p]=y[h][p]=0);for(E=r.multiply(r.multiply(r.inv(v),r.add(g,y)),-1),_=r.multiply(r.inv(v),c),b=f,S=r.add(r.multiply(E,f),_),h=2;i.abs(r.norm(r.subtract(S,b)))>d;)b=S,S=r.add(r.multiply(E,b),_),h++;return S},gauss_seidel:function(l,c,f,d){for(var h=0,p=l.length,m=[],g=[],y=[],v,b,_,E,S;h<p;h++)for(m[h]=[],g[h]=[],y[h]=[],v=0;v<p;v++)h>v?(m[h][v]=l[h][v],g[h][v]=y[h][v]=0):h<v?(g[h][v]=l[h][v],m[h][v]=y[h][v]=0):(y[h][v]=l[h][v],m[h][v]=g[h][v]=0);for(E=r.multiply(r.multiply(r.inv(r.add(y,m)),g),-1),_=r.multiply(r.inv(r.add(y,m)),c),b=f,S=r.add(r.multiply(E,f),_),h=2;i.abs(r.norm(r.subtract(S,b)))>d;)b=S,S=r.add(r.multiply(E,b),_),h=h+1;return S},SOR:function(l,c,f,d,h){for(var p=0,m=l.length,g=[],y=[],v=[],b,_,E,S,C;p<m;p++)for(g[p]=[],y[p]=[],v[p]=[],b=0;b<m;b++)p>b?(g[p][b]=l[p][b],y[p][b]=v[p][b]=0):p<b?(y[p][b]=l[p][b],g[p][b]=v[p][b]=0):(v[p][b]=l[p][b],g[p][b]=y[p][b]=0);for(S=r.multiply(r.inv(r.add(v,r.multiply(g,h))),r.subtract(r.multiply(v,1-h),r.multiply(y,h))),E=r.multiply(r.multiply(r.inv(r.add(v,r.multiply(g,h))),c),h),_=f,C=r.add(r.multiply(S,f),E),p=2;i.abs(r.norm(r.subtract(C,_)))>d;)_=C,C=r.add(r.multiply(S,_),E),p++;return C},householder:function(l){for(var c=l.length,f=l[0].length,d=0,h=[],p=[],m,g,y,v,b;d<c-1;d++){for(m=0,v=d+1;v<f;v++)m+=l[v][d]*l[v][d];for(b=l[d+1][d]>0?-1:1,m=b*i.sqrt(m),g=i.sqrt((m*m-l[d+1][d]*m)/2),h=r.zeros(c,1),h[d+1][0]=(l[d+1][d]-m)/(2*g),y=d+2;y<c;y++)h[y][0]=l[y][d]/(2*g);p=r.subtract(r.identity(c,f),r.multiply(r.multiply(h,r.transpose(h)),2)),l=r.multiply(p,r.multiply(l,p))}return l},QR:function(){var u=r.sum,l=r.arange;function c(f){var d=f.length,h=f[0].length,p=r.zeros(h,h);f=r.copy(f);var m,g,y;for(g=0;g<h;g++){for(p[g][g]=i.sqrt(u(l(d).map(function(v){return f[v][g]*f[v][g]}))),m=0;m<d;m++)f[m][g]=f[m][g]/p[g][g];for(y=g+1;y<h;y++)for(p[g][y]=u(l(d).map(function(v){return f[v][g]*f[v][y]})),m=0;m<d;m++)f[m][y]=f[m][y]-f[m][g]*p[g][y]}return[f,p]}return c}(),lstsq:function(){function u(c){c=r.copy(c);var f=c.length,d=r.identity(f);return r.arange(f-1,-1,-1).forEach(function(h){r.sliceAssign(d,{row:h},r.divide(r.slice(d,{row:h}),c[h][h])),r.sliceAssign(c,{row:h},r.divide(r.slice(c,{row:h}),c[h][h])),r.arange(h).forEach(function(p){var m=r.multiply(c[p][h],-1),g=r.slice(c,{row:p}),y=r.multiply(r.slice(c,{row:h}),m);r.sliceAssign(c,{row:p},r.add(g,y));var v=r.slice(d,{row:p}),b=r.multiply(r.slice(d,{row:h}),m);r.sliceAssign(d,{row:p},r.add(v,b))})}),d}function l(c,f){var d=!1;f[0].length===void 0&&(f=f.map(function(S){return[S]}),d=!0);var h=r.QR(c),p=h[0],m=h[1],g=c[0].length,y=r.slice(p,{col:{end:g}}),v=r.slice(m,{row:{end:g}}),b=u(v),_=r.transpose(y);_[0].length===void 0&&(_=[_]);var E=r.multiply(r.multiply(b,_),f);return E.length===void 0&&(E=[[E]]),d?E.map(function(S){return S[0]}):E}return l}(),jacobi:function(l){for(var c=1,f=l.length,d=r.identity(f,f),h=[],p,m,g,y,v,b,_,E;c===1;){for(b=l[0][1],y=0,v=1,m=0;m<f;m++)for(g=0;g<f;g++)m!=g&&b<i.abs(l[m][g])&&(b=i.abs(l[m][g]),y=m,v=g);for(l[y][y]===l[v][v]?_=l[y][v]>0?i.PI/4:-i.PI/4:_=i.atan(2*l[y][v]/(l[y][y]-l[v][v]))/2,E=r.identity(f,f),E[y][y]=i.cos(_),E[y][v]=-i.sin(_),E[v][y]=i.sin(_),E[v][v]=i.cos(_),d=r.multiply(d,E),p=r.multiply(r.multiply(r.inv(E),l),E),l=p,c=0,m=1;m<f;m++)for(g=1;g<f;g++)m!=g&&i.abs(l[m][g])>.001&&(c=1)}for(m=0;m<f;m++)h.push(l[m][m]);return[d,h]},rungekutta:function(l,c,f,d,h,p){var m,g,y,v,b;if(p===2)for(;d<=f;)m=c*l(d,h),g=c*l(d+c,h+m),y=h+(m+g)/2,h=y,d=d+c;if(p===4)for(;d<=f;)m=c*l(d,h),g=c*l(d+c/2,h+m/2),v=c*l(d+c/2,h+g/2),b=c*l(d+c,h+v),y=h+(m+2*g+2*v+b)/6,h=y,d=d+c;return h},romberg:function(l,c,f,d){for(var h=0,p=(f-c)/2,m=[],g=[],y=[],v,b,_,E,S;h<d/2;){for(S=l(c),_=c,E=0;_<=f;_=_+p,E++)m[E]=_;for(v=m.length,_=1;_<v-1;_++)S+=(_%2!==0?4:2)*l(m[_]);S=p/3*(S+l(f)),y[h]=S,p/=2,h++}for(b=y.length,v=1;b!==1;){for(_=0;_<b-1;_++)g[_]=(i.pow(4,v)*y[_+1]-y[_])/(i.pow(4,v)-1);b=g.length,y=g,g=[],v++}return y},richardson:function(l,c,f,d){function h(C,A){for(var R=0,k=C.length,N;R<k;R++)C[R]===A&&(N=R);return N}for(var p=i.abs(f-l[h(l,f)+1]),m=0,g=[],y=[],v,b,_,E,S;d>=p;)v=h(l,f+d),b=h(l,f),g[m]=(c[v]-2*c[b]+c[2*b-v])/(d*d),d/=2,m++;for(E=g.length,_=1;E!=1;){for(S=0;S<E-1;S++)y[S]=(i.pow(4,_)*g[S+1]-g[S])/(i.pow(4,_)-1);E=y.length,g=y,y=[],_++}return g},simpson:function(l,c,f,d){for(var h=(f-c)/d,p=l(c),m=[],g=c,y=0,v=1,b;g<=f;g=g+h,y++)m[y]=g;for(b=m.length;v<b-1;v++)p+=(v%2!==0?4:2)*l(m[v]);return h/3*(p+l(f))},hermite:function(l,c,f,d){for(var h=l.length,p=0,m=0,g=[],y=[],v=[],b=[],_;m<h;m++){for(g[m]=1,_=0;_<h;_++)m!=_&&(g[m]*=(d-l[_])/(l[m]-l[_]));for(y[m]=0,_=0;_<h;_++)m!=_&&(y[m]+=1/(l[m]-l[_]));v[m]=(1-2*(d-l[m])*y[m])*(g[m]*g[m]),b[m]=(d-l[m])*(g[m]*g[m]),p+=v[m]*c[m]+b[m]*f[m]}return p},lagrange:function(l,c,f){for(var d=0,h=0,p,m,g=l.length;h<g;h++){for(m=c[h],p=0;p<g;p++)h!=p&&(m*=(f-l[p])/(l[h]-l[p]));d+=m}return d},cubic_spline:function(l,c,f){for(var d=l.length,h=0,p,m=[],g=[],y=[],v=[],b=[],_=[],E=[];h<d-1;h++)b[h]=l[h+1]-l[h];for(y[0]=0,h=1;h<d-1;h++)y[h]=3/b[h]*(c[h+1]-c[h])-3/b[h-1]*(c[h]-c[h-1]);for(h=1;h<d-1;h++)m[h]=[],g[h]=[],m[h][h-1]=b[h-1],m[h][h]=2*(b[h-1]+b[h]),m[h][h+1]=b[h],g[h][0]=y[h];for(v=r.multiply(r.inv(m),g),p=0;p<d-1;p++)_[p]=(c[p+1]-c[p])/b[p]-b[p]*(v[p+1][0]+2*v[p][0])/3,E[p]=(v[p+1][0]-v[p][0])/(3*b[p]);for(p=0;p<d&&!(l[p]>f);p++);return p-=1,c[p]+(f-l[p])*_[p]+r.sq(f-l[p])*v[p]+(f-l[p])*r.sq(f-l[p])*E[p]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(l){var c=l.length,f=l[0].length,d=0,h,p,m=[],g=[],y=[],v=[],b=[],_=[],E=[],S=[],C=[],A=[];for(d=0;d<c;d++)m[d]=r.sum(l[d])/f;for(d=0;d<f;d++)for(E[d]=[],h=0;h<c;h++)E[d][h]=l[h][d]-m[h];for(E=r.transpose(E),d=0;d<c;d++)for(S[d]=[],h=0;h<c;h++)S[d][h]=r.dot([E[d]],[E[h]])/(f-1);for(y=r.jacobi(S),C=y[0],g=y[1],A=r.transpose(C),d=0;d<g.length;d++)for(h=d;h<g.length;h++)g[d]<g[h]&&(p=g[d],g[d]=g[h],g[h]=p,v=A[d],A[d]=A[h],A[h]=v);for(_=r.transpose(E),d=0;d<c;d++)for(b[d]=[],h=0;h<_.length;h++)b[d][h]=r.dot([A[d]],[_[h]]);return[l,g,A,b]}}),function(u){for(var l=0;l<u.length;l++)(function(c){r.fn[c]=function(f,d){var h=this;return d?(setTimeout(function(){d.call(h,r.fn[c].call(h,f))},15),this):typeof r[c](this,f)=="number"?r[c](this,f):r(r[c](this,f))}})(u[l])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(n,Math),function(r,i){var s=[].slice,o=r.utils.isNumber,a=r.utils.isArray;r.extend({zscore:function(){var c=s.call(arguments);return o(c[1])?(c[0]-c[1])/c[2]:(c[0]-r.mean(c[1]))/r.stdev(c[1],c[2])},ztest:function(){var c=s.call(arguments),f;return a(c[1])?(f=r.zscore(c[0],c[1],c[3]),c[2]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2):c.length>2?(f=r.zscore(c[0],c[1],c[2]),c[3]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2):(f=c[0],c[1]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2)}}),r.extend(r.fn,{zscore:function(c,f){return(c-this.mean())/this.stdev(f)},ztest:function(c,f,d){var h=i.abs(this.zscore(c,d));return f===1?r.normal.cdf(-h,0,1):r.normal.cdf(-h,0,1)*2}}),r.extend({tscore:function(){var c=s.call(arguments);return c.length===4?(c[0]-c[1])/(c[2]/i.sqrt(c[3])):(c[0]-r.mean(c[1]))/(r.stdev(c[1],!0)/i.sqrt(c[1].length))},ttest:function(){var c=s.call(arguments),f;return c.length===5?(f=i.abs(r.tscore(c[0],c[1],c[2],c[3])),c[4]===1?r.studentt.cdf(-f,c[3]-1):r.studentt.cdf(-f,c[3]-1)*2):o(c[1])?(f=i.abs(c[0]),c[2]==1?r.studentt.cdf(-f,c[1]-1):r.studentt.cdf(-f,c[1]-1)*2):(f=i.abs(r.tscore(c[0],c[1])),c[2]==1?r.studentt.cdf(-f,c[1].length-1):r.studentt.cdf(-f,c[1].length-1)*2)}}),r.extend(r.fn,{tscore:function(c){return(c-this.mean())/(this.stdev(!0)/i.sqrt(this.cols()))},ttest:function(c,f){return f===1?1-r.studentt.cdf(i.abs(this.tscore(c)),this.cols()-1):r.studentt.cdf(-i.abs(this.tscore(c)),this.cols()-1)*2}}),r.extend({anovafscore:function(){var c=s.call(arguments),f,d,h,p,m,g,y,v;if(c.length===1){for(m=new Array(c[0].length),y=0;y<c[0].length;y++)m[y]=c[0][y];c=m}for(d=new Array,y=0;y<c.length;y++)d=d.concat(c[y]);for(h=r.mean(d),f=0,y=0;y<c.length;y++)f=f+c[y].length*i.pow(r.mean(c[y])-h,2);for(f/=c.length-1,g=0,y=0;y<c.length;y++)for(p=r.mean(c[y]),v=0;v<c[y].length;v++)g+=i.pow(c[y][v]-p,2);return g/=d.length-c.length,f/g},anovaftest:function(){var c=s.call(arguments),f,d,h,p;if(o(c[0]))return 1-r.centralF.cdf(c[0],c[1],c[2]);var m=r.anovafscore(c);for(f=c.length-1,h=0,p=0;p<c.length;p++)h=h+c[p].length;return d=h-f-1,1-r.centralF.cdf(m,f,d)},ftest:function(c,f,d){return 1-r.centralF.cdf(c,f,d)}}),r.extend(r.fn,{anovafscore:function(){return r.anovafscore(this.toArray())},anovaftes:function(){var c=0,f;for(f=0;f<this.length;f++)c=c+this[f].length;return r.ftest(this.anovafscore(),this.length-1,c-this.length)}}),r.extend({qscore:function(){var c=s.call(arguments),f,d,h,p,m;return o(c[0])?(f=c[0],d=c[1],h=c[2],p=c[3],m=c[4]):(f=r.mean(c[0]),d=r.mean(c[1]),h=c[0].length,p=c[1].length,m=c[2]),i.abs(f-d)/(m*i.sqrt((1/h+1/p)/2))},qtest:function(){var c=s.call(arguments),f;c.length===3?(f=c[0],c=c.slice(1)):c.length===7?(f=r.qscore(c[0],c[1],c[2],c[3],c[4]),c=c.slice(5)):(f=r.qscore(c[0],c[1],c[2]),c=c.slice(3));var d=c[0],h=c[1];return 1-r.tukey.cdf(f,h,d-h)},tukeyhsd:function(c){for(var f=r.pooledstdev(c),d=c.map(function(v){return r.mean(v)}),h=c.reduce(function(v,b){return v+b.length},0),p=[],m=0;m<c.length;++m)for(var g=m+1;g<c.length;++g){var y=r.qtest(d[m],d[g],c[m].length,c[g].length,f,h,c.length);p.push([[m,g],y])}return p}}),r.extend({normalci:function(){var c=s.call(arguments),f=new Array(2),d;return c.length===4?d=i.abs(r.normal.inv(c[1]/2,0,1)*c[2]/i.sqrt(c[3])):d=i.abs(r.normal.inv(c[1]/2,0,1)*r.stdev(c[2])/i.sqrt(c[2].length)),f[0]=c[0]-d,f[1]=c[0]+d,f},tci:function(){var c=s.call(arguments),f=new Array(2),d;return c.length===4?d=i.abs(r.studentt.inv(c[1]/2,c[3]-1)*c[2]/i.sqrt(c[3])):d=i.abs(r.studentt.inv(c[1]/2,c[2].length-1)*r.stdev(c[2],!0)/i.sqrt(c[2].length)),f[0]=c[0]-d,f[1]=c[0]+d,f},significant:function(c,f){return c<f}}),r.extend(r.fn,{normalci:function(c,f){return r.normalci(c,f,this.toArray())},tci:function(c,f){return r.tci(c,f,this.toArray())}});function u(l,c,f,d){if(l>1||f>1||l<=0||f<=0)throw new Error("Proportions should be greater than 0 and less than 1");var h=(l*c+f*d)/(c+d),p=i.sqrt(h*(1-h)*(1/c+1/d));return(l-f)/p}r.extend(r.fn,{oneSidedDifferenceOfProportions:function(c,f,d,h){var p=u(c,f,d,h);return r.ztest(p,1)},twoSidedDifferenceOfProportions:function(c,f,d,h){var p=u(c,f,d,h);return r.ztest(p,2)}})}(n,Math),n.models=function(){function r(u){var l=u[0].length,c=n.arange(l).map(function(f){var d=n.arange(l).filter(function(h){return h!==f});return i(n.col(u,f).map(function(h){return h[0]}),n.col(u,d))});return c}function i(u,l){var c=u.length,f=l[0].length-1,d=c-f-1,h=n.lstsq(l,u),p=n.multiply(l,h.map(function(E){return[E]})).map(function(E){return E[0]}),m=n.subtract(u,p),g=n.mean(u),y=n.sum(p.map(function(E){return Math.pow(E-g,2)})),v=n.sum(u.map(function(E,S){return Math.pow(E-p[S],2)})),b=y+v,_=y/b;return{exog:l,endog:u,nobs:c,df_model:f,df_resid:d,coef:h,predict:p,resid:m,ybar:g,SST:b,SSE:y,SSR:v,R2:_}}function s(u){var l=r(u.exog),c=Math.sqrt(u.SSR/u.df_resid),f=l.map(function(g){var y=g.SST,v=g.R2;return c/Math.sqrt(y*(1-v))}),d=u.coef.map(function(g,y){return(g-0)/f[y]}),h=d.map(function(g){var y=n.studentt.cdf(g,u.df_resid);return(y>.5?1-y:y)*2}),p=n.studentt.inv(.975,u.df_resid),m=u.coef.map(function(g,y){var v=p*f[y];return[g-v,g+v]});return{se:f,t:d,p:h,sigmaHat:c,interval95:m}}function o(u){var l=u.R2/u.df_model/((1-u.R2)/u.df_resid),c=function(d,h,p){return n.beta.cdf(d/(p/h+d),h/2,p/2)},f=1-c(l,u.df_model,u.df_resid);return{F_statistic:l,pvalue:f}}function a(u,l){var c=i(u,l),f=s(c),d=o(c),h=1-(1-c.R2)*((c.nobs-1)/c.df_resid);return c.t=f,c.f=d,c.adjust_R2=h,c}return{ols:a}}(),n.extend({buildxmatrix:function(){for(var i=new Array(arguments.length),s=0;s<arguments.length;s++){var o=[1];i[s]=o.concat(arguments[s])}return n(i)},builddxmatrix:function(){for(var i=new Array(arguments[0].length),s=0;s<arguments[0].length;s++){var o=[1];i[s]=o.concat(arguments[0][s])}return n(i)},buildjxmatrix:function(i){for(var s=new Array(i.length),o=0;o<i.length;o++)s[o]=i[o];return n.builddxmatrix(s)},buildymatrix:function(i){return n(i).transpose()},buildjymatrix:function(i){return i.transpose()},matrixmult:function(i,s){var o,a,u,l,c;if(i.cols()==s.rows()){if(s.rows()>1){for(l=[],o=0;o<i.rows();o++)for(l[o]=[],a=0;a<s.cols();a++){for(c=0,u=0;u<i.cols();u++)c+=i.toArray()[o][u]*s.toArray()[u][a];l[o][a]=c}return n(l)}for(l=[],o=0;o<i.rows();o++)for(l[o]=[],a=0;a<s.cols();a++){for(c=0,u=0;u<i.cols();u++)c+=i.toArray()[o][u]*s.toArray()[a];l[o][a]=c}return n(l)}},regress:function(i,s){var o=n.xtranspxinv(i),a=i.transpose(),u=n.matrixmult(n(o),a);return n.matrixmult(u,s)},regresst:function(i,s,o){var a=n.regress(i,s),u={};u.anova={};var l=n.jMatYBar(i,a);u.yBar=l;var c=s.mean();u.anova.residuals=n.residuals(s,l),u.anova.ssr=n.ssr(l,c),u.anova.msr=u.anova.ssr/(i[0].length-1),u.anova.sse=n.sse(s,l),u.anova.mse=u.anova.sse/(s.length-(i[0].length-1)-1),u.anova.sst=n.sst(s,c),u.anova.mst=u.anova.sst/(s.length-1),u.anova.r2=1-u.anova.sse/u.anova.sst,u.anova.r2<0&&(u.anova.r2=0),u.anova.fratio=u.anova.msr/u.anova.mse,u.anova.pvalue=n.anovaftest(u.anova.fratio,i[0].length-1,s.length-(i[0].length-1)-1),u.anova.rmse=Math.sqrt(u.anova.mse),u.anova.r2adj=1-u.anova.mse/u.anova.mst,u.anova.r2adj<0&&(u.anova.r2adj=0),u.stats=new Array(i[0].length);for(var f=n.xtranspxinv(i),d,h,p,m=0;m<a.length;m++)d=Math.sqrt(u.anova.mse*Math.abs(f[m][m])),h=Math.abs(a[m]/d),p=n.ttest(h,s.length-i[0].length-1,o),u.stats[m]=[a[m],d,h,p];return u.regress=a,u},xtranspx:function(i){return n.matrixmult(i.transpose(),i)},xtranspxinv:function(i){var s=n.matrixmult(i.transpose(),i),o=n.inv(s);return o},jMatYBar:function(i,s){var o=n.matrixmult(i,s);return new n(o)},residuals:function(i,s){return n.matrixsubtract(i,s)},ssr:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s,2);return o},sse:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s[a],2);return o},sst:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s,2);return o},matrixsubtract:function(i,s){for(var o=new Array(i.length),a=0;a<i.length;a++){o[a]=new Array(i[a].length);for(var u=0;u<i[a].length;u++)o[a][u]=i[a][u]-s[a][u]}return n(o)}}),n.jStat=n,n})})(G6e);var vLt=G6e.exports;const LT=zh(vLt);function hL(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");const o=(e-n)/r,a=LT.studentt.pdf(o,i),u=s*o*Math.sqrt((i+1)/(i+o*o)),l=LT.studentt.cdf(u,i+1);return 2/r*a*l}function Y6e(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");if(!Number.isFinite(e))return e>0?1:0;if(Math.abs(s)<1e-10){const d=(e-n)/r;return LT.studentt.cdf(d,i)}if(Math.abs(e-n)<1e-10)return .5;const o=(e-n)/r;if(o<-100)return 0;if(o>100)return 1;const a=Math.min(n-10*r,e-.1),u=1e3,l=(e-a)/u;let c=0,f=hL(a,t);for(let d=1;d<=u;d+=1){const h=a+d*l,p=hL(h,t);c+=(f+p)*.5*l,f=p}return Math.max(0,Math.min(1,c))}function K6e(e,t=[-5,5],n=.01){const{xi:r,omega:i,nu:s,alpha:o}=e;if(i<=0||s<=0)throw new Error("Scale parameter omega and degrees of freedom nu must be positive");const a=[],u=Math.floor(t[0]/n)*n,l=Math.ceil(t[1]/n)*n;for(let d=u;d<=l;d+=n){const h=Number(d.toFixed(10));a.push(h)}const c=a.map(d=>{try{return hL(d,e)}catch(h){return console.warn(`Error calculating PDF at x=${d}:`,h),0}}),f=a.map(d=>{try{return Y6e(d,e)}catch(h){console.warn(`Error calculating CDF at x=${d}:`,h);const p=(d-r)/i;return p<0?.5*(1+Math.tanh(p)):.5+.5*(1-Math.exp(-p))}});return{xVals:a,pdfVals:c,cdfVals:f}}function bLt(e,t){let n=0,r=e.xVals.length-1;const i=e.xVals.findIndex(u=>Math.abs(u-t)<1e-10);if(i>=0)return{pdf:e.pdfVals[i],cdf:e.cdfVals[i]};for(;n<=r;){const u=Math.floor((n+r)/2);e.xVals[u]<t?n=u+1:r=u-1}if(r=Math.max(0,r),n=Math.min(e.xVals.length-1,n),r>=n)return{pdf:e.pdfVals[n],cdf:e.cdfVals[n]};const s=(t-e.xVals[r])/(e.xVals[n]-e.xVals[r]),o=e.pdfVals[r]*(1-s)+e.pdfVals[n]*s,a=e.cdfVals[r]*(1-s)+e.cdfVals[n]*s;return{pdf:o,cdf:a}}const xLt=Object.freeze(Object.defineProperty({__proto__:null,findDistributionValue:bLt,generateDistributionData:K6e,skewTCDF:Y6e,skewTPDF:hL},Symbol.toStringTag,{value:"Module"}));function X6e({distributionData:e,showPDF:t,xScale:n,yScale:r,setSelectedPoint:i,setNearestPoint:s,setCursor:o,setAnswer:a,curveProximityThreshold:u=50}){const l=P.useCallback((p,m)=>{if(!e)return null;const g=t?e.pdfVals:e.cdfVals,y=n.invert(p);r.invert(m);const v=wh(k=>k).left,b=v(e.xVals,y);if(b<=0)return{x:e.xVals[0],y:g[0]};if(b>=e.xVals.length){const k=e.xVals.length-1;return{x:e.xVals[k],y:g[k]}}const _=e.xVals[b-1],E=e.xVals[b],S=g[b-1],C=g[b];return Math.abs(y-_)>Math.abs(y-E)?{x:E,y:C}:{x:_,y:S}},[e,t,n,r]),c=P.useCallback((p,m)=>{const g=l(p,m);if(!g)return!1;const y=n(g.x),v=r(g.y);return Math.sqrt((p-y)**2+(m-v)**2)<u},[u,l,n,r]),f=P.useCallback(p=>{if(!e)return;const g=p.currentTarget.getBoundingClientRect(),y=p.clientX-g.left,v=p.clientY-g.top,b=c(y,v);if(o({x:y,y:v,isNearCurve:b}),b){const _=l(y,v);s(_)}else s(null)},[e,o,c,l,s]),d=P.useCallback(p=>{if(!e)return;const g=p.currentTarget.getBoundingClientRect(),y=p.clientX-g.left,v=p.clientY-g.top;if(c(y,v)){const _=l(y,v);_?(i(_),a({status:!0,answers:{"location-x":_.x,"location-y":_.y}})):a({status:!1,answers:{"location-x":null,"location-y":null}})}},[e,l,i,a,c]);return{handleMouseLeave:P.useCallback(()=>{o(null),s(null)},[o,s]),handleClick:d,handleMouseMove:f,findClosestPoint:l,isCursorNearCurve:c}}const _Lt=Object.freeze(Object.defineProperty({__proto__:null,useChartInteractions:X6e},Symbol.toStringTag,{value:"Module"})),sV={height:450,width:600,margin:{top:15,right:15,left:50,bottom:40}};function wLt(){return{xi:Math.random()*8-4,omega:.2+Math.random()*2.3,nu:3+Math.floor(Math.random()*15),alpha:Math.random()*8-4}}function ELt({distributionData:e,showPDF:t,training:n,taskType:r,cursor:i,setCursor:s,selectedPoint:o,setSelectedPoint:a,setAnswer:u,currentParams:l}){const{xScale:c,yScale:f}=iw(),[d,h]=P.useState(null),{handleMouseMove:p,handleClick:m,handleMouseLeave:g,findClosestPoint:y}=X6e({distributionData:e,showPDF:t,xScale:c,yScale:f,setSelectedPoint:a,setCursor:s,setNearestPoint:h,setAnswer:b=>{u({status:b.status,answers:{...b.answers,currentParams:l}})}}),v=P.useMemo(()=>{if(!n)return{x:null,y:null,tangentLine:null};if(!o&&(!i||!i.isNearCurve))return{x:null,y:null,tangentLine:null};const b=i!=null&&i.isNearCurve?d:o;if(!b)return{x:null,y:null,tangentLine:null};const _=wh(E=>E).left(e.xVals,b.x);switch(r){case"pdf_median":return b?(_>0&&_<e.pdfVals.length-1&&(e.pdfVals[_+1]-e.pdfVals[_-1])/(e.xVals[_+1]-e.xVals[_-1]),{x:b.x,y:null,tangentLine:null}):{x:null,y:null,tangentLine:null};case"pdf_mode":return{x:null,y:b.y,tangentLine:null};case"cdf_median":return{x:null,y:.5,tangentLine:null};case"cdf_mode":return{x:null,y:null,tangentLine:{point:b,slope:(e.cdfVals[_+1]-e.cdfVals[_-1])/(e.xVals[_+1]-e.xVals[_-1])}};default:return{x:null,y:null,tangentLine:null}}},[i,o,n,r,e,d]);return w.jsx(W6e,{distributionData:e,isTraining:n,showPDF:t,onClick:m,onMouseMove:p,onMouseLeave:g,cursor:i,selectedPoint:o,nearestPoint:d,guidelines:v,axisLabels:{x:"Value",y:t?"Density":"Cumulative Probability"}})}function TLt({parameters:e,setAnswer:t}){const{params:n,showPDF:r,training:i,taskType:s}=e,[o,a]=P.useState(()=>n||wLt()),[u,l]=P.useState(null),[c,f]=P.useState(null),[d,h]=P.useState(null),p=P.useMemo(()=>K6e(o),[o]);P.useMemo(()=>[p.xVals[0],p.xVals[p.xVals.length-1]],[p]);const m=P.useCallback(()=>{f(null),t({status:!1,answers:{"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha}})},[t,o]),g=P.useCallback(y=>{h(y.answers);const v={...y.answers,"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha};t({status:y.status,answers:v})},[t,o]);return P.useEffect(()=>{t({status:!1,answers:{"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha}})},[o,t]),w.jsx(fl,{p:"md",children:w.jsxs("div",{className:"mt-4",children:[w.jsx(j6e,{width:sV.width,height:sV.height,margin:sV.margin,xDomain:[-5,5],yDomain:[0,1],children:w.jsx(ELt,{distributionData:p,showPDF:r,training:i,taskType:s,cursor:u,setCursor:l,selectedPoint:c,setSelectedPoint:f,setAnswer:g,currentParams:o})}),w.jsx(on,{onClick:m,mt:"md",children:"Clear Point"}),w.jsx(Eu,{h:"xl"}),w.jsxs(ze,{size:"md",c:"dimmed",children:["Debug - Random Parameters: xi=",o.xi.toFixed(2),", omega=",o.omega.toFixed(2),", nu=",o.nu,", alpha=",o.alpha.toFixed(2)]})]})})}const SLt=Object.freeze(Object.defineProperty({__proto__:null,default:TLt},Symbol.toStringTag,{value:"Module"}));var Q6e=(e=>(e.PDF_MEDIAN="pdf_median",e.PDF_MODE="pdf_mode",e.CDF_MEDIAN="cdf_median",e.CDF_MODE="cdf_mode",e))(Q6e||{});const CLt=Object.freeze(Object.defineProperty({__proto__:null,TaskType:Q6e},Symbol.toStringTag,{value:"Module"})),ALt=e=>e*Math.PI/180;function ILt({parameters:e,setAnswer:t}){var _;const n=P.useRef(null),r=P.useRef(null),i=P.useRef(null),{blindspotAngle:s}=e,o=Xr(E=>E.answers),a=Number((_=o.calibration_3.answer)==null?void 0:_.pixelsPerMM),[u,l]=P.useState([]),[c,f]=P.useState(!1),[d,h]=P.useState(null),[p,m]=P.useState(5),g=P.useCallback(E=>{if(!E.length||!a||!r.current)return;const S=E.reduce((N,L)=>N+L,0)/E.length,A=r.current.getBoundingClientRect().left,k=Math.abs(S-A)/a/Math.tan(ALt(s));h(k),f(!1)},[s,a]),y=()=>{n.current&&(n.current.style.left="740px")},v=P.useCallback(()=>{if(!n.current||!r.current||!a||u.length>=5)return;f(!0);let E=!1,S=0;const C=1e3,A=R=>{if(!n.current)return;if(E){R-S>=C&&(E=!1,n.current.style.left="740px"),i.current=requestAnimationFrame(A);return}const N=parseInt(n.current.style.left||"740",10)-2;N<=0?(E=!0,S=R):n.current.style.left=`${N}px`,i.current=requestAnimationFrame(A)};i.current=requestAnimationFrame(A)},[u,a]),b=()=>{i.current&&cancelAnimationFrame(i.current),f(!1)};return P.useEffect(()=>{d!==null&&u.length===5&&t({status:!0,answers:{"dist-calibration-MM":d,"dist-calibration-CM":d/10,"ball-positions":JSON.stringify(u)}})},[d,u,t]),P.useEffect(()=>{const E=S=>{if(S.code==="Space"){if(S.preventDefault(),!c)v();else if(n.current){b();const A=n.current.getBoundingClientRect().left;l(R=>{const k=[...R,A];return k.length>=5&&g(k),k}),m(R=>R-1),y()}}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[c,v,g]),P.useEffect(()=>(h(null),f(!1),l([]),m(5),y(),()=>{h(null),f(!1),l([]),m(5)}),[]),P.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),a?w.jsx(fl,{size:"md",children:w.jsxs(qi,{gap:"md",children:[w.jsx(ze,{children:"Now we will quickly measure how far away you are sitting. "}),w.jsxs(qi,{gap:"xs",children:[w.jsxs(io,{children:[w.jsxs(io.Item,{children:["Put your left hand on the ",w.jsx("b",{children:"space bar"}),"."]}),w.jsx(io.Item,{children:"Cover your right eye with your right hand."}),w.jsx(io.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),w.jsxs(io.Item,{children:["The ",w.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),w.jsx(ze,{ta:"center",children:u.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),w.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[w.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),w.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),w.jsxs(ze,{ta:"center",children:["Remaining measurements: ",5-u.length]}),d&&w.jsxs(qi,{gap:"xs",children:[w.jsx(ze,{fw:700,size:"lg",children:"Viewing Distance Results"}),w.jsxs(ze,{children:["Estimated Viewing Distance: ",(d/10).toFixed(1)," cm"]}),w.jsxs(ze,{children:["Number of measurements: ",u.length]})]})]})}):w.jsx("div",{children:"Please complete card calibration first."})}const kLt=Object.freeze(Object.defineProperty({__proto__:null,default:ILt},Symbol.toStringTag,{value:"Module"})),RLt="/vis-decode/assets/costco_card-B3j7PHjO.png";function PLt({parameters:e,setAnswer:t,itemWidthMM:n=85.6,itemHeightMM:r=53.98,fixedCorner:i="top-left"}){const[s,o]=P.useState(300),[a,u]=P.useState(null),[l,c]=P.useState(!1),[f,d]=P.useState({min:100,max:500}),{taskid:h}=e,p=P.useRef(null),m=P.useRef(null),g=r/n;P.useEffect(()=>{const S=()=>{const C=window.innerWidth;d({min:Math.round(C*.1),max:Math.round(C*.8)})};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const y=S=>Math.round(S*g),v=S=>S/n,b=S=>{o(S)},_=()=>{if(!p.current)return;const S=v(s);u(S),t({status:!0,answers:{[h]:S}}),c(!0)},E=()=>({position:"relative",width:"100%",height:`${y(f.max)}px`,display:"flex",justifyContent:i.includes("right")?"flex-end":"flex-start",alignItems:i.includes("bottom")?"flex-end":"flex-start"});return w.jsx(fl,{size:"md",children:w.jsxs(qi,{gap:"lg",children:[w.jsx(ze,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),w.jsx(ze,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),w.jsx(ze,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),w.jsx(ze,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),w.jsx(on,{onClick:_,size:"lg",variant:"transparent",children:"Confirm Size"}),w.jsx(z_,{min:f.min,max:f.max,value:s,label:null,onChange:b,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),w.jsx("div",{ref:m,style:E(),children:w.jsx("div",{ref:p,style:{width:`${s}px`,height:`${y(s)}px`,overflow:"hidden"},children:w.jsx("img",{src:RLt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})})}),l&&w.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",a==null?void 0:a.toFixed(2)]})]})})}const DLt=Object.freeze(Object.defineProperty({__proto__:null,default:PLt},Symbol.toStringTag,{value:"Module"})),NLt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),J6e=P.createContext(null);function Z6e({width:e,height:t,margin:n,xDomain:r,yDomain:i,children:s}){const o=P.useMemo(()=>{const a=va().domain(r).range([n.left,e-n.right]),u=va().domain(i).range([t-n.bottom,n.top]);return{xScale:a,yScale:u,width:e,height:t,margin:n}},[e,t,n,r,i]);return w.jsx(J6e.Provider,{value:o,children:s})}function sC(){const e=P.useContext(J6e);if(!e)throw new Error("useScales must be used within a ScalesProvider");return e}const OLt=Object.freeze(Object.defineProperty({__proto__:null,ScalesProvider:Z6e,useScales:sC},Symbol.toStringTag,{value:"Module"}));function e$e({data:e,strokeColor:t="currentColor",strokeWidth:n=2}){const{xScale:r,yScale:i}=sC(),s=m8().x(o=>r(o.x)).y(o=>i(o.y));return w.jsx("path",{d:s(e)||"",fill:"none",stroke:t,strokeWidth:n,"data-source":"Line"})}const $Lt=Object.freeze(Object.defineProperty({__proto__:null,default:e$e},Symbol.toStringTag,{value:"Module"}));function t$e({point:e}){const{xScale:t,yScale:n}=sC();return e?w.jsx("circle",{cx:t(e.x),cy:n(e.y),r:4,fill:"#ff0000",pointerEvents:"none","data-source":"ClickMarker"}):null}const LLt=Object.freeze(Object.defineProperty({__proto__:null,default:t$e},Symbol.toStringTag,{value:"Module"}));function n$e({xValue:e,yValue:t,tangentLine:n}){const{xScale:r,yScale:i,width:s,height:o,margin:a}=sC(),u=()=>e==null?null:w.jsx("line",{x1:r(e),x2:r(e),y1:a.top,y2:o-a.bottom,stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-vertical"}),l=()=>t==null?null:w.jsx("line",{x1:a.left,x2:s-a.right,y1:i(t),y2:i(t),stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-horizontal"}),c=()=>{if(!n)return null;const f=(r.domain()[1]-r.domain()[0])*.2,d=n.point.x-f,h=n.point.y-f*n.slope,p=n.point.x+f,m=n.point.y+f*n.slope;return w.jsx("line",{x1:r(d),y1:i(h),x2:r(p),y2:i(m),stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-tangent"})};return w.jsxs("g",{children:[u(),l(),c()]})}const MLt=Object.freeze(Object.defineProperty({__proto__:null,default:n$e},Symbol.toStringTag,{value:"Module"}));function r$e({distributionData:e,showPDF:t=!0,strokeColor:n="#2563eb",strokeWidth:r=2,isTraining:i=!1,axisLabels:s,selectedPoint:o,guidelines:a,children:u}){const{xScale:l,yScale:c,width:f,height:d,margin:h}=sC(),p=P.useRef(null),m=P.useRef(null),g=P.useMemo(()=>{const v=t?e.pdfVals:e.cdfVals;return e.xVals.map((b,_)=>({x:b,y:v[_]}))},[e,t]);P.useEffect(()=>{p.current&&xr(p.current).call(fRe(l)).attr("transform",`translate(0,${d-h.bottom})`).selectAll("text").style("font-size","12px").style("stroke-width","2px"),m.current&&xr(m.current).call(dRe(c)).attr("transform",`translate(${h.left},0)`).selectAll("text").style("font-size","12px").style("stroke-width","2px")},[l,c,h,d]);const y=P.useMemo(()=>s?w.jsxs(w.Fragment,{children:[s.x&&w.jsx("text",{x:f/2,y:d-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:s.x}),s.y&&w.jsx("text",{x:-d/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:s.y})]}):null,[s,f,d]);return w.jsxs("svg",{width:f,height:d,children:[w.jsx(e$e,{data:g,strokeColor:n,strokeWidth:r}),w.jsx("g",{ref:p}),w.jsx("g",{ref:m}),y,o&&w.jsx(t$e,{point:o}),i&&a&&w.jsx(n$e,{xValue:a.x,yValue:a.y,tangentLine:a.tangentLine}),u]})}const FLt=Object.freeze(Object.defineProperty({__proto__:null,default:r$e},Symbol.toStringTag,{value:"Module"}));function pL(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");const o=(e-n)/r,a=LT.studentt.pdf(o,i),u=s*o*Math.sqrt((i+1)/(i+o*o)),l=LT.studentt.cdf(u,i+1);return 2/r*a*l}function i$e(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");if(!Number.isFinite(e))return e>0?1:0;if(Math.abs(s)<1e-10){const d=(e-n)/r;return LT.studentt.cdf(d,i)}if(Math.abs(e-n)<1e-10)return .5;const o=(e-n)/r;if(o<-100)return 0;if(o>100)return 1;const a=Math.min(n-10*r,e-.1),u=1e3,l=(e-a)/u;let c=0,f=pL(a,t);for(let d=1;d<=u;d+=1){const h=a+d*l,p=pL(h,t);c+=(f+p)*.5*l,f=p}return Math.max(0,Math.min(1,c))}function s$e(e,t=[-5,5],n=.01){const{xi:r,omega:i,nu:s,alpha:o}=e;if(i<=0||s<=0)throw new Error("Scale parameter omega and degrees of freedom nu must be positive");const a=[],u=Math.floor(t[0]/n)*n,l=Math.ceil(t[1]/n)*n;for(let d=u;d<=l;d+=n){const h=Number(d.toFixed(10));a.push(h)}const c=a.map(d=>{try{return pL(d,e)}catch(h){return console.warn(`Error calculating PDF at x=${d}:`,h),0}}),f=a.map(d=>{try{return i$e(d,e)}catch(h){console.warn(`Error calculating CDF at x=${d}:`,h);const p=(d-r)/i;return p<0?.5*(1+Math.tanh(p)):.5+.5*(1-Math.exp(-p))}});return{xVals:a,pdfVals:c,cdfVals:f}}function BLt(e,t){let n=0,r=e.xVals.length-1;const i=e.xVals.findIndex(u=>Math.abs(u-t)<1e-10);if(i>=0)return{pdf:e.pdfVals[i],cdf:e.cdfVals[i]};for(;n<=r;){const u=Math.floor((n+r)/2);e.xVals[u]<t?n=u+1:r=u-1}if(r=Math.max(0,r),n=Math.min(e.xVals.length-1,n),r>=n)return{pdf:e.pdfVals[n],cdf:e.cdfVals[n]};const s=(t-e.xVals[r])/(e.xVals[n]-e.xVals[r]),o=e.pdfVals[r]*(1-s)+e.pdfVals[n]*s,a=e.cdfVals[r]*(1-s)+e.cdfVals[n]*s;return{pdf:o,cdf:a}}function jLt(e,t){let n=0;for(let r=0;r<t.length;r+=1)t[r]>t[n]&&(n=r);return e[n]}function ULt(e,t){let n=0,r=Math.abs(t[0]-.5);for(let a=0;a<t.length;a+=1){const u=Math.abs(t[a]-.5);u<r&&(r=u,n=a)}if(Math.abs(t[n]-.5)<1e-6)return e[n];let i=0,s=t.length-1;for(let a=0;a<t.length-1;a+=1)if(t[a]<=.5&&t[a+1]>=.5){i=a,s=a+1;break}const o=(.5-t[i])/(t[s]-t[i]);return e[i]+o*(e[s]-e[i])}const zLt=Object.freeze(Object.defineProperty({__proto__:null,findDistributionValue:BLt,findMedianFromCDF:ULt,findModeFromPDF:jLt,generateDistributionData:s$e,skewTCDF:i$e,skewTPDF:pL},Symbol.toStringTag,{value:"Module"}));function o$e({value:e,onChange:t,onChangeEnd:n,distributionData:r,width:i="100%"}){var u;if(!((u=r==null?void 0:r.xVals)!=null&&u.length))return null;const[s,o]=P.useState(!1),a=l=>{o(!0),n(l)};return w.jsx("div",{style:{width:i},children:w.jsx(z_,{value:s?e:-5,onChange:t,onChangeEnd:a,min:r.xVals[0],max:r.xVals[r.xVals.length-1],step:.01,label:l=>l.toFixed(2),styles:{root:{width:"100%"},track:{width:"100%",backgroundColor:"#e9ecef"},bar:{backgroundColor:"#e9ecef"},thumb:{display:s?"block":"none"}},"data-source":"slider-check"})})}const VLt=Object.freeze(Object.defineProperty({__proto__:null,default:o$e},Symbol.toStringTag,{value:"Module"})),N2={margin:{top:15,right:15,bottom:40,left:50},height:450,width:600};function HLt(){return{xi:Math.random()*5-2,omega:.2+Math.random()*2.3,nu:3+Math.floor(Math.random()*22),alpha:Math.random()*8-4}}function qLt({sliderValue:e,setSliderValue:t,distributionData:n,showPDF:r,training:i,taskType:s,currentParams:o,setAnswer:a}){const u=sC(),l=P.useMemo(()=>{if(e===void 0||i===!1)return null;const h=wh(p=>p).left(n.xVals,e);switch(s){case"pdf_median":return{x:e,y:null,tangentLine:null};case"pdf_mode":return{x:null,y:Math.max(...n.pdfVals),tangentLine:null};case"cdf_median":return{x:null,y:.5,tangentLine:null};case"cdf_mode":{const p={x:e,y:n.cdfVals[h]},m=n.pdfVals[h];return{x:null,y:null,tangentLine:{point:p,slope:m}}}default:return null}},[e,i,s,n]),c=P.useMemo(()=>{if(e===void 0||!n)return null;const h=wh(m=>m).left(n.xVals,e),p=r?n.pdfVals:n.cdfVals;return{x:n.xVals[h],y:p[h]}},[e,n,r]),f=P.useCallback(h=>{t(h)},[t]),d=P.useCallback(h=>{const p=wh(b=>b).left(n.xVals,h),m=r?n.pdfVals:n.cdfVals,g={x:n.xVals[p],y:m[p]},y=u.xScale(g.x),v=u.yScale(g.y);a({status:!0,answers:{"location-x":g.x,"location-y":g.y,"pixel-x":y,"pixel-y":v,"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha}})},[n,r,a,o,u]);return w.jsxs(w.Fragment,{children:[w.jsx(o$e,{value:e??0,onChange:f,onChangeEnd:d,distributionData:n,width:N2.width-N2.margin.left-N2.margin.right}),w.jsx(Eu,{h:"lg"}),w.jsx(r$e,{distributionData:n,showPDF:r,isTraining:i,selectedPoint:c,guidelines:l,axisLabels:{x:"Value",y:r?"Density":"Cumulative Probability"}})]})}function WLt({parameters:e,setAnswer:t}){const{params:n,showPDF:r,training:i,taskType:s}=e,[o,a]=P.useState(),[u,l]=P.useState(()=>n||HLt()),c=P.useMemo(()=>s$e(u),[u]);return P.useEffect(()=>{(!n||Object.keys(n).length===0)&&t({status:!0,answers:{"param-xi":u.xi,"param-omega":u.omega,"param-nu":u.nu,"param-alpha":u.alpha,"location-x":null,"location-y":null,"pixel-x":null,"pixel-y":null}})},[n,t,u]),c?w.jsx(fl,{p:"md",children:w.jsxs("div",{className:"mt-4",children:[w.jsx(Z6e,{width:N2.width,height:N2.height,margin:N2.margin,xDomain:[-5,5],yDomain:[0,1],children:w.jsx(qLt,{sliderValue:o,setSliderValue:a,distributionData:c,showPDF:r||!1,training:i||!1,taskType:s||"pdf_median",currentParams:u,setAnswer:t})}),w.jsx(Eu,{h:"xl"}),w.jsxs(ze,{size:"md",c:"dimmed",children:["Debug - Random Parameters: xi=",u.xi.toFixed(2),", omega=",u.omega.toFixed(2),", nu=",u.nu,", alpha=",u.alpha.toFixed(2)]})]})}):null}const GLt=Object.freeze(Object.defineProperty({__proto__:null,default:WLt},Symbol.toStringTag,{value:"Module"}));var a$e=(e=>(e.PDF_MEDIAN="pdf_median",e.PDF_MODE="pdf_mode",e.CDF_MEDIAN="cdf_median",e.CDF_MODE="cdf_mode",e))(a$e||{});const YLt=Object.freeze(Object.defineProperty({__proto__:null,TaskType:a$e},Symbol.toStringTag,{value:"Module"})),KLt=e=>e*Math.PI/180;function XLt({parameters:e,setAnswer:t}){var _;const n=P.useRef(null),r=P.useRef(null),i=P.useRef(null),{blindspotAngle:s}=e,o=Xr(E=>E.answers),a=Number((_=o.calibration_3.answer)==null?void 0:_.pixelsPerMM),[u,l]=P.useState([]),[c,f]=P.useState(!1),[d,h]=P.useState(null),[p,m]=P.useState(5),g=P.useCallback(E=>{if(!E.length||!a||!r.current)return;const S=E.reduce((N,L)=>N+L,0)/E.length,A=r.current.getBoundingClientRect().left,k=Math.abs(S-A)/a/Math.tan(KLt(s));h(k),f(!1)},[s,a]),y=P.useCallback(()=>{n.current&&(n.current.style.left="740px")},[]),v=P.useCallback(()=>{if(!n.current||!r.current||!a||u.length>=5)return;f(!0);let E=!1,S=0;const C=1e3,A=R=>{if(!n.current)return;if(E){R-S>=C&&(E=!1,n.current.style.left="740px"),i.current=requestAnimationFrame(A);return}const N=parseInt(n.current.style.left||"740",10)-2;N<=0?(E=!0,S=R):n.current.style.left=`${N}px`,i.current=requestAnimationFrame(A)};i.current=requestAnimationFrame(A)},[u,a]),b=()=>{i.current&&cancelAnimationFrame(i.current),f(!1)};return P.useEffect(()=>{d!==null&&u.length===5&&t({status:!0,answers:{"dist-calibration-MM":d,"dist-calibration-CM":d/10,"ball-positions":JSON.stringify(u)}})},[d,u,t]),P.useEffect(()=>{const E=S=>{if(S.code==="Space"){if(S.preventDefault(),!c)v();else if(n.current){b();const A=n.current.getBoundingClientRect().left;l(R=>{const k=[...R,A];return k.length>=5&&g(k),k}),m(R=>R-1),y()}}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[c,g,v,y]),P.useEffect(()=>(h(null),f(!1),l([]),m(5),y(),()=>{h(null),f(!1),l([]),m(5)}),[y]),P.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),a?w.jsx(fl,{size:"md",children:w.jsxs(qi,{gap:"md",children:[w.jsx(ze,{children:"Now we will quickly measure how far away you are sitting. "}),w.jsxs(qi,{gap:"xs",children:[w.jsxs(io,{children:[w.jsxs(io.Item,{children:["Put your left hand on the ",w.jsx("b",{children:"space bar"}),"."]}),w.jsx(io.Item,{children:"Cover your right eye with your right hand."}),w.jsx(io.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),w.jsxs(io.Item,{children:["The ",w.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),w.jsx(ze,{ta:"center",children:u.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),w.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[w.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),w.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),w.jsxs(ze,{ta:"center",children:["Remaining measurements: ",5-u.length]}),d&&w.jsxs(qi,{gap:"xs",children:[w.jsx(ze,{fw:700,size:"lg",children:"Viewing Distance Results"}),w.jsxs(ze,{children:["Estimated Viewing Distance: ",(d/10).toFixed(1)," cm"]}),w.jsxs(ze,{children:["Number of measurements: ",u.length]})]})]})}):w.jsx("div",{children:"Please complete card calibration first."})}const QLt=Object.freeze(Object.defineProperty({__proto__:null,default:XLt},Symbol.toStringTag,{value:"Module"})),JLt="/vis-decode/assets/card-DV7KyiWu.png";function ZLt({parameters:e,setAnswer:t,itemWidthMM:n=85,itemHeightMM:r=54}){const[i,s]=P.useState(300),[o,a]=P.useState(null),[u,l]=P.useState(!1),[c,f]=P.useState({min:100,max:500}),{taskid:d}=e,h=P.useRef(null),p=r/n;P.useEffect(()=>{const b=()=>{const _=window.innerWidth;f({min:Math.round(_*.1),max:Math.round(_*.8)})};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const m=b=>Math.round(b*p),g=b=>b/n,y=b=>{s(b)},v=()=>{if(!h.current)return;const b=g(i);a(b),t({status:!0,answers:{[d]:b}}),l(!0)};return w.jsx(fl,{size:"md",children:w.jsxs(qi,{gap:"lg",children:[w.jsx(ze,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),w.jsx(ze,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),w.jsx(ze,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),w.jsx(ze,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),w.jsx(on,{onClick:v,size:"lg",variant:"transparent",children:"Confirm Size"}),w.jsx(z_,{min:c.min,max:c.max,value:i,label:null,onChange:y,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),w.jsx("div",{ref:h,style:{width:`${i}px`,height:`${m(i)}px`,margin:"20px auto",overflow:"hidden"},children:w.jsx("img",{src:JLt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})}),u&&w.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",o==null?void 0:o.toFixed(2)]})]})})}const eMt=Object.freeze(Object.defineProperty({__proto__:null,default:ZLt},Symbol.toStringTag,{value:"Module"}));function tMt({position:e,isNearCurve:t}){return e?w.jsx("circle",{cx:e.x,cy:e.y,r:t?5:20,fill:t?"#2563eb":"#666",stroke:t?"#2563eb":"#666",strokeWidth:1,opacity:.8,pointerEvents:"none","data-source":"Cursor"}):null}const nMt=Object.freeze(Object.defineProperty({__proto__:null,default:tMt},Symbol.toStringTag,{value:"Module"})),rMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class iMt extends ni.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?w.jsx(ze,{children:this.state.error.toString()}):this.props.children}}const a1e=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":MRt,"../public/example-brush-interactions/assets/Bar.tsx":jRt,"../public/example-brush-interactions/assets/BrushPlot.tsx":c5t,"../public/example-brush-interactions/assets/Paintbrush.tsx":u5t,"../public/example-brush-interactions/assets/Scatter.tsx":l5t,"../public/example-brush-interactions/assets/XAxisBar.tsx":FRt,"../public/example-brush-interactions/assets/YAxis.tsx":a5t,"../public/example-brush-interactions/assets/YAxisBar.tsx":BRt,"../public/example-brush-interactions/assets/types.ts":f5t,"../public/example-cleveland/assets/BarChart.tsx":y5t,"../public/example-cleveland/assets/BubbleChart.tsx":T5t,"../public/example-cleveland/assets/PieChart.tsx":R5t,"../public/example-cleveland/assets/StackedBarChart.tsx":$5t,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":d5t,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":v5t,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":b5t,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":P5t,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":h5t,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":p5t,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":S5t,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":C5t,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":D5t,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":ORt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":M5t,"../public/libraries/mic-check/assets/AudioTest.tsx":Q5t,"../public/libraries/test/assets/test.tsx":Z5t,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":tLt,"../public/tutorial/react-and-randomization/assets/Bar.tsx":iLt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":uLt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":oLt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":aLt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":nLt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":sLt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":rLt,"../public/tutorial/react-and-randomization/assets/some.tsx":lLt,"../public/tutorial/react-and-randomization/assets/types.ts":cLt,"../public/vis-decode-click/assets/Plot.tsx":yLt,"../public/vis-decode-click/assets/Stimuli.tsx":SLt,"../public/vis-decode-click/assets/TaskTypes.ts":CLt,"../public/vis-decode-click/assets/ViewingDistanceCalibration.tsx":kLt,"../public/vis-decode-click/assets/VirtualChinrestCalibration.tsx":DLt,"../public/vis-decode-click/assets/chartComponents/ClickMarker.tsx":pLt,"../public/vis-decode-click/assets/chartComponents/Cursor.tsx":hLt,"../public/vis-decode-click/assets/chartComponents/Guidelines.tsx":gLt,"../public/vis-decode-click/assets/chartComponents/Line.tsx":dLt,"../public/vis-decode-click/assets/chartComponents/NearestPointMarker.tsx":mLt,"../public/vis-decode-click/assets/chartComponents/ScalesContext.tsx":fLt,"../public/vis-decode-click/assets/dataGeneration/jstat.d.ts":NLt,"../public/vis-decode-click/assets/dataGeneration/jstatDistributionCalculations.ts":xLt,"../public/vis-decode-click/assets/hooks/useChartInteractions.tsx":_Lt,"../public/vis-decode-slider/assets/Plot.tsx":FLt,"../public/vis-decode-slider/assets/Stimuli.tsx":GLt,"../public/vis-decode-slider/assets/TaskTypes.ts":YLt,"../public/vis-decode-slider/assets/ViewingDistanceCalibration.tsx":QLt,"../public/vis-decode-slider/assets/VirtualChinrestCalibration.tsx":eMt,"../public/vis-decode-slider/assets/chartComponents/ClickMarker.tsx":LLt,"../public/vis-decode-slider/assets/chartComponents/Cursor.tsx":nMt,"../public/vis-decode-slider/assets/chartComponents/DistributionSlider.tsx":VLt,"../public/vis-decode-slider/assets/chartComponents/Guidelines.tsx":MLt,"../public/vis-decode-slider/assets/chartComponents/Line.tsx":$Lt,"../public/vis-decode-slider/assets/chartComponents/ScalesContext.tsx":OLt,"../public/vis-decode-slider/assets/dataGeneration/jstat.d.ts":rMt,"../public/vis-decode-slider/assets/dataGeneration/jstatDistributionCalculations.tsx":zLt});function sMt({currentConfig:e,provState:t}){const n=wd(),r=Ed(),i=`../public/${e.path}`,s=i in a1e?a1e[i].default:null,o=Sc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=hl(),l=P.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return w.jsx(P.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:s?w.jsx(iMt,{children:w.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):w.jsx(U1,{path:e.path})})}function oMt({currentConfig:e}){const[t,n]=P.useState(""),[r,i]=P.useState(!0);return P.useEffect(()=>{async function s(){const o=await VZ(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?w.jsx(ku,{text:t}):w.jsx(U1,{path:e.path})}function oC(e){return e.baseComponent!==void 0}function u$e(){const e=wd(),{setAlertModal:t}=hl(),n=Sc();P.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var u1e=Object.prototype.hasOwnProperty;function l1e(e,t,n){for(n of e.keys())if(Ek(n,t))return n}function Ek(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ek(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=l1e(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=l1e(t,i),!i)||!Ek(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(u1e.call(e,n)&&++r&&!u1e.call(t,n)||!(n in t)||!Ek(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function aMt(e){var t=P.useRef(e),n=P.useRef(0);return Ek(e,t.current)||(t.current=e,n.current+=1),P.useMemo(function(){return t.current},[n.current])}function uMt(e,t){return P.useEffect(e,aMt(t))}const mL=(e,t=null)=>{const[n,r]=P.useState("idle"),[i,s]=P.useState(null),[o,a]=P.useState(null),u=P.useRef(),l=P.useRef(!1);P.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=P.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return uMt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function l$e(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const lMt="_root_1spq0_1",cMt="_description_1spq0_9",fMt="_title_1spq0_10",dMt="_closeButton_1spq0_14",hMt={root:lMt,description:cMt,title:fMt,closeButton:dMt},t3=e=>{const{title:t,message:n,color:r}=e;q_.show({title:t,message:n,position:"top-center",classNames:hMt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},c1e=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],c$e=["participantId","trialId","trialOrder","responseId"];function Ene(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function pMt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(Dh(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=oC(u)&&u.baseComponent&&n.baseComponents?jZ({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=l$e(s);return Object.entries(s.answer).map(([h,p])=>{var y,v;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(b=>b.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const b=(v=(y=l.correctAnswer)==null?void 0:y.find(_=>_.id===h))==null?void 0:v.answer;m.correctAnswer=typeof b=="object"?JSON.stringify(b):b}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function mMt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...c$e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await pMt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function gMt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=P.useState([...c1e].filter(p=>p!=="meta")),a=po(),{value:u,status:l,error:c}=mL(mMt,[s,r,a.storageEngine,i]),f=P.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);Ene(p,n)},[n,u]),d=P.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),t3({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=P.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return w.jsxs(Ws,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[w.jsx($J,{searchable:!0,nothingFoundMessage:"Property not found",data:[...c1e],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:w.jsx(ift,{}),variant:"filled"}),w.jsx(Eu,{h:"md"}),w.jsxs(ke,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?w.jsxs(ln,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[w.jsx(ln.Thead,{children:w.jsx(ln.Tr,{children:u.header.map(p=>w.jsx(ln.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:w.jsxs(qt,{direction:"row",justify:"space-between",align:"center",children:[p,!c$e.includes(p)&&w.jsx(U_,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:w.jsx(lZ,{size:16})})]})},p))})}),w.jsx(ln.Tbody,{children:u.rows.slice(0,5).map((p,m)=>w.jsx(ln.Tr,{children:u.header.map(g=>w.jsx(ln.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?w.jsx(Y0,{variant:"light",children:c.message}):null,w.jsx(cf,{visible:l==="pending"||l==="idle"})]}),w.jsx(Eu,{h:"sm"}),w.jsx(qt,{justify:"center",fz:"sm",c:"dimmed",children:w.jsx(ze,{children:h})}),w.jsx(Eu,{h:"md"}),w.jsxs(bi,{justify:"right",children:[w.jsx(on,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),w.jsx(on,{leftSection:w.jsx(zAe,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&w.jsx(on,{onClick:d,children:w.jsx(Yct,{})})]})]})}function yMt(){const e=yg(),{storageEngine:t}=po(),n=Xr(b=>b.answers),r=jS(),[i,s]=P.useState(!1);P.useEffect(()=>{if(r){s(!0);return}const b=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(b))},1e3)},[]),u$e();const[o,a]=P.useState(),[u,l]=P.useState(""),c=e.studyMetadata.title.replace(" ","_");P.useEffect(()=>{async function b(){if(t){const _=await t.getCurrentParticipantId(),E=await t.getParticipantData();l(_),a(E)}}b()},[t]);const f=P.useCallback(async()=>{Ene(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=P.useState(Math.floor(h/1e3));P.useEffect(()=>{if(i){const b=setInterval(()=>{m(_=>_-1)},1e3);return p<=0?(d&&f(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[d,i,p,f]);const g=Q_(),[y,v]=P.useState(!1);return P.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(g);v(_.dataCollectionEnabled)}})()},[t,g]),w.jsx(Wo,{style:{height:"100%"},children:w.jsx(qt,{direction:"column",children:i||!y?w.jsx(ze,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?w.jsx(ku,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):w.jsxs(w.Fragment,{children:[w.jsx(ze,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),w.jsx(Eu,{h:"lg"}),w.jsx(Wo,{children:w.jsx(Tc,{color:"blue"})})]})})})}function vMt(){return w.jsx(ze,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function bMt(){return w.jsx(ze,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const f1e={};function nY(e,t){e===void 0&&(e=f1e),t===void 0&&(t=f1e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var xMt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_Mt=Object.prototype.hasOwnProperty;function rY(e,t){return _Mt.call(e,t)}function iY(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)rY(e,i)&&r.push(i);return r}function Qc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function sY(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Yb(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function f$e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function oY(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(oY(e[t]))return!0}else if(typeof e=="object"){for(var r=iY(e),i=r.length,s=0;s<i;s++)if(oY(e[r[s]]))return!0}}return!1}function d1e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var d$e=function(e){xMt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,d1e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=d1e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Fs=d$e,wMt=Qc,t2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=gL(n,this.path);r&&(r=Qc(r));var i=Lx(n,{op:"remove",path:this.from}).removed;return Lx(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=gL(n,this.from);return Lx(n,{op:"add",path:this.path,value:Qc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:n3(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},EMt={add:function(e,t,n){return sY(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:t2.move,copy:t2.copy,test:t2.test,_get:t2._get};function gL(e,t){if(t=="")return e;var n={op:"_get",path:t};return Lx(e,n),n.value}function Lx(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):yL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=gL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=n3(e,t.value),o.test===!1)throw new Fs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Fs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Qc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=yL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=f$e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!sY(h))throw new Fs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);sY(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Fs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=EMt[t.op].call(t,l,h,e);if(o.test===!1)throw new Fs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=t2[t.op].call(t,l,h,e);if(o.test===!1)throw new Fs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Fs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function V8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Fs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Qc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Lx(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function TMt(e,t,n){var r=Lx(e,t);if(r.test===!1)throw new Fs("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function yL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Fs("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(t2[e.op]){if(typeof e.path!="string")throw new Fs("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Fs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Fs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Fs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&oY(e.value))throw new Fs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Fs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Fs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=h$e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Fs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function h$e(e,t,n){try{if(!Array.isArray(e))throw new Fs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)V8(Qc(t),Qc(e),n||!0);else{n=n||yL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Fs)return i;throw i}}function n3(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!n3(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!n3(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const SMt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Fs,_areEquals:n3,applyOperation:Lx,applyPatch:V8,applyReducer:TMt,deepClone:wMt,getValueByPointer:gL,validate:h$e,validator:yL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Tne=new WeakMap,CMt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),AMt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function IMt(e){return Tne.get(e)}function kMt(e,t){return e.observers.get(t)}function RMt(e,t){e.observers.delete(t.callback)}function PMt(e,t){t.unobserve()}function DMt(e,t){var n=[],r,i=IMt(e);if(!i)i=new CMt(e),Tne.set(e,i);else{var s=kMt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Qc(e),t){r.callback=t,r.next=null;var o=function(){aY(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){aY(r),clearTimeout(r.next),RMt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new AMt(t,r)),r}function aY(e,t){t===void 0&&(t=!1);var n=Tne.get(e.object);Sne(n.value,e.object,e.patches,"",t),e.patches.length&&V8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Sne(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=iY(t),o=iY(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(rY(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Sne(c,f,n,r+"/"+Yb(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Yb(l),value:Qc(c)}),n.push({op:"replace",path:r+"/"+Yb(l),value:Qc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Yb(l),value:Qc(c)}),n.push({op:"remove",path:r+"/"+Yb(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!rY(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Yb(l),value:Qc(t[l])})}}}function NMt(e,t,n){n===void 0&&(n=!1);var r=[];return Sne(e,t,r,"",n),r}const OMt=Object.freeze(Object.defineProperty({__proto__:null,compare:NMt,generate:aY,observe:DMt,unobserve:PMt},Symbol.toStringTag,{value:"Module"}));Object.assign({},SMt,OMt,{JsonPatchError:d$e,deepClone:Qc,escapePathComponent:Yb,unescapePathComponent:f$e});var $Mt=/("(?:[^\\"]|\\.)*")|[:,]/g,LMt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,_,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),_=JSON.stringify(a,s),_===void 0)return _;if(g=i-u.length-l,_.length<=g&&(v=_.replace($Mt,function(S,C){return C||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(_),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return _}(t,"",0)};const oV=zh(LMt);function Ac(e,t,n){return e.fields=t||[],e.fname=n,e}function Gs(e){return e==null?null:e.fname}function Tu(e){return e==null?null:e.fields}function p$e(e){return e.length===1?MMt(e[0]):FMt(e)}const MMt=e=>function(t){return t[e]},FMt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ke(e){throw Error(e)}function Lm(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Ke("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Ke("Access path missing closing bracket: "+e),r&&Ke("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function fd(e,t,n){const r=Lm(e);return e=r.length===1?r[0]:e,Ac((n&&n.get||p$e)(r),[e],t||e)}const LP=fd("id"),Pu=Ac(e=>e,[],"identity"),qy=Ac(()=>0,[],"zero"),aC=Ac(()=>1,[],"one"),dd=Ac(()=>!0,[],"true"),Cy=Ac(()=>!1,[],"false");function BMt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const m$e=0,Cne=1,Ane=2,g$e=3,y$e=4;function Ine(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BMt,r=e||m$e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Cne&&n(t||"error","ERROR",arguments),this},warn(){return r>=Ane&&n(t||"warn","WARN",arguments),this},info(){return r>=g$e&&n(t||"log","INFO",arguments),this},debug(){return r>=y$e&&n(t||"log","DEBUG",arguments),this}}}var Qe=Array.isArray;function Ot(e){return e===Object(e)}const h1e=e=>e!=="__proto__";function uC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=jMt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;lC(r,s,i[s],o)}return r},{})}function lC(e,t,n,r){if(!h1e(t))return;let i,s;if(Ot(n)&&!Qe(n)){s=Ot(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?lC(s,i,n[i]):h1e(i)&&(s[i]=n[i])}else e[t]=n}function jMt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Mr(e){return e[e.length-1]}function xu(e){return e==null||e===""?null:+e}const v$e=e=>t=>e*Math.exp(t),b$e=e=>t=>Math.log(e*t),x$e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),_$e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,vL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function H8(e,t,n,r){const i=n(e[0]),s=n(Mr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function w$e(e,t){return H8(e,t,xu,Pu)}function E$e(e,t){var n=Math.sign(e[0]);return H8(e,t,b$e(n),v$e(n))}function T$e(e,t,n){return H8(e,t,vL(n),vL(1/n))}function S$e(e,t,n){return H8(e,t,x$e(n),_$e(n))}function q8(e,t,n,r,i){const s=r(e[0]),o=r(Mr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function kne(e,t,n){return q8(e,t,n,xu,Pu)}function Rne(e,t,n){const r=Math.sign(e[0]);return q8(e,t,n,b$e(r),v$e(r))}function bL(e,t,n,r){return q8(e,t,n,vL(r),vL(1/r))}function Pne(e,t,n,r){return q8(e,t,n,x$e(r),_$e(r))}function C$e(e){return 1+~~(new Date(e).getMonth()/3)}function A$e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Dt(e){return e!=null?Qe(e)?e:[e]:[]}function I$e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Yn(e){return typeof e=="function"}const UMt="descending";function Dne(e,t,n){n=n||{},t=Dt(t)||[];const r=[],i=[],s={},o=n.comparator||zMt;return Dt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===UMt?-1:1),i.push(a=Yn(a)?a:fd(a,null,n)),(Tu(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Ac(o(i,r),Object.keys(s))}const W8=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),zMt=(e,t)=>e.length===1?VMt(e[0],t[0]):HMt(e,t,e.length),VMt=(e,t)=>function(n,r){return W8(e(n),e(r))*t},HMt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=W8(s(r),s(i));return o*t[a]});function Du(e){return Yn(e)?e:()=>e}function Nne(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function bm(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function k$e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const qMt=Object.prototype.hasOwnProperty;function sn(e,t){return qMt.call(e,t)}const PO={};function cC(e){let t={},n;function r(s){return sn(t,s)&&t[s]!==PO}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===PO&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=PO),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==PO&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function R$e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Mr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ct(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Gn(r,n)}function n2(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Gv(e){return typeof e=="boolean"}function S1(e){return Object.prototype.toString.call(e)==="[object Date]"}function P$e(e){return e&&Yn(e[Symbol.iterator])}function Qr(e){return typeof e=="number"}function D$e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Nt(e){return typeof e=="string"}function One(e,t,n){e&&(e=t?Dt(e).map(a=>a.replace(/\\(.)/g,"$1")):Dt(e));const r=e&&e.length,i=n&&n.get||p$e,s=a=>i(t?[a]:Lm(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ac(o,e,"key")}function N$e(e,t){const n=e[0],r=Mr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const WMt=1e4;function O$e(e){e=+e||WMt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>sn(t,o)||sn(n,o),get:o=>sn(t,o)?t[o]:sn(n,o)?s(o,n[o]):void 0,set:(o,a)=>sn(t,o)?t[o]=a:s(o,a)}}function $$e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function AI(e,t){let n="";for(;--t>=0;)n+=e;return n}function L$e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?AI(i,o)+s:r==="center"?AI(i,~~(o/2))+s+AI(i,Math.ceil(o/2)):s+AI(i,o)}function MP(e){return e&&Mr(e)-e[0]||0}function Et(e){return Qe(e)?"["+e.map(Et)+"]":Ot(e)||Nt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function $ne(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const GMt=e=>Qr(e)||S1(e)?e:Date.parse(e);function Lne(e,t){return t=t||GMt,e==null||e===""?null:t(e)}function Mne(e){return e==null||e===""?null:e+""}function Lh(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function M$e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function $y(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function YMt(e){return e}function KMt(e){if(e==null)return YMt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function XMt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function QMt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return p1e(e,n)})}:p1e(e,t)}function p1e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=F$e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function F$e(e,t){var n=KMt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&XMt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function JMt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function ZMt(e){return F$e(e,eFt.apply(this,arguments))}function eFt(e,t,n){var r,i,s;if(arguments.length>1)r=tFt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:JMt(e,r)}}function tFt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const ja="year",bc="quarter",Su="month",Uo="week",xc="date",bu="day",xm="dayofyear",yf="hours",vf="minutes",hd="seconds",Mh="milliseconds",Fne=[ja,bc,Su,Uo,xc,bu,xm,yf,vf,hd,Mh],aV=Fne.reduce((e,t,n)=>(e[t]=1+n,e),{});function Bne(e){const t=Dt(e).slice(),n={};return t.length||Ke("Missing time unit."),t.forEach(i=>{sn(aV,i)?n[i]=1:Ke(`Invalid time unit: ${i}.`)}),(n[Uo]||n[bu]?1:0)+(n[bc]||n[Su]||n[xc]?1:0)+(n[xm]?1:0)>1&&Ke(`Incompatible time units: ${e}`),t.sort((i,s)=>aV[i]-aV[s]),t}const nFt={[ja]:"%Y ",[bc]:"Q%q ",[Su]:"%b ",[xc]:"%d ",[Uo]:"W%U ",[bu]:"%a ",[xm]:"%j ",[yf]:"%H:00",[vf]:"00:%M",[hd]:":%S",[Mh]:".%L",[`${ja}-${Su}`]:"%Y-%m ",[`${ja}-${Su}-${xc}`]:"%Y-%m-%d ",[`${yf}-${vf}`]:"%H:%M"};function B$e(e,t){const n=Gn({},nFt,t),r=Bne(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const tx=new Date;function jne(e){return tx.setFullYear(e),tx.setMonth(0),tx.setDate(1),tx.setHours(0,0,0,0),tx}function j$e(e){return z$e(new Date(e))}function U$e(e){return uY(new Date(e))}function z$e(e){return Z0.count(jne(e.getFullYear())-1,e)}function uY(e){return HS.count(jne(e.getFullYear())-1,e)}function lY(e){return jne(e).getDay()}function rFt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function V$e(e){return q$e(new Date(e))}function H$e(e){return cY(new Date(e))}function q$e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return w1.count(t-1,e)}function cY(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return qS.count(t-1,e)}function fY(e){return tx.setTime(Date.UTC(e,0,1)),tx.getUTCDay()}function iFt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function W$e(e,t,n,r,i){const s=t||1,o=Mr(e),a=(y,v,b)=>(b=b||y,sFt(n[b],r[b],y===o&&s,v)),u=new Date,l=Lh(e),c=l[ja]?a(ja):Du(2012),f=l[Su]?a(Su):l[bc]?a(bc):qy,d=l[Uo]&&l[bu]?a(bu,1,Uo+bu):l[Uo]?a(Uo,1):l[bu]?a(bu,1):l[xc]?a(xc,1):l[xm]?a(xm,1):aC,h=l[yf]?a(yf):qy,p=l[vf]?a(vf):qy,m=l[hd]?a(hd):qy,g=l[Mh]?a(Mh):qy;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function sFt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function MT(e,t,n){return t+e*7-(n+6)%7}const oFt={[ja]:e=>e.getFullYear(),[bc]:e=>Math.floor(e.getMonth()/3),[Su]:e=>e.getMonth(),[xc]:e=>e.getDate(),[yf]:e=>e.getHours(),[vf]:e=>e.getMinutes(),[hd]:e=>e.getSeconds(),[Mh]:e=>e.getMilliseconds(),[xm]:e=>z$e(e),[Uo]:e=>uY(e),[Uo+bu]:(e,t)=>MT(uY(e),e.getDay(),lY(t)),[bu]:(e,t)=>MT(1,e.getDay(),lY(t))},aFt={[bc]:e=>3*e,[Uo]:(e,t)=>MT(e,0,lY(t))};function G$e(e,t){return W$e(e,t||1,oFt,aFt,rFt)}const uFt={[ja]:e=>e.getUTCFullYear(),[bc]:e=>Math.floor(e.getUTCMonth()/3),[Su]:e=>e.getUTCMonth(),[xc]:e=>e.getUTCDate(),[yf]:e=>e.getUTCHours(),[vf]:e=>e.getUTCMinutes(),[hd]:e=>e.getUTCSeconds(),[Mh]:e=>e.getUTCMilliseconds(),[xm]:e=>q$e(e),[Uo]:e=>cY(e),[bu]:(e,t)=>MT(1,e.getUTCDay(),fY(t)),[Uo+bu]:(e,t)=>MT(cY(e),e.getUTCDay(),fY(t))},lFt={[bc]:e=>3*e,[Uo]:(e,t)=>MT(e,0,fY(t))};function Y$e(e,t){return W$e(e,t||1,uFt,lFt,iFt)}const cFt={[ja]:fm,[bc]:LR.every(3),[Su]:LR,[Uo]:HS,[xc]:Z0,[bu]:Z0,[xm]:Z0,[yf]:u8,[vf]:o8,[hd]:j0,[Mh]:bT},fFt={[ja]:dm,[bc]:MR.every(3),[Su]:MR,[Uo]:qS,[xc]:w1,[bu]:w1,[xm]:w1,[yf]:l8,[vf]:a8,[hd]:j0,[Mh]:bT};function fC(e){return cFt[e]}function dC(e){return fFt[e]}function K$e(e,t,n){return e?e.offset(t,n):void 0}function X$e(e,t,n){return K$e(fC(e),t,n)}function Q$e(e,t,n){return K$e(dC(e),t,n)}function J$e(e,t,n,r){return e?e.range(t,n,r):void 0}function Z$e(e,t,n,r){return J$e(fC(e),t,n,r)}function e5e(e,t,n,r){return J$e(dC(e),t,n,r)}const II=1e3,kI=II*60,RI=kI*60,G8=RI*24,dFt=G8*7,m1e=G8*30,dY=G8*365,t5e=[ja,Su,xc,yf,vf,hd,Mh],PI=t5e.slice(0,-1),DI=PI.slice(0,-1),NI=DI.slice(0,-1),hFt=NI.slice(0,-1),pFt=[ja,Uo],g1e=[ja,Su],n5e=[ja],kA=[[PI,1,II],[PI,5,5*II],[PI,15,15*II],[PI,30,30*II],[DI,1,kI],[DI,5,5*kI],[DI,15,15*kI],[DI,30,30*kI],[NI,1,RI],[NI,3,3*RI],[NI,6,6*RI],[NI,12,12*RI],[hFt,1,G8],[pFt,1,dFt],[g1e,1,m1e],[g1e,3,3*m1e],[n5e,1,dY]];function r5e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(MP(t))/n;let i=wh(a=>a[2]).right(kA,r),s,o;return i===kA.length?(s=n5e,o=V1(t[0]/dY,t[1]/dY,n)):i?(i=kA[r/kA[i-1][2]<kA[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=t5e,o=Math.max(V1(t[0],t[1],n),1)),{units:s,step:o}}function OI(e){const t={};return n=>t[n]||(t[n]=e(n))}function mFt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=gFt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function gFt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function i5e(e){const t=OI(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=t_(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return mFt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=t_(o??",f");const a=V1(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=g3e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=y3e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=m3e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let hY;s5e();function s5e(){return hY=i5e({format:Bv,formatPrefix:uee})}function o5e(e){return i5e(p3e(e))}function xL(e){return arguments.length?hY=o5e(e):hY}function y1e(e,t,n){n=n||{},Ot(n)||Ke(`Invalid time multi-format specifier: ${n}`);const r=t(hd),i=t(vf),s=t(yf),o=t(xc),a=t(Uo),u=t(Su),l=t(bc),c=t(ja),f=e(n[Mh]||".%L"),d=e(n[hd]||":%S"),h=e(n[vf]||"%I:%M"),p=e(n[yf]||"%I %p"),m=e(n[xc]||n[bu]||"%a %d"),g=e(n[Uo]||"%b %d"),y=e(n[Su]||"%B"),v=e(n[bc]||"%B"),b=e(n[ja]||"%Y");return _=>(r(_)<_?f:i(_)<_?d:s(_)<_?h:o(_)<_?p:u(_)<_?a(_)<_?m:g:c(_)<_?l(_)<_?y:v:b)(_)}function a5e(e){const t=OI(e.format),n=OI(e.utcFormat);return{timeFormat:r=>Nt(r)?t(r):y1e(t,fC,r),utcFormat:r=>Nt(r)?n(r):y1e(n,dC,r),timeParse:OI(e.parse),utcParse:OI(e.utcParse)}}let pY;u5e();function u5e(){return pY=a5e({format:_ee,parse:RPe,utcFormat:bP,utcParse:PPe})}function l5e(e){return a5e(SPe(e))}function r3(e){return arguments.length?pY=l5e(e):pY}const mY=(e,t)=>Gn({},e,t);function c5e(e,t){const n=e?o5e(e):xL(),r=t?l5e(t):r3();return mY(n,r)}function Une(e,t){const n=arguments.length;return n&&n!==2&&Ke("defaultLocale expects either zero or two arguments."),n?mY(xL(e),r3(t)):mY(xL(),r3())}function yFt(){return s5e(),u5e(),Une()}const vFt=/^(data:|([A-Za-z]+:)?\/\/)/,bFt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,xFt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,v1e="file://";function _Ft(e,t){return n=>({options:n||{},sanitize:EFt,load:wFt,fileAccess:!1,file:TFt(t),http:CFt(e)})}async function wFt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function EFt(e,t){t=Gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=bFt.test(e.replace(xFt,""));(e==null||typeof e!="string"||!a)&&Ke("Sanitize failure, invalid URI: "+Et(e));const u=vFt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(v1e))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(v1e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function TFt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):SFt}async function SFt(){Ke("No file system access.")}function CFt(e){return e?async function(t,n){const r=Gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Yn(s[i])?s[i]():s.text():Ke(s.status+""+s.statusText)}:AFt}async function AFt(){Ke("No HTTP fetch method available.")}const IFt=e=>e!=null&&e===e,kFt=e=>e==="true"||e==="false"||e===!0||e===!1,RFt=e=>!Number.isNaN(Date.parse(e)),f5e=e=>!Number.isNaN(+e)&&!(e instanceof Date),PFt=e=>f5e(e)&&Number.isInteger(+e),gY={boolean:$ne,integer:xu,number:xu,date:Lne,string:Mne,unknown:Pu},DO=[kFt,PFt,f5e,RFt],DFt=["boolean","integer","number","date"];function d5e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=DO.length,i=DO.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&IFt(u)&&!DO[a](u)&&(i[a]=0,++o,o===DO.length))return"string";return DFt[i.reduce((s,o)=>s===0?o:s,0)-1]}function h5e(e,t){return t.reduce((n,r)=>(n[r]=d5e(e,r),n),{})}function b1e(e){const t=function(n,r){const i={delimiter:e};return zne(n,r?Gn(r,i):i)};return t.responseType="text",t}function zne(e,t){return t.header&&(e=t.header.map(Et).join(t.delimiter)+`
`+e),c3e(t.delimiter).parse(e+"")}zne.responseType="text";function NFt(e){return typeof Buffer=="function"&&Yn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Vne(e,t){const n=t&&t.property?fd(t.property):Pu;return Ot(e)&&!NFt(e)?OFt(n(e),t):n(JSON.parse(e))}Vne.responseType="json";function OFt(e,t){return!Qe(e)&&P$e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const $Ft={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function p5e(e,t){let n,r,i,s;return e=Vne(e,t),t&&t.feature?(n=QMt,i=t.feature):t&&t.mesh?(n=ZMt,i=t.mesh,s=$Ft[t.filter]):Ke("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Ke("Invalid TopoJSON object: "+i),r&&r.features||[r]}p5e.responseType="json";const c6={dsv:zne,csv:b1e(","),tsv:b1e("	"),json:Vne,topojson:p5e};function Hne(e,t){return arguments.length>1?(c6[e]=t,this):sn(c6,e)?c6[e]:null}function m5e(e){const t=Hne(e);return t&&t.responseType||"text"}function g5e(e,t,n,r){t=t||{};const i=Hne(t.type||"json");return i||Ke("Unknown data format type: "+t.type),e=i(e,t),t.parse&&LFt(e,t.parse,n,r),sn(e,"columns")&&delete e.columns,e}function LFt(e,t,n,r){if(!e.length)return;const i=r3();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=h5e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!gY[p])throw Error("Illegal format pattern: "+h+":"+p);return gY[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const Y8=_Ft(typeof fetch<"u"&&fetch,null);function K8(e){const t=e||Pu,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function f6(e,t){try{await t(e)}catch(n){e.error(n)}}const y5e=Symbol("vega_id");let MFt=1;function X8(e){return!!(e&&nn(e))}function nn(e){return e[y5e]}function v5e(e,t){return e[y5e]=t,e}function pi(e){const t=e===Object(e)?e:{data:e};return nn(t)?t:v5e(t,MFt++)}function qne(e){return Q8(e,pi({}))}function Q8(e,t){for(const n in e)t[n]=e[n];return t}function b5e(e,t){return v5e(t,nn(e))}function sw(e,t){return e?t?(n,r)=>e(n,r)||nn(t(n))-nn(t(r)):(n,r)=>e(n,r)||nn(n)-nn(r):null}function x5e(e){return e&&e.constructor===ow}function ow(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:ow,insert(a){const u=Dt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Yn(a)?r:t,l=Dt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Du(l)};return Yn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Yn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[nn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[nn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[nn(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=nn(m),l[g]?l[g]=1:a.add.push(pi(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[nn(m)]<0&&a.rem.push(m);function y(v,b,_){_?v[b]=_(v):a.encode=b,o||(c[nn(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[nn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[nn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[nn(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const d6="_:mod:_";function J8(){Object.defineProperty(this,d6,{writable:!0,value:{}})}J8.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[d6];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Qe(n)?1+n.length:-1),i},modified(e,t){const n=this[d6];if(arguments.length){if(Qe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[d6]={},this}};let FFt=0;const BFt="pulse",jFt=new J8,UFt=1,zFt=2;function Wi(e,t,n,r){this.id=++FFt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function x1e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Wi.prototype={targets(){return this._targets||(this._targets=K8(LP))},set(e){return this.value!==e?(this.value=e,1):0},skip:x1e(UFt),modified:x1e(zFt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new J8,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Wi?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===BFt)Dt(a).forEach(f=>{f instanceof Wi?f!==this&&(f.targets().add(this),s.push(f)):Ke("Pulse parameters must be operator instances.")}),this.source=a;else if(Qe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||jFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function VFt(e,t,n,r){let i=1,s;return e instanceof Wi?s=e:e&&e.prototype instanceof Wi?s=new e:Yn(e)?s=new Wi(null,e):(i=0,s=new Wi(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function HFt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let qFt=0;function Z8(e,t,n){this.id=++qFt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ay(e,t,n){return new Z8(e,t,n)}Z8.prototype={_filter:dd,_apply:Pu,targets(){return this._targets||(this._targets=K8(LP))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ay(e);return this.targets().add(t),t},apply(e){const t=Ay(null,e);return this.targets().add(t),t},merge(){const e=Ay();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ay();return this.targets().add(Ay(null,null,Nne(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ay(null,null,()=>n=!0)),t.targets().add(Ay(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=dd,this._targets=null}};function WFt(e,t,n,r){const i=this,s=Ay(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Dt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function GFt(e,t){const n=this.locale();return g5e(e,t,n.timeParse,n.utcParse)}function YFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function KFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:m5e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function XFt(e,t,n){const r=this,i=r._pending||QFt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(dd).insert(s.data||[])),i.done(),s}function QFt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const JFt={skip:!0};function ZFt(e,t,n,r,i){return(e instanceof Wi?t8t:e8t)(this,e,t,n,r,i),this}function e8t(e,t,n,r,i,s){const o=Gn({},s,JFt);let a,u;Yn(n)||(n=Du(n)),r===void 0?a=l=>e.touch(n(l)):Yn(r)?(u=new Wi(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;x5e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function t8t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Wi(null,n8t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function n8t(e,t){return t=Yn(t)?t:Du(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function r8t(e){e.rank=++this._rank}function i8t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Ke("Cycle detected in dataflow graph.")}const _L={},wp=1,Ly=2,v0=4,s8t=wp|Ly,_1e=wp|v0,oE=wp|Ly|v0,w1e=8,RA=16,E1e=32,T1e=64;function C1(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function uV(e,t){const n=[];return $y(e,t,r=>n.push(r)),n}function S1e(e,t){const n={};return e.visit(t,r=>{n[nn(r)]=1}),r=>n[nn(r)]?null:r}function NO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}C1.prototype={StopPropagation:_L,ADD:wp,REM:Ly,MOD:v0,ADD_REM:s8t,ADD_MOD:_1e,ALL:oE,REFLOW:w1e,SOURCE:RA,NO_SOURCE:E1e,NO_FIELDS:T1e,fork(e){return new C1(this.dataflow).init(this,e)},clone(){const e=this.fork(oE);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(oE|RA)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new C1(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&T1e)&&(n.fields=e.fields),t&wp?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ly?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&v0?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&E1e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||oE;return t&wp&&this.add.length||t&Ly&&this.rem.length||t&v0&&this.mod.length},reflow(e){if(e)return this.fork(oE).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(v0,S1e(this,wp))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Qe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Qe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&wp&&(n.addF=NO(n.addF,t)),e&Ly&&(n.remF=NO(n.remF,t)),e&v0&&(n.modF=NO(n.modF,t)),e&RA&&(n.srcF=NO(n.srcF,t)),n},materialize(e){e=e||oE;const t=this;return e&wp&&t.addF&&(t.add=uV(t.add,t.addF),t.addF=null),e&Ly&&t.remF&&(t.rem=uV(t.rem,t.remF),t.remF=null),e&v0&&t.modF&&(t.mod=uV(t.mod,t.modF),t.modF=null),e&RA&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&RA)return $y(n.source,n.srcF,r),n;e&wp&&$y(n.add,n.addF,r),e&Ly&&$y(n.rem,n.remF,r),e&v0&&$y(n.mod,n.modF,r);const i=n.source;if(e&w1e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?$y(i,S1e(n,_1e),r):$y(i,n.srcF,r))}return n}};function Wne(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ct(Wne,C1,{fork(e){const t=new C1(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Qe(e)?e.some(r=>n[r]):n[e]:0},filter(){Ke("MultiPulse does not support filtering.")},materialize(){Ke("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function o8t(e,t,n){const r=this,i=[];if(r._pulse)return _5e(r);if(r._pending&&await r._pending,t&&await f6(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new C1(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=K8(LP);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=_L),u!==_L&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await f6(r,c[f].callback)}return n&&await f6(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function a8t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function u8t(e,t,n){return this._pulse?_5e(this):(this.evaluate(e,t,n),this)}function l8t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function _5e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function c8t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function f8t(e,t){const n=e.source,r=this._clock;return n&&Qe(n)?new Wne(this,r,n.map(i=>i.pulse),t):this._input[e.id]||d8t(this._pulse,n&&n.pulse)}function d8t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==_L&&(e.source=t.source),e)}const Gne={skip:!1,force:!1};function h8t(e,t){const n=t||Gne;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function p8t(e,t,n){const r=n||Gne;return(e.set(t)||r.force)&&this.touch(e,r),this}function m8t(e,t,n){this.touch(e,n||Gne);const r=new C1(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function g8t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),w5e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,y8t(t,0,e)):r=n,r}}}function w5e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function y8t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,w5e(e,r,t,n)}function O2(){this.logger(Ine()),this.logLevel(Cne),this._clock=0,this._rank=0,this._locale=Une();try{this._loader=Y8()}catch{}this._touched=K8(LP),this._input={},this._pulse=null,this._heap=g8t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function PA(e){return function(){return this._log[e].apply(this,arguments)}}O2.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:PA("error"),warn:PA("warn"),info:PA("info"),debug:PA("debug"),logLevel:PA("level"),cleanThreshold:1e4,add:VFt,connect:HFt,rank:r8t,rerank:i8t,pulse:m8t,touch:h8t,update:p8t,changeset:ow,ingest:YFt,parse:GFt,preload:XFt,request:KFt,events:WFt,on:ZFt,evaluate:o8t,run:u8t,runAsync:a8t,runAfter:l8t,_enqueue:c8t,_getPulse:f8t};function He(e,t){Wi.call(this,e,null,t)}Ct(He,Wi,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const FT={};function E5e(e){const t=T5e(e);return t&&t.Definition||null}function T5e(e){return e=e&&e.toLowerCase(),sn(FT,e)?FT[e]:null}function*S5e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Yne(e,t,n){const r=Float64Array.from(S5e(e,n));return r.sort(X0),t.map(i=>oRe(r,i))}function Kne(e,t){return Yne(e,[.25,.5,.75],t)}function Xne(e,t){const n=e.length,r=Zbt(e,t),i=Kne(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function C5e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var pd=Math.random;function v8t(e){pd=e}function A5e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(S5e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(pd()*s)];c[l]=a/s}return c.sort(X0),[xW(c,n/2),xW(c,1-n/2)]}function I5e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?b8t(s,t+t/4):s}function b8t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function x8t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function _8t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*pd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const k5e=Math.sqrt(2*Math.PI),w8t=Math.SQRT2;let DA=NaN;function eB(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(DA===DA)n=DA,DA=NaN;else{do n=pd()*2-1,r=pd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,DA=r*s}return e+n*t}function Qne(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*k5e)}function tB(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function nB(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*w8t*E8t(2*e-1)}function E8t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Jne(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>eB(n,r),pdf:s=>Qne(s,n,r),cdf:s=>tB(s,n,r),icdf:s=>nB(s,n,r)};return i.mean(e).stdev(t)}function Zne(e,t){const n=Jne();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Xne(e)),i):t},sample(){return e[~~(pd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function ere(e,t){return e=e||0,t=t??1,Math.exp(e+eB()*t)}function tre(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*k5e*e)}function nre(e,t,n){return tB(Math.log(e),t,n)}function rre(e,t,n){return Math.exp(nB(e,t,n))}function R5e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>ere(n,r),pdf:s=>tre(s,n,r),cdf:s=>nre(s,n,r),icdf:s=>rre(s,n,r)};return i.mean(e).stdev(t)}function P5e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=pd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function ire(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*pd()}function sre(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function ore(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function are(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function D5e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>ire(n,r),pdf:s=>sre(s,n,r),cdf:s=>ore(s,n,r),icdf:s=>are(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function ure(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function FP(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function rB(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function BP(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function hC(e,t,n,r,i){let s=0,o=0;return BP(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function lre(e,t,n){let r=0,i=0,s=0,o=0,a=0;BP(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=FP(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:hC(e,t,n,i,l)}}function N5e(e,t,n){let r=0,i=0,s=0,o=0,a=0;BP(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=FP(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:hC(e,t,n,i,l)}}function O5e(e,t,n){const[r,i,s,o]=rB(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;BP(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=FP(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:hC(e,t,n,o,y)}}function $5e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;BP(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=FP(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:hC(e,t,n,a,c)}}function cre(e,t,n){const[r,i,s,o]=rB(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,_=(f*y-d*l)/v,E=-b*u,S=C=>(C=C-s,b*C*C+_*C+E+o);return{coef:[E-_*s+b*s*s+o,_-2*b*s,b],predict:S,rSquared:hC(e,t,n,o,S)}}function L5e(e,t,n,r){if(r===0)return ure(e,t,n);if(r===1)return lre(e,t,n);if(r===2)return cre(e,t,n);const[i,s,o,a]=rB(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=S8t(c),v=b=>{b-=o;let _=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)_+=y[d]*Math.pow(b,d);return _};return{coef:T8t(f,y,-o,a),predict:v,rSquared:hC(e,t,n,a,v)}}function T8t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function S8t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const C1e=2,A1e=1e-12;function M5e(e,t,n,r){const[i,s,o,a]=rB(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=C1e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],_=y-i[v]>i[b]-y?v:b;let E=0,S=0,C=0,A=0,R=0;const k=1/Math.abs(i[_]-y||1);for(let O=v;O<=b;++O){const B=i[O],q=s[O],H=C8t(Math.abs(y-B)*k)*d[O],G=B*H;E+=H,S+=G,C+=q*H,A+=q*G,R+=B*G}const[N,L]=FP(S/E,C/E,A/E,R/E);c[g]=N+L*y,f[g]=Math.abs(s[g]-c[g]),A8t(i,g+1,p)}if(h===C1e)break;const m=aRe(f);if(Math.abs(m)<A1e)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?A1e:(v=1-y*y)*v}return I8t(i,c,o,a)}function C8t(e){return(e=1-e*e*e)*e*e}function A8t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function I8t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const k8t=.5*Math.PI/180;function iB(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=R8t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&P8t(f,m,d,h,p)>k8t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function R8t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function P8t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function D8t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function yY(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:D8t(e)}function F5e(e,t,n){return n||e+(t?"_"+t:"")}const lV=()=>{},N8t={init:lV,add:lV,rem:lV,idx:0},i3={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},jP=Object.keys(i3).filter(e=>e!=="__count__");function O8t(e,t){return(n,r)=>Gn({name:e,aggregate_param:r,out:n||e},N8t,t)}[...jP,"__count__"].forEach(e=>{i3[e]=O8t(e,i3[e])});function B5e(e,t,n){return i3[e](n,t)}function j5e(e,t){return e.idx-t.idx}function $8t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=i3[i]())})};return e.forEach(n),Object.values(t).sort(j5e)}function L8t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function M8t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function F8t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function B8t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function U5e(e,t){const n=t||Pu,r=$8t(e),i=e.slice().sort(j5e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=L8t,s.prototype.add=M8t,s.prototype.rem=F8t,s.prototype.set=B8t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function fre(e){this._key=e?fd(e):nn,this.reset()}const Ya=fre.prototype;Ya.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ya.add=function(e){this._add.push(e)};Ya.rem=function(e){this._rem.push(e)};Ya.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Ya.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",sn(n,s)||(n[s]=1,++i);return i};Ya.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=k$e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Ya.argmin=function(e){return this.extent(e)[0]||{}};Ya.argmax=function(e){return this.extent(e)[1]||{}};Ya.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Ya.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Ya.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Kne(this.values(),e),this._get=e),this._q};Ya.q1=function(e){return this.quartile(e)[0]};Ya.q2=function(e){return this.quartile(e)[1]};Ya.q3=function(e){return this.quartile(e)[2]};Ya.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=A5e(this.values(),1e3,.05,e),this._get=e),this._ci};Ya.ci0=function(e){return this.ci(e)[0]};Ya.ci1=function(e){return this.ci(e)[1]};function sv(e){He.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}sv.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:jP},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ct(sv,He,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=Dt(Tu(v)),_=b.length;let E=0,S;for(;E<_;++E)r[S=b[E]]||(r[S]=1,t.push(S))}this._dims=Dt(e.groupby),this._dnames=this._dims.map(v=>{const b=Gs(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:yY(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Ke("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Ke("Null aggregate field specified."),m=Gs(f),g=F5e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(B5e(d,h,g))}return this._measures=this._measures.map(v=>U5e(v,v.field)),Object.create(null)},cellkey:yY(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new fre),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?b5e(t.tuple,s):pi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const j8t=1e-14;function dre(e){He.call(this,null,e)}dre.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ct(dre,He,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Tu(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=C5e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=xu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(j8t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Ac(u,Tu(t),e.name||"bin_"+Gs(t))}});function z5e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?$$e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function hre(e){He.call(this,[],e)}hre.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ct(hre,He,{transform(e,t){const n=t.fork(t.ALL),r=z5e(nn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(sw(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function V5e(e){Wi.call(this,null,U8t,e)}Ct(V5e,Wi);function U8t(e){return this.value&&!e.modified()?this.value:Dne(e.fields,e.orders)}function pre(e){He.call(this,null,e)}pre.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function z8t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ct(pre,He,{transform(e,t){const n=f=>d=>{for(var h=z8t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=pi({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function mre(e){He.call(this,null,e)}mre.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ct(mre,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=V8t(a,i,s,e.filter||dd)):n.mod=a,n.source=this.value,n.modifies(r)}});function V8t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(pi(s)),s={},s[t]=l);return i}const I1e={kde:Zne,mixture:P5e,normal:Jne,lognormal:R5e,uniform:D5e},H8t="distributions",k1e="function",q8t="field";function H5e(e,t){const n=e[k1e];sn(I1e,n)||Ke("Unknown distribution function: "+n);const r=I1e[n]();for(const i in e)i===q8t?r.data((e.from||t()).map(e[i])):i===H8t?r[i](e[i].map(s=>H5e(s,t))):typeof r[i]===k1e&&r[i](e[i]);return r}function gre(e){He.call(this,null,e)}const q5e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],W8t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:q5e},{name:"weights",type:"number",array:!0}]};gre.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:q5e.concat(W8t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ct(gre,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=H5e(e.distribution,G8t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Ke("Invalid density method: "+o),!e.extent&&!r.data&&Ke("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||bm(r.data()),l=iB(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],pi(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function G8t(e){return()=>e.materialize(e.SOURCE).source}function W5e(e,t){return e?e.map((n,r)=>t[r]||Gs(n)):null}function yre(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const G5e="bin";function vre(e){He.call(this,null,e)}vre.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:G5e}]};const Y8t=(e,t)=>MP(bm(e,t))/30;Ct(vre,He,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=yre(t.source,e.groupby,Pu),i=e.smooth||!1,s=e.field,o=e.step||Y8t(n,s),a=sw((p,m)=>s(p)-s(m)),u=e.as||G5e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of I5e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function Y5e(e){Wi.call(this,null,K8t,e),this.modified(!0)}Ct(Y5e,Wi);function K8t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ac(n=>t(n,e),Tu(t),Gs(t))}function bre(e){He.call(this,[void 0,void 0],e)}bre.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ct(bre,He,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=xu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Gs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function xre(e,t){Wi.call(this,e),this.parent=t,this.count=0}Ct(xre,Wi,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function sB(e){He.call(this,{},e),this._keys=cC();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ct(sB,He,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=sn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new xre(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=nn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(nn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=nn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(nn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=nn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function K5e(e){Wi.call(this,null,X8t,e)}Ct(K5e,Wi);function X8t(e){return this.value&&!e.modified()?this.value:Qe(e.name)?Dt(e.name).map(t=>fd(t)):fd(e.name,e.as)}function _re(e){He.call(this,cC(),e)}_re.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ct(_re,He,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=nn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(nn(f),1)});function c(f){const d=nn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function wre(e){He.call(this,[],e)}wre.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ct(wre,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=W5e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=qne(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Ere(e){He.call(this,[],e)}Ere.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ct(Ere,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Gs),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=qne(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Tre(e){He.call(this,null,e)}Tre.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ct(Tre,He,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function X5e(e){He.call(this,[],e)}Ct(X5e,He,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=pi(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const OO={value:"value",median:aRe,mean:sxt,min:bW,max:Q0},Q8t=[];function Sre(e){He.call(this,[],e)}Sre.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function J8t(e){var t=e.method||OO.value,n;if(OO[t]==null)Ke("Unrecognized imputation method: "+t);else return t===OO.value?(n=e.value!==void 0?e.value:0,()=>n):OO[t]}function Z8t(e){const t=e.field;return n=>n?t(n):NaN}Ct(Sre,He,{transform(e,t){var n=t.fork(t.ALL),r=J8t(e),i=Z8t(e),s=Gs(e.field),o=Gs(e.key),a=(e.groupby||[]).map(Gs),u=eBt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,_,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,_=p.length;y<_;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(pi(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function eBt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Q8t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Cre(e){sv.call(this,e)}Cre.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:jP},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ct(Cre,sv,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Are(e){He.call(this,null,e)}Are.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ct(Are,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=yre(r,e.groupby,e.field),s=(e.groupby||[]).map(Gs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Ke("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=bm(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Zne(h,o)[a],m=e.counts?h.length:1,g=c||bm(h);iB(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(pi(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Q5e(e){Wi.call(this,null,tBt,e)}Ct(Q5e,Wi);function tBt(e){return this.value&&!e.modified()?this.value:One(e.fields,e.flat)}function J5e(e){He.call(this,[],e),this._pending=null}Ct(J5e,He,{transform(e,t){const n=t.dataflow;return this._pending?cV(this,t,this._pending):nBt(e)?t.StopPropagation:e.values?cV(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Dt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>cV(this,t,Dt(r.data)))}});function nBt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function cV(e,t,n){n.forEach(pi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Ire(e){He.call(this,{},e)}Ire.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ct(Ire,He,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Ke('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Ke('The "as" parameter has too few output field names.'),c=c||i.map(Gs),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Ke("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function Z5e(e){Wi.call(this,null,rBt,e)}Ct(Z5e,Wi);function rBt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function eLe(e){Wi.call(this,null,iBt,e)}Ct(eLe,Wi);function iBt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function tLe(e){He.call(this,null,e)}Ct(tLe,He,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function kre(e){sv.call(this,e)}kre.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:jP,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ct(kre,sv,{_transform:sv.prototype.transform,transform(e,t){return this._transform(sBt(e,t),t)}});function sBt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Tu(n).concat(Tu(r)),o=aBt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>oBt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function oBt(e,t,n,r){return Ac(i=>t(i)===e?n(i):NaN,r,e+"")}function aBt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(W8),t?i.slice(0,t):i}function nLe(e){sB.call(this,e)}Ct(nLe,sB,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(nn(s),n,t,s);return(e.modified("field")||r&&t.modified(Tu(r)))&&Ke("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(pi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Rre(e){He.call(this,null,e)}Rre.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ct(Rre,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=W5e(e.fields,e.as||[]),s=r?(a,u)=>uBt(a,u,r,i):Q8;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=nn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,pi({}));o[nn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[nn(a)]))}),n}});function uBt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function rLe(e){He.call(this,null,e)}Ct(rLe,He,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Pre(e){He.call(this,null,e)}Pre.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const lBt=1e-14;Ct(Pre,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=yre(i,e.groupby,e.field),o=(e.groupby||[]).map(Gs),a=[],u=e.step||.01,l=e.probs||Zl(u/2,1-lBt,u),c=l.length;return s.forEach(f=>{const d=Yne(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(pi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function iLe(e){He.call(this,null,e)}Ct(iLe,He,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=nn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=qne(i);r[nn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[nn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Dre(e){He.call(this,[],e),this.count=0}Dre.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ct(Dre,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[nn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*pd()),d<o.length&&d>=u&&(f=o[d],s[nn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=nn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[nn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[nn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[nn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[nn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[nn(c)])),this.count=a,this.value=n.source=o,n}});function Nre(e){He.call(this,null,e)}Nre.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ct(Nre,He,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Zl(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,pi(s)}),n.add=t.add.concat(this.value),n}});function sLe(e){He.call(this,null,e),this.modified(!0)}Ct(sLe,He,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Ore(e){He.call(this,null,e)}const oLe=["unit0","unit1"];Ore.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Fne,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:oLe}]};Ct(Ore,He,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?dC:fC)(s.unit).offset,a=e.as||oLe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Tu(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:r5e({extent:e.extent||bm(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Bne(r),o=this.value||{},a=(n?Y$e:G$e)(s,i);return a.unit=Mr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function aLe(e){He.call(this,cC(),e)}Ct(aLe,He,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function uLe(e){He.call(this,null,e)}Ct(uLe,He,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(sw(e.sort)):t.source).map(e.field))}});function cBt(e,t,n,r){const i=s3[e](t,n);return{init:i.init||qy,update:function(s,o){o[r]=i.next(s)}}}const s3={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=s3.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Ke("ntile num must be greater than zero.");const n=s3.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Ke("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=fBt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function fBt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const dBt=Object.keys(s3);function lLe(e){const t=Dt(e.ops),n=Dt(e.fields),r=Dt(e.params),i=Dt(e.aggregate_params),s=Dt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Dt(Tu(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Gs(g),_=F5e(p,b,s[m]);if(h(g),o.push(_),sn(s3,p))a.push(cBt(p,g,y,_));else{if(g==null&&p!=="count"&&Ke("Null aggregate field specified."),p==="count"){c.push(_);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(B5e(p,v,_))}}),(c.length||f.length)&&(this.cell=hBt(f,c,d)),this.inputs=Object.keys(u)}const cLe=lLe.prototype;cLe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};cLe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function hBt(e,t,n){e=e.map(u=>U5e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new fre;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function $re(e){He.call(this,{},e),this._mlen=0,this._mods=[]}$re.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:dBt.concat(jP)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ct($re,He,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=sw(e.sort),i=yY(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new lLe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)pBt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=z5e(nn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function pBt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?wh(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Du(-1)};t.init();for(let f=0;f<u;++f)mBt(c,o,f,u),s&&gBt(c,l),t.update(c,a[f])}function mBt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function gBt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const yBt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:sv,bin:dre,collect:hre,compare:V5e,countpattern:pre,cross:mre,density:gre,dotbin:vre,expression:Y5e,extent:bre,facet:sB,field:K5e,filter:_re,flatten:wre,fold:Ere,formula:Tre,generate:X5e,impute:Sre,joinaggregate:Cre,kde:Are,key:Q5e,load:J5e,lookup:Ire,multiextent:Z5e,multivalues:eLe,params:tLe,pivot:kre,prefacet:nLe,project:Rre,proxy:rLe,quantile:Pre,relay:iLe,sample:Dre,sequence:Nre,sieve:sLe,subflow:xre,timeunit:Ore,tupleindex:aLe,values:uLe,window:$re},Symbol.toStringTag,{value:"Module"}));function A1(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const vBt=()=>typeof Image<"u"?Image:null;function Lre(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const bBt="identity",BT="linear",Ig="log",UP="pow",zP="sqrt",oB="symlog",l_="time",c_="utc",tm="sequential",pC="diverging",jT="quantile",aB="quantize",uB="threshold",Mre="ordinal",vY="point",fLe="band",Fre="bin-ordinal",Xo="continuous",VP="discrete",HP="discretizing",Cd="interpolating",Bre="temporal";function xBt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function _Bt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function jre(){const e=Uv().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Lre(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Zl(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,z1(h,m)-1),v=m===g?y:z1(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return jre().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function dLe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return dLe(t())},e}function wBt(){return dLe(jre().paddingInner(1))}var EBt=Array.prototype.map;function TBt(e){return EBt.call(e,xu)}const SBt=Array.prototype.slice;function hLe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(z1(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=TBt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=SBt.call(r),n):t.slice()},n.tickFormat=function(r,i){return mPe(e[0],Mr(e),r??10,i)},n.copy=function(){return hLe().domain(n.domain()).range(n.range())},n}const wL=new Map,pLe=Symbol("vega_scale");function mLe(e){return e[pLe]=!0,e}function CBt(e){return e&&e[pLe]===!0}function ABt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?xBt(s):s.invertExtent?_Bt(s):void 0),s.type=e,mLe(s)};return r.metadata=Lh(Dt(n)),r}function ii(e,t,n){return arguments.length>1?(wL.set(e,ABt(e,t,n)),this):gLe(e)?wL.get(e):void 0}ii(bBt,gPe);ii(BT,va,Xo);ii(Ig,vPe,[Xo,Ig]);ii(UP,bee,Xo);ii(zP,FCt,Xo);ii(oB,bPe,Xo);ii(l_,Eee,[Xo,Bre]);ii(c_,ZAt,[Xo,Bre]);ii(tm,Tee,[Xo,Cd]);ii(`${tm}-${BT}`,Tee,[Xo,Cd]);ii(`${tm}-${Ig}`,DPe,[Xo,Cd,Ig]);ii(`${tm}-${UP}`,See,[Xo,Cd]);ii(`${tm}-${zP}`,eIt,[Xo,Cd]);ii(`${tm}-${oB}`,NPe,[Xo,Cd]);ii(`${pC}-${BT}`,OPe,[Xo,Cd]);ii(`${pC}-${Ig}`,$Pe,[Xo,Cd,Ig]);ii(`${pC}-${UP}`,Cee,[Xo,Cd]);ii(`${pC}-${zP}`,tIt,[Xo,Cd]);ii(`${pC}-${oB}`,LPe,[Xo,Cd]);ii(jT,xPe,[HP,jT]);ii(aB,_Pe,HP);ii(uB,wPe,HP);ii(Fre,hLe,[VP,HP]);ii(Mre,Uv,VP);ii(fLe,jre,VP);ii(vY,wBt,VP);function gLe(e){return wL.has(e)}function aw(e,t){const n=wL.get(e);return n&&n.metadata[t]}function Ure(e){return aw(e,Xo)}function UT(e){return aw(e,VP)}function bY(e){return aw(e,HP)}function yLe(e){return aw(e,Ig)}function IBt(e){return aw(e,Bre)}function vLe(e){return aw(e,Cd)}function bLe(e){return aw(e,jT)}const kBt=["clamp","base","constant","exponent"];function xLe(e,t){const n=t[0],r=Mr(t)-n;return function(i){return e(n+i*r)}}function lB(e,t,n){return JZ(zre(t||"rgb",n),e)}function _Le(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function wLe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Du(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=ii(s)().domain([t,n]).range([0,1]),kBt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function zre(e,t){const n=$wt[RBt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function RBt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const PBt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},DBt={accent:rIt,category10:nIt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:iIt,observable10:sIt,paired:oIt,pastel1:aIt,pastel2:uIt,set1:lIt,set2:cIt,set3:fIt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function ELe(e){if(Qe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function TLe(e,t){for(const n in e)Vre(n,t(e[n]))}const R1e={};TLe(DBt,ELe);TLe(PBt,e=>lB(ELe(e)));function Vre(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(R1e[e]=t,this):R1e[e]}const h6="symbol",NBt="discrete",OBt="gradient",$Bt=e=>Qe(e)?e.map(t=>String(t)):String(e),LBt=(e,t)=>e[1]-t[1],MBt=(e,t)=>t[1]-e[1];function Hre(e,t,n){let r;return Qr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(MP(e.domain())/n||1)+1))),Ot(t)&&(r=t.step,t=t.interval),Nt(t)&&(t=e.type===l_?fC(t):e.type==c_?dC(t):Ke("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function SLe(e,t,n){let r=e.range(),i=r[0],s=Mr(r),o=LBt;if(i>s&&(r=s,s=i,i=r,o=MBt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Mr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function qre(e,t){return e.bins?SLe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function CLe(e,t,n,r,i,s){const o=t.type;let a=$Bt;if(o===l_||i===l_)a=e.timeFormat(r);else if(o===c_||i===c_)a=e.utcFormat(r);else if(yLe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=ALe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function ALe(e,t,n){const r=qre(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const xY={[jT]:"quantiles",[aB]:"thresholds",[uB]:"domain"},ILe={[jT]:"quantiles",[aB]:"domain"};function kLe(e,t){return e.bins?jBt(e.bins):e.type===Ig?ALe(e,t,!0):xY[e.type]?BBt(e[xY[e.type]]()):qre(e,t)}function FBt(e,t,n){const r=t[ILe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function BBt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function jBt(e){const t=e.slice(0,-1);return t.max=Mr(e),t}const UBt=e=>xY[e.type]||e.bins;function RLe(e,t,n,r,i,s,o){const a=ILe[t.type]&&s!==l_&&s!==c_?FBt(e,t,i):CLe(e,t,n,i,s,o);return r===h6&&UBt(t)?zBt(a):r===NBt?VBt(a):HBt(a)}const zBt=e=>(t,n,r)=>{const i=P1e(r[n+1],P1e(r.max,1/0)),s=D1e(t,e),o=D1e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},P1e=(e,t)=>e??t,VBt=e=>(t,n)=>n?e(t):null,HBt=e=>t=>e(t),D1e=(e,t)=>Number.isFinite(e)?t(e):null;function qBt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Mr(t),s=i-r;if(e.type===uB){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function WBt(e,t,n,r){const i=r||t.type;return Nt(n)&&IBt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===l_?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===c_?e.utcFormat("%A, %d %B %Y, %X UTC"):RLe(e,t,5,null,n,r,!0)}function PLe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=WBt(e,t,n.format,n.formatType);if(bY(t.type)){const s=kLe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(UT(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Mr(s))}`}}let DLe=0;function GBt(){DLe=0}const EL="p_";function Wre(e){return e&&e.gradient}function NLe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?EL:"";return i||(i=e.id="gradient_"+DLe++,r==="radial"?(e.x1=fp(e.x1,.5),e.y1=fp(e.y1,.5),e.r1=fp(e.r1,0),e.x2=fp(e.x2,.5),e.y2=fp(e.y2,.5),e.r2=fp(e.r2,.5),s=EL):(e.x1=fp(e.x1,0),e.y1=fp(e.y1,0),e.x2=fp(e.x2,1),e.y2=fp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function fp(e,t){return e??t}function OLe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const N1e={basis:{curve:SIt},"basis-closed":{curve:CIt},"basis-open":{curve:AIt},bundle:{curve:IIt,tension:"beta",value:.85},cardinal:{curve:kIt,tension:"tension",value:0},"cardinal-open":{curve:PIt,tension:"tension",value:0},"cardinal-closed":{curve:RIt,tension:"tension",value:0},"catmull-rom":{curve:DIt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:NIt,tension:"alpha",value:.5},"catmull-rom-open":{curve:OIt,tension:"alpha",value:.5},linear:{curve:Aee},"linear-closed":{curve:$It},monotone:{horizontal:MIt,vertical:LIt},natural:{curve:FIt},step:{curve:BIt},"step-after":{curve:UIt},"step-before":{curve:jIt}};function Gre(e,t,n){var r=sn(N1e,e)&&N1e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const YBt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},KBt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,XBt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,QBt=/^((\s+,?\s*)|(,\s*))/,JBt=/^[01]/;function zT(e){const t=[];return(e.match(KBt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=YBt[s],a=ZBt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function ZBt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?JBt:XBt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(QBt);u!==null&&(i+=u[0].length)}return r}const ov=Math.PI/180,e9t=1e-14,nx=Math.PI/2,Fp=Math.PI*2,aE=Math.sqrt(3)/2;var fV={},dV={},$Le=[].join;function t9t(e,t,n,r,i,s,o,a,u){const l=$Le.call(arguments);if(fV[l])return fV[l];const c=o*ov,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,_=g*a+y*u,E=v*a+b*u,S=g*e+y*t,C=v*e+b*t;let R=1/((S-_)*(S-_)+(C-E)*(C-E))-.25;R<0&&(R=0);let k=Math.sqrt(R);s==i&&(k=-k);const N=.5*(_+S)-k*(C-E),L=.5*(E+C)+k*(S-_),O=Math.atan2(E-L,_-N);let q=Math.atan2(C-L,S-N)-O;q<0&&s===1?q+=Fp:q>0&&s===0&&(q-=Fp);const H=Math.ceil(Math.abs(q/(nx+.001))),G=[];for(let K=0;K<H;++K){const J=O+K*q/H,F=O+(K+1)*q/H;G[K]=[N,L,J,F,n,r,f,d]}return fV[l]=G}function n9t(e){const t=$Le.call(e);if(dV[t])return dV[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),_=8/3*b*b/Math.sin(v),E=n+p-_*m,S=r+m+_*p,C=n+g,A=r+y,R=C+_*y,k=A-_*g;return dV[t]=[c*E+f*S,d*E+h*S,c*R+f*k,d*R+h*k,c*C+f*A,d*C+h*A]}const Ff=["l",0,0,0,0,0,0,0];function r9t(e,t,n){const r=Ff[0]=e[0];if(r==="a"||r==="A")Ff[1]=t*e[1],Ff[2]=n*e[2],Ff[3]=e[3],Ff[4]=e[4],Ff[5]=e[5],Ff[6]=t*e[6],Ff[7]=n*e[7];else if(r==="h"||r==="H")Ff[1]=t*e[1];else if(r==="v"||r==="V")Ff[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Ff[i]=(i%2==1?t:n)*e[i];return Ff}function o3(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=r9t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":O1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":O1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function O1e(e,t,n,r){const i=t9t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=n9t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const $1e=.5773502691896257,L1e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Fp)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n,i=r-n*$1e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n,i=r-n*$1e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function LLe(e){return sn(L1e,e)?L1e[e]:i9t(e)}var hV={};function i9t(e){if(!sn(hV,e)){const t=zT(e);hV[e]={draw:function(n,r){o3(n,t,0,0,Math.sqrt(r)/2)}}}return hV[e]}const by=.448084975506;function s9t(e){return e.x}function o9t(e){return e.y}function a9t(e){return e.width}function u9t(e){return e.height}function c0(e){return typeof e=="function"?e:()=>+e}function $O(e,t,n){return Math.max(t,Math.min(e,n))}function MLe(){var e=s9t,t=o9t,n=a9t,r=u9t,i=c0(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=$O(+i.call(this,c),0,v),_=$O(+s.call(this,c),0,v),E=$O(+o.call(this,c),0,v),S=$O(+a.call(this,c),0,v);if(u||(u=h=ZF()),b<=0&&_<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var C=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(C-_,m),u.bezierCurveTo(C-by*_,m,C,m+by*_,C,m+_),u.lineTo(C,A-S),u.bezierCurveTo(C,A-by*S,C-by*S,A,C-S,A),u.lineTo(p+E,A),u.bezierCurveTo(p+by*E,A,p,A-by*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+by*b,p+by*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=c0(c),l):e},l.y=function(c){return arguments.length?(t=c0(c),l):t},l.width=function(c){return arguments.length?(n=c0(c),l):n},l.height=function(c){return arguments.length?(r=c0(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=c0(c),s=f!=null?c0(f):i,a=d!=null?c0(d):i,o=h!=null?c0(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function FLe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,_=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,_-Math.PI,_),i.lineTo(o+v,a+b),i.arc(o,a,u,_,_+Math.PI)}else i.arc(f,d,p,0,Fp);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=ZF()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function qP(e,t){return e??t}const WP=e=>e.x||0,GP=e=>e.y||0,l9t=e=>e.width||0,c9t=e=>e.height||0,f9t=e=>(e.x||0)+(e.width||0),d9t=e=>(e.y||0)+(e.height||0),h9t=e=>e.startAngle||0,p9t=e=>e.endAngle||0,m9t=e=>e.padAngle||0,g9t=e=>e.innerRadius||0,y9t=e=>e.outerRadius||0,v9t=e=>e.cornerRadius||0,b9t=e=>qP(e.cornerRadiusTopLeft,e.cornerRadius)||0,x9t=e=>qP(e.cornerRadiusTopRight,e.cornerRadius)||0,_9t=e=>qP(e.cornerRadiusBottomRight,e.cornerRadius)||0,w9t=e=>qP(e.cornerRadiusBottomLeft,e.cornerRadius)||0,E9t=e=>qP(e.size,64),T9t=e=>e.size||1,cB=e=>e.defined!==!1,S9t=e=>LLe(e.shape||"circle"),C9t=aG().startAngle(h9t).endAngle(p9t).padAngle(m9t).innerRadius(g9t).outerRadius(y9t).cornerRadius(v9t),A9t=jPe().x(WP).y1(GP).y0(d9t).defined(cB),I9t=jPe().y(GP).x1(WP).x0(f9t).defined(cB),k9t=m8().x(WP).y(GP).defined(cB),R9t=MLe().x(WP).y(GP).width(l9t).height(c9t).cornerRadius(b9t,x9t,_9t,w9t),P9t=TIt().type(S9t).size(E9t),D9t=FLe().x(WP).y(GP).defined(cB).size(T9t);function Yre(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function N9t(e,t){return C9t.context(e)(t)}function O9t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?I9t:A9t).curve(Gre(r,n.orient,n.tension)).context(e)(t)}function $9t(e,t){const n=t[0],r=n.interpolate||"linear";return k9t.curve(Gre(r,n.orient,n.tension)).context(e)(t)}function mC(e,t,n,r){return R9t.context(e)(t,n,r)}function L9t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function M9t(e,t){return P9t.context(e)(t)}function F9t(e,t){return D9t.context(e)(t)}var BLe=1;function jLe(){BLe=1}function Kre(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+BLe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Yn(r)?o.path=r(null):Yre(n)?o.path=mC(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function So(e){this.clear(),e&&this.union(e)}So.prototype={clone(){return new So(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function fB(e){this.mark=e,this.bounds=this.bounds||new So}function dB(e){fB.call(this,e),this.items=this.items||[]}Ct(dB,fB);class ULe{constructor(t){this._pending=0,this._loader=t||Y8()}pending(){return this._pending}sanitizeURL(t){const n=this;return M1e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(NA(n),r)).catch(()=>(NA(n),null))}loadImage(t){const n=this,r=vBt();return M1e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=sn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>NA(n),o.onerror=()=>NA(n),o.src=s,o}).catch(i=>(NA(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function M1e(e){e._pending+=1}function NA(e){e._pending-=1}function Xg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?B9t(t,r):0))}return e}function B9t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const j9t=Fp-1e-8;let hB,p6,m6,Cx,_Y,g6,wY,EY;const t1=(e,t)=>hB.add(e,t),y6=(e,t)=>t1(p6=e,m6=t),F1e=e=>t1(e,hB.y1),B1e=e=>t1(hB.x1,e),rx=(e,t)=>_Y*e+wY*t,ix=(e,t)=>g6*e+EY*t,pV=(e,t)=>t1(rx(e,t),ix(e,t)),mV=(e,t)=>y6(rx(e,t),ix(e,t));function YP(e,t){return hB=e,t?(Cx=t*ov,_Y=EY=Math.cos(Cx),g6=Math.sin(Cx),wY=-g6):(_Y=EY=1,Cx=g6=wY=0),U9t}const U9t={beginPath(){},closePath(){},moveTo:mV,lineTo:mV,rect(e,t,n,r){Cx?(pV(e+n,t),pV(e+n,t+r),pV(e,t+r),mV(e,t)):(t1(e+n,t+r),y6(e,t))},quadraticCurveTo(e,t,n,r){const i=rx(e,t),s=ix(e,t),o=rx(n,r),a=ix(n,r);j1e(p6,i,o,F1e),j1e(m6,s,a,B1e),y6(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=rx(e,t),a=ix(e,t),u=rx(n,r),l=ix(n,r),c=rx(i,s),f=ix(i,s);U1e(p6,o,u,c,F1e),U1e(m6,a,l,f,B1e),y6(c,f)},arc(e,t,n,r,i,s){if(r+=Cx,i+=Cx,p6=n*Math.cos(i)+e,m6=n*Math.sin(i)+t,Math.abs(i-r)>j9t)t1(e-n,t-n),t1(e+n,t+n);else{const o=l=>t1(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Fp,r<0&&(r+=Fp),i=i%Fp,i<0&&(i+=Fp),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Fp,a=r-r%nx,u=0;u<4&&a>i;++u,a-=nx)o(a);else for(a=r-r%nx+nx,u=0;u<4&&a<i;++u,a=a+nx)o(a)}}};function j1e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function U1e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>e9t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(z1e(u,e,t,n,r)),0<l&&l<1&&i(z1e(l,e,t,n,r))}function z1e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var I1=(I1=A1(1,1))?I1.getContext("2d"):null;const TY=new So;function Xre(e){return function(t,n){if(!I1)return!0;e(I1,t),TY.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=TY;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(I1.isPointInPath(u,a))return!0;return!1}}function Qre(e,t){return t.contains(e.x||0,e.y||0)}function zLe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(TY.set(n,r,n+i,r+s))}function VLe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return r2(t,n,r,i,s)}function r2(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function VT(e,t){e.globalCompositeOperation=t.blend||"source-over"}function qd(e,t){return e??t}function V1e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function z9t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+qd(t.x1,.5)*r,n.y1+qd(t.y1,.5)*i,Math.max(r,i)*qd(t.r1,0),n.x1+qd(t.x2,.5)*r,n.y1+qd(t.y2,.5)*i,Math.max(r,i)*qd(t.r2,.5));else{const o=qd(t.x1,0),a=qd(t.y1,0),u=qd(t.x2,1),l=qd(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=A1(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=V1e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return V1e(s,t.stops)}function HLe(e,t,n){return Wre(n)?z9t(e,n,t.bounds):n}function TL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=HLe(e,t,t.fill),!0):!1}var V9t=[];function HT(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=HLe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||V9t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function H9t(e,t){return e.zindex-t.zindex||e.index-t.index}function Jre(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(H9t)}function Fh(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Jre(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function SL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Jre(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Zre(e){return function(t,n,r){Fh(n,i=>{(!r||r.intersects(i.bounds))&&qLe(e,t,i,i)})}}function q9t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&qLe(e,t,n.items[0],n.items)}}function qLe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(VT(t,n),n.fill&&TL(t,n,i)&&t.fill(),n.stroke&&HT(t,n,i)&&t.stroke()))}function pB(e){return e=e||dd,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,SL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function KP(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function eie(e){return pB(KP(e))}function Mx(e,t){return"translate("+e+","+t+")"}function tie(e){return"rotate("+e+")"}function W9t(e,t){return"scale("+e+","+t+")"}function WLe(e){return Mx(e.x||0,e.y||0)}function G9t(e){return Mx(e.x||0,e.y||0)+(e.angle?" "+tie(e.angle):"")}function Y9t(e){return Mx(e.x||0,e.y||0)+(e.angle?" "+tie(e.angle):"")+(e.scaleX||e.scaleY?" "+W9t(e.scaleX||1,e.scaleY||1):"")}function nie(e,t,n){function r(o,a){o("transform",G9t(a)),o("d",t(null,a))}function i(o,a){return t(YP(o,a.angle),a),Xg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=ov),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Zre(s),pick:eie(s),isect:n||Xre(s)}}var K9t=nie("arc",N9t);function X9t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Q9t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function J9t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function rie(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(YP(u),c),Xg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=KP(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:q9t(s),pick:a,isect:Qre,tip:n}}var Z9t=rie("area",O9t,X9t);function e7t(e,t){var n=t.clip;e.save(),Yn(n)?(e.beginPath(),n(e),e.clip()):GLe(e,t.group)}function GLe(e,t){e.beginPath(),Yre(t)?mC(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function YLe(e){const t=qd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function t7t(e,t){e("transform",WLe(t))}function KLe(e,t){const n=YLe(t);e("d",mC(null,t,n,n))}function n7t(e,t){e("class","background"),e("aria-hidden",!0),KLe(e,t)}function r7t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?KLe(e,t):e("d","")}function i7t(e,t,n){const r=t.clip?Kre(n,t,t):null;e("clip-path",r)}function s7t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Xg(e,t),e.translate(t.x||0,t.y||0)}function a3(e,t,n,r){const i=YLe(t);e.beginPath(),mC(e,t,(n||0)+i,(r||0)+i)}const o7t=KP(a3),a7t=KP(a3,!1),u7t=KP(a3,!0);function l7t(e,t,n,r){Fh(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(a3(e,i,s,o),VT(e,i),i.fill&&TL(e,i,u)&&e.fill(),i.stroke&&!a&&HT(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&GLe(e,i),n&&n.translate(-s,-o),Fh(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(a3(e,i,s,o),VT(e,i),HT(e,i,u)&&e.stroke())})}function c7t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return SL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Yre(u)&&!u7t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&a7t(e,u,o,a)?(e.restore(),u):(l=SL(u,v=>f7t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&o7t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function f7t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var d7t={type:"group",tag:"g",nested:!1,attr:t7t,bound:s7t,draw:l7t,pick:c7t,isect:zLe,content:i7t,background:n7t,foreground:r7t},u3={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function iie(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function sie(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function oie(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function mB(e,t){return e==="center"?t/2:e==="right"?t:0}function gB(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function h7t(e,t,n){const r=iie(t,n),i=sie(t,r),s=oie(t,r),o=(t.x||0)-mB(t.align,i),a=(t.y||0)-gB(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,u3["xmlns:xlink"],"xlink:href"),e("transform",Mx(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function p7t(e,t){const n=t.image,r=sie(t,n),i=oie(t,n),s=(t.x||0)-mB(t.align,r),o=(t.y||0)-gB(t.baseline,i);return e.set(s,o,s+r,o+i)}function m7t(e,t,n){Fh(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=iie(r,this);let s=sie(r,i),o=oie(r,i);if(s===0||o===0)return;let a=(r.x||0)-mB(r.align,s),u=(r.y||0)-gB(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(VT(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var g7t={type:"image",tag:"image",nested:!1,attr:h7t,bound:p7t,draw:m7t,pick:pB(),isect:dd,get:iie,xOffset:mB,yOffset:gB},y7t=rie("line",$9t,Q9t);function v7t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Y9t(t)),e("d",t.path)}function v6(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*ov,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=zT(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),o3(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):o3(e,u,r,i,s,o)}function b7t(e,t){return v6(YP(e,t.angle),t)?e.set(0,0,0,0):Xg(e,t,!0)}var x7t={type:"path",tag:"path",nested:!1,attr:v7t,bound:b7t,draw:Zre(v6),pick:eie(v6),isect:Xre(v6)};function _7t(e,t){e("d",mC(null,t))}function w7t(e,t){var n,r;return Xg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function H1e(e,t){e.beginPath(),mC(e,t)}var E7t={type:"rect",tag:"path",nested:!1,attr:_7t,bound:w7t,draw:Zre(H1e),pick:eie(H1e),isect:zLe};function T7t(e,t){e("transform",WLe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function S7t(e,t){var n,r;return Xg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function XLe(e,t,n){var r,i,s,o;return t.stroke&&HT(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function C7t(e,t,n){Fh(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&XLe(e,r,i)&&(VT(e,r),e.stroke())}})}function A7t(e,t,n,r){return e.isPointInStroke?XLe(e,t,1)&&e.isPointInStroke(n,r):!1}var I7t={type:"rule",tag:"line",nested:!1,attr:T7t,bound:S7t,draw:C7t,pick:pB(A7t),isect:VLe},k7t=nie("shape",L9t),R7t=nie("symbol",M9t,Qre);const q1e=O$e();var nf={height:Mm,measureWidth:aie,estimateWidth:CL,width:CL,canvas:QLe};QLe(!0);function QLe(e){nf.width=e&&I1?aie:CL}function CL(e,t){return JLe(uv(e,t),Mm(e))}function JLe(e,t){return~~(.8*e.length*t)}function aie(e,t){return Mm(e)<=0||!(t=uv(e,t))?0:ZLe(t,yB(e))}function ZLe(e,t){const n=`(${t}) ${e}`;let r=q1e.get(n);return r===void 0&&(I1.font=t,r=I1.measureText(e).width,q1e.set(n,r)),r}function Mm(e){return e.fontSize!=null?+e.fontSize||0:11}function av(e){return e.lineHeight!=null?e.lineHeight:Mm(e)+2}function P7t(e){return Qe(e)?e.length>1?e:e[0]:e}function XP(e){return P7t(e.lineBreak&&e.text&&!Qe(e.text)?e.text.split(e.lineBreak):e.text)}function uie(e){const t=XP(e);return(Qe(t)?t.length-1:0)*av(e)}function uv(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?N7t(e,n):n}function D7t(e){if(nf.width===aie){const t=yB(e);return n=>ZLe(n,t)}else if(nf.width===CL){const t=Mm(e);return n=>JLe(n,t)}else return t=>nf.width(e,t)}function N7t(e,t){var n=+e.limit,r=D7t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function QP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function yB(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Mm(e)+"px "+QP(e,t)}function lie(e){var t=e.baseline,n=Mm(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*av(e):t==="line-bottom"?.29*n-.5*av(e):0)}const O7t={left:"start",center:"middle",right:"end"},Tk=new So;function vB(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-nx,t+=r*Math.cos(i),n+=r*Math.sin(i)),Tk.x1=t,Tk.y1=n,Tk}function $7t(e,t){var n=t.dx||0,r=(t.dy||0)+lie(t),i=vB(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",O7t[t.align]||"start"),a?(u=Mx(s,o)+" "+tie(a),(n||r)&&(u+=" "+Mx(n,r))):u=Mx(s+n,o+r),e("transform",u)}function cie(e,t,n){var r=nf.height(t),i=t.align,s=vB(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+lie(t)-Math.round(.8*r),c=XP(t),f;if(Qe(c)?(r+=av(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,nf.width(t,h)),0)):f=nf.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*ov,o,a);else if(n===2)return e.rotatedPoints(t.angle*ov,o,a);return e}function L7t(e,t,n){Fh(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=yB(r),e.textAlign=r.align||"left",s=vB(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*ov),o=a=0),o+=r.dx||0,a+=(r.dy||0)+lie(r),c=XP(r),VT(e,r),Qe(c))for(l=av(r),u=0;u<c.length;++u)f=uv(r,c[u]),r.fill&&TL(e,r,i)&&e.fillText(f,o,a),r.stroke&&HT(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=uv(r,c),r.fill&&TL(e,r,i)&&e.fillText(f,o,a),r.stroke&&HT(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function M7t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=vB(t),a=o.x1,u=o.y1,l=cie(Tk,t,1),c=-t.angle*ov,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function F7t(e,t){const n=cie(Tk,e,2);return r2(t,n[0],n[1],n[2],n[3])||r2(t,n[0],n[1],n[4],n[5])||r2(t,n[4],n[5],n[6],n[7])||r2(t,n[2],n[3],n[6],n[7])}var B7t={type:"text",tag:"text",nested:!1,attr:$7t,bound:cie,draw:L7t,pick:pB(M7t),isect:F7t},j7t=rie("trail",F9t,J9t),bf={arc:K9t,area:Z9t,group:d7t,image:g7t,line:y7t,path:x7t,rect:E7t,rule:I7t,shape:k7t,symbol:R7t,text:B7t,trail:j7t};function SY(e,t,n){var r=bf[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new So),e,n)}var W1e={mark:null};function eMe(e,t,n){var r=bf[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(W1e.mark=e,l=W1e),c=SY(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new So,o)for(a=0,u=s.length;a<u;++a)t.union(SY(s[a],i,n));return e.bounds=t}const U7t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function tMe(e,t){return JSON.stringify(e,U7t,t)}function nMe(e){const t=typeof e=="string"?JSON.parse(e):e;return rMe(t)}function rMe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&rMe(n[i]);return t&&eMe(e),e}class iMe{constructor(t){arguments.length?this.root=nMe(t):(this.root=G1e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new dB(this.root)])}toJSON(t){return tMe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=G1e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function G1e(e,t){const n={bounds:new So,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function n1(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function fie(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Bo(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=n1(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Kf(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function sMe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function bB(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function z7t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=bf[i.marktype]).tip){for(o=bB(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let die=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Y8(),this._tooltip=n||V7t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=n1(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=z7t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function V7t(e,t,n,r){e.element().setAttribute("title",r||"")}class JP{constructor(t){this._el=null,this._bgcolor=null,this._loader=new ULe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const H7t="keydown",q7t="keypress",W7t="keyup",oMe="dragenter",b6="dragleave",aMe="dragover",CY="pointerdown",G7t="pointerup",AL="pointermove",x6="pointerout",uMe="pointerover",AY="mousedown",Y7t="mouseup",lMe="mousemove",IL="mouseout",cMe="mouseover",kL="click",K7t="dblclick",X7t="wheel",fMe="mousewheel",RL="touchstart",PL="touchmove",DL="touchend",Q7t=[H7t,q7t,W7t,oMe,b6,aMe,CY,G7t,AL,x6,uMe,AY,Y7t,lMe,IL,cMe,kL,K7t,X7t,fMe,RL,PL,DL],IY=AL,Sk=IL,kY=kL;class ZP extends die{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Q7t,this.pointermove=K1e([AL,lMe],[uMe,cMe],[x6,IL]),this.dragover=K1e([aMe],[oMe],[b6]),this.pointerout=X1e([x6,IL]),this.dragleave=X1e([b6])}initialize(t,n,r){return this._canvas=t&&fie(t,"canvas"),[kL,AY,CY,AL,x6,b6].forEach(i=>Y1e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(fMe,t)}pointerdown(t){this._down=this._active,this.fire(CY,t)}mousedown(t){this._down=this._active,this.fire(AY,t)}click(t){this._down===this._active&&(this.fire(kL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(RL,t,!0)}touchmove(t){this.fire(PL,t,!0)}touchend(t){this.fire(DL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===kY&&i&&i.href?this.handleHref(n,i,i.href):(t===IY||t===Sk)&&this.handleTooltip(n,i,t!==Sk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Y1e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=bB(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return bf[t.marktype].pick.call(this,o,t,n,r,i,s)}}const J7t=e=>e===RL||e===PL||e===DL?[RL,PL,DL]:[e];function Y1e(e,t){J7t(t).forEach(n=>Z7t(e,n))}function Z7t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function $I(e,t,n){t.forEach(r=>e.fire(r,n))}function K1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?$I(this,e,r):((!i||!i.exit)&&$I(this,n,r),this._active=s,$I(this,t,r),$I(this,e,r))}}function X1e(e){return function(t){$I(this,e,t),this._active=null}}function ejt(){return typeof window<"u"&&window.devicePixelRatio||1}function tjt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?ejt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class NL extends JP{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new So,this._tempb=new So}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:A1(1,1,this._options.type),t&&this._canvas&&(Kf(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)tjt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Ke("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=njt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):rjt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=bf[n.marktype];n.clip&&e7t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const njt=(e,t,n)=>new So().set(0,0,t,n).translate(-e[0],-e[1]);function rjt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class dMe extends die{constructor(t,n){super(t,n);const r=this;r._hrefHandler=gV(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=gV(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Sk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(kY,this._hrefHandler),i.removeEventListener(IY,this._tooltipHandler),i.removeEventListener(Sk,this._tooltipHandler)),this._svg=i=t&&fie(t,"svg"),i&&(i.addEventListener(kY,this._hrefHandler),i.addEventListener(IY,this._tooltipHandler),i.addEventListener(Sk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:gV(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const gV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},hMe="aria-hidden",hie="aria-label",pie="role",mie="aria-roledescription",pMe="graphics-object",gie="graphics-symbol",mMe=(e,t,n)=>({[pie]:e,[mie]:t,[hie]:n||void 0}),ijt=Lh(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Q1e={axis:{desc:"axis",caption:ajt},legend:{desc:"legend",caption:ujt},"title-text":{desc:"title",caption:e=>`Title text '${Z1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Z1e(e)}'`}},J1e={ariaRole:pie,ariaRoleDescription:mie,description:hie};function gMe(e,t){const n=t.aria===!1;if(e(hMe,n||void 0),n||t.description==null)for(const r in J1e)e(J1e[r],void 0);else{const r=t.mark.marktype;e(hie,t.description),e(pie,t.ariaRole||(r==="group"?pMe:gie)),e(mie,t.ariaRoleDescription||`${r} mark`)}}function yMe(e){return e.aria===!1?{[hMe]:!0}:ijt[e.role]?null:Q1e[e.role]?ojt(e,Q1e[e.role]):sjt(e)}function sjt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return mMe(n?pMe:gie,`${t} mark container`,e.description)}function ojt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return mMe(t.role||gie,t.desc,n.description||r(n))}catch{return null}}function Z1e(e){return Dt(e.text).join(" ")}function ajt(e){const t=e.datum,n=e.orient,r=t.title?vMe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${UT(a)?"discrete":a} scale with ${PLe(o,s,e)}`}function ujt(e){const t=e.datum,n=t.title?vMe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return cjt(r)+(n?` titled '${n}'`:"")+` for ${ljt(s)} with ${PLe(u,a,e)}`}function vMe(e){try{return Dt(Mr(e.items).items[0].text).join(" ")}catch{return null}}function ljt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Mr(e)}function cjt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const bMe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),fjt=e=>bMe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function yie(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${fjt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=bMe(u),a),toString:()=>e};return a}const xMe=e=>_Me(yie(),e)+"";function _Me(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):_Me(e,r)}return e.close()}const OL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},$L={blend:"mix-blend-mode"},wMe={fill:"none","stroke-miterlimit":10},OA=0,eve="http://www.w3.org/2000/xmlns/",Mo=u3.xmlns;class vie extends JP{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Bo(t,0,"svg",Mo),this._svg.setAttributeNS(eve,"xmlns",Mo),this._svg.setAttributeNS(eve,"xmlns:xlink",u3["xmlns:xlink"]),this._svg.setAttribute("version",u3.version),this._svg.setAttribute("class","marks"),Kf(t,1),this._root=Bo(this._svg,OA,"g",Mo),r1(this._root,wMe),Kf(this._svg,OA+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(r1(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Bo(t,OA,"rect",Mo),r1(r,{width:this._width,height:this._height,fill:n}));const i=xMe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Kf(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=bf[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,tve(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,tve(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=bf[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=nve(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Kf(c,0),n._svg;c.setAttribute("class",sMe(n));const f=yMe(n);for(const m in f)Yu(c,m,f[m]);l||Yu(c,"pointer-events",u),Yu(c,"clip-path",n.clip?Kre(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=nve(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&pjt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Fh(n,p),Kf(c,h),c}_update(t,n,r){U0=n,du=n.__values__,gMe(Ck,r),t.attr(Ck,r,this);const i=gjt[t.type];i&&i.call(this,t,n,r),U0&&this.style(U0,r)}style(t,n){if(n!=null){for(const r in OL){let i=r==="font"?QP(n):n[r];if(i===du[r])continue;const s=OL[r];i==null?t.removeAttribute(s):(Wre(i)&&(i=NLe(i,this._defs.gradient,EMe())),t.setAttribute(s,i+"")),du[r]=i}for(const r in $L)_6(t,$L[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Bo(t,OA+1,"defs",Mo)),i=djt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Bo(t,OA+1,"defs",Mo)),i=hjt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Kf(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function tve(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function djt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Bo(e,n++,"pattern",Mo);r1(o,{id:EL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Bo(o,0,"rect",Mo),r1(o,{width:1,height:1,fill:`url(${EMe()}#${t.id})`}),e=Bo(e,n++,"radialGradient",Mo),r1(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Bo(e,n++,"linearGradient",Mo),r1(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Bo(e,r,"stop",Mo),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Kf(e,r),n}function hjt(e,t,n){let r;return e=Bo(e,n,"clipPath",Mo),e.setAttribute("id",t.id),t.path?(r=Bo(e,0,"path",Mo),r.setAttribute("d",t.path)):(r=Bo(e,0,"rect",Mo),r1(r,{x:0,y:0,width:t.width,height:t.height})),Kf(e,1),n+1}function pjt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Fh(n,o=>{i=e.mark(t,o,i,r),++s}),Kf(t,1+s)}function nve(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=n1(o,r,Mo),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=n1(o,"path",Mo);s.appendChild(a),a.__data__=e;const u=n1(o,"g",Mo);s.appendChild(u),u.__data__=e;const l=n1(o,"path",Mo);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||mjt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function mjt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let U0=null,du=null;const gjt={group(e,t,n){const r=U0=t.childNodes[2];du=r.__values__,e.foreground(Ck,n,this),du=t.__values__,U0=t.childNodes[1],e.content(Ck,n,this);const i=U0=t.childNodes[0];e.background(Ck,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==du.events&&(Yu(r,"pointer-events",s),Yu(i,"pointer-events",s),du.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Yu(r,"display",null),this.style(i,n),Yu(i,"stroke",null),o&&(n.fill=null),du=r.__values__,this.style(r,n),o&&(n.fill=o),U0=null}else Yu(r,"display","none")},image(e,t,n){n.smooth===!1?(_6(t,"image-rendering","optimizeSpeed"),_6(t,"image-rendering","pixelated")):_6(t,"image-rendering",null)},text(e,t,n){const r=XP(n);let i,s,o,a;Qe(r)?(s=r.map(u=>uv(n,u)),i=s.join(`
`),i!==du.text&&(Kf(t,0),o=t.ownerDocument,a=av(n),s.forEach((u,l)=>{const c=n1(o,"tspan",Mo);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),du.text=i)):(s=uv(n,r),s!==du.text&&(t.textContent=s,du.text=s)),Yu(t,"font-family",QP(n)),Yu(t,"font-size",Mm(n)+"px"),Yu(t,"font-style",n.fontStyle),Yu(t,"font-variant",n.fontVariant),Yu(t,"font-weight",n.fontWeight)}};function Ck(e,t,n){t!==du[e]&&(n?yjt(U0,e,t,n):Yu(U0,e,t),du[e]=t)}function _6(e,t,n){n!==du[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),du[t]=n)}function r1(e,t){for(const n in t)Yu(e,n,t[n])}function Yu(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function yjt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function EMe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class TMe extends JP{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=yie();n.open("svg",Gn({},u3,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",wMe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=bf[n.marktype],i=r.tag,s=[gMe,r.attr];t.open("g",{class:sMe(n),"clip-path":n.clip?Kre(this,n,n.group):null},yMe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=XP(a);if(Qe(l)){const c={x:0,dy:av(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(uv(a,l[f])).close()}else t.text(uv(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Fh(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Fh(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&vjt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:EL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function vjt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=QP(t),e["font-size"]=Mm(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in OL){let a=t[o];const u=OL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Wre(a)&&(a=NLe(a,i.gradient,"")),e[u]=a)}for(const o in $L){const a=t[o];a!=null&&(s=s||[],s.push(`${$L[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const eh={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function bjt(e){eh.svgMarkTypes=e.svgMarkTypes??["text"],eh.svgOnTop=e.svgOnTop??!0,eh.debug=e.debug??!1}class RY extends JP{constructor(t){super(t),this._svgRenderer=new vie(t),this._canvasRenderer=new NL(t)}initialize(t,n,r,i,s){this._root_el=Bo(t,0,"div");const o=Bo(this._root_el,0,"div"),a=Bo(this._root_el,1,"div");return this._root_el.style.position="relative",eh.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=eh.svgOnTop?a:o,this._canvasEl=eh.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return eh.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!eh.svgMarkTypes.includes(s));this._svgRenderer.render(t,eh.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return eh.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class SMe extends ZP{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Bo(Bo(t,0,"div"),eh.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const CMe="canvas",AMe="hybrid",IMe="png",kMe="svg",RMe="none",i1={Canvas:CMe,PNG:IMe,SVG:kMe,Hybrid:AMe,None:RMe},f_={};f_[CMe]=f_[IMe]={renderer:NL,headless:NL,handler:ZP};f_[kMe]={renderer:vie,headless:TMe,handler:dMe};f_[AMe]={renderer:RY,headless:RY,handler:SMe};f_[RMe]={};function xB(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(f_[e]=t,this):f_[e]}function PMe(e,t,n){const r=[],i=new So().union(t),s=e.marktype;return s?DMe(e,i,n,r):s==="group"?NMe(e,i,n,r):Ke("Intersect scene must be mark node or group item.")}function DMe(e,t,n,r){if(xjt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)NMe(i[a],t,n,r);else for(const u=bf[s].isect;a<o;++a){const l=i[a];OMe(l,t,u)&&r.push(l)}}return r}function xjt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function NMe(e,t,n,r){n&&n(e.mark)&&OMe(e,t,bf.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)DMe(i[u],t,n,r);t.translate(o,a)}return r}function OMe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const yV=new So;function $Me(e){const t=e.clip;if(Yn(t))t(YP(yV.clear()));else if(t)yV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(yV)}const _jt=1e-9;function bie(e,t,n){return e===t?!0:n==="path"?LMe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Qr(e)&&Qr(t)?Math.abs(e-t)<=_jt:!e||!t||!Ot(e)&&!Ot(t)?e==t:wjt(e,t)}function LMe(e,t){return bie(zT(e),zT(t))}function wjt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!bie(e[i],t[i],i))return!1;return typeof e==typeof t}function Ejt(){jLe(),GBt()}const qT="top",ch="left",gh="right",lv="bottom",Tjt="top-left",Sjt="top-right",Cjt="bottom-left",Ajt="bottom-right",xie="start",PY="middle",Ju="end",Ijt="x",kjt="y",_B="group",_ie="axis",wie="title",Rjt="frame",Pjt="scope",Eie="legend",MMe="row-header",FMe="row-footer",BMe="row-title",jMe="column-header",UMe="column-footer",zMe="column-title",Djt="padding",Njt="symbol",VMe="fit",HMe="fit-x",qMe="fit-y",Ojt="pad",Tie="none",LO="all",DY="each",Sie="flush",s1="column",o1="row";function WMe(e){He.call(this,null,e)}Ct(WMe,He,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=bf[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=MO(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===_B||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(MO(l,o))),r.role){case _ie:case Eie:case wie:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(MO(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(MO(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return $Me(r),t.modifies("bounds")}});function MO(e,t,n){return t(e.bounds.clear(),e,n)}const rve=":vega_identifier:";function Cie(e){He.call(this,0,e)}Cie.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ct(Cie,He,{transform(e,t){const n=$jt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function $jt(e){return e._signals[rve]||(e._signals[rve]=e.add(0))}function GMe(e){He.call(this,null,e)}Ct(GMe,He,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Ljt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===_B?dB:fB;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Ljt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function YMe(e){He.call(this,null,e)}const ive={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!KMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},KMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),sve=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(KMe(i,s=e[n].bounds,t))return!0},Mjt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Fjt=(e,t,n)=>{var r=e.range(),i=new So;return t===qT||t===lv?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},ove=e=>(e.forEach(t=>t.opacity=1),e),ave=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ct(YMe,He,{transform(e,t){const n=ive[e.method]||ive.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(ove(i),t=ave(t,e)),t;if(i=i.filter(Mjt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=ove(i),t=ave(t,e),s.length>=3&&sve(s,r)){do s=n(s,r);while(s.length>=3&&sve(s,r));s.length<3&&!Mr(i).opacity&&(s.length>1&&(Mr(s).opacity=0),Mr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Fjt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function XMe(e){He.call(this,null,e)}Ct(XMe,He,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const cu=new So;function i2(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Bjt(e){var t=e.items[0].orient;return t===ch||t===gh}function jjt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Ujt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=jjt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&uie(p),v=0,b=0,_,E;switch(cu.clear().union(g),g.clear(),(_=u[0])>-1&&g.union(i.items[_].bounds),(_=u[1])>-1&&g.union(i.items[_].bounds),a){case qT:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&FO(e,p,E,m,y,0,-1,g);break;case ch:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&FO(e,p,E,m,y,1,-1,g);break;case gh:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&FO(e,p,E,m,y,1,1,g);break;case lv:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&FO(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return Xg(g.translate(v,b),i),i2(i,"x",v+o)|i2(i,"y",b+o)&&(i.bounds=cu,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function FO(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const uve=(e,t)=>Math.floor(Math.min(e,t)),lve=(e,t)=>Math.ceil(Math.max(e,t));function zjt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===_B)switch(i.role){case _ie:case Eie:case wie:break;case MMe:o.rowheaders.push(...s);break;case FMe:o.rowfooters.push(...s);break;case jMe:o.colheaders.push(...s);break;case UMe:o.colfooters.push(...s);break;case BMe:o.rowtitle=s[0];break;case zMe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Vjt(e){return new So().set(0,0,e.width||0,e.height||0)}function Hjt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function bs(e,t,n){const r=Ot(e)?e[t]:e;return r??(n!==void 0?n:0)}function cve(e){return e<0?Math.ceil(-e):0}function QMe(e,t,n){var r=!n.nodirty,i=n.bounds===Sie?Vjt:Hjt,s=cu.set(0,0,0,0),o=bs(n.align,s1),a=bs(n.align,o1),u=bs(n.padding,s1),l=bs(n.padding,o1),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),_=Array(d),E=Array(d),S,C,A,R,k,N,L,O,B,q,H;for(C=0;C<c;++C)p[C]=0;for(C=0;C<f;++C)y[C]=0;for(C=0;C<d;++C)N=t[C],k=E[C]=i(N),N.x=N.x||0,b[C]=0,N.y=N.y||0,_[C]=0,A=C%c,R=~~(C/c),m=Math.max(m,L=Math.ceil(k.x2)),v=Math.max(v,O=Math.ceil(k.y2)),p[A]=Math.max(p[A],L),y[R]=Math.max(y[R],O),h[C]=u+cve(k.x1),g[C]=l+cve(k.y1),r&&e.dirty(t[C]);for(C=0;C<d;++C)C%c===0&&(h[C]=0),C<c&&(g[C]=0);if(o===DY)for(A=1;A<c;++A){for(H=0,C=A;C<d;C+=c)H<h[C]&&(H=h[C]);for(C=A;C<d;C+=c)h[C]=H+p[A-1]}else if(o===LO){for(H=0,C=0;C<d;++C)C%c&&H<h[C]&&(H=h[C]);for(C=0;C<d;++C)C%c&&(h[C]=H+m)}else for(o=!1,A=1;A<c;++A)for(C=A;C<d;C+=c)h[C]+=p[A-1];if(a===DY)for(R=1;R<f;++R){for(H=0,C=R*c,S=C+c;C<S;++C)H<g[C]&&(H=g[C]);for(C=R*c;C<S;++C)g[C]=H+y[R-1]}else if(a===LO){for(H=0,C=c;C<d;++C)H<g[C]&&(H=g[C]);for(C=c;C<d;++C)g[C]=H+v}else for(a=!1,R=1;R<f;++R)for(C=R*c,S=C+c;C<S;++C)g[C]+=y[R-1];for(B=0,C=0;C<d;++C)B=h[C]+(C%c?B:0),b[C]+=B-t[C].x;for(A=0;A<c;++A)for(q=0,C=A;C<d;C+=c)q+=g[C],_[C]+=q-t[C].y;if(o&&bs(n.center,s1)&&f>1)for(C=0;C<d;++C)k=o===LO?m:p[C%c],B=k-E[C].x2-t[C].x-b[C],B>0&&(b[C]+=B/2);if(a&&bs(n.center,o1)&&c!==1)for(C=0;C<d;++C)k=a===LO?v:y[~~(C/c)],q=k-E[C].y2-t[C].y-_[C],q>0&&(_[C]+=q/2);for(C=0;C<d;++C)s.union(E[C].translate(b[C],_[C]));switch(B=bs(n.anchor,Ijt),q=bs(n.anchor,kjt),bs(n.anchor,s1)){case Ju:B-=s.width();break;case PY:B-=s.width()/2}switch(bs(n.anchor,o1)){case Ju:q-=s.height();break;case PY:q-=s.height()/2}for(B=Math.round(B),q=Math.round(q),s.clear(),C=0;C<d;++C)t[C].mark.bounds.clear();for(C=0;C<d;++C)N=t[C],N.x+=b[C]+=B,N.y+=_[C]+=q,s.union(N.mark.bounds.union(N.bounds.translate(b[C],_[C]))),r&&e.dirty(N);return s}function qjt(e,t,n){var r=zjt(t),i=r.marks,s=n.bounds===Sie?Wjt:Gjt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=QMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=bs(n.headerBand,o1,null),c=BO(e,r.rowheaders,i,a,u,-bs(o,"rowHeader"),uve,0,s,"x1",0,a,1,m)),r.colheaders&&(m=bs(n.headerBand,s1,null),f=BO(e,r.colheaders,i,a,a,-bs(o,"columnHeader"),uve,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=bs(n.footerBand,o1,null),d=BO(e,r.rowfooters,i,a,u,bs(o,"rowFooter"),lve,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=bs(n.footerBand,s1,null),h=BO(e,r.colfooters,i,a,a,bs(o,"columnFooter"),lve,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=bs(n.titleAnchor,o1),g=bs(o,"rowTitle"),g=p===Ju?d+g:c-g,m=bs(n.titleBand,o1,.5),fve(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=bs(n.titleAnchor,s1),g=bs(o,"columnTitle"),g=p===Ju?h+g:f-g,m=bs(n.titleBand,s1,.5),fve(e,r.coltitle,g,1,y,m))}function Wjt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Gjt(e,t){return e.bounds[t]}function BO(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,_,E,S,C,A,R;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,_=t.length;v<_;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,_=t.length;v<_;++v,y+=f){for(S=t[v],E=S.mark.bounds,b=y;b>=0&&(C=n[b])==null;b-=d);a?(A=h==null?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),R=m):(A=m,R=h==null?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),E.union(S.bounds.translate(A-(S.x||0),R-(S.y||0))),S.x=A,S.y=R,e.dirty(S),g=o(g,E[l])}return g}function fve(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Yjt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Kjt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Xjt(e,t,n,r,i,s,o){const a=Yjt(n,t),u=Kjt(e,a("offset",0)),l=a("anchor",xie),c=l===Ju?1:l===PY?.5:0,f={align:DY,bounds:a("bounds",Sie),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case ch:f.anchor={x:Math.floor(r.x1)-u,column:Ju,y:c*(o||r.height()+2*r.y1),row:l};break;case gh:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case qT:f.anchor={y:Math.floor(i.y1)-u,row:Ju,x:c*(s||i.width()+2*i.x1),column:l};break;case lv:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Tjt:f.anchor={x:u,y:u};break;case Sjt:f.anchor={x:s-u,y:u,column:Ju};break;case Cjt:f.anchor={x:u,y:o-u,row:Ju};break;case Ajt:f.anchor={x:s-u,y:o-u,column:Ju,row:Ju};break}return f}function Qjt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Zjt(e,n,n.items[0].items[0]),s=Jjt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Njt&&eUt(n.items[0].items[0].items[0].items),i!==Tie&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Xg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function Jjt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Zjt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&$A(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case ch:i+=Math.ceil(o.bounds.width())+u;break;case gh:case lv:break;default:s+=o.bounds.height()+u}switch((i||s)&&$A(e,n,i,s),o.orient){case ch:c+=uE(t,n,o,a,1,1);break;case gh:l+=uE(t,n,o,Ju,0,0)+u,c+=uE(t,n,o,a,1,1);break;case lv:l+=uE(t,n,o,a,0,0),c+=uE(t,n,o,Ju,-1,0,1)+u;break;default:l+=uE(t,n,o,a,0,0)}(l||c)&&$A(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&($A(e,n,-l,0),$A(e,o,-l,0))}}function uE(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:uie(n);return Math.round(r===xie?f:r===Ju?d-h:.5*(c-h))}function $A(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function eUt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function tUt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===ch||a===gh?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==_B?a===ch?(p=i.y2,h=i.y1):a===gh?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===ch&&(p=r,h=0),b=u===xie?p:u===Ju?h:(p+h)/2,d&&d.text){switch(a){case qT:case lv:v=f.bounds.height()+c;break;case ch:y=f.bounds.width()+c;break;case gh:y=-f.bounds.width()-c;break}cu.clear().union(d.bounds),cu.translate(y-(d.x||0),v-(d.y||0)),i2(d,"x",y)|i2(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(cu),d.mark.bounds.clear().union(cu),e.dirty(d)),cu.clear().union(d.bounds)}else cu.clear();switch(cu.union(f.bounds),a){case qT:m=b,g=i.y1-cu.height()-l;break;case ch:m=i.x1-cu.width()-l,g=b;break;case gh:m=i.x2+cu.width()+l,g=b;break;case lv:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return i2(s,"x",m)|i2(s,"y",g)&&(cu.translate(m,g),e.dirty(s),s.bounds.clear().union(cu),t.bounds.clear().union(cu),e.dirty(s)),s.bounds}function JMe(e){He.call(this,null,e)}Ct(JMe,He,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&qjt(n,r,e.layout),rUt(n,r,e)}),nUt(e.mark.group)?t.reflow():t}});function nUt(e){return e&&e.mark.role!=="legend-entry"}function rUt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new So().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case _ie:h=Bjt(f)?a:u,h.union(Ujt(e,f,i,s));break;case wie:c=f;break;case Eie:l.push(Qjt(e,f));break;case Rjt:case Pjt:case MMe:case FMe:case BMe:case jMe:case UMe:case zMe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||gh,d!==Tie&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];QMe(e,v,Xjt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===VMe||n.autosize.type===HMe||n.autosize.type===qMe))switch(y.orient){case ch:case gh:o.add(v.x1,0).add(v.x2,0);break;case qT:case lv:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(tUt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),iUt(e,t,o,n)}function iUt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Djt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Tie?(l=0,f=0,u=o,c=a):s===VMe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===HMe?(u=Math.max(0,o-l-d),a=c+f+h):s===qMe?(o=u+l+d,c=Math.max(0,a-f-h)):s===Ojt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const sUt=Object.freeze(Object.defineProperty({__proto__:null,bound:WMe,identifier:Cie,mark:GMe,overlap:YMe,render:XMe,viewlayout:JMe},Symbol.toStringTag,{value:"Module"}));function ZMe(e){He.call(this,null,e)}Ct(ZMe,He,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Hre(s,o,e.minstep),u=e.format||CLe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?SLe(s,e.values,a):qre(s,a);return i&&(r.rem=i),i=l.map((c,f)=>pi({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(pi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function eFe(e){He.call(this,null,e)}function oUt(){return pi({})}function aUt(e){const t=cC().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ct(eFe,He,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||oUt,s=e.key||nn,o=this.value;return Qe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Ke("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=aUt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function tFe(e){He.call(this,null,e)}Ct(tFe,He,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Qe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Cy,u=i.enter||Cy,l=i.exit||Cy,c=(s&&!o?i[s]:a)||Cy;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Cy&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Cy&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Cy){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function nFe(e){He.call(this,[],e)}Ct(nFe,He,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||h6,o=e.scale,a=+e.limit,u=Hre(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===h6,c=e.format||RLe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||kLe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===h6?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Yn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Du(m=p||8),i=i.map((y,v)=>pi({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(pi({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===OBt?(d=o.domain(),h=wLe(o,d[0],Mr(d)),f.length<3&&!e.values&&d[0]!==Mr(d)&&(f=[d[0],Mr(d)]),i=f.map((y,v)=>pi({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=qBt(o),i=f.map((y,v)=>pi({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const uUt=e=>e.source.x,lUt=e=>e.source.y,cUt=e=>e.target.x,fUt=e=>e.target.y;function Aie(e){He.call(this,{},e)}Aie.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ct(Aie,He,{transform(e,t){var n=e.sourceX||uUt,r=e.sourceY||lUt,i=e.targetX||cUt,s=e.targetY||fUt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=dve.get(u+"-"+a)||dve.get(u);return l||Ke("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const rFe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,dUt=(e,t,n,r)=>rFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),iFe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},hUt=(e,t,n,r)=>iFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),sFe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},pUt=(e,t,n,r)=>sFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),mUt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,gUt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,yUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},vUt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},bUt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},xUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},dve=cC({line:rFe,"line-radial":dUt,arc:iFe,"arc-radial":hUt,curve:sFe,"curve-radial":pUt,"orthogonal-horizontal":mUt,"orthogonal-vertical":gUt,"orthogonal-radial":yUt,"diagonal-horizontal":vUt,"diagonal-vertical":bUt,"diagonal-radial":xUt});function Iie(e){He.call(this,null,e)}Iie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ct(Iie,He,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||aC,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/lRe(l),h=Zl(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const _Ut=5;function wUt(e){const t=e.type;return!e.bins&&(t===BT||t===UP||t===zP)}function oFe(e){return Ure(e)&&e!==tm}const EUt=Lh(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function aFe(e){He.call(this,null,e),this.modified(!0)}Ct(aFe,He,{transform(e,t){var n=t.dataflow,r=this.value,i=TUt(e);(!r||i!==r.type)&&(this.value=r=ii(i)());for(i in e)if(!EUt[i]){if(i==="padding"&&oFe(r.type))continue;Yn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return RUt(r,e,kUt(r,e,CUt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function TUt(e){var t=e.type,n="",r;return t===tm?tm+"-"+BT:(SUt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?tm+"-":r===3?pC+"-":""),(n+t||BT).toLowerCase())}function SUt(e){const t=e.type;return Ure(t)&&t!==l_&&t!==c_&&(e.scheme||e.range&&e.range.length&&e.range.every(Nt))}function CUt(e,t,n){const r=AUt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&wUt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return oFe(s)&&t.padding&&i[0]!==Mr(i)&&(i=IUt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(uFe(s,i,n)),s===Mre&&e.unknown(t.domainImplicit?iG:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Hre(e,t.nice)||null),i.length}function AUt(e,t,n){return t?(e.domain(uFe(e.type,t,n)),t.length):-1}function IUt(e,t,n,r,i,s){var o=Math.abs(Mr(n)-n[0]),a=o/(o-2*r),u=e===Ig?Rne(t,null,a):e===zP?bL(t,null,a,.5):e===UP?bL(t,null,a,i||1):e===oB?Pne(t,null,a,s||1):kne(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function uFe(e,t,n){if(yLe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Et(t))}return t}function kUt(e,t,n){let r=t.bins;if(r&&!Qe(r)){const i=e.domain(),s=i[0],o=Mr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Ke("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Zl(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Fre&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function RUt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=PUt(r,t,n);else if(t.scheme&&(s=DUt(r,t,n),Yn(s))){if(e.interpolator)return e.interpolator(s);Ke(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&vLe(r))return e.interpolator(lB(NY(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(zre(t.interpolate,t.interpolateGamma)):Yn(e.round)?e.round(i):Yn(e.rangeRound)&&e.interpolate(i?hP:Vg),s&&e.range(NY(s,t.reverse))}function PUt(e,t,n){e!==fLe&&e!==vY&&Ke("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===vY?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Lre(n,i,r)]}function DUt(e,t,n){var r=t.schemeExtent,i,s;return Qe(t.scheme)?s=lB(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Vre(i),s||Ke(`Unrecognized scheme name: ${t.scheme}`)),n=e===uB?n+1:e===Fre?n-1:e===jT||e===aB?+t.schemeCount||_Ut:n,vLe(e)?hve(s,r,t.reverse):Yn(s)?_Le(hve(s,r),n):e===Mre?s:s.slice(0,n)}function hve(e,t,n){return Yn(e)&&(t||n)?xLe(e,NY(t||[0,1],n)):e}function NY(e,t){return t?e.slice().reverse():e}function lFe(e){He.call(this,null,e)}Ct(lFe,He,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(sw(e.sort)),this.modified(n),t}});const pve="zero",cFe="center",fFe="normalize",dFe=["y0","y1"];function kie(e){He.call(this,null,e)}kie.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:pve,values:[pve,cFe,fFe]},{name:"as",type:"string",array:!0,length:2,default:dFe}]};Ct(kie,He,{transform(e,t){var n=e.as||dFe,r=n[0],i=n[1],s=sw(e.sort),o=e.field||aC,a=e.offset===cFe?NUt:e.offset===fFe?OUt:$Ut,u,l,c,f;for(u=LUt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function NUt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function OUt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function $Ut(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function LUt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const MUt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:ZMe,datajoin:eFe,encode:tFe,legendentries:nFe,linkpath:Aie,pie:Iie,scale:aFe,sortitems:lFe,stack:kie},Symbol.toStringTag,{value:"Module"}));var FUt=Math.abs,OY=Math.cos,LL=Math.sin,BUt=1e-6,hFe=Math.PI,$Y=hFe/2,mve=jUt(2);function gve(e){return e>1?$Y:e<-1?-$Y:Math.asin(e)}function jUt(e){return e>0?Math.sqrt(e):0}function UUt(e,t){var n=e*LL(t),r=30,i;do t-=i=(t+LL(t)-n)/(1+OY(t));while(FUt(i)>BUt&&--r>0);return t/2}function zUt(e,t,n){function r(i,s){return[e*i*OY(s=UUt(n,s)),t*LL(s)]}return r.invert=function(i,s){return s=gve(s/t),[i/(e*OY(s)),gve((2*s+LL(2*s))/n)]},r}var VUt=zUt(mve/$Y,mve,hFe);function HUt(){return Nm(VUt).scale(169.529)}const qUt=W3e(),LY=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function WUt(e,t){return function n(){const r=t();return r.type=e,r.path=W3e().projection(r),r.copy=r.copy||function(){const i=n();return LY.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},mLe(r)}}function Rie(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(ML[e]=WUt(e,t),this):ML[e]||null}function pFe(e){return e&&e.path||qUt}const ML={albers:Y3e,albersusa:fSt,azimuthalequalarea:dSt,azimuthalequidistant:hSt,conicconformal:gSt,conicequalarea:x5,conicequidistant:bSt,equalEarth:_St,equirectangular:ySt,gnomonic:wSt,identity:ESt,mercator:pSt,mollweide:HUt,naturalEarth1:TSt,orthographic:SSt,stereographic:CSt,transversemercator:ASt};for(const e in ML)Rie(e,ML[e]);function GUt(){}const f0=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function mFe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),YUt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(KUt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,f0[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,f0[m|g<<1].forEach(b);for(f0[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,f0[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,f0[m|g<<1|y<<2|v<<3].forEach(b);f0[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,f0[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,f0[y<<2|v<<3].forEach(b);f0[y<<3].forEach(b);function b(_){var E=[_[0][0]+h,_[0][1]+p],S=[_[1][0]+h,_[1][1]+p],C=o(E),A=o(S),R,k;(R=d[C])?(k=f[A])?(delete d[R.end],delete f[k.start],R===k?(R.ring.push(S),c(R.ring)):f[R.start]=d[k.end]={start:R.start,end:k.end,ring:R.ring.concat(k.ring)}):(delete d[R.end],R.ring.push(S),d[R.end=A]=R):(R=f[A])?(k=d[C])?(delete f[R.start],delete d[k.end],R===k?(R.ring.push(S),c(R.ring)):f[k.start]=d[R.end]={start:k.start,end:R.end,ring:k.ring.concat(R.ring)}):(delete f[R.start],R.ring.unshift(E),f[R.start=C]=R):f[C]=d[A]={start:C,end:A,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Ke("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:GUt,r):n===a},r}function YUt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function KUt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=XUt(e,t[n]))return i;return 0}function XUt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(QUt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function QUt(e,t,n){var r;return JUt(e,t,n)&&ZUt(e[r=+(e[0]===t[0])],n[r],t[r])}function JUt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function ZUt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function gFe(e,t,n){return function(r){var i=bm(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?V1(s,o,e):a/(e+1);return Zl(s+u,o,u)}}function Pie(e){He.call(this,null,e)}Pie.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ct(Pie,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Pu,s=mFe().smooth(e.smooth!==!1),o=e.thresholds||ezt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Qe(o)?o:o(c.values));tzt(f,c,l,e),f.forEach(d=>{u.push(Q8(l,pi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function ezt(e,t,n){const r=gFe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Q0(t(i).values)))}function tzt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Yn(i)&&(i=i(n,r)),Yn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Qr(i)?i:i[0])||1,a=(Qr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(yFe(t,o,a,u,l))}function yFe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function yve(e,t,n){const r=e>=0?e:Xne(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function vV(e){return Yn(e)?e:Du(+e)}function vFe(){var e=u=>u[0],t=u=>u[1],n=aC,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=yve(r[0],u,e)>>o,f=yve(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(_=>{const E=d+(+e(_)>>o),S=h+(+t(_)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(_))}),c>0&&f>0?(lE(p,m,g,y,c),cE(p,m,y,g,f),lE(p,m,g,y,c),cE(p,m,y,g,f),lE(p,m,g,y,c),cE(p,m,y,g,f)):c>0?(lE(p,m,g,y,c),lE(p,m,y,g,c),lE(p,m,g,y,c),v=y):f>0&&(cE(p,m,g,y,f),cE(p,m,y,g,f),cE(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/lRe(v);for(let _=0,E=p*m;_<E;++_)v[_]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=vV(u),a):e},a.y=function(u){return arguments.length?(t=vV(u),a):t},a.weight=function(u){return arguments.length?(n=vV(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Ke("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Ke("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Dt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Ke("invalid bandwidth"),r=u,a):r},a}function lE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function cE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Die(e){He.call(this,null,e)}Die.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const nzt=["x","y","weight","size","cellSize","bandwidth"];function bFe(e,t){return nzt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ct(Die,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=rzt(r,e.groupby),s=(e.groupby||[]).map(Gs),o=bFe(vFe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>pi(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function rzt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Nie(e){He.call(this,null,e)}Nie.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ct(Nie,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=mFe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||gFe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=bFe(vFe(),e)(i,!0),u=yFe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Qe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(pi),n}});const MY="Feature",Oie="FeatureCollection",izt="MultiPoint";function $ie(e){He.call(this,null,e)}$ie.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ct($ie,He,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Pu,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Tu(a))||s&&t.modified(Tu(s))||o&&t.modified(Tu(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:MY,geometry:{type:izt,coordinates:r}})),this.value={type:Oie,features:n}}});function Lie(e){He.call(this,null,e)}Lie.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ct(Lie,He,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Pu,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=pFe(e.projection),n.materialize().reflow()):o=i===Pu||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=szt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function szt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Mie(e){He.call(this,null,e)}Mie.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ct(Mie,He,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Fie(e){He.call(this,null,e)}Fie.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ct(Fie,He,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=ozt(pFe(e.projection),e.field||fd("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function ozt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Bie(e){He.call(this,[],e),this.generator=HTt()}Bie.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ct(Bie,He,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Yn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(b5e(n[0],i)):t.add.push(pi(i)),n[0]=i,t}});function jie(e){He.call(this,null,e)}jie.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ct(jie,He,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Pu,s=uzt(e.opacity,e),o=azt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Q0(n.map(l=>Q0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Gn({},l,u);r||(f.$max=Q0(c.values||[])),l[a]=lzt(c,f,o.dep?o:Du(o(f)),s.dep?s:Du(s(f)))}),t.reflow(!0).modifies(a)}});function azt(e,t){let n;return Yn(e)?(n=r=>H1(e(r,t)),n.dep=xFe(e)):n=Du(H1(e||"#888")),n}function uzt(e,t){let n;return Yn(e)?(n=r=>e(r,t),n.dep=xFe(e)):e?n=Du(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function xFe(e){if(!Yn(e))return!1;const t=Lh(Tu(e));return t.$x||t.$y||t.$value||t.$max}function lzt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:qy,d=A1(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const _=n(t);m[y+0]=_.r,m[y+1]=_.g,m[y+2]=_.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function _Fe(e){He.call(this,null,e),this.modified(!0)}Ct(_Fe,He,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=fzt(e.type),LY.forEach(r=>{e[r]!=null&&vve(n,r,e[r])})):LY.forEach(r=>{e.modified(r)&&vve(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&czt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function czt(e,t){const n=dzt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function fzt(e){const t=Rie((e||"mercator").toLowerCase());return t||Ke("Unrecognized projection type: "+e),t()}function vve(e,t,n){Yn(e[t])&&e[t](n)}function dzt(e){return e=Dt(e),e.length===1?e[0]:{type:Oie,features:e.reduce((t,n)=>t.concat(hzt(n)),[])}}function hzt(e){return e.type===Oie?e.features:Dt(e).filter(t=>t!=null).map(t=>t.type===MY?t:{type:MY,geometry:t})}const pzt=Object.freeze(Object.defineProperty({__proto__:null,contour:Nie,geojson:$ie,geopath:Lie,geopoint:Mie,geoshape:Fie,graticule:Bie,heatmap:jie,isocontour:Pie,kde2d:Die,projection:_Fe},Symbol.toStringTag,{value:"Module"})),bve={center:O2t,collide:Z2t,nbody:cTt,link:tTt,x:fTt,y:dTt},LI="forces",FY=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],mzt=["static","iterations"],wFe=["x","y","vx","vy"];function Uie(e){He.call(this,null,e)}Uie.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:wFe}]};Ct(Uie,He,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(FY),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&EFe(n,e,0,t)):(this.value=n=yzt(t.source,e),n.on("tick",gzt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(mzt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==LI||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(wFe)}});function gzt(e,t){return()=>e.touch(t).run()}function yzt(e,t){const n=lTt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),EFe(n,t,!0).on("end",()=>s=!0)}function EFe(e,t,n,r){var i=Dt(t.forces),s,o,a,u;for(s=0,o=FY.length;s<o;++s)a=FY[s],a!==LI&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=LI+s,a=n||t.modified(LI,s)?bzt(i[s]):r&&vzt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(LI+s,null);return e.numForces=i.length,e}function vzt(e,t){var n,r;for(n in e)if(Yn(r=e[n])&&t.modified(Tu(r)))return 1;return 0}function bzt(e){var t,n;sn(bve,e.force)||Ke("Unrecognized force: "+e.force),t=bve[e.force]();for(n in e)Yn(t[n])&&xzt(t[n],e[n],e);return t}function xzt(e,t,n){e(Yn(t)?r=>t(r,n):t)}const _zt=Object.freeze(Object.defineProperty({__proto__:null,force:Uie},Symbol.toStringTag,{value:"Module"}));function BY(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function zie(e){He.call(this,null,e)}zie.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const wzt=e=>e.values;Ct(zie,He,{transform(e,t){t.source||Ke("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&X8(o.data)&&i.rem.push(o.data)}),this.value=s=r8({values:Dt(e.keys).reduce((o,a)=>(o.key(a),o),Ezt()).entries(i.source)},wzt),n&&s.each(o=>{o.children&&(o=pi(o.data),i.add.push(o),i.source.push(o))}),BY(s,nn,nn)),i.source.root=s,i}});function Ezt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Qg(e){He.call(this,null,e)}const Tzt=(e,t)=>e.parent===t.parent?1:2;Ct(Qg,He,{transform(e,t){(!t.source||!t.source.root)&&Ke(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(sw(e.sort,o=>o.data)),Szt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Tzt:aC);try{this.value=n(i)}catch(o){Ke(o)}return i.each(o=>Czt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function Szt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function Czt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const jY=["x","y","r","depth","children"];function Vie(e){Qg.call(this,e)}Vie.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jY.length,default:jY}]};Ct(Vie,Qg,{layout:lPe,params:["radius","size","padding"],fields:jY});const UY=["x0","y0","x1","y1","depth","children"];function Hie(e){Qg.call(this,e)}Hie.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:UY.length,default:UY}]};Ct(Hie,Qg,{layout:dCt,params:["size","round","padding"],fields:UY});function qie(e){He.call(this,null,e)}qie.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ct(qie,He,{transform(e,t){t.source||Ke("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?BY(tge().id(e.key).parentId(e.parentKey)(i.source),e.key,dd):BY(tge()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const xve={tidy:wCt,cluster:$St},zY=["x","y","depth","children"];function Wie(e){Qg.call(this,e)}Wie.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:zY.length,default:zY}]};Ct(Wie,Qg,{layout(e){const t=e||"tidy";if(sn(xve,t))return xve[t]();Ke("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:zY});function Gie(e){He.call(this,[],e)}Gie.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ct(Gie,He,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Ke("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[nn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[nn(a)]&&s[nn(u)]&&i.add.push(pi({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[nn(o)]=1),n.forEach(o=>{(s[nn(o.source)]||s[nn(o.target)])&&i.mod.push(o)})),i}});const _ve={binary:TCt,dice:yP,slice:i8,slicedice:SCt,squarify:hPe,resquarify:CCt},VY=["x0","y0","x1","y1","depth","children"];function Yie(e){Qg.call(this,e)}Yie.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:VY.length,default:VY}]};Ct(Yie,Qg,{layout(){const e=ECt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{sn(_ve,t)?e.tile(_ve[t]):Ke("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:VY});const Azt=Object.freeze(Object.defineProperty({__proto__:null,nest:zie,pack:Vie,partition:Hie,stratify:qie,tree:Wie,treelinks:Gie,treemap:Yie},Symbol.toStringTag,{value:"Module"})),bV=4278190080;function Izt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function kzt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=A1(s,o).getContext("2d"),l=A1(s,o).getContext("2d"),c=a&&A1(s,o).getContext("2d");n.forEach(A=>w6(u,A,!1)),w6(l,t,!1),a&&w6(c,t,!0);const f=xV(u,s,o),d=xV(l,s,o),h=a&&xV(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,_,E,S,C;for(y=0;y<o;++y)for(g=0;g<s;++g)_=y*s+g,E=f[_]&bV,C=d[_]&bV,S=a&&h[_]&bV,(E||S||C)&&(v=e(g),b=e(y),!i&&(E||C)&&p.set(v,b),a&&(E||S)&&m.set(v,b));return[p,m]}function xV(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function w6(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>w6(e,s.items,n))}):bf[r].draw(e,{items:n?t.map(Rzt):t})}function Rzt(e){const t=Q8(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const d0=5,Wu=31,l3=32,My=new Uint32Array(l3+1),ih=new Uint32Array(l3+1);ih[0]=0;My[0]=~ih[0];for(let e=1;e<=l3;++e)ih[e]=ih[e-1]<<1|1,My[e]=~ih[e];function Pzt(e,t){const n=new Uint32Array(~~((e*t+l3)/l3));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>d0]&1<<(a&Wu)},set:(s,o)=>{const a=o*e+s;r(a>>>d0,1<<(a&Wu))},clear:(s,o)=>{const a=o*e+s;i(a>>>d0,~(1<<(a&Wu)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>d0,h=f>>>d0,d===h){if(n[d]&My[c&Wu]&ih[(f&Wu)+1])return!0}else{if(n[d]&My[c&Wu]||n[h]&ih[(f&Wu)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>d0,d=c>>>d0,f===d)r(f,My[l&Wu]&ih[(c&Wu)+1]);else for(r(f,My[l&Wu]),r(d,ih[(c&Wu)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>d0,d=c>>>d0,f===d)i(f,ih[l&Wu]|My[(c&Wu)+1]);else for(i(f,ih[l&Wu]),i(d,My[(c&Wu)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function Dzt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>Pzt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function Nzt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=nf.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function FL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function a1(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function Ozt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!FL(p,m,d,h,i,s)&&!a1(e,p,m,h,d,g,o,a)&&!a1(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,a1(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=nf.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,_,E,S,C,A,R,k,N,L,O,B,q,H,G,K;for(let J=0;J<f;++J){for(v=c[J].x,_=c[J].y,b=c[J].x2===void 0?v:c[J].x2,E=c[J].y2===void 0?_:c[J].y2,v>b&&(K=v,v=b,b=K),_>E&&(K=_,_=E,E=K),k=e(v),L=e(b),N=~~((k+L)/2),O=e(_),q=e(E),B=~~((O+q)/2),A=N;A>=k;--A)for(R=B;R>=O;--R)G=u(A,R,p,h,d),G&&([l.x,l.y,p,m]=G);for(A=N;A<=L;++A)for(R=B;R<=q;++R)G=u(A,R,p,h,d),G&&([l.x,l.y,p,m]=G);!m&&!n&&(H=Math.abs(b-v+E-_),S=(v+b)/2,C=(_+E)/2,H>=y&&!FL(S,C,h,d,i,s)&&!a1(e,S,C,d,h,d,o,null)&&(y=H,l.x=S,l.y=C,g=!0))}return m||g?(S=h/2,C=d/2,o.setRange(e(l.x-S),e(l.y-C),e(l.x+S),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const $zt=[-1,-1,1,1],Lzt=[-1,1,-1,1];function Mzt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=nf.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,_,E,S,C,A,R,k,N,L,O,B;for(let q=0;q<f;++q){for(b=c[q].x,E=c[q].y,_=c[q].x2===void 0?b:c[q].x2,S=c[q].y2===void 0?E:c[q].y2,p.push([e((b+_)/2),e((E+S)/2)]);p.length;)if([R,k]=p.pop(),!(o.get(R,k)||a.get(R,k)||u.get(R,k))){u.set(R,k);for(let H=0;H<4;++H)C=R+$zt[H],A=k+Lzt[H],u.outOfBounds(C,A,C,A)||p.push([C,A]);if(C=e.invert(R),A=e.invert(k),N=m,L=s,!FL(C,A,h,d,i,s)&&!a1(e,C,A,d,h,N,o,a)&&!a1(e,C,A,d,h,d,o,null)){for(;L-N>=1;)O=(N+L)/2,a1(e,C,A,d,h,O,o,a)?L=O:N=O;N>m&&(l.x=C,l.y=A,m=N,g=!0)}}!g&&!n&&(B=Math.abs(_-b+S-E),C=(b+_)/2,A=(E+S)/2,B>=v&&!FL(C,A,h,d,i,s)&&!a1(e,C,A,d,h,d,o,null)&&(v=B,l.x=C,l.y=A,y=!0))}return g||y?(C=h/2,A=d/2,o.setRange(e(l.x-C),e(l.y-A),e(l.x+C),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const Fzt=["right","center","left"],Bzt=["bottom","middle","top"];function jzt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,_,E,S,C,A,R,k,N;for(let L=0;L<u;++L){if(h=(n[L]&3)-1,p=(n[L]>>>2&3)-1,m=h===0&&p===0||r[L]<0,g=h&&p?Math.SQRT1_2:1,y=r[L]<0?-1:1,v=c[1+h]+r[L]*h*g,C=c[4+p]+y*f*p/2+r[L]*p*g,_=C-f/2,E=C+f/2,A=e(v),k=e(_),N=e(E),!d)if(wve(A,A,k,N,o,a,v,v,_,E,c,m))d=nf.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,A=e(v),R=e(b),wve(A,R,k,N,o,a,v,b,_,E,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?E:_:C,l.align=Fzt[h*y+1],l.baseline=Bzt[p*y+1],o.setRange(A,k,R,N),!0}return!1}}function wve(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const _V=0,wV=4,EV=8,TV=0,SV=1,CV=2,Uzt={"top-left":_V+TV,top:_V+SV,"top-right":_V+CV,left:wV+TV,middle:wV+SV,right:wV+CV,"bottom-left":EV+TV,bottom:EV+SV,"bottom-right":EV+CV},zzt={naive:Nzt,"reduced-search":Ozt,floodfill:Mzt};function Vzt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Hzt(r,f),h=qzt(i,f),p=Wzt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=Gzt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let _=-1,E=-1;const S=e.map(k=>{const N=v?nf.width(k,k.text):void 0;return _=Math.max(_,N),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:N}});l=l===null||l===1/0?Math.max(_,E)+Math.max(...r):l;const C=Dzt(t[0],t[1],l);let A;if(!b){n&&S.sort((L,O)=>n(L.datum,O.datum));let k=!1;for(let L=0;L<h.length&&!k;++L)k=h[L]===5||d[L]<0;const N=(p&&o||g)&&e.map(L=>L.datum);A=s.length||N?kzt(C,N||[],s,k,g):Izt(C,o&&S)}const R=g?zzt[c](C,A,o,u):jzt(C,A,h,d);return S.forEach(k=>k.opacity=+R(k)),S}function Hzt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function qzt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Uzt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Wzt(e){return e&&e.mark&&e.mark.marktype}function Gzt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const HY=["x","y","opacity","align","baseline"],TFe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Kie(e){He.call(this,null,e)}Kie.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:TFe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:HY.length,default:HY}]};Ct(Kie,He,{transform(e,t){function n(s){const o=e[s];return Yn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Ke("Size parameter should be specified as a [width, height] array.");const i=e.as||HY;return Vzt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Dt(e.offset==null?1:e.offset),Dt(e.anchor||TFe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const Yzt=Object.freeze(Object.defineProperty({__proto__:null,label:Kie},Symbol.toStringTag,{value:"Module"}));function SFe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Xie(e){He.call(this,null,e)}Xie.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ct(Xie,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=SFe(r,e.groupby),s=(e.groupby||[]).map(Gs),o=s.length,a=e.as||[Gs(e.x),Gs(e.y)],u=[];i.forEach(l=>{M5e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(pi(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const qY={constant:ure,linear:lre,log:N5e,exp:O5e,pow:$5e,quad:cre,poly:L5e},Kzt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Qie(e){He.call(this,null,e)}Qie.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(qY)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ct(Qie,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=SFe(r,e.groupby),s=(e.groupby||[]).map(Gs),o=e.method||"linear",a=e.order==null?3:e.order,u=Kzt(o,a),l=e.as||[Gs(e.x),Gs(e.y)],c=qY[o],f=[];let d=e.extent;sn(qY,o)||Ke("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(pi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||bm(h,e.x),y=v=>{const b={};for(let _=0;_<s.length;++_)b[s[_]]=h.dims[_];b[l[0]]=v[0],b[l[1]]=v[1],f.push(pi(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):iB(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Xzt=Object.freeze(Object.defineProperty({__proto__:null,loess:Xie,regression:Qie},Symbol.toStringTag,{value:"Module"}));function Jie(e){He.call(this,null,e)}Jie.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Qzt=[-1e5,-1e5,1e5,1e5];Ct(Jie,He,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Qzt;const s=this.value=iee.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!Zzt(u)?Jzt(u):null}return t.reflow(e.modified()).modifies(n)}});function Jzt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Zzt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const eVt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Jie},Symbol.toStringTag,{value:"Module"}));var AV=Math.PI/180,MI=64,E6=2048;function tVt(){var e=[256,256],t,n,r,i,s,o,a,u=CFe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(A1()),m=aVt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],_=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,C)=>C.size-S.size);++v<y;){var E=_[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,nVt(p,E,_,v),E.hasText&&h(m,E,g)&&(b.push(E),g?iVt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(MI<<5)/m,p.height=E6/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),_=u(e),E=c()<.5?1:-1,S=-E,C,A,R;(C=_(S+=E))&&(A=~~C[0],R=~~C[1],!(Math.min(Math.abs(A),Math.abs(R))>=b));)if(m.x=y+A,m.y=v+R,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!rVt(m,p,e[0]))&&(!g||sVt(m,g))){for(var k=m.sprite,N=m.width>>5,L=e[0]>>5,O=m.x-(N<<4),B=O&127,q=32-B,H=m.y1-m.y0,G=(m.y+m.y0)*L+(O>>5),K,J=0;J<H;J++){K=0;for(var F=0;F<=N;F++)p[G+F]|=K<<q|(F<N?(K=k[J*N+F])>>>B:0);G+=L}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=wb(p),f):n},f.fontStyle=function(p){return arguments.length?(i=wb(p),f):i},f.fontWeight=function(p){return arguments.length?(s=wb(p),f):s},f.rotate=function(p){return arguments.length?(o=wb(p),f):o},f.text=function(p){return arguments.length?(t=wb(p),f):t},f.spiral=function(p){return arguments.length?(u=uVt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=wb(p),f):r},f.padding=function(p){return arguments.length?(a=wb(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function nVt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(MI<<5)/s,E6/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*AV),g=Math.cos(t.rotate*AV),y=c*g,v=c*m,b=d*g,_=d*m;c=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=MI<<5&&(o=0,a+=u,u=0),a+d>=E6)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*AV),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(MI<<5)/s,E6/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var C=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var R=f*p+(h>>5),k=E[(a+p)*(MI<<5)+(o+h)<<2]?1<<31-h%32:0;S[R]|=k,C|=k}C?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function rVt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function iVt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function sVt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function CFe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function oVt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function aVt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function wb(e){return typeof e=="function"?e:function(){return e}}var uVt={archimedean:CFe,rectangular:oVt};const AFe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],lVt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Zie(e){He.call(this,tVt(),e)}Zie.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:AFe}]};Ct(Zie,He,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Ke("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Yn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||lVt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||AFe;let a=e.fontSize||14,u;if(Yn(a)?u=e.fontSizeRange:a=Du(a),u){const p=a,m=ii("sqrt")().domain(bm(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(pd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const cVt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Zie},Symbol.toStringTag,{value:"Module"})),fVt=e=>new Uint8Array(e),dVt=e=>new Uint16Array(e),Ak=e=>new Uint32Array(e);function hVt(){let e=8,t=[],n=Ak(0),r=jO(0,e),i=jO(0,e);return{data:()=>t,seen:()=>n=pVt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=jO(s,e,r),i=jO(s,e))}}}function pVt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function jO(e,t,n){const r=(t<257?fVt:t<65537?dVt:Ak)(e);return n&&r.set(n),r}function Eve(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Tve(){let e=Ak(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Ak(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=mVt(h,d),c)p=t,m=e,t=Array(c+f),e=Ak(c+f),gVt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Qbt(u,a[0],0,l),z1(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function mVt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),ext(e,t)}function gVt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function ese(e){He.call(this,hVt(),e),this._indices=null,this._dims=null}ese.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ct(ese,He,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Tve()),s.push(Eve(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,_,E,S,C;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(_={},v=t.mod,E=0,S=v.length;E<S;++E)_[v[E]._index]=1;for(E=0;E<h;++E)C=r[E],(!o[E]||e.modified("fields",E)||t.modified(C.fields))&&(y=C.fname,(m=p[y])||(s[y]=g=Tve(),p[y]=m=g.insert(C,t.source,0)),o[E]=Eve(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)b[E]||(l[E]!==u[E]?f.push(E):_[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function tse(e){He.call(this,null,e)}tse.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ct(tse,He,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const yVt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:ese,resolvefilter:tse},Symbol.toStringTag,{value:"Module"})),vVt="RawCode",d_="Literal",bVt="Property",xVt="Identifier",_Vt="ArrayExpression",wVt="BinaryExpression",IFe="CallExpression",EVt="ConditionalExpression",TVt="LogicalExpression",SVt="MemberExpression",CVt="ObjectExpression",AVt="UnaryExpression";function Xh(e){this.type=e}Xh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=IVt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function IVt(e){switch(e.type){case _Vt:return e.elements;case wVt:case TVt:return[e.left,e.right];case IFe:return[e.callee].concat(e.arguments);case EVt:return[e.test,e.consequent,e.alternate];case SVt:return[e.object,e.property];case CVt:return e.properties;case bVt:return[e.key,e.value];case AVt:return[e.argument];case xVt:case d_:case vVt:default:return[]}}var Fm,Gt,Ge,Cu,Ci,wB=1,eD=2,h_=3,Yv=4,EB=5,uw=6,zl=7,tD=8,kVt=9;Fm={};Fm[wB]="Boolean";Fm[eD]="<end>";Fm[h_]="Identifier";Fm[Yv]="Keyword";Fm[EB]="Null";Fm[uw]="Numeric";Fm[zl]="Punctuator";Fm[tD]="String";Fm[kVt]="RegularExpression";var RVt="ArrayExpression",PVt="BinaryExpression",DVt="CallExpression",NVt="ConditionalExpression",kFe="Identifier",OVt="Literal",$Vt="LogicalExpression",LVt="MemberExpression",MVt="ObjectExpression",FVt="Property",BVt="UnaryExpression",da="Unexpected token %0",jVt="Unexpected number",UVt="Unexpected string",zVt="Unexpected identifier",VVt="Unexpected reserved word",HVt="Unexpected end of input",WY="Invalid regular expression",IV="Invalid regular expression: missing /",RFe="Octal literals are not allowed in strict mode.",qVt="Duplicate data property in object literal not allowed in strict mode",Ma="ILLEGAL",c3="Disabled.",WVt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),GVt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function TB(e,t){if(!e)throw new Error("ASSERT: "+t)}function E0(e){return e>=48&&e<=57}function nse(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Ik(e){return"01234567".indexOf(e)>=0}function YVt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function f3(e){return e===10||e===13||e===8232||e===8233}function nD(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&WVt.test(String.fromCharCode(e))}function BL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&GVt.test(String.fromCharCode(e))}const KVt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function PFe(){for(;Ge<Cu;){const e=Gt.charCodeAt(Ge);if(YVt(e)||f3(e))++Ge;else break}}function GY(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Ge<Cu&&nse(Gt[Ge])?(r=Gt[Ge++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ti({},da,Ma);return String.fromCharCode(i)}function XVt(){var e,t,n,r;for(e=Gt[Ge],t=0,e==="}"&&ti({},da,Ma);Ge<Cu&&(e=Gt[Ge++],!!nse(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ti({},da,Ma),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function DFe(){var e,t;for(e=Gt.charCodeAt(Ge++),t=String.fromCharCode(e),e===92&&(Gt.charCodeAt(Ge)!==117&&ti({},da,Ma),++Ge,e=GY("u"),(!e||e==="\\"||!nD(e.charCodeAt(0)))&&ti({},da,Ma),t=e);Ge<Cu&&(e=Gt.charCodeAt(Ge),!!BL(e));)++Ge,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Gt.charCodeAt(Ge)!==117&&ti({},da,Ma),++Ge,e=GY("u"),(!e||e==="\\"||!BL(e.charCodeAt(0)))&&ti({},da,Ma),t+=e);return t}function QVt(){var e,t;for(e=Ge++;Ge<Cu;){if(t=Gt.charCodeAt(Ge),t===92)return Ge=e,DFe();if(BL(t))++Ge;else break}return Gt.slice(e,Ge)}function JVt(){var e,t,n;return e=Ge,t=Gt.charCodeAt(Ge)===92?DFe():QVt(),t.length===1?n=h_:KVt.hasOwnProperty(t)?n=Yv:t==="null"?n=EB:t==="true"||t==="false"?n=wB:n=h_,{type:n,value:t,start:e,end:Ge}}function kV(){var e=Ge,t=Gt.charCodeAt(Ge),n,r=Gt[Ge],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ge,{type:zl,value:String.fromCharCode(t),start:e,end:Ge};default:if(n=Gt.charCodeAt(Ge+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ge+=2,{type:zl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Ge};case 33:case 61:return Ge+=2,Gt.charCodeAt(Ge)===61&&++Ge,{type:zl,value:Gt.slice(e,Ge),start:e,end:Ge}}}if(o=Gt.substr(Ge,4),o===">>>=")return Ge+=4,{type:zl,value:o,start:e,end:Ge};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Ge+=3,{type:zl,value:s,start:e,end:Ge};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Ge+=2,{type:zl,value:i,start:e,end:Ge};if(i==="//"&&ti({},da,Ma),"<>=!+-*%&|^/".indexOf(r)>=0)return++Ge,{type:zl,value:r,start:e,end:Ge};ti({},da,Ma)}function ZVt(e){let t="";for(;Ge<Cu&&nse(Gt[Ge]);)t+=Gt[Ge++];return t.length===0&&ti({},da,Ma),nD(Gt.charCodeAt(Ge))&&ti({},da,Ma),{type:uw,value:parseInt("0x"+t,16),start:e,end:Ge}}function eHt(e){let t="0"+Gt[Ge++];for(;Ge<Cu&&Ik(Gt[Ge]);)t+=Gt[Ge++];return(nD(Gt.charCodeAt(Ge))||E0(Gt.charCodeAt(Ge)))&&ti({},da,Ma),{type:uw,value:parseInt(t,8),octal:!0,start:e,end:Ge}}function Sve(){var e,t,n;if(n=Gt[Ge],TB(E0(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Ge,e="",n!=="."){if(e=Gt[Ge++],n=Gt[Ge],e==="0"){if(n==="x"||n==="X")return++Ge,ZVt(t);if(Ik(n))return eHt(t);n&&E0(n.charCodeAt(0))&&ti({},da,Ma)}for(;E0(Gt.charCodeAt(Ge));)e+=Gt[Ge++];n=Gt[Ge]}if(n==="."){for(e+=Gt[Ge++];E0(Gt.charCodeAt(Ge));)e+=Gt[Ge++];n=Gt[Ge]}if(n==="e"||n==="E")if(e+=Gt[Ge++],n=Gt[Ge],(n==="+"||n==="-")&&(e+=Gt[Ge++]),E0(Gt.charCodeAt(Ge)))for(;E0(Gt.charCodeAt(Ge));)e+=Gt[Ge++];else ti({},da,Ma);return nD(Gt.charCodeAt(Ge))&&ti({},da,Ma),{type:uw,value:parseFloat(e),start:t,end:Ge}}function tHt(){var e="",t,n,r,i,s=!1;for(t=Gt[Ge],TB(t==="'"||t==='"',"String literal must starts with a quote"),n=Ge,++Ge;Ge<Cu;)if(r=Gt[Ge++],r===t){t="";break}else if(r==="\\")if(r=Gt[Ge++],!r||!f3(r.charCodeAt(0)))switch(r){case"u":case"x":Gt[Ge]==="{"?(++Ge,e+=XVt()):e+=GY(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ik(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Ge<Cu&&Ik(Gt[Ge])&&(s=!0,i=i*8+"01234567".indexOf(Gt[Ge++]),"0123".indexOf(r)>=0&&Ge<Cu&&Ik(Gt[Ge])&&(i=i*8+"01234567".indexOf(Gt[Ge++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Gt[Ge]===`
`&&++Ge;else{if(f3(r.charCodeAt(0)))break;e+=r}return t!==""&&ti({},da,Ma),{type:tD,value:e,octal:s,start:n,end:Ge}}function nHt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ti({},WY)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ti({},WY)}try{return new RegExp(e,t)}catch{return null}}function rHt(){var e,t,n,r,i;for(e=Gt[Ge],TB(e==="/","Regular expression literal must start with a slash"),t=Gt[Ge++],n=!1,r=!1;Ge<Cu;)if(e=Gt[Ge++],t+=e,e==="\\")e=Gt[Ge++],f3(e.charCodeAt(0))&&ti({},IV),t+=e;else if(f3(e.charCodeAt(0)))ti({},IV);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ti({},IV),i=t.substr(1,t.length-2),{value:i,literal:t}}function iHt(){var e,t,n;for(t="",n="";Ge<Cu&&(e=Gt[Ge],!!BL(e.charCodeAt(0)));)++Ge,e==="\\"&&Ge<Cu?ti({},da,Ma):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ti({},WY,n),{value:n,literal:t}}function sHt(){var e,t,n,r;return Ci=null,PFe(),e=Ge,t=rHt(),n=iHt(),r=nHt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ge}}function oHt(e){return e.type===h_||e.type===Yv||e.type===wB||e.type===EB}function NFe(){if(PFe(),Ge>=Cu)return{type:eD,start:Ge,end:Ge};const e=Gt.charCodeAt(Ge);return nD(e)?JVt():e===40||e===41||e===59?kV():e===39||e===34?tHt():e===46?E0(Gt.charCodeAt(Ge+1))?Sve():kV():E0(e)?Sve():kV()}function Gl(){const e=Ci;return Ge=e.end,Ci=NFe(),Ge=e.end,e}function OFe(){const e=Ge;Ci=NFe(),Ge=e}function aHt(e){const t=new Xh(RVt);return t.elements=e,t}function Cve(e,t,n){const r=new Xh(e==="||"||e==="&&"?$Vt:PVt);return r.operator=e,r.left=t,r.right=n,r}function uHt(e,t){const n=new Xh(DVt);return n.callee=e,n.arguments=t,n}function lHt(e,t,n){const r=new Xh(NVt);return r.test=e,r.consequent=t,r.alternate=n,r}function rse(e){const t=new Xh(kFe);return t.name=e,t}function FI(e){const t=new Xh(OVt);return t.value=e.value,t.raw=Gt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Ave(e,t,n){const r=new Xh(LVt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function cHt(e){const t=new Xh(MVt);return t.properties=e,t}function Ive(e,t,n){const r=new Xh(FVt);return r.key=t,r.value=n,r.kind=e,r}function fHt(e,t){const n=new Xh(BVt);return n.operator=e,n.argument=t,n.prefix=!0,n}function ti(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(TB(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Ge,n.description=i,n}function SB(e){e.type===eD&&ti(e,HVt),e.type===uw&&ti(e,jVt),e.type===tD&&ti(e,UVt),e.type===h_&&ti(e,zVt),e.type===Yv&&ti(e,VVt),ti(e,da,e.value)}function Au(e){const t=Gl();(t.type!==zl||t.value!==e)&&SB(t)}function as(e){return Ci.type===zl&&Ci.value===e}function RV(e){return Ci.type===Yv&&Ci.value===e}function dHt(){const e=[];for(Ge=Ci.start,Au("[");!as("]");)as(",")?(Gl(),e.push(null)):(e.push(p_()),as("]")||Au(","));return Gl(),aHt(e)}function kve(){Ge=Ci.start;const e=Gl();return e.type===tD||e.type===uw?(e.octal&&ti(e,RFe),FI(e)):rse(e.value)}function hHt(){var e,t,n,r;if(Ge=Ci.start,e=Ci,e.type===h_)return n=kve(),Au(":"),r=p_(),Ive("init",n,r);if(e.type===eD||e.type===zl)SB(e);else return t=kve(),Au(":"),r=p_(),Ive("init",t,r)}function pHt(){var e=[],t,n,r,i={},s=String;for(Ge=Ci.start,Au("{");!as("}");)t=hHt(),t.key.type===kFe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ti({},qVt):i[r]=!0,e.push(t),as("}")||Au(",");return Au("}"),cHt(e)}function mHt(){Au("(");const e=ise();return Au(")"),e}const gHt={if:1};function yHt(){var e,t,n;if(as("("))return mHt();if(as("["))return dHt();if(as("{"))return pHt();if(e=Ci.type,Ge=Ci.start,e===h_||gHt[Ci.value])n=rse(Gl().value);else if(e===tD||e===uw)Ci.octal&&ti(Ci,RFe),n=FI(Gl());else{if(e===Yv)throw new Error(c3);e===wB?(t=Gl(),t.value=t.value==="true",n=FI(t)):e===EB?(t=Gl(),t.value=null,n=FI(t)):as("/")||as("/=")?(n=FI(sHt()),OFe()):SB(Gl())}return n}function vHt(){const e=[];if(Au("("),!as(")"))for(;Ge<Cu&&(e.push(p_()),!as(")"));)Au(",");return Au(")"),e}function bHt(){Ge=Ci.start;const e=Gl();return oHt(e)||SB(e),rse(e.value)}function xHt(){return Au("."),bHt()}function _Ht(){Au("[");const e=ise();return Au("]"),e}function wHt(){var e,t,n;for(e=yHt();;)if(as("."))n=xHt(),e=Ave(".",e,n);else if(as("("))t=vHt(),e=uHt(e,t);else if(as("["))n=_Ht(),e=Ave("[",e,n);else break;return e}function Rve(){const e=wHt();if(Ci.type===zl&&(as("++")||as("--")))throw new Error(c3);return e}function T6(){var e,t;if(Ci.type!==zl&&Ci.type!==Yv)t=Rve();else{if(as("++")||as("--"))throw new Error(c3);if(as("+")||as("-")||as("~")||as("!"))e=Gl(),t=T6(),t=fHt(e.value,t);else{if(RV("delete")||RV("void")||RV("typeof"))throw new Error(c3);t=Rve()}}return t}function Pve(e){let t=0;if(e.type!==zl&&e.type!==Yv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function EHt(){var e,t,n,r,i,s,o,a,u,l;if(e=Ci,u=T6(),r=Ci,i=Pve(r),i===0)return u;for(r.prec=i,Gl(),t=[e,Ci],o=T6(),s=[u,r,o];(i=Pve(Ci))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Cve(a,u,o),s.push(n);r=Gl(),r.prec=i,s.push(r),t.push(Ci),n=T6(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Cve(s[l-1].value,s[l-2],n),l-=2;return n}function p_(){var e,t,n;return e=EHt(),as("?")&&(Gl(),t=p_(),Au(":"),n=p_(),e=lHt(e,t,n)),e}function ise(){const e=p_();if(as(","))throw new Error(c3);return e}function sse(e){Gt=e,Ge=0,Cu=Gt.length,Ci=null,OFe();const t=ise();if(Ci.type!==eD)throw new Error("Unexpect token after expression.");return t}var $Fe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function LFe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ke("Missing arguments to clamp function."),o.length>3&&Ke("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Ke("Missing arguments to if function."),o.length>3&&Ke("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function THt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function MFe(e){e=e||{};const t=e.allowed?Lh(e.allowed):{},n=e.forbidden?Lh(e.forbidden):{},r=e.constants||$Fe,i=(e.functions||LFe)(f),s=e.globalvar,o=e.fieldvar,a=Yn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Nt(p))return p;const m=d[p.type];return m==null&&Ke("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:sn(n,m)?Ke("Illegal identifier: "+m):sn(r,m)?r[m]:sn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[THt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Ke("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=sn(i,m)&&i[m];return y||Ke("Unrecognized function: "+m),Yn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Dve=Symbol("vega_selection_getter");function FFe(e){return(!e.getter||!e.getter[Dve])&&(e.getter=fd(e.field),e.getter[Dve]=!0),e.getter}const ose="intersect",Nve="union",SHt="vlMulti",CHt="vlPoint",Ove="or",AHt="and",Tp="_vgsid_",d3=fd(Tp),IHt="E",kHt="R",RHt="R-E",PHt="R-LE",DHt="R-RE",jL="index:unit";function $ve(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=FFe(a)(e),S1(o)&&(o=xu(o)),S1(r[s])&&(r[s]=xu(r[s])),Qe(r[s])&&S1(r[s][0])&&(r[s]=r[s].map(xu)),a.type===IHt){if(Qe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===kHt){if(!n2(o,r[s]))return!1}else if(a.type===DHt){if(!n2(o,r[s],!0,!1))return!1}else if(a.type===RHt){if(!n2(o,r[s],!1,!1))return!1}else if(a.type===PHt&&!n2(o,r[s],!1,!0))return!1;return!0}function NHt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[jL]&&r[jL].value:void 0,o=n===ose,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=$ve(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=$ve(t,l),o^h)return h;return a&&o}const BFe=wh(d3),OHt=BFe.left,$Ht=BFe.right;function LHt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[jL]&&r[jL].value:void 0,o=n===ose,a=d3(t),u=OHt(i,a);if(u===i.length||d3(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if($Ht(i,a)-u<s.size)return!1}return!0}function MHt(e,t){return e.map(n=>Gn(t.fields?{values:t.fields.map(r=>FFe(r)(n.datum))}:{[Tp]:d3(n.datum)},t))}function FHt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,_=0,E,S;_<b;++_)if(l=s[_],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=PV[`${y}_union`],m[d]=v(g,Dt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(Dt(f).reduce((C,A,R)=>(C[c[R].field]=A,C),{})))}else h=Tp,p=d3(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Tp]:p}));if(t=t||Nve,o[Tp]?o[Tp]=PV[`${Tp}_${t}`](...Object.values(o[Tp])):Object.keys(o).forEach(C=>{o[C]=Object.keys(o[C]).map(A=>o[C][A]).reduce((A,R)=>A===void 0?R:PV[`${u[C]}_${t}`](A,R))}),s=Object.keys(a),n&&s.length){const C=r?CHt:SHt;o[C]=t===Nve?{[Ove]:s.reduce((A,R)=>(A.push(...a[R]),A),[])}:{[AHt]:s.map(A=>({[Ove]:a[A]}))}}return o}var PV={[`${Tp}_union`]:lxt,[`${Tp}_intersect`]:axt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=xu(t[0]),r=xu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=xu(t[0]),r=xu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const BHt=":",jHt="@";function ase(e,t,n,r){t[0].type!==d_&&Ke("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Mr(t).value,o="unit",a=jHt+o,u=BHt+i;s===ose&&!sn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),sn(r,u)||(r[u]=n.getData(i).tuplesRef())}function jFe(e){const t=this.context.data[e];return t?t.values.value:[]}function UHt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function zHt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(dd).insert(t)),1}function VHt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const rD=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},HHt=rD("format"),UFe=rD("timeFormat"),qHt=rD("utcFormat"),WHt=rD("timeParse"),GHt=rD("utcParse"),UO=new Date(2e3,0,1);function CB(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(UO.setYear(2e3),UO.setMonth(e),UO.setDate(t),UFe.call(this,UO,n))}function YHt(e){return CB.call(this,e,1,"%B")}function KHt(e){return CB.call(this,e,1,"%b")}function XHt(e){return CB.call(this,0,2+e,"%A")}function QHt(e){return CB.call(this,0,2+e,"%a")}const JHt=":",ZHt="@",YY="%",zFe="$";function use(e,t,n,r){t[0].type!==d_&&Ke("First argument to data functions must be a string literal.");const i=t[0].value,s=JHt+i;if(!sn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function eqt(e,t,n,r){t[0].type!==d_&&Ke("First argument to indata must be a string literal."),t[1].type!==d_&&Ke("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=ZHt+s;sn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function ll(e,t,n,r){if(t[0].type===d_)Lve(n,r,t[0].value);else for(e in n.scales)Lve(n,r,e)}function Lve(e,t,n){const r=YY+n;if(!sn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Bm(e,t){if(Yn(e))return e;if(Nt(e)){const n=t.scales[e];return n&&CBt(n.value)?n.value:void 0}}function tqt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ll,n._range=ll,n._scale=ll;const r=i=>"_["+(i.type===d_?Et(YY+i.value):Et(YY)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function lse(e,t){return function(n,r,i){if(n){const s=Bm(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const nqt=lse("area",ETt),rqt=lse("bounds",ATt),iqt=lse("centroid",NTt);function sqt(e,t){const n=Bm(e,(t||this).context);return n&&n.scale()}function oqt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function cse(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function aqt(){return cse(this.context.dataflow,"warn",arguments)}function uqt(){return cse(this.context.dataflow,"info",arguments)}function lqt(){return cse(this.context.dataflow,"debug",arguments)}function DV(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function KY(e){const t=H1(e),n=DV(t.r),r=DV(t.g),i=DV(t.b);return .2126*n+.7152*r+.0722*i}function cqt(e,t){const n=KY(e),r=KY(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function fqt(){const e=[].slice.call(arguments);return e.unshift({}),Gn(...e)}function VFe(e,t){return e===t||e!==e&&t!==t?!0:Qe(e)?Qe(t)&&e.length===t.length?dqt(e,t):!1:Ot(e)&&Ot(t)?HFe(e,t):!1}function dqt(e,t){for(let n=0,r=e.length;n<r;++n)if(!VFe(e[n],t[n]))return!1;return!0}function HFe(e,t){for(const n in e)if(!VFe(e[n],t[n]))return!1;return!0}function Mve(e){return t=>HFe(e,t)}function hqt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?dd:Qe(n)||X8(n)?n:Mve(n),c.remove(f)),t&&c.insert(t),r&&(f=Mve(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function pqt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function mqt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Fve={};function gqt(e,t){const n=Fve[t]||(Fve[t]=fd(t));return Qe(e)?e.map(n):n(e)}function fse(e){return Qe(e)||ArrayBuffer.isView(e)?e:null}function dse(e){return fse(e)||(Nt(e)?e:null)}function yqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fse(e).join(...n)}function vqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dse(e).indexOf(...n)}function bqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dse(e).lastIndexOf(...n)}function xqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dse(e).slice(...n)}function _qt(e,t,n){return Yn(n)&&Ke("Function argument passed to replace."),String(e).replace(t,n)}function wqt(e){return fse(e).slice().reverse()}function Eqt(e,t,n){return Lre(e||0,t||0,n||0)}function Tqt(e,t){const n=Bm(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Sqt(e,t){const n=Bm(e,(t||this).context);return n?n.copy():void 0}function Cqt(e,t){const n=Bm(e,(t||this).context);return n?n.domain():[]}function Aqt(e,t,n){const r=Bm(e,(n||this).context);return r?Qe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Iqt(e,t){const n=Bm(e,(t||this).context);return n&&n.range?n.range():[]}function kqt(e,t,n){const r=Bm(e,(n||this).context);return r?r(t):void 0}function Rqt(e,t,n,r,i){e=Bm(e,(i||this).context);const s=OLe(t,n);let o=e.domain(),a=o[0],u=Mr(o),l=Pu;return u-a?l=wLe(e,a,u):e=(e.interpolator?ii("sequential")().interpolator(e.interpolator()):ii("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Mr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Pqt(e,t,n){const r=Bm(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Dqt(e){let t=null;return function(n){return n?o3(n,t=t||zT(e)):e}}const qFe=e=>e.data;function WFe(e,t){const n=jFe.call(t,e);return n.root&&n.root.lookup||{}}function Nqt(e,t,n){const r=WFe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(qFe):void 0}function Oqt(e,t){const n=WFe(e,this)[t];return n?n.ancestors().map(qFe):void 0}const GFe=()=>typeof window<"u"&&window||null;function $qt(){const e=GFe();return e?e.screen:{}}function Lqt(){const e=GFe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Mqt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function YFe(e,t,n){if(!e)return[];const[r,i]=e,s=new So().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return PMe(o,s,Fqt(t))}function Fqt(e){let t=null;if(e){const n=Dt(e.marktype),r=Dt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Bqt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Dt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function jqt(e){return Dt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Uqt(e,t,n){const{x:r,y:i,mark:s}=n,o=new So().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),YFe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>zqt(u.x,u.y,t))}function zqt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const h3={random(){return pd()},cumulativeNormal:tB,cumulativeLogNormal:nre,cumulativeUniform:ore,densityNormal:Qne,densityLogNormal:tre,densityUniform:sre,quantileNormal:nB,quantileLogNormal:rre,quantileUniform:are,sampleNormal:eB,sampleLogNormal:ere,sampleUniform:ire,isArray:Qe,isBoolean:Gv,isDate:S1,isDefined(e){return e!==void 0},isNumber:Qr,isObject:Ot,isRegExp:D$e,isString:Nt,isTuple:X8,isValid(e){return e!=null&&e===e},toBoolean:$ne,toDate(e){return Lne(e)},toNumber:xu,toString:Mne,indexof:vqt,join:yqt,lastindexof:bqt,replace:_qt,reverse:wqt,slice:xqt,flush:R$e,lerp:N$e,merge:fqt,pad:L$e,peek:Mr,pluck:gqt,span:MP,inrange:n2,truncate:M$e,rgb:H1,lab:Y$,hcl:K$,hsl:W$,luminance:KY,contrast:cqt,sequence:Zl,format:HHt,utcFormat:qHt,utcParse:GHt,utcOffset:Q$e,utcSequence:e5e,timeFormat:UFe,timeParse:WHt,timeOffset:X$e,timeSequence:Z$e,timeUnitSpecifier:B$e,monthFormat:YHt,monthAbbrevFormat:KHt,dayFormat:XHt,dayAbbrevFormat:QHt,quarter:C$e,utcquarter:A$e,week:U$e,utcweek:H$e,dayofyear:j$e,utcdayofyear:V$e,warn:aqt,info:uqt,debug:lqt,extent(e){return bm(e)},inScope:oqt,intersect:YFe,clampRange:I$e,pinchDistance:pqt,pinchAngle:mqt,screen:$qt,containerSize:Mqt,windowSize:Lqt,bandspace:Eqt,setdata:zHt,pathShape:Dqt,panLinear:w$e,panLog:E$e,panPow:T$e,panSymlog:S$e,zoomLinear:kne,zoomLog:Rne,zoomPow:bL,zoomSymlog:Pne,encode:VHt,modify:hqt,lassoAppend:Bqt,lassoPath:jqt,intersectLasso:Uqt},Vqt=["view","item","group","xy","x","y"],Hqt="event.vega.",KFe="this.",hse={},XFe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Et(zFe+e)}]`,functions:qqt,constants:$Fe,visitors:hse},QFe=MFe(XFe);function qqt(e){const t=LFe(e);Vqt.forEach(n=>t[n]=Hqt+n);for(const n in h3)t[n]=KFe+n;return Gn(t,tqt(e,h3,hse)),t}function mo(e,t,n){return arguments.length===1?h3[e]:(h3[e]=t,n&&(hse[e]=n),QFe.functions[e]=KFe+e,this)}mo("bandwidth",Tqt,ll);mo("copy",Sqt,ll);mo("domain",Cqt,ll);mo("range",Iqt,ll);mo("invert",Aqt,ll);mo("scale",kqt,ll);mo("gradient",Rqt,ll);mo("geoArea",nqt,ll);mo("geoBounds",rqt,ll);mo("geoCentroid",iqt,ll);mo("geoShape",Pqt,ll);mo("geoScale",sqt,ll);mo("indata",UHt,eqt);mo("data",jFe,use);mo("treePath",Nqt,use);mo("treeAncestors",Oqt,use);mo("vlSelectionTest",NHt,ase);mo("vlSelectionIdTest",LHt,ase);mo("vlSelectionResolve",FHt,ase);mo("vlSelectionTuples",MHt);function _m(e,t){const n={};let r;try{e=Nt(e)?e:Et(e)+"",r=sse(e)}catch{Ke("Expression parse error: "+e)}r.visit(s=>{if(s.type!==IFe)return;const o=s.callee.name,a=XFe.visitors[o];a&&a(o,s.arguments,t,n)});const i=QFe(r);return i.globals.forEach(s=>{const o=zFe+s;!sn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Wqt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Gqt=Lh(["rule"]),Bve=Lh(["group","image","rect"]);function Yqt(e,t){let n="";return Gqt[t]||(e.x2&&(e.x?(Bve[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Bve[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function pse(e){return(e+"").toLowerCase()}function Kqt(e){return pse(e)==="operator"}function Xqt(e){return pse(e)==="collect"}function LA(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Qqt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Jqt={operator:(e,t)=>LA(e,["_"],t.code),parameter:(e,t)=>LA(e,["datum","_"],t.code),event:(e,t)=>LA(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return LA(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Et(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Yqt(r,n),i+="return m;",LA(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Et).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Qqt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Zqt(e){const t=this;Kqt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function eWt(e){const t=this;if(e.params){const n=t.get(e.id);n||Ke("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function tWt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Qe(i)?i.map(s=>jve(s,n,t)):jve(i,n,t)}return t}function jve(e,t,n){if(!e||!Ot(e))return e;for(let r=0,i=Uve.length,s;r<i;++r)if(s=Uve[r],sn(e,s.key))return s.parse(e,t,n);return e}var Uve=[{key:"$ref",parse:nWt},{key:"$key",parse:iWt},{key:"$expr",parse:rWt},{key:"$field",parse:sWt},{key:"$encode",parse:aWt},{key:"$compare",parse:oWt},{key:"$context",parse:uWt},{key:"$subflow",parse:lWt},{key:"$tupleid",parse:cWt}];function nWt(e,t){return t.get(e.$ref)||Ke("Operator not defined: "+e.$ref)}function rWt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ac(t.parameterExpression(e.$expr),e.$fields))}function iWt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=One(e.$key,e.$flat,t.expr.codegen))}function sWt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=fd(e.$field,e.$name,t.expr.codegen))}function oWt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Dt(e.$compare).map(i=>i&&i.$tupleid?nn:i);return t.fn[n]||(t.fn[n]=Dne(r,e.$order,t.expr.codegen))}function aWt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Ac(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function uWt(e,t){return t}function lWt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function cWt(){return nn}function fWt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ke("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function dWt(e){var t=this,n=Ot(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Ke("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const hWt={skip:!0};function pWt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function mWt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],hWt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(dd).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function JFe(e,t,n,r){return new ZFe(e,t,n,r)}function ZFe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Jqt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function zve(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}ZFe.prototype=zve.prototype={fork(){const e=new zve(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Xqt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[pse(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Wqt,parseOperator:Zqt,parseOperatorParameters:eWt,parseParameters:tWt,parseStream:fWt,parseUpdate:dWt,getState:pWt,setState:mWt};function gWt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),e8e(t,e.description()))}function e8e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function yWt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const NV="default";function vWt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:NV,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Nt(i)?i:i.user:NV,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Nt(r)||(i=r.item,r=r.user),XY(e,r&&r!==NV?r:i||r),i},{cursor:t})}function XY(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function UL(e,t){var n=e._runtime.data;return sn(n,t)||Ke("Unrecognized data set: "+t),n[t]}function bWt(e,t){return arguments.length<2?UL(this,e).values.value:AB.call(this,e,ow().remove(dd).insert(t))}function AB(e,t){x5e(t)||Ke("Second argument to changes must be a changeset.");const n=UL(this,e);return n.modified=!0,this.pulse(n.input,t)}function xWt(e,t){return AB.call(this,e,ow().insert(t))}function _Wt(e,t){return AB.call(this,e,ow().remove(t))}function t8e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function n8e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function IB(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function wWt(e){var t=IB(e),n=t8e(e),r=n8e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function EWt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=IB(e),o=t.changedTouches?t.changedTouches[0]:t,s=bB(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=TWt(e,n,s),t}function TWt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Nt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Du(e),item:Du(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Vve="view",SWt="timer",CWt="window",AWt={trap:!1};function IWt(e){const t=Gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Qe(r[s])&&(r[s]=Lh(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function r8e(e,t,n,r){e._eventListeners.push({type:n,sources:Dt(t),handler:r})}function kWt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function zO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ot(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function RWt(e,t,n){var r=this,i=new Z8(n),s=function(l,c){r.runAsync(null,()=>{e===Vve&&kWt(r,t)&&l.preventDefault(),i.receive(EWt(r,l,c))})},o;if(e===SWt)zO(r,"timer",t)&&r.timer(s,t);else if(e===Vve)zO(r,"view",t)&&r.addEventListener(t,s,AWt);else if(e===CWt?zO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&zO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);r8e(r,o,t,s)}return i}function Hve(e){return e.item}function qve(e){return e.item.mark.source}function Wve(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function PWt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Hve),qve,Wve(e)),this.on(this.events("view","pointerout",Hve),qve,Wve(t)),this}function DWt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function rf(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const NWt="vega-bind",OWt="vega-bind-name",$Wt="vega-bind-radio";function LWt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Nne(r.debounce,i.update))),(r.input==null&&r.element?MWt:BWt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function MWt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),r8e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(FWt(i))}}function FWt(e){return typeof Event<"u"?new Event(e):{type:e}}function BWt(e,t,n,r){const i=r.signal(n.signal),s=rf("div",{class:NWt}),o=n.input==="radio"?s:s.appendChild(rf("label"));o.appendChild(rf("span",{class:OWt},n.name||n.signal)),t.appendChild(s);let a=jWt;switch(n.input){case"checkbox":a=UWt;break;case"select":a=zWt;break;case"radio":a=VWt;break;case"range":a=HWt;break}a(e,o,n,i)}function jWt(e,t,n,r){const i=rf("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function UWt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=rf("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function zWt(e,t,n,r){const i=rf("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};zL(o,r)&&(u.selected=!0),i.appendChild(rf("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(zL(n.options[a],o)){i.selectedIndex=a;return}}}function VWt(e,t,n,r){const i=rf("span",{class:$Wt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};zL(o,r)&&(u.checked=!0);const l=rf("input",u);l.addEventListener("change",()=>e.update(o));const c=rf("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)zL(a[l].value,o)&&(a[l].checked=!0)}}function HWt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||V1(s,i,100),a=rf("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=rf("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function zL(e,t){return e===t||e+""==t+""}function i8e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,t8e(e),n8e(e),IB(e),i,s).background(e.background())}function mse(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function qWt(e,t,n,r){const i=new r(e.loader(),mse(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,IB(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function WWt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=xB(r);e=n._el=e?OV(n,e,!0):null,gWt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||ZP,a=e?s.renderer:s.headless;return n._renderer=a?i8e(n,n._renderer,e,a):null,n._handler=qWt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=OV(n,t,!0):e.appendChild(rf("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=OV(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{LWt(n,u.element||t,u)})),n}function OV(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const MA=e=>+e||0,GWt=e=>({top:e,bottom:e,left:e,right:e});function Gve(e){return Ot(e)?{top:MA(e.top),bottom:MA(e.bottom),left:MA(e.left),right:MA(e.right)}:GWt(MA(e))}async function gse(e,t,n,r){const i=xB(t),s=i&&i.headless;return s||Ke("Unrecognized renderer type: "+t),await e.runAsync(),i8e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function YWt(e,t){e!==i1.Canvas&&e!==i1.SVG&&e!==i1.PNG&&Ke("Unrecognized image type: "+e);const n=await gse(this,e,t);return e===i1.SVG?KWt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function KWt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function XWt(e,t){return(await gse(this,i1.Canvas,e,t)).canvas()}async function QWt(e){return(await gse(this,i1.SVG,e)).svg()}function JWt(e,t,n){return JFe(e,FT,h3,n).parse(t)}function ZWt(e){var t=this._runtime.scales;return sn(t,e)||Ke("Unrecognized scale or projection: "+e),t[e].value}var s8e="width",o8e="height",yse="padding",Yve={skip:!0};function a8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===yse?r.left+r.right:0)}function u8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===yse?r.top+r.bottom:0)}function eGt(e){var t=e._signals,n=t[s8e],r=t[o8e],i=t[yse];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=a8e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=u8e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function tGt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(s8e,n,Yve),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(o8e,r,Yve),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function nGt(e){return this._runtime.getState(e||{data:rGt,signals:iGt,recurse:!0})}function rGt(e,t){return t.modified&&Qe(t.input.value)&&!e.startsWith("_:vega:_")}function iGt(e,t){return!(e==="parent"||t instanceof FT.proxy)}function sGt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function oGt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(jwt(n,t))}function aGt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",uGt(r))}function uGt(e){return e==null?"":Qe(e)?l8e(e):Ot(e)&&!S1(e)?lGt(e):e+""}function lGt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Qe(n)?l8e(n):c8e(n))}).join(`
`)}function l8e(e){return"["+e.map(c8e).join(", ")+"]"}function c8e(e){return Qe(e)?"[]":Ot(e)&&!S1(e)?"{}":e}function cGt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function f8e(e,t){const n=this;if(t=t||{},O2.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Gn({},e.locale,t.locale);n.locale(c5e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||i1.Canvas,n._scenegraph=new iMe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||aGt,n._redraw=!0,n._handler=new ZP().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=IWt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=JWt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=a8e(n,n._width),n._viewHeight=u8e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,eGt(n),yWt(n),vWt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function VO(e,t){return sn(e._signals,t)?e._signals[t]:Ke("Unrecognized signal name: "+Et(t))}function d8e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Kve(e,t,n,r){let i=d8e(n,r);return i||(i=mse(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Xve(e,t,n){const r=d8e(t,n);return r&&t._targets.remove(r),e}Ct(f8e,O2,{async evaluate(e,t,n){if(await O2.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,wWt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&f6(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&e8e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=VO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Gve(e)):Gve(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(xB(e)||Ke("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(O2.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(VO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:tGt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=mse(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Kve(this,e,VO(this,e),t)},removeSignalListener(e,t){return Xve(this,VO(this,e),t)},addDataListener(e,t){return Kve(this,e,UL(this,e).values,t)},removeDataListener(e,t){return Xve(this,UL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=XY(this,null);this._globalCursor=!!e,t&&XY(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:oGt,events:RWt,finalize:DWt,hover:PWt,data:bWt,change:AB,insert:xWt,remove:_Wt,scale:ZWt,initialize:WWt,toImageURL:YWt,toCanvas:XWt,toSVG:QWt,getState:nGt,setState:sGt,_watchPixelRatio:cGt});const fGt="view",VL="[",HL="]",h8e="{",p8e="}",dGt=":",m8e=",",hGt="@",pGt=">",mGt=/[[\]{}]/,gGt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let g8e,y8e;function Kv(e,t,n){return g8e=t||fGt,y8e=n||gGt,v8e(e.trim()).map(QY)}function yGt(e){return y8e[e]}function kk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function v8e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=kk(e,i,m8e,VL+h8e,HL+p8e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function QY(e){return e[0]==="["?vGt(e):bGt(e)}function vGt(e){const t=e.length;let n=1,r;if(n=kk(e,n,HL,VL,HL),n===t)throw"Empty between selector: "+e;if(r=v8e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==pGt)throw"Expected '>' after between selector: "+e;r=r.map(QY);const i=QY(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function bGt(e){const t={source:g8e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===p8e){if(a=e.lastIndexOf(h8e),a>=0){try{r=xGt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===hGt&&(i=++a),u=kk(e,a,dGt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=kk(e,a,VL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=kk(e,a,HL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==VL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||mGt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):yGt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function xGt(e){const t=e.split(m8e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function _Gt(e){return Ot(e)?e:{type:e||"pad"}}const FA=e=>+e||0,wGt=e=>({top:e,bottom:e,left:e,right:e});function EGt(e){return Ot(e)?e.signal?e:{top:FA(e.top),bottom:FA(e.bottom),left:FA(e.left),right:FA(e.right)}:wGt(FA(e))}const ha=e=>Ot(e)&&!Qe(e)?Gn({},e):{value:e};function Qve(e,t,n,r){return n!=null?(Ot(n)&&!Qe(n)||Qe(n)&&n.length&&Ot(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Ha(e,t,n){for(const r in t)Qve(e,r,t[r]);for(const r in n)Qve(e,r,n[r],"update")}function gC(e,t,n){for(const r in t)n&&sn(n,r)||(e[r]=Gn(e[r]||{},t[r]));return e}function kE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const vse="mark",bse="frame",xse="scope",TGt="axis",SGt="axis-domain",CGt="axis-grid",AGt="axis-label",IGt="axis-tick",kGt="axis-title",RGt="legend",PGt="legend-band",DGt="legend-entry",NGt="legend-gradient",b8e="legend-label",OGt="legend-symbol",$Gt="legend-title",LGt="title",MGt="title-text",FGt="title-subtitle";function BGt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!kE(u,e)&&$V(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===bse?i.group:n===vse?Gn({},i.mark,i[t]):null;for(u in c)l=kE(u,e)||(u==="fill"||u==="stroke")&&(kE("fill",e)||kE("stroke",e)),l||$V(s,u,c[u]);Dt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)kE(h,e)||$V(s,h,d[h])}),e=Gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Gn(o,e.enter),a&&(e.update=Gn(a,e.update)),e}function $V(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const x8e=e=>Nt(e)?Et(e):e.signal?`(${e.signal})`:_8e(e);function kB(e){if(e.gradient!=null)return UGt(e);let t=e.signal?`(${e.signal})`:e.color?jGt(e.color):e.field!=null?_8e(e.field):e.value!==void 0?Et(e.value):void 0;return e.scale!=null&&(t=zGt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${S6(e.exponent)})`),e.mult!=null&&(t+=`*${S6(e.mult)}`),e.offset!=null&&(t+=`+${S6(e.offset)}`),e.round&&(t=`round(${t})`),t}const HO=(e,t,n,r)=>`(${e}(${[t,n,r].map(kB).join(",")})+'')`;function jGt(e){return e.c?HO("hcl",e.h,e.c,e.l):e.h||e.s?HO("hsl",e.h,e.s,e.l):e.l||e.a?HO("lab",e.l,e.a,e.b):e.r||e.g||e.b?HO("rgb",e.r,e.g,e.b):null}function UGt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Et(n));for(;t.length&&Mr(t)==null;)t.pop();return t.unshift(x8e(e.gradient)),`gradient(${t.join(",")})`}function S6(e){return Ot(e)?"("+kB(e)+")":e}function _8e(e){return w8e(Ot(e)?e:{datum:e})}function w8e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ke("Invalid field reference: "+Et(e));return e.signal||(r=Nt(r)?Lm(r).map(Et).join("]["):w8e(r)),t+"["+r+"]"}function zGt(e,t){const n=x8e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+S6(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function VGt(e){let t="";return e.forEach(n=>{const r=kB(n);t+=n.test?`(${n.test})?${r}:`:r}),Mr(t)===":"&&(t+="null"),t}function E8e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=BGt(e,t,n,r,i.config);for(const a in e)o[a]=HGt(e[a],t,s,i);return s}function HGt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=WGt(qGt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function qGt(e){return Qe(e)?VGt(e):kB(e)}function WGt(e,t,n,r){const i=_m(e,t);return i.$fields.forEach(s=>r[s]=1),Gn(n,i.$params),i.$expr}const GGt="outer",YGt=["value","update","init","react","bind"];function Jve(e,t){Ke(e+' for "outer" push: '+Et(t))}function T8e(e,t){const n=e.name;if(e.push===GGt)t.signals[n]||Jve("No prior signal definition",n),YGt.forEach(r=>{e[r]!==void 0&&Jve("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function JY(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function RB(e,t,n,r){return new JY(e,t,n,r)}function qL(e,t){return RB("operator",e,t)}function tn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function p3(e,t){return t?{$field:e,$name:t}:{$field:e}}const ZY=p3("key");function Zve(e,t){return{$compare:e,$order:t}}function KGt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const XGt="ascending",QGt="descending";function JGt(e){return Ot(e)?(e.order===QGt?"-":"+")+PB(e.op,e.field):""}function PB(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const _se="scope",eK="view";function Vo(e){return e&&e.signal}function ZGt(e){return e&&e.expr}function C6(e){if(Vo(e))return!0;if(Ot(e)){for(const t in e)if(C6(e[t]))return!0}return!1}function th(e,t){return e??t}function Fx(e){return e&&e.signal||e}const ebe="timer";function m3(e,t){return(e.merge?tYt:e.stream?nYt:e.type?rYt:Ke("Invalid stream specification: "+Et(e)))(e,t)}function eYt(e){return e===_se?eK:e||eK}function tYt(e,t){const n=e.merge.map(i=>m3(i,t)),r=wse({merge:n},e,t);return t.addStream(r).id}function nYt(e,t){const n=m3(e.stream,t),r=wse({stream:n},e,t);return t.addStream(r).id}function rYt(e,t){let n;e.type===ebe?(n=t.event(ebe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(eYt(e.source),e.type);const r=wse({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function wse(e,t,n){let r=t.between;return r&&(r.length!==2&&Ke('Stream "between" parameter must have 2 entries: '+Et(t)),e.between=[m3(r[0],n),m3(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(iYt(t.marktype,t.markname,t.markrole)),t.source===_se&&r.push("inScope(event.item)"),r.length&&(e.filter=_m("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function iYt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const sYt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function oYt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Ke("Signal update missing events specification."),Nt(s)&&(s=Kv(s,t.isSubscope()?_se:eK)),s=Dt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[uYt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Ke("Signal encode and update are mutually exclusive."),o="encode(item(),"+Et(r)+")"),i.update=Nt(o)?_m(o,t):o.expr!=null?_m(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:sYt,$params:{$value:t.signalRef(o.signal)}}:Ke("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Gn(aYt(u,t),i)))}function aYt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):m3(e,t)}}function uYt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function lYt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Ke("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=_m(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>oYt(i,t,n.id))}const Ui=e=>(t,n,r)=>RB(e,n,t||void 0,r),S8e=Ui("aggregate"),cYt=Ui("axisticks"),C8e=Ui("bound"),Qh=Ui("collect"),tbe=Ui("compare"),fYt=Ui("datajoin"),A8e=Ui("encode"),dYt=Ui("expression"),hYt=Ui("facet"),pYt=Ui("field"),mYt=Ui("key"),gYt=Ui("legendentries"),yYt=Ui("load"),vYt=Ui("mark"),bYt=Ui("multiextent"),xYt=Ui("multivalues"),_Yt=Ui("overlap"),wYt=Ui("params"),I8e=Ui("prefacet"),EYt=Ui("projection"),TYt=Ui("proxy"),SYt=Ui("relay"),k8e=Ui("render"),CYt=Ui("scale"),lw=Ui("sieve"),AYt=Ui("sortitems"),R8e=Ui("viewlayout"),IYt=Ui("values");let kYt=0;const P8e={min:"min",max:"max",count:"sum"};function RYt(e,t){const n=e.type||"linear";gLe(n)||Ke("Unrecognized scale type: "+Et(n)),t.addScale(e.name,{type:n,domain:void 0})}function PYt(e,t){const n=t.getScale(e.name).params;let r;n.domain=D8e(e.domain,e,t),e.range!=null&&(n.range=O8e(e,t,n)),e.interpolate!=null&&UYt(e.interpolate,n),e.nice!=null&&(n.nice=jYt(e.nice,t)),e.bins!=null&&(n.bins=BYt(e.bins,t));for(r in e)sn(n,r)||r==="name"||(n[r]=td(e[r],t))}function td(e,t){return Ot(e)?e.signal?t.signalRef(e.signal):Ke("Unsupported object: "+Et(e)):e}function A6(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>td(n,t))}function DB(e){Ke("Can not find data set: "+Et(e))}function D8e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Ke("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Qe(e)?DYt:e.fields?OYt:NYt)(e,t,n)}function DYt(e,t,n){return e.map(r=>td(r,n))}function NYt(e,t,n){const r=n.getData(e.data);return r||DB(e.data),UT(t.type)?r.valuesRef(n,e.field,N8e(e.sort,!1)):bLe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function OYt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Nt(o)?{data:r,field:o}:Qe(o)||o.signal?$Yt(o,n):o,s.push(o),s),[]);return(UT(t.type)?LYt:bLe(t.type)?MYt:FYt)(e,n,i)}function $Yt(e,t){const n="_:vega:_"+kYt++,r=Qh({});if(Qe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Et(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,lw({})]),{data:n,field:"data"}}function LYt(e,t,n){const r=N8e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||DB(l.data),c.countsRef(t,l.field,r)}),a={groupby:ZY,pulse:o};r&&(i=r.op||"count",s=r.field?PB(i,r.field):"count",a.ops=[P8e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(S8e(a));const u=t.add(Qh({pulse:tn(i)}));return s=t.add(IYt({field:ZY,sort:t.sortRef(r),pulse:tn(u)})),tn(s)}function N8e(e,t){return e&&(!e.field&&!e.op?Ot(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Ke("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!P8e[e.op]&&Ke("Multiple domain scales can not be sorted using "+e.op)),e}function MYt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||DB(i.data),s.domainRef(t,i.field)});return tn(t.add(xYt({values:r})))}function FYt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||DB(i.data),s.extentRef(t,i.field)});return tn(t.add(bYt({extents:r})))}function BYt(e,t){return e.signal||Qe(e)?A6(e,t):t.objectProperty(e)}function jYt(e,t){return e.signal?t.signalRef(e.signal):Ot(e)?{interval:td(e.interval),step:td(e.step)}:td(e)}function UYt(e,t){t.interpolate=td(e.type||e),e.gamma!=null&&(t.interpolateGamma=td(e.gamma))}function O8e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Nt(i)){if(r&&sn(r,i))return e=Gn({},e,{range:r[i]}),O8e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=UT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ke("Unrecognized scale range value: "+Et(i))}else if(i.scheme){n.scheme=Qe(i.scheme)?A6(i.scheme,t):td(i.scheme,t),i.extent&&(n.schemeExtent=A6(i.extent,t)),i.count&&(n.schemeCount=td(i.count,t));return}else if(i.step){n.rangeStep=td(i.step,t);return}else{if(UT(e.type)&&!Qe(i))return D8e(i,e,t);Qe(i)||Ke("Unsupported range type: "+Et(i))}return i.map(s=>(Qe(s)?A6:td)(s,t))}function zYt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=tK(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=tK(n[i],i,t));t.addProjection(e.name,r)}function tK(e,t,n){return Qe(e)?e.map(r=>tK(r,t,n)):Ot(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Ke("Unsupported parameter object: "+Et(e)):e}const Jh="top",yC="left",vC="right",cv="bottom",$8e="center",VYt="vertical",HYt="start",qYt="middle",WYt="end",nK="index",Ese="label",GYt="offset",WT="perc",YYt="perc2",id="value",iD="guide-label",Tse="guide-title",KYt="group-title",XYt="group-subtitle",nbe="symbol",I6="gradient",rK="discrete",iK="size",QYt="shape",JYt="fill",ZYt="stroke",eKt="strokeWidth",tKt="strokeDash",nKt="opacity",Sse=[iK,QYt,JYt,ZYt,eKt,tKt,nKt],sD={name:1,style:1,interactive:1},zr={value:0},sd={value:1},NB="group",L8e="rect",Cse="rule",rKt="symbol",cw="text";function g3(e){return e.type=NB,e.interactive=e.interactive||!1,e}function Ic(e,t){const n=(r,i)=>th(e[r],th(t[r],i));return n.isVertical=r=>VYt===th(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>th(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>th(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>th(e.columns,th(t.columns,+n.isVertical(!0))),n}function M8e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function iKt(e,t,n){const r=t.config.style[n];return r&&r[e]}function OB(e,t,n){return`item.anchor === '${HYt}' ? ${e} : item.anchor === '${WYt}' ? ${t} : ${n}`}const Ase=OB(Et(yC),Et(vC),Et($8e));function sKt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ot(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function F8e(e,t){return t?e?Ot(e)?Object.assign({},e,{offset:F8e(e.offset,t)}):{value:e,offset:t}:t:e}function xf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=gC(e.encode,t,sD)):e.interactive=!1,e}function oKt(e,t,n,r){const i=Ic(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:zr,x:zr,y:zr,width:ha(f),height:ha(d)},update:Gn({},u,{opacity:sd,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:zr}};return Ha(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),xf({type:L8e,role:NGt,encode:h},r)}function aKt(e,t,n,r,i){const s=Ic(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:zr,fill:{scale:t,field:id}};p[l]={signal:h+"datum."+WT,mult:u},p[c]=zr,p[f]={signal:h+"datum."+YYt,mult:u},p[d]=ha(a);const m={enter:p,update:Gn({},p,{opacity:sd}),exit:{opacity:zr}};return Ha(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),xf({type:L8e,role:PGt,key:id,from:i,encode:m},r)}const uKt=`datum.${WT}<=0?"${yC}":datum.${WT}>=1?"${vC}":"${$8e}"`,lKt=`datum.${WT}<=0?"${cv}":datum.${WT}>=1?"${Jh}":"${qYt}"`;function rbe(e,t,n,r){const i=Ic(e,t),s=i.isVertical(),o=ha(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:zr},update:c={opacity:sd,text:{field:Ese}},exit:{opacity:zr}};return Ha(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:th(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:lKt},f="y",d="x",h="1-"):(l.align=c.align={signal:uKt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+WT,mult:a},l[d]=c[d]=o,o.offset=th(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+nK}:void 0,xf({type:cw,role:b8e,style:iD,key:id,from:r,encode:p,overlap:u},n)}function cKt(e,t,n,r,i){const s=Ic(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${GYt} : datum.${iK}`,h=l?ha(l):{field:iK},p=`datum.${nK}`,m=`max(1, ${i})`;let g,y,v,b,_;h.mult=.5,g={enter:y={opacity:zr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:sd,x:y.x,y:y.y},exit:{opacity:zr}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Ha(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Sse.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:id})});const C=xf({type:rKt,role:OGt,key:id,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=ha(c);A.offset=s("labelOffset"),g={enter:y={opacity:zr,x:{signal:d,offset:A},y:h},update:v={opacity:sd,text:{field:Ese},x:y.x,y:y.y},exit:{opacity:zr}},Ha(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const R=xf({type:cw,role:b8e,style:iD,key:id,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:zr,height:l?ha(l):zr,opacity:zr},exit:{opacity:zr},update:v={opacity:sd,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,_={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,_={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:nK}},g3({role:xse,from:r,encode:gC(g,o,sD),marks:[C,R],name:u,interactive:a,sort:_})}function fKt(e,t){const n=Ic(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Ise='item.orient === "left"',kse='item.orient === "right"',$B=`(${Ise} || ${kse})`,dKt=`datum.vgrad && ${$B}`,hKt=OB('"top"','"bottom"','"middle"'),pKt=OB('"right"','"left"','"center"'),mKt=`datum.vgrad && ${kse} ? (${pKt}) : (${$B} && !(datum.vgrad && ${Ise})) ? "left" : ${Ase}`,gKt=`item._anchor || (${$B} ? "middle" : "start")`,yKt=`${dKt} ? (${Ise} ? -90 : 90) : 0`,vKt=`${$B} ? (datum.vgrad ? (${kse} ? "bottom" : "top") : ${hKt}) : "top"`;function bKt(e,t,n,r){const i=Ic(e,t),s={enter:{opacity:zr},update:{opacity:sd,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:zr}};return Ha(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:gKt},angle:{signal:yKt},align:{signal:mKt},baseline:{signal:vKt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),xf({type:cw,role:$Gt,style:Tse,from:r,encode:s},n)}function xKt(e,t){let n;return Ot(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+ibe(e.path)+")":e.sphere&&(n="geoShape("+ibe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function ibe(e){return Ot(e)&&e.signal?e.signal:Et(e)}function B8e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===NB?xse:t||vse}function _Kt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||B8e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function wKt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Rse(e,t){const n=E5e(e.type);n||Ke("Unrecognized transform type: "+Et(e.type));const r=RB(n.type.toLowerCase(),null,j8e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function j8e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=EKt(o,t,n)}return r}function EKt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return TKt(e,t,n);if(i===void 0){e.required&&Ke("Missing required "+Et(t.type)+" parameter: "+Et(e.name));return}else{if(r==="param")return SKt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Vo(i)?i.map(s=>sbe(e,s,n)):sbe(e,i,n)}function sbe(e,t,n){const r=e.type;if(Vo(t))return abe(r)?Ke("Expression references can not be signals."):LV(r)?n.fieldRef(t):ube(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||LV(r);return i&&CKt(t)?n.exprRef(t.expr,t.as):i&&AKt(t)?p3(t.field,t.as):abe(r)?_m(t,n):IKt(r)?tn(n.getData(t).values):LV(r)?p3(t):ube(r)?n.compareRef(t):t}}function TKt(e,t,n){return Nt(t.from)||Ke('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function SKt(e,t,n){const r=t[e.name];return e.array?(Qe(r)||Ke("Expected an array of sub-parameters. Instead: "+Et(r)),r.map(i=>obe(e,i,n))):obe(e,r,n)}function obe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Ke("Unsupported parameter: "+Et(t));const s=Gn(j8e(i,t,n),i.key);return tn(n.add(wYt(s)))}const CKt=e=>e&&e.expr,AKt=e=>e&&e.field,IKt=e=>e==="data",abe=e=>e==="expr",LV=e=>e==="field",ube=e=>e==="compare";function kKt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Ke("Only group marks can be faceted."),r.field!=null?o=a=k6(r,n):(e.data?a=tn(n.getData(e.data).aggregate):(s=Rse(Gn({type:"aggregate",groupby:Dt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=k6(r,n),o=a=tn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=tn(n.add(Qh(null,[{}]))),o||(o=k6(e,n)),{key:i,pulse:o,parent:a}}function k6(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:tn(t.getData(e.data).output)}function m_(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}m_.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=tn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new m_(e,s,i,r,o)};function U8e(e){return Nt(e)?e:null}function lbe(e,t,n){const r=PB(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function BA(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=JGt(s);let l=U8e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:ZY,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:tn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(RB(r,void 0,d)),o&&(t.index[i]=f),c=tn(f),l!=null&&(a[l]=c)}return c}m_.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=U8e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&lbe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:tn(r.output)},n&&n.field&&lbe(e,u,n),a=e.add(S8e(u)),o=e.add(Qh({pulse:tn(a)})),o={agg:a,ref:tn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return tn(this.values)},extentRef(e,t){return BA(e,this,"extent","extent",t,!1)},domainRef(e,t){return BA(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return BA(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return BA(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return BA(e,this,"indata","tupleindex",t,!0,!0)}};function RKt(e,t,n){const r=e.from.facet,i=r.name,s=k6(r,t);let o;r.name||Ke("Facet must have a name: "+Et(r)),r.data||Ke("Facet must reference a data set: "+Et(r)),r.field?o=t.add(I8e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(hYt({key:t.keyRef(r.groupby),group:tn(t.proxy(n.parent)),pulse:s})):Ke("Facet must specify groupby or field: "+Et(r));const a=t.fork(),u=a.add(Qh()),l=a.add(lw({pulse:tn(u)}));a.addData(i,new m_(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function PKt(e,t,n){const r=t.add(I8e({pulse:n.pulse})),i=t.fork();i.add(lw()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function z8e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(qL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=_m(l,t);u.update=c.$expr,u.params=c.$params}function LB(e,t){const n=B8e(e),r=e.type===NB,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===xse||n===bse,a,u,l,c,f,d,h;const p=n===vse||o||i,m=kKt(e.from,r,t);u=t.add(fYt({key:m.key||(e.key?p3(e.key):void 0),pulse:m.pulse,clean:!r}));const g=tn(u);u=l=t.add(Qh({pulse:g})),u=t.add(vYt({markdef:_Kt(e),interactive:wKt(e.interactive,t),clip:xKt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:tn(u)}));const y=tn(u);u=c=t.add(A8e(E8e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const C=Rse(S,t),A=C.metadata;(A.generates||A.changes)&&Ke("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),C.params.pulse=tn(u),t.add(u=C)}),e.sort&&(u=t.add(AYt({sort:t.compareRef(e.sort),pulse:tn(u)})));const v=tn(u);(i||o)&&(o=t.add(R8e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=tn(o));const b=t.add(C8e({mark:y,pulse:d||v}));h=tn(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?RKt(e,t,m):p?PKt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=DKt(s,h,t));const _=t.add(k8e({pulse:h})),E=t.add(lw({pulse:tn(_)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new m_(t,l,_,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Ke("Marks only support modify triggers."),z8e(S,t,f)}))}function DKt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Vo(s)?n.signalRef(s.signal):s,method:Vo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Vo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return tn(n.add(_Yt(o)))}function NKt(e,t){const n=t.config.legend,r=e.encode||{},i=Ic(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Sse.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Ke("Missing valid scale for legend.");const p=OKt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=tn(t.add(Qh(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=tn(t.add(gYt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===I6?(h=[oKt(e,c,n,r.gradient),rbe(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Fx(i.gradientLength())})/100))`)):p===rK?h=[aKt(e,c,n,r.gradient,v),rbe(e,n,r.labels,v)]:(f=fKt(e,n),h=[cKt(e,n,r,v,Fx(f.columns))],d.size=MKt(e,t,h[0].marks)),h=[g3({role:DGt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(bKt(e,n,r.title,g)),LB(g3({role:RGt,from:g,encode:gC(LKt(i,e,n),s,sD),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function OKt(e,t){let n=e.type||nbe;return!e.type&&$Kt(e)===1&&(e.fill||e.stroke)&&(n=Ure(t)?I6:bY(t)?rK:nbe),n!==I6?n:bY(t)?rK:I6}function $Kt(e){return Sse.reduce((t,n)=>t+(e[n]?1:0),0)}function LKt(e,t,n){const r={enter:{},update:{}};return Ha(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function MKt(e,t,n){const r=Fx(cbe("size",e,n)),i=Fx(cbe("strokeWidth",e,n)),s=Fx(FKt(n[1].encode,t,iD));return _m(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function cbe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:M8e(e,n[0].encode)}function FKt(e,t,n){return M8e("fontSize",e)||iKt("fontSize",t,n)}const BKt=`item.orient==="${yC}"?-90:item.orient==="${vC}"?90:0`;function jKt(e,t){e=Nt(e)?{text:e}:e;const n=Ic(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=tn(t.add(Qh(null,[l])));return u.push(VKt(e,n,UKt(e),c)),e.subtitle&&u.push(HKt(e,n,r.subtitle,c)),LB(g3({role:LGt,from:c,encode:zKt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function UKt(e){const t=e.encode;return t&&t.title||Gn({name:e.name,interactive:e.interactive,style:e.style},t)}function zKt(e,t){const n={enter:{},update:{}};return Ha(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Ase},angle:{signal:BKt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),gC(n,t,sD)}function VKt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ha(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),xf({type:cw,role:MGt,style:KYt,from:r,encode:o},n)}function HKt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ha(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),xf({type:cw,role:FGt,style:XYt,from:r,encode:o},n)}function qKt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Rse(r,t))}),e.on&&e.on.forEach(r=>{z8e(r,t,e.name)}),t.addDataPipeline(e.name,WKt(e,t,n))}function WKt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Vo(e.values)||C6(e.format)?(r.push(fbe(t,e)),r.push(i=Eb())):r.push(i=Eb({$ingest:e.values,$format:e.format})):e.url?C6(e.url)||C6(e.format)?(r.push(fbe(t,e)),r.push(i=Eb())):r.push(i=Eb({$request:e.url,$format:e.format})):e.source&&(i=a=Dt(e.source).map(d=>tn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Eb()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=SYt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Eb())),i||r.push(Eb()),r.push(lw({})),r}function Eb(e){const t=Qh({},e);return t.metadata={source:!0},t}function fbe(e,t){return yYt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const V8e=e=>e===cv||e===Jh,MB=(e,t,n)=>Vo(e)?XKt(e.signal,t,n):e===yC||e===Jh?t:n,pa=(e,t,n)=>Vo(e)?YKt(e.signal,t,n):V8e(e)?t:n,Sh=(e,t,n)=>Vo(e)?KKt(e.signal,t,n):V8e(e)?n:t,H8e=(e,t,n)=>Vo(e)?QKt(e.signal,t,n):e===Jh?{value:t}:{value:n},GKt=(e,t,n)=>Vo(e)?JKt(e.signal,t,n):e===vC?{value:t}:{value:n},YKt=(e,t,n)=>q8e(`${e} === '${Jh}' || ${e} === '${cv}'`,t,n),KKt=(e,t,n)=>q8e(`${e} !== '${Jh}' && ${e} !== '${cv}'`,t,n),XKt=(e,t,n)=>Pse(`${e} === '${yC}' || ${e} === '${Jh}'`,t,n),QKt=(e,t,n)=>Pse(`${e} === '${Jh}'`,t,n),JKt=(e,t,n)=>Pse(`${e} === '${vC}'`,t,n),q8e=(e,t,n)=>(t=t!=null?ha(t):t,n=n!=null?ha(n):n,dbe(t)&&dbe(n)?(t=t?t.signal||Et(t.value):null,n=n?n.signal||Et(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Gn({test:e},t)].concat(n||[])),dbe=e=>e==null||Object.keys(e).length===1,Pse=(e,t,n)=>({signal:`${e} ? (${s2(t)}) : (${s2(n)})`}),ZKt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${yC}' ? (${s2(r)}) : `:"")+(n!=null?`${e} === '${cv}' ? (${s2(n)}) : `:"")+(i!=null?`${e} === '${vC}' ? (${s2(i)}) : `:"")+(t!=null?`${e} === '${Jh}' ? (${s2(t)}) : `:"")+"(null)"}),s2=e=>Vo(e)?e.signal:e==null?null:Et(e),eXt=(e,t)=>t===0?0:Vo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},$2=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function fE(e,t,n,r){let i;if(t&&sn(t,e))return t[e];if(sn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Tse][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[iD][i]}return null}function hbe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function tXt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Vo(o)){const f=hbe([n.axisX,n.axisY]),d=hbe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=pa(o,fE(l,n.axisX,i,r),fE(l,n.axisY,i,r));u={};for(l of d)u[l]=ZKt(o.signal,fE(l,n.axisTop,i,r),fE(l,n.axisBottom,i,r),fE(l,n.axisLeft,i,r),fE(l,n.axisRight,i,r))}else a=o===Jh||o===cv?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Gn({},i,a,u,s):i}function nXt(e,t,n,r){const i=Ic(e,t),s=e.orient;let o,a;const u={enter:o={opacity:zr},update:a={opacity:sd},exit:{opacity:zr}};Ha(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=pbe(e,0),c=pbe(e,1);return o.x=a.x=pa(s,l,zr),o.x2=a.x2=pa(s,c),o.y=a.y=Sh(s,l,zr),o.y2=a.y2=Sh(s,c),xf({type:Cse,role:SGt,from:r,encode:u},n)}function pbe(e,t){return{scale:e.scale,range:t}}function rXt(e,t,n,r,i){const s=Ic(e,t),o=e.orient,a=e.gridScale,u=MB(o,1,-1),l=iXt(e.offset,u);let c,f,d;const h={enter:c={opacity:zr},update:d={opacity:sd},exit:f={opacity:zr}};Ha(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:id,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=pa(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Gn(m,{mult:u,offset:l});return c.x=d.x=pa(o,p,g),c.y=d.y=Sh(o,p,g),c.x2=d.x2=Sh(o,y),c.y2=d.y2=pa(o,y),f.x=pa(o,p),f.y=Sh(o,p),xf({type:Cse,role:CGt,key:id,from:r,encode:h},n)}function iXt(e,t){if(t!==1)if(!Ot(e))e=Vo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Gn({},e);for(;n.mult!=null;)if(Ot(n.mult))n=n.mult=Gn({},n.mult);else return n.mult=Vo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function sXt(e,t,n,r,i,s){const o=Ic(e,t),a=e.orient,u=MB(a,-1,1);let l,c,f;const d={enter:l={opacity:zr},update:f={opacity:sd},exit:c={opacity:zr}};Ha(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ha(i);h.mult=u;const p={scale:e.scale,field:id,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=pa(a,zr,p),f.y2=l.y2=pa(a,h),c.x=pa(a,p),f.x=l.x=Sh(a,zr,p),f.x2=l.x2=Sh(a,h),c.y=Sh(a,p),xf({type:Cse,role:IGt,key:id,from:r,encode:d},n)}function MV(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function oXt(e,t,n,r,i,s){const o=Ic(e,t),a=e.orient,u=e.scale,l=MB(a,-1,1),c=Fx(o("labelFlush")),f=Fx(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ha(i);g.mult=l,g.offset=ha(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:id,band:.5,offset:F8e(s.offset,o("labelOffset"))},v=pa(a,p?MV(u,c,'"left"','"right"','"center"'):{value:"center"},GKt(a,"left","right")),b=pa(a,H8e(a,"bottom","top"),p?MV(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),_=MV(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:zr,x:pa(a,y,g),y:Sh(a,y,g)},S={enter:E,update:m={opacity:sd,text:{field:Ese},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:zr,x:E.x,y:E.y}};Ha(S,{dx:!d&&p?pa(a,_):null,dy:!h&&p?Sh(a,_):null}),Ha(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const C=o("labelBound");let A=o("labelOverlap");return A=A||C?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:C?{scale:u,orient:a,tolerance:C}:null}:void 0,m.align!==v&&(m.align=$2(m.align,v)),m.baseline!==b&&(m.baseline=$2(m.baseline,b)),xf({type:cw,role:AGt,style:iD,key:id,from:r,encode:S,overlap:A},n)}function aXt(e,t,n,r){const i=Ic(e,t),s=e.orient,o=MB(s,-1,1);let a,u;const l={enter:a={opacity:zr,anchor:ha(i("titleAnchor",null)),align:{signal:Ase}},update:u=Gn({},a,{opacity:sd,text:ha(e.title)}),exit:{opacity:zr}},c={signal:`lerp(range("${e.scale}"), ${OB(0,1,.5)})`};return u.x=pa(s,c),u.y=Sh(s,c),a.angle=pa(s,zr,eXt(o,90)),a.baseline=pa(s,H8e(s,cv,Jh),{value:cv}),u.angle=a.angle,u.baseline=a.baseline,Ha(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),uXt(i,s,l,n),l.update.align=$2(l.update.align,a.align),l.update.angle=$2(l.update.angle,a.angle),l.update.baseline=$2(l.update.baseline,a.baseline),xf({type:cw,role:kGt,style:Tse,from:r,encode:l},n)}function uXt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=$2(ha(a),n.update[u]),!1):!kE(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ha(o):pa(t,ha(o),ha(s))}function lXt(e,t){const n=tXt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Ic(e,n),l=sKt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=tn(t.add(Qh({},[c]))),d=tn(t.add(cYt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(rXt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(sXt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(oXt(e,n,r.labels,d,p,l))),c.domain&&h.push(nXt(e,n,r.domain,f)),c.title&&h.push(aXt(e,n,r.title,f)),LB(g3({role:TGt,from:f,encode:gC(cXt(u,e),i,sD),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function cXt(e,t){const n={enter:{},update:{}};return Ha(n,{orient:e("orient"),offset:e("offset")||0,position:th(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function W8e(e,t,n){const r=Dt(e.signals),i=Dt(e.scales);return n||r.forEach(s=>T8e(s,t)),Dt(e.projections).forEach(s=>zYt(s,t)),i.forEach(s=>RYt(s,t)),Dt(e.data).forEach(s=>qKt(s,t)),i.forEach(s=>PYt(s,t)),(n||r).forEach(s=>lYt(s,t)),Dt(e.axes).forEach(s=>lXt(s,t)),Dt(e.marks).forEach(s=>LB(s,t)),Dt(e.legends).forEach(s=>NKt(s,t)),e.title&&jKt(e.title,t),t.parseLambdas(),t}const fXt=e=>gC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function dXt(e,t){const n=t.config,r=tn(t.root=t.add(qL())),i=hXt(e,n);i.forEach(l=>T8e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Qh()),o=t.add(A8e(E8e(fXt(e.encode),NB,bse,e.style,t,{pulse:tn(s)}))),a=t.add(R8e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:tn(o)}));t.operators.pop(),t.pushState(tn(o),tn(a),null),W8e(e,t,i),t.operators.push(a);let u=t.add(C8e({mark:r,pulse:tn(a)}));return u=t.add(k8e({pulse:tn(u)})),u=t.add(lw({pulse:tn(u)})),t.addData("root",new m_(t,s,s,u)),t}function jA(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function hXt(e,t){const n=o=>th(e[o],t[o]),r=[jA("background",n("background")),jA("autosize",_Gt(n("autosize"))),jA("padding",EGt(n("padding"))),jA("width",n("width")||0),jA("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Dt(e.signals).forEach(o=>{sn(i,o.name)?o=Gn(i[o.name],o):r.push(o),s[o.name]=o}),Dt(t.signals).forEach(o=>{!sn(s,o.name)&&!sn(i,o.name)&&r.push(o)}),r}function G8e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function mbe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}G8e.prototype=mbe.prototype={parse(e){return W8e(e,this)},fork(){return new mbe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof JY?tn(e):e;return this.add(TYt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(tn(this.add(lw({pulse:e})))),this._parent.push(t),this._lookup.push(n?tn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Mr(this._parent)},encode(){return Mr(this._encode)},lookup(){return Mr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Nt(e))return p3(e,t);e.signal||Ke("Unsupported field reference: "+Et(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=tn(this.add(pYt(i)))}return r},compareRef(e){let t=!1;const n=s=>Vo(s)?(t=!0,this.signalRef(s.signal)):ZGt(s)?(t=!0,this.exprRef(s.expr)):s,r=Dt(e.field).map(n),i=Dt(e.order).map(n);return t?tn(this.add(tbe({fields:r,orders:i}))):Zve(r,i)},keyRef(e,t){let n=!1;const r=s=>Vo(s)?(n=!0,tn(i[s.signal])):s,i=this.signals;return e=Dt(e).map(r),n?tn(this.add(mYt({fields:e,flat:t}))):KGt(e,t)},sortRef(e){if(!e)return e;const t=PB(e.op,e.field),n=e.order||XGt;return n.signal?tn(this.add(tbe({fields:t,orders:this.signalRef(n.signal)}))):Zve(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return sn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Ke("Duplicate signal name: "+Et(e));const n=t instanceof JY?t:this.add(qL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Ke("Unrecognized signal name: "+Et(e)),this.signals[e]},signalRef(e){return this.signals[e]?tn(this.signals[e]):(sn(this.lambdas,e)||(this.lambdas[e]=this.add(qL(null))),tn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=_m(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ot(e)?e:this.signalRef(e.signal||Dse(e))},exprRef(e,t){const n={expr:_m(e,this)};return t&&(n.expr.$name=t),tn(this.add(dYt(n)))},addBinding(e,t){this.bindings||Ke("Nested signals do not support binding: "+Et(e)),this.bindings.push(Gn({signal:e},t))},addScaleProj(e,t){sn(this.scales,e)&&Ke("Duplicate scale or projection name: "+Et(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,CYt(t))},addProjection(e,t){this.addScaleProj(e,EYt(t))},getScale(e){return this.scales[e]||Ke("Unrecognized scale name: "+Et(e)),this.scales[e]},scaleRef(e){return tn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return sn(this.data,e)&&Ke("Duplicate data set name: "+Et(e)),this.data[e]=t},getData(e){return this.data[e]||Ke("Undefined data set name: "+Et(e)),this.data[e]},addDataPipeline(e,t){return sn(this.data,e)&&Ke("Duplicate data set name: "+Et(e)),this.addData(e,m_.fromEntries(this,t))}};function Dse(e){return(Qe(e)?pXt:mXt)(e)}function pXt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ot(i)?i.signal||Dse(i):Et(i))}return n+"]"}function mXt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Et(r)+":"+(Ot(i)?i.signal||Dse(i):Et(i));return t+"}"}function gXt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function yXt(e,t,n){return Ot(e)||Ke("Input Vega specification must be an object."),t=uC(gXt(),t,e.config),dXt(e,new G8e(t,n)).toRuntime()}var vXt="5.29.0";Gn(FT,yBt,sUt,MUt,pzt,_zt,Yzt,Azt,Xzt,eVt,cVt,yVt);const bXt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:So,CanvasHandler:ZP,CanvasRenderer:NL,DATE:xc,DAY:bu,DAYOFYEAR:xm,Dataflow:O2,Debug:y$e,Error:Cne,EventStream:Z8,Gradient:OLe,GroupItem:dB,HOURS:yf,Handler:die,HybridHandler:SMe,HybridRenderer:RY,Info:g$e,Item:fB,MILLISECONDS:Mh,MINUTES:vf,MONTH:Su,Marks:bf,MultiPulse:Wne,None:m$e,Operator:Wi,Parameters:J8,Pulse:C1,QUARTER:bc,RenderType:i1,Renderer:JP,ResourceLoader:ULe,SECONDS:hd,SVGHandler:dMe,SVGRenderer:vie,SVGStringRenderer:TMe,Scenegraph:iMe,TIME_UNITS:Fne,Transform:He,View:f8e,WEEK:Uo,Warn:Ane,YEAR:ja,accessor:Ac,accessorFields:Tu,accessorName:Gs,array:Dt,ascending:W8,bandwidthNRD:Xne,bin:C5e,bootstrapCI:A5e,boundClip:$Me,boundContext:YP,boundItem:SY,boundMark:eMe,boundStroke:Xg,changeset:ow,clampRange:I$e,codegenExpression:MFe,compare:Dne,constant:Du,cumulativeLogNormal:nre,cumulativeNormal:tB,cumulativeUniform:ore,dayofyear:j$e,debounce:Nne,defaultLocale:Une,definition:E5e,densityLogNormal:tre,densityNormal:Qne,densityUniform:sre,domChild:Bo,domClear:Kf,domCreate:n1,domFind:fie,dotbin:I5e,error:Ke,expressionFunction:mo,extend:Gn,extent:bm,extentIndex:k$e,falsy:Cy,fastmap:cC,field:fd,flush:R$e,font:yB,fontFamily:QP,fontSize:Mm,format:c6,formatLocale:xL,formats:Hne,hasOwnProperty:sn,id:LP,identity:Pu,inferType:d5e,inferTypes:h5e,ingest:pi,inherits:Ct,inrange:n2,interpolate:zre,interpolateColors:lB,interpolateRange:xLe,intersect:PMe,intersectBoxLine:r2,intersectPath:Xre,intersectPoint:Qre,intersectRule:VLe,isArray:Qe,isBoolean:Gv,isDate:S1,isFunction:Yn,isIterable:P$e,isNumber:Qr,isObject:Ot,isRegExp:D$e,isString:Nt,isTuple:X8,key:One,lerp:N$e,lineHeight:av,loader:Y8,locale:c5e,logger:Ine,lruCache:O$e,markup:yie,merge:$$e,mergeConfig:uC,multiLineOffset:uie,one:aC,pad:L$e,panLinear:w$e,panLog:E$e,panPow:T$e,panSymlog:S$e,parse:yXt,parseExpression:sse,parseSelector:Kv,path:ZF,pathCurves:Gre,pathEqual:LMe,pathParse:zT,pathRectangle:MLe,pathRender:o3,pathSymbols:LLe,pathTrail:FLe,peek:Mr,point:bB,projection:Rie,quantileLogNormal:rre,quantileNormal:nB,quantileUniform:are,quantiles:Yne,quantizeInterpolator:_Le,quarter:C$e,quartiles:Kne,get random(){return pd},randomInteger:_8t,randomKDE:Zne,randomLCG:x8t,randomLogNormal:R5e,randomMixture:P5e,randomNormal:Jne,randomUniform:D5e,read:g5e,regressionConstant:ure,regressionExp:O5e,regressionLinear:lre,regressionLoess:M5e,regressionLog:N5e,regressionPoly:L5e,regressionPow:$5e,regressionQuad:cre,renderModule:xB,repeat:AI,resetDefaultLocale:yFt,resetSVGClipId:jLe,resetSVGDefIds:Ejt,responseType:m5e,runtimeContext:JFe,sampleCurve:iB,sampleLogNormal:ere,sampleNormal:eB,sampleUniform:ire,scale:ii,sceneEqual:bie,sceneFromJSON:nMe,scenePickVisit:SL,sceneToJSON:tMe,sceneVisit:Fh,sceneZOrder:Jre,scheme:Vre,serializeXML:xMe,setHybridRendererOptions:bjt,setRandom:v8t,span:MP,splitAccessPath:Lm,stringValue:Et,textMetrics:nf,timeBin:r5e,timeFloor:G$e,timeFormatLocale:r3,timeInterval:fC,timeOffset:X$e,timeSequence:Z$e,timeUnitSpecifier:B$e,timeUnits:Bne,toBoolean:$ne,toDate:Lne,toNumber:xu,toSet:Lh,toString:Mne,transform:T5e,transforms:FT,truncate:M$e,truthy:dd,tupleid:nn,typeParsers:gY,utcFloor:Y$e,utcInterval:dC,utcOffset:Q$e,utcSequence:e5e,utcdayofyear:V$e,utcquarter:A$e,utcweek:H$e,version:vXt,visitArray:$y,week:U$e,writeConfig:lC,zero:qy,zoomLinear:kne,zoomLog:Rne,zoomPow:bL,zoomSymlog:Pne},Symbol.toStringTag,{value:"Module"}));function xXt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var _Xt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},wXt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},EXt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const TXt=Array.prototype.slice,Tb=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,TXt.call(t,1))},SXt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var CXt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:SXt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Tb("join",arguments)},indexof:function(){return Tb("indexOf",arguments)},lastindexof:function(){return Tb("lastIndexOf",arguments)},slice:function(){return Tb("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Tb("substring",arguments,String)},split:function(){return Tb("split",arguments,String)},replace:function(){return Tb("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const AXt=["view","item","group","xy","x","y"],sK=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&sK.add(setImmediate);const IXt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:_Xt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),sK.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||CXt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>wXt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>EXt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,sK.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function UA(e,t,n,r,i,s){const o=a=>IXt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,AXt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var kXt={operator(e,t){const n=t.ast,r=e.functions;return i=>UA(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>UA(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>UA(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return UA(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=UA(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&xXt(o,r,s),l}}};const RXt="vega-lite",PXt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',DXt="5.18.1",NXt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],OXt="https://vega.github.io/vega-lite/",$Xt="Vega-Lite is a concise high-level language for interactive visualization.",LXt=["vega","chart","visualization"],MXt="build/vega-lite.js",FXt="build/vega-lite.min.js",BXt="build/vega-lite.min.js",jXt="build/src/index",UXt="build/src/index.d.ts",zXt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},VXt=["bin","build","src","vega-lite*","tsconfig.json"],HXt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},qXt={type:"git",url:"https://github.com/vega/vega-lite.git"},WXt="BSD-3-Clause",GXt={url:"https://github.com/vega/vega-lite/issues"},YXt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},KXt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},XXt={vega:"^5.24.0"},QXt={node:">=18"},JXt="yarn@1.22.19",ZXt={name:RXt,author:PXt,version:DXt,collaborators:NXt,homepage:OXt,description:$Xt,keywords:LXt,main:MXt,unpkg:FXt,jsdelivr:BXt,module:jXt,types:UXt,bin:zXt,files:VXt,scripts:HXt,repository:qXt,license:WXt,bugs:GXt,devDependencies:YXt,dependencies:KXt,peerDependencies:XXt,engines:QXt,packageManager:JXt};function Nse(e){return!!e.or}function Ose(e){return!!e.and}function $se(e){return!!e.not}function R6(e,t){if($se(e))R6(e.not,t);else if(Ose(e))for(const n of e.and)R6(n,t);else if(Nse(e))for(const n of e.or)R6(n,t);else t(e)}function L2(e,t){return $se(e)?{not:L2(e.not,t)}:Ose(e)?{and:e.and.map(n=>L2(n,t))}:Nse(e)?{or:e.or.map(n=>L2(n,t))}:t(e)}const An=structuredClone;function Y8e(e){throw new Error(e)}function GT(e,t){const n={};for(const r of t)sn(e,r)&&(n[r]=e[r]);return n}function cc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Fi(e)).join(",")})`};function wr(e){if(Qr(e))return e;const t=Nt(e)?e:Fi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function oK(e){return e===!1||e===null}function Er(e,t){return e.includes(t)}function g_(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Lse(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function K8e(e,...t){for(const n of t)eQt(e,n??{});return e}function eQt(e,t){for(const n of ct(t))lC(e,n,t[n],!0)}function zp(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function tQt(e,t){const n=ct(e),r=ct(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function X8e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Mse(e,t){for(const n of e)if(t.has(n))return!0;return!1}function aK(e){const t=new Set;for(const n of e){const i=Lm(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Fse(e,t){return e===void 0||t===void 0?!0:Mse(aK(e),aK(t))}function Mi(e){return ct(e).length===0}const ct=Object.keys,Ua=Object.values,fv=Object.entries;function y3(e){return e===!0||e===!1}function Ss(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Rk(e,t){return $se(e)?`!(${Rk(e.not,t)})`:Ose(e)?`(${e.and.map(n=>Rk(n,t)).join(") && (")})`:Nse(e)?`(${e.or.map(n=>Rk(n,t)).join(") || (")})`:t(e)}function WL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&WL(e[n],t)&&delete e[n],Mi(e)}function oD(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Bse(e,t="datum"){const n=Lm(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Et).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function Q8e(e,t="datum"){return`${t}[${Et(Lm(e).join("."))}]`}function nQt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function md(e){return`${Lm(e).map(nQt).join("\\.")}`}function y_(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function bC(e){return`${Lm(e).join(".")}`}function YT(e){return e?Lm(e).length:0}function lo(...e){for(const t of e)if(t!==void 0)return t}let J8e=42;function Z8e(e){const t=++J8e;return e?String(e)+t:t}function rQt(){J8e=42}function eBe(e){return tBe(e)?e:`__${e}`}function tBe(e){return e.startsWith("__")}function v3(e){if(e!==void 0)return(e%360+360)%360}function FB(e){return Qr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const gbe=Object.getPrototypeOf(structuredClone({}));function Jc(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Jc(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Jc(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==gbe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==gbe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Jc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const eg="row",tg="column",BB="facet",Cs="x",wa="y",Zh="x2",jm="y2",Xv="xOffset",xC="yOffset",ep="radius",Jg="radius2",Ad="theta",Zg="theta2",tp="latitude",np="longitude",rp="latitude2",gd="longitude2",_c="color",Um="fill",zm="stroke",wc="shape",ey="size",fw="angle",ty="opacity",Qv="fillOpacity",Jv="strokeOpacity",Zv="strokeWidth",eb="strokeDash",aD="text",KT="order",uD="detail",jB="key",v_="tooltip",UB="href",zB="url",VB="description",iQt={x:1,y:1,x2:1,y2:1},nBe={theta:1,theta2:1,radius:1,radius2:1};function rBe(e){return e in nBe}const jse={longitude:1,longitude2:1,latitude:1,latitude2:1};function iBe(e){switch(e){case tp:return"y";case rp:return"y2";case np:return"x";case gd:return"x2"}}function sBe(e){return e in jse}const sQt=ct(jse),Use={...iQt,...nBe,...jse,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function M2(e){return e===_c||e===Um||e===zm}const oBe={row:1,column:1,facet:1},nd=ct(oBe),zse={...Use,...oBe},oQt=ct(zse),{order:o_n,detail:a_n,tooltip:u_n,...aQt}=zse,{row:l_n,column:c_n,facet:f_n,...uQt}=aQt;function lQt(e){return!!uQt[e]}function aBe(e){return!!zse[e]}const cQt=[Zh,jm,rp,gd,Zg,Jg];function uBe(e){return dw(e)!==e}function dw(e){switch(e){case Zh:return Cs;case jm:return wa;case rp:return tp;case gd:return np;case Zg:return Ad;case Jg:return ep}return e}function dv(e){if(rBe(e))switch(e){case Ad:return"startAngle";case Zg:return"endAngle";case ep:return"outerRadius";case Jg:return"innerRadius"}return e}function Vm(e){switch(e){case Cs:return Zh;case wa:return jm;case tp:return rp;case np:return gd;case Ad:return Zg;case ep:return Jg}}function Ec(e){switch(e){case Cs:case Zh:return"width";case wa:case jm:return"height"}}function lBe(e){switch(e){case Cs:return"xOffset";case wa:return"yOffset";case Zh:return"x2Offset";case jm:return"y2Offset";case Ad:return"thetaOffset";case ep:return"radiusOffset";case Zg:return"theta2Offset";case Jg:return"radius2Offset"}}function Vse(e){switch(e){case Cs:return"xOffset";case wa:return"yOffset"}}function fQt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const dQt=ct(Use),{x:d_n,y:h_n,x2:p_n,y2:m_n,xOffset:g_n,yOffset:y_n,latitude:v_n,longitude:b_n,latitude2:x_n,longitude2:__n,theta:w_n,theta2:E_n,radius:T_n,radius2:S_n,...Hse}=Use,hQt=ct(Hse),qse={x:1,y:1},Hm=ct(qse);function co(e){return e in qse}const Wse={theta:1,radius:1},pQt=ct(Wse);function HB(e){return e==="width"?Cs:wa}const cBe={xOffset:1,yOffset:1};function lD(e){return e in cBe}const{text:C_n,tooltip:A_n,href:I_n,url:k_n,description:R_n,detail:P_n,key:D_n,order:N_n,...fBe}=Hse,mQt=ct(fBe);function gQt(e){return!!Hse[e]}function yQt(e){switch(e){case _c:case Um:case zm:case ey:case wc:case ty:case Zv:case eb:return!0;case Qv:case Jv:case fw:return!1}}const dBe={...qse,...Wse,...cBe,...fBe},qB=ct(dBe);function ny(e){return!!dBe[e]}function vQt(e,t){return xQt(e)[t]}const hBe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:O_n,...bQt}=hBe;function xQt(e){switch(e){case _c:case Um:case zm:case VB:case uD:case jB:case v_:case UB:case KT:case ty:case Qv:case Jv:case Zv:case BB:case eg:case tg:return hBe;case Cs:case wa:case Xv:case xC:case tp:case np:return bQt;case Zh:case jm:case rp:case gd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ey:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case eb:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case wc:return{point:"always",geoshape:"always"};case aD:return{text:"always"};case fw:return{point:"always",square:"always",text:"always"};case zB:return{image:"always"};case Ad:return{text:"always",arc:"always"};case ep:return{text:"always",arc:"always"};case Zg:case Jg:return{arc:"always"}}}function FV(e){switch(e){case Cs:case wa:case Ad:case ep:case Xv:case xC:case ey:case fw:case Zv:case ty:case Qv:case Jv:case Zh:case jm:case Zg:case Jg:return;case BB:case eg:case tg:case wc:case eb:case aD:case v_:case UB:case zB:case VB:return"discrete";case _c:case Um:case zm:return"flexible";case tp:case np:case rp:case gd:case uD:case jB:case KT:return}}const _Qt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},wQt={count:1,min:1,max:1};function kg(e){return!!e&&!!e.argmin}function tb(e){return!!e&&!!e.argmax}function Gse(e){return Nt(e)&&!!_Qt[e]}const EQt=new Set(["count","valid","missing","distinct"]);function pBe(e){return Nt(e)&&EQt.has(e)}function TQt(e){return Nt(e)&&Er(["min","max"],e)}const SQt=new Set(["count","sum","distinct","valid","missing"]),CQt=new Set(["mean","average","median","q1","q3","min","max"]);function mBe(e){return Gv(e)&&(e=r9(e,void 0)),"bin"+ct(e).map(t=>WB(e[t])?Ss(`_${t}_${fv(e[t])}`):Ss(`_${t}_${e[t]}`)).join("")}function Zi(e){return e===!0||hw(e)&&!e.binned}function Da(e){return e==="binned"||hw(e)&&e.binned===!0}function hw(e){return Ot(e)}function WB(e){return e==null?void 0:e.param}function ybe(e){switch(e){case eg:case tg:case ey:case _c:case Um:case zm:case Zv:case ty:case Qv:case Jv:case wc:return 6;case eb:return 4;default:return 10}}function cD(e){return!!(e!=null&&e.expr)}function Wl(e){const t=ct(e||{}),n={};for(const r of t)n[r]=qc(e[r]);return n}function gBe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=GT(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Fy(e){return Nt(e)||Qe(e)&&Nt(e[0])}function Xt(e){return!!(e!=null&&e.signal)}function nb(e){return!!e.step}function AQt(e){return Qe(e)?!1:"fields"in e&&!("data"in e)}function IQt(e){return Qe(e)?!1:"fields"in e&&"data"in e}function z0(e){return Qe(e)?!1:"field"in e&&"data"in e}const kQt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},RQt=ct(kQt),PQt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},uK=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function yBe(e){const t=Qe(e.condition)?e.condition.map(vbe):vbe(e.condition);return{...qc(e),condition:t}}function qc(e){if(cD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function vbe(e){if(cD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function us(e){if(cD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Xt(e)?e:e!==void 0?{value:e}:void 0}function DQt(e){return Xt(e)?e.signal:Et(e)}function bbe(e){return Xt(e)?e.signal:Et(e.value)}function yh(e){return Xt(e)?e.signal:e==null?null:Et(e)}function NQt(e,t,n){for(const r of n){const i=Rg(r,t.markDef,t.config);i!==void 0&&(e[r]=us(i))}return e}function vBe(e){return[].concat(e.type,e.style??[])}function hi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Rg(e,t,n,r)}function Rg(e,t,n,{vgChannel:r}={}){return lo(r?GL(e,t,n.style):void 0,GL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function GL(e,t,n){return bBe(e,vBe(t),n)}function bBe(e,t,n){t=Dt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function xBe(e,t){return Dt(e).reduce((n,r)=>(n.field.push(St(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function _Be(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Jc(i,r))return;n.push(r)}),n}function wBe(e,t){return Jc(e,t)||!t?e:e?[...Dt(e),...Dt(t)].join(", "):t}function EBe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Fy(n)||Xt(n))&&(Fy(r)||Xt(r)))return{explicit:e.explicit,value:wBe(n,r)};if(Fy(n)||Xt(n))return{explicit:e.explicit,value:n};if(Fy(r)||Xt(r))return{explicit:e.explicit,value:r};if(!Fy(n)&&!Xt(n)&&!Fy(r)&&!Xt(r))return{explicit:e.explicit,value:_Be(n,r)};throw new Error("It should never reach here")}function Yse(e){return`Invalid specification ${Fi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const OQt='Autosize "fit" only works for single views and layered views.';function xbe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function _be(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function wbe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ec(e)}.`:'Dropping "fit" because spec has discrete size.'}function Kse(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Ebe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function $Qt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function LQt(e){return`The "nearest" transform is not supported for ${e} marks.`}function TBe(e){return`Selection not supported for ${e} yet.`}function MQt(e){return`Cannot find a selection named "${e}".`}const FQt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",BQt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",jQt="Legend bindings are only supported for selections over an individual field or encoding channel.";function UQt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function zQt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const VQt="The same selection must be used to override scale domains in a layered view.",HQt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function qQt(e){return`Unknown repeated value "${e}".`}function Tbe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const WQt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function GQt(e){return`Unrecognized parse "${e}".`}function Sbe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const YQt="Attempt to add the same child twice.";function KQt(e){return`Ignoring an invalid transform: ${Fi(e)}.`}const XQt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Cbe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function QQt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fi(t)} is overridden by a child projection ${Fi(n)}.`}const JQt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ZQt(e){return`${e}Offset dropped because ${e} is continuous`}function eJt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fi(n)}}.`}function SBe(e){return`Invalid field type "${e}".`}function tJt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function nJt(e){return`Invalid aggregation operator "${e}".`}function CBe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function rJt(e){return`Position range does not support relative band size for ${e}.`}function lK(e,t){return`Dropping ${Fi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const iJt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function GB(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function sJt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function oJt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function aJt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function uJt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function BV(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function lJt(e){return`The ${e} for range marks cannot be an expression`}function cJt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function fJt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function dJt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function hJt(e){return`Cannot use the relative band size with ${e} scale.`}function pJt(e){return`Using unaggregated domain with raw field has no effect (${Fi(e)}).`}function mJt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function gJt(e){return`Unaggregated domain is currently unsupported for log scale (${Fi(e)}).`}function yJt(e){return`Cannot apply size to non-oriented mark "${e}".`}function vJt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function bJt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function ABe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function IBe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function xJt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fi(n)} and ${Fi(r)}). Using ${Fi(n)}.`}function _Jt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fi(n)} and ${Fi(r)}). Using the union of the two domains.`}function wJt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function EJt(e){return`Dropping sort property ${Fi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Abe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",TJt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",SJt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",CJt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function AJt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function IJt(e){return`Stack is applied to a non-linear scale (${e}).`}function kJt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function YL(e,t){return`Invalid ${e}: ${Fi(t)}.`}function RJt(e){return`Dropping day from datetime ${Fi(e)} as day cannot be combined with other units.`}function PJt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function DJt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function NJt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Ibe(e){return`1D error band does not support ${e}.`}function kBe(e){return`Channel ${e} is required for "binned" bin.`}function OJt(e){return`Channel ${e} should not be used with "binned" bin.`}function $Jt(e){return`Domain for ${e} is required for threshold scale.`}const RBe=Ine(Ane);let XT=RBe;function LJt(e){return XT=e,XT}function MJt(){return XT=RBe,XT}function pt(...e){XT.warn(...e)}function FJt(...e){XT.debug(...e)}function pw(e){if(e&&Ot(e)){for(const t of Qse)if(t in e)return!0}return!1}const PBe=["january","february","march","april","may","june","july","august","september","october","november","december"],BJt=PBe.map(e=>e.substr(0,3)),DBe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],jJt=DBe.map(e=>e.substr(0,3));function UJt(e){if(FB(e)&&(e=+e),Qr(e))return e>4&&pt(YL("quarter",e)),e-1;throw new Error(YL("quarter",e))}function zJt(e){if(FB(e)&&(e=+e),Qr(e))return e-1;{const t=e.toLowerCase(),n=PBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=BJt.indexOf(r);if(i!==-1)return i;throw new Error(YL("month",e))}}function VJt(e){if(FB(e)&&(e=+e),Qr(e))return e%7;{const t=e.toLowerCase(),n=DBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=jJt.indexOf(r);if(i!==-1)return i;throw new Error(YL("day",e))}}function Xse(e,t){const n=[];if(t&&e.day!==void 0&&ct(e).length>1&&(pt(RJt(e)),e=An(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?zJt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?UJt(e.quarter):e.quarter;n.push(Qr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?VJt(e.day):e.day;n.push(Qr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function b_(e){const n=Xse(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function HJt(e){const n=Xse(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function qJt(e){const t=Xse(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const NBe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Qse=ct(NBe);function WJt(e){return!!NBe[e]}function mw(e){return Ot(e)?e.binned:OBe(e)}function OBe(e){return e&&e.startsWith("binned")}function Jse(e){return e.startsWith("utc")}function GJt(e){return e.substring(3)}const YJt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function YB(e){return Qse.filter(t=>LBe(e,t))}function $Be(e){const t=YB(e);return t[t.length-1]}function LBe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function KJt(e,t,{end:n}={end:!1}){const r=Bse(t),i=Jse(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Qse)LBe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),HJt(a)}function MBe(e){if(!e)return;const t=YB(e);return`timeUnitSpecifier(${Fi(t)}, ${Fi(YJt)})`}function XJt(e,t,n){if(!e)return;const r=MBe(e);return`${n||Jse(e)?"utc":"time"}Format(${t}, ${r})`}function ga(e){if(!e)return;let t;return Nt(e)?OBe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ot(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Jse(t.unit)&&(t.utc=!0,t.unit=GJt(t.unit)),t}function QJt(e){const{utc:t,...n}=ga(e);return n.unit?(t?"utc":"")+ct(n).map(r=>Ss(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+ct(n).map(r=>Ss(`_${r}_${n[r]}`)).join("")}function FBe(e,t=n=>n){const n=ga(e),r=$Be(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=BBe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(b_(a))} - ${t(b_(i))}`}}const JJt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function ZJt(e){return!!JJt[e]}function BBe(e,t=1){if(ZJt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function eZt(e){return e==null?void 0:e.param}function Zse(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function eoe(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function toe(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function noe(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function roe(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function ioe(e){if(e!=null&&e.field){if(Qe(e.range)&&e.range.length===2)return!0;if(Xt(e.range))return!0}return!1}function soe(e){return!!(e!=null&&e.field)&&(Qe(e.oneOf)||Qe(e.in))}function tZt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function jBe(e){return soe(e)||Zse(e)||ioe(e)||eoe(e)||noe(e)||toe(e)||roe(e)}function hp(e,t){return i9(e,{timeUnit:t,wrapTime:!0})}function nZt(e,t){return e.map(n=>hp(n,t))}function UBe(e,t=!0){const{field:n}=e,r=ga(e.timeUnit),{unit:i,binned:s}=r||{},o=St(e,{expr:"datum"}),a=i?`time(${s?o:KJt(i,n)})`:o;if(Zse(e))return`${a}===${hp(e.equal,i)}`;if(eoe(e)){const u=e.lt;return`${a}<${hp(u,i)}`}else if(noe(e)){const u=e.gt;return`${a}>${hp(u,i)}`}else if(toe(e)){const u=e.lte;return`${a}<=${hp(u,i)}`}else if(roe(e)){const u=e.gte;return`${a}>=${hp(u,i)}`}else{if(soe(e))return`indexof([${nZt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(tZt(e))return ooe(a,e.valid);if(ioe(e)){const{range:u}=e,l=Xt(u)?{signal:`${u.signal}[0]`}:u[0],c=Xt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+hp(l,i)+", "+hp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${hp(l,i)}`),c!==null&&f.push(`${a} <= ${hp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Fi(e)}`)}function ooe(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function rZt(e){return jBe(e)&&e.timeUnit?{...e,timeUnit:ga(e.timeUnit)}:e}const fD={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function iZt(e){return e==="quantitative"||e==="temporal"}function zBe(e){return e==="ordinal"||e==="nominal"}const x_=fD.quantitative,aoe=fD.ordinal,QT=fD.temporal,uoe=fD.nominal,_C=fD.geojson;function sZt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case x_:return"quantitative";case"t":case QT:return"temporal";case"o":case aoe:return"ordinal";case"n":case uoe:return"nominal";case _C:return"geojson"}}const fc={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},cK={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function oZt(e,t){const n=cK[e],r=cK[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const aZt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function kbe(e){return aZt[e]}const VBe=new Set(["linear","log","pow","sqrt","symlog"]),HBe=new Set([...VBe,"time","utc"]);function qBe(e){return VBe.has(e)}const WBe=new Set(["quantile","quantize","threshold"]),uZt=new Set([...HBe,...WBe,"sequential","identity"]),lZt=new Set(["ordinal","bin-ordinal","point","band"]);function ba(e){return lZt.has(e)}function _f(e){return uZt.has(e)}function vh(e){return HBe.has(e)}function JT(e){return WBe.has(e)}const cZt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function fZt(e){return!Nt(e)&&!!e.name}function GBe(e){return e==null?void 0:e.param}function dZt(e){return e==null?void 0:e.unionWith}function hZt(e){return Ot(e)&&"field"in e}const pZt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:$_n,domain:L_n,range:M_n,rangeMax:F_n,rangeMin:B_n,scheme:j_n,...mZt}=pZt,gZt=ct(mZt);function fK(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return vh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return vh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return vh(e);case"nice":return vh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return _f(e)&&!Er(["log","time","utc","threshold","quantile"],e)}}function YBe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return M2(e)?void 0:dJt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function yZt(e,t){return Er([aoe,uoe],t)?e===void 0||ba(e):t===QT?Er([fc.TIME,fc.UTC,void 0],e):t===x_?qBe(e)||JT(e)||e===void 0:!0}function vZt(e,t,n=!1){if(!ny(e))return!1;switch(e){case Cs:case wa:case Xv:case xC:case Ad:case ep:return vh(t)||t==="band"?!0:t==="point"?!n:!1;case ey:case Zv:case ty:case Qv:case Jv:case fw:return vh(t)||JT(t)||Er(["band","point","ordinal"],t);case _c:case Um:case zm:return t!=="band";case eb:case wc:return t==="ordinal"||JT(t)}}function loe(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=foe(e);return gt(n)&&!pBe(n.aggregate)&&i&&vh(i.get("type"))?bZt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function bZt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return hi("invalid",n,i)===null?[xZt(e,t),r]:r}function xZt(e,t){const n=coe(e,!0),i=dw(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function coe(e,t=!0){return ooe(Nt(e)?e:St(e,{expr:"datum"}),!t)}function _Zt(e){const{datum:t}=e;return pw(t)?b_(t):`${Fi(t)}`}function Bx(e,t,n,r){const i={};if(t&&(i.scale=t),qm(e)){const{datum:s}=e;pw(s)?i.signal=b_(s):Xt(s)?i.signal=s.signal:cD(s)?i.signal=s.expr:i.value=s}else i.field=St(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function KL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Xt(o)&&0<o&&o<1?"datum":void 0,u=St(t,{expr:a,suffix:i}),l=n!==void 0?St(n,{expr:a}):St(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Xt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function wZt({scaleName:e,fieldDef:t}){const n=St(t,{expr:"datum"}),r=St(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function foe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Ln(t)){const f=o==null?void 0:o.get("type");if(bl(t)){c??(c=hv({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Zi(d)||c&&h&&p===QT)return a!=null&&a.impute?Bx(t,s,{binSuffix:"mid"},{offset:u}):c&&!ba(f)?KL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Bx(t,s,mD(t,e)?{binSuffix:"range"}:{},{offset:u});if(Da(d)){if(gt(n))return KL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});pt(kBe(e===Cs?Zh:jm))}}return Bx(t,s,ba(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Bh(t)){const f=t.value,d=u?{offset:u}:{};return{...Pk(e,f),...d}}}return Yn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Pk(e,t){return Er(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Er(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:us(t)}function __(e){return e&&e!=="number"&&e!=="time"}function KBe(e,t,n){return`${e}(${t}${n?`, ${Fi(n)}`:""})`}const EZt="  ";function doe({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(__(n))return bh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=XBe(e,r,i),a=ZT(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return bh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return bh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&gt(e)&&e.timeUnit===void 0)return bh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(tS(e)){const c=SZt({field:o,timeUnit:gt(e)?(u=ga(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:yw(e)&&((l=e.scale)==null?void 0:l.type)===fc.UTC});return c?{signal:c}:void 0}if(t=dK({type:a,specifiedFormat:t,config:s,normalizeStack:i}),gt(e)&&Zi(e.bin)){const c=St(e,{expr:r,binSuffix:"end"});return{signal:dD(o,c,t,n,s)}}else return t||ZT(e)==="quantitative"?{signal:`${ZBe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function XBe(e,t,n){return gt(e)?n?`${St(e,{expr:t,suffix:"end"})}-${St(e,{expr:t,suffix:"start"})}`:St(e,{expr:t}):_Zt(e)}function bh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=XBe(e,r,i)),o!=="datum.value"&&gt(e)&&Zi(e.bin)){const a=St(e,{expr:r,binSuffix:"end"});return{signal:dD(o,a,t,n,s)}}return{signal:KBe(n,o,t)}}function QBe(e,t,n,r,i,s){var o;if(!(Nt(r)&&__(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&ZT(e)==="quantitative"&&(i.normalizedNumberFormatType&&eS(e)&&e.stack==="normalize"||i.numberFormatType))){if(eS(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return dK({type:"quantitative",config:i,normalizeStack:!0});if(tS(e)){const a=gt(e)?(o=ga(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:TZt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return dK({type:t,specifiedFormat:n,config:i})}}function JBe(e,t,n){var r;if(e&&(Xt(e)||e==="number"||e==="time"))return e;if(tS(t)&&n!=="time"&&n!=="utc")return gt(t)&&((r=ga(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function dK({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Nt(t))return t;if(e===x_)return r?n.normalizedNumberFormat:n.numberFormat}function TZt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:MBe(t)}:r?void 0:n.timeFormat)}function ZBe(e,t){return`format(${e}, "${t||""}")`}function Rbe(e,t,n,r){return __(n)?KBe(n,e,t):ZBe(e,(Nt(t)?t:void 0)??r.numberFormat)}function dD(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return dD(e,t,i.numberFormat,i.numberFormatType,i);const s=Rbe(e,n,r,i),o=Rbe(t,n,r,i);return`${ooe(e,!1)} ? "null" : ${s} + "${EZt}" + ${o}`}function SZt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Nt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):XJt(t,e,s)}const Sl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},e9e=Sl.arc,KB=Sl.area,XB=Sl.bar,CZt=Sl.image,QB=Sl.line,JB=Sl.point,AZt=Sl.rect,XL=Sl.rule,t9e=Sl.text,hoe=Sl.tick,IZt=Sl.trail,poe=Sl.circle,moe=Sl.square,n9e=Sl.geoshape;function gw(e){return["line","area","trail"].includes(e)}function b3(e){return["rect","bar","image","arc"].includes(e)}const kZt=new Set(ct(Sl));function wm(e){return e.type}const RZt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],PZt=["fill","fillOpacity"],DZt=[...RZt,...PZt],NZt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Pbe=ct(NZt),OZt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},$Zt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},LZt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},r9e=ct(LZt);function w_(e){return e&&e.band!=null}const MZt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},i9e=5,FZt={binSpacing:1,continuousBandSize:i9e,minBandSize:.25,timeUnitBandPosition:.5},BZt={binSpacing:0,continuousBandSize:i9e,minBandSize:.25,timeUnitBandPosition:.5},jZt={thickness:1};function UZt(e){return wm(e)?e.type:e}const ZB="min",zZt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Dbe(e){return e in zZt}function s9e(e){return!!(e!=null&&e.encoding)}function nm(e){return e&&(e.op==="count"||!!e.field)}function o9e(e){return e&&Qe(e)}function hD(e){return"row"in e||"column"in e}function goe(e){return!!e&&"header"in e}function e9(e){return"facet"in e}function VZt(e){return e.param}function HZt(e){return e&&!Nt(e)&&"repeat"in e}function Nbe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function yoe(e){return"sort"in e}function hv({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(gt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Rg("timeUnitBandPosition",n,r);if(Zi(s))return .5}}function a9e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Ec(e),u=hi(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(gt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Rg("timeUnitBandSize",r,i)};if(Zi(h)&&!ba(s))return{band:1}}if(b3(r.type))return s?ba(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function u9e(e,t,n,r){return Zi(e.bin)||e.timeUnit&&bl(e)&&e.type==="temporal"?hv({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function l9e(e){return e&&!!e.sort&&!e.field}function t9(e){return e&&"condition"in e}function n9(e){const t=e==null?void 0:e.condition;return!!t&&!Qe(t)&&gt(t)}function pD(e){const t=e==null?void 0:e.condition;return!!t&&!Qe(t)&&Ln(t)}function qZt(e){const t=e==null?void 0:e.condition;return!!t&&(Qe(t)||Bh(t))}function gt(e){return e&&(!!e.field||e.aggregate==="count")}function ZT(e){return e==null?void 0:e.type}function qm(e){return e&&"datum"in e}function u1(e){return bl(e)&&!JL(e)||QL(e)}function Obe(e){return bl(e)&&e.type==="quantitative"&&!e.bin||QL(e)}function QL(e){return qm(e)&&Qr(e.datum)}function Ln(e){return gt(e)||qm(e)}function bl(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Bh(e){return e&&"value"in e&&"value"in e}function yw(e){return e&&("scale"in e||"sort"in e)}function eS(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function c9e(e){return e&&"legend"in e}function f9e(e){return e&&("format"in e||"formatType"in e)}function WZt(e){return cc(e,["legend","axis","header","scale"])}function GZt(e){return"op"in e}function St(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(KZt(e))n=eBe("count");else{let o;if(!t.nofn)if(GZt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Zi(a)?(o=mBe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?tb(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):kg(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!mw(l)&&(o=QJt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?bC(n):t.expr?Q8e(n,t.expr)+s:md(n)+s}function JL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return gt(e)&&!!e.bin;case"temporal":return!1}throw new Error(SBe(e.type))}function YZt(e){var t;return yw(e)&&JT((t=e.scale)==null?void 0:t.type)}function KZt(e){return e.aggregate==="count"}function XZt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Zi(r))return`${n} (binned)`;if(i&&!mw(i)){const a=(o=ga(i))==null?void 0:o.unit;if(a)return`${n} (${YB(a).join("-")})`}else if(s)return tb(s)?`${n} for max ${s.argmax}`:kg(s)?`${n} for min ${s.argmin}`:`${oD(s)} of ${n}`;return n}function QZt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(tb(t))return`${i} for argmax(${t.argmax})`;if(kg(t))return`${i} for argmin(${t.argmin})`;const s=r&&!mw(r)?ga(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Zi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const d9e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return QZt(e);default:return XZt(e,t)}};let h9e=d9e;function p9e(e){h9e=e}function JZt(){p9e(d9e)}function F2(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=voe(e))==null?void 0:a.title;if(!gt(e))return i??e.title;const s=e,o=r?boe(s,t):void 0;return n?lo(i,s.title,o):i??s.title??o}function voe(e){if(eS(e)&&e.axis)return e.axis;if(c9e(e)&&e.legend)return e.legend;if(goe(e)&&e.header)return e.header}function boe(e,t){return h9e(e,t)}function ZL(e){if(f9e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=voe(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function ZZt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(yoe(e)&&Qe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!tb(n)&&!kg(n))return"quantitative";if(yw(e)&&((s=e.scale)!=null&&s.type))switch(cK[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Em(e){if(gt(e))return e;if(n9(e))return e.condition}function zo(e){if(Ln(e))return e;if(pD(e))return e.condition}function m9e(e,t,n,r={}){if(Nt(e)||Qr(e)||Gv(e)){const i=Nt(e)?"string":Qr(e)?"number":"boolean";return pt(eJt(t,i,e)),{value:e}}return Ln(e)?eM(e,t,n,r):pD(e)?{...e,condition:eM(e.condition,t,n,r)}:e}function eM(e,t,n,r){if(f9e(e)){const{format:i,formatType:s,...o}=e;if(__(s)&&!n.customFormatTypes)return pt(Cbe(t)),eM(o,t,n,r)}else{const i=eS(e)?"axis":c9e(e)?"legend":goe(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(__(o)&&!n.customFormatTypes)return pt(Cbe(t)),eM({...e,[i]:a},t,n,r)}}return gt(e)?xoe(e,t,r):een(e)}function een(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Qr(n)?"quantitative":Nt(n)?"nominal":pw(n)?"temporal":void 0,{...e,type:t}}function xoe(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Gse(r)&&!tb(r)&&!kg(r)&&(pt(nJt(r)),delete a.aggregate),i&&(a.timeUnit=ga(i)),o&&(a.field=`${o}`),Zi(s)&&(a.bin=r9(s,t)),Da(s)&&!co(t)&&pt(OJt(t)),bl(a)){const{type:u}=a,l=sZt(u);u!==l&&(a.type=l),u!=="quantitative"&&pBe(r)&&(pt(tJt(u,r)),a.type="quantitative")}else if(!uBe(t)){const u=ZZt(a,t);a.type=u}if(bl(a)){const{compatible:u,warning:l}=ten(a,t)||{};u===!1&&pt(l)}if(yoe(a)&&Nt(a.sort)){const{sort:u}=a;if(Dbe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Dbe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(goe(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function r9(e,t){return Gv(e)?{maxbins:ybe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:ybe(t)}:e}const dE={compatible:!0};function ten(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case eg:case tg:case BB:return JL(e)?dE:{compatible:!1,warning:oJt(t)};case Cs:case wa:case Xv:case xC:case _c:case Um:case zm:case aD:case uD:case jB:case v_:case UB:case zB:case fw:case Ad:case ep:case VB:return dE;case np:case gd:case tp:case rp:return n!==x_?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:dE;case ty:case Qv:case Jv:case Zv:case ey:case Zg:case Jg:case Zh:case jm:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:dE;case wc:case eb:return!JL(e)&&!YZt(e)?{compatible:!1,warning:aJt(t)}:dE;case KT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:dE}}function tS(e){const{formatType:t}=ZL(e);return t==="time"||!t&&nen(e)}function nen(e){return e&&(e.type==="temporal"||gt(e)&&!!e.timeUnit)}function i9(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=ga(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return cD(e)?a=e.expr:Xt(e)?a=e.signal:pw(e)?(o=!0,a=b_(e)):(Nt(e)||Qr(e))&&o&&(a=`datetime(${Fi(e)})`,WJt(s)&&(Qr(e)&&e<1e4||Nt(e)&&isNaN(Date.parse(e)))&&(a=b_({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Fi(e)}function g9e(e,t){const{type:n}=e;return t.map(r=>{const i=gt(e)&&!mw(e.timeUnit)?e.timeUnit:void 0,s=i9(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function mD(e,t){return Zi(e.bin)?ny(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const $be={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function gD(e){return e==null?void 0:e.condition}const y9e=["domain","grid","labels","ticks","title"],ren={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},v9e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},ien={...v9e,style:1,labelExpr:1,encoding:1};function Lbe(e){return!!ien[e]}const sen={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},b9e=ct(sen);function ry(e){return"mark"in e}class s9{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ry(t)?UZt(t.mark)===this.name:!1}}function jx(e,t){const n=e&&e[t];return n?Qe(n)?g_(n,r=>!!r.field):gt(n)||n9(n):!1}function x9e(e,t){const n=e&&e[t];return n?Qe(n)?g_(n,r=>!!r.field):gt(n)||qm(n)||pD(n):!1}function _9e(e,t){if(co(t)){const n=e[t];if((gt(n)||qm(n))&&(zBe(n.type)||gt(n)&&n.timeUnit)){const r=Vse(t);return x9e(e,r)}}return!1}function _oe(e){return g_(oQt,t=>{if(jx(e,t)){const n=e[t];if(Qe(n))return g_(n,r=>!!r.aggregate);{const r=Em(n);return r&&!!r.aggregate}}return!1})}function w9e(e,t){const n=[],r=[],i=[],s=[],o={};return woe(e,(a,u)=>{if(gt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=voe(a),m=p==null?void 0:p.title;let g=St(a,{forAs:!0});const y={...m?[]:{title:F2(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(tb(c)?(v="argmax",g=St({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):kg(c)?(v="argmin",g=St({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),bl(a)&&Zi(f)){if(r.push({bin:f,field:l,as:g}),n.push(St(a,{binSuffix:"end"})),mD(a,u)&&n.push(St(a,{binSuffix:"range"})),co(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",uBe(u)||(y.type=x_)}else if(d&&!mw(d)){i.push({timeUnit:d,field:l,as:g});const v=bl(a)&&a.type!==QT&&"time";v&&(u===aD||u===v_?y.formatType=v:gQt(u)?y.legend={formatType:v,...y.legend}:co(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function oen(e,t,n){const r=vQt(t,n);if(r){if(r==="binned"){const i=e[t===Zh?Cs:wa];return!!(gt(i)&&gt(e[t])&&Da(i.bin))}}else return!1;return!0}function aen(e,t,n,r){const i={};for(const s of ct(e))aBe(s)||pt(sJt(s));for(let s of dQt){if(!e[s])continue;const o=e[s];if(lD(s)){const a=fQt(s),u=i[a];if(gt(u)&&iZt(u.type)&&gt(o)&&!u.timeUnit){pt(ZQt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(pt(JQt),s=Ad),!oen(e,s,t)){pt(GB(s,t));continue}if(s===ey&&t==="line"){const a=Em(e[s]);if(a!=null&&a.aggregate){pt(iJt);continue}}if(s===_c&&(n?"fill"in e:"stroke"in e)){pt(CBe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===uD||s===KT&&!Qe(o)&&!Bh(o)||s===v_&&Qe(o)){if(o){if(s===KT){const a=e[s];if(l9e(a)){i[s]=a;continue}}i[s]=Dt(o).reduce((a,u)=>(gt(u)?a.push(xoe(u,s)):pt(lK(u,s)),a),[])}}else{if(s===v_&&o===null)i[s]=null;else if(!gt(o)&&!qm(o)&&!Bh(o)&&!t9(o)&&!Xt(o)){pt(lK(o,s));continue}i[s]=m9e(o,s,r)}}return i}function o9(e,t){const n={};for(const r of ct(e)){const i=m9e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function uen(e){const t=[];for(const n of ct(e))if(jx(e,n)){const r=e[n],i=Dt(r);for(const s of i)gt(s)?t.push(s):n9(s)&&t.push(s.condition)}return t}function woe(e,t,n){if(e)for(const r of ct(e)){const i=e[r];if(Qe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function len(e,t,n,r){return e?ct(e).reduce((i,s)=>{const o=e[s];return Qe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function E9e(e,t){return ct(t).reduce((n,r)=>{switch(r){case Cs:case wa:case UB:case VB:case zB:case Zh:case jm:case Xv:case xC:case Ad:case Zg:case ep:case Jg:case tp:case np:case rp:case gd:case aD:case wc:case fw:case v_:return n;case KT:if(e==="line"||e==="trail")return n;case uD:case jB:{const i=t[r];if(Qe(i)||gt(i))for(const s of Dt(i))s.aggregate||n.push(St(s,{}));return n}case ey:if(e==="trail")return n;case _c:case Um:case zm:case ty:case Qv:case Jv:case eb:case Zv:{const i=Em(t[r]);return i&&!i.aggregate&&n.push(St(i,{})),n}}},[])}function cen(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Qe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Qe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function hK(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Eoe(t)}`:"";return{field:o+t.field,type:t.type,title:Xt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=uen(n).map(WZt);return{tooltip:[...i,...zp(s,wr)]}}function Eoe(e){const{title:t,field:n}=e;return lo(t,n)}function Toe(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Eoe(n);return T9e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Nt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function T9e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...wm(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Gv(e[t])?{}:e[t]}}]:[]}function S9e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:qO(s,n),continuousAxisChannelDef2:qO(o,n),continuousAxisChannelDefError:qO(a,n),continuousAxisChannelDefError2:qO(u,n),continuousAxis:i}}function qO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&pt(NJt(n,t)),r}else return e}function C9e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(wm(n)&&n.orient)return n.orient;if(u1(i)){if(u1(s)){const o=gt(i)&&i.aggregate,a=gt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return tS(s)&&!tS(i)?"horizontal":"vertical"}return"horizontal"}else{if(u1(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const tM="boxplot",fen=["box","median","outliers","rule","ticks"],den=new s9(tM,I9e);function A9e(e){return Qr(e)?"tukey":e}function I9e(e,{config:t}){e={...e,encoding:o9(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=wm(n)?n:{type:n};i&&pt(TBe("boxplot"));const u=a.extent??t.boxplot.extent,l=hi("size",a,t),c=a.invalid,f=A9e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:E,customTooltipWithoutAggregatedField:S}=hen(e,u,t),C=bC(m.field),{color:A,size:R,...k}=b,N=Fe=>Toe(a,g,m,Fe,t.boxplot),L=N(k),O=N(b),B=(Ot(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",q=N({...k,...R?{size:R}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:B}}}}),H=hK([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),G={type:"tick",color:"black",opacity:1,orient:_,invalid:c,aria:!1},K=f==="min-max"?H:hK([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),J=[...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:K}),...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:K}),...L({partName:"ticks",mark:G,positionPrefix:"lower_whisker",extraEncoding:K}),...L({partName:"ticks",mark:G,positionPrefix:"upper_whisker",extraEncoding:K})],F=[...f!=="tukey"?J:[],...O({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:H}),...q({partName:"median",mark:{type:"tick",invalid:c,...Ot(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:H})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:F};const j=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,M=`(${W} - ${j})`,V=`${j} - ${u} * ${M}`,Q=`${W} + ${u} * ${M}`,se=`datum["${m.field}"]`,be={joinaggregate:k9e(m.field),groupby:y},he={transform:[{filter:`(${V} <= ${se}) && (${se} <= ${Q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${C}`},{op:"max",field:m.field,as:`upper_whisker_${C}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${C}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${C}`},...v],groupby:y}],layer:J},{tooltip:Ae,...Ne}=k,{scale:rt,axis:Re}=m,Tt=Eoe(m),Ze=cc(Re,["title"]),It=T9e(a,"outliers",t.boxplot,{transform:[{filter:`(${se} < ${V}) || (${se} > ${Q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Tt!==void 0?{title:Tt}:{},...rt!==void 0?{scale:rt}:{},...Mi(Ze)?{}:{axis:Ze}},...Ne,...A?{color:A}:{},...S?{tooltip:S}:{}}})[0];let mt;const Se=[...d,...h,be];return It?mt={transform:Se,layer:[It,he]}:(mt=he,mt.transform.unshift(...Se)),{...o,layer:[mt,{transform:p,layer:F}]}}function k9e(e){const t=bC(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function hen(e,t,n){const r=C9e(e,tM),{continuousAxisChannelDef:i,continuousAxis:s}=S9e(e,r,tM),o=i.field,a=bC(o),u=A9e(t),l=[...k9e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=cen(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=w9e(p,n),_=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Soe="errorbar",pen=["ticks","rule"],men=new s9(Soe,R9e);function R9e(e,{config:t}){e={...e,encoding:o9(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=P9e(e,Soe,t);delete s.size;const c=Toe(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function gen(e,t){const{encoding:n}=e;if(yen(n))return{orient:C9e(e,t),inputType:"raw"};const r=ven(n),i=ben(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Ln(a)&&Ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(Ln(a)){if(u1(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ln(u)){if(u1(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Ln(u)&&!Ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(Ln(c)&&!Ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(Ln(a)&&Ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ln(a)){if(u1(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ln(l)){if(u1(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function yen(e){return(Ln(e.x)||Ln(e.y))&&!Ln(e.x2)&&!Ln(e.y2)&&!Ln(e.xError)&&!Ln(e.xError2)&&!Ln(e.yError)&&!Ln(e.yError2)}function ven(e){return Ln(e.x2)||Ln(e.y2)}function ben(e){return Ln(e.xError)||Ln(e.xError2)||Ln(e.yError)||Ln(e.yError2)}function P9e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=wm(r)?r:{type:r};s&&pt(TBe(t));const{orient:l,inputType:c}=gen(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=S9e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=xen(u,f,d,h,p,c,t,n),{[m]:_,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:C,...A}=i,{bins:R,timeUnits:k,aggregate:N,groupby:L,encoding:O}=w9e(A,n),B=[...N,...g],q=c!=="raw"?[]:L,H=hK(v,f,O,b);return{transform:[...a.transform??[],...R,...k,...B.length===0?[]:[{aggregate:B,groupby:q}],...y],groupby:q,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:O,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:H}}function xen(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&pt(DJt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:oD(h)},{fieldPrefix:"upper_",titlePrefix:Mbe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Mbe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:F2({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:F2({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:F2({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&pt(PJt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:y_(y_(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Mbe(e,t,n){return`${oD(e)} ${n} ${t}`}const Coe="errorband",_en=["band","borders"],wen=new s9(Coe,D9e);function D9e(e,{config:t}){e={...e,encoding:o9(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=P9e(e,Coe,t),l=o,c=Toe(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?pt(Ibe("interpolate")):l.tension&&pt(Ibe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const N9e={};function Aoe(e,t,n){const r=new s9(e,t);N9e[e]={normalizer:r,parts:n}}function Een(){return ct(N9e)}Aoe(tM,I9e,fen);Aoe(Soe,R9e,pen);Aoe(Coe,D9e,_en);const Ten=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],O9e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},$9e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Sen=ct(O9e),Cen=ct($9e),Aen={header:1,headerRow:1,headerColumn:1,headerFacet:1},L9e=ct(Aen),M9e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Ien={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},ken={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},jh="_vgsid_",Ren={point:{on:"click",fields:[jh],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ioe(e){return e==="legend"||!!(e!=null&&e.legend)}function jV(e){return Ioe(e)&&Ot(e)}function koe(e){return!!(e!=null&&e.select)}function F9e(e){const t=[];for(const n of e||[]){if(koe(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function Pen(e){return a9(e)||Poe(e)||Roe(e)}function Roe(e){return"concat"in e}function a9(e){return"vconcat"in e}function Poe(e){return"hconcat"in e}function B9e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Tm(e){return Ot(e)&&e.step!==void 0}function Fbe(e){return e.view||e.width||e.height}const Bbe=20,Den={align:1,bounds:1,center:1,columns:1,spacing:1},Nen=ct(Den);function Oen(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(e9(e)&&!hD(e.facet)||Roe(e))&&(i.columns=o),a9(e)&&(i.columns=1);for(const a of Nen)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Qr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function pK(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function nM(e,t){const n=rM(e,t);return Tm(n)?n.step:j9e}function rM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return lo(n,{step:e.step})}const j9e=20,$en={continuousWidth:200,continuousHeight:200,step:j9e},Len={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:$en,mark:$Zt,arc:{},area:{},bar:FZt,circle:{},geoshape:{},image:{},line:{},point:{},rect:BZt,rule:{color:"black"},square:{},text:{color:"black"},tick:jZt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:cZt,projection:{},legend:Ien,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Ren,style:{},title:{},facet:{spacing:Bbe},concat:{spacing:Bbe},normalizedNumberFormat:".0%"},h0=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],jbe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Ube={blue:h0[0],orange:h0[1],red:h0[2],teal:h0[3],green:h0[4],yellow:h0[5],purple:h0[6],pink:h0[7],brown:h0[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Men(e={}){return{signals:[{name:"color",value:Ot(e)?{...Ube,...e}:Ube}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Fen(e){return{signals:[{name:"fontSize",value:Ot(e)?{...jbe,...e}:jbe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Ben(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function U9e(e){const t=ct(e||{}),n={};for(const r of t){const i=e[r];n[r]=gD(i)?yBe(i):qc(i)}return n}function jen(e){const t=ct(e),n={};for(const r of t)n[r]=U9e(e[r]);return n}const Uen=[...r9e,...b9e,...L9e,"background","padding","legend","lineBreak","scale","style","title","view"];function z9e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=uC({},An(Len),n?Ben(n):{},t?Men(t):{},r?Fen(r):{},s||{});i&&lC(o,"selection",i,!0);const a=cc(o,Uen);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=qc(o[u]));for(const u of r9e)o[u]&&(a[u]=Wl(o[u]));for(const u of b9e)o[u]&&(a[u]=U9e(o[u]));for(const u of L9e)o[u]&&(a[u]=Wl(o[u]));return o.legend&&(a.legend=Wl(o.legend)),o.scale&&(a.scale=Wl(o.scale)),o.style&&(a.style=jen(o.style)),o.title&&(a.title=Wl(o.title)),o.view&&(a.view=Wl(o.view)),a}const zen=new Set(["view",...kZt]),Ven=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Hen={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...OZt};function qen(e){e=An(e);for(const t of Ven)delete e[t];if(e.axis)for(const t in e.axis)gD(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Ten)delete e.legend[t];if(e.mark){for(const t of Pbe)delete e.mark[t];e.mark.tooltip&&Ot(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(F9e(e.params)),delete e.params);for(const t of zen){for(const r of Pbe)delete e[t][r];const n=Hen[t];if(n)for(const r of n)delete e[t][r];Gen(e,t)}for(const t of Een())delete e[t];Wen(e);for(const t in e)Ot(e[t])&&Mi(e[t])&&delete e[t];return Mi(e)?void 0:e}function Wen(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=gBe(e.title);Mi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Mi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Mi(r)?delete e.title:e.title=r}function Gen(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Mi(s)||(e.style[n??t]=s),delete e[t]}function u9(e){return"layer"in e}function Yen(e){return"repeat"in e}function Ken(e){return!Qe(e.repeat)&&e.repeat.layer}class Doe{map(t,n){return e9(t)?this.mapFacet(t,n):Yen(t)?this.mapRepeat(t,n):Poe(t)?this.mapHConcat(t,n):a9(t)?this.mapVConcat(t,n):Roe(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(u9(t))return this.mapLayer(t,n);if(ry(t))return this.mapUnit(t,n);throw new Error(Yse(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Xen={zero:1,center:1,normalize:1};function Qen(e){return e in Xen}const Jen=new Set([e9e,XB,KB,XL,JB,poe,moe,QB,t9e,hoe]),Zen=new Set([XB,KB,e9e]);function hE(e){return gt(e)&&ZT(e)==="quantitative"&&!e.bin}function zbe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(gt(o)&&gt(a))if(hE(o)&&hE(a)){if(o.stack)return t;if(a.stack)return i;const u=gt(o)&&!!o.aggregate,l=gt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(hE(o))return t;if(hE(a))return i}else{if(hE(o))return s&&n==="vertical"?void 0:t;if(hE(a))return s&&n==="horizontal"?void 0:i}}function etn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function V9e(e,t){var m,g;const n=wm(e)?e:{type:e},r=n.type;if(!Jen.has(r))return null;const i=zbe(t,"x",n)||zbe(t,"theta",n);if(!i)return null;const s=t[i],o=gt(s)?St(s,{}):void 0,a=etn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=gt(y)?St(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=gt(f)?St(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=hQt.reduce((y,v)=>{if(v!=="tooltip"&&jx(t,v)){const b=t[v];for(const _ of Dt(b)){const E=Em(_);if(E.aggregate)continue;const S=St(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Gv(s.stack)?p=s.stack?"zero":null:p=s.stack:Zen.has(r)&&(p="zero"),!p||!Qen(p)||_oe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==fc.LINEAR&&s!=null&&s.stack&&pt(IJt(s.scale.type)),Ln(t[Vm(i)])?(s.stack!==void 0&&pt(AJt(i)),null):(gt(s)&&s.aggregate&&!SQt.has(s.aggregate)&&pt(kJt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:gw(r),stackBy:h,offset:p}))}function H9e(e,t,n){const r=Wl(e),i=hi("orient",r,n);if(r.orient=itn(r.type,t,i),i!==void 0&&i!==r.orient&&pt(fJt(r.orient,i)),r.type==="bar"&&r.orient){const u=hi("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:MZt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=hi("opacity",r,n),o=hi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=ntn(r.type,t)),hi("cursor",r,n)===void 0&&(r.cursor=ttn(r,t,n)),r}function ttn(e,t,n){return t.href||e.href||hi("href",e,n)?"pointer":e.cursor}function ntn(e,t){if(Er([JB,hoe,poe,moe],e)&&!_oe(t))return .7}function rtn(e,t,{graticule:n}){if(n)return!1;const r=Rg("filled",e,t),i=e.type;return lo(r,i!==JB&&i!==QB&&i!==XL)}function itn(e,t,n){switch(e){case JB:case poe:case moe:case t9e:case AZt:case CZt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case XB:if(gt(r)&&(Da(r.bin)||gt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(gt(i)&&(Da(i.bin)||gt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(gt(r)&&r.type===x_&&!Zi(r.bin)||QL(r))&&gt(i)&&Da(i.bin)?"horizontal":"vertical";if(!o)return(gt(i)&&i.type===x_&&!Zi(i.bin)||QL(i))&&gt(r)&&Da(r.bin)?"vertical":"horizontal"}case XL:if(s&&!(gt(r)&&Da(r.bin))&&o&&!(gt(i)&&Da(i.bin)))return;case KB:if(o)return gt(i)&&Da(i.bin)?"horizontal":"vertical";if(s)return gt(r)&&Da(r.bin)?"vertical":"horizontal";if(e===XL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case QB:case hoe:{const a=Obe(r),u=Obe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=bl(r)&&r.type===QT,c=bl(i)&&i.type===QT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function stn(e){const{point:t,line:n,...r}=e;return ct(r).length>1?r:r.type}function otn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:cc(e[t],["point","line"])});return e}function UV(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ot(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ot(t.point)?t.point:{}:void 0}function Vbe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class atn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ry(t)){const{mark:r,encoding:i}=t,s=wm(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!UV(s,n[s.type],i);case"area":return!!UV(s,n[s.type],i)||!!Vbe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=o9(l,i),d=wm(a)?a:{type:a},h=UV(d,i[d.type],f),p=d.type==="area"&&Vbe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:stn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:cc(f,["shape"])}],g=V9e(H9e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=cc(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...GT(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...GT(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:otn(i)})}}function utn(e,t){return t?hD(e)?W9e(e,t):q9e(e,t):e}function zV(e,t){return t?W9e(e,t):e}function mK(e,t,n){const r=t[e];if(HZt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};pt(qQt(r.repeat));return}return t}function q9e(e,t){if(e=mK("field",e,t),e!==void 0){if(e===null)return null;if(yoe(e)&&nm(e.sort)){const n=mK("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Hbe(e,t){if(gt(e))return q9e(e,t);{const n=mK("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function qbe(e,t){if(Ln(e)){const n=Hbe(e,t);if(n)return n;if(t9(e))return{condition:e.condition}}else{if(pD(e)){const n=Hbe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function W9e(e,t){const n={};for(const r in e)if(sn(e,r)){const i=e[r];if(Qe(i))n[r]=i.map(s=>qbe(s,t)).filter(s=>s);else{const s=qbe(i,t);s!==void 0&&(n[r]=s)}}return n}class ltn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ry(t)){const{encoding:n,mark:r}=t;if(r==="line"||wm(r)&&r.type==="line")for(const i of cQt){const s=dw(i),o=n[s];if(n[i]&&(gt(o)&&!Da(o.bin)||qm(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return pt(cJt(!!i.x2,!!i.y2)),r({...t,mark:Ot(s)?{...s,type:"rule"}:"rule"},n)}}class ctn extends Doe{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[den,men,wen,new atn,new ltn]}map(t,n){if(ry(t)){const r=jx(t.encoding,eg),i=jx(t.encoding,tg),s=jx(t.encoding,BB);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=zV(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Ken(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ss(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Qe(r)&&t.columns&&(t=cc(t,["columns"]),pt(Tbe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Qe(r)&&r.row||[u?u.row:null],f=!Qe(r)&&r.column||[u?u.column:null],d=Qe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Qe(r)?`${Ss(p)}`:(r.row?`row_${Ss(m)}`:"")+(r.column?`column_${Ss(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(cc(b,["data"]))}const h=Qe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return hD(r)&&t.columns&&(t=cc(t,["columns"]),pt(Tbe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Gbe({parentProjection:o,projection:i}),l=Wbe({parentEncoding:s,encoding:zV(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=zV(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&pt(uJt([...r?[eg]:[],...i?[tg]:[]]));const o={},a={};for(const u of[eg,tg]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:utn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Wbe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Gbe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Wbe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ct(e),...ct(t)]);for(const s of i){const o=t[s],a=e[s];if(Ln(o)){const u={...a,...o};r[s]=u}else pD(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Bh(a)||Xt(a)||Ln(a)||Qe(a))&&(r[s]=a)}}else r=t;return!r||Mi(r)?void 0:r}function Gbe(e){const{parentProjection:t,projection:n}=e;return t&&n&&pt(QQt({parentProjection:t,projection:n})),n??t}function Noe(e){return"filter"in e}function ftn(e){return(e==null?void 0:e.stop)!==void 0}function G9e(e){return"lookup"in e}function dtn(e){return"data"in e}function htn(e){return"param"in e}function ptn(e){return"pivot"in e}function mtn(e){return"density"in e}function gtn(e){return"quantile"in e}function ytn(e){return"regression"in e}function vtn(e){return"loess"in e}function btn(e){return"sample"in e}function xtn(e){return"window"in e}function _tn(e){return"joinaggregate"in e}function wtn(e){return"flatten"in e}function Etn(e){return"calculate"in e}function Y9e(e){return"bin"in e}function Ttn(e){return"impute"in e}function Stn(e){return"timeUnit"in e}function Ctn(e){return"aggregate"in e}function Atn(e){return"stack"in e}function Itn(e){return"fold"in e}function ktn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function Rtn(e){return e.map(t=>Noe(t)?{filter:L2(t.filter,rZt)}:t)}class Ptn extends Doe{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Ybe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Ybe(t,n),t.encoding){const r={};for(const[i,s]of fv(t.encoding))r[i]=K9e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:fv(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Ua(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Ybe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Noe(s))return{filter:gK(s,t)};if(Y9e(s)&&hw(s.bin))return{...s,bin:X9e(s.bin)};if(G9e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function K9e(e,t){var r,i;const n=An(e);if(gt(n)&&hw(n.bin)&&(n.bin=X9e(n.bin)),yw(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(t9(n))if(Qe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:gK(s,t)}});else{const{selection:s,param:o,test:a,...u}=K9e(n.condition,t);n.condition=o?n.condition:{...u,test:gK(n.condition,t)}}return n}function X9e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function gK(e,t){const n=r=>L2(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):L2(e.test||e.filter,r=>r.selection?n(r.selection):r)}class yK extends Doe{map(t,n){const r=n.selections??[];if(t.params&&!ry(t)){const i=[];for(const s of t.params)koe(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Nt(a)&&(a===t.name||i.includes(a))||Qe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=yK.prototype[e];yK.prototype[e]=function(n,r){return t.call(this,n,Dtn(n,r))}}function Dtn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Q9e(e,t){t===void 0&&(t=z9e(e.config));const n=Ltn(e,t),{width:r,height:i}=e,s=Mtn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Ntn=new ctn,Otn=new Ptn,$tn=new yK;function Ltn(e,t={}){const n={config:t};return $tn.map(Ntn.map(Otn.map(e,n),n),n)}function Kbe(e){return Nt(e)?{type:e}:e??{}}function Mtn(e,t,n){let{width:r,height:i}=t;const s=ry(e)||u9(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(pt(xbe("width")),r=void 0),i=="container"&&(pt(xbe("height")),i=void 0));const a={type:"pad",...o,...n?Kbe(n.autosize):{},...Kbe(e.autosize)};if(a.type==="fit"&&!s&&(pt(OQt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&pt(_be("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&pt(_be("height")),!Jc(a,{type:"pad"}))return a}function Ftn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Btn(e){return e?`fit-${HB(e)}`:"fit"}const jtn=["background","padding"];function Xbe(e,t){const n={};for(const r of jtn)e&&e[r]!==void 0&&(n[r]=qc(e[r]));return t&&(n.params=e.params),n}class iy{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new iy(An(this.explicit),An(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return lo(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ct(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ep(e){return{explicit:!0,value:e}}function Mc(e){return{explicit:!1,value:e}}function J9e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:l9(t,n,r,i)}}function l9(e,t,n,r){return e.explicit&&t.explicit&&pt(xJt(n,r,e.value,t.value)),e}function pv(e,t,n,r,i=l9){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Jc(e.value,t.value)?e:i(e,t,n,r)}class Utn extends iy{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function nS(e){return"url"in e}function x3(e){return"values"in e}function Z9e(e){return"name"in e&&!nS(e)&&!x3(e)&&!k1(e)}function k1(e){return e&&(e7e(e)||t7e(e)||Ooe(e))}function e7e(e){return"sequence"in e}function t7e(e){return"sphere"in e}function Ooe(e){return"graticule"in e}var _s;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(_s||(_s={}));function n7e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=md(i.field),i}function E_(e,t=!0,n=Pu){if(Qe(e)){const r=e.map(i=>E_(i,t,n));return t?`[${r.join(", ")}]`:r}else if(pw(e))return n(t?b_(e):qJt(e));return t?n(Fi(e)):e}function ztn(e,t){for(const n of Ua(e.component.selection??{})){const r=n.name;let i=`${r}${gv}, ${n.resolve==="global"?"true":`{unit: ${Ux(e)}}`}`;for(const s of h9)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+xnn,on:[{events:{signal:n.name+gv},update:`modify(${Et(n.name+T_)}, ${i})`}]})}return $oe(t)}function Vtn(e,t){if(e.component.selection&&ct(e.component.selection).length){const n=Et(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Kv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return $oe(t)}function Htn(e,t){let n=!1;for(const r of Ua(e.component.selection??{})){const i=r.name,s=Et(i+T_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${x7e}(${s}, ${Et(a)}${u}`})}n=!0;for(const a of h9)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),$oe(t)}function qtn(e,t){const n=[...t],r=Ux(e,{escape:!1});for(const i of Ua(e.component.selection??{})){const s={name:i.name+T_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:jh}}]),i.init){const a=i.project.items.map(n7e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[jh]:E_(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:E_(u,!1)}))}n.filter(a=>a.name===i.name+T_).length||n.push(s)}return n}function r7e(e,t){for(const n of Ua(e.component.selection??{}))for(const r of h9)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Wtn(e,t){for(const n of e.children)Hs(n)&&(t=r7e(n,t));return t}function Gtn(e,t,n,r){const i=S7e(e,t.param,t);return{signal:_f(n.get("type"))&&Qe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function $oe(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ii{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){pt(YQt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class dc extends Ii{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Z8e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function VV(e){return e.as!==void 0}function Qbe(e){return`${e}_end`}class rm extends Ii{clone(){return new rm(null,An(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(mw(u)){if(Hs(n)){const{mark:c,markDef:f,config:d}=n,h=hv({fieldDef:s,markDef:f,config:d});(b3(c)||h)&&(l={timeUnit:ga(u),field:a})}}else l={as:St(s,{forAs:!0}),field:a,timeUnit:u};if(Hs(n)){const{mark:c,markDef:f,config:d}=n,h=hv({fieldDef:s,markDef:f,config:d});b3(c)&&co(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[wr(l)]=l)}return i},{});return Mi(r)?null:new rm(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=ga(r),o={...i,timeUnit:s};return new rm(t,{[wr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of fv(this.timeUnits)){const s=VV(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ua(this.timeUnits).map(t=>VV(t)?t.as:Qbe(t.field)))}dependentFields(){return new Set(Ua(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${wr(this.timeUnits)}`}assemble(){const t=[];for(const n of Ua(this.timeUnits)){const{rectBandPosition:r}=n,i=ga(n.timeUnit);if(VV(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:md(s),type:"timeunit",...a?{units:YB(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Jbe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=i7e({timeUnit:i,field:o}),u=Qbe(o);t.push({type:"formula",expr:a,as:u}),t.push(...Jbe([o,u],r,i))}}return t}}const c9="offsetted_rect_start",f9="offsetted_rect_end";function i7e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=$Be(r),{part:o,step:a}=BBe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Jbe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Zbe([i7e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${c9}`},{type:"formula",expr:Zbe([i,s],n+.5),as:`${e}_${f9}`}]}return[]}function Zbe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const yD="_tuple_fields";class Ytn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Ktn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Ytn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ss(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ss(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Dt(n.value):null;let{fields:d,encodings:h}=Ot(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ot(p))for(const m of ct(p))lQt(m)?(h||(h=[])).push(m):l==="interval"?(pt(HQt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){pt($Qt(p,m.aggregate));continue}else if(!g){pt(Ebe(p));continue}if(m.timeUnit&&!mw(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[wr(y)]=y}if(!s[g]){const y=l==="interval"&&ny(p)&&_f(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===jh,sBe(p)?(v.geoChannel=p,v.channel=iBe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else pt(Ebe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===jh}f&&(t.init=f.map(p=>i.items.map(m=>Ot(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Mi(o)||(i.timeUnit=new rm(null,o))},signals:(e,t,n)=>{const r=t.name+yD;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(n7e)})}},ng={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ny(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&pt(BQt),!s||!_f(o)){pt(FQt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||exe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(x7e)>=0)i.update=`{${r.map(o=>`${Et(md(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Et(md(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!exe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function vK(e,t){return`domain(${Et(e.scaleName(t))})`}function exe(e){return e.parent&&CC(e.parent)&&!e.parent.parent}const B2="_brush",s7e="_scale_trigger",zA="geo_interval_init_tick",o7e="_init",Xtn="_center",Qtn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ot(n.select)?n.select:{}};i.fields=[jh],i.encodings||(i.encodings=n.value?ct(n.value):[np,tp]),n.select={type:"interval",...i}}if(t.translate&&!ng.defined(t)){const i=`!event.item || event.item.mark.name !== ${Et(t.name+B2)}`;for(const s of t.events){if(!s.between){pt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Dt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+gv,s=Ua(t.project.hasChannel).filter(a=>a.channel===Cs||a.channel===wa),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Jtn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Et(e.projectionName()),u=e.projectionName()+Xtn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+o7e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Et(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Ux(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,_=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...o?[{signal:zA}]:[]],update:b}]})}else{if(!ng.defined(t)){const l=r+s7e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Et(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=_f(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Ux(e)}, fields: ${r+yD}, values`;return n.concat({name:i,...o?{init:`{${u}: ${E_(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Hs(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===zA).length||n.unshift({name:zA,value:null,on:[{events:"timer{1}",update:`${zA} === null ? {} : ${zA}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Et(t.name+T_)})`;if(ng.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of ct(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Ux(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=ct(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+B2}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+B2,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Jtn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Et(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Cs?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=ng.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:E_(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+s7e},update:_f(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:E_(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Cs?0:1,h=t.name+o7e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Ztn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+yD,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ua(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+B2):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Ux(e)}, `;if(t.project.hasSelectionId)l+=`${jh}: ${o}[${Et(jh)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Et(e.vgField(d.channel,{}))}], ${o}[${Et(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Et(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+gv,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function wC(e,t,n,r){const i=t9(t)&&t.condition,s=r(t);if(i){const a=Dt(i).map(u=>{const l=r(u);if(VZt(u)){const{param:c,empty:f}=u;return{test:T7e(e,{param:c,empty:f}),...l}}else return{test:oM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Loe(e,t="text"){const n=e.encoding[t];return wC(e,n,t,r=>d9(r,e.config))}function d9(e,t,n="datum"){if(e){if(Bh(e))return us(e.value);if(Ln(e)){const{format:r,formatType:i}=ZL(e);return doe({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function a7e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Qe(o))return{tooltip:txe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return wC(e,o,"tooltip",u=>{const l=d9(u,i,a);if(l)return l;if(u===null)return;let c=hi("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Nt(c))return{value:c};if(Ot(c))return Xt(c)?c:c.content==="encoding"?txe(n,s,i,t):{signal:a}})}}function u7e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=dw(f),h=bl(c)?c:{...c,type:e[d].type},p=h.title||boe(h,i),m=Dt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(co(f)){const y=f==="x"?"x2":"y2",v=Em(e[y]);if(Da(h.bin)&&v){const b=St(h,{expr:o}),_=St(v,{expr:o}),{format:E,formatType:S}=ZL(h);g=dD(b,_,E,S,i),s[y]=!0}}if((co(f)||f===Ad||f===ep)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=ZL(h);g=doe({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=d9(h,i,o).signal),a.push({channel:f,key:m,value:g})}woe(e,(c,f)=>{gt(c)?u(c,f):n9(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function txe(e,t,n,{reactiveGeom:r}={}){const i=u7e(e,t,n,{reactiveGeom:r}),s=fv(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function enn(e){const{markDef:t,config:n}=e,r=hi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...tnn(e),...nnn(e)}}function tnn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=hi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in PQt?{}:{ariaRoleDescription:{value:t}}}function nnn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return wC(e,s,"description",u=>d9(u,e.config));const o=hi("description",n,r);if(o!=null)return{description:us(o)};if(r.aria===!1)return{};const a=u7e(t,i,r);if(!Mi(a))return{description:{signal:fv(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function la(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=hi(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=us(u)));const l=i[e];return wC(t,l,o??e,c=>foe({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function l7e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??hi("filled",n,i),a=Er(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=hi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=hi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:us(u)}:{},...l?{stroke:us(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&pt(CBe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...la("color",e,{vgChannel:c,defaultValue:o?u:l}),...la("fill",e,{defaultValue:r.fill?u:void 0}),...la("stroke",e,{defaultValue:r.stroke?l:void 0})}}function rnn(e){const{encoding:t,mark:n}=e,r=t.order;return!gw(n)&&Bh(r)?wC(e,r,"zindex",i=>us(i.value)):{}}function rS({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:foe({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:us(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function _u(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Vm(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=rS({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Moe({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&co(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:inn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function inn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Ln(n)&&i&&t===i.fieldChannel){if(gt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return KL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Bx(n,r,{suffix:"end"},{offset:s})}return loe(e)}function Moe({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=dw(n),u=dv(n),l=hi(n,s,o,{vgChannel:u});if(l!==void 0)return Pk(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Er([fc.LOG,fc.TIME,fc.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Ec(n)],mult:.5}}}}const snn={left:"x",center:"xc",right:"x2"},onn={top:"y",middle:"yc",bottom:"y2"};function c7e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return dv(e);const i=e==="x"?"align":"baseline",s=hi(i,t,n);let o;return Xt(s)?(pt(lJt(i)),o=void 0):o=s,e==="x"?snn[o||(r==="top"?"left":"center")]:onn[o||r]}function iM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?f7e(e,t,{defaultPos:n,defaultPos2:r}):_u(e,t,{defaultPos:n})}function f7e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Vm(e),a=Ec(e),u=ann(t,r,o),l=u[a]?c7e(e,i,s):dv(e);return{..._u(e,t,{defaultPos:n,vgChannel:l}),...u}}function ann(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=dw(n),l=Ec(n),c=dv(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?rS({channel:n,markDef:s,encoding:r,model:e}):rS({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Ec(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=unn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:WO(n,s)||WO(n,{[n]:GL(n,s,a.style),[l]:GL(l,s,a.style)})||WO(n,a[i])||WO(n,a.mark)||{[c]:Moe({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function unn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Bx(t,s,{suffix:"start"},{offset:u}):loe({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function WO(e,t){const n=Ec(e),r=dv(e);if(t[r]!==void 0)return{[r]:Pk(e,t[r])};if(t[e]!==void 0)return{[r]:Pk(e,t[e])};if(t[n]){const i=t[n];if(w_(i))pt(rJt(n));else return{[n]:Pk(e,i)}}}function mv(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Vm(t),a=Ec(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??hi("size",i,n,{vgChannel:a}),p=lBe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return gt(u)&&(Zi(u.bin)||Da(u.bin)||u.timeUnit&&!l)&&!(h&&!w_(h))&&!r[p]&&!ba(f)?fnn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Ln(u)&&ba(f)||m)&&!l?cnn(u,t,e):f7e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function lnn(e,t,n,r,i,s,o){if(w_(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Rg("minBandSize",{type:o},r);return{signal:c?`max(${yh(c)}, ${l})`:l}}else i.band!==1&&(pt(hJt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Xt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(nb(u)&&Qr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=lo(u,o==="bar"?l:c);if(Xt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Qr(f))return{signal:`${1-f} * ${e}`}}return{value:nM(r.view,e)-2}}function cnn(e,t,n){var R,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Ec(t),f=Vm(t),d=lBe(t),h=n.scaleName(d),p=n.getScaleComponent(Vse(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=la("size",n,{vgChannel:c,defaultRef:us(r.size)}):pt(yJt(r.type)));const y=!!g,v=a9e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(R=l||p)==null?void 0:R.get("type"),useVlSizeChannel:m});g=g||{[c]:lnn(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&w_(v)&&!y?"top":"middle",_=c7e(t,r,s,b),E=_==="xc"||_==="yc",{offset:S,offsetType:C}=rS({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=loe({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:Moe({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?C==="encoding"?0:.5:Xt(v)?{signal:`(1-${v})/2`}:w_(v)?(1-v.band)/2:0});if(c)return{[_]:A,...g};{const N=dv(f),L=g[c],O=S?{...L,offset:S}:L;return{[_]:A,[N]:Qe(A)?[A[0],{...A[1],offset:O}]:{...A,offset:O}}}}function nxe(e,t,n,r,i,s,o){if(rBe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Xt(n)||Xt(i)||Xt(r)||s){const l=yh(n),c=yh(i),f=yh(r),d=yh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function fnn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=a9e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=co(n)?hi("binSpacing",s,i)??0:0,m=Vm(n),g=dv(n),y=dv(m),v=Rg("minBandSize",s,i),{offset:b}=rS({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:_}=rS({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=wZt({fieldDef:e,scaleName:u}),S=nxe(n,p,c,h,b,v,E),C=nxe(m,p,c,h,_??b,v,E),A=Xt(f)?{signal:`(1-${f.signal})/2`}:w_(f)?(1-f.band)/2:.5,R=hv({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Zi(e.bin)||e.timeUnit){const N=e.timeUnit&&R!==.5;return{[y]:rxe({fieldDef:e,scaleName:u,bandPosition:A,offset:C,useRectOffsetField:N}),[g]:rxe({fieldDef:e,scaleName:u,bandPosition:Xt(A)?{signal:`1-${A.signal}`}:1-A,offset:S,useRectOffsetField:N})}}else if(Da(e.bin)){const N=Bx(e,u,{},{offset:C});if(gt(t))return{[y]:N,[g]:Bx(t,u,{},{offset:S})};if(hw(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${St(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}pt(kBe(m))}function rxe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return KL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:c9,endSuffix:f9}:{}})}const dnn=new Set(["aria","width","height"]);function Id(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?l7e(e):{};return{...hnn(e.markDef,t),...ixe(e,"fill",n),...ixe(e,"stroke",r),...la("opacity",e),...la("fillOpacity",e),...la("strokeOpacity",e),...la("strokeWidth",e),...la("strokeDash",e),...rnn(e),...a7e(e),...Loe(e,"href"),...enn(e)}}function ixe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(hi("invalid",s,r)==="hide"&&n&&!gw(i)){const a=pnn(e,{invalid:!0,channels:qB});if(a)return{[t]:[{test:a,value:null},...Dt(n)]}}return n?{[t]:n}:{}}function hnn(e,t){return RQt.reduce((n,r)=>(!dnn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=us(e[r])),n),{})}function pnn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&_f(u)&&(s[l]=!0)}return s},{}),i=ct(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>coe(o,t)).join(` ${s} `)}}function Foe(e){const{config:t,markDef:n}=e;if(hi("invalid",n,t)){const i=mnn(e,{channels:Hm});if(i)return{defined:{signal:i}}}return{}}function mnn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&_f(l)&&(s[c]=!0)}return s},{}),i=ct(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>coe(o,t)).join(` ${s} `)}}function sxe(e,t){if(t!==void 0)return{[e]:us(t)}}const HV="voronoi",d7e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(HV)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(gw(s))return pt(LQt(s)),n;const o={name:e.getName(HV),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...a7e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(HV)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},h7e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Ioe(e.bind),parse:(e,t,n)=>_7e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=d7e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ss(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:E_(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Et(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+gv)[0],o=r+yD,a=i.items.map(l=>Ss(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},sM="_toggle",p7e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+sM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+gv,r=t.name+sM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Ux(e)}}, `)+`${r} ? ${n} : null`}},gnn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Nt(t.clear)?Kv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(h7e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ss(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+gv);r(i,"null"),p7e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+sM),r(i,"false"))}return n}},m7e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Ioe(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==jh;return t&&!n&&pt(jQt),t&&n},parse:(e,t,n)=>{const r=An(n);if(r.select=Nt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},_7e(t,r),Ot(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Dt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=jV(t.bind)?t.bind.legend:"click",s=Nt(i)?Kv(i,"view"):Dt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=jV(t.bind)&&t.bind.legend,s=o=>a=>{const u=An(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ss(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+gv),o=r+yD,a=i.items.filter(d=>d.hasLegend).map(d=>Ss(`${r}_${Ss(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+sM),f=jV(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function ynn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Ua(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&m7e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const g7e="_translate_anchor",y7e="_translate_delta",vnn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=ng.defined(t),s=r+g7e,{x:o,y:a}=t.project.hasChannel;let u=Kv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+B2,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?vK(e,Cs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?vK(e,wa):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+y7e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&oxe(e,t,o,"width",n),a!==void 0&&oxe(e,t,a,"height",n),n}};function oxe(e,t,n,r,i){const s=t.name,o=s+g7e,a=s+y7e,u=n.channel,l=ng.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Cs?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?_:`clampRange(${_}, 0, ${f})`})}const v7e="_zoom_anchor",b7e="_zoom_delta",bnn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=ng.defined(t),s=r+b7e,{x:o,y:a}=t.project.hasChannel,u=Et(e.scaleName(Cs)),l=Et(e.scaleName(wa));let c=Kv(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+B2,f))),n.push({name:r+v7e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&axe(e,t,o,"width",n),a!==void 0&&axe(e,t,a,"height",n),n}};function axe(e,t,n,r,i){const s=t.name,o=n.channel,a=ng.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?vK(e,o):u.name,h=s+b7e,p=`${s}${v7e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const T_="_store",gv="_tuple",xnn="_modify",x7e="vlSelectionResolve",h9=[Ztn,Qtn,Ktn,p7e,h7e,ng,m7e,gnn,vnn,bnn,d7e];function _nn(e){let t=e.parent;for(;t&&!sf(t);)t=t.parent;return t}function Ux(e,{escape:t}={escape:!0}){let n=t?Et(e.name):e.name;const r=_nn(e);if(r){const{facet:i}=r;for(const s of nd)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Et(r.vgField(s))}])`)}return n}function Boe(e){return Ua(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function _7e(e,t){(Nt(t.select)||!t.select.on)&&delete e.events,(Nt(t.select)||!t.select.clear)&&delete e.clear,(Nt(t.select)||!t.select.toggle)&&delete e.toggle}function bK(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...bK(e.object)),t.push(...bK(e.property))),t)}function w7e(e){return e.object.type==="MemberExpression"?w7e(e.object):e.object.name==="datum"}function E7e(e){const t=sse(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&w7e(r)&&n.add(bK(r).slice(1).join("."))}),n}class EC extends Ii{clone(){return new EC(null,this.model,An(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=oM(this.model,this.filter,this),this._dependentFields=E7e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function wnn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ss(i.name),o=i.select,a=Nt(o)?o:o.type,u=Ot(o)?An(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=An(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Nt(u.on)?Kv(u.on,"scope"):Dt(An(u.on))},f=An(i);for(const d of h9)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function T7e(e,t,n,r="datum"){const i=Nt(t)?t:t.param,s=Ss(i),o=Et(s+T_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Et(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function S7e(e,t,n){const r=Ss(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&pt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Et(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,pt((a.length?"Multiple ":"No ")+`matching ${Et(i)} encoding found for selection ${Et(n.param)}. Using "field": ${Et(s)}.`)):s=a[0].field}return`${o.name}[${Et(md(s))}]`}function Enn(e,t){for(const[n,r]of fv(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new dc(new EC(t,e,{param:n}),i,_s.Lookup,e.component.data.outputNodeRefCounts)}}function oM(e,t,n){return Rk(t,r=>Nt(r)?r:eZt(r)?T7e(e,r,n):UBe(r))}function Tnn(e,t){if(e)return Qe(e)&&!Fy(e)?e.map(n=>boe(n,t)).join(", "):e}function qV(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function BI(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=ren[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(gD(m)){const{condition:g,...y}=m,v=Dt(g),b=$be[h];if(b){const{vgProp:_,part:E}=b,S=[...v.map(C=>{const{test:A,...R}=C;return{test:oM(null,A),...R}}),y];qV(c,E,_,S),delete c[h]}else if(b===null){const _={signal:v.map(E=>{const{test:S,...C}=E;return`${oM(null,S)} ? ${bbe(C)} : `}).join("")+bbe(y)};c[h]=_}}else if(Xt(m)){const g=$be[h];if(g){const{vgProp:y,part:v}=g;qV(c,v,y,m),delete c[h]}}Er(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Mi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:lo(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Xt(c.encode.labels.update.text)&&(p=y_(a,"datum.label",c.encode.labels.update.text.signal)),qV(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of y9e)e.hasAxisPart(p)||delete c.encode[p];Mi(c.encode)&&delete c.encode}const h=Tnn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:lo(l,0)}}}}function C7e(e){const{axes:t}=e.component,n=[];for(const r of Hm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Snn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>BI(i,"grid",t)),...r.map(i=>BI(i,"grid",t)),...n.map(i=>BI(i,"main",t)),...r.map(i=>BI(i,"main",t))].filter(i=>i)}function uxe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ct(o),...ct(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${yh(o[c])} : ${yh(a[c])}`};return l}return t[i]})])}function Cnn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:qBe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Xt(n)?"axisOrient":`axis${oD(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:uxe(a,r,e,n),vgAxisConfig:uxe(u,r,e,n),axisConfigStyle:Ann([...u,...a],r)}}function Ann(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Dt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function xK(e,t,n,r={}){var s;const i=bBe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const lxe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Inn(n,e),gridScale:({model:e,channel:t})=>knn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||I7e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||A7e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Pnn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Dnn(t.type,n,gt(t)&&!!t.timeUnit,gt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Onn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:$nn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=k7e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return _Be(i?[Nbe(i)]:[],gt(o)?[Nbe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Lnn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Mnn(n,t)};function Inn(e,t){return!ba(e)&&gt(t)&&!Zi(t==null?void 0:t.bin)&&!Da(t==null?void 0:t.bin)}function knn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Rnn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Xt(s)?s:v3(s);{const{configValue:o}=xK("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?v3(o):n===Cs&&Er([uoe,aoe],e.type)&&!(gt(e)&&e.timeUnit)?270:void 0}}function _K(e){return`(((${e.signal} % 360) + 360) % 360)`}function A7e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Xt(e)){const i=_K(e),s=Xt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Xt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Xt(e)){const i=_K(e),s=Xt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Xt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function I7e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Xt(e)){const o=_K(e),a=Xt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Xt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Pnn(e,t){if(t==="x"&&Er(["quantitative","temporal"],e))return!0}function Dnn(e,t,n,r){if(n&&!Ot(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Nnn(e){return e==="x"?"bottom":"left"}function Onn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ba(t)&&t!=="log"){if(gt(e)){if(Zi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Er(["month","hours","day","quarter"],(i=ga(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function $nn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(gt(t)){const{timeUnit:n}=t;if(n){const r=FBe(n);if(r)return{signal:r}}}}function k7e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return wBe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Lnn(e,t){const n=e.values;if(Qe(n))return g9e(t,n);if(Xt(n))return n}function Mnn(e,t){return e==="rect"&&JL(t)?1:0}class iS extends Ii{clone(){return new iS(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=E7e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(yw(r)&&o9e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${UBe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new iS(t,{calculate:u,as:sS(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${wr(this.transform)}`}}function sS(e,t,n){return St(e,{prefix:t,suffix:"sort_index",...n})}function p9(e,t){return Er(["top","bottom"],t)?"column":Er(["left","right"],t)||e==="row"?"row":"column"}function oS(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return lo((t||{})[e],i[e],n.header[e])}function m9(e,t,n,r){const i={};for(const s of e){const o=oS(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const joe=["row","column"],Uoe=["header","footer"];function Fnn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=m9(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=p9(t,a),l=v3(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...P7e(l,u),...R7e(u,l,s),...D7e(r,i,t,Sen,O9e)}}}function R7e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=I7e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function P7e(e,t){const n=A7e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Bnn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Uoe)if(n[i])for(const s of n[i]){const o=Unn(e,t,i,n,s);o!=null&&r.push(o)}return r}function jnn(e,t){const{sort:n}=e;return nm(n)?{field:St(n,{expr:"datum"}),order:n.order??"ascending"}:Qe(n)?{field:sS(e,t,{expr:"datum"}),order:"ascending"}:{field:St(e,{expr:"datum"}),order:n??"ascending"}}function wK(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=m9(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=doe({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=p9(t,a);return{text:{signal:u?y_(y_(u,"datum.label",l),"datum.value",St(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...P7e(s,c),...R7e(c,s,o),...D7e(n,e,t,Cen,$9e)}}function Unn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=m9(["labelOrient"],o.header,a,t);(t==="row"&&!Er(["top","bottom"],f)||t==="column"&&!Er(["left","right"],f))&&(s=wK(o,t,a))}const u=sf(e)&&!hD(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:jnn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const znn={column:{start:0,end:1},row:{start:1,end:0}};function Vnn(e,t){return znn[t][e]}function Hnn(e,t){const n={};for(const r of nd){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=m9(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=p9(r,o),u=Vnn(s,a);u!==void 0&&(n[a]=u)}}return Mi(n)?void 0:n}function D7e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=oS(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function zoe(e){return[...GO(e,"width"),...GO(e,"height"),...GO(e,"childWidth"),...GO(e,"childHeight")]}function GO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ba(o)&&nb(a)){const u=e.scaleName(n);return sf(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[cxe(u,a)]:[cxe(u,a),{name:i,update:N7e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=pK(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function cxe(e,t){const n=`${e}_step`;return Xt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function N7e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=lo(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${yh(o)}, ${yh(s)}) * ${e}_step`}function O7e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function $7e(e,t){return ct(e).reduce((n,r)=>{const i=e[r];return{...n,...wC(t,i,r,s=>us(s.value))}},{})}function L7e(e,t){if(sf(t))return e==="theta"?"independent":"shared";if(CC(t))return"shared";if(Koe(t))return co(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Voe(e,t){const n=e.scale[t],r=co(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&pt(wJt(t)),"independent"):e[r][t]||"shared"}const qnn={...ken,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},M7e=ct(qnn);class Wnn extends iy{}const fxe={symbols:Gnn,gradient:Ynn,labels:Knn,entries:Xnn};function Gnn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...NQt({},n,DZt),...l7e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?F7e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===_c)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=us(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=us(m??1));else if(Qe(f.fill)){const g=EK(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=us(g))}}if(f.stroke){if(r==="stroke"||!c&&r===_c)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Qe(f.stroke)){const g=lo(EK(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ty){const g=gt(t)&&j7e(n,i,t);g?f.opacity=[{test:g,...us(m??1)},us(u.legend.unselectedOpacity)]:m&&(f.opacity=us(m))}return f={...f,...e},Mi(f)?void 0:f}function Ynn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?F7e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=us(l)),a={...a,...e},Mi(a)?void 0:a}function Knn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=gt(t)?j7e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;__(c)?f=bh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=bh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&gt(t)&&t.timeUnit===void 0&&(f=bh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Mi(d)?void 0:d}function Xnn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function F7e(e){return B7e(e,(t,n)=>Math.max(t,n.value))}function EK(e){return B7e(e,(t,n)=>lo(t,n.value))}function B7e(e,t){if(qZt(e))return Dt(e.condition).reduce(t,e.value);if(Bh(e))return e.value}function j7e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Et(n.field);return r.map(s=>`(!length(data(${Et(Ss(s)+T_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const dxe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return QBe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return JBe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??rrn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??irn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Jnn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>F2(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(M2(n)&&vh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Qnn(t,e)};function Qnn(e,t){const n=e.values;if(Qe(n))return g9e(t,n);if(Xt(n))return n}function Jnn(e,t,n,r){if(t!=="shape"){const i=EK(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Znn(e){const{legend:t}=e;return lo(t.type,ern(e))}function ern({channel:e,timeUnit:t,scaleType:n}){if(M2(e)){if(Er(["quarter","month","day"],t))return"symbol";if(vh(n))return"gradient"}return"symbol"}function trn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??nrn(n,t)}function nrn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function rrn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(vh(i))return n==="horizontal"?r==="top"||r==="bottom"?hxe(t,"width",o,s):o:hxe(t,"height",u,a)}function hxe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function irn(e){if(Er(["quantile","threshold","log","symlog"],e))return"greedy"}function U7e(e){const t=Hs(e)?srn(e):lrn(e);return e.component.legends=t,t}function srn(e){const{encoding:t}=e,n={};for(const r of[_c,...M9e]){const i=zo(t[r]);!i||!e.getScaleComponent(r)||r===wc&&gt(i)&&i.type===_C||(n[r]=urn(e,r))}return n}function orn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function arn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function urn(e,t){var _;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Wnn({},orn(e,t));ynn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=zo(i[t]),f=gt(c)?(_=ga(c.timeUnit))==null?void 0:_.unit:void 0,d=n.orient||s.legend.orient||"right",h=Znn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=trn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of M7e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in dxe?dxe[E](m):n[E];if(S!==void 0){const C=arn(S,E,n,e.fieldDef(t));(C||s.legend[E]===void 0)&&a.set(E,S,C)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=$7e(g[E]??{},e),C=E in fxe?fxe[E](S,b):S;C!==void 0&&!Mi(C)&&(v[E]={...y!=null&&y.length&&gt(c)?{name:`${Ss(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:C})}return Mi(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function lrn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){U7e(r);for(const i of ct(r.component.legends))n.legend[i]=Voe(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=z7e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ct(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function z7e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of M7e){const c=pv(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return crn(f,d);case"title":return EBe(f,d);case"type":return i=!0,Mc("symbol")}return l9(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&WL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&WL(e.explicit,["encode","gradient"])),e}function crn(e,t){return t.value==="circle"?t:e}function frn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function V7e(e){const t=e.component.legends,n={};for(const i of ct(t)){const s=e.getScaleComponent(i),o=Fi(s.get("domains"));if(n[o])for(const a of n[o])z7e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ua(n).flat().map(i=>drn(i,e.config)).filter(i=>i!==void 0)}function drn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of M9e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Xt(s.encode.labels.update.text)&&(l=y_(r,"datum.label",s.encode.labels.update.text.signal)),frn(s,"labels","text",{signal:l})}return s}}function hrn(e){return CC(e)||Koe(e)?prn(e):H7e(e)}function prn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),H7e(e))}function H7e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Xt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Er(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const mrn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class q7e extends iy{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function W7e(e){e.component.projection=Hs(e)?grn(e):brn(e)}function grn(e){if(e.hasProjection){const t=Wl(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?yrn(e):void 0,s=new q7e(e.projectionName(!0),{...Wl(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function yrn(e){const t=[],{encoding:n}=e;for(const r of[[np,tp],[gd,rp]])(zo(n[r[0]])||zo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(wc)&&e.typedFieldDef(wc).type===_C&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(_s.Main)),t}function vrn(e,t){const n=Lse(mrn,i=>!!(!sn(e.explicit,i)&&!sn(t.explicit,i)||sn(e.explicit,i)&&sn(t.explicit,i)&&Jc(e.get(i),t.get(i))));if(Jc(e.size,t.size)){if(n)return e;if(Jc(e.explicit,{}))return t;if(Jc(t.explicit,{}))return e}return null}function brn(e){if(e.children.length===0)return;let t;for(const r of e.children)W7e(r);const n=Lse(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=vrn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new q7e(r,t.specifiedProjection,t.size,An(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function xrn(e,t,n,r){if(mD(t,n)){const i=Hs(e)?e.axis(n)??e.legend(n)??{}:{},s=St(t,{expr:"datum"}),o=St(t,{expr:"datum",binSuffix:"end"});return{formulaAs:St(t,{binSuffix:"range",forAs:!0}),formula:dD(s,o,i.format,i.formatType,r)}}return{}}function G7e(e,t){return`${mBe(e)}_${t}`}function _rn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Hoe(e,t,n){const r=r9(n,void 0)??{},i=G7e(r,t);return e.getName(`${i}_bins`)}function wrn(e){return"as"in e}function pxe(e,t,n){let r,i;wrn(e)?r=Nt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[St(e,{forAs:!0}),St(e,{binSuffix:"end",forAs:!0})];const s={...r9(t,void 0)},o=G7e(s,e.field),{signal:a,extentSignal:u}=_rn(n,o);if(WB(s.extent)){const c=s.extent;i=S7e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class im extends Ii{clone(){return new im(null,An(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(bl(s)&&Zi(s.bin)){const{key:a,binComponent:u}=pxe(s,s.bin,n);i[a]={...u,...i[a],...xrn(n,s,o,n.config)}}return i},{});return Mi(r)?null:new im(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=pxe(n,n.bin,r);return new im(t,{[i]:s})}merge(t,n){for(const r of ct(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=zp([...this.bins[r].as,...t.bins[r].as],wr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ua(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ua(this.bins).map(t=>t.field))}hash(){return`Bin ${wr(this.bins)}`}assemble(){return Ua(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:md(t.field),as:r,signal:t.signal,...WB(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:md(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:St({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Ern(e,t,n,r){var s;const i=Hs(r)?r.encoding[Vm(t)]:void 0;if(bl(n)&&Hs(r)&&u9e(n,i,r.markDef,r.config)){e.add(St(n,{})),e.add(St(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=hv({fieldDef:n,markDef:a,config:u});b3(o)&&l!==.5&&co(t)&&(e.add(St(n,{suffix:c9})),e.add(St(n,{suffix:f9}))),n.bin&&mD(n,t)&&e.add(St(n,{binSuffix:"range"}))}else if(sBe(t)){const o=iBe(t);e.add(r.getName(o))}else e.add(St(n));return yw(n)&&hZt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Trn(e,t){for(const n of ct(t)){const r=t[n];for(const i of ct(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ch extends Ii{clone(){return new Ch(null,new Set(this.dimensions),An(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([St(o,{forAs:!0})]);else{if(kg(u)||tb(u)){const c=kg(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([St({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([St(o,{forAs:!0})]);ny(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([St({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([St({field:l,aggregate:"max"},{forAs:!0})]))}else Ern(s,a,o,n)}),s.size+ct(i).length===0)?null:new Ch(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||St(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||St(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+ct(i).length===0?null:new Ch(t,r,i)}merge(t){return X8e(this.dimensions,t.dimensions)?(Trn(this.measures,t.measures),!0):(FJt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ct(this.measures)])}producedFields(){const t=new Set;for(const n of ct(this.measures))for(const r of ct(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${wr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of ct(this.measures))for(const o of ct(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:md(s));return{type:"aggregate",groupby:[...this.dimensions].map(md),ops:t,fields:n,as:r}}}class TC extends Ii{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of nd){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[St(o),...Zi(a)?[St(o,{binSuffix:"end"})]:[]],...nm(u)?{sortField:u}:Qe(u)?{sortIndexField:sS(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of nd)this[n]&&(t+=` ${n.charAt(0)}:${wr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of nd)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of nd)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Hm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ba(i)&&nb(s)){const o=g9(this.childModel,n),a=Yoe(o);a?t[n]=a:pt(Kse(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=ZB,field:f}=u;s.push(f),o.push(c),a.push(St(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of joe){for(const c of Uoe){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[tg,eg])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function mxe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Srn(e,t){const n=Bse(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=mxe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=mxe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return pt(GQt(t)),null}function Crn(e){const t={};return R6(e.filter,n=>{if(jBe(n)){let r=null;Zse(n)?r=qc(n.equal):toe(n)?r=qc(n.lte):eoe(n)?r=qc(n.lt):noe(n)?r=qc(n.gt):roe(n)?r=qc(n.gte):ioe(n)?r=n.range[0]:soe(n)&&(r=(n.oneOf??n.in)[0]),r&&(pw(r)?t[n.field]="date":Qr(r)?t[n.field]="number":Nt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Arn(e){const t={};function n(r){tS(r)?t[r.field]="date":r.type==="quantitative"&&TQt(r.aggregate)?t[r.field]="number":YT(r.field)>1?r.field in t||(t[r.field]="flatten"):yw(r)&&nm(r.sort)&&YT(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Hs(e)||sf(e))&&e.forEachFieldDef((r,i)=>{if(bl(r))n(r);else{const s=dw(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Hs(e)){const{mark:r,markDef:i,encoding:s}=e;if(gw(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];gt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Irn(e){const t={};if(Hs(e)&&e.component.selection)for(const n of ct(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&YT(i.field)>1&&(t[i.field]="flatten")}return t}class wu extends Ii{clone(){return new wu(null,An(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${wr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!k1(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of ct(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:pt(Sbe(a,r[a],u.value)))}for(const a of ct(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:pt(Sbe(a,n[a],u)))}const s=new iy(n,r);i.copyAll(s);const o={};for(const a of ct(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return ct(o).length===0||i.parseNothing?null:new wu(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ct(this._parse)){const r=this._parse[n];YT(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ct(this._parse))}dependentFields(){return new Set(ct(this._parse))}assembleTransforms(t=!1){return ct(this._parse).filter(n=>t?YT(n)>1:!0).map(n=>{const r=Srn(n,this._parse[n]);return r?{type:"formula",expr:r,as:bC(n)}:null}).filter(n=>n!==null)}}class yv extends Ii{clone(){return new yv(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([jh])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:jh}}}class vD extends Ii{clone(){return new vD(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${wr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class bD extends Ii{clone(){return new bD(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${wr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class S_ extends Ii{constructor(t){super(null),t??(t={name:"source"});let n;if(k1(t)||(n=t.format?{...cc(t.format,["parse"])}:{}),x3(t))this._data={values:t.values};else if(nS(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Er(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else t7e(t)?this._data={values:[{type:"Sphere"}]}:(Z9e(t)||k1(t))&&(this._data={});this._generator=k1(t),t.name&&(this._name=t.name),n&&!Mi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var gxe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},krn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},jI;function qoe(e){return e instanceof S_||e instanceof vD||e instanceof bD}class Woe{constructor(){jI.set(this,void 0),gxe(this,jI,!1,"f")}setModified(){gxe(this,jI,!0,"f")}get modifiedFlag(){return krn(this,jI,"f")}}jI=new WeakMap;class vw extends Woe{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Goe extends Woe{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Rrn extends Goe{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ct(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Prn extends Goe{constructor(t){super(),this.requiresSelectionId=t&&Boe(t)}run(t){t instanceof yv&&(this.requiresSelectionId&&(qoe(t.parent)||t.parent instanceof Ch||t.parent instanceof wu)||(this.setModified(),t.remove()))}}class Drn extends Woe{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof rm&&(r=t.producedFields(),Mse(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Nrn extends Goe{constructor(){super()}run(t){t instanceof dc&&!t.isRequired()&&(this.setModified(),t.remove())}}class Orn extends vw{run(t){if(!qoe(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof wu)if(t instanceof wu)this.setModified(),t.merge(n);else{if(Fse(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class $rn extends vw{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof wu);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of ct(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Mi(i)){this.setModified();const o=new wu(t,i);for(const a of n){if(a instanceof wu)for(const u of ct(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof wu&&ct(a.parse).length===0&&a.remove()}}}}}class Lrn extends vw{run(t){t instanceof dc||t.numChildren()>0||t instanceof TC||t instanceof S_||(this.setModified(),t.remove())}}class Mrn extends vw{run(t){const n=t.children.filter(i=>i instanceof rm),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Frn extends vw{run(t){const n=t.children.filter(i=>i instanceof Ch),r={};for(const i of n){const s=wr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of ct(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Brn extends vw{constructor(t){super(),this.model=t}run(t){const n=!(qoe(t)||t instanceof EC||t instanceof wu||t instanceof yv),r=[],i=[];for(const s of t.children)s instanceof im&&(n&&!Fse(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof im?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class jrn extends vw{run(t){const n=[...t.children];if(!g_(n,o=>o instanceof dc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof dc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof dc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class bw extends Ii{clone(){return new bw(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=zp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??St(t)}hash(){return`JoinAggregateTransform ${wr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Urn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=St(r);return i&&t.push(i),t},[])}function zrn(e){return Qe(e)&&e.every(t=>Nt(t))&&e.length>1}class rg extends Ii{clone(){return new rg(null,An(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(lo(f.order,"ascending"));const l={field:a,order:u};let c;return zrn(s)?c=s:Nt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new rg(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Em(p)}).filter(h=>!!h),c=Urn(n),f=n.encoding.order;let d;if(Qe(f)||gt(f))d=xBe(f);else{const h=l9e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new rg(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${wr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[St(i,{binSuffix:"mid"})]:[St(i,{}),St(i,{binSuffix:"end"})]:[St(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=St(c,{expr:"datum"}),p=St(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:St(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:St(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class SC extends Ii{clone(){return new SC(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=zp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??St(t)}hash(){return`WindowTransform ${wr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Gse(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Vrn(e){function t(n){if(!(n instanceof TC)){const r=n.clone();if(r instanceof dc){const i=SK+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ch||r instanceof rg||r instanceof SC||r instanceof bw)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function TK(e){if(e instanceof TC)if(e.numChildren()===1&&!(e.children[0]instanceof dc)){const t=e.children[0];(t instanceof Ch||t instanceof rg||t instanceof SC||t instanceof bw)&&t.addDimensions(e.fields),t.swapWithParent(),TK(e)}else{const t=e.model.component.data.main;Y7e(t);const n=Vrn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(TK)}function Y7e(e){if(e instanceof dc&&e.type===_s.Main&&e.numChildren()===1){const t=e.children[0];t instanceof TC||(t.swapWithParent(),Y7e(e))}}const SK="scale_",YO=5;function CK(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!CK(t.children))return!1}return!0}function Ud(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function yxe(e,t,n){let r=e.sources,i=!1;return i=Ud(new Nrn,r)||i,i=Ud(new Prn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Ud(new Lrn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Ud(new Orn,r)||i,i=Ud(new Brn(t),r)||i,i=Ud(new Drn,r)||i,i=Ud(new $rn,r)||i,i=Ud(new Frn,r)||i,i=Ud(new Mrn,r)||i,i=Ud(new Rrn,r)||i,i=Ud(new jrn,r)||i),e.sources=r,i}function Hrn(e,t){CK(e.sources);let n=0,r=0;for(let i=0;i<YO&&yxe(e,t,!0);i++)n++;e.sources.map(TK);for(let i=0;i<YO&&yxe(e,t,!1);i++)r++;CK(e.sources),Math.max(n,r)===YO&&pt(`Maximum optimization runs(${YO}) reached.`)}class aa{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new aa(()=>t(n))}}function K7e(e){Hs(e)?qrn(e):Wrn(e)}function qrn(e){const t=e.component.scales;for(const n of ct(t)){const r=Yrn(e,n);if(t[n].setWithExplicit("domains",r),Xrn(e,n),e.component.data.isFaceted){let s=e;for(;!sf(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)z0(a)&&(a.data=SK+a.data.replace(SK,""))}}}function Wrn(e){for(const n of e.children)K7e(n);const t=e.component.scales;for(const n of ct(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=pv(r,o.getWithExplicit("domains"),"domains","scale",AK);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&pt(VQt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Grn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=vxe(t,n);if(!i){pt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=vxe(t,n);if(i)return"unaggregated"}return e}function Yrn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Grn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&zo(r.x2)?zo(r.x)?pv(Iy(n,i,e,"x"),Iy(n,i,e,"x2"),"domain","scale",AK):Iy(n,i,e,"x2"):t==="y"&&zo(r.y2)?zo(r.y)?pv(Iy(n,i,e,"y"),Iy(n,i,e,"y2"),"domain","scale",AK):Iy(n,i,e,"y2"):Iy(n,i,e,t)}function Krn(e,t,n){return e.map(r=>({signal:`{data: ${i9(r,{timeUnit:n,type:t})}}`}))}function WV(e,t,n){var i;const r=(i=ga(n))==null?void 0:i.unit;return t==="temporal"||r?Krn(e,t,r):[e]}function Iy(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=zo(i[r]),{type:c}=l,f=l.timeUnit;if(dZt(t)){const p=Iy(e,void 0,n,r),m=WV(t.unionWith,c,f);return Ep([...m,...p.value])}else{if(Xt(t))return Ep([t]);if(t&&t!=="unaggregated"&&!GBe(t))return Ep(WV(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Mc([[0,1]]);const p=n.requestDataName(_s.Main);return Mc([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=ny(r)&&gt(l)?Qrn(n,r,e):void 0;if(qm(l)){const p=WV([l.datum],c,f);return Mc(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(_s.Main),{field:m}=l;return Mc([{data:p,field:St({field:m,aggregate:"min"})},{data:p,field:St({field:m,aggregate:"max"})}])}else if(Zi(h.bin)){if(ba(e))return Mc(e==="bin-ordinal"?[]:[{data:y3(d)?n.requestDataName(_s.Main):n.requestDataName(_s.Raw),field:n.vgField(r,mD(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!Ot(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Zi(p)){const m=Hoe(n,h.field,p);return Mc([new aa(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Mc([{data:n.requestDataName(_s.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Er(["time","utc"],e)){const p=i[Vm(r)];if(u9e(h,p,s,a)){const m=n.requestDataName(_s.Main),g=hv({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=b3(o)&&g!==.5&&co(r);return Mc([{data:m,field:n.vgField(r,y?{suffix:c9}:{})},{data:m,field:n.vgField(r,{suffix:y?f9:"end"})}])}}return Mc(d?[{data:y3(d)?n.requestDataName(_s.Main):n.requestDataName(_s.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(_s.Main),field:n.vgField(r)}])}function GV(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":ZB),...r?{field:md(r)}:{},...i?{order:i}:{}}}function Xrn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=GBe(r)&&r,o=hw(i)&&WB(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Qrn(e,t,n){if(!ba(n))return;const r=e.fieldDef(t),i=r.sort;if(o9e(i))return{op:"min",field:sS(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(nm(i)){const a=s&&!o.has(i.field);return GV(i,a)}else if(s9e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(kg(c)||tb(c))return GV({field:St(l),order:u},d);if(Gse(c)||!c)return GV({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Er(["ascending",void 0],i))return!0}}function vxe(e,t){const{aggregate:n,type:r}=e;return n?Nt(n)&&!CQt.has(n)?{valid:!1,reason:mJt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:gJt(e)}:{valid:!0}:{valid:!1,reason:pJt(e)}}function AK(e,t,n,r){return e.explicit&&t.explicit&&pt(_Jt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Jrn(e){const t=zp(e.map(o=>{if(z0(o)){const{sort:a,...u}=o;return u}return o}),wr),n=zp(e.map(o=>{if(z0(o)){const a=o.sort;return a!==void 0&&!y3(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),wr);if(t.length===0)return;if(t.length===1){const o=e[0];if(z0(o)&&n.length>0){let a=n[0];if(n.length>1){pt(Abe);const u=n.filter(l=>Ot(l)&&"op"in l&&l.op!=="min");n.every(l=>Ot(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ot(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=zp(n.map(o=>y3(o)||!("op"in o)||Nt(o.op)&&o.op in wQt?o:(pt(EJt(o)),!0)),wr);let i;r.length===1?i=r[0]:r.length>1&&(pt(Abe),i=!0);const s=zp(e.map(o=>z0(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Yoe(e){if(z0(e)&&Nt(e.field))return e.field;if(AQt(e)){let t;for(const n of e.fields)if(z0(n)&&Nt(n.field)){if(!t)t=n.field;else if(t!==n.field)return pt(TJt),t}return pt(SJt),t}else if(IQt(e)){pt(CJt);const t=e.fields[0];return Nt(t)?t:void 0}}function g9(e,t){const r=e.component.scales[t].get("domains").map(i=>(z0(i)&&(i.data=e.lookupDataSource(i.data)),i));return Jrn(r)}function X7e(e){return CC(e)||Koe(e)?e.children.reduce((t,n)=>t.concat(X7e(n)),bxe(e)):bxe(e)}function bxe(e){return ct(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Zrn(i.range,s,n,e),h=g9(e,n),p=a?Gtn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Zrn(e,t,n,r){if(co(n)){if(nb(e))return{step:{signal:`${t}_step`}}}else if(Ot(e)&&z0(e))return{...e,data:r.lookupDataSource(e.data)};return e}class Q7e extends iy{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:g_(this.get("domains"),t=>Qe(t)&&t.length===2&&Qr(t[0])&&t[0]<=0&&Qr(t[1])&&t[1]>=0)}}const ein=["range","scheme"];function tin(e){const t=e.component.scales;for(const n of qB){const r=t[n];if(!r)continue;const i=nin(n,e);r.setWithExplicit("range",i)}}function xxe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Ec(t),o=e.getName(s);if(Ot(r)&&r.binned&&r.step!==void 0)return new aa(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Zi(r)){const a=Hoe(e,i,r);return new aa(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function nin(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of ein)if(n[f]!==void 0){const d=fK(s,f),h=YBe(e,f);if(!d)pt(ABe(s,f,e));else if(h)pt(h);else switch(f){case"range":{const p=n.range;if(Qe(p)){if(co(e))return Ep(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return aa.fromName(y,g)}return m}))}else if(Ot(p))return Ep({data:t.requestDataName(_s.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ep(p)}case"scheme":return Ep(rin(n[f]))}}const o=e===Cs||e==="xOffset"?"width":"height",a=r[o];if(Tm(a)){if(co(e))if(ba(s)){const f=Z7e(a,t,e);if(f)return Ep({step:f})}else pt(IBe(o));else if(lD(e)){const f=e===Xv?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=eje(a,s);if(p)return Ep(p)}}}const{rangeMin:u,rangeMax:l}=n,c=iin(e,t);return(u!==void 0||l!==void 0)&&fK(s,"rangeMin")&&Qe(c)&&c.length===2?Ep([u??c[0],l??c[1]]):Mc(c)}function rin(e){return fZt(e)?{scheme:e.name,...cc(e,["name"])}:{scheme:e}}function J7e(e,t,n,{center:r}={}){const i=Ec(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===wa&&_f(n)?r?[aa.fromName(a=>`${o(a)}/2`,s),aa.fromName(a=>`-${o(a)}/2`,s)]:[aa.fromName(o,s),0]:r?[aa.fromName(a=>`-${o(a)}/2`,s),aa.fromName(a=>`${o(a)}/2`,s)]:[0,aa.fromName(o,s)]}function iin(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=zo(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Cs:case wa:{if(Er(["point","band"],u)){const f=tje(e,n,r.view);if(Tm(f))return{step:Z7e(f,t,e)}}return J7e(e,t,u)}case Xv:case xC:return sin(e,t,u);case ey:{const f=t.component.scales[e].get("zero"),d=nje(i,f,r),h=uin(i,n,t,r);return JT(u)?ain(d,h,oin(u,r,l,e)):[d,h]}case Ad:return[0,Math.PI*2];case fw:return[0,360];case ep:return[0,new aa(()=>{const f=t.getSignalName(sf(t.parent)?"child_width":"width"),d=t.getSignalName(sf(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Zv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case eb:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case wc:return"symbol";case _c:case Um:case zm:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ty:case Qv:case Jv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Z7e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Vse(n),o=r[s];if(B9e({step:e,offsetIsDiscrete:Ln(o)&&zBe(o.type)})==="offset"&&x9e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${DQt(f)})`}}else return e.step}function eje(e,t){if(B9e({step:e,offsetIsDiscrete:ba(t)})==="offset")return{step:e.step}}function sin(e,t,n){const r=e===Xv?"x":"y",i=t.getScaleComponent(r);if(!i)return J7e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=tje(r,t.size,t.config.view);if(Tm(l)){const c=eje(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(gt(l)&&l.timeUnit){const c=FBe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=hv({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Xt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Xt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return Y8e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function tje(e,t,n){const r=e===Cs?"width":"height",i=t[r];return i||rM(n,r)}function oin(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Qe(n)?n.length+1:(pt($Jt(r)),3)}}function ain(e,t,n){const r=()=>{const i=yh(t),s=yh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Xt(t)?new aa(r):{signal:r()}}function nje(e,t,n){if(t)return Xt(t)?{signal:`${t.signal} ? 0 : ${nje(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(GB("size",e))}const _xe=.95;function uin(e,t,n,r){const i={x:xxe(n,"x"),y:xxe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=wxe(t,i,r.view);return Qr(s)?s-1:new aa(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=wxe(t,i,r.view);return Qr(s)?Math.pow(_xe*s,2):new aa(()=>`pow(${_xe} * ${s.signal}, 2)`)}}throw new Error(GB("size",e))}function wxe(e,t,n){const r=Tm(e.width)?e.width.step:nM(n,"width"),i=Tm(e.height)?e.height.step:nM(n,"height");return t.x||t.y?new aa(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function rje(e,t){Hs(e)?lin(e,t):sje(e,t)}function lin(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of ct(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=zo(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=fK(h,t),y=YBe(a,t);if(d!==void 0&&(g?y&&pt(y):pt(ABe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":pw(u[t])||b==="temporal"||v?l.set(t,{signal:i9(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Exe?Exe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:_9e(i,a),hasSecondaryRangeChannel:!!i[Vm(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Exe={bins:({model:e,fieldOrDatumDef:t})=>gt(t)?cin(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>fin(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>din(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>hin(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>pin(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>min(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=gt(e)?e.sort:void 0;return gin(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>yin(e,t,n,r,i,s.scale,o)};function ije(e){Hs(e)?tin(e):sje(e,"range")}function sje(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?ije(r):rje(r,t);for(const r of ct(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=pv(i,a,t,"scale",J9e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function cin(e,t){const n=t.bin;if(Zi(n)){const r=Hoe(e,t.field,n);return new aa(()=>e.getSignalName(r))}else if(Da(n)&&hw(n)&&n.step!==void 0)return{step:n.step}}function fin(e,t){if(Er([_c,Um,zm],e)&&t!=="nominal")return"hcl"}function din(e,t,n,r,i,s){var o;if(!((o=Em(s))!=null&&o.bin||Qe(n)||i!=null||r!=null||Er([fc.TIME,fc.UTC],e)))return co(t)?!0:void 0}function hin(e,t,n,r,i,s){if(co(e)){if(vh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(gt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===fc.POINT)return n.pointPadding}}function pin(e,t,n,r,i,s=!1){if(e===void 0){if(co(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:lo(o,n==="bar"?a:u)}else if(lD(t)&&r===fc.BAND)return i.offsetBandPaddingInner}}function min(e,t,n,r,i,s=!1){if(e===void 0){if(co(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===fc.BAND)return lo(o,Xt(r)?{signal:`${r.signal}/2`}:r/2)}else if(lD(t)){if(n===fc.POINT)return .5;if(n===fc.BAND)return i.offsetBandPaddingOuter}}}function gin(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return _f(e)&&t==="descending"?Xt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(_f(e)&&t==="descending")return!0}function yin(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&_f(i)){if(Qe(n)){const u=n[0],l=n[n.length-1];if(Qr(u)&&u<=0&&Qr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!JT(i))return!0;if(!(gt(t)&&t.bin)&&Er([...Hm,...pQt],e)){const{orient:u,type:l}=r;return Er(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Er(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function vin(e,t,n,r,i=!1){const s=bin(t,n,r,i),{type:o}=e;return ny(t)?o!==void 0?vZt(t,o)?gt(n)&&!yZt(o,n.type)?(pt(bJt(o,s)),s):o:(pt(vJt(t,o,s)),s):s:null}function bin(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(M2(e)||FV(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&pt(BV(e,"ordinal")),"ordinal";if(co(e)||lD(e)){if(Er(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Wse)return"band";const s=n[Ec(e)];return w_(s)||eS(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return M2(e)?"time":FV(e)==="discrete"?(pt(BV(e,"temporal")),"ordinal"):gt(t)&&t.timeUnit&&ga(t.timeUnit).utc?"utc":"time";case"quantitative":return M2(e)?gt(t)&&Zi(t.bin)?"bin-ordinal":"linear":FV(e)==="discrete"?(pt(BV(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(SBe(t.type))}function xin(e,{ignoreRange:t}={}){oje(e),K7e(e);for(const n of gZt)rje(e,n);t||ije(e)}function oje(e){Hs(e)?e.component.scales=_in(e):e.component.scales=Ein(e)}function _in(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of qB){const o=zo(t[s]);if(o&&n===n9e&&s===wc&&o.type===_C)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=_9e(t,s),l=vin(a,s,o,r,u);i[s]=new Q7e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const win=J9e((e,t)=>kbe(e)-kbe(t));function Ein(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){oje(s);for(const o of ct(s.component.scales))if((t=i.scale)[o]??(t[o]=L7e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?oZt(a.value,u.value)?r[o]=pv(a,u,"type","scale",win):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of ct(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new Q7e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class YV{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Hs(e){return(e==null?void 0:e.type)==="unit"}function sf(e){return(e==null?void 0:e.type)==="facet"}function Koe(e){return(e==null?void 0:e.type)==="concat"}function CC(e){return(e==null?void 0:e.type)==="layer"}class Xoe{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Wl(a),this.name=t.name??i,this.title=Fy(t.title)?{text:t.title}:t.title?Wl(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new YV,this.projectionNameMap=r?r.projectionNameMap:new YV,this.signalNameMap=r?r.signalNameMap:new YV,this.data=t.data,this.description=t.description,this.transforms=Rtn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Oen(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:e9(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new iy,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?An(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){xin(this)}parseProjection(){W7e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){U7e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of ct(r)){const o=r[s];o!==void 0&&(i[s]=us(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=us(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Mi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Hnn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of nd)t[r].title&&n.push(Fnn(this,r));for(const r of joe)n=n.concat(Bnn(this,r));return n}assembleAxes(){return Snn(this.component.axes,this.config)}assembleLegends(){return V7e(this)}assembleProjections(){return hrn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...gBe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Er(["unit","layer"],this.type)?Er(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Mi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||sf(this.parent)?X7e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ss((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(_s[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(sf(this.parent)){const n=O7e(t),r=HB(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ba(s)&&nb(o)){const a=i.get("name"),u=g9(this,r),l=Yoe(u);if(l){const c=St({aggregate:"distinct",field:l},{expr:"datum"});return{signal:N7e(a,i,c)}}else return pt(Kse(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(aBe(t)&&ny(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(MQt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class aje extends Xoe{vgField(t,n={}){const r=this.fieldDef(t);if(r)return St(r,n)}reduceFieldDef(t,n){return len(this.getMapping(),(r,i,s)=>{const o=Em(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){woe(this.getMapping(),(r,i)=>{const s=Em(r);s&&t(s,i)},n)}}class y9 extends Ii{clone(){return new y9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${wr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class v9 extends Ii{clone(){return new v9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${wr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class _3 extends Ii{clone(){return new _3(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(hi("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=ny(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");_f(d)&&l.aggregate!=="count"&&!gw(i)&&(u[l.field]=l)}return u},{});return ct(a).length?new _3(t,a):null}dependentFields(){return new Set(ct(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${wr(this.filter)}`}assemble(){const t=ct(this.filter).reduce((n,r)=>{const i=this.filter[r],s=St(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class b9 extends Ii{clone(){return new b9(this.parent,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${wr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class x9 extends Ii{clone(){return new x9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${wr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class j2 extends Ii{clone(){return new j2(null,An(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[np,tp],[gd,rp]]){const s=i.map(o=>{const a=zo(n.encoding[o]);return gt(a)?a.field:qm(a)?{expr:`${a.datum}`}:Bh(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new j2(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(wc)){const i=n.typedFieldDef(wc);i.type===_C&&(t=new j2(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Nt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${wr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class w3 extends Ii{clone(){return new w3(null,this.projection,An(this.fields),An(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[np,tp],[gd,rp]]){const i=r.map(o=>{const a=zo(n.encoding[o]);return gt(a)?a.field:qm(a)?{expr:`${a.datum}`}:Bh(a)?{expr:`${a.value}`}:void 0}),s=r[0]===gd?"2":"";(i[0]||i[1])&&(t=new w3(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Nt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${wr(this.fields)} ${wr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class zx extends Ii{clone(){return new zx(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new zx(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(gt(i)&&gt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=E9e(n.mark,r);return new zx(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${wr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:ftn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class _9 extends Ii{clone(){return new _9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${wr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class E3 extends Ii{clone(){return new E3(null,An(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(dtn(o)){let u=cje(o.data,s);u||(u=new S_(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new dc(u,l,_s.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(htn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ss(u),u)}catch{throw new Error(UQt(u))}if(a=l.materialized,!a)throw new Error(zQt(u))}return new E3(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Dt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${wr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Dt(this.transform.as)}:{}};else{let n=this.transform.as;Nt(n)||(pt(XQt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class w9 extends Ii{clone(){return new w9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${wr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class E9 extends Ii{clone(){return new E9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${wr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class T9 extends Ii{clone(){return new T9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=zp((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${wr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class S9 extends Ii{clone(){return new S9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${wr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function uje(e){let t=0;function n(r,i){if(r instanceof S_&&!r.isGenerator&&!nS(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof wu&&(r.parent instanceof S_&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof TC){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof vD||r instanceof bD||r instanceof _3||r instanceof EC||r instanceof iS||r instanceof w3||r instanceof Ch||r instanceof E3||r instanceof SC||r instanceof bw||r instanceof x9||r instanceof b9||r instanceof y9||r instanceof _9||r instanceof w9||r instanceof E9||r instanceof yv||r instanceof S9||r instanceof T9||r instanceof v9)&&i.transform.push(r.assemble()),(r instanceof im||r instanceof rm||r instanceof zx||r instanceof rg||r instanceof j2)&&i.transform.push(...r.assemble()),r instanceof dc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof dc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof dc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Tin(e){const t=[],n=uje(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Sin(e,t){const n=[],r=uje(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Cin(e){return e==="top"||e==="left"||Xt(e)?"header":"footer"}function Ain(e){for(const t of nd)Iin(e,t);Txe(e,"x"),Txe(e,"y")}function Iin(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=oS("title",null,r,t);let l=F2(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Qe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=oS("labelOrient",a.header,r,t),f=a.header!==null?lo((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Er(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[lje(e,t,f)]}}}function lje(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Txe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Voe(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Cin(a.get("orient"));o[u]??(o[u]=[lje(e,s,!1)]);const l=BI(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function kin(e){Qoe(e),aM(e,"width"),aM(e,"height")}function Rin(e){Qoe(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";aM(e,t),aM(e,n)}function Qoe(e){for(const t of e.children)t.parseLayoutSize()}function aM(e,t){const n=O7e(t),r=HB(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??L7e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=pv(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Pin(e){const{size:t,component:n}=e;for(const r of Hm){const i=Ec(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Tm(s)?"step":s,!0)}else{const s=Din(e,i);n.layoutSize.set(i,s,!1)}}}function Din(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ba(s)){const a=rM(r.view,t);return nb(o)||Tm(a)?"step":a}else return pK(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return pK(r.view,t);{const s=rM(r.view,t);return Tm(s)?s.step:s}}}function IK(e,t,n){return St(t,{suffix:`by_${St(e)}`,...n})}class Dk extends aje{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=nae(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!hD(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ct(t),r={};for(const i of n){if(![eg,tg].includes(i)){pt(GB(i,"facet"));break}const s=t[i];if(s.field===void 0){pt(lK(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=xoe(t,n);return r.header?r.header=Wl(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=C9(this),this.child.parseData()}parseLayoutSize(){Qoe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Ain(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of nd)for(const r of Uoe){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=oS("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=p9(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Dk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Dk?{...this.channelHasField("column")?{encode:{update:{columns:{field:St(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Dk){if(this.child.channelHasField("column")){const i=St(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Hm){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ba(o)&&nb(a)){const u=g9(this.child,i),l=Yoe(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):pt(Kse(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of nd){const f=this.facet[c];if(f){u.push(St(f));const{bin:d,sort:h}=f;if(Zi(d)&&u.push(St(f,{binSuffix:"end"})),nm(h)){const{field:p,op:m=ZB}=h,g=IK(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Qe(h)){const p=sS(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?nm(r.sort)?[IK(r,r.sort,{expr:"datum"})]:Qe(r.sort)?[sS(r,t,{expr:"datum"})]:[St(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(nm(i)?i.order:!Qe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return wK(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of joe)if(t[s]){const o=oS("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return wK(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Tin(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:nd.map(u=>this.facetSortFields(u)).flat(),order:nd.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Vtn(this,[]))}]}getMapping(){return this.facet}}function Nin(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(nm(s.sort)){const{field:o,op:a=ZB}=s.sort;e=i=new bw(e,{joinaggregate:[{op:a,field:o,as:IK(s,s.sort,{forAs:!0})}],groupby:[St(s)]})}return i}return null}function cje(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(x3(e)&&x3(a)){if(Jc(e.values,a.values))return o}else if(nS(e)&&nS(a)){if(e.url===a.url)return o}else if(Z9e(e)&&e.name===o.dataName)return o}}return null}function Oin(e,t){if(e.data||!e.parent){if(e.data===null){const r=new S_({values:[]});return t.push(r),r}const n=cje(e.data,t);if(n)return k1(e.data)||(n.data.format=K8e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new S_(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function $in(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Etn(i))o=e=new iS(e,i),s="derived";else if(Noe(i)){const a=Crn(i);o=e=wu.makeWithAncestors(e,{},a,n)??e,e=new EC(e,t,i.filter)}else if(Y9e(i))o=e=im.makeFromTransform(e,i,t),s="number";else if(Stn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new wu(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=rm.makeFromTransform(e,i);else if(Ctn(i))o=e=Ch.makeFromTransform(e,i),s="number",Boe(t)&&(e=new yv(e));else if(G9e(i))o=e=E3.make(e,t,i,r++),s="derived";else if(xtn(i))o=e=new SC(e,i),s="number";else if(_tn(i))o=e=new bw(e,i),s="number";else if(Atn(i))o=e=rg.makeFromTransform(e,i),s="derived";else if(Itn(i))o=e=new x9(e,i),s="derived";else if(ktn(i))o=e=new v9(e,i),s="derived";else if(wtn(i))o=e=new b9(e,i),s="derived";else if(ptn(i))o=e=new T9(e,i),s="derived";else if(btn(i))e=new S9(e,i);else if(Ttn(i))o=e=zx.makeFromTransform(e,i),s="derived";else if(mtn(i))o=e=new y9(e,i),s="derived";else if(gtn(i))o=e=new w9(e,i),s="derived";else if(ytn(i))o=e=new E9(e,i),s="derived";else if(vtn(i))o=e=new _9(e,i),s="derived";else{pt(KQt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function C9(e){var h;let t=Oin(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(k1(i)||nS(i)||x3(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Utn;k1(i)?(e7e(i)?t=new bD(t,i.sequence):Ooe(i)&&(t=new vD(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=wu.makeExplicit(t,e,o)??t,t=new yv(t);const a=e.parent&&CC(e.parent);(Hs(e)||sf(e))&&a&&(t=im.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=$in(t,e,o));const u=Irn(e),l=Arn(e);t=wu.makeWithAncestors(t,{},{...u,...l},o)??t,Hs(e)&&(t=j2.parseAll(t,e),t=w3.parseAll(t,e)),(Hs(e)||sf(e))&&(a||(t=im.makeFromEncoding(t,e)??t),t=rm.makeFromEncoding(t,e)??t,t=iS.parseAllForSortIndex(t,e));const c=t=Sxe(_s.Raw,e,t);if(Hs(e)){const p=Ch.makeFromEncoding(t,e);p&&(t=p,Boe(e)&&(t=new yv(t))),t=zx.makeFromEncoding(t,e)??t,t=rg.makeFromEncoding(t,e)??t}Hs(e)&&(t=_3.make(t,e)??t);const f=t=Sxe(_s.Main,e,t);Hs(e)&&Enn(e,f);let d=null;if(sf(e)){const p=e.getName("facet");t=Nin(t,e.facet)??t,d=new TC(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Sxe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new dc(n,s,e,i);return r[s]=o,o}class Lin extends Xoe{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&pt(WQt),this.children=this.getChildren(t).map((l,c)=>nae(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=C9(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ct(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return a9(t)?t.vconcat:Poe(t)?t.hconcat:t.concat}parseLayoutSize(){Rin(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=zoe(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Min(e){return e===!1||e===null}const Fin={disable:1,gridScale:1,scale:1,...v9e,labelExpr:1,encode:1},fje=ct(Fin);class Joe extends iy{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Joe(An(this.explicit),An(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Min(this.get(t))}hasOrientSignalRef(){return Xt(this.explicit.orient)}}function Bin(e,t,n){const{encoding:r,config:i}=e,s=zo(r[t])??zo(r[Vm(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(__(u))return{text:bh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(ZT(s)==="quantitative"){if(eS(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:bh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:bh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(ZT(s)==="temporal"&&i.timeFormatType&&gt(s)&&!s.timeUnit)return{text:bh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function jin(e){return Hm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Gin(n,e)]),t),{})}const Uin={bottom:"top",top:"bottom",left:"right",right:"left"};function zin(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of ct(i.component.axes))n.axis[s]=Voe(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Vin(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Hm){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Xt(a)){if(r[a]>0&&!u){const l=Uin[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Vin(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Hin(i,s)}}}else return t.map(n=>n.clone());return e}function Hin(e,t){for(const n of fje){const r=pv(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return EBe(i,s);case"gridScale":return{explicit:i.explicit,value:lo(i.value,s.value)}}return l9(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function qin(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Xt(n.labelAngle)?n.labelAngle:v3(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===k7e(r,i))return!0}return e===n[t]}const Win=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Gin(e,t){var y,v;let n=t.axis(e);const r=new Joe,i=zo(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Nnn(e),u=t.getScaleComponent(e).get("type"),l=Cnn(e,u,a,t.config),c=n!==void 0?!n:xK("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=Rnn(i,n,e,o.style,l),d=JBe(n.formatType,i,u),h=QBe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of fje){const _=b in lxe?lxe[b](p):Lbe(b)?n[b]:void 0,E=_!==void 0,S=qin(_,b,n,t,e);if(E&&S)r.set(b,_,S);else{const{configValue:C=void 0,configFrom:A=void 0}=Lbe(b)&&b!=="values"?xK(b,o.style,n.style,l):{},R=C!==void 0;E&&!R?r.set(b,_,S):(A!=="vgAxisConfig"||Win.has(b)&&R||gD(C)||Xt(C))&&r.set(b,C,!1)}}const m=n.encoding??{},g=y9e.reduce((b,_)=>{if(!r.hasAxisPart(_))return b;const E=$7e(m[_]??{},t),S=_==="labels"?Bin(t,e,E):E;return S!==void 0&&!Mi(S)&&(b[_]={update:S}),b},{});return Mi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Yin({encoding:e,size:t}){for(const n of Hm){const r=Ec(n);Tm(t[r])&&u1(e[n])&&(delete t[r],pt(IBe(r)))}return t}const Kin={vgMark:"arc",encodeEntry:e=>({...Id(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),..._u("x",e,{defaultPos:"mid"}),..._u("y",e,{defaultPos:"mid"}),...mv(e,"radius"),...mv(e,"theta")})},Xin={vgMark:"area",encodeEntry:e=>({...Id(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...iM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...iM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Foe(e)})},Qin={vgMark:"rect",encodeEntry:e=>({...Id(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...mv(e,"x"),...mv(e,"y")})},Jin={vgMark:"shape",encodeEntry:e=>({...Id(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&gt(n)&&n.type===_C?{field:St(n,{expr:"datum"})}:{}}]}},Zin={vgMark:"image",encodeEntry:e=>({...Id(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...mv(e,"x"),...mv(e,"y"),...Loe(e,"url")})},esn={vgMark:"line",encodeEntry:e=>({...Id(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),..._u("x",e,{defaultPos:"mid"}),..._u("y",e,{defaultPos:"mid"}),...la("size",e,{vgChannel:"strokeWidth"}),...Foe(e)})},tsn={vgMark:"trail",encodeEntry:e=>({...Id(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),..._u("x",e,{defaultPos:"mid"}),..._u("y",e,{defaultPos:"mid"}),...la("size",e),...Foe(e)})};function Zoe(e,t){const{config:n}=e;return{...Id(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),..._u("x",e,{defaultPos:"mid"}),..._u("y",e,{defaultPos:"mid"}),...la("size",e),...la("angle",e),...nsn(e,n,t)}}function nsn(e,t,n){return n?{shape:{value:n}}:la("shape",e)}const rsn={vgMark:"symbol",encodeEntry:e=>Zoe(e)},isn={vgMark:"symbol",encodeEntry:e=>Zoe(e,"circle")},ssn={vgMark:"symbol",encodeEntry:e=>Zoe(e,"square")},osn={vgMark:"rect",encodeEntry:e=>({...Id(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...mv(e,"x"),...mv(e,"y")})},asn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Id(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...iM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...iM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...la("size",e,{vgChannel:"strokeWidth"})}}},usn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Id(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),..._u("x",e,{defaultPos:"mid"}),..._u("y",e,{defaultPos:"mid"}),...Loe(e),...la("size",e,{vgChannel:"fontSize"}),...la("angle",e),...sxe("align",lsn(e.markDef,n,t)),...sxe("baseline",csn(e.markDef,n,t)),..._u("radius",e,{defaultPos:null}),..._u("theta",e,{defaultPos:null})}}};function lsn(e,t,n){if(hi("align",e,n)===void 0)return"center"}function csn(e,t,n){if(hi("baseline",e,n)===void 0)return"middle"}const fsn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Id(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),..._u("x",e,{defaultPos:"mid",vgChannel:"xc"}),..._u("y",e,{defaultPos:"mid",vgChannel:"yc"}),...la("size",e,{defaultValue:dsn(e),vgChannel:i}),[s]:us(hi("thickness",n,t))}}};function dsn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=hi("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&nb(a)&&Qr(a.step)?a.step*3/4:nM(t.view,i)*3/4}}const KO={arc:Kin,area:Xin,bar:Qin,circle:isn,geoshape:Jin,image:Zin,line:esn,point:rsn,rect:osn,rule:asn,square:ssn,text:usn,tick:fsn,trail:tsn};function hsn(e){if(Er([QB,KB,IZt],e.mark)){const t=E9e(e.mark,e.encoding);if(t.length>0)return psn(e,t)}else if(e.mark===XB){const t=uK.some(n=>hi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return msn(e)}return eae(e)}const Cxe="faceted_path_";function psn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Cxe+e.requestDataName(_s.Main),data:e.requestDataName(_s.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:eae(e,{fromPrefix:Cxe})}]}const Axe="stack_group_";function msn(e){var l;const[t]=eae(e,{fromPrefix:Axe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...GT(t.encode.update,["y","yc","y2","height",...uK]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...cc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...GT(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...cc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of uK){const f=Rg(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=us(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=St(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(St(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Rg(f,e.markDef,e.config);return d!==void 0?{...c,[f]:us(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(_s.Main),name:Axe+e.requestDataName(_s.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function gsn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Qe(o)&&Bh(o)&&oK(o.value)||!o&&oK(hi("order",i,s)))){if((Qe(o)||gt(o))&&!n)return xBe(o,{expr:"datum"});if(gw(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(gt(l)){const c=l.sort;if(Qe(c))return{field:St(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(nm(c))return{field:St({aggregate:_oe(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(s9e(c)){const f=e.fieldDef(c.encoding);return{field:St(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:St(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function eae(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=lo(r.clip,ysn(e),vsn(e)),a=vBe(r),u=i.key,l=gsn(e),c=bsn(e),f=hi("aria",r,s),d=KO[n].postEncodingTransform?KO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:KO[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(_s.Main)},encode:{update:KO[n].encodeEntry(e)},...d?{transform:d}:{}}]}function ysn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function vsn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function bsn(e){if(!e.component.selection)return null;const t=ct(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ct(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class dje extends aje{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Fbe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=wm(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=rtn(o,s,{graticule:t.data&&Ooe(t.data)}));const u=this.encoding=aen(t.encoding||{},a,o.filled,s);this.markDef=H9e(o,u,s),this.size=Yin({encoding:u,size:Fbe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=V9e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>koe(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===n9e,r=t&&sQt.some(i=>Ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return qB.reduce((r,i)=>{const s=zo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Wl(t);return Qe(n)&&(i.domain=n.map(qc)),Qe(r)&&(i.range=r.map(qc)),i}initAxes(t){return Hm.reduce((n,r)=>{const i=t[r];if(Ln(i)||r===Cs&&Ln(t.x2)||r===wa&&Ln(t.y2)){const s=Ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=ct(t),r={};for(const i of n){const s=t[i];r[i]=gD(s)?yBe(s):qc(s)}return r}initLegends(t){return mQt.reduce((n,r)=>{const i=zo(t[r]);if(i&&yQt(r)){const s=i.legend;n[r]=s&&Wl(s)}return n},{})}parseData(){this.component.data=C9(this)}parseLayoutSize(){Pin(this)}parseSelections(){this.component.selection=wnn(this,this.selection)}parseMarkGroup(){this.component.mark=hsn(this)}parseAxesAndHeaders(){this.component.axes=jin(this)}assembleSelectionTopLevelSignals(t){return Htn(this,t)}assembleSignals(){return[...C7e(this),...ztn(this,[])]}assembleSelectionData(t){return qtn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return zoe(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!CC(this.parent))&&(t=r7e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return jx(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Em(n)}typedFieldDef(t){const n=this.fieldDef(t);return bl(n)?n:null}}class tae extends Xoe{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(u9(a))return new tae(a,this,this.getName(`layer_${u}`),o,s);if(ry(a))return new dje(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Yse(a))})}parseData(){this.component.data=C9(this);for(const t of this.children)t.parseData()}parseLayoutSize(){kin(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ct(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){zin(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),C7e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),zoe(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Dt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Wtn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),V7e(this))}}function nae(e,t,n,r,i){if(e9(e))return new Dk(e,t,n,i);if(u9(e))return new tae(e,t,n,r,i);if(ry(e))return new dje(e,t,n,r,i);if(Pen(e))return new Lin(e,t,n,i);throw new Error(Yse(e))}function xsn(e,t={}){t.logger&&LJt(t.logger),t.fieldTitle&&p9e(t.fieldTitle);try{const n=z9e(uC(t.config,e.config)),r=Q9e(e,n),i=nae(r,null,"",void 0,n);return i.parse(),Hrn(i.component.data,i),{spec:wsn(i,_sn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&MJt(),t.fieldTitle&&JZt()}}function _sn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Nt(t)&&(t={type:t}),i&&s&&Ftn(t.type)){if(i==="step"&&s==="step")pt(wbe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";pt(wbe(HB(o)));const a=o==="width"?"height":"width";t.type=Btn(a)}}return{...ct(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Xbe(n,!1),...Xbe(e,!0)}}function wsn(e,t,n={},r){const i=e.config?qen(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Sin(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...F9e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Esn=ZXt.version,Tsn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:YT,accessPathWithDatum:Bse,compile:xsn,contains:Er,deepEqual:Jc,deleteNestedProperty:WL,duplicate:An,entries:fv,every:Lse,fieldIntersection:Fse,flatAccessWithDatum:Q8e,getFirstDefined:lo,hasIntersection:Mse,hash:wr,internalField:eBe,isBoolean:y3,isEmpty:Mi,isEqual:tQt,isInternalField:tBe,isNullOrFalse:oK,isNumeric:FB,keys:ct,logicalExpr:Rk,mergeDeep:K8e,never:Y8e,normalize:Q9e,normalizeAngle:v3,omit:cc,pick:GT,prefixGenerator:aK,removePathFromField:bC,replaceAll:y_,replacePathInField:md,resetIdCounter:rQt,setEqual:X8e,some:g_,stringify:Fi,titleCase:oD,unique:zp,uniqueId:Z8e,vals:Ua,varName:Ss,version:Esn},Symbol.toStringTag,{value:"Module"}));function hje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Ssn="vega-themes",Csn="2.15.0",Asn="Themes for stylized Vega and Vega-Lite visualizations.",Isn=["vega","vega-lite","themes","style"],ksn="BSD-3-Clause",Rsn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Psn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Dsn="build/vega-themes.js",rae="build/vega-themes.module.js",Nsn="build/vega-themes.min.js",Osn="build/vega-themes.min.js",$sn="build/vega-themes.module.d.ts",Lsn={type:"git",url:"https://github.com/vega/vega-themes.git"},Msn=["src","build"],Fsn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Bsn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},jsn={vega:"*","vega-lite":"*"},Usn={},zsn={name:Ssn,version:Csn,description:Asn,keywords:Isn,license:ksn,author:Rsn,contributors:Psn,main:Dsn,module:rae,unpkg:Nsn,jsdelivr:Osn,types:$sn,repository:Lsn,files:Msn,scripts:Fsn,devDependencies:Bsn,peerDependencies:jsn,dependencies:Usn};const pE="#fff",Ixe="#888",Vsn={background:"#333",view:{stroke:Ixe},title:{color:pE,subtitleColor:pE},style:{"guide-label":{fill:pE},"guide-title":{fill:pE}},axis:{domainColor:pE,gridColor:Ixe,tickColor:pE}},Sb="#4572a7",Hsn={background:"#fff",arc:{fill:Sb},area:{fill:Sb},line:{stroke:Sb,strokeWidth:2},path:{stroke:Sb},rect:{fill:Sb},shape:{stroke:Sb},symbol:{fill:Sb,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Cb="#30a2da",KV="#cbcbcb",qsn="#999",Wsn="#333",kxe="#f0f0f0",Rxe="#333",Gsn={arc:{fill:Cb},area:{fill:Cb},axis:{domainColor:KV,grid:!0,gridColor:KV,gridWidth:1,labelColor:qsn,labelFontSize:10,titleColor:Wsn,tickColor:KV,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:kxe,group:{fill:kxe},legend:{labelColor:Rxe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Rxe,titleFontSize:14,titlePadding:10},line:{stroke:Cb,strokeWidth:2},path:{stroke:Cb,strokeWidth:.5},rect:{fill:Cb},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Cb},bar:{binSpacing:2,fill:Cb,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Ab="#000",Ysn={group:{fill:"#e5e5e5"},arc:{fill:Ab},area:{fill:Ab},line:{stroke:Ab},path:{stroke:Ab},rect:{fill:Ab},shape:{stroke:Ab},symbol:{fill:Ab,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Ksn=22,Xsn="normal",Pxe="Benton Gothic, sans-serif",Dxe=11.5,Qsn="normal",Ib="#82c6df",XV="Benton Gothic Bold, sans-serif",Nxe="normal",Oxe=13,VA={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Jsn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:XV,fontSize:Ksn,fontWeight:Xsn},arc:{fill:Ib},area:{fill:Ib},line:{stroke:Ib,strokeWidth:2},path:{stroke:Ib},rect:{fill:Ib},shape:{stroke:Ib},symbol:{fill:Ib,size:30},axis:{labelFont:Pxe,labelFontSize:Dxe,labelFontWeight:Qsn,titleFont:XV,titleFontSize:Oxe,titleFontWeight:Nxe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Pxe,labelFontSize:Dxe,symbolType:"square",titleFont:XV,titleFontSize:Oxe,titleFontWeight:Nxe},range:{category:VA["category-6"],diverging:VA["fireandice-6"],heatmap:VA["fire-7"],ordinal:VA["fire-7"],ramp:VA["fire-7"]}},kb="#ab5787",XO="#979797",Zsn={background:"#f9f9f9",arc:{fill:kb},area:{fill:kb},line:{stroke:kb},path:{stroke:kb},rect:{fill:kb},shape:{stroke:kb},symbol:{fill:kb,size:30},axis:{domainColor:XO,domainWidth:.5,gridWidth:.2,labelColor:XO,tickColor:XO,tickWidth:.2,titleColor:XO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Rb="#3e5c69",eon={background:"#fff",arc:{fill:Rb},area:{fill:Rb},line:{stroke:Rb},path:{stroke:Rb},rect:{fill:Rb},shape:{stroke:Rb},symbol:{fill:Rb},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Bf="#1696d2",$xe="#000000",ton="#FFFFFF",QO="Lato",QV="Lato",non="Lato",ron="#DEDDDD",ion=18,HA={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},son={background:ton,title:{anchor:"start",fontSize:ion,font:QO},axisX:{domain:!0,domainColor:$xe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:QV,labelAngle:0,tickColor:$xe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:QO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:ron,gridWidth:1,labelFontSize:12,labelFont:QV,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:QO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:QV,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:QO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:HA["six-groups-cat-1"],diverging:HA["diverging-colors"],heatmap:HA["diverging-colors"],ordinal:HA["six-groups-seq"],ramp:HA["shades-blue"]},area:{fill:Bf},rect:{fill:Bf},line:{color:Bf,stroke:Bf,strokeWidth:5},trail:{color:Bf,stroke:Bf,strokeWidth:0,size:1},path:{stroke:Bf,strokeWidth:.5},point:{filled:!0},text:{font:non,color:Bf,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Bf,stroke:null}},arc:{fill:Bf},shape:{stroke:Bf},symbol:{fill:Bf,size:30}},Pb="#3366CC",Lxe="#ccc",JO="Arial, sans-serif",oon={arc:{fill:Pb},area:{fill:Pb},path:{stroke:Pb},rect:{fill:Pb},shape:{stroke:Pb},symbol:{stroke:Pb},circle:{fill:Pb},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:JO,fontSize:12},"guide-title":{font:JO,fontSize:12},"group-title":{font:JO,fontSize:12}},title:{font:JO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Lxe,tickColor:Lxe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},iae=e=>e*(1/3+1),Mxe=iae(9),Fxe=iae(10),Bxe=iae(12),qA="Segoe UI",jxe="wf_standard-font, helvetica, arial, sans-serif",Uxe="#252423",WA="#605E5C",zxe="transparent",aon="#C8C6C4",Wd="#118DFF",uon="#12239E",lon="#E66C37",con="#6B007B",fon="#E044A7",don="#744EC2",hon="#D9B300",pon="#D64550",pje=Wd,mje="#DEEFFF",Vxe=[mje,pje],mon=[mje,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",pje],gon={view:{stroke:zxe},background:zxe,font:qA,header:{titleFont:jxe,titleFontSize:Bxe,titleColor:Uxe,labelFont:qA,labelFontSize:Fxe,labelColor:WA},axis:{ticks:!1,grid:!1,domain:!1,labelColor:WA,labelFontSize:Mxe,titleFont:jxe,titleColor:Uxe,titleFontSize:Bxe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:aon,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Wd},line:{stroke:Wd,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:qA,fontSize:Mxe,fill:WA},arc:{fill:Wd},area:{fill:Wd,line:!0,opacity:.6},path:{stroke:Wd},rect:{fill:Wd},point:{fill:Wd,filled:!0,size:75},shape:{stroke:Wd},symbol:{fill:Wd,strokeWidth:1.5,size:50},legend:{titleFont:qA,titleFontWeight:"bold",titleColor:WA,labelFont:qA,labelFontSize:Fxe,labelColor:WA,symbolType:"circle",symbolSize:75},range:{category:[Wd,uon,lon,con,fon,don,hon,pon],diverging:Vxe,heatmap:Vxe,ordinal:mon}},JV='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',yon='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',ZV=400,ZO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},von=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],bon=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function A9({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=ZO.gridBg[e],i=ZO.textPrimary[e],s=ZO.textSecondary[e],o=n==="dark"?von:bon,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:JV,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:yon,labelFontWeight:ZV,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:ZO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:JV,fill:s,fontWeight:ZV},"guide-title":{font:JV,fill:s,fontWeight:ZV}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const xon=A9({theme:"white",background:"#ffffff"}),_on=A9({theme:"g10",background:"#f4f4f4"}),won=A9({theme:"g90",background:"#262626"}),Eon=A9({theme:"g100",background:"#161616"}),Ton=zsn.version,Son=Object.freeze(Object.defineProperty({__proto__:null,carbong10:_on,carbong100:Eon,carbong90:won,carbonwhite:xon,dark:Vsn,excel:Hsn,fivethirtyeight:Gsn,ggplot2:Ysn,googlecharts:oon,latimes:Jsn,powerbi:gon,quartz:Zsn,urbaninstitute:son,version:Ton,vox:eon},Symbol.toStringTag,{value:"Module"}));function Con(e,t,n,r){if(Qe(e))return`[${e.map(i=>t(Nt(i)?i:Hxe(i,n))).join(", ")}]`;if(Ot(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ot(c)&&(c=Hxe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Aon(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Hxe(e,t){return JSON.stringify(e,Aon(t))}var Ion=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const gje="vg-tooltip-element",kon={offsetX:10,offsetY:10,id:gje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Ron,maxDepth:2,formatTooltip:Con,baseURL:""};function Ron(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Pon(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Ion.toString().replace(gje,e)}function Don(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Non{constructor(t){this.options={...kon,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Pon(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Don(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var eH={};function Oon(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tH,qxe;function $on(){return qxe||(qxe=1,tH=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),tH}var Lon=si;si.Node=C_;si.create=si;function si(e){var t=this;if(t instanceof si||(t=new si),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}si.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};si.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};si.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};si.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Fon(this,arguments[e]);return this.length};si.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Bon(this,arguments[e]);return this.length};si.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};si.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};si.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};si.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};si.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};si.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};si.prototype.map=function(e,t){t=t||this;for(var n=new si,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};si.prototype.mapReverse=function(e,t){t=t||this;for(var n=new si,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};si.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};si.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};si.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};si.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};si.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new si;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};si.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new si;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};si.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Mon(this,i,n[r]);return s};si.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Mon(e,t,n){var r=t===e.head?new C_(n,null,t,e):new C_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Fon(e,t){e.tail=new C_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Bon(e,t){e.head=new C_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function C_(e,t,n,r){if(!(this instanceof C_))return new C_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{$on()(si)}catch{}const jon=Lon,sx=Symbol("max"),T0=Symbol("length"),mE=Symbol("lengthCalculator"),Nk=Symbol("allowStale"),Ax=Symbol("maxAge"),b0=Symbol("dispose"),Wxe=Symbol("noDisposeOnSet"),na=Symbol("lruList"),Kd=Symbol("cache"),yje=Symbol("updateAgeOnGet"),nH=()=>1;class Uon{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[sx]=t.max||1/0;const n=t.length||nH;if(this[mE]=typeof n!="function"?nH:n,this[Nk]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ax]=t.maxAge||0,this[b0]=t.dispose,this[Wxe]=t.noDisposeOnSet||!1,this[yje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[sx]=t||1/0,GA(this)}get max(){return this[sx]}set allowStale(t){this[Nk]=!!t}get allowStale(){return this[Nk]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Ax]=t,GA(this)}get maxAge(){return this[Ax]}set lengthCalculator(t){typeof t!="function"&&(t=nH),t!==this[mE]&&(this[mE]=t,this[T0]=0,this[na].forEach(n=>{n.length=this[mE](n.value,n.key),this[T0]+=n.length})),GA(this)}get lengthCalculator(){return this[mE]}get length(){return this[T0]}get itemCount(){return this[na].length}rforEach(t,n){n=n||this;for(let r=this[na].tail;r!==null;){const i=r.prev;Gxe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[na].head;r!==null;){const i=r.next;Gxe(this,t,r,n),r=i}}keys(){return this[na].toArray().map(t=>t.key)}values(){return this[na].toArray().map(t=>t.value)}reset(){this[b0]&&this[na]&&this[na].length&&this[na].forEach(t=>this[b0](t.key,t.value)),this[Kd]=new Map,this[na]=new jon,this[T0]=0}dump(){return this[na].map(t=>uM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[na]}set(t,n,r){if(r=r||this[Ax],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[mE](n,t);if(this[Kd].has(t)){if(s>this[sx])return U2(this,this[Kd].get(t)),!1;const u=this[Kd].get(t).value;return this[b0]&&(this[Wxe]||this[b0](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[T0]+=s-u.length,u.length=s,this.get(t),GA(this),!0}const o=new zon(t,n,s,i,r);return o.length>this[sx]?(this[b0]&&this[b0](t,n),!1):(this[T0]+=o.length,this[na].unshift(o),this[Kd].set(t,this[na].head),GA(this),!0)}has(t){if(!this[Kd].has(t))return!1;const n=this[Kd].get(t).value;return!uM(this,n)}get(t){return rH(this,t,!0)}peek(t){return rH(this,t,!1)}pop(){const t=this[na].tail;return t?(U2(this,t),t.value):null}del(t){U2(this,this[Kd].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Kd].forEach((t,n)=>rH(this,n,!1))}}const rH=(e,t,n)=>{const r=e[Kd].get(t);if(r){const i=r.value;if(uM(e,i)){if(U2(e,r),!e[Nk])return}else n&&(e[yje]&&(r.value.now=Date.now()),e[na].unshiftNode(r));return i.value}},uM=(e,t)=>{if(!t||!t.maxAge&&!e[Ax])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Ax]&&n>e[Ax]},GA=e=>{if(e[T0]>e[sx])for(let t=e[na].tail;e[T0]>e[sx]&&t!==null;){const n=t.prev;U2(e,t),t=n}},U2=(e,t)=>{if(t){const n=t.value;e[b0]&&e[b0](n.key,n.value),e[T0]-=n.length,e[Kd].delete(n.key),e[na].removeNode(t)}};class zon{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Gxe=(e,t,n,r)=>{let i=n.value;uM(e,i)&&(U2(e,n),e[Nk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Von=Uon;const Hon=Object.freeze({loose:!0}),qon=Object.freeze({}),Won=e=>e?typeof e!="object"?Hon:e:qon;var sae=Won,kK={exports:{}};const Gon="2.0.0",vje=256,Yon=Number.MAX_SAFE_INTEGER||9007199254740991,Kon=16,Xon=vje-6,Qon=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var oae={MAX_LENGTH:vje,MAX_SAFE_COMPONENT_LENGTH:Kon,MAX_SAFE_BUILD_LENGTH:Xon,MAX_SAFE_INTEGER:Yon,RELEASE_TYPES:Qon,SEMVER_SPEC_VERSION:Gon,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Jon=typeof process=="object"&&eH&&eH.NODE_DEBUG&&/\bsemver\b/i.test(eH.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var I9=Jon;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=oae,s=I9;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(kK,kK.exports);var aae=kK.exports;const Yxe=/^[0-9]+$/,bje=(e,t)=>{const n=Yxe.test(e),r=Yxe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Zon=(e,t)=>bje(t,e);var ean={compareIdentifiers:bje,rcompareIdentifiers:Zon};const e4=I9,{MAX_LENGTH:Kxe,MAX_SAFE_INTEGER:t4}=oae,{safeRe:Xxe,t:Qxe}=aae,tan=sae,{compareIdentifiers:gE}=ean;let nan=class pp{constructor(t,n){if(n=tan(n),t instanceof pp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Kxe)throw new TypeError(`version is longer than ${Kxe} characters`);e4("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Xxe[Qxe.LOOSE]:Xxe[Qxe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>t4||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t4||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t4||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<t4)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e4("SemVer.compare",this.version,this.options,t),!(t instanceof pp)){if(typeof t=="string"&&t===this.version)return 0;t=new pp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof pp||(t=new pp(t,this.options)),gE(this.major,t.major)||gE(this.minor,t.minor)||gE(this.patch,t.patch)}comparePre(t){if(t instanceof pp||(t=new pp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(e4("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gE(r,i)}while(++n)}compareBuild(t){t instanceof pp||(t=new pp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(e4("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),gE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var uae=nan;const Jxe=uae,ran=(e,t,n)=>new Jxe(e,n).compare(new Jxe(t,n));var AC=ran;const ian=AC,san=(e,t,n)=>ian(e,t,n)===0;var oan=san;const aan=AC,uan=(e,t,n)=>aan(e,t,n)!==0;var lan=uan;const can=AC,fan=(e,t,n)=>can(e,t,n)>0;var dan=fan;const han=AC,pan=(e,t,n)=>han(e,t,n)>=0;var man=pan;const gan=AC,yan=(e,t,n)=>gan(e,t,n)<0;var van=yan;const ban=AC,xan=(e,t,n)=>ban(e,t,n)<=0;var _an=xan;const wan=oan,Ean=lan,Tan=dan,San=man,Can=van,Aan=_an,Ian=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return wan(e,n,r);case"!=":return Ean(e,n,r);case">":return Tan(e,n,r);case">=":return San(e,n,r);case"<":return Can(e,n,r);case"<=":return Aan(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var kan=Ian,iH,Zxe;function Ran(){if(Zxe)return iH;Zxe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}iH=t;const n=sae,{safeRe:r,t:i}=aae,s=kan,o=I9,a=uae,u=xje();return iH}var sH,e_e;function xje(){if(e_e)return sH;e_e=1;class e{constructor(B,q){if(q=r(q),B instanceof e)return B.loose===!!q.loose&&B.includePrerelease===!!q.includePrerelease?B:new e(B.raw,q);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(G=>!p(G[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const H=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+B,G=n.get(H);if(G)return G;const K=this.options.loose,J=K?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];B=B.replace(J,N(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[u.COMPARATORTRIM],l),s("comparator trim",B),B=B.replace(a[u.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[u.CARETTRIM],f),s("caret trim",B);let F=B.split(" ").map(V=>y(V,this.options)).join(" ").split(/\s+/).map(V=>k(V,this.options));K&&(F=F.filter(V=>(s("loose invalid filter",V,this.options),!!V.match(a[u.COMPARATORLOOSE])))),s("range list",F);const j=new Map,W=F.map(V=>new i(V,this.options));for(const V of W){if(p(V))return[V];j.set(V.value,V)}j.size>1&&j.has("")&&j.delete("");const M=[...j.values()];return n.set(H,M),M}intersects(B,q){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(H=>g(H,q)&&B.set.some(G=>g(G,q)&&H.every(K=>G.every(J=>K.intersects(J,q)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(L(this.set[q],B,this.options))return!0;return!1}}sH=e;const t=Von,n=new t({max:1e3}),r=sae,i=Ran(),s=I9,o=uae,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=aae,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=oae,p=O=>O.value==="<0.0.0-0",m=O=>O.value==="",g=(O,B)=>{let q=!0;const H=O.slice();let G=H.pop();for(;q&&H.length;)q=H.every(K=>G.intersects(K,B)),G=H.pop();return q},y=(O,B)=>(s("comp",O,B),O=E(O,B),s("caret",O),O=b(O,B),s("tildes",O),O=C(O,B),s("xrange",O),O=R(O,B),s("stars",O),O),v=O=>!O||O.toLowerCase()==="x"||O==="*",b=(O,B)=>O.trim().split(/\s+/).map(q=>_(q,B)).join(" "),_=(O,B)=>{const q=B.loose?a[u.TILDELOOSE]:a[u.TILDE];return O.replace(q,(H,G,K,J,F)=>{s("tilde",O,H,G,K,J,F);let j;return v(G)?j="":v(K)?j=`>=${G}.0.0 <${+G+1}.0.0-0`:v(J)?j=`>=${G}.${K}.0 <${G}.${+K+1}.0-0`:F?(s("replaceTilde pr",F),j=`>=${G}.${K}.${J}-${F} <${G}.${+K+1}.0-0`):j=`>=${G}.${K}.${J} <${G}.${+K+1}.0-0`,s("tilde return",j),j})},E=(O,B)=>O.trim().split(/\s+/).map(q=>S(q,B)).join(" "),S=(O,B)=>{s("caret",O,B);const q=B.loose?a[u.CARETLOOSE]:a[u.CARET],H=B.includePrerelease?"-0":"";return O.replace(q,(G,K,J,F,j)=>{s("caret",O,G,K,J,F,j);let W;return v(K)?W="":v(J)?W=`>=${K}.0.0${H} <${+K+1}.0.0-0`:v(F)?K==="0"?W=`>=${K}.${J}.0${H} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.0${H} <${+K+1}.0.0-0`:j?(s("replaceCaret pr",j),K==="0"?J==="0"?W=`>=${K}.${J}.${F}-${j} <${K}.${J}.${+F+1}-0`:W=`>=${K}.${J}.${F}-${j} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.${F}-${j} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?J==="0"?W=`>=${K}.${J}.${F}${H} <${K}.${J}.${+F+1}-0`:W=`>=${K}.${J}.${F}${H} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.${F} <${+K+1}.0.0-0`),s("caret return",W),W})},C=(O,B)=>(s("replaceXRanges",O,B),O.split(/\s+/).map(q=>A(q,B)).join(" ")),A=(O,B)=>{O=O.trim();const q=B.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return O.replace(q,(H,G,K,J,F,j)=>{s("xRange",O,H,G,K,J,F,j);const W=v(K),M=W||v(J),V=M||v(F),Q=V;return G==="="&&Q&&(G=""),j=B.includePrerelease?"-0":"",W?G===">"||G==="<"?H="<0.0.0-0":H="*":G&&Q?(M&&(J=0),F=0,G===">"?(G=">=",M?(K=+K+1,J=0,F=0):(J=+J+1,F=0)):G==="<="&&(G="<",M?K=+K+1:J=+J+1),G==="<"&&(j="-0"),H=`${G+K}.${J}.${F}${j}`):M?H=`>=${K}.0.0${j} <${+K+1}.0.0-0`:V&&(H=`>=${K}.${J}.0${j} <${K}.${+J+1}.0-0`),s("xRange return",H),H})},R=(O,B)=>(s("replaceStars",O,B),O.trim().replace(a[u.STAR],"")),k=(O,B)=>(s("replaceGTE0",O,B),O.trim().replace(a[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=O=>(B,q,H,G,K,J,F,j,W,M,V,Q,se)=>(v(H)?q="":v(G)?q=`>=${H}.0.0${O?"-0":""}`:v(K)?q=`>=${H}.${G}.0${O?"-0":""}`:J?q=`>=${q}`:q=`>=${q}${O?"-0":""}`,v(W)?j="":v(M)?j=`<${+W+1}.0.0-0`:v(V)?j=`<${W}.${+M+1}.0-0`:Q?j=`<=${W}.${M}.${V}-${Q}`:O?j=`<${W}.${M}.${+V+1}-0`:j=`<=${j}`,`${q} ${j}`.trim()),L=(O,B,q)=>{for(let H=0;H<O.length;H++)if(!O[H].test(B))return!1;if(B.prerelease.length&&!q.includePrerelease){for(let H=0;H<O.length;H++)if(s(O[H].semver),O[H].semver!==i.ANY&&O[H].semver.prerelease.length>0){const G=O[H].semver;if(G.major===B.major&&G.minor===B.minor&&G.patch===B.patch)return!0}return!1}return!0};return sH}const Pan=xje(),Dan=(e,t,n)=>{try{t=new Pan(t,n)}catch{return!1}return t.test(e)};var Nan=Dan,_je=Oon(Nan);function Oan(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var $an=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function wje(e,...t){for(const n of t)Lan(e,n);return e}function Lan(e,t){for(const n of Object.keys(t))lC(e,n,t[n],!0)}const Qd=bXt;let T3=Tsn;const n4=typeof window<"u"?window:void 0;var EEe;T3===void 0&&((EEe=n4==null?void 0:n4.vl)!=null&&EEe.compile)&&(T3=n4.vl);const Man={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Fan={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},UI={vega:"Vega","vega-lite":"Vega-Lite"},lM={vega:Qd.version,"vega-lite":T3?T3.version:"not available"},Ban={vega:e=>e,"vega-lite":(e,t)=>T3.compile(e,{config:t}).spec},jan=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Uan="chart-wrapper";function zan(e){return typeof e=="function"}function t_e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${UI[r]} JSON Source`}function Van(e,t){if(e.$schema){const n=hje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${UI[n.library]}, but mode argument sets ${UI[t]??t}.`);const r=n.library;return _je(lM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${UI[r]} ${n.version}, but the current version of ${UI[r]} is v${lM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Eje(e){return!!(e&&"load"in e)}function n_e(e){return Eje(e)?e:Qd.loader(e)}function Han(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Nt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function qan(e,t,n={}){let r,i;Nt(t)?(i=n_e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Han(r),o=s.loader;(!i||o)&&(i=n_e(n.loader??o));const a=await r_e(s,i),u=await r_e(n,i),l={...wje(u,a),config:uC(u.config??{},a.config??{})};return await Gan(e,r,l,i)}async function r_e(e,t){const n=Nt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Nt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Wan(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Gan(e,t,n={},r){const i=n.theme?uC(Son[n.theme],n.config??{}):n.config,s=Gv(n.actions)?n.actions:wje({},Man,n.actions??{}),o={...Fan,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Qd.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:C}=Wan(c);if(!S.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?$an.toString():n.defaultStyle,C.appendChild(A)}}const f=Van(t,n.mode);let d=Ban[f](t,i);if(f==="vega-lite"&&d.$schema){const E=hje(d.$schema);_je(lM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${lM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Uan),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):V8(d,p,!0,!1).newDocument),n.formatLocale&&Qd.formatLocale(n.formatLocale),n.timeFormatLocale&&Qd.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?Qd.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&Qd.expressionFunction(E,S)}const{ast:m}=n,g=Qd.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Qd.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Qd.expressionInterpreter??n.expr??kXt}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:C}=S;C=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):C=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):C=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,C=E&&!Eje(E)?E==null?void 0:E.baseURL:void 0,A=zan(S)?S:new Non({baseURL:C,...S===!0?{}:S}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const C=document.createElement("details");C.title=o.CLICK_TO_VIEW_ACTIONS,c.append(C),E=C;const A=document.createElement("summary");A.innerHTML=jan,C.append(A),b=R=>{C.contains(R.target)||C.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const C of["svg","png"])if(s===!0||s.export===!0||s.export[C]){const A=o[`${C.toUpperCase()}_ACTION`],R=document.createElement("a"),k=Ot(n.scaleFactor)?n.scaleFactor[C]:n.scaleFactor;R.text=A,R.href="#",R.target="_blank",R.download=`${l}.${C}`,R.addEventListener("mousedown",async function(N){N.preventDefault();const L=await y.toImageURL(C,k);this.href=L}),S.append(R)}}if(s===!0||s.source!==!1){const C=document.createElement("a");C.text=o.SOURCE_ACTION,C.href="#",C.addEventListener("click",function(A){t_e(oV(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),S.append(C)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const C=document.createElement("a");C.text=o.COMPILED_ACTION,C.href="#",C.addEventListener("click",function(A){t_e(oV(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),S.append(C)}if(s===!0||s.editor!==!1){const C=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(R){Oan(window,C,{config:i,mode:f,renderer:a,spec:oV(t)}),R.preventDefault()}),S.append(A)}}function _(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:_,embedOptions:n}}function Yan(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Kan(e,t,n){n&&(Yan(n)?n(e.data(t)):e.change(t,Qd.changeset().remove(()=>!0).insert(n)))}function Xan(e,t){Object.keys(t).forEach(n=>{Kan(e,n,t[n])})}function Tje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Sje=()=>{};function oH(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Qan(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Tje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!W4(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function i_e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function aH(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function zI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Cje extends ni.PureComponent{constructor(){super(...arguments),zI(this,"containerRef",ni.createRef()),zI(this,"resultPromise",void 0),zI(this,"handleError",t=>{const{onError:n=Sje}=this.props;n(t,this.containerRef.current),console.warn(t)}),zI(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Tje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Qan(aH(this.props),aH(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!nY(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&i_e(a,s),i&&oH(a,i)),a.run()})}else nY(i,s)||this.modifyView(o=>{s&&i_e(o,s),i&&oH(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=aH(this.props);this.resultPromise=qan(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;oH(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return ni.createElement("div",{ref:this.containerRef,className:t,style:n})}}zI(Cje,"propTypes",{className:dhe.string,onError:dhe.func});function RK(){return RK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RK.apply(this,arguments)}function PK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Jan={};class lae extends ni.PureComponent{constructor(){super(...arguments),PK(this,"vegaEmbed",ni.createRef()),PK(this,"handleNewView",t=>{this.update();const{onNewView:n=Sje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){nY(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Xan(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ni.createElement(Cje,RK({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}PK(lae,"defaultProps",{data:Jan});function DK(){return DK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DK.apply(this,arguments)}function s_e(e){return ni.createElement(lae,DK({},e,{mode:"vega-lite"}))}function Zan({currentConfig:e,provState:t}){const n=wd(),r=Ed(),i=Sc(),[s,o]=P.useState(null),[a,u]=P.useState(!0),{updateResponseBlockValidation:l,setIframeAnswers:c}=hl(),[f,d]=P.useState(),{actions:h,trrack:p}=P.useMemo(()=>{const b=nw.create(),_=b.register("signal",(S,C)=>(S.event=C,S)),E=EP({registry:b,initialState:{event:{}}});return{actions:{signalAction:_},trrack:E}},[]),m=P.useCallback(({status:b,provenanceGraph:_,answers:E})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:b,values:E,provenanceGraph:_})),i(c(E))},[r,n,i,c,l]),g=P.useCallback((b,_)=>{p.apply(b,h.signalAction({key:b,value:_}))},[h,p]),y=P.useCallback((b,_)=>{const{responseId:E,response:S}=_;m({status:!0,provenanceGraph:p.graph.backend,answers:{[E]:S}})},[m,p.graph.backend]),v=P.useMemo(()=>{var _;const b=(_=s==null?void 0:s.config)==null?void 0:_.signals;return b?b.reduce((E,S)=>(S.name==="revisitAnswer"?E[S.name]=y:E[S.name]=g,E),{}):{}},[y,g,s]);return P.useEffect(()=>{async function b(){u(!0);let _;"path"in e?_=await qbt(e.path):_=e.config,_!==void 0&&o(_),u(!1)}e&&b()},[e]),P.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?w.jsx("div",{children:"Loading..."}):"path"in e&&!s?w.jsx(U1,{path:e.path}):s?w.jsx(lae,{spec:structuredClone(s),signalListeners:v,onNewView:b=>d(b)}):w.jsx("div",{children:"Failed to load vega config"})}function eun(){const e=yg(),t=wd(),n=Ed()||"Notfound",r=e.components[n],{storageEngine:i}=po(),s=P.useRef(null),[o,a]=P.useState(null),{setIsRecording:u}=hl(),l=Xr(R=>R.analysisProvState),c=jS(),f=UZ(),d=Xr(R=>R.sequence),[h]=Ov(),p=Xr(R=>R.participantId),m=P.useMemo(()=>h.get("participantId"),[h]);u$e();const g=Sc(),{setAlertModal:y}=hl();P.useEffect(()=>{(i==null?void 0:i.getEngine())!=="localStorage"&&g(y({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[y,i,g]),P.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(R=>{var k;R.stop(),(k=s.current)==null||k.stream.removeTrack(R)}),s.current.stream.getAudioTracks().forEach(R=>{var k;R.stop(),(k=s.current)==null||k.stream.removeTrack(R)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(R=>{const k=new MediaRecorder(R);s.current=k,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[v,b]=P.useState([]),_=P.useRef([]);P.useEffect(()=>{async function R(){var L;const N=((L=$Z(d,t))==null?void 0:L.map(O=>O.currentBlock.id).filter(O=>O!==void 0))||[];b(N)}async function k(){const N=_.current;JSON.stringify(N)!==JSON.stringify(v)&&v.length>0&&i&&await i.addParticipantTags(v),_.current=v}R().then(k)},[t,i,d]);const E=P.useMemo(()=>{var R;return n!=="end"&&oC(r)&&e.baseComponents?jZ({},(R=e.baseComponents)==null?void 0:R[r.baseComponent],r):r},[r,e]);if(n==="end")return w.jsx(yMt,{});if(n==="__trainingFailed")return w.jsx(vMt,{});if(n==="__timedOut")return w.jsx(bMt,{});if(n==="Notfound")return w.jsx(U1,{email:e.uiConfig.contactEmail});if(m&&p!==m)return w.jsx(Wo,{style:{height:"80vh"},children:w.jsx(Tc,{})});const S=E.instruction||"",{instructionLocation:C}=E,A=e.uiConfig.sidebar&&(C==="sidebar"||C===void 0);return w.jsxs(w.Fragment,{children:[C==="aboveStimulus"&&w.jsx(ku,{text:S}),w.jsx(j$,{status:f,config:E,location:"aboveStimulus"},`${t}-above-response-block`),w.jsxs(P.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:[E.type==="markdown"&&w.jsx(oMt,{currentConfig:E}),E.type==="website"&&w.jsx(Hbt,{currentConfig:E}),E.type==="image"&&w.jsx(Gbt,{currentConfig:E}),E.type==="react-component"&&w.jsx(sMt,{currentConfig:E,provState:l}),E.type==="vega"&&w.jsx(Zan,{currentConfig:E,provState:l})]},`${t}-stimulus`),(C==="belowStimulus"||C===void 0&&!A)&&w.jsx(ku,{text:S}),w.jsx(j$,{status:f,config:E,location:"belowStimulus"},`${t}-below-response-block`)]})}function Aje(e){const[t]=Ov();return w.jsx(sZ,{...e,to:{pathname:e.to,search:t.toString()}})}function Ije(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=Ije(o,t,n,r),r.includes(o.orderPath))break}return i}function kje(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=kje(s,r)}}),n}function tun(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function nun({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Q_(),c=Hh(),f=wd(),[d,{close:h,open:p}]=yQ(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?Ije(n,e,r,a.orderPath):-1,{trialId:y}=lm(),[v]=Ov(),b=P.useMemo(()=>v.get("participantId"),[v]),_=y===e,E=s?f===g:f===`reviewer-${e}`,S=u?_:E,C=P.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),R=u?C:()=>c(s?b?`/${l}/${oh(g)}?participantId=${b}`:`/${l}/${oh(g)}`:`/${l}/reviewer-${e}`),k=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,N=e.includes("$")&&k&&e.includes(k)?e.split(k).at(-1):e;return w.jsxs(ac,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[w.jsx(ac.Target,{children:w.jsx(ke,{onMouseEnter:p,onMouseLeave:h,children:w.jsx(xF,{active:S,style:{lineHeight:"32px",height:"32px"},label:w.jsxs(ke,{children:[i&&w.jsx(Gct,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==N&&w.jsx(uft,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),w.jsx(ze,{size:"sm",span:S,fw:S?"700":void 0,display:"inline",children:N})]}),onClick:R,disabled:t})})}),m&&(m.description||m.meta)&&w.jsx(ac.Dropdown,{onMouseLeave:h,children:w.jsxs(ke,{children:[m.description&&w.jsxs(ke,{children:[w.jsx(ze,{fw:900,display:"inline-block",mr:2,children:"Description:"}),w.jsx(ze,{fw:400,component:"span",children:m.description})]}),m.meta&&w.jsxs(ke,{children:[w.jsx(ze,{fw:"900",component:"span",children:"Task Meta: "}),w.jsx(ze,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function cM({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=K0(e.components);return n&&r&&(o=tun(K0(e.components),K0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),w.jsx(w.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return w.jsx(nun,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Dh(c).length-kje(u,c):0,d=Dh(u);return w.jsx(xF,{label:w.jsxs(ke,{style:{opacity:f>0?1:.5},children:[w.jsx(ze,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?w.jsx(qct,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&w.jsxs(b1,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&w.jsx(b1,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:w.jsx(ke,{style:{borderLeft:"1px solid #e9ecef"},children:w.jsx(cM,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function Rje(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function o_e({text:e}){return w.jsx(os,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:w.jsx(aZ,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function run(){const e=Xr(h=>h.sequence),t=Xr(h=>h.metadata),{toggleStudyBrowser:n}=hl(),r=yg(),i=Sc(),s=Q_(),o=NAe(`/${s}`),{storageEngine:a}=po(),u=jS(),l=P.useMemo(()=>{let h=K0(r.sequence);return h=LZ(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=P.useState("participant"),d=P.useMemo(()=>c==="allTrials"||u,[c,u]);return w.jsxs(Oi.Aside,{p:"0",children:[w.jsx(Oi.Section,{p:"md",children:w.jsxs(qt,{direction:"row",justify:"space-between",children:[w.jsx(ze,{size:"md",fw:700,pt:3,children:"Study Browser"}),w.jsx(os,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:w.jsx(on,{variant:"light",leftSection:w.jsx(uZ,{size:14}),onClick:()=>Rje(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),w.jsx(kv,{onClick:()=>i(n()),mt:1})]})}),w.jsx(Oi.Section,{grow:!0,component:fg,p:"md",children:w.jsxs(Dr,{value:c,onChange:f,children:[w.jsx(ke,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:w.jsxs(Dr.List,{grow:!0,children:[w.jsxs(Dr.Tab,{value:"participant",children:["Participant View",w.jsx(o_e,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),w.jsxs(Dr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",w.jsx(o_e,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),w.jsx(Dr.Panel,{value:"participant",children:w.jsx(cM,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),w.jsx(Dr.Panel,{value:"allTrials",children:w.jsx(cM,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function iun({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Xr(A=>A.config),r=Xr(A=>A.metadata),i=MZ(),s=Sc(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=hl(),{storageEngine:l}=po(),c=Ed(),f=wd(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=P.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,y=n==null?void 0:n.uiConfig.withProgressBar,v=Q_(),b=NAe(`/${v}`),_=P.useRef(null),[E,S]=P.useState(!1),C=Xr(A=>A.isRecording);return P.useEffect(()=>{const A=_.current;A&&S(A.scrollWidth>A.offsetWidth)},[n]),w.jsx(Oi.Header,{p:"md",children:w.jsxs(Yc,{mt:-7,align:"center",children:[w.jsx(Yc.Col,{span:4,children:w.jsxs(qt,{align:"center",children:[w.jsx(Dv,{w:40,src:`${dl}${g}`,alt:"Study Logo"}),w.jsx(Eu,{w:"md"}),w.jsx(Vs,{ref:_,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:E?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),w.jsx(Yc.Col,{span:4,children:y&&w.jsx(RS,{radius:"md",size:"lg",value:h})}),w.jsx(Yc.Col,{span:4,children:w.jsxs(bi,{wrap:"nowrap",justify:"right",children:[C?w.jsxs(bi,{ml:"xl",gap:20,wrap:"nowrap",children:[w.jsx(ze,{color:"red",children:"Recording audio"}),w.jsx($6e,{})]}):null,!t&&w.jsx(os,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:w.jsx(b1,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&w.jsx(on,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),w.jsxs(Qu,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[w.jsx(Qu.Target,{children:w.jsx(U_,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:w.jsx(eft,{})})}),w.jsxs(Qu.Dropdown,{children:[e&&w.jsx(Qu.Item,{leftSection:w.jsx(hft,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),w.jsx(Qu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:w.jsx(oft,{size:14}),children:"Contact"}),e&&w.jsx(Qu.Item,{leftSection:w.jsx(uZ,{size:14}),onClick:()=>Rje(l,n,r,b),children:"Next Participant"}),e&&w.jsx(Qu.Item,{leftSection:w.jsx(FAe,{size:14}),component:"a",href:`${dl}analysis/stats/${v}`,children:"Analyze & Manage"})]})]})]})})]})})}function Pje(e,t){var n;return oC(e)&&t.baseComponents?jZ({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function sun(){var u;const e=(u=yg())==null?void 0:u.uiConfig.sidebar,t=yg(),n=Ed(),r=t.components[n],i=P.useMemo(()=>r?Pje(r,t):null,[r,t]),s=UZ(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?w.jsxs(Oi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&w.jsx(Oi.Section,{bg:"gray.3",p:"md",children:w.jsxs(ze,{c:"gray.9",children:[w.jsx(ze,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),w.jsx(ku,{text:o})]})}),w.jsx(Oi.Section,{p:"md",children:w.jsx(j$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):w.jsx(Oi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:w.jsx(j$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function oun(){const e=Xr(u=>u.showHelpText),t=Xr(u=>u.config),n=Sc(),{toggleShowHelpText:r}=hl(),[i,s]=P.useState(""),[o,a]=P.useState(!0);return P.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await VZ(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),w.jsx(Ws,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?w.jsx(ku,{text:i}):w.jsx(U1,{path:t.uiConfig.helpTextPath})})}function aun(){const e=Xr(o=>o.alertModal),{setAlertModal:t}=hl(),n=Sc(),[r,i]=P.useState(e.show),s=P.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return P.useEffect(()=>i(e.show),[e.show]),w.jsx(Ws,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:w.jsxs(Y0,{color:"red",radius:"xs",title:"Alert",icon:w.jsx(Hct,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[w.jsx(ze,{my:"md",children:e.message}),w.jsx(bi,{w:"100%",justify:"end",children:w.jsx(on,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const a_e=15,u_e=3;function uun({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return w.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return w.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:w.jsx("rect",{fill:a===r?"#e15759":"#484848",x:e(u.createdOn)-u_e/2,y:n/2-a_e/2,width:u_e,height:a_e})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?w.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const l_e={left:5,top:0,right:5,bottom:0};function lun({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=P.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=P.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=P.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return w.jsx(uun,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return w.jsxs("svg",{style:{width:n,height:r},children:[w.jsx("line",{stroke:"black",strokeWidth:1,x1:l_e.left,x2:n+l_e.left,y1:r/2,y2:r/2}),c]})}function cun(e){const t=P.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return P.useLayoutEffect(()=>{t.current=e}),P.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function fun({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=P.useRef(0),u=P.useRef(Date.now()),[l,c]=P.useState(0);P.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=cun(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});P.useEffect(()=>{let h=null;return i&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[f,i]);const d=P.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return w.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:w.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function NK(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const uH={left:0,top:0,right:0,bottom:0};function dun(e,t){return t?t.getParticipantData(e):null}function hun({setTimeString:e}){const[t]=Ov(),n=P.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=po(),i=Xr(j=>j.analysisIsPlaying),s=Xr(j=>j.analysisHasAudio),o=Xr(j=>j.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l}=hl(),c=Sc(),f=Ed(),d=wd();P.useEffect(()=>{c(a(null))},[d,a,c]);const[h,{width:p}]=tf(),[m,g]=P.useState(0),[y,v]=P.useState(null),[b,_]=P.useState(0),{value:E,status:S}=mL(dun,[n,r]),[C,A]=Bet(0,100),R=P.useRef(null),[k,N]=P.useState(!0),L=P.useRef(null),O=P.useMemo(()=>`${f}_${d}`,[f,d]);P.useEffect(()=>{var j;if(O&&E&&((j=E.answers[O])!=null&&j.provenanceGraph)){const W=nw.create(),M=EP({registry:W,initialState:{}});E.answers[O].provenanceGraph&&(M.importObject(K0(E.answers[O].provenanceGraph)),c(l(!0)),L.current=M)}else c(l(!1))},[E,O,c,l]);const B=P.useCallback(j=>{var W;j&&(O&&E&&L.current&&(c(a(L.current.getState((W=E.answers[O].provenanceGraph)==null?void 0:W.nodes[j]))),L.current.to(j)),v(j))},[E,a,c,O]);P.useEffect(()=>{var M;if(!O||!E||!L.current||!((M=E.answers[O])!=null&&M.provenanceGraph))return;const j=E.answers[O].provenanceGraph;if(!j)return;if(!y||!j.nodes[y]){B(j.root);return}let W=j.nodes[y];for(;;)if(C<W.createdOn){if(Jkt(W))break;{const V=W.parent;W=j.nodes[V]}}else if(W.children.length>0){const V=W.children[0];if(C>j.nodes[V].createdOn)W=j.nodes[V];else break}else break;W.id!==y&&B(W.id)},[B,y,E,n,C,O]);const q=P.useMemo(()=>(E==null?void 0:E.answers[O].startTime)||0,[E,O]);P.useEffect(()=>{b===0?e(""):C!==0&&e(`${NK(C-q)} / ${NK(b*1e3)}`)},[O,E,C,e,q,b]);const H=jS(),G=P.useRef(null),K=P.useCallback(async j=>{if(G.current=j,j&&E&&H&&O&&r)try{const W=await r.getAudio(O,n);await j.load(W),N(!1),c(u(!0)),_(j.getDuration()),g(j.getWidth()),j.seekTo(0),j.on("redrawcomplete",()=>g(j.getWidth()))}catch(W){c(u(!1));const M=E.answers[O].endTime-E.answers[O].startTime;throw _(M>-1?M/1e3:0),c(u(!1)),new Error(W)}else c(u(!1)),_(0)},[E,H,O,r,n,c,u]),J=P.useCallback((j,W)=>{A(j),G.current&&W&&setTimeout(()=>{var M;(M=G.current)==null||M.seekTo(W)})},[A,G]);P.useEffect(()=>{G.current&&(i?G.current.play():G.current.pause())},[G,i]);const F=P.useMemo(()=>{var M,V;if(!E||!((M=E.answers[O])!=null&&M.startTime)||!((V=E.answers[O])!=null&&V.endTime))return null;const j=b>0?E.answers[O].startTime+b*1e3:E.answers[O].endTime;return va([uH.left,p+uH.left+uH.right]).domain([E.answers[O].startTime,j]).clamp(!0)},[E,O,p,b]);return P.useEffect(()=>{K(G.current)},[J,K,E,n,G]),w.jsx(bi,{wrap:"nowrap",gap:10,mx:10,children:w.jsxs(qi,{ref:h,style:{width:"100%"},gap:0,children:[w.jsx(Wo,{}),E!==null&&O?w.jsxs(ke,{ref:R,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[w.jsx(D6e,{onMount:K,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:w.jsx(N6e,{id:"waveform",height:50})}),k?w.jsx(Tc,{}):null]}):null,S==="success"&&E&&F&&O&&E.answers[O].provenanceGraph?w.jsx(lun,{xScale:F,trialName:O,setPlayTime:J,currentNode:y,setCurrentNode:B,participantData:E,width:m||p,height:25}):null,F&&E&&(s||o)?w.jsx(fun,{duration:b*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:E.answers[O].startTime,width:p,xScale:F,updateTimer:J}):null]})})}function pun(e,t){return t?t.getParticipantData(e):null}function mun(e){return e?e.getAllParticipantsData():null}function gun(){const[e]=Ov(),t=P.useMemo(()=>e.get("participantId")||void 0,[e]),n=Ed(),r=wd(),i=Hh(),{setAnalysisIsPlaying:s}=hl(),o=Sc(),a=Xr(y=>y.analysisIsPlaying),{storageEngine:u}=po(),{value:l,status:c}=mL(pun,[t,u]),{value:f}=mL(mun,[u]),[d,h]=P.useMemo(()=>{if(f&&l&&t&&n){const y=f.filter(E=>E.participantConfigHash===l.participantConfigHash),v=y.findIndex(E=>E.participantId===t),b=v<y.length-1?y[v+1]:y[0],_=v>0?y[v-1]:y[y.length-1];return[[b.participantId,Dh(b.sequence).indexOf(n)],[_.participantId,Dh(_.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=P.useMemo(()=>{const y={};return f==null||f.forEach(v=>{y[v.participantConfigHash]||(y[v.participantConfigHash]=new Set),y[v.participantConfigHash].add(v.participantId)}),Object.keys(y).sort((v,b)=>v===(l==null?void 0:l.participantConfigHash)?-1:b===(l==null?void 0:l.participantConfigHash)?1:0).map(v=>({group:`Config version: ${v}`,items:[...y[v]].map(b=>({value:b,label:b,disabled:v!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=P.useState("");return w.jsx(Oi.Footer,{zIndex:101,withBorder:!1,children:w.jsxs(ke,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[w.jsx(cf,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),w.jsx(hun,{setTimeString:g}),w.jsx(Wo,{children:w.jsxs(bi,{gap:"xs",style:{height:"50px"},children:[w.jsx(ze,{size:"sm",ff:"monospace",children:m}),w.jsx(U_,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?w.jsx(bft,{}):w.jsx(xft,{})}),w.jsx(ze,{mx:"0",children:"Participant:"}),w.jsx(PS,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:y=>{i(`./${oh(0)}?participantId=${y}`,{relative:"path"})},data:p}),w.jsx(on,{onClick:()=>i(`./${oh(+r-1)}?participantId=${t}`,{relative:"path"}),children:w.jsx(The,{})}),w.jsx(on,{onClick:()=>i(`./${oh(+r+1)}?participantId=${t}`,{relative:"path"}),children:w.jsx(She,{})}),w.jsxs(on,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${oh(h[1])}?participantId=${h[0]}`),children:[w.jsx(The,{}),w.jsx(Ahe,{})]}),w.jsxs(on,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${oh(d[1])}?participantId=${d[0]}`),children:[w.jsx(Ahe,{}),w.jsx(She,{})]})]})})]})})}function yun(){const e=P.useRef([]),t=yg(),n=t.uiConfig.windowEventDebounceTime??100,r=Xr(d=>d.showStudyBrowser),i=Xr(d=>d.analysisHasAudio),s=Xr(d=>d.analysisHasProvenance),o=Xr(d=>d.modes);P.useEffect(()=>{const d=Yd(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Yd(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Yd(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Yd(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Yd(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Yd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Yd(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=Yd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),_=Yd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",_),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",_)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=P.useMemo(()=>o,[o]),c=P.useMemo(()=>u&&r,[u,r]),f=jS();return w.jsx(Wke.Provider,{value:e,children:w.jsxs(Oi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[w.jsx(sun,{}),w.jsx(run,{}),w.jsx(iun,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),w.jsx(oun,{}),w.jsx(aun,{}),w.jsx(Oi.Main,{children:w.jsx(kct,{})}),f&&w.jsx(gun,{})]})})}function vun(e,t=!1){return typeof e=="number"?c_e(e,t):c_e(e.length,t).map(r=>r.map(i=>e[i]))}function c_e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function Dje(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=Dje(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function bun(e,t){const n=K0(e);return Dje(n,t,"root")}function Nje(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&Nje(s,t,i,o)})}function xun(e){const t=[];return Nje(e,t,"",0),t}function f_e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return vun(i.sort(()=>.5-Math.random()),!0)}function d_e(e){const n=xun(e.sequence).map(s=>({[s]:f_e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=bun(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=f_e(e,o))})}),i}var _un=Vke;function wun(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function Eun(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function Tun(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Sun(e){return e.__COMMENTS__}function Cun(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var k9={EOL:_un.EOL||`
`,tryParseNumber:wun,createComment:Eun,removeComment:Tun,getComment:Sun,forceComment:Cun},Aun="3.2.1";function Iun(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return h_e}else if(e.length===0)return h_e;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Run(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),kun.bind(null,n)}function kun(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function h_e(){}function Run(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function Oje(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}Oje.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function $je(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}$je.description="parse hexadecimal numbers prefixed with 0x";function Lje(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}Lje.description="support ISO dates";var cae={loadDsf:Iun,std:{math:Oje,hex:$je,date:Lje}},Pun=function(e,t){var n=k9,r=cae,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function d(B){var q,H=0,G=1;for(q=s-1;q>0&&i[q]!==`
`;q--,H++);for(;q>0;q--)i[q]===`
`&&G++;throw new Error(B+" at line "+G+","+H+" >>>"+i.substr(s-H,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function m(B){for(var q="",H=o;h();){if(o===H)return h(),B&&H==="'"&&o==="'"&&q.length===0?(h(),g()):q;if(o==="\\")if(h(),o==="u"){for(var G=0,K=0;K<4;K++){h();var J=o.charCodeAt(0),F;o>="0"&&o<="9"?F=J-48:o>="a"&&o<="f"?F=J-97+10:o>="A"&&o<="F"?F=J-65+10:d("Bad \\u char "+o),G=G*16+F}q+=String.fromCharCode(G)}else if(typeof a[o]=="string")q+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):q+=o}d("Bad string")}function g(){for(var B="",q=0,H=0;;){var G=p(-H-5);if(!G||G===`
`)break;H++}function K(){for(var J=H;o&&o<=" "&&o!==`
`&&J-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),K());;){if(!o)d("Bad multiline string");else if(o==="'"){if(q++,h(),q===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;q>0;)B+="'",q--;o===`
`?(B+=`
`,h(),K()):(o!=="\r"&&(B+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var B="",q=s,H=-1;;){if(o===":")return B?H>=0&&H!==B.length&&(s=q+H,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?H<0&&(H=B.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var B=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var q=o==="\r"||o===`
`||o==="";if(q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var H=B[0];switch(H){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(H==="-"||H>="0"&&H<="9"){var G=n.tryParseNumber(B);if(G!==void 0)return G}}if(q){B=B.trim();var K=l(B);return K!==void 0?K:B}}B+=o}}function _(B,q){var H;for(B--,H=s-2;H>B&&i[H]<=" "&&i[H]!==`
`;H--);i[H]===`
`&&H--,i[H]==="\r"&&H--;var G=i.substr(B,H-B+1);for(H=0;H<G.length;H++)if(G[H]>" "){var K=G.indexOf(`
`);if(K>=0){var J=[G.substr(0,K),G.substr(K+1)];return q&&J[0].trim().length===0&&J.shift(),J}else return[G]}return[]}function E(B){function q(G,K){var J,F,j,W;switch(typeof G){case"string":G.indexOf(K)>=0&&(W=G);break;case"object":if(Object.prototype.toString.apply(G)==="[object Array]")for(J=0,j=G.length;J<j;J++)W=q(G[J],K)||W;else for(F in G)Object.prototype.hasOwnProperty.call(G,F)&&(W=q(G[F],K)||W)}return W}function H(G){var K=q(B,G);return K?"found '"+G+`' in a string value, your mistake could be with:
  > `+K+`
  (unquoted strings contain everything up to the next line!)`:""}return H("}")||H("]")}function S(){var B=[],q,H,G;try{if(u&&(q=n.createComment(B,{a:[]})),h(),H=s,v(),q&&(G=_(H,!0).join(`
`)),o==="]")return h(),q&&(q.e=[G]),B;for(;o;){if(B.push(A()),H=s,v(),o===","&&(h(),H=s,v()),q){var K=_(H);q.a.push([G||"",K[0]||""]),G=K[1]}if(o==="]")return h(),q&&(q.a[q.a.length-1][1]+=G||""),B;v()}d("End of input while parsing an array (missing ']')")}catch(J){throw J.hint=J.hint||E(B),J}}function C(B){var q="",H={},G,K,J;try{if(u&&(G=n.createComment(H,{c:{},o:[]})),B?K=1:(h(),K=s),v(),G&&(J=_(K,!0).join(`
`)),o==="}"&&!B)return G&&(G.e=[J]),h(),H;for(;o;){if(q=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),H[q]=A(),K=s,v(),o===","&&(h(),K=s,v()),G){var F=_(K);G.c[q]=[J||"",F[0]||""],J=F[1],G.o.push(q)}if(o==="}"&&!B)return h(),G&&(G.c[q][1]+=J||""),H;v()}if(B)return H;d("End of input while parsing an object (missing '}')")}catch(j){throw j.hint=j.hint||E(H),j}}function A(){switch(v(),o){case"{":return C();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function R(B,q){var H=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var G=q.join(`
`),K=_(H).join(`
`);if(K||G){var J=n.createComment(B,n.getComment(B));J.r=[G,K]}}return B}function k(){v();var B=u?_(1):null;switch(o){case"{":return R(C(),B);case"[":return R(S(),B);default:return R(A(),B)}}function N(){v();var B=u?_(1):null;switch(o){case"{":return R(C(),B);case"[":return R(S(),B)}try{return R(C(!0),B)}catch(q){c();try{return R(A(),B)}catch{throw q}}}if(typeof e!="string")throw new Error("source is not a string");var L=null,O=!0;return t&&typeof t=="object"&&(u=t.keepWsc,L=t.dsf,O=t.legacyRoot!==!1),l=r.loadDsf(L,"parse"),i=e,c(),O?N():k()},Dun=function(e,t){var n=k9,r=cae,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var _,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),C=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),R=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,L="",O=0;function B(W,M){return O+=W[0].length+W[1].length-W[2]-W[3],W[0]+M+W[1]}function q(W){return W.replace(S,function(M){var V=k[M];return typeof V=="string"?B(g.esc,V):B(g.uni,("0000"+M.charCodeAt(0).toString(16)).slice(-4))})}function H(W,M,V,Q){return W?(C.lastIndex=0,R.lastIndex=0,c||V||C.test(W)||n.tryParseNumber(W,!0)!==void 0||R.test(W)?(S.lastIndex=0,A.lastIndex=0,S.test(W)?!A.test(W)&&!Q&&d?G(W,M):B(g.qstr,q(W)):B(g.qstr,W)):B(g.str,W)):B(g.qstr,"")}function G(W,M){var V,Q=W.replace(/\r/g,"").split(`
`);if(M+=o,Q.length===1)return B(g.mstr,Q[0]);var se=s+M+g.mstr[0];for(V=0;V<Q.length;V++)se+=s,Q[V]&&(se+=M+Q[V]);return se+s+M+g.mstr[1]}function K(W){return W?l||N.test(W)?(S.lastIndex=0,B(g.qkey,S.test(W)?q(W):W)):B(g.key,W):'""'}function J(W,M,V,Q){function se(Sn){return Sn&&Sn[Sn[0]==="\r"?1:0]===`
`}function be(Sn){return Sn&&!se(Sn)}function he(Sn,zn,hr){if(!Sn)return"";Sn=n.forceComment(Sn);var gr,Qo=Sn.length;for(gr=0;gr<Qo&&Sn[gr]<=" ";gr++);return hr&&gr>0&&(Sn=Sn.substr(gr)),gr<Qo?zn+B(g.rem,Sn):Sn}var Ae=_(W);if(Ae!==void 0)return B(g.dsf,Ae);switch(typeof W){case"string":return H(W,L,M,Q);case"number":return isFinite(W)?B(g.num,String(W)):B(g.lit,"null");case"boolean":return B(g.lit,String(W));case"object":if(!W)return B(g.lit,"null");var Ne;a&&(Ne=n.getComment(W));var rt=Object.prototype.toString.apply(W)==="[object Array]",Re=L;L+=o;var Tt=s+Re,Ze=s+L,It=V||u?"":Tt,mt=[],Se,Fe=f?[]:null,st=c,yt=d,Pt=h?"":g.com[0],Je=0,we,kt,Rt,Ee,Oe,ot,xt,jt,Un;if(rt){for(we=0,kt=W.length;we<kt;we++){if(Se=we<kt-1,Ne?(ot=Ne.a[we]||[],xt=be(ot[1]),mt.push(he(ot[0],`
`)+Ze),Fe&&(ot[0]||ot[1]||xt)&&(Fe=null)):mt.push(Ze),O=0,Ee=W[we],mt.push(J(Ee,Ne?xt:!1,!0)+(Se?h:"")),Fe){switch(typeof Ee){case"string":O=0,c=!0,d=0,Fe.push(J(Ee,!1,!0)+(Se?g.com[0]:"")),c=st,d=yt;break;case"object":if(Ee){Fe=null;break}default:Fe.push(mt[mt.length-1]+(Se?Pt:""));break}Se&&(O+=g.com[0].length-g.com[2]),Je+=O}Ne&&ot[1]&&mt.push(he(ot[1],xt?" ":`
`,xt))}kt===0?Ne&&Ne.e&&mt.push(he(Ne.e[0],`
`)+Tt):mt.push(Tt),mt.length===0?jt=B(g.arr,""):(jt=It+B(g.arr,mt.join("")),Fe&&(Un=Fe.join(" "),Un.length-Je<=f&&(jt=B(g.arr,Un))))}else{var dr=Ne?Ne.o.slice():[],Sr=[];for(Rt in W)Object.prototype.hasOwnProperty.call(W,Rt)&&dr.indexOf(Rt)<0&&Sr.push(Rt);m&&Sr.sort();var xi=dr.concat(Sr);for(we=0,kt=xi.length;we<kt;we++)if(Se=we<kt-1,Rt=xi[we],Ne?(ot=Ne.c[Rt]||[],xt=be(ot[1]),mt.push(he(ot[0],`
`)+Ze),Fe&&(ot[0]||ot[1]||xt)&&(Fe=null)):mt.push(Ze),O=0,Ee=W[Rt],Oe=J(Ee,Ne&&xt),mt.push(K(Rt)+g.col[0]+(se(Oe)?"":" ")+Oe+(Se?h:"")),Ne&&ot[1]&&mt.push(he(ot[1],xt?" ":`
`,xt)),Fe){switch(typeof Ee){case"string":O=0,c=!0,d=0,Oe=J(Ee,!1),c=st,d=yt,Fe.push(K(Rt)+g.col[0]+" "+Oe+(Se?g.com[0]:""));break;case"object":if(Ee){Fe=null;break}default:Fe.push(mt[mt.length-1]+(Se?Pt:""));break}O+=g.col[0].length-g.col[2],Se&&(O+=g.com[0].length-g.com[2]),Je+=O}kt===0?Ne&&Ne.e&&mt.push(he(Ne.e[0],`
`)+Tt):mt.push(Tt),mt.length===0?jt=B(g.obj,""):(jt=It+B(g.obj,mt.join("")),Fe&&(Un=Fe.join(" "),Un.length-Je<=f&&(jt=B(g.obj,Un))))}return L=Re,jt}}_=r.loadDsf(p,"stringify");var F="",j=a?j=(n.getComment(e)||{}).r:null;return j&&j[0]&&(F=j[0]+`
`),F+=J(e,null,!0,!0),j&&(F+=j[1]||""),F},z2=k9;function Ok(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function OK(e,t){if(!(e===null||typeof e!="object")){var n=z2.getComment(e);n&&z2.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)p_e(o.a,r,n.a[r],OK(e[r]))&&(s=!0);!s&&n.e&&(o.e=Ok(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];p_e(o.s,l,n.c[l],OK(e[l]))&&(s=!0)}!s&&n.e&&(o.e=Ok(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=Ok(n.r[0],n.r[1])),s?o:void 0}}function Nun(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Oun(e,t){var n=[];if($K(e,t,n,[]),n.length>0){var r=fM(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Nun(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),fM(t,r,1)}}function p_e(e,t,n,r){var i=Ok(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function $k(e,t){var n=Ok(t.b,t.a);return n.path=e,n}function Lk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push($k(s,o)),Lk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push($k(u,l)),Lk(l.x,t,u))});e.e&&t.push($k(n,e.e))}}function $K(e,t,n,r){if(e){if(t===null||typeof t!="object"){Lk(e,n,r);return}var i,s=z2.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],$K(u.x,t[i],n,l)):(n.push($k(l,u)),Lk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],$K(d.x,t[c],n,f))):d&&(n.push($k(f,d)),Lk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function fM(e,t,n){var r=z2.createComment(e,z2.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=z2.forceComment(t)),r.r[n]||""}var $un={extract:function(e){return OK(e,!0)},merge:Oun,header:function(e,t){return fM(e,t,0)},footer:function(e,t){return fM(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var m_e=k9,Lun=Aun,g_e=Pun,y_e=Dun,Mun=$un,Fun=cae,R9={parse:g_e,stringify:y_e,endOfLine:function(){return m_e.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(m_e.EOL=e)},version:Lun,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,g_e(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,y_e(e,t)}},comments:Mun,dsf:Fun.std},LK={exports:{}},Mje={},Ah={},aS={},xD={},fr={},S3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,_)=>`${b}${_}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,_)=>(_ instanceof n&&(b[_.str]=(b[_.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let _=0;for(;_<v.length;)a(b,v[_]),b.push(y[++_]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let _=0;for(;_<v.length;)b.push(s),a(b,v[_]),b.push(s,h(y[++_]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(S3);var MK={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=S3;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(MK);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=S3,n=MK;var r=S3;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=MK;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(V,Q){return this}}class o extends s{constructor(V,Q,se){super(),this.varKind=V,this.name=Q,this.rhs=se}render({es5:V,_n:Q}){const se=V?n.varKinds.var:this.varKind,be=this.rhs===void 0?"":` = ${this.rhs}`;return`${se} ${this.name}${be};`+Q}optimizeNames(V,Q){if(V[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,V,Q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(V,Q,se){super(),this.lhs=V,this.rhs=Q,this.sideEffects=se}render({_n:V}){return`${this.lhs} = ${this.rhs};`+V}optimizeNames(V,Q){if(!(this.lhs instanceof t.Name&&!V[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,V,Q),this}get names(){const V=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(V,this.rhs)}}class u extends a{constructor(V,Q,se,be){super(V,se,be),this.op=Q}render({_n:V}){return`${this.lhs} ${this.op}= ${this.rhs};`+V}}class l extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`${this.label}:`+V}}class c extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`break${this.label?` ${this.label}`:""};`+V}}class f extends s{constructor(V){super(),this.error=V}render({_n:V}){return`throw ${this.error};`+V}get names(){return this.error.names}}class d extends s{constructor(V){super(),this.code=V}render({_n:V}){return`${this.code};`+V}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(V,Q){return this.code=B(this.code,V,Q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(V=[]){super(),this.nodes=V}render(V){return this.nodes.reduce((Q,se)=>Q+se.render(V),"")}optimizeNodes(){const{nodes:V}=this;let Q=V.length;for(;Q--;){const se=V[Q].optimizeNodes();Array.isArray(se)?V.splice(Q,1,...se):se?V[Q]=se:V.splice(Q,1)}return V.length>0?this:void 0}optimizeNames(V,Q){const{nodes:se}=this;let be=se.length;for(;be--;){const he=se[be];he.optimizeNames(V,Q)||(q(V,he.names),se.splice(be,1))}return se.length>0?this:void 0}get names(){return this.nodes.reduce((V,Q)=>L(V,Q.names),{})}}class p extends h{render(V){return"{"+V._n+super.render(V)+"}"+V._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(V,Q){super(Q),this.condition=V}render(V){let Q=`if(${this.condition})`+super.render(V);return this.else&&(Q+="else "+this.else.render(V)),Q}optimizeNodes(){super.optimizeNodes();const V=this.condition;if(V===!0)return this.nodes;let Q=this.else;if(Q){const se=Q.optimizeNodes();Q=this.else=Array.isArray(se)?new g(se):se}if(Q)return V===!1?Q instanceof y?Q:Q.nodes:this.nodes.length?this:new y(H(V),Q instanceof y?[Q]:Q.nodes);if(!(V===!1||!this.nodes.length))return this}optimizeNames(V,Q){var se;if(this.else=(se=this.else)===null||se===void 0?void 0:se.optimizeNames(V,Q),!!(super.optimizeNames(V,Q)||this.else))return this.condition=B(this.condition,V,Q),this}get names(){const V=super.names;return O(V,this.condition),this.else&&L(V,this.else.names),V}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(V){super(),this.iteration=V}render(V){return`for(${this.iteration})`+super.render(V)}optimizeNames(V,Q){if(super.optimizeNames(V,Q))return this.iteration=B(this.iteration,V,Q),this}get names(){return L(super.names,this.iteration.names)}}class _ extends v{constructor(V,Q,se,be){super(),this.varKind=V,this.name=Q,this.from=se,this.to=be}render(V){const Q=V.es5?n.varKinds.var:this.varKind,{name:se,from:be,to:he}=this;return`for(${Q} ${se}=${be}; ${se}<${he}; ${se}++)`+super.render(V)}get names(){const V=O(super.names,this.from);return O(V,this.to)}}class E extends v{constructor(V,Q,se,be){super(),this.loop=V,this.varKind=Q,this.name=se,this.iterable=be}render(V){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(V)}optimizeNames(V,Q){if(super.optimizeNames(V,Q))return this.iterable=B(this.iterable,V,Q),this}get names(){return L(super.names,this.iterable.names)}}class S extends p{constructor(V,Q,se){super(),this.name=V,this.args=Q,this.async=se}render(V){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(V)}}S.kind="func";class C extends h{render(V){return"return "+super.render(V)}}C.kind="return";class A extends p{render(V){let Q="try"+super.render(V);return this.catch&&(Q+=this.catch.render(V)),this.finally&&(Q+=this.finally.render(V)),Q}optimizeNodes(){var V,Q;return super.optimizeNodes(),(V=this.catch)===null||V===void 0||V.optimizeNodes(),(Q=this.finally)===null||Q===void 0||Q.optimizeNodes(),this}optimizeNames(V,Q){var se,be;return super.optimizeNames(V,Q),(se=this.catch)===null||se===void 0||se.optimizeNames(V,Q),(be=this.finally)===null||be===void 0||be.optimizeNames(V,Q),this}get names(){const V=super.names;return this.catch&&L(V,this.catch.names),this.finally&&L(V,this.finally.names),V}}class R extends p{constructor(V){super(),this.error=V}render(V){return`catch(${this.error})`+super.render(V)}}R.kind="catch";class k extends p{render(V){return"finally"+super.render(V)}}k.kind="finally";class N{constructor(V,Q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Q,_n:Q.lines?`
`:""},this._extScope=V,this._scope=new n.Scope({parent:V}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(V){return this._scope.name(V)}scopeName(V){return this._extScope.name(V)}scopeValue(V,Q){const se=this._extScope.value(V,Q);return(this._values[se.prefix]||(this._values[se.prefix]=new Set)).add(se),se}getScopeValue(V,Q){return this._extScope.getValue(V,Q)}scopeRefs(V){return this._extScope.scopeRefs(V,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(V,Q,se,be){const he=this._scope.toName(Q);return se!==void 0&&be&&(this._constants[he.str]=se),this._leafNode(new o(V,he,se)),he}const(V,Q,se){return this._def(n.varKinds.const,V,Q,se)}let(V,Q,se){return this._def(n.varKinds.let,V,Q,se)}var(V,Q,se){return this._def(n.varKinds.var,V,Q,se)}assign(V,Q,se){return this._leafNode(new a(V,Q,se))}add(V,Q){return this._leafNode(new u(V,e.operators.ADD,Q))}code(V){return typeof V=="function"?V():V!==t.nil&&this._leafNode(new d(V)),this}object(...V){const Q=["{"];for(const[se,be]of V)Q.length>1&&Q.push(","),Q.push(se),(se!==be||this.opts.es5)&&(Q.push(":"),(0,t.addCodeArg)(Q,be));return Q.push("}"),new t._Code(Q)}if(V,Q,se){if(this._blockNode(new y(V)),Q&&se)this.code(Q).else().code(se).endIf();else if(Q)this.code(Q).endIf();else if(se)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(V){return this._elseNode(new y(V))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(V,Q){return this._blockNode(V),Q&&this.code(Q).endFor(),this}for(V,Q){return this._for(new b(V),Q)}forRange(V,Q,se,be,he=this.opts.es5?n.varKinds.var:n.varKinds.let){const Ae=this._scope.toName(V);return this._for(new _(he,Ae,Q,se),()=>be(Ae))}forOf(V,Q,se,be=n.varKinds.const){const he=this._scope.toName(V);if(this.opts.es5){const Ae=Q instanceof t.Name?Q:this.var("_arr",Q);return this.forRange("_i",0,(0,t._)`${Ae}.length`,Ne=>{this.var(he,(0,t._)`${Ae}[${Ne}]`),se(he)})}return this._for(new E("of",be,he,Q),()=>se(he))}forIn(V,Q,se,be=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(V,(0,t._)`Object.keys(${Q})`,se);const he=this._scope.toName(V);return this._for(new E("in",be,he,Q),()=>se(he))}endFor(){return this._endBlockNode(v)}label(V){return this._leafNode(new l(V))}break(V){return this._leafNode(new c(V))}return(V){const Q=new C;if(this._blockNode(Q),this.code(V),Q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(V,Q,se){if(!Q&&!se)throw new Error('CodeGen: "try" without "catch" and "finally"');const be=new A;if(this._blockNode(be),this.code(V),Q){const he=this.name("e");this._currNode=be.catch=new R(he),Q(he)}return se&&(this._currNode=be.finally=new k,this.code(se)),this._endBlockNode(R,k)}throw(V){return this._leafNode(new f(V))}block(V,Q){return this._blockStarts.push(this._nodes.length),V&&this.code(V).endBlock(Q),this}endBlock(V){const Q=this._blockStarts.pop();if(Q===void 0)throw new Error("CodeGen: not in self-balancing block");const se=this._nodes.length-Q;if(se<0||V!==void 0&&se!==V)throw new Error(`CodeGen: wrong number of nodes: ${se} vs ${V} expected`);return this._nodes.length=Q,this}func(V,Q=t.nil,se,be){return this._blockNode(new S(V,Q,se)),be&&this.code(be).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(V=1){for(;V-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(V){return this._currNode.nodes.push(V),this}_blockNode(V){this._currNode.nodes.push(V),this._nodes.push(V)}_endBlockNode(V,Q){const se=this._currNode;if(se instanceof V||Q&&se instanceof Q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Q?`${V.kind}/${Q.kind}`:V.kind}"`)}_elseNode(V){const Q=this._currNode;if(!(Q instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Q.else=V,this}get _root(){return this._nodes[0]}get _currNode(){const V=this._nodes;return V[V.length-1]}set _currNode(V){const Q=this._nodes;Q[Q.length-1]=V}}e.CodeGen=N;function L(M,V){for(const Q in V)M[Q]=(M[Q]||0)+(V[Q]||0);return M}function O(M,V){return V instanceof t._CodeOrName?L(M,V.names):M}function B(M,V,Q){if(M instanceof t.Name)return se(M);if(!be(M))return M;return new t._Code(M._items.reduce((he,Ae)=>(Ae instanceof t.Name&&(Ae=se(Ae)),Ae instanceof t._Code?he.push(...Ae._items):he.push(Ae),he),[]));function se(he){const Ae=Q[he.str];return Ae===void 0||V[he.str]!==1?he:(delete V[he.str],Ae)}function be(he){return he instanceof t._Code&&he._items.some(Ae=>Ae instanceof t.Name&&V[Ae.str]===1&&Q[Ae.str]!==void 0)}}function q(M,V){for(const Q in V)M[Q]=(M[Q]||0)-(V[Q]||0)}function H(M){return typeof M=="boolean"||typeof M=="number"||M===null?!M:(0,t._)`!${W(M)}`}e.not=H;const G=j(e.operators.AND);function K(...M){return M.reduce(G)}e.and=K;const J=j(e.operators.OR);function F(...M){return M.reduce(J)}e.or=F;function j(M){return(V,Q)=>V===t.nil?Q:Q===t.nil?V:(0,t._)`${W(V)} ${M} ${W(Q)}`}function W(M){return M instanceof t.Name?M:(0,t._)`(${M})`}})(fr);var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.checkStrictMode=Ft.getErrorPath=Ft.Type=Ft.useFunc=Ft.setEvaluated=Ft.evaluatedPropsToName=Ft.mergeEvaluated=Ft.eachItem=Ft.unescapeJsonPointer=Ft.escapeJsonPointer=Ft.escapeFragment=Ft.unescapeFragment=Ft.schemaRefOrVal=Ft.schemaHasRulesButRef=Ft.schemaHasRules=Ft.checkUnknownRules=Ft.alwaysValidSchema=Ft.toHash=void 0;const Hi=fr,Bun=S3;function jun(e){const t={};for(const n of e)t[n]=!0;return t}Ft.toHash=jun;function Uun(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Fje(e,t),!Bje(t,e.self.RULES.all))}Ft.alwaysValidSchema=Uun;function Fje(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||zje(e,`unknown keyword: "${s}"`)}Ft.checkUnknownRules=Fje;function Bje(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Ft.schemaHasRules=Bje;function zun(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Ft.schemaHasRulesButRef=zun;function Vun({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Hi._)`${n}`}return(0,Hi._)`${e}${t}${(0,Hi.getProperty)(r)}`}Ft.schemaRefOrVal=Vun;function Hun(e){return jje(decodeURIComponent(e))}Ft.unescapeFragment=Hun;function qun(e){return encodeURIComponent(fae(e))}Ft.escapeFragment=qun;function fae(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Ft.escapeJsonPointer=fae;function jje(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Ft.unescapeJsonPointer=jje;function Wun(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Ft.eachItem=Wun;function v_e({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Hi.Name?(s instanceof Hi.Name?e(i,s,o):t(i,s,o),o):s instanceof Hi.Name?(t(i,o,s),s):n(s,o);return a===Hi.Name&&!(u instanceof Hi.Name)?r(i,u):u}}Ft.mergeEvaluated={props:v_e({mergeNames:(e,t,n)=>e.if((0,Hi._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Hi._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Hi._)`${n} || {}`).code((0,Hi._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Hi._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Hi._)`${n} || {}`),dae(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Uje}),items:v_e({mergeNames:(e,t,n)=>e.if((0,Hi._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Hi._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Hi._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Hi._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Uje(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Hi._)`{}`);return t!==void 0&&dae(e,n,t),n}Ft.evaluatedPropsToName=Uje;function dae(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Hi._)`${t}${(0,Hi.getProperty)(r)}`,!0))}Ft.setEvaluated=dae;const b_e={};function Gun(e,t){return e.scopeValue("func",{ref:t,code:b_e[t.code]||(b_e[t.code]=new Bun._Code(t.code))})}Ft.useFunc=Gun;var FK;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(FK||(Ft.Type=FK={}));function Yun(e,t,n){if(e instanceof Hi.Name){const r=t===FK.Num;return n?r?(0,Hi._)`"[" + ${e} + "]"`:(0,Hi._)`"['" + ${e} + "']"`:r?(0,Hi._)`"/" + ${e}`:(0,Hi._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Hi.getProperty)(e).toString():"/"+fae(e)}Ft.getErrorPath=Yun;function zje(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Ft.checkStrictMode=zje;var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});const ou=fr,Kun={data:new ou.Name("data"),valCxt:new ou.Name("valCxt"),instancePath:new ou.Name("instancePath"),parentData:new ou.Name("parentData"),parentDataProperty:new ou.Name("parentDataProperty"),rootData:new ou.Name("rootData"),dynamicAnchors:new ou.Name("dynamicAnchors"),vErrors:new ou.Name("vErrors"),errors:new ou.Name("errors"),this:new ou.Name("this"),self:new ou.Name("self"),scope:new ou.Name("scope"),json:new ou.Name("json"),jsonPos:new ou.Name("jsonPos"),jsonLen:new ou.Name("jsonLen"),jsonPart:new ou.Name("jsonPart")};Wm.default=Kun;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=fr,n=Ft,r=Wm;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:_}=g,{gen:E,compositeRule:S,allErrors:C}=_,A=f(g,y,v);b??(S||C)?u(E,A):l(_,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:_,compositeRule:E,allErrors:S}=b,C=f(g,y,v);u(_,C),E||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:_,it:E}){if(_===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",_,r.default.errors,C=>{g.const(S,(0,t._)`${r.default.vErrors}[${C}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:_}=g;_.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:_}=g,E=[h(_,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let _=b?y:(0,t.str)`${y}/${g}`;return v&&(_=(0,t.str)`${_}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,_]}function m(g,{params:y,message:v},b){const{keyword:_,data:E,schemaValue:S,it:C}=g,{opts:A,propertyName:R,topSchemaRef:k,schemaPath:N}=C;b.push([c.keyword,_],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${k}${N}`],[r.default.data,E]),R&&b.push([c.propertyName,R])}})(xD);Object.defineProperty(aS,"__esModule",{value:!0});aS.boolOrEmptySchema=aS.topBoolOrEmptySchema=void 0;const Xun=xD,Qun=fr,Jun=Wm,Zun={message:"boolean schema is false"};function eln(e){const{gen:t,schema:n,validateName:r}=e;n===!1?Vje(e,!1):typeof n=="object"&&n.$async===!0?t.return(Jun.default.data):(t.assign((0,Qun._)`${r}.errors`,null),t.return(!0))}aS.topBoolOrEmptySchema=eln;function tln(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),Vje(e)):n.var(t,!0)}aS.boolOrEmptySchema=tln;function Vje(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Xun.reportError)(i,Zun,void 0,t)}var $o={},A_={};Object.defineProperty(A_,"__esModule",{value:!0});A_.getRules=A_.isJSONType=void 0;const nln=["string","number","integer","boolean","null","object","array"],rln=new Set(nln);function iln(e){return typeof e=="string"&&rln.has(e)}A_.isJSONType=iln;function sln(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}A_.getRules=sln;var ig={};Object.defineProperty(ig,"__esModule",{value:!0});ig.shouldUseRule=ig.shouldUseGroup=ig.schemaHasRulesForType=void 0;function oln({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&Hje(e,r)}ig.schemaHasRulesForType=oln;function Hje(e,t){return t.rules.some(n=>qje(e,n))}ig.shouldUseGroup=Hje;function qje(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}ig.shouldUseRule=qje;Object.defineProperty($o,"__esModule",{value:!0});$o.reportTypeError=$o.checkDataTypes=$o.checkDataType=$o.coerceAndCheckDataType=$o.getJSONTypes=$o.getSchemaTypes=$o.DataType=void 0;const aln=A_,uln=ig,lln=xD,Xn=fr,Wje=Ft;var V2;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(V2||($o.DataType=V2={}));function cln(e){const t=Gje(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}$o.getSchemaTypes=cln;function Gje(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(aln.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}$o.getJSONTypes=Gje;function fln(e,t){const{gen:n,data:r,opts:i}=e,s=dln(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,uln.schemaHasRulesForType)(e,t[0]));if(o){const a=hae(t,r,i.strictNumbers,V2.Wrong);n.if(a,()=>{s.length?hln(e,t,s):pae(e)})}return o}$o.coerceAndCheckDataType=fln;const Yje=new Set(["string","number","integer","boolean","null"]);function dln(e,t){return t?e.filter(n=>Yje.has(n)||t==="array"&&n==="array"):[]}function hln(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Xn._)`typeof ${i}`),a=r.let("coerced",(0,Xn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Xn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Xn._)`${i}[0]`).assign(o,(0,Xn._)`typeof ${i}`).if(hae(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Xn._)`${a} !== undefined`);for(const l of n)(Yje.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),pae(e),r.endIf(),r.if((0,Xn._)`${a} !== undefined`,()=>{r.assign(i,a),pln(e,a)});function u(l){switch(l){case"string":r.elseIf((0,Xn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Xn._)`"" + ${i}`).elseIf((0,Xn._)`${i} === null`).assign(a,(0,Xn._)`""`);return;case"number":r.elseIf((0,Xn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Xn._)`+${i}`);return;case"integer":r.elseIf((0,Xn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Xn._)`+${i}`);return;case"boolean":r.elseIf((0,Xn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Xn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Xn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Xn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Xn._)`[${i}]`)}}}function pln({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Xn._)`${t} !== undefined`,()=>e.assign((0,Xn._)`${t}[${n}]`,r))}function BK(e,t,n,r=V2.Correct){const i=r===V2.Correct?Xn.operators.EQ:Xn.operators.NEQ;let s;switch(e){case"null":return(0,Xn._)`${t} ${i} null`;case"array":s=(0,Xn._)`Array.isArray(${t})`;break;case"object":s=(0,Xn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Xn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Xn._)`typeof ${t} ${i} ${e}`}return r===V2.Correct?s:(0,Xn.not)(s);function o(a=Xn.nil){return(0,Xn.and)((0,Xn._)`typeof ${t} == "number"`,a,n?(0,Xn._)`isFinite(${t})`:Xn.nil)}}$o.checkDataType=BK;function hae(e,t,n,r){if(e.length===1)return BK(e[0],t,n,r);let i;const s=(0,Wje.toHash)(e);if(s.array&&s.object){const o=(0,Xn._)`typeof ${t} != "object"`;i=s.null?o:(0,Xn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Xn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Xn.and)(i,BK(o,t,n,r));return i}$o.checkDataTypes=hae;const mln={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Xn._)`{type: ${e}}`:(0,Xn._)`{type: ${t}}`};function pae(e){const t=gln(e);(0,lln.reportError)(t,mln)}$o.reportTypeError=pae;function gln(e){const{gen:t,data:n,schema:r}=e,i=(0,Wje.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var P9={};Object.defineProperty(P9,"__esModule",{value:!0});P9.assignDefaults=void 0;const yE=fr,yln=Ft;function vln(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)x_e(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>x_e(e,s,i.default))}P9.assignDefaults=vln;function x_e(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,yE._)`${s}${(0,yE.getProperty)(t)}`;if(i){(0,yln.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,yE._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,yE._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,yE._)`${a} = ${(0,yE.stringify)(n)}`)}var Vp={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.validateUnion=lr.validateArray=lr.usePattern=lr.callValidateCode=lr.schemaProperties=lr.allSchemaProperties=lr.noPropertyInData=lr.propertyInData=lr.isOwnProperty=lr.hasPropFunc=lr.reportMissingProp=lr.checkMissingProp=lr.checkReportMissingProp=void 0;const ls=fr,mae=Ft,xy=Wm,bln=Ft;function xln(e,t){const{gen:n,data:r,it:i}=e;n.if(yae(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ls._)`${t}`},!0),e.error()})}lr.checkReportMissingProp=xln;function _ln({gen:e,data:t,it:{opts:n}},r,i){return(0,ls.or)(...r.map(s=>(0,ls.and)(yae(e,t,s,n.ownProperties),(0,ls._)`${i} = ${s}`)))}lr.checkMissingProp=_ln;function wln(e,t){e.setParams({missingProperty:t},!0),e.error()}lr.reportMissingProp=wln;function Kje(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ls._)`Object.prototype.hasOwnProperty`})}lr.hasPropFunc=Kje;function gae(e,t,n){return(0,ls._)`${Kje(e)}.call(${t}, ${n})`}lr.isOwnProperty=gae;function Eln(e,t,n,r){const i=(0,ls._)`${t}${(0,ls.getProperty)(n)} !== undefined`;return r?(0,ls._)`${i} && ${gae(e,t,n)}`:i}lr.propertyInData=Eln;function yae(e,t,n,r){const i=(0,ls._)`${t}${(0,ls.getProperty)(n)} === undefined`;return r?(0,ls.or)(i,(0,ls.not)(gae(e,t,n))):i}lr.noPropertyInData=yae;function Xje(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}lr.allSchemaProperties=Xje;function Tln(e,t){return Xje(t).filter(n=>!(0,mae.alwaysValidSchema)(e,t[n]))}lr.schemaProperties=Tln;function Sln({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,ls._)`${e}, ${t}, ${r}${i}`:t,f=[[xy.default.instancePath,(0,ls.strConcat)(xy.default.instancePath,s)],[xy.default.parentData,o.parentData],[xy.default.parentDataProperty,o.parentDataProperty],[xy.default.rootData,xy.default.rootData]];o.opts.dynamicRef&&f.push([xy.default.dynamicAnchors,xy.default.dynamicAnchors]);const d=(0,ls._)`${c}, ${n.object(...f)}`;return u!==ls.nil?(0,ls._)`${a}.call(${u}, ${d})`:(0,ls._)`${a}(${d})`}lr.callValidateCode=Sln;const Cln=(0,ls._)`new RegExp`;function Aln({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ls._)`${i.code==="new RegExp"?Cln:(0,bln.useFunc)(e,i)}(${n}, ${r})`})}lr.usePattern=Aln;function Iln(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,ls._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:mae.Type.Num},s),t.if((0,ls.not)(s),a)})}}lr.validateArray=Iln;function kln(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,mae.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ls._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ls.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}lr.validateUnion=kln;Object.defineProperty(Vp,"__esModule",{value:!0});Vp.validateKeywordUsage=Vp.validSchemaType=Vp.funcKeywordCode=Vp.macroKeywordCode=void 0;const Xu=fr,ox=Wm,Rln=lr,Pln=xD;function Dln(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=Qje(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Xu.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Vp.macroKeywordCode=Dln;function Nln(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;$ln(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=Qje(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&__e(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&__e(e),g(()=>Oln(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Xu._)`await `),v=>r.assign(f,!1).if((0,Xu._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Xu._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Xu._)`${c}.errors`;return r.assign(y,null),m(Xu.nil),y}function m(y=t.async?(0,Xu._)`await `:Xu.nil){const v=u.opts.passContext?ox.default.this:ox.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Xu._)`${y}${(0,Rln.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Xu.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Vp.funcKeywordCode=Nln;function __e(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Xu._)`${r.parentData}[${r.parentDataProperty}]`))}function Oln(e,t){const{gen:n}=e;n.if((0,Xu._)`Array.isArray(${t})`,()=>{n.assign(ox.default.vErrors,(0,Xu._)`${ox.default.vErrors} === null ? ${t} : ${ox.default.vErrors}.concat(${t})`).assign(ox.default.errors,(0,Xu._)`${ox.default.vErrors}.length`),(0,Pln.extendErrors)(e)},()=>e.error())}function $ln({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Qje(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Xu.stringify)(n)})}function Lln(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Vp.validSchemaType=Lln;function Mln({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Vp.validateKeywordUsage=Mln;var R1={};Object.defineProperty(R1,"__esModule",{value:!0});R1.extendSubschemaMode=R1.extendSubschemaData=R1.getSubschema=void 0;const Bp=fr,Jje=Ft;function Fln(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Bp._)`${e.schemaPath}${(0,Bp.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Bp._)`${e.schemaPath}${(0,Bp.getProperty)(t)}${(0,Bp.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Jje.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}R1.getSubschema=Fln;function Bln(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Bp._)`${t.data}${(0,Bp.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Bp.str)`${l}${(0,Jje.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Bp._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Bp.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}R1.extendSubschemaData=Bln;function jln(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}R1.extendSubschemaMode=jln;var Oa={},Zje={exports:{}},l1=Zje.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};P6(t,r,i,e,"",e)};l1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};l1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};l1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};l1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function P6(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in l1.arrayKeywords)for(var d=0;d<f.length;d++)P6(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in l1.propsKeywords){if(f&&typeof f=="object")for(var h in f)P6(e,t,n,f[h],i+"/"+c+"/"+Uln(h),s,i,c,r,h)}else(c in l1.keywords||e.allKeys&&!(c in l1.skipKeywords))&&P6(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function Uln(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var zln=Zje.exports;Object.defineProperty(Oa,"__esModule",{value:!0});Oa.getSchemaRefs=Oa.resolveUrl=Oa.normalizeId=Oa._getFullPath=Oa.getFullPath=Oa.inlineRef=void 0;const Vln=Ft,Hln=zZ,qln=zln,Wln=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Gln(e,t=!0){return typeof e=="boolean"?!0:t===!0?!jK(e):t?eUe(e)<=t:!1}Oa.inlineRef=Gln;const Yln=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function jK(e){for(const t in e){if(Yln.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(jK)||typeof n=="object"&&jK(n))return!0}return!1}function eUe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Wln.has(n)&&(typeof e[n]=="object"&&(0,Vln.eachItem)(e[n],r=>t+=eUe(r)),t===1/0))return 1/0}return t}function tUe(e,t="",n){n!==!1&&(t=H2(t));const r=e.parse(t);return nUe(e,r)}Oa.getFullPath=tUe;function nUe(e,t){return e.serialize(t).split("#")[0]+"#"}Oa._getFullPath=nUe;const Kln=/#\/?$/;function H2(e){return e?e.replace(Kln,""):""}Oa.normalizeId=H2;function Xln(e,t,n){return n=H2(n),e.resolve(t,n)}Oa.resolveUrl=Xln;const Qln=/^[a-z_][-a-z0-9._]*$/i;function Jln(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=H2(e[n]||t),s={"":i},o=tUe(r,i,!1),a={},u=new Set;return qln(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const _=this.opts.uriResolver.resolve;if(b=H2(g?_(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==H2(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!Qln.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!Hln(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Oa.getSchemaRefs=Jln;Object.defineProperty(Ah,"__esModule",{value:!0});Ah.getData=Ah.KeywordCxt=Ah.validateFunctionCode=void 0;const rUe=aS,w_e=$o,vae=ig,dM=$o,Zln=P9,Mk=Vp,lH=R1,Zt=fr,kn=Wm,ecn=Oa,sg=Ft,YA=xD;function tcn(e){if(oUe(e)&&(aUe(e),sUe(e))){icn(e);return}iUe(e,()=>(0,rUe.topBoolOrEmptySchema)(e))}Ah.validateFunctionCode=tcn;function iUe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Zt._)`${kn.default.data}, ${kn.default.valCxt}`,r.$async,()=>{e.code((0,Zt._)`"use strict"; ${E_e(n,i)}`),rcn(e,i),e.code(s)}):e.func(t,(0,Zt._)`${kn.default.data}, ${ncn(i)}`,r.$async,()=>e.code(E_e(n,i)).code(s))}function ncn(e){return(0,Zt._)`{${kn.default.instancePath}="", ${kn.default.parentData}, ${kn.default.parentDataProperty}, ${kn.default.rootData}=${kn.default.data}${e.dynamicRef?(0,Zt._)`, ${kn.default.dynamicAnchors}={}`:Zt.nil}}={}`}function rcn(e,t){e.if(kn.default.valCxt,()=>{e.var(kn.default.instancePath,(0,Zt._)`${kn.default.valCxt}.${kn.default.instancePath}`),e.var(kn.default.parentData,(0,Zt._)`${kn.default.valCxt}.${kn.default.parentData}`),e.var(kn.default.parentDataProperty,(0,Zt._)`${kn.default.valCxt}.${kn.default.parentDataProperty}`),e.var(kn.default.rootData,(0,Zt._)`${kn.default.valCxt}.${kn.default.rootData}`),t.dynamicRef&&e.var(kn.default.dynamicAnchors,(0,Zt._)`${kn.default.valCxt}.${kn.default.dynamicAnchors}`)},()=>{e.var(kn.default.instancePath,(0,Zt._)`""`),e.var(kn.default.parentData,(0,Zt._)`undefined`),e.var(kn.default.parentDataProperty,(0,Zt._)`undefined`),e.var(kn.default.rootData,kn.default.data),t.dynamicRef&&e.var(kn.default.dynamicAnchors,(0,Zt._)`{}`)})}function icn(e){const{schema:t,opts:n,gen:r}=e;iUe(e,()=>{n.$comment&&t.$comment&&lUe(e),lcn(e),r.let(kn.default.vErrors,null),r.let(kn.default.errors,0),n.unevaluated&&scn(e),uUe(e),dcn(e)})}function scn(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Zt._)`${n}.evaluated`),t.if((0,Zt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Zt._)`${e.evaluated}.props`,(0,Zt._)`undefined`)),t.if((0,Zt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Zt._)`${e.evaluated}.items`,(0,Zt._)`undefined`))}function E_e(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Zt._)`/*# sourceURL=${n} */`:Zt.nil}function ocn(e,t){if(oUe(e)&&(aUe(e),sUe(e))){acn(e,t);return}(0,rUe.boolOrEmptySchema)(e,t)}function sUe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function oUe(e){return typeof e.schema!="boolean"}function acn(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&lUe(e),ccn(e),fcn(e);const s=r.const("_errs",kn.default.errors);uUe(e,s),r.var(t,(0,Zt._)`${s} === ${kn.default.errors}`)}function aUe(e){(0,sg.checkUnknownRules)(e),ucn(e)}function uUe(e,t){if(e.opts.jtd)return T_e(e,[],!1,t);const n=(0,w_e.getSchemaTypes)(e.schema),r=(0,w_e.coerceAndCheckDataType)(e,n);T_e(e,n,!r,t)}function ucn(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,sg.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function lcn(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,sg.checkStrictMode)(e,"default is ignored in the schema root")}function ccn(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,ecn.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function fcn(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function lUe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Zt._)`${kn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Zt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Zt._)`${kn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function dcn(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Zt._)`${kn.default.errors} === 0`,()=>t.return(kn.default.data),()=>t.throw((0,Zt._)`new ${i}(${kn.default.vErrors})`)):(t.assign((0,Zt._)`${r}.errors`,kn.default.vErrors),s.unevaluated&&hcn(e),t.return((0,Zt._)`${kn.default.errors} === 0`))}function hcn({gen:e,evaluated:t,props:n,items:r}){n instanceof Zt.Name&&e.assign((0,Zt._)`${t}.props`,n),r instanceof Zt.Name&&e.assign((0,Zt._)`${t}.items`,r)}function T_e(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,sg.schemaHasRulesButRef)(s,c))){i.block(()=>dUe(e,"$ref",c.all.$ref.definition));return}u.jtd||pcn(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,vae.shouldUseGroup)(s,d)&&(d.type?(i.if((0,dM.checkDataType)(d.type,o,u.strictNumbers)),S_e(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,dM.reportTypeError)(e)),i.endIf()):S_e(e,d),a||i.if((0,Zt._)`${kn.default.errors} === ${r||0}`))}}function S_e(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,Zln.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,vae.shouldUseRule)(r,s)&&dUe(e,s.keyword,s.definition,t.type)})}function pcn(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(mcn(e,t),e.opts.allowUnionTypes||gcn(e,t),ycn(e,e.dataTypes))}function mcn(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{cUe(e.dataTypes,n)||bae(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),bcn(e,t)}}function gcn(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&bae(e,"use allowUnionTypes to allow union type keyword")}function ycn(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,vae.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>vcn(t,o))&&bae(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function vcn(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function cUe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function bcn(e,t){const n=[];for(const r of e.dataTypes)cUe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function bae(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,sg.checkStrictMode)(e,t,e.opts.strictTypes)}class fUe{constructor(t,n,r){if((0,Mk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,sg.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",hUe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Mk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",kn.default.errors))}result(t,n,r){this.failResult((0,Zt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Zt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Zt._)`${n} !== undefined && (${(0,Zt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?YA.reportExtraError:YA.reportError)(this,this.def.error,n)}$dataError(){(0,YA.reportError)(this,this.def.$dataError||YA.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,YA.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Zt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Zt.nil,n=Zt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Zt.or)((0,Zt._)`${i} === undefined`,n)),t!==Zt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Zt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Zt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Zt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Zt._)`${(0,dM.checkDataTypes)(u,n,s.opts.strictNumbers,dM.DataType.Wrong)}`}return Zt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Zt._)`!${u}(${n})`}return Zt.nil}}subschema(t,n){const r=(0,lH.getSubschema)(this.it,t);(0,lH.extendSubschemaData)(r,this.it,t),(0,lH.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return ocn(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=sg.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=sg.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Zt.Name)),!0}}Ah.KeywordCxt=fUe;function dUe(e,t,n,r){const i=new fUe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Mk.funcKeywordCode)(i,n):"macro"in n?(0,Mk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Mk.funcKeywordCode)(i,n)}const xcn=/^\/(?:[^~]|~0|~1)*$/,_cn=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function hUe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return kn.default.rootData;if(e[0]==="/"){if(!xcn.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=kn.default.rootData}else{const l=_cn.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Zt._)`${s}${(0,Zt.getProperty)((0,sg.unescapeJsonPointer)(l))}`,o=(0,Zt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Ah.getData=hUe;var _D={};Object.defineProperty(_D,"__esModule",{value:!0});class wcn extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}_D.default=wcn;var IC={};Object.defineProperty(IC,"__esModule",{value:!0});const cH=Oa;class Ecn extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,cH.resolveUrl)(t,n,r),this.missingSchema=(0,cH.normalizeId)((0,cH.getFullPath)(t,this.missingRef))}}IC.default=Ecn;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.resolveSchema=Yl.getCompilingSchema=Yl.resolveRef=Yl.compileSchema=Yl.SchemaEnv=void 0;const zd=fr,Tcn=_D,Db=Wm,fh=Oa,C_e=Ft,Scn=Ah;class D9{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,fh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Yl.SchemaEnv=D9;function xae(e){const t=pUe.call(this,e);if(t)return t;const n=(0,fh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new zd.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:Tcn.default,code:(0,zd._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Db.default.data,parentData:Db.default.parentData,parentDataProperty:Db.default.parentDataProperty,dataNames:[Db.default.data],dataPathArr:[zd.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,zd.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:zd.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,zd._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,Scn.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Db.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Db.default.self}`,`${Db.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof zd.Name?void 0:p,items:m instanceof zd.Name?void 0:m,dynamicProps:p instanceof zd.Name,dynamicItems:m instanceof zd.Name},h.source&&(h.source.evaluated=(0,zd.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Yl.compileSchema=xae;function Ccn(e,t,n){var r;n=(0,fh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=kcn.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new D9({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Acn.call(this,s)}Yl.resolveRef=Ccn;function Acn(e){return(0,fh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:xae.call(this,e)}function pUe(e){for(const t of this._compilations)if(Icn(t,e))return t}Yl.getCompilingSchema=pUe;function Icn(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function kcn(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||N9.call(this,e,t)}function N9(e,t){const n=this.opts.uriResolver.parse(t),r=(0,fh._getFullPath)(this.opts.uriResolver,n);let i=(0,fh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return fH.call(this,n,e);const s=(0,fh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=N9.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:fH.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||xae.call(this,o),s===(0,fh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,fh.resolveUrl)(this.opts.uriResolver,i,l)),new D9({schema:a,schemaId:u,root:e,baseId:i})}return fH.call(this,n,o)}}Yl.resolveSchema=N9;const Rcn=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function fH(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,C_e.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!Rcn.has(a)&&l&&(t=(0,fh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,C_e.schemaHasRulesButRef)(n,this.RULES)){const a=(0,fh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=N9.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new D9({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Pcn="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Dcn="Meta-schema for $data reference (JSON AnySchema extension proposal)",Ncn="object",Ocn=["$data"],$cn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Lcn=!1,Mcn={$id:Pcn,description:Dcn,type:Ncn,required:Ocn,properties:$cn,additionalProperties:Lcn};var _ae={},UK={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Jt,function(n){function r(){for(var me=arguments.length,ue=Array(me),ge=0;ge<me;ge++)ue[ge]=arguments[ge];if(ue.length>1){ue[0]=ue[0].slice(0,-1);for(var Me=ue.length-1,Le=1;Le<Me;++Le)ue[Le]=ue[Le].slice(1,-1);return ue[Me]=ue[Me].slice(1),ue.join("")}else return ue[0]}function i(me){return"(?:"+me+")"}function s(me){return me===void 0?"undefined":me===null?"null":Object.prototype.toString.call(me).split(" ").pop().split("]").shift().toLowerCase()}function o(me){return me.toUpperCase()}function a(me){return me!=null?me instanceof Array?me:typeof me.length!="number"||me.split||me.setInterval||me.call?[me]:Array.prototype.slice.call(me):[]}function u(me,ue){var ge=me;if(ue)for(var Me in ue)ge[Me]=ue[Me];return ge}function l(me){var ue="[A-Za-z]",ge="[0-9]",Me=r(ge,"[A-Fa-f]"),Le=i(i("%[EFef]"+Me+"%"+Me+Me+"%"+Me+Me)+"|"+i("%[89A-Fa-f]"+Me+"%"+Me+Me)+"|"+i("%"+Me+Me)),_t="[\\:\\/\\?\\#\\[\\]\\@]",Ut="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",dn=r(_t,Ut),Zn=me?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ur=me?"[\\uE000-\\uF8FF]":"[]",On=r(ue,ge,"[\\-\\.\\_\\~]",Zn);i(ue+r(ue,ge,"[\\+\\-\\.]")+"*"),i(i(Le+"|"+r(On,Ut,"[\\:]"))+"*");var Cr=i(i("25[0-5]")+"|"+i("2[0-4]"+ge)+"|"+i("1"+ge+ge)+"|"+i("0?[1-9]"+ge)+"|0?0?"+ge),ai=i(Cr+"\\."+Cr+"\\."+Cr+"\\."+Cr),an=i(Me+"{1,4}"),Ar=i(i(an+"\\:"+an)+"|"+ai),Jr=i(i(an+"\\:")+"{6}"+Ar),yr=i("\\:\\:"+i(an+"\\:")+"{5}"+Ar),Pi=i(i(an)+"?\\:\\:"+i(an+"\\:")+"{4}"+Ar),go=i(i(i(an+"\\:")+"{0,1}"+an)+"?\\:\\:"+i(an+"\\:")+"{3}"+Ar),Di=i(i(i(an+"\\:")+"{0,2}"+an)+"?\\:\\:"+i(an+"\\:")+"{2}"+Ar),Co=i(i(i(an+"\\:")+"{0,3}"+an)+"?\\:\\:"+an+"\\:"+Ar),ns=i(i(i(an+"\\:")+"{0,4}"+an)+"?\\:\\:"+Ar),rs=i(i(i(an+"\\:")+"{0,5}"+an)+"?\\:\\:"+an),Ao=i(i(i(an+"\\:")+"{0,6}"+an)+"?\\:\\:"),Ea=i([Jr,yr,Pi,go,Di,Co,ns,rs,Ao].join("|")),yo=i(i(On+"|"+Le)+"+");i("[vV]"+Me+"+\\."+r(On,Ut,"[\\:]")+"+"),i(i(Le+"|"+r(On,Ut))+"*");var Cl=i(Le+"|"+r(On,Ut,"[\\:\\@]"));return i(i(Le+"|"+r(On,Ut,"[\\@]"))+"+"),i(i(Cl+"|"+r("[\\/\\?]",ur))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ue,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",On,Ut),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",On,Ut),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",On,Ut),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",On,Ut),"g"),NOT_QUERY:new RegExp(r("[^\\%]",On,Ut,"[\\:\\@\\/\\?]",ur),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",On,Ut,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",On,Ut),"g"),UNRESERVED:new RegExp(On,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",On,dn),"g"),PCT_ENCODED:new RegExp(Le,"g"),IPV4ADDRESS:new RegExp("^("+ai+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ea+")"+i(i("\\%25|\\%(?!"+Me+"{2})")+"("+yo+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function me(ue,ge){var Me=[],Le=!0,_t=!1,Ut=void 0;try{for(var dn=ue[Symbol.iterator](),Zn;!(Le=(Zn=dn.next()).done)&&(Me.push(Zn.value),!(ge&&Me.length===ge));Le=!0);}catch(ur){_t=!0,Ut=ur}finally{try{!Le&&dn.return&&dn.return()}finally{if(_t)throw Ut}}return Me}return function(ue,ge){if(Array.isArray(ue))return ue;if(Symbol.iterator in Object(ue))return me(ue,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(me){if(Array.isArray(me)){for(var ue=0,ge=Array(me.length);ue<me.length;ue++)ge[ue]=me[ue];return ge}else return Array.from(me)},p=2147483647,m=36,g=1,y=26,v=38,b=700,_=72,E=128,S="-",C=/^xn--/,A=/[^\0-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,L=Math.floor,O=String.fromCharCode;function B(me){throw new RangeError(k[me])}function q(me,ue){for(var ge=[],Me=me.length;Me--;)ge[Me]=ue(me[Me]);return ge}function H(me,ue){var ge=me.split("@"),Me="";ge.length>1&&(Me=ge[0]+"@",me=ge[1]),me=me.replace(R,".");var Le=me.split("."),_t=q(Le,ue).join(".");return Me+_t}function G(me){for(var ue=[],ge=0,Me=me.length;ge<Me;){var Le=me.charCodeAt(ge++);if(Le>=55296&&Le<=56319&&ge<Me){var _t=me.charCodeAt(ge++);(_t&64512)==56320?ue.push(((Le&1023)<<10)+(_t&1023)+65536):(ue.push(Le),ge--)}else ue.push(Le)}return ue}var K=function(ue){return String.fromCodePoint.apply(String,h(ue))},J=function(ue){return ue-48<10?ue-22:ue-65<26?ue-65:ue-97<26?ue-97:m},F=function(ue,ge){return ue+22+75*(ue<26)-((ge!=0)<<5)},j=function(ue,ge,Me){var Le=0;for(ue=Me?L(ue/b):ue>>1,ue+=L(ue/ge);ue>N*y>>1;Le+=m)ue=L(ue/N);return L(Le+(N+1)*ue/(ue+v))},W=function(ue){var ge=[],Me=ue.length,Le=0,_t=E,Ut=_,dn=ue.lastIndexOf(S);dn<0&&(dn=0);for(var Zn=0;Zn<dn;++Zn)ue.charCodeAt(Zn)>=128&&B("not-basic"),ge.push(ue.charCodeAt(Zn));for(var ur=dn>0?dn+1:0;ur<Me;){for(var On=Le,Cr=1,ai=m;;ai+=m){ur>=Me&&B("invalid-input");var an=J(ue.charCodeAt(ur++));(an>=m||an>L((p-Le)/Cr))&&B("overflow"),Le+=an*Cr;var Ar=ai<=Ut?g:ai>=Ut+y?y:ai-Ut;if(an<Ar)break;var Jr=m-Ar;Cr>L(p/Jr)&&B("overflow"),Cr*=Jr}var yr=ge.length+1;Ut=j(Le-On,yr,On==0),L(Le/yr)>p-_t&&B("overflow"),_t+=L(Le/yr),Le%=yr,ge.splice(Le++,0,_t)}return String.fromCodePoint.apply(String,ge)},M=function(ue){var ge=[];ue=G(ue);var Me=ue.length,Le=E,_t=0,Ut=_,dn=!0,Zn=!1,ur=void 0;try{for(var On=ue[Symbol.iterator](),Cr;!(dn=(Cr=On.next()).done);dn=!0){var ai=Cr.value;ai<128&&ge.push(O(ai))}}catch(qe){Zn=!0,ur=qe}finally{try{!dn&&On.return&&On.return()}finally{if(Zn)throw ur}}var an=ge.length,Ar=an;for(an&&ge.push(S);Ar<Me;){var Jr=p,yr=!0,Pi=!1,go=void 0;try{for(var Di=ue[Symbol.iterator](),Co;!(yr=(Co=Di.next()).done);yr=!0){var ns=Co.value;ns>=Le&&ns<Jr&&(Jr=ns)}}catch(qe){Pi=!0,go=qe}finally{try{!yr&&Di.return&&Di.return()}finally{if(Pi)throw go}}var rs=Ar+1;Jr-Le>L((p-_t)/rs)&&B("overflow"),_t+=(Jr-Le)*rs,Le=Jr;var Ao=!0,Ea=!1,yo=void 0;try{for(var Cl=ue[Symbol.iterator](),Sf;!(Ao=(Sf=Cl.next()).done);Ao=!0){var ee=Sf.value;if(ee<Le&&++_t>p&&B("overflow"),ee==Le){for(var pe=_t,oe=m;;oe+=m){var _e=oe<=Ut?g:oe>=Ut+y?y:oe-Ut;if(pe<_e)break;var Ce=pe-_e,xe=m-_e;ge.push(O(F(_e+Ce%xe,0))),pe=L(Ce/xe)}ge.push(O(F(pe,0))),Ut=j(_t,rs,Ar==an),_t=0,++Ar}}}catch(qe){Ea=!0,yo=qe}finally{try{!Ao&&Cl.return&&Cl.return()}finally{if(Ea)throw yo}}++_t,++Le}return ge.join("")},V=function(ue){return H(ue,function(ge){return C.test(ge)?W(ge.slice(4).toLowerCase()):ge})},Q=function(ue){return H(ue,function(ge){return A.test(ge)?"xn--"+M(ge):ge})},se={version:"2.1.0",ucs2:{decode:G,encode:K},decode:W,encode:M,toASCII:Q,toUnicode:V},be={};function he(me){var ue=me.charCodeAt(0),ge=void 0;return ue<16?ge="%0"+ue.toString(16).toUpperCase():ue<128?ge="%"+ue.toString(16).toUpperCase():ue<2048?ge="%"+(ue>>6|192).toString(16).toUpperCase()+"%"+(ue&63|128).toString(16).toUpperCase():ge="%"+(ue>>12|224).toString(16).toUpperCase()+"%"+(ue>>6&63|128).toString(16).toUpperCase()+"%"+(ue&63|128).toString(16).toUpperCase(),ge}function Ae(me){for(var ue="",ge=0,Me=me.length;ge<Me;){var Le=parseInt(me.substr(ge+1,2),16);if(Le<128)ue+=String.fromCharCode(Le),ge+=3;else if(Le>=194&&Le<224){if(Me-ge>=6){var _t=parseInt(me.substr(ge+4,2),16);ue+=String.fromCharCode((Le&31)<<6|_t&63)}else ue+=me.substr(ge,6);ge+=6}else if(Le>=224){if(Me-ge>=9){var Ut=parseInt(me.substr(ge+4,2),16),dn=parseInt(me.substr(ge+7,2),16);ue+=String.fromCharCode((Le&15)<<12|(Ut&63)<<6|dn&63)}else ue+=me.substr(ge,9);ge+=9}else ue+=me.substr(ge,3),ge+=3}return ue}function Ne(me,ue){function ge(Me){var Le=Ae(Me);return Le.match(ue.UNRESERVED)?Le:Me}return me.scheme&&(me.scheme=String(me.scheme).replace(ue.PCT_ENCODED,ge).toLowerCase().replace(ue.NOT_SCHEME,"")),me.userinfo!==void 0&&(me.userinfo=String(me.userinfo).replace(ue.PCT_ENCODED,ge).replace(ue.NOT_USERINFO,he).replace(ue.PCT_ENCODED,o)),me.host!==void 0&&(me.host=String(me.host).replace(ue.PCT_ENCODED,ge).toLowerCase().replace(ue.NOT_HOST,he).replace(ue.PCT_ENCODED,o)),me.path!==void 0&&(me.path=String(me.path).replace(ue.PCT_ENCODED,ge).replace(me.scheme?ue.NOT_PATH:ue.NOT_PATH_NOSCHEME,he).replace(ue.PCT_ENCODED,o)),me.query!==void 0&&(me.query=String(me.query).replace(ue.PCT_ENCODED,ge).replace(ue.NOT_QUERY,he).replace(ue.PCT_ENCODED,o)),me.fragment!==void 0&&(me.fragment=String(me.fragment).replace(ue.PCT_ENCODED,ge).replace(ue.NOT_FRAGMENT,he).replace(ue.PCT_ENCODED,o)),me}function rt(me){return me.replace(/^0*(.*)/,"$1")||"0"}function Re(me,ue){var ge=me.match(ue.IPV4ADDRESS)||[],Me=d(ge,2),Le=Me[1];return Le?Le.split(".").map(rt).join("."):me}function Tt(me,ue){var ge=me.match(ue.IPV6ADDRESS)||[],Me=d(ge,3),Le=Me[1],_t=Me[2];if(Le){for(var Ut=Le.toLowerCase().split("::").reverse(),dn=d(Ut,2),Zn=dn[0],ur=dn[1],On=ur?ur.split(":").map(rt):[],Cr=Zn.split(":").map(rt),ai=ue.IPV4ADDRESS.test(Cr[Cr.length-1]),an=ai?7:8,Ar=Cr.length-an,Jr=Array(an),yr=0;yr<an;++yr)Jr[yr]=On[yr]||Cr[Ar+yr]||"";ai&&(Jr[an-1]=Re(Jr[an-1],ue));var Pi=Jr.reduce(function(rs,Ao,Ea){if(!Ao||Ao==="0"){var yo=rs[rs.length-1];yo&&yo.index+yo.length===Ea?yo.length++:rs.push({index:Ea,length:1})}return rs},[]),go=Pi.sort(function(rs,Ao){return Ao.length-rs.length})[0],Di=void 0;if(go&&go.length>1){var Co=Jr.slice(0,go.index),ns=Jr.slice(go.index+go.length);Di=Co.join(":")+"::"+ns.join(":")}else Di=Jr.join(":");return _t&&(Di+="%"+_t),Di}else return me}var Ze=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,It="".match(/(){0}/)[1]===void 0;function mt(me){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge={},Me=ue.iri!==!1?f:c;ue.reference==="suffix"&&(me=(ue.scheme?ue.scheme+":":"")+"//"+me);var Le=me.match(Ze);if(Le){It?(ge.scheme=Le[1],ge.userinfo=Le[3],ge.host=Le[4],ge.port=parseInt(Le[5],10),ge.path=Le[6]||"",ge.query=Le[7],ge.fragment=Le[8],isNaN(ge.port)&&(ge.port=Le[5])):(ge.scheme=Le[1]||void 0,ge.userinfo=me.indexOf("@")!==-1?Le[3]:void 0,ge.host=me.indexOf("//")!==-1?Le[4]:void 0,ge.port=parseInt(Le[5],10),ge.path=Le[6]||"",ge.query=me.indexOf("?")!==-1?Le[7]:void 0,ge.fragment=me.indexOf("#")!==-1?Le[8]:void 0,isNaN(ge.port)&&(ge.port=me.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Le[4]:void 0)),ge.host&&(ge.host=Tt(Re(ge.host,Me),Me)),ge.scheme===void 0&&ge.userinfo===void 0&&ge.host===void 0&&ge.port===void 0&&!ge.path&&ge.query===void 0?ge.reference="same-document":ge.scheme===void 0?ge.reference="relative":ge.fragment===void 0?ge.reference="absolute":ge.reference="uri",ue.reference&&ue.reference!=="suffix"&&ue.reference!==ge.reference&&(ge.error=ge.error||"URI is not a "+ue.reference+" reference.");var _t=be[(ue.scheme||ge.scheme||"").toLowerCase()];if(!ue.unicodeSupport&&(!_t||!_t.unicodeSupport)){if(ge.host&&(ue.domainHost||_t&&_t.domainHost))try{ge.host=se.toASCII(ge.host.replace(Me.PCT_ENCODED,Ae).toLowerCase())}catch(Ut){ge.error=ge.error||"Host's domain name can not be converted to ASCII via punycode: "+Ut}Ne(ge,c)}else Ne(ge,Me);_t&&_t.parse&&_t.parse(ge,ue)}else ge.error=ge.error||"URI can not be parsed.";return ge}function Se(me,ue){var ge=ue.iri!==!1?f:c,Me=[];return me.userinfo!==void 0&&(Me.push(me.userinfo),Me.push("@")),me.host!==void 0&&Me.push(Tt(Re(String(me.host),ge),ge).replace(ge.IPV6ADDRESS,function(Le,_t,Ut){return"["+_t+(Ut?"%25"+Ut:"")+"]"})),(typeof me.port=="number"||typeof me.port=="string")&&(Me.push(":"),Me.push(String(me.port))),Me.length?Me.join(""):void 0}var Fe=/^\.\.?\//,st=/^\/\.(\/|$)/,yt=/^\/\.\.(\/|$)/,Pt=/^\/?(?:.|\n)*?(?=\/|$)/;function Je(me){for(var ue=[];me.length;)if(me.match(Fe))me=me.replace(Fe,"");else if(me.match(st))me=me.replace(st,"/");else if(me.match(yt))me=me.replace(yt,"/"),ue.pop();else if(me==="."||me==="..")me="";else{var ge=me.match(Pt);if(ge){var Me=ge[0];me=me.slice(Me.length),ue.push(Me)}else throw new Error("Unexpected dot segment condition")}return ue.join("")}function we(me){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=ue.iri?f:c,Me=[],Le=be[(ue.scheme||me.scheme||"").toLowerCase()];if(Le&&Le.serialize&&Le.serialize(me,ue),me.host&&!ge.IPV6ADDRESS.test(me.host)){if(ue.domainHost||Le&&Le.domainHost)try{me.host=ue.iri?se.toUnicode(me.host):se.toASCII(me.host.replace(ge.PCT_ENCODED,Ae).toLowerCase())}catch(dn){me.error=me.error||"Host's domain name can not be converted to "+(ue.iri?"Unicode":"ASCII")+" via punycode: "+dn}}Ne(me,ge),ue.reference!=="suffix"&&me.scheme&&(Me.push(me.scheme),Me.push(":"));var _t=Se(me,ue);if(_t!==void 0&&(ue.reference!=="suffix"&&Me.push("//"),Me.push(_t),me.path&&me.path.charAt(0)!=="/"&&Me.push("/")),me.path!==void 0){var Ut=me.path;!ue.absolutePath&&(!Le||!Le.absolutePath)&&(Ut=Je(Ut)),_t===void 0&&(Ut=Ut.replace(/^\/\//,"/%2F")),Me.push(Ut)}return me.query!==void 0&&(Me.push("?"),Me.push(me.query)),me.fragment!==void 0&&(Me.push("#"),Me.push(me.fragment)),Me.join("")}function kt(me,ue){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Me=arguments[3],Le={};return Me||(me=mt(we(me,ge),ge),ue=mt(we(ue,ge),ge)),ge=ge||{},!ge.tolerant&&ue.scheme?(Le.scheme=ue.scheme,Le.userinfo=ue.userinfo,Le.host=ue.host,Le.port=ue.port,Le.path=Je(ue.path||""),Le.query=ue.query):(ue.userinfo!==void 0||ue.host!==void 0||ue.port!==void 0?(Le.userinfo=ue.userinfo,Le.host=ue.host,Le.port=ue.port,Le.path=Je(ue.path||""),Le.query=ue.query):(ue.path?(ue.path.charAt(0)==="/"?Le.path=Je(ue.path):((me.userinfo!==void 0||me.host!==void 0||me.port!==void 0)&&!me.path?Le.path="/"+ue.path:me.path?Le.path=me.path.slice(0,me.path.lastIndexOf("/")+1)+ue.path:Le.path=ue.path,Le.path=Je(Le.path)),Le.query=ue.query):(Le.path=me.path,ue.query!==void 0?Le.query=ue.query:Le.query=me.query),Le.userinfo=me.userinfo,Le.host=me.host,Le.port=me.port),Le.scheme=me.scheme),Le.fragment=ue.fragment,Le}function Rt(me,ue,ge){var Me=u({scheme:"null"},ge);return we(kt(mt(me,Me),mt(ue,Me),Me,!0),Me)}function Ee(me,ue){return typeof me=="string"?me=we(mt(me,ue),ue):s(me)==="object"&&(me=mt(we(me,ue),ue)),me}function Oe(me,ue,ge){return typeof me=="string"?me=we(mt(me,ge),ge):s(me)==="object"&&(me=we(me,ge)),typeof ue=="string"?ue=we(mt(ue,ge),ge):s(ue)==="object"&&(ue=we(ue,ge)),me===ue}function ot(me,ue){return me&&me.toString().replace(!ue||!ue.iri?c.ESCAPE:f.ESCAPE,he)}function xt(me,ue){return me&&me.toString().replace(!ue||!ue.iri?c.PCT_ENCODED:f.PCT_ENCODED,Ae)}var jt={scheme:"http",domainHost:!0,parse:function(ue,ge){return ue.host||(ue.error=ue.error||"HTTP URIs must have a host."),ue},serialize:function(ue,ge){var Me=String(ue.scheme).toLowerCase()==="https";return(ue.port===(Me?443:80)||ue.port==="")&&(ue.port=void 0),ue.path||(ue.path="/"),ue}},Un={scheme:"https",domainHost:jt.domainHost,parse:jt.parse,serialize:jt.serialize};function dr(me){return typeof me.secure=="boolean"?me.secure:String(me.scheme).toLowerCase()==="wss"}var Sr={scheme:"ws",domainHost:!0,parse:function(ue,ge){var Me=ue;return Me.secure=dr(Me),Me.resourceName=(Me.path||"/")+(Me.query?"?"+Me.query:""),Me.path=void 0,Me.query=void 0,Me},serialize:function(ue,ge){if((ue.port===(dr(ue)?443:80)||ue.port==="")&&(ue.port=void 0),typeof ue.secure=="boolean"&&(ue.scheme=ue.secure?"wss":"ws",ue.secure=void 0),ue.resourceName){var Me=ue.resourceName.split("?"),Le=d(Me,2),_t=Le[0],Ut=Le[1];ue.path=_t&&_t!=="/"?_t:void 0,ue.query=Ut,ue.resourceName=void 0}return ue.fragment=void 0,ue}},xi={scheme:"wss",domainHost:Sr.domainHost,parse:Sr.parse,serialize:Sr.serialize},Sn={},zn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",hr="[0-9A-Fa-f]",gr=i(i("%[EFef]"+hr+"%"+hr+hr+"%"+hr+hr)+"|"+i("%[89A-Fa-f]"+hr+"%"+hr+hr)+"|"+i("%"+hr+hr)),Qo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ts="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",hs=r(ts,'[\\"\\\\]'),Ns="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Vr=new RegExp(zn,"g"),ps=new RegExp(gr,"g"),kc=new RegExp(r("[^]",Qo,"[\\.]",'[\\"]',hs),"g"),Jo=new RegExp(r("[^]",zn,Ns),"g"),Mu=Jo;function Br(me){var ue=Ae(me);return ue.match(Vr)?ue:me}var ki={scheme:"mailto",parse:function(ue,ge){var Me=ue,Le=Me.to=Me.path?Me.path.split(","):[];if(Me.path=void 0,Me.query){for(var _t=!1,Ut={},dn=Me.query.split("&"),Zn=0,ur=dn.length;Zn<ur;++Zn){var On=dn[Zn].split("=");switch(On[0]){case"to":for(var Cr=On[1].split(","),ai=0,an=Cr.length;ai<an;++ai)Le.push(Cr[ai]);break;case"subject":Me.subject=xt(On[1],ge);break;case"body":Me.body=xt(On[1],ge);break;default:_t=!0,Ut[xt(On[0],ge)]=xt(On[1],ge);break}}_t&&(Me.headers=Ut)}Me.query=void 0;for(var Ar=0,Jr=Le.length;Ar<Jr;++Ar){var yr=Le[Ar].split("@");if(yr[0]=xt(yr[0]),ge.unicodeSupport)yr[1]=xt(yr[1],ge).toLowerCase();else try{yr[1]=se.toASCII(xt(yr[1],ge).toLowerCase())}catch(Pi){Me.error=Me.error||"Email address's domain name can not be converted to ASCII via punycode: "+Pi}Le[Ar]=yr.join("@")}return Me},serialize:function(ue,ge){var Me=ue,Le=a(ue.to);if(Le){for(var _t=0,Ut=Le.length;_t<Ut;++_t){var dn=String(Le[_t]),Zn=dn.lastIndexOf("@"),ur=dn.slice(0,Zn).replace(ps,Br).replace(ps,o).replace(kc,he),On=dn.slice(Zn+1);try{On=ge.iri?se.toUnicode(On):se.toASCII(xt(On,ge).toLowerCase())}catch(Ar){Me.error=Me.error||"Email address's domain name can not be converted to "+(ge.iri?"Unicode":"ASCII")+" via punycode: "+Ar}Le[_t]=ur+"@"+On}Me.path=Le.join(",")}var Cr=ue.headers=ue.headers||{};ue.subject&&(Cr.subject=ue.subject),ue.body&&(Cr.body=ue.body);var ai=[];for(var an in Cr)Cr[an]!==Sn[an]&&ai.push(an.replace(ps,Br).replace(ps,o).replace(Jo,he)+"="+Cr[an].replace(ps,Br).replace(ps,o).replace(Mu,he));return ai.length&&(Me.query=ai.join("&")),Me}},mi=/^([^\:]+)\:(.*)/,Qs={scheme:"urn",parse:function(ue,ge){var Me=ue.path&&ue.path.match(mi),Le=ue;if(Me){var _t=ge.scheme||Le.scheme||"urn",Ut=Me[1].toLowerCase(),dn=Me[2],Zn=_t+":"+(ge.nid||Ut),ur=be[Zn];Le.nid=Ut,Le.nss=dn,Le.path=void 0,ur&&(Le=ur.parse(Le,ge))}else Le.error=Le.error||"URN can not be parsed.";return Le},serialize:function(ue,ge){var Me=ge.scheme||ue.scheme||"urn",Le=ue.nid,_t=Me+":"+(ge.nid||Le),Ut=be[_t];Ut&&(ue=Ut.serialize(ue,ge));var dn=ue,Zn=ue.nss;return dn.path=(Le||ge.nid)+":"+Zn,dn}},oi=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ri={scheme:"urn:uuid",parse:function(ue,ge){var Me=ue;return Me.uuid=Me.nss,Me.nss=void 0,!ge.tolerant&&(!Me.uuid||!Me.uuid.match(oi))&&(Me.error=Me.error||"UUID is not valid."),Me},serialize:function(ue,ge){var Me=ue;return Me.nss=(ue.uuid||"").toLowerCase(),Me}};be[jt.scheme]=jt,be[Un.scheme]=Un,be[Sr.scheme]=Sr,be[xi.scheme]=xi,be[ki.scheme]=ki,be[Qs.scheme]=Qs,be[Ri.scheme]=Ri,n.SCHEMES=be,n.pctEncChar=he,n.pctDecChars=Ae,n.parse=mt,n.removeDotSegments=Je,n.serialize=we,n.resolveComponents=kt,n.resolve=Rt,n.normalize=Ee,n.equal=Oe,n.escapeComponent=ot,n.unescapeComponent=xt,Object.defineProperty(n,"__esModule",{value:!0})})})(UK,UK.exports);var Fcn=UK.exports;Object.defineProperty(_ae,"__esModule",{value:!0});const mUe=Fcn;mUe.code='require("ajv/dist/runtime/uri").default';_ae.default=mUe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ah;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=fr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=_D,i=IC,s=A_,o=Yl,a=fr,u=Oa,l=$o,c=Ft,f=Mcn,d=_ae,h=(F,j)=>new RegExp(F,j);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(F){var j,W,M,V,Q,se,be,he,Ae,Ne,rt,Re,Tt,Ze,It,mt,Se,Fe,st,yt,Pt,Je,we,kt,Rt;const Ee=F.strict,Oe=(j=F.code)===null||j===void 0?void 0:j.optimize,ot=Oe===!0||Oe===void 0?1:Oe||0,xt=(M=(W=F.code)===null||W===void 0?void 0:W.regExp)!==null&&M!==void 0?M:h,jt=(V=F.uriResolver)!==null&&V!==void 0?V:d.default;return{strictSchema:(se=(Q=F.strictSchema)!==null&&Q!==void 0?Q:Ee)!==null&&se!==void 0?se:!0,strictNumbers:(he=(be=F.strictNumbers)!==null&&be!==void 0?be:Ee)!==null&&he!==void 0?he:!0,strictTypes:(Ne=(Ae=F.strictTypes)!==null&&Ae!==void 0?Ae:Ee)!==null&&Ne!==void 0?Ne:"log",strictTuples:(Re=(rt=F.strictTuples)!==null&&rt!==void 0?rt:Ee)!==null&&Re!==void 0?Re:"log",strictRequired:(Ze=(Tt=F.strictRequired)!==null&&Tt!==void 0?Tt:Ee)!==null&&Ze!==void 0?Ze:!1,code:F.code?{...F.code,optimize:ot,regExp:xt}:{optimize:ot,regExp:xt},loopRequired:(It=F.loopRequired)!==null&&It!==void 0?It:v,loopEnum:(mt=F.loopEnum)!==null&&mt!==void 0?mt:v,meta:(Se=F.meta)!==null&&Se!==void 0?Se:!0,messages:(Fe=F.messages)!==null&&Fe!==void 0?Fe:!0,inlineRefs:(st=F.inlineRefs)!==null&&st!==void 0?st:!0,schemaId:(yt=F.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(Pt=F.addUsedSchema)!==null&&Pt!==void 0?Pt:!0,validateSchema:(Je=F.validateSchema)!==null&&Je!==void 0?Je:!0,validateFormats:(we=F.validateFormats)!==null&&we!==void 0?we:!0,unicodeRegExp:(kt=F.unicodeRegExp)!==null&&kt!==void 0?kt:!0,int32range:(Rt=F.int32range)!==null&&Rt!==void 0?Rt:!0,uriResolver:jt}}class _{constructor(j={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,j=this.opts={...j,...b(j)};const{es5:W,lines:M}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:M}),this.logger=L(j.logger);const V=j.validateFormats;j.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,j,"NOT SUPPORTED"),E.call(this,y,j,"DEPRECATED","warn"),this._metaOpts=k.call(this),j.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),j.keywords&&R.call(this,j.keywords),typeof j.meta=="object"&&this.addMetaSchema(j.meta),C.call(this),j.validateFormats=V}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:j,meta:W,schemaId:M}=this.opts;let V=f;M==="id"&&(V={...f},V.id=V.$id,delete V.$id),W&&j&&this.addMetaSchema(V,V[M],!1)}defaultMeta(){const{meta:j,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof j=="object"?j[W]||j:void 0}validate(j,W){let M;if(typeof j=="string"){if(M=this.getSchema(j),!M)throw new Error(`no schema with key or ref "${j}"`)}else M=this.compile(j);const V=M(W);return"$async"in M||(this.errors=M.errors),V}compile(j,W){const M=this._addSchema(j,W);return M.validate||this._compileSchemaEnv(M)}compileAsync(j,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:M}=this.opts;return V.call(this,j,W);async function V(Ne,rt){await Q.call(this,Ne.$schema);const Re=this._addSchema(Ne,rt);return Re.validate||se.call(this,Re)}async function Q(Ne){Ne&&!this.getSchema(Ne)&&await V.call(this,{$ref:Ne},!0)}async function se(Ne){try{return this._compileSchemaEnv(Ne)}catch(rt){if(!(rt instanceof i.default))throw rt;return be.call(this,rt),await he.call(this,rt.missingSchema),se.call(this,Ne)}}function be({missingSchema:Ne,missingRef:rt}){if(this.refs[Ne])throw new Error(`AnySchema ${Ne} is loaded but ${rt} cannot be resolved`)}async function he(Ne){const rt=await Ae.call(this,Ne);this.refs[Ne]||await Q.call(this,rt.$schema),this.refs[Ne]||this.addSchema(rt,Ne,W)}async function Ae(Ne){const rt=this._loading[Ne];if(rt)return rt;try{return await(this._loading[Ne]=M(Ne))}finally{delete this._loading[Ne]}}}addSchema(j,W,M,V=this.opts.validateSchema){if(Array.isArray(j)){for(const se of j)this.addSchema(se,void 0,M,V);return this}let Q;if(typeof j=="object"){const{schemaId:se}=this.opts;if(Q=j[se],Q!==void 0&&typeof Q!="string")throw new Error(`schema ${se} must be string`)}return W=(0,u.normalizeId)(W||Q),this._checkUnique(W),this.schemas[W]=this._addSchema(j,M,W,V,!0),this}addMetaSchema(j,W,M=this.opts.validateSchema){return this.addSchema(j,W,!0,M),this}validateSchema(j,W){if(typeof j=="boolean")return!0;let M;if(M=j.$schema,M!==void 0&&typeof M!="string")throw new Error("$schema must be a string");if(M=M||this.opts.defaultMeta||this.defaultMeta(),!M)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const V=this.validate(M,j);if(!V&&W){const Q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Q);else throw new Error(Q)}return V}getSchema(j){let W;for(;typeof(W=S.call(this,j))=="string";)j=W;if(W===void 0){const{schemaId:M}=this.opts,V=new o.SchemaEnv({schema:{},schemaId:M});if(W=o.resolveSchema.call(this,V,j),!W)return;this.refs[j]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(j){if(j instanceof RegExp)return this._removeAllSchemas(this.schemas,j),this._removeAllSchemas(this.refs,j),this;switch(typeof j){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,j);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[j],delete this.refs[j],this}case"object":{const W=j;this._cache.delete(W);let M=j[this.opts.schemaId];return M&&(M=(0,u.normalizeId)(M),delete this.schemas[M],delete this.refs[M]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(j){for(const W of j)this.addKeyword(W);return this}addKeyword(j,W){let M;if(typeof j=="string")M=j,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=M);else if(typeof j=="object"&&W===void 0){if(W=j,M=W.keyword,Array.isArray(M)&&!M.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,M,W),!W)return(0,c.eachItem)(M,Q=>q.call(this,Q)),this;G.call(this,W);const V={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(M,V.type.length===0?Q=>q.call(this,Q,V):Q=>V.type.forEach(se=>q.call(this,Q,V,se))),this}getKeyword(j){const W=this.RULES.all[j];return typeof W=="object"?W.definition:!!W}removeKeyword(j){const{RULES:W}=this;delete W.keywords[j],delete W.all[j];for(const M of W.rules){const V=M.rules.findIndex(Q=>Q.keyword===j);V>=0&&M.rules.splice(V,1)}return this}addFormat(j,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[j]=W,this}errorsText(j=this.errors,{separator:W=", ",dataVar:M="data"}={}){return!j||j.length===0?"No errors":j.map(V=>`${M}${V.instancePath} ${V.message}`).reduce((V,Q)=>V+W+Q)}$dataMetaSchema(j,W){const M=this.RULES.all;j=JSON.parse(JSON.stringify(j));for(const V of W){const Q=V.split("/").slice(1);let se=j;for(const be of Q)se=se[be];for(const be in M){const he=M[be];if(typeof he!="object")continue;const{$data:Ae}=he.definition,Ne=se[be];Ae&&Ne&&(se[be]=J(Ne))}}return j}_removeAllSchemas(j,W){for(const M in j){const V=j[M];(!W||W.test(M))&&(typeof V=="string"?delete j[M]:V&&!V.meta&&(this._cache.delete(V.schema),delete j[M]))}}_addSchema(j,W,M,V=this.opts.validateSchema,Q=this.opts.addUsedSchema){let se;const{schemaId:be}=this.opts;if(typeof j=="object")se=j[be];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof j!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(j);if(he!==void 0)return he;M=(0,u.normalizeId)(se||M);const Ae=u.getSchemaRefs.call(this,j,M);return he=new o.SchemaEnv({schema:j,schemaId:be,meta:W,baseId:M,localRefs:Ae}),this._cache.set(he.schema,he),Q&&!M.startsWith("#")&&(M&&this._checkUnique(M),this.refs[M]=he),V&&this.validateSchema(j,!0),he}_checkUnique(j){if(this.schemas[j]||this.refs[j])throw new Error(`schema with key or id "${j}" already exists`)}_compileSchemaEnv(j){if(j.meta?this._compileMetaSchema(j):o.compileSchema.call(this,j),!j.validate)throw new Error("ajv implementation error");return j.validate}_compileMetaSchema(j){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,j)}finally{this.opts=W}}}_.ValidationError=r.default,_.MissingRefError=i.default,e.default=_;function E(F,j,W,M="error"){for(const V in F){const Q=V;Q in j&&this.logger[M](`${W}: option ${V}. ${F[Q]}`)}}function S(F){return F=(0,u.normalizeId)(F),this.schemas[F]||this.refs[F]}function C(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const j in F)this.addSchema(F[j],j)}function A(){for(const F in this.opts.formats){const j=this.opts.formats[F];j&&this.addFormat(F,j)}}function R(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const j in F){const W=F[j];W.keyword||(W.keyword=j),this.addKeyword(W)}}function k(){const F={...this.opts};for(const j of p)delete F[j];return F}const N={log(){},warn(){},error(){}};function L(F){if(F===!1)return N;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function B(F,j){const{RULES:W}=this;if((0,c.eachItem)(F,M=>{if(W.keywords[M])throw new Error(`Keyword ${M} is already defined`);if(!O.test(M))throw new Error(`Keyword ${M} has invalid name`)}),!!j&&j.$data&&!("code"in j||"validate"in j))throw new Error('$data keyword must have "code" or "validate" function')}function q(F,j,W){var M;const V=j==null?void 0:j.post;if(W&&V)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Q}=this;let se=V?Q.post:Q.rules.find(({type:he})=>he===W);if(se||(se={type:W,rules:[]},Q.rules.push(se)),Q.keywords[F]=!0,!j)return;const be={keyword:F,definition:{...j,type:(0,l.getJSONTypes)(j.type),schemaType:(0,l.getJSONTypes)(j.schemaType)}};j.before?H.call(this,se,be,j.before):se.rules.push(be),Q.all[F]=be,(M=j.implements)===null||M===void 0||M.forEach(he=>this.addKeyword(he))}function H(F,j,W){const M=F.rules.findIndex(V=>V.keyword===W);M>=0?F.rules.splice(M,0,j):(F.rules.push(j),this.logger.warn(`rule ${W} is not defined`))}function G(F){let{metaSchema:j}=F;j!==void 0&&(F.$data&&this.opts.$data&&(j=J(j)),F.validateSchema=this.compile(j,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function J(F){return{anyOf:[F,K]}}})(Mje);var wae={},Eae={},Tae={};Object.defineProperty(Tae,"__esModule",{value:!0});const Bcn={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Tae.default=Bcn;var I_={};Object.defineProperty(I_,"__esModule",{value:!0});I_.callRef=I_.getValidate=void 0;const jcn=IC,A_e=lr,Ml=fr,vE=Wm,I_e=Yl,r4=Ft,Ucn={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=I_e.resolveRef.call(u,l,i,n);if(c===void 0)throw new jcn.default(r.opts.uriResolver,i,n);if(c instanceof I_e.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return D6(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return D6(e,(0,Ml._)`${p}.validate`,l,l.$async)}function d(p){const m=gUe(e,p);D6(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ml.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Ml.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function gUe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Ml._)`${n.scopeValue("wrapper",{ref:t})}.validate`}I_.getValidate=gUe;function D6(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?vE.default.this:Ml.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Ml._)`await ${(0,A_e.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Ml._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,A_e.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Ml._)`${p}.errors`;i.assign(vE.default.vErrors,(0,Ml._)`${vE.default.vErrors} === null ? ${m} : ${vE.default.vErrors}.concat(${m})`),i.assign(vE.default.errors,(0,Ml._)`${vE.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=r4.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Ml._)`${p}.evaluated.props`);s.props=r4.mergeEvaluated.props(i,y,s.props,Ml.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=r4.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Ml._)`${p}.evaluated.items`);s.items=r4.mergeEvaluated.items(i,y,s.items,Ml.Name)}}}I_.callRef=D6;I_.default=Ucn;Object.defineProperty(Eae,"__esModule",{value:!0});const zcn=Tae,Vcn=I_,Hcn=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",zcn.default,Vcn.default];Eae.default=Hcn;var Sae={},Cae={};Object.defineProperty(Cae,"__esModule",{value:!0});const hM=fr,_y=hM.operators,pM={maximum:{okStr:"<=",ok:_y.LTE,fail:_y.GT},minimum:{okStr:">=",ok:_y.GTE,fail:_y.LT},exclusiveMaximum:{okStr:"<",ok:_y.LT,fail:_y.GTE},exclusiveMinimum:{okStr:">",ok:_y.GT,fail:_y.LTE}},qcn={message:({keyword:e,schemaCode:t})=>(0,hM.str)`must be ${pM[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,hM._)`{comparison: ${pM[e].okStr}, limit: ${t}}`},Wcn={keyword:Object.keys(pM),type:"number",schemaType:"number",$data:!0,error:qcn,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,hM._)`${n} ${pM[t].fail} ${r} || isNaN(${n})`)}};Cae.default=Wcn;var Aae={};Object.defineProperty(Aae,"__esModule",{value:!0});const Fk=fr,Gcn={message:({schemaCode:e})=>(0,Fk.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Fk._)`{multipleOf: ${e}}`},Ycn={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Gcn,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Fk._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Fk._)`${o} !== parseInt(${o})`;e.fail$data((0,Fk._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};Aae.default=Ycn;var Iae={},kae={};Object.defineProperty(kae,"__esModule",{value:!0});function yUe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}kae.default=yUe;yUe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Iae,"__esModule",{value:!0});const ax=fr,Kcn=Ft,Xcn=kae,Qcn={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,ax.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,ax._)`{limit: ${e}}`},Jcn={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Qcn,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?ax.operators.GT:ax.operators.LT,o=i.opts.unicode===!1?(0,ax._)`${n}.length`:(0,ax._)`${(0,Kcn.useFunc)(e.gen,Xcn.default)}(${n})`;e.fail$data((0,ax._)`${o} ${s} ${r}`)}};Iae.default=Jcn;var Rae={};Object.defineProperty(Rae,"__esModule",{value:!0});const Zcn=lr,mM=fr,efn={message:({schemaCode:e})=>(0,mM.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,mM._)`{pattern: ${e}}`},tfn={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:efn,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,mM._)`(new RegExp(${i}, ${o}))`:(0,Zcn.usePattern)(e,r);e.fail$data((0,mM._)`!${a}.test(${t})`)}};Rae.default=tfn;var Pae={};Object.defineProperty(Pae,"__esModule",{value:!0});const Bk=fr,nfn={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Bk.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Bk._)`{limit: ${e}}`},rfn={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:nfn,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?Bk.operators.GT:Bk.operators.LT;e.fail$data((0,Bk._)`Object.keys(${n}).length ${i} ${r}`)}};Pae.default=rfn;var Dae={};Object.defineProperty(Dae,"__esModule",{value:!0});const KA=lr,jk=fr,ifn=Ft,sfn={message:({params:{missingProperty:e}})=>(0,jk.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,jk._)`{missingProperty: ${e}}`},ofn={keyword:"required",type:"object",schemaType:"array",$data:!0,error:sfn,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,ifn.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(jk.nil,f);else for(const h of n)(0,KA.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,KA.checkMissingProp)(e,n,h)),(0,KA.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,KA.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,KA.propertyInData)(t,i,h,a.ownProperties)),t.if((0,jk.not)(p),()=>{e.error(),t.break()})},jk.nil)}}};Dae.default=ofn;var Nae={};Object.defineProperty(Nae,"__esModule",{value:!0});const Uk=fr,afn={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Uk.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Uk._)`{limit: ${e}}`},ufn={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:afn,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Uk.operators.GT:Uk.operators.LT;e.fail$data((0,Uk._)`${n}.length ${i} ${r}`)}};Nae.default=ufn;var Oae={},wD={};Object.defineProperty(wD,"__esModule",{value:!0});const vUe=zZ;vUe.code='require("ajv/dist/runtime/equal").default';wD.default=vUe;Object.defineProperty(Oae,"__esModule",{value:!0});const dH=$o,Ia=fr,lfn=Ft,cfn=wD,ffn={message:({params:{i:e,j:t}})=>(0,Ia.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ia._)`{i: ${e}, j: ${t}}`},dfn={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ffn,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,dH.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Ia._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Ia._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Ia._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,dH.checkDataTypes)(l,g,a.opts.strictNumbers,dH.DataType.Wrong),v=t.const("indices",(0,Ia._)`{}`);t.for((0,Ia._)`;${p}--;`,()=>{t.let(g,(0,Ia._)`${n}[${p}]`),t.if(y,(0,Ia._)`continue`),l.length>1&&t.if((0,Ia._)`typeof ${g} == "string"`,(0,Ia._)`${g} += "_"`),t.if((0,Ia._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Ia._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Ia._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,lfn.useFunc)(t,cfn.default),y=t.name("outer");t.label(y).for((0,Ia._)`;${p}--;`,()=>t.for((0,Ia._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Ia._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};Oae.default=dfn;var $ae={};Object.defineProperty($ae,"__esModule",{value:!0});const zK=fr,hfn=Ft,pfn=wD,mfn={message:"must be equal to constant",params:({schemaCode:e})=>(0,zK._)`{allowedValue: ${e}}`},gfn={keyword:"const",$data:!0,error:mfn,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,zK._)`!${(0,hfn.useFunc)(t,pfn.default)}(${n}, ${i})`):e.fail((0,zK._)`${s} !== ${n}`)}};$ae.default=gfn;var Lae={};Object.defineProperty(Lae,"__esModule",{value:!0});const VI=fr,yfn=Ft,vfn=wD,bfn={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,VI._)`{allowedValues: ${e}}`},xfn={keyword:"enum",schemaType:"array",$data:!0,error:bfn,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,yfn.useFunc)(t,vfn.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,VI.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,VI._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,VI._)`${l()}(${n}, ${h}[${p}])`:(0,VI._)`${n} === ${m}`}}};Lae.default=xfn;Object.defineProperty(Sae,"__esModule",{value:!0});const _fn=Cae,wfn=Aae,Efn=Iae,Tfn=Rae,Sfn=Pae,Cfn=Dae,Afn=Nae,Ifn=Oae,kfn=$ae,Rfn=Lae,Pfn=[_fn.default,wfn.default,Efn.default,Tfn.default,Sfn.default,Cfn.default,Afn.default,Ifn.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},kfn.default,Rfn.default];Sae.default=Pfn;var Mae={},kC={};Object.defineProperty(kC,"__esModule",{value:!0});kC.validateAdditionalItems=void 0;const ux=fr,VK=Ft,Dfn={message:({params:{len:e}})=>(0,ux.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ux._)`{limit: ${e}}`},Nfn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Dfn,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,VK.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}bUe(e,r)}};function bUe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,ux._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,ux._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,VK.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,ux._)`${a} <= ${t.length}`);n.if((0,ux.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:VK.Type.Num},l),o.allErrors||n.if((0,ux.not)(l),()=>n.break())})}}kC.validateAdditionalItems=bUe;kC.default=Nfn;var Fae={},RC={};Object.defineProperty(RC,"__esModule",{value:!0});RC.validateTuple=void 0;const k_e=fr,N6=Ft,Ofn=lr,$fn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return xUe(e,"additionalItems",t);n.items=!0,!(0,N6.alwaysValidSchema)(n,t)&&e.ok((0,Ofn.validateArray)(e))}};function xUe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=N6.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,k_e._)`${s}.length`);n.forEach((f,d)=>{(0,N6.alwaysValidSchema)(a,f)||(r.if((0,k_e._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,N6.checkStrictMode)(a,g,d.strictTuples)}}}RC.validateTuple=xUe;RC.default=$fn;Object.defineProperty(Fae,"__esModule",{value:!0});const Lfn=RC,Mfn={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Lfn.validateTuple)(e,"items")};Fae.default=Mfn;var Bae={};Object.defineProperty(Bae,"__esModule",{value:!0});const R_e=fr,Ffn=Ft,Bfn=lr,jfn=kC,Ufn={message:({params:{len:e}})=>(0,R_e.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,R_e._)`{limit: ${e}}`},zfn={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ufn,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,Ffn.alwaysValidSchema)(r,t)&&(i?(0,jfn.validateAdditionalItems)(e,i):e.ok((0,Bfn.validateArray)(e)))}};Bae.default=zfn;var jae={};Object.defineProperty(jae,"__esModule",{value:!0});const Vf=fr,i4=Ft,Vfn={message:({params:{min:e,max:t}})=>t===void 0?(0,Vf.str)`must contain at least ${e} valid item(s)`:(0,Vf.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Vf._)`{minContains: ${e}}`:(0,Vf._)`{minContains: ${e}, maxContains: ${t}}`},Hfn={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Vfn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Vf._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,i4.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,i4.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,i4.alwaysValidSchema)(s,n)){let m=(0,Vf._)`${c} >= ${o}`;a!==void 0&&(m=(0,Vf._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Vf._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:i4.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Vf._)`${m}++`),a===void 0?t.if((0,Vf._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Vf._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Vf._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};jae.default=Hfn;var _Ue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=fr,n=Ft,r=lr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(_Ue);var Uae={};Object.defineProperty(Uae,"__esModule",{value:!0});const wUe=fr,qfn=Ft,Wfn={message:"property name must be valid",params:({params:e})=>(0,wUe._)`{propertyName: ${e.propertyName}}`},Gfn={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Wfn,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,qfn.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,wUe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Uae.default=Gfn;var O9={};Object.defineProperty(O9,"__esModule",{value:!0});const s4=lr,Gd=fr,Yfn=Wm,o4=Ft,Kfn={message:"must NOT have additional properties",params:({params:e})=>(0,Gd._)`{additionalProperty: ${e.additionalProperty}}`},Xfn={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Kfn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,o4.alwaysValidSchema)(o,n))return;const l=(0,s4.allSchemaProperties)(r.properties),c=(0,s4.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Gd._)`${s} === ${Yfn.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,o4.schemaRefOrVal)(o,r.properties,"properties");y=(0,s4.isOwnProperty)(t,v,g)}else l.length?y=(0,Gd.or)(...l.map(v=>(0,Gd._)`${g} === ${v}`)):y=Gd.nil;return c.length&&(y=(0,Gd.or)(y,...c.map(v=>(0,Gd._)`${(0,s4.usePattern)(e,v)}.test(${g})`))),(0,Gd.not)(y)}function h(g){t.code((0,Gd._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,o4.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Gd.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Gd.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:o4.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};O9.default=Xfn;var zae={};Object.defineProperty(zae,"__esModule",{value:!0});const Qfn=Ah,P_e=lr,hH=Ft,D_e=O9,Jfn={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&D_e.default.code(new Qfn.KeywordCxt(s,D_e.default,"additionalProperties"));const o=(0,P_e.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=hH.mergeEvaluated.props(t,(0,hH.toHash)(o),s.props));const a=o.filter(f=>!(0,hH.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,P_e.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};zae.default=Jfn;var Vae={};Object.defineProperty(Vae,"__esModule",{value:!0});const N_e=lr,a4=fr,O_e=Ft,$_e=Ft,Zfn={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,N_e.allSchemaProperties)(n),u=a.filter(m=>(0,O_e.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof a4.Name)&&(s.props=(0,$_e.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,O_e.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,a4._)`${(0,N_e.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:$_e.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,a4._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,a4.not)(c),()=>t.break())})})}}};Vae.default=Zfn;var Hae={};Object.defineProperty(Hae,"__esModule",{value:!0});const edn=Ft,tdn={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,edn.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Hae.default=tdn;var qae={};Object.defineProperty(qae,"__esModule",{value:!0});const ndn=lr,rdn={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ndn.validateUnion,error:{message:"must match a schema in anyOf"}};qae.default=rdn;var Wae={};Object.defineProperty(Wae,"__esModule",{value:!0});const O6=fr,idn=Ft,sdn={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,O6._)`{passingSchemas: ${e.passing}}`},odn={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:sdn,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,idn.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,O6._)`${u} && ${o}`).assign(o,!1).assign(a,(0,O6._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,O6.Name)})})}}};Wae.default=odn;var Gae={};Object.defineProperty(Gae,"__esModule",{value:!0});const adn=Ft,udn={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,adn.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};Gae.default=udn;var Yae={};Object.defineProperty(Yae,"__esModule",{value:!0});const gM=fr,EUe=Ft,ldn={message:({params:e})=>(0,gM.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,gM._)`{failingKeyword: ${e.ifClause}}`},cdn={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ldn,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,EUe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=L_e(r,"then"),s=L_e(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,gM.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,gM._)`${c}`):e.setParams({ifClause:c})}}}};function L_e(e,t){const n=e.schema[t];return n!==void 0&&!(0,EUe.alwaysValidSchema)(e,n)}Yae.default=cdn;var Kae={};Object.defineProperty(Kae,"__esModule",{value:!0});const fdn=Ft,ddn={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,fdn.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Kae.default=ddn;Object.defineProperty(Mae,"__esModule",{value:!0});const hdn=kC,pdn=Fae,mdn=RC,gdn=Bae,ydn=jae,vdn=_Ue,bdn=Uae,xdn=O9,_dn=zae,wdn=Vae,Edn=Hae,Tdn=qae,Sdn=Wae,Cdn=Gae,Adn=Yae,Idn=Kae;function kdn(e=!1){const t=[Edn.default,Tdn.default,Sdn.default,Cdn.default,Adn.default,Idn.default,bdn.default,xdn.default,vdn.default,_dn.default,wdn.default];return e?t.push(pdn.default,gdn.default):t.push(hdn.default,mdn.default),t.push(ydn.default),t}Mae.default=kdn;var Xae={},Qae={};Object.defineProperty(Qae,"__esModule",{value:!0});const to=fr,Rdn={message:({schemaCode:e})=>(0,to.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,to._)`{format: ${e}}`},Pdn={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Rdn,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,to._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,to._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,to._)`${m}.type || "string"`).assign(y,(0,to._)`${m}.validate`),()=>n.assign(g,(0,to._)`"string"`).assign(y,m)),e.fail$data((0,to.or)(v(),b()));function v(){return u.strictSchema===!1?to.nil:(0,to._)`${o} && !${y}`}function b(){const _=c.$async?(0,to._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,to._)`${y}(${r})`,E=(0,to._)`(typeof ${y} == "function" ? ${_} : ${y}.test(${r}))`;return(0,to._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(_());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const S=E instanceof RegExp?(0,to.regexpCode)(E):u.code.formats?(0,to._)`${u.code.formats}${(0,to.getProperty)(s)}`:void 0,C=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,to._)`${C}.validate`]:["string",E,C]}function _(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,to._)`await ${y}(${r})`}return typeof g=="function"?(0,to._)`${y}(${r})`:(0,to._)`${y}.test(${r})`}}}};Qae.default=Pdn;Object.defineProperty(Xae,"__esModule",{value:!0});const Ddn=Qae,Ndn=[Ddn.default];Xae.default=Ndn;var uS={};Object.defineProperty(uS,"__esModule",{value:!0});uS.contentVocabulary=uS.metadataVocabulary=void 0;uS.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];uS.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(wae,"__esModule",{value:!0});const Odn=Eae,$dn=Sae,Ldn=Mae,Mdn=Xae,M_e=uS,Fdn=[Odn.default,$dn.default,(0,Ldn.default)(),Mdn.default,M_e.metadataVocabulary,M_e.contentVocabulary];wae.default=Fdn;var Jae={},$9={};Object.defineProperty($9,"__esModule",{value:!0});$9.DiscrError=void 0;var F_e;(function(e){e.Tag="tag",e.Mapping="mapping"})(F_e||($9.DiscrError=F_e={}));Object.defineProperty(Jae,"__esModule",{value:!0});const RE=fr,HK=$9,B_e=Yl,Bdn=IC,jdn=Ft,Udn={message:({params:{discrError:e,tagName:t}})=>e===HK.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,RE._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},zdn={keyword:"discriminator",type:"object",schemaType:"object",error:Udn,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,RE._)`${n}${(0,RE.getProperty)(a)}`);t.if((0,RE._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:HK.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,RE._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:HK.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,RE.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let _=0;_<o.length;_++){let E=o[_];if(E!=null&&E.$ref&&!(0,jdn.schemaHasRulesButRef)(E,s.self.RULES)){const C=E.$ref;if(E=B_e.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,C),E instanceof B_e.SchemaEnv&&(E=E.schema),E===void 0)throw new Bdn.default(s.opts.uriResolver,s.baseId,C)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,_)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:_}){return Array.isArray(_)&&_.includes(a)}function v(_,E){if(_.const)b(_.const,E);else if(_.enum)for(const S of _.enum)b(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(_,E){if(typeof _!="string"||_ in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[_]=E}}}};Jae.default=zdn;const Vdn="http://json-schema.org/draft-07/schema#",Hdn="http://json-schema.org/draft-07/schema#",qdn="Core schema meta-schema",Wdn={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Gdn=["object","boolean"],Ydn={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Kdn={$schema:Vdn,$id:Hdn,title:qdn,definitions:Wdn,type:Gdn,properties:Ydn,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Mje,r=wae,i=Jae,s=Kdn,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Ah;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=fr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=_D;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=IC;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(LK,LK.exports);var Xdn=LK.exports;const Zae=zh(Xdn),Qdn="#/definitions/StudyConfig",Jdn="http://json-schema.org/draft-07/schema#",Zdn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},ehn={$ref:Qdn,$schema:Jdn,definitions:Zdn},thn="#/definitions/GlobalConfig",nhn="http://json-schema.org/draft-07/schema#",rhn={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},ihn={$ref:thn,$schema:nhn,definitions:rhn};var yM={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */yM.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,v=4,b=8,_=16,E=32,S=64,C=128,A=256,R=512,k=30,N="...",L=800,O=16,B=1,q=2,H=3,G=1/0,K=9007199254740991,J=17976931348623157e292,F=NaN,j=4294967295,W=j-1,M=j>>>1,V=[["ary",C],["bind",g],["bindKey",y],["curry",b],["curryRight",_],["flip",R],["partial",E],["partialRight",S],["rearg",A]],Q="[object Arguments]",se="[object Array]",be="[object AsyncFunction]",he="[object Boolean]",Ae="[object Date]",Ne="[object DOMException]",rt="[object Error]",Re="[object Function]",Tt="[object GeneratorFunction]",Ze="[object Map]",It="[object Number]",mt="[object Null]",Se="[object Object]",Fe="[object Promise]",st="[object Proxy]",yt="[object RegExp]",Pt="[object Set]",Je="[object String]",we="[object Symbol]",kt="[object Undefined]",Rt="[object WeakMap]",Ee="[object WeakSet]",Oe="[object ArrayBuffer]",ot="[object DataView]",xt="[object Float32Array]",jt="[object Float64Array]",Un="[object Int8Array]",dr="[object Int16Array]",Sr="[object Int32Array]",xi="[object Uint8Array]",Sn="[object Uint8ClampedArray]",zn="[object Uint16Array]",hr="[object Uint32Array]",gr=/\b__p \+= '';/g,Qo=/\b(__p \+=) '' \+/g,ts=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hs=/&(?:amp|lt|gt|quot|#39);/g,Ns=/[&<>"']/g,Vr=RegExp(hs.source),ps=RegExp(Ns.source),kc=/<%-([\s\S]+?)%>/g,Jo=/<%([\s\S]+?)%>/g,Mu=/<%=([\s\S]+?)%>/g,Br=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ki=/^\w*$/,mi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qs=/[\\^$.*+?()[\]{}|]/g,oi=RegExp(Qs.source),Ri=/^\s+/,me=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ge=/\{\n\/\* \[wrapped with (.+)\] \*/,Me=/,? & /,Le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_t=/[()=,{}\[\]\/\s]/,Ut=/\\(\\)?/g,dn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zn=/\w*$/,ur=/^[-+]0x[0-9a-f]+$/i,On=/^0b[01]+$/i,Cr=/^\[object .+?Constructor\]$/,ai=/^0o[0-7]+$/i,an=/^(?:0|[1-9]\d*)$/,Ar=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jr=/($^)/,yr=/['\n\r\u2028\u2029\\]/g,Pi="\\ud800-\\udfff",go="\\u0300-\\u036f",Di="\\ufe20-\\ufe2f",Co="\\u20d0-\\u20ff",ns=go+Di+Co,rs="\\u2700-\\u27bf",Ao="a-z\\xdf-\\xf6\\xf8-\\xff",Ea="\\xac\\xb1\\xd7\\xf7",yo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Cl="\\u2000-\\u206f",Sf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ee="A-Z\\xc0-\\xd6\\xd8-\\xde",pe="\\ufe0e\\ufe0f",oe=Ea+yo+Cl+Sf,_e="[']",Ce="["+Pi+"]",xe="["+oe+"]",qe="["+ns+"]",it="\\d+",at="["+rs+"]",ut="["+Ao+"]",vt="[^"+Pi+oe+it+rs+Ao+ee+"]",Lt="\\ud83c[\\udffb-\\udfff]",$n="(?:"+qe+"|"+Lt+")",Kt="[^"+Pi+"]",er="(?:\\ud83c[\\udde6-\\uddff]){2}",Hr="[\\ud800-\\udbff][\\udc00-\\udfff]",vr="["+ee+"]",Io="\\u200d",Rc="(?:"+ut+"|"+vt+")",kd="(?:"+vr+"|"+vt+")",sy="(?:"+_e+"(?:d|ll|m|re|s|t|ve))?",ip="(?:"+_e+"(?:D|LL|M|RE|S|T|VE))?",ib=$n+"?",Fu="["+pe+"]?",Ka="(?:"+Io+"(?:"+[Kt,er,Hr].join("|")+")"+Fu+ib+")*",Rd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sb=Fu+ib+Ka,Pd="(?:"+[at,er,Hr].join("|")+")"+sb,ob="(?:"+[Kt+qe+"?",qe,er,Hr,Ce].join("|")+")",Sw=RegExp(_e,"g"),Dd=RegExp(qe,"g"),Zo=RegExp(Lt+"(?="+Lt+")|"+ob+sb,"g"),FC=RegExp([vr+"?"+ut+"+"+sy+"(?="+[xe,vr,"$"].join("|")+")",kd+"+"+ip+"(?="+[xe,vr+Rc,"$"].join("|")+")",vr+"?"+Rc+"+"+sy,vr+"+"+ip,oy,Rd,it,Pd].join("|"),"g"),Cw=RegExp("["+Io+Pi+ns+pe+"]"),Ym=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Km=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Aw=-1,qr={};qr[xt]=qr[jt]=qr[Un]=qr[dr]=qr[Sr]=qr[xi]=qr[Sn]=qr[zn]=qr[hr]=!0,qr[Q]=qr[se]=qr[Oe]=qr[he]=qr[ot]=qr[Ae]=qr[rt]=qr[Re]=qr[Ze]=qr[It]=qr[Se]=qr[yt]=qr[Pt]=qr[Je]=qr[Rt]=!1;var Ir={};Ir[Q]=Ir[se]=Ir[Oe]=Ir[ot]=Ir[he]=Ir[Ae]=Ir[xt]=Ir[jt]=Ir[Un]=Ir[dr]=Ir[Sr]=Ir[Ze]=Ir[It]=Ir[Se]=Ir[yt]=Ir[Pt]=Ir[Je]=Ir[we]=Ir[xi]=Ir[Sn]=Ir[zn]=Ir[hr]=!0,Ir[rt]=Ir[Re]=Ir[Rt]=!1;var Iw={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=parseFloat,ir=parseInt,Wr=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,_i=typeof self=="object"&&self&&self.Object===Object&&self,un=Wr||_i||Function("return this")(),ui=t&&!t.nodeType&&t,wi=ui&&!0&&e&&!e.nodeType&&e,ko=wi&&wi.exports===ui,Nd=ko&&Wr.process,Os=function(){try{var Te=wi&&wi.require&&wi.require("util").types;return Te||Nd&&Nd.binding&&Nd.binding("util")}catch{}}(),Xm=Os&&Os.isArrayBuffer,Qm=Os&&Os.isDate,ab=Os&&Os.isMap,BC=Os&&Os.isRegExp,ub=Os&&Os.isSet,jD=Os&&Os.isTypedArray;function Xa(Te,Ye,je){switch(je.length){case 0:return Te.call(Ye);case 1:return Te.call(Ye,je[0]);case 2:return Te.call(Ye,je[0],je[1]);case 3:return Te.call(Ye,je[0],je[1],je[2])}return Te.apply(Ye,je)}function lb(Te,Ye,je,zt){for(var Fn=-1,ci=Te==null?0:Te.length;++Fn<ci;){var Po=Te[Fn];Ye(zt,Po,je(Po),Te)}return zt}function Bu(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length;++je<zt&&Ye(Te[je],je,Te)!==!1;);return Te}function UD(Te,Ye){for(var je=Te==null?0:Te.length;je--&&Ye(Te[je],je,Te)!==!1;);return Te}function kw(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length;++je<zt;)if(!Ye(Te[je],je,Te))return!1;return!0}function Cf(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length,Fn=0,ci=[];++je<zt;){var Po=Te[je];Ye(Po,je,Te)&&(ci[Fn++]=Po)}return ci}function cb(Te,Ye){var je=Te==null?0:Te.length;return!!je&&Jm(Te,Ye,0)>-1}function ay(Te,Ye,je){for(var zt=-1,Fn=Te==null?0:Te.length;++zt<Fn;)if(je(Ye,Te[zt]))return!0;return!1}function zi(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length,Fn=Array(zt);++je<zt;)Fn[je]=Ye(Te[je],je,Te);return Fn}function Od(Te,Ye){for(var je=-1,zt=Ye.length,Fn=Te.length;++je<zt;)Te[Fn+je]=Ye[je];return Te}function $d(Te,Ye,je,zt){var Fn=-1,ci=Te==null?0:Te.length;for(zt&&ci&&(je=Te[++Fn]);++Fn<ci;)je=Ye(je,Te[Fn],Fn,Te);return je}function zD(Te,Ye,je,zt){var Fn=Te==null?0:Te.length;for(zt&&Fn&&(je=Te[--Fn]);Fn--;)je=Ye(je,Te[Fn],Fn,Te);return je}function Rw(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length;++je<zt;)if(Ye(Te[je],je,Te))return!0;return!1}var VD=Y("length");function HD(Te){return Te.split("")}function Pw(Te){return Te.match(Le)||[]}function Qa(Te,Ye,je){var zt;return je(Te,function(Fn,ci,Po){if(Ye(Fn,ci,Po))return zt=ci,!1}),zt}function fb(Te,Ye,je,zt){for(var Fn=Te.length,ci=je+(zt?1:-1);zt?ci--:++ci<Fn;)if(Ye(Te[ci],ci,Te))return ci;return-1}function Jm(Te,Ye,je){return Ye===Ye?PHe(Te,Ye,je):fb(Te,I,je)}function uy(Te,Ye,je,zt){for(var Fn=je-1,ci=Te.length;++Fn<ci;)if(zt(Te[Fn],Ye))return Fn;return-1}function I(Te){return Te!==Te}function U(Te,Ye){var je=Te==null?0:Te.length;return je?At(Te,Ye)/je:F}function Y(Te){return function(Ye){return Ye==null?n:Ye[Te]}}function ne(Te){return function(Ye){return Te==null?n:Te[Ye]}}function Pe(Te,Ye,je,zt,Fn){return Fn(Te,function(ci,Po,Vi){je=zt?(zt=!1,ci):Ye(je,ci,Po,Vi)}),je}function Ve(Te,Ye){var je=Te.length;for(Te.sort(Ye);je--;)Te[je]=Te[je].value;return Te}function At(Te,Ye){for(var je,zt=-1,Fn=Te.length;++zt<Fn;){var ci=Ye(Te[zt]);ci!==n&&(je=je===n?ci:je+ci)}return je}function li(Te,Ye){for(var je=-1,zt=Array(Te);++je<Te;)zt[je]=Ye(je);return zt}function Ro(Te,Ye){return zi(Ye,function(je){return[je,Te[je]]})}function kr(Te){return Te&&Te.slice(0,ule(Te)+1).replace(Ri,"")}function gi(Te){return function(Ye){return Te(Ye)}}function vo(Te,Ye){return zi(Ye,function(je){return Te[je]})}function Af(Te,Ye){return Te.has(Ye)}function Al(Te,Ye){for(var je=-1,zt=Te.length;++je<zt&&Jm(Ye,Te[je],0)>-1;);return je}function db(Te,Ye){for(var je=Te.length;je--&&Jm(Ye,Te[je],0)>-1;);return je}function jC(Te,Ye){for(var je=Te.length,zt=0;je--;)Te[je]===Ye&&++zt;return zt}var THe=ne(Iw),SHe=ne(le);function CHe(Te){return"\\"+Be[Te]}function AHe(Te,Ye){return Te==null?n:Te[Ye]}function Dw(Te){return Cw.test(Te)}function IHe(Te){return Ym.test(Te)}function kHe(Te){for(var Ye,je=[];!(Ye=Te.next()).done;)je.push(Ye.value);return je}function s7(Te){var Ye=-1,je=Array(Te.size);return Te.forEach(function(zt,Fn){je[++Ye]=[Fn,zt]}),je}function ale(Te,Ye){return function(je){return Te(Ye(je))}}function ly(Te,Ye){for(var je=-1,zt=Te.length,Fn=0,ci=[];++je<zt;){var Po=Te[je];(Po===Ye||Po===c)&&(Te[je]=c,ci[Fn++]=je)}return ci}function qD(Te){var Ye=-1,je=Array(Te.size);return Te.forEach(function(zt){je[++Ye]=zt}),je}function RHe(Te){var Ye=-1,je=Array(Te.size);return Te.forEach(function(zt){je[++Ye]=[zt,zt]}),je}function PHe(Te,Ye,je){for(var zt=je-1,Fn=Te.length;++zt<Fn;)if(Te[zt]===Ye)return zt;return-1}function DHe(Te,Ye,je){for(var zt=je+1;zt--;)if(Te[zt]===Ye)return zt;return zt}function Nw(Te){return Dw(Te)?OHe(Te):VD(Te)}function Ld(Te){return Dw(Te)?$He(Te):HD(Te)}function ule(Te){for(var Ye=Te.length;Ye--&&me.test(Te.charAt(Ye)););return Ye}var NHe=ne(ye);function OHe(Te){for(var Ye=Zo.lastIndex=0;Zo.test(Te);)++Ye;return Ye}function $He(Te){return Te.match(Zo)||[]}function LHe(Te){return Te.match(FC)||[]}var MHe=function Te(Ye){Ye=Ye==null?un:Ow.defaults(un.Object(),Ye,Ow.pick(un,Km));var je=Ye.Array,zt=Ye.Date,Fn=Ye.Error,ci=Ye.Function,Po=Ye.Math,Vi=Ye.Object,o7=Ye.RegExp,FHe=Ye.String,If=Ye.TypeError,WD=je.prototype,BHe=ci.prototype,$w=Vi.prototype,GD=Ye["__core-js_shared__"],YD=BHe.toString,Ei=$w.hasOwnProperty,jHe=0,lle=function(){var x=/[^.]+$/.exec(GD&&GD.keys&&GD.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),KD=$w.toString,UHe=YD.call(Vi),zHe=un._,VHe=o7("^"+YD.call(Ei).replace(Qs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),XD=ko?Ye.Buffer:n,cy=Ye.Symbol,QD=Ye.Uint8Array,cle=XD?XD.allocUnsafe:n,JD=ale(Vi.getPrototypeOf,Vi),fle=Vi.create,dle=$w.propertyIsEnumerable,ZD=WD.splice,hle=cy?cy.isConcatSpreadable:n,UC=cy?cy.iterator:n,hb=cy?cy.toStringTag:n,eN=function(){try{var x=vb(Vi,"defineProperty");return x({},"",{}),x}catch{}}(),HHe=Ye.clearTimeout!==un.clearTimeout&&Ye.clearTimeout,qHe=zt&&zt.now!==un.Date.now&&zt.now,WHe=Ye.setTimeout!==un.setTimeout&&Ye.setTimeout,tN=Po.ceil,nN=Po.floor,a7=Vi.getOwnPropertySymbols,GHe=XD?XD.isBuffer:n,ple=Ye.isFinite,YHe=WD.join,KHe=ale(Vi.keys,Vi),Do=Po.max,Ja=Po.min,XHe=zt.now,QHe=Ye.parseInt,mle=Po.random,JHe=WD.reverse,u7=vb(Ye,"DataView"),zC=vb(Ye,"Map"),l7=vb(Ye,"Promise"),Lw=vb(Ye,"Set"),VC=vb(Ye,"WeakMap"),HC=vb(Vi,"create"),rN=VC&&new VC,Mw={},ZHe=bb(u7),eqe=bb(zC),tqe=bb(l7),nqe=bb(Lw),rqe=bb(VC),iN=cy?cy.prototype:n,qC=iN?iN.valueOf:n,gle=iN?iN.toString:n;function Z(x){if($s(x)&&!Vn(x)&&!(x instanceof br)){if(x instanceof kf)return x;if(Ei.call(x,"__wrapped__"))return yce(x)}return new kf(x)}var Fw=function(){function x(){}return function(T){if(!As(T))return{};if(fle)return fle(T);x.prototype=T;var D=new x;return x.prototype=n,D}}();function sN(){}function kf(x,T){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=n}Z.templateSettings={escape:kc,evaluate:Jo,interpolate:Mu,variable:"",imports:{_:Z}},Z.prototype=sN.prototype,Z.prototype.constructor=Z,kf.prototype=Fw(sN.prototype),kf.prototype.constructor=kf;function br(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function iqe(){var x=new br(this.__wrapped__);return x.__actions__=Il(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=Il(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=Il(this.__views__),x}function sqe(){if(this.__filtered__){var x=new br(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function oqe(){var x=this.__wrapped__.value(),T=this.__dir__,D=Vn(x),z=T<0,X=D?x.length:0,re=vWe(0,X,this.__views__),ce=re.start,ve=re.end,Ie=ve-ce,et=z?ve:ce-1,tt=this.__iteratees__,lt=tt.length,$t=0,Qt=Ja(Ie,this.__takeCount__);if(!D||!z&&X==Ie&&Qt==Ie)return jle(x,this.__actions__);var mn=[];e:for(;Ie--&&$t<Qt;){et+=T;for(var tr=-1,gn=x[et];++tr<lt;){var pr=tt[tr],Rr=pr.iteratee,Nc=pr.type,zu=Rr(gn);if(Nc==q)gn=zu;else if(!zu){if(Nc==B)continue e;break e}}mn[$t++]=gn}return mn}br.prototype=Fw(sN.prototype),br.prototype.constructor=br;function pb(x){var T=-1,D=x==null?0:x.length;for(this.clear();++T<D;){var z=x[T];this.set(z[0],z[1])}}function aqe(){this.__data__=HC?HC(null):{},this.size=0}function uqe(x){var T=this.has(x)&&delete this.__data__[x];return this.size-=T?1:0,T}function lqe(x){var T=this.__data__;if(HC){var D=T[x];return D===u?n:D}return Ei.call(T,x)?T[x]:n}function cqe(x){var T=this.__data__;return HC?T[x]!==n:Ei.call(T,x)}function fqe(x,T){var D=this.__data__;return this.size+=this.has(x)?0:1,D[x]=HC&&T===n?u:T,this}pb.prototype.clear=aqe,pb.prototype.delete=uqe,pb.prototype.get=lqe,pb.prototype.has=cqe,pb.prototype.set=fqe;function Zm(x){var T=-1,D=x==null?0:x.length;for(this.clear();++T<D;){var z=x[T];this.set(z[0],z[1])}}function dqe(){this.__data__=[],this.size=0}function hqe(x){var T=this.__data__,D=oN(T,x);if(D<0)return!1;var z=T.length-1;return D==z?T.pop():ZD.call(T,D,1),--this.size,!0}function pqe(x){var T=this.__data__,D=oN(T,x);return D<0?n:T[D][1]}function mqe(x){return oN(this.__data__,x)>-1}function gqe(x,T){var D=this.__data__,z=oN(D,x);return z<0?(++this.size,D.push([x,T])):D[z][1]=T,this}Zm.prototype.clear=dqe,Zm.prototype.delete=hqe,Zm.prototype.get=pqe,Zm.prototype.has=mqe,Zm.prototype.set=gqe;function e0(x){var T=-1,D=x==null?0:x.length;for(this.clear();++T<D;){var z=x[T];this.set(z[0],z[1])}}function yqe(){this.size=0,this.__data__={hash:new pb,map:new(zC||Zm),string:new pb}}function vqe(x){var T=vN(this,x).delete(x);return this.size-=T?1:0,T}function bqe(x){return vN(this,x).get(x)}function xqe(x){return vN(this,x).has(x)}function _qe(x,T){var D=vN(this,x),z=D.size;return D.set(x,T),this.size+=D.size==z?0:1,this}e0.prototype.clear=yqe,e0.prototype.delete=vqe,e0.prototype.get=bqe,e0.prototype.has=xqe,e0.prototype.set=_qe;function mb(x){var T=-1,D=x==null?0:x.length;for(this.__data__=new e0;++T<D;)this.add(x[T])}function wqe(x){return this.__data__.set(x,u),this}function Eqe(x){return this.__data__.has(x)}mb.prototype.add=mb.prototype.push=wqe,mb.prototype.has=Eqe;function Md(x){var T=this.__data__=new Zm(x);this.size=T.size}function Tqe(){this.__data__=new Zm,this.size=0}function Sqe(x){var T=this.__data__,D=T.delete(x);return this.size=T.size,D}function Cqe(x){return this.__data__.get(x)}function Aqe(x){return this.__data__.has(x)}function Iqe(x,T){var D=this.__data__;if(D instanceof Zm){var z=D.__data__;if(!zC||z.length<i-1)return z.push([x,T]),this.size=++D.size,this;D=this.__data__=new e0(z)}return D.set(x,T),this.size=D.size,this}Md.prototype.clear=Tqe,Md.prototype.delete=Sqe,Md.prototype.get=Cqe,Md.prototype.has=Aqe,Md.prototype.set=Iqe;function yle(x,T){var D=Vn(x),z=!D&&xb(x),X=!D&&!z&&my(x),re=!D&&!z&&!X&&zw(x),ce=D||z||X||re,ve=ce?li(x.length,FHe):[],Ie=ve.length;for(var et in x)(T||Ei.call(x,et))&&!(ce&&(et=="length"||X&&(et=="offset"||et=="parent")||re&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||i0(et,Ie)))&&ve.push(et);return ve}function vle(x){var T=x.length;return T?x[x7(0,T-1)]:n}function kqe(x,T){return bN(Il(x),gb(T,0,x.length))}function Rqe(x){return bN(Il(x))}function c7(x,T,D){(D!==n&&!Fd(x[T],D)||D===n&&!(T in x))&&t0(x,T,D)}function WC(x,T,D){var z=x[T];(!(Ei.call(x,T)&&Fd(z,D))||D===n&&!(T in x))&&t0(x,T,D)}function oN(x,T){for(var D=x.length;D--;)if(Fd(x[D][0],T))return D;return-1}function Pqe(x,T,D,z){return fy(x,function(X,re,ce){T(z,X,D(X),ce)}),z}function ble(x,T){return x&&op(T,ea(T),x)}function Dqe(x,T){return x&&op(T,Rl(T),x)}function t0(x,T,D){T=="__proto__"&&eN?eN(x,T,{configurable:!0,enumerable:!0,value:D,writable:!0}):x[T]=D}function f7(x,T){for(var D=-1,z=T.length,X=je(z),re=x==null;++D<z;)X[D]=re?n:q7(x,T[D]);return X}function gb(x,T,D){return x===x&&(D!==n&&(x=x<=D?x:D),T!==n&&(x=x>=T?x:T)),x}function Rf(x,T,D,z,X,re){var ce,ve=T&f,Ie=T&d,et=T&h;if(D&&(ce=X?D(x,z,X,re):D(x)),ce!==n)return ce;if(!As(x))return x;var tt=Vn(x);if(tt){if(ce=xWe(x),!ve)return Il(x,ce)}else{var lt=Za(x),$t=lt==Re||lt==Tt;if(my(x))return Vle(x,ve);if(lt==Se||lt==Q||$t&&!X){if(ce=Ie||$t?{}:uce(x),!ve)return Ie?lWe(x,Dqe(ce,x)):uWe(x,ble(ce,x))}else{if(!Ir[lt])return X?x:{};ce=_We(x,lt,ve)}}re||(re=new Md);var Qt=re.get(x);if(Qt)return Qt;re.set(x,ce),Mce(x)?x.forEach(function(gn){ce.add(Rf(gn,T,D,gn,x,re))}):$ce(x)&&x.forEach(function(gn,pr){ce.set(pr,Rf(gn,T,D,pr,x,re))});var mn=et?Ie?P7:R7:Ie?Rl:ea,tr=tt?n:mn(x);return Bu(tr||x,function(gn,pr){tr&&(pr=gn,gn=x[pr]),WC(ce,pr,Rf(gn,T,D,pr,x,re))}),ce}function Nqe(x){var T=ea(x);return function(D){return xle(D,x,T)}}function xle(x,T,D){var z=D.length;if(x==null)return!z;for(x=Vi(x);z--;){var X=D[z],re=T[X],ce=x[X];if(ce===n&&!(X in x)||!re(ce))return!1}return!0}function _le(x,T,D){if(typeof x!="function")throw new If(o);return ZC(function(){x.apply(n,D)},T)}function GC(x,T,D,z){var X=-1,re=cb,ce=!0,ve=x.length,Ie=[],et=T.length;if(!ve)return Ie;D&&(T=zi(T,gi(D))),z?(re=ay,ce=!1):T.length>=i&&(re=Af,ce=!1,T=new mb(T));e:for(;++X<ve;){var tt=x[X],lt=D==null?tt:D(tt);if(tt=z||tt!==0?tt:0,ce&&lt===lt){for(var $t=et;$t--;)if(T[$t]===lt)continue e;Ie.push(tt)}else re(T,lt,z)||Ie.push(tt)}return Ie}var fy=Yle(sp),wle=Yle(h7,!0);function Oqe(x,T){var D=!0;return fy(x,function(z,X,re){return D=!!T(z,X,re),D}),D}function aN(x,T,D){for(var z=-1,X=x.length;++z<X;){var re=x[z],ce=T(re);if(ce!=null&&(ve===n?ce===ce&&!Dc(ce):D(ce,ve)))var ve=ce,Ie=re}return Ie}function $qe(x,T,D,z){var X=x.length;for(D=Kn(D),D<0&&(D=-D>X?0:X+D),z=z===n||z>X?X:Kn(z),z<0&&(z+=X),z=D>z?0:Bce(z);D<z;)x[D++]=T;return x}function Ele(x,T){var D=[];return fy(x,function(z,X,re){T(z,X,re)&&D.push(z)}),D}function Ta(x,T,D,z,X){var re=-1,ce=x.length;for(D||(D=EWe),X||(X=[]);++re<ce;){var ve=x[re];T>0&&D(ve)?T>1?Ta(ve,T-1,D,z,X):Od(X,ve):z||(X[X.length]=ve)}return X}var d7=Kle(),Tle=Kle(!0);function sp(x,T){return x&&d7(x,T,ea)}function h7(x,T){return x&&Tle(x,T,ea)}function uN(x,T){return Cf(T,function(D){return s0(x[D])})}function yb(x,T){T=hy(T,x);for(var D=0,z=T.length;x!=null&&D<z;)x=x[ap(T[D++])];return D&&D==z?x:n}function Sle(x,T,D){var z=T(x);return Vn(x)?z:Od(z,D(x))}function ju(x){return x==null?x===n?kt:mt:hb&&hb in Vi(x)?yWe(x):RWe(x)}function p7(x,T){return x>T}function Lqe(x,T){return x!=null&&Ei.call(x,T)}function Mqe(x,T){return x!=null&&T in Vi(x)}function Fqe(x,T,D){return x>=Ja(T,D)&&x<Do(T,D)}function m7(x,T,D){for(var z=D?ay:cb,X=x[0].length,re=x.length,ce=re,ve=je(re),Ie=1/0,et=[];ce--;){var tt=x[ce];ce&&T&&(tt=zi(tt,gi(T))),Ie=Ja(tt.length,Ie),ve[ce]=!D&&(T||X>=120&&tt.length>=120)?new mb(ce&&tt):n}tt=x[0];var lt=-1,$t=ve[0];e:for(;++lt<X&&et.length<Ie;){var Qt=tt[lt],mn=T?T(Qt):Qt;if(Qt=D||Qt!==0?Qt:0,!($t?Af($t,mn):z(et,mn,D))){for(ce=re;--ce;){var tr=ve[ce];if(!(tr?Af(tr,mn):z(x[ce],mn,D)))continue e}$t&&$t.push(mn),et.push(Qt)}}return et}function Bqe(x,T,D,z){return sp(x,function(X,re,ce){T(z,D(X),re,ce)}),z}function YC(x,T,D){T=hy(T,x),x=dce(x,T);var z=x==null?x:x[ap(Df(T))];return z==null?n:Xa(z,x,D)}function Cle(x){return $s(x)&&ju(x)==Q}function jqe(x){return $s(x)&&ju(x)==Oe}function Uqe(x){return $s(x)&&ju(x)==Ae}function KC(x,T,D,z,X){return x===T?!0:x==null||T==null||!$s(x)&&!$s(T)?x!==x&&T!==T:zqe(x,T,D,z,KC,X)}function zqe(x,T,D,z,X,re){var ce=Vn(x),ve=Vn(T),Ie=ce?se:Za(x),et=ve?se:Za(T);Ie=Ie==Q?Se:Ie,et=et==Q?Se:et;var tt=Ie==Se,lt=et==Se,$t=Ie==et;if($t&&my(x)){if(!my(T))return!1;ce=!0,tt=!1}if($t&&!tt)return re||(re=new Md),ce||zw(x)?sce(x,T,D,z,X,re):mWe(x,T,Ie,D,z,X,re);if(!(D&p)){var Qt=tt&&Ei.call(x,"__wrapped__"),mn=lt&&Ei.call(T,"__wrapped__");if(Qt||mn){var tr=Qt?x.value():x,gn=mn?T.value():T;return re||(re=new Md),X(tr,gn,D,z,re)}}return $t?(re||(re=new Md),gWe(x,T,D,z,X,re)):!1}function Vqe(x){return $s(x)&&Za(x)==Ze}function g7(x,T,D,z){var X=D.length,re=X,ce=!z;if(x==null)return!re;for(x=Vi(x);X--;){var ve=D[X];if(ce&&ve[2]?ve[1]!==x[ve[0]]:!(ve[0]in x))return!1}for(;++X<re;){ve=D[X];var Ie=ve[0],et=x[Ie],tt=ve[1];if(ce&&ve[2]){if(et===n&&!(Ie in x))return!1}else{var lt=new Md;if(z)var $t=z(et,tt,Ie,x,T,lt);if(!($t===n?KC(tt,et,p|m,z,lt):$t))return!1}}return!0}function Ale(x){if(!As(x)||SWe(x))return!1;var T=s0(x)?VHe:Cr;return T.test(bb(x))}function Hqe(x){return $s(x)&&ju(x)==yt}function qqe(x){return $s(x)&&Za(x)==Pt}function Wqe(x){return $s(x)&&SN(x.length)&&!!qr[ju(x)]}function Ile(x){return typeof x=="function"?x:x==null?Pl:typeof x=="object"?Vn(x)?Ple(x[0],x[1]):Rle(x):Xce(x)}function y7(x){if(!JC(x))return KHe(x);var T=[];for(var D in Vi(x))Ei.call(x,D)&&D!="constructor"&&T.push(D);return T}function Gqe(x){if(!As(x))return kWe(x);var T=JC(x),D=[];for(var z in x)z=="constructor"&&(T||!Ei.call(x,z))||D.push(z);return D}function v7(x,T){return x<T}function kle(x,T){var D=-1,z=kl(x)?je(x.length):[];return fy(x,function(X,re,ce){z[++D]=T(X,re,ce)}),z}function Rle(x){var T=N7(x);return T.length==1&&T[0][2]?cce(T[0][0],T[0][1]):function(D){return D===x||g7(D,x,T)}}function Ple(x,T){return $7(x)&&lce(T)?cce(ap(x),T):function(D){var z=q7(D,x);return z===n&&z===T?W7(D,x):KC(T,z,p|m)}}function lN(x,T,D,z,X){x!==T&&d7(T,function(re,ce){if(X||(X=new Md),As(re))Yqe(x,T,ce,D,lN,z,X);else{var ve=z?z(M7(x,ce),re,ce+"",x,T,X):n;ve===n&&(ve=re),c7(x,ce,ve)}},Rl)}function Yqe(x,T,D,z,X,re,ce){var ve=M7(x,D),Ie=M7(T,D),et=ce.get(Ie);if(et){c7(x,D,et);return}var tt=re?re(ve,Ie,D+"",x,T,ce):n,lt=tt===n;if(lt){var $t=Vn(Ie),Qt=!$t&&my(Ie),mn=!$t&&!Qt&&zw(Ie);tt=Ie,$t||Qt||mn?Vn(ve)?tt=ve:Js(ve)?tt=Il(ve):Qt?(lt=!1,tt=Vle(Ie,!0)):mn?(lt=!1,tt=Hle(Ie,!0)):tt=[]:eA(Ie)||xb(Ie)?(tt=ve,xb(ve)?tt=jce(ve):(!As(ve)||s0(ve))&&(tt=uce(Ie))):lt=!1}lt&&(ce.set(Ie,tt),X(tt,Ie,z,re,ce),ce.delete(Ie)),c7(x,D,tt)}function Dle(x,T){var D=x.length;if(D)return T+=T<0?D:0,i0(T,D)?x[T]:n}function Nle(x,T,D){T.length?T=zi(T,function(re){return Vn(re)?function(ce){return yb(ce,re.length===1?re[0]:re)}:re}):T=[Pl];var z=-1;T=zi(T,gi(pn()));var X=kle(x,function(re,ce,ve){var Ie=zi(T,function(et){return et(re)});return{criteria:Ie,index:++z,value:re}});return Ve(X,function(re,ce){return aWe(re,ce,D)})}function Kqe(x,T){return Ole(x,T,function(D,z){return W7(x,z)})}function Ole(x,T,D){for(var z=-1,X=T.length,re={};++z<X;){var ce=T[z],ve=yb(x,ce);D(ve,ce)&&XC(re,hy(ce,x),ve)}return re}function Xqe(x){return function(T){return yb(T,x)}}function b7(x,T,D,z){var X=z?uy:Jm,re=-1,ce=T.length,ve=x;for(x===T&&(T=Il(T)),D&&(ve=zi(x,gi(D)));++re<ce;)for(var Ie=0,et=T[re],tt=D?D(et):et;(Ie=X(ve,tt,Ie,z))>-1;)ve!==x&&ZD.call(ve,Ie,1),ZD.call(x,Ie,1);return x}function $le(x,T){for(var D=x?T.length:0,z=D-1;D--;){var X=T[D];if(D==z||X!==re){var re=X;i0(X)?ZD.call(x,X,1):E7(x,X)}}return x}function x7(x,T){return x+nN(mle()*(T-x+1))}function Qqe(x,T,D,z){for(var X=-1,re=Do(tN((T-x)/(D||1)),0),ce=je(re);re--;)ce[z?re:++X]=x,x+=D;return ce}function _7(x,T){var D="";if(!x||T<1||T>K)return D;do T%2&&(D+=x),T=nN(T/2),T&&(x+=x);while(T);return D}function sr(x,T){return F7(fce(x,T,Pl),x+"")}function Jqe(x){return vle(Vw(x))}function Zqe(x,T){var D=Vw(x);return bN(D,gb(T,0,D.length))}function XC(x,T,D,z){if(!As(x))return x;T=hy(T,x);for(var X=-1,re=T.length,ce=re-1,ve=x;ve!=null&&++X<re;){var Ie=ap(T[X]),et=D;if(Ie==="__proto__"||Ie==="constructor"||Ie==="prototype")return x;if(X!=ce){var tt=ve[Ie];et=z?z(tt,Ie,ve):n,et===n&&(et=As(tt)?tt:i0(T[X+1])?[]:{})}WC(ve,Ie,et),ve=ve[Ie]}return x}var Lle=rN?function(x,T){return rN.set(x,T),x}:Pl,eWe=eN?function(x,T){return eN(x,"toString",{configurable:!0,enumerable:!1,value:Y7(T),writable:!0})}:Pl;function tWe(x){return bN(Vw(x))}function Pf(x,T,D){var z=-1,X=x.length;T<0&&(T=-T>X?0:X+T),D=D>X?X:D,D<0&&(D+=X),X=T>D?0:D-T>>>0,T>>>=0;for(var re=je(X);++z<X;)re[z]=x[z+T];return re}function nWe(x,T){var D;return fy(x,function(z,X,re){return D=T(z,X,re),!D}),!!D}function cN(x,T,D){var z=0,X=x==null?z:x.length;if(typeof T=="number"&&T===T&&X<=M){for(;z<X;){var re=z+X>>>1,ce=x[re];ce!==null&&!Dc(ce)&&(D?ce<=T:ce<T)?z=re+1:X=re}return X}return w7(x,T,Pl,D)}function w7(x,T,D,z){var X=0,re=x==null?0:x.length;if(re===0)return 0;T=D(T);for(var ce=T!==T,ve=T===null,Ie=Dc(T),et=T===n;X<re;){var tt=nN((X+re)/2),lt=D(x[tt]),$t=lt!==n,Qt=lt===null,mn=lt===lt,tr=Dc(lt);if(ce)var gn=z||mn;else et?gn=mn&&(z||$t):ve?gn=mn&&$t&&(z||!Qt):Ie?gn=mn&&$t&&!Qt&&(z||!tr):Qt||tr?gn=!1:gn=z?lt<=T:lt<T;gn?X=tt+1:re=tt}return Ja(re,W)}function Mle(x,T){for(var D=-1,z=x.length,X=0,re=[];++D<z;){var ce=x[D],ve=T?T(ce):ce;if(!D||!Fd(ve,Ie)){var Ie=ve;re[X++]=ce===0?0:ce}}return re}function Fle(x){return typeof x=="number"?x:Dc(x)?F:+x}function Pc(x){if(typeof x=="string")return x;if(Vn(x))return zi(x,Pc)+"";if(Dc(x))return gle?gle.call(x):"";var T=x+"";return T=="0"&&1/x==-1/0?"-0":T}function dy(x,T,D){var z=-1,X=cb,re=x.length,ce=!0,ve=[],Ie=ve;if(D)ce=!1,X=ay;else if(re>=i){var et=T?null:hWe(x);if(et)return qD(et);ce=!1,X=Af,Ie=new mb}else Ie=T?[]:ve;e:for(;++z<re;){var tt=x[z],lt=T?T(tt):tt;if(tt=D||tt!==0?tt:0,ce&&lt===lt){for(var $t=Ie.length;$t--;)if(Ie[$t]===lt)continue e;T&&Ie.push(lt),ve.push(tt)}else X(Ie,lt,D)||(Ie!==ve&&Ie.push(lt),ve.push(tt))}return ve}function E7(x,T){return T=hy(T,x),x=dce(x,T),x==null||delete x[ap(Df(T))]}function Ble(x,T,D,z){return XC(x,T,D(yb(x,T)),z)}function fN(x,T,D,z){for(var X=x.length,re=z?X:-1;(z?re--:++re<X)&&T(x[re],re,x););return D?Pf(x,z?0:re,z?re+1:X):Pf(x,z?re+1:0,z?X:re)}function jle(x,T){var D=x;return D instanceof br&&(D=D.value()),$d(T,function(z,X){return X.func.apply(X.thisArg,Od([z],X.args))},D)}function T7(x,T,D){var z=x.length;if(z<2)return z?dy(x[0]):[];for(var X=-1,re=je(z);++X<z;)for(var ce=x[X],ve=-1;++ve<z;)ve!=X&&(re[X]=GC(re[X]||ce,x[ve],T,D));return dy(Ta(re,1),T,D)}function Ule(x,T,D){for(var z=-1,X=x.length,re=T.length,ce={};++z<X;){var ve=z<re?T[z]:n;D(ce,x[z],ve)}return ce}function S7(x){return Js(x)?x:[]}function C7(x){return typeof x=="function"?x:Pl}function hy(x,T){return Vn(x)?x:$7(x,T)?[x]:gce(yi(x))}var rWe=sr;function py(x,T,D){var z=x.length;return D=D===n?z:D,!T&&D>=z?x:Pf(x,T,D)}var zle=HHe||function(x){return un.clearTimeout(x)};function Vle(x,T){if(T)return x.slice();var D=x.length,z=cle?cle(D):new x.constructor(D);return x.copy(z),z}function A7(x){var T=new x.constructor(x.byteLength);return new QD(T).set(new QD(x)),T}function iWe(x,T){var D=T?A7(x.buffer):x.buffer;return new x.constructor(D,x.byteOffset,x.byteLength)}function sWe(x){var T=new x.constructor(x.source,Zn.exec(x));return T.lastIndex=x.lastIndex,T}function oWe(x){return qC?Vi(qC.call(x)):{}}function Hle(x,T){var D=T?A7(x.buffer):x.buffer;return new x.constructor(D,x.byteOffset,x.length)}function qle(x,T){if(x!==T){var D=x!==n,z=x===null,X=x===x,re=Dc(x),ce=T!==n,ve=T===null,Ie=T===T,et=Dc(T);if(!ve&&!et&&!re&&x>T||re&&ce&&Ie&&!ve&&!et||z&&ce&&Ie||!D&&Ie||!X)return 1;if(!z&&!re&&!et&&x<T||et&&D&&X&&!z&&!re||ve&&D&&X||!ce&&X||!Ie)return-1}return 0}function aWe(x,T,D){for(var z=-1,X=x.criteria,re=T.criteria,ce=X.length,ve=D.length;++z<ce;){var Ie=qle(X[z],re[z]);if(Ie){if(z>=ve)return Ie;var et=D[z];return Ie*(et=="desc"?-1:1)}}return x.index-T.index}function Wle(x,T,D,z){for(var X=-1,re=x.length,ce=D.length,ve=-1,Ie=T.length,et=Do(re-ce,0),tt=je(Ie+et),lt=!z;++ve<Ie;)tt[ve]=T[ve];for(;++X<ce;)(lt||X<re)&&(tt[D[X]]=x[X]);for(;et--;)tt[ve++]=x[X++];return tt}function Gle(x,T,D,z){for(var X=-1,re=x.length,ce=-1,ve=D.length,Ie=-1,et=T.length,tt=Do(re-ve,0),lt=je(tt+et),$t=!z;++X<tt;)lt[X]=x[X];for(var Qt=X;++Ie<et;)lt[Qt+Ie]=T[Ie];for(;++ce<ve;)($t||X<re)&&(lt[Qt+D[ce]]=x[X++]);return lt}function Il(x,T){var D=-1,z=x.length;for(T||(T=je(z));++D<z;)T[D]=x[D];return T}function op(x,T,D,z){var X=!D;D||(D={});for(var re=-1,ce=T.length;++re<ce;){var ve=T[re],Ie=z?z(D[ve],x[ve],ve,D,x):n;Ie===n&&(Ie=x[ve]),X?t0(D,ve,Ie):WC(D,ve,Ie)}return D}function uWe(x,T){return op(x,O7(x),T)}function lWe(x,T){return op(x,oce(x),T)}function dN(x,T){return function(D,z){var X=Vn(D)?lb:Pqe,re=T?T():{};return X(D,x,pn(z,2),re)}}function Bw(x){return sr(function(T,D){var z=-1,X=D.length,re=X>1?D[X-1]:n,ce=X>2?D[2]:n;for(re=x.length>3&&typeof re=="function"?(X--,re):n,ce&&Uu(D[0],D[1],ce)&&(re=X<3?n:re,X=1),T=Vi(T);++z<X;){var ve=D[z];ve&&x(T,ve,z,re)}return T})}function Yle(x,T){return function(D,z){if(D==null)return D;if(!kl(D))return x(D,z);for(var X=D.length,re=T?X:-1,ce=Vi(D);(T?re--:++re<X)&&z(ce[re],re,ce)!==!1;);return D}}function Kle(x){return function(T,D,z){for(var X=-1,re=Vi(T),ce=z(T),ve=ce.length;ve--;){var Ie=ce[x?ve:++X];if(D(re[Ie],Ie,re)===!1)break}return T}}function cWe(x,T,D){var z=T&g,X=QC(x);function re(){var ce=this&&this!==un&&this instanceof re?X:x;return ce.apply(z?D:this,arguments)}return re}function Xle(x){return function(T){T=yi(T);var D=Dw(T)?Ld(T):n,z=D?D[0]:T.charAt(0),X=D?py(D,1).join(""):T.slice(1);return z[x]()+X}}function jw(x){return function(T){return $d(Yce(Gce(T).replace(Sw,"")),x,"")}}function QC(x){return function(){var T=arguments;switch(T.length){case 0:return new x;case 1:return new x(T[0]);case 2:return new x(T[0],T[1]);case 3:return new x(T[0],T[1],T[2]);case 4:return new x(T[0],T[1],T[2],T[3]);case 5:return new x(T[0],T[1],T[2],T[3],T[4]);case 6:return new x(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new x(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var D=Fw(x.prototype),z=x.apply(D,T);return As(z)?z:D}}function fWe(x,T,D){var z=QC(x);function X(){for(var re=arguments.length,ce=je(re),ve=re,Ie=Uw(X);ve--;)ce[ve]=arguments[ve];var et=re<3&&ce[0]!==Ie&&ce[re-1]!==Ie?[]:ly(ce,Ie);if(re-=et.length,re<D)return tce(x,T,hN,X.placeholder,n,ce,et,n,n,D-re);var tt=this&&this!==un&&this instanceof X?z:x;return Xa(tt,this,ce)}return X}function Qle(x){return function(T,D,z){var X=Vi(T);if(!kl(T)){var re=pn(D,3);T=ea(T),D=function(ve){return re(X[ve],ve,X)}}var ce=x(T,D,z);return ce>-1?X[re?T[ce]:ce]:n}}function Jle(x){return r0(function(T){var D=T.length,z=D,X=kf.prototype.thru;for(x&&T.reverse();z--;){var re=T[z];if(typeof re!="function")throw new If(o);if(X&&!ce&&yN(re)=="wrapper")var ce=new kf([],!0)}for(z=ce?z:D;++z<D;){re=T[z];var ve=yN(re),Ie=ve=="wrapper"?D7(re):n;Ie&&L7(Ie[0])&&Ie[1]==(C|b|E|A)&&!Ie[4].length&&Ie[9]==1?ce=ce[yN(Ie[0])].apply(ce,Ie[3]):ce=re.length==1&&L7(re)?ce[ve]():ce.thru(re)}return function(){var et=arguments,tt=et[0];if(ce&&et.length==1&&Vn(tt))return ce.plant(tt).value();for(var lt=0,$t=D?T[lt].apply(this,et):tt;++lt<D;)$t=T[lt].call(this,$t);return $t}})}function hN(x,T,D,z,X,re,ce,ve,Ie,et){var tt=T&C,lt=T&g,$t=T&y,Qt=T&(b|_),mn=T&R,tr=$t?n:QC(x);function gn(){for(var pr=arguments.length,Rr=je(pr),Nc=pr;Nc--;)Rr[Nc]=arguments[Nc];if(Qt)var zu=Uw(gn),Oc=jC(Rr,zu);if(z&&(Rr=Wle(Rr,z,X,Qt)),re&&(Rr=Gle(Rr,re,ce,Qt)),pr-=Oc,Qt&&pr<et){var Zs=ly(Rr,zu);return tce(x,T,hN,gn.placeholder,D,Rr,Zs,ve,Ie,et-pr)}var Bd=lt?D:this,a0=$t?Bd[x]:x;return pr=Rr.length,ve?Rr=PWe(Rr,ve):mn&&pr>1&&Rr.reverse(),tt&&Ie<pr&&(Rr.length=Ie),this&&this!==un&&this instanceof gn&&(a0=tr||QC(a0)),a0.apply(Bd,Rr)}return gn}function Zle(x,T){return function(D,z){return Bqe(D,x,T(z),{})}}function pN(x,T){return function(D,z){var X;if(D===n&&z===n)return T;if(D!==n&&(X=D),z!==n){if(X===n)return z;typeof D=="string"||typeof z=="string"?(D=Pc(D),z=Pc(z)):(D=Fle(D),z=Fle(z)),X=x(D,z)}return X}}function I7(x){return r0(function(T){return T=zi(T,gi(pn())),sr(function(D){var z=this;return x(T,function(X){return Xa(X,z,D)})})})}function mN(x,T){T=T===n?" ":Pc(T);var D=T.length;if(D<2)return D?_7(T,x):T;var z=_7(T,tN(x/Nw(T)));return Dw(T)?py(Ld(z),0,x).join(""):z.slice(0,x)}function dWe(x,T,D,z){var X=T&g,re=QC(x);function ce(){for(var ve=-1,Ie=arguments.length,et=-1,tt=z.length,lt=je(tt+Ie),$t=this&&this!==un&&this instanceof ce?re:x;++et<tt;)lt[et]=z[et];for(;Ie--;)lt[et++]=arguments[++ve];return Xa($t,X?D:this,lt)}return ce}function ece(x){return function(T,D,z){return z&&typeof z!="number"&&Uu(T,D,z)&&(D=z=n),T=o0(T),D===n?(D=T,T=0):D=o0(D),z=z===n?T<D?1:-1:o0(z),Qqe(T,D,z,x)}}function gN(x){return function(T,D){return typeof T=="string"&&typeof D=="string"||(T=Nf(T),D=Nf(D)),x(T,D)}}function tce(x,T,D,z,X,re,ce,ve,Ie,et){var tt=T&b,lt=tt?ce:n,$t=tt?n:ce,Qt=tt?re:n,mn=tt?n:re;T|=tt?E:S,T&=~(tt?S:E),T&v||(T&=-4);var tr=[x,T,X,Qt,lt,mn,$t,ve,Ie,et],gn=D.apply(n,tr);return L7(x)&&hce(gn,tr),gn.placeholder=z,pce(gn,x,T)}function k7(x){var T=Po[x];return function(D,z){if(D=Nf(D),z=z==null?0:Ja(Kn(z),292),z&&ple(D)){var X=(yi(D)+"e").split("e"),re=T(X[0]+"e"+(+X[1]+z));return X=(yi(re)+"e").split("e"),+(X[0]+"e"+(+X[1]-z))}return T(D)}}var hWe=Lw&&1/qD(new Lw([,-0]))[1]==G?function(x){return new Lw(x)}:Q7;function nce(x){return function(T){var D=Za(T);return D==Ze?s7(T):D==Pt?RHe(T):Ro(T,x(T))}}function n0(x,T,D,z,X,re,ce,ve){var Ie=T&y;if(!Ie&&typeof x!="function")throw new If(o);var et=z?z.length:0;if(et||(T&=-97,z=X=n),ce=ce===n?ce:Do(Kn(ce),0),ve=ve===n?ve:Kn(ve),et-=X?X.length:0,T&S){var tt=z,lt=X;z=X=n}var $t=Ie?n:D7(x),Qt=[x,T,D,z,X,tt,lt,re,ce,ve];if($t&&IWe(Qt,$t),x=Qt[0],T=Qt[1],D=Qt[2],z=Qt[3],X=Qt[4],ve=Qt[9]=Qt[9]===n?Ie?0:x.length:Do(Qt[9]-et,0),!ve&&T&(b|_)&&(T&=-25),!T||T==g)var mn=cWe(x,T,D);else T==b||T==_?mn=fWe(x,T,ve):(T==E||T==(g|E))&&!X.length?mn=dWe(x,T,D,z):mn=hN.apply(n,Qt);var tr=$t?Lle:hce;return pce(tr(mn,Qt),x,T)}function rce(x,T,D,z){return x===n||Fd(x,$w[D])&&!Ei.call(z,D)?T:x}function ice(x,T,D,z,X,re){return As(x)&&As(T)&&(re.set(T,x),lN(x,T,n,ice,re),re.delete(T)),x}function pWe(x){return eA(x)?n:x}function sce(x,T,D,z,X,re){var ce=D&p,ve=x.length,Ie=T.length;if(ve!=Ie&&!(ce&&Ie>ve))return!1;var et=re.get(x),tt=re.get(T);if(et&&tt)return et==T&&tt==x;var lt=-1,$t=!0,Qt=D&m?new mb:n;for(re.set(x,T),re.set(T,x);++lt<ve;){var mn=x[lt],tr=T[lt];if(z)var gn=ce?z(tr,mn,lt,T,x,re):z(mn,tr,lt,x,T,re);if(gn!==n){if(gn)continue;$t=!1;break}if(Qt){if(!Rw(T,function(pr,Rr){if(!Af(Qt,Rr)&&(mn===pr||X(mn,pr,D,z,re)))return Qt.push(Rr)})){$t=!1;break}}else if(!(mn===tr||X(mn,tr,D,z,re))){$t=!1;break}}return re.delete(x),re.delete(T),$t}function mWe(x,T,D,z,X,re,ce){switch(D){case ot:if(x.byteLength!=T.byteLength||x.byteOffset!=T.byteOffset)return!1;x=x.buffer,T=T.buffer;case Oe:return!(x.byteLength!=T.byteLength||!re(new QD(x),new QD(T)));case he:case Ae:case It:return Fd(+x,+T);case rt:return x.name==T.name&&x.message==T.message;case yt:case Je:return x==T+"";case Ze:var ve=s7;case Pt:var Ie=z&p;if(ve||(ve=qD),x.size!=T.size&&!Ie)return!1;var et=ce.get(x);if(et)return et==T;z|=m,ce.set(x,T);var tt=sce(ve(x),ve(T),z,X,re,ce);return ce.delete(x),tt;case we:if(qC)return qC.call(x)==qC.call(T)}return!1}function gWe(x,T,D,z,X,re){var ce=D&p,ve=R7(x),Ie=ve.length,et=R7(T),tt=et.length;if(Ie!=tt&&!ce)return!1;for(var lt=Ie;lt--;){var $t=ve[lt];if(!(ce?$t in T:Ei.call(T,$t)))return!1}var Qt=re.get(x),mn=re.get(T);if(Qt&&mn)return Qt==T&&mn==x;var tr=!0;re.set(x,T),re.set(T,x);for(var gn=ce;++lt<Ie;){$t=ve[lt];var pr=x[$t],Rr=T[$t];if(z)var Nc=ce?z(Rr,pr,$t,T,x,re):z(pr,Rr,$t,x,T,re);if(!(Nc===n?pr===Rr||X(pr,Rr,D,z,re):Nc)){tr=!1;break}gn||(gn=$t=="constructor")}if(tr&&!gn){var zu=x.constructor,Oc=T.constructor;zu!=Oc&&"constructor"in x&&"constructor"in T&&!(typeof zu=="function"&&zu instanceof zu&&typeof Oc=="function"&&Oc instanceof Oc)&&(tr=!1)}return re.delete(x),re.delete(T),tr}function r0(x){return F7(fce(x,n,xce),x+"")}function R7(x){return Sle(x,ea,O7)}function P7(x){return Sle(x,Rl,oce)}var D7=rN?function(x){return rN.get(x)}:Q7;function yN(x){for(var T=x.name+"",D=Mw[T],z=Ei.call(Mw,T)?D.length:0;z--;){var X=D[z],re=X.func;if(re==null||re==x)return X.name}return T}function Uw(x){var T=Ei.call(Z,"placeholder")?Z:x;return T.placeholder}function pn(){var x=Z.iteratee||K7;return x=x===K7?Ile:x,arguments.length?x(arguments[0],arguments[1]):x}function vN(x,T){var D=x.__data__;return TWe(T)?D[typeof T=="string"?"string":"hash"]:D.map}function N7(x){for(var T=ea(x),D=T.length;D--;){var z=T[D],X=x[z];T[D]=[z,X,lce(X)]}return T}function vb(x,T){var D=AHe(x,T);return Ale(D)?D:n}function yWe(x){var T=Ei.call(x,hb),D=x[hb];try{x[hb]=n;var z=!0}catch{}var X=KD.call(x);return z&&(T?x[hb]=D:delete x[hb]),X}var O7=a7?function(x){return x==null?[]:(x=Vi(x),Cf(a7(x),function(T){return dle.call(x,T)}))}:J7,oce=a7?function(x){for(var T=[];x;)Od(T,O7(x)),x=JD(x);return T}:J7,Za=ju;(u7&&Za(new u7(new ArrayBuffer(1)))!=ot||zC&&Za(new zC)!=Ze||l7&&Za(l7.resolve())!=Fe||Lw&&Za(new Lw)!=Pt||VC&&Za(new VC)!=Rt)&&(Za=function(x){var T=ju(x),D=T==Se?x.constructor:n,z=D?bb(D):"";if(z)switch(z){case ZHe:return ot;case eqe:return Ze;case tqe:return Fe;case nqe:return Pt;case rqe:return Rt}return T});function vWe(x,T,D){for(var z=-1,X=D.length;++z<X;){var re=D[z],ce=re.size;switch(re.type){case"drop":x+=ce;break;case"dropRight":T-=ce;break;case"take":T=Ja(T,x+ce);break;case"takeRight":x=Do(x,T-ce);break}}return{start:x,end:T}}function bWe(x){var T=x.match(ge);return T?T[1].split(Me):[]}function ace(x,T,D){T=hy(T,x);for(var z=-1,X=T.length,re=!1;++z<X;){var ce=ap(T[z]);if(!(re=x!=null&&D(x,ce)))break;x=x[ce]}return re||++z!=X?re:(X=x==null?0:x.length,!!X&&SN(X)&&i0(ce,X)&&(Vn(x)||xb(x)))}function xWe(x){var T=x.length,D=new x.constructor(T);return T&&typeof x[0]=="string"&&Ei.call(x,"index")&&(D.index=x.index,D.input=x.input),D}function uce(x){return typeof x.constructor=="function"&&!JC(x)?Fw(JD(x)):{}}function _We(x,T,D){var z=x.constructor;switch(T){case Oe:return A7(x);case he:case Ae:return new z(+x);case ot:return iWe(x,D);case xt:case jt:case Un:case dr:case Sr:case xi:case Sn:case zn:case hr:return Hle(x,D);case Ze:return new z;case It:case Je:return new z(x);case yt:return sWe(x);case Pt:return new z;case we:return oWe(x)}}function wWe(x,T){var D=T.length;if(!D)return x;var z=D-1;return T[z]=(D>1?"& ":"")+T[z],T=T.join(D>2?", ":" "),x.replace(ue,`{
/* [wrapped with `+T+`] */
`)}function EWe(x){return Vn(x)||xb(x)||!!(hle&&x&&x[hle])}function i0(x,T){var D=typeof x;return T=T??K,!!T&&(D=="number"||D!="symbol"&&an.test(x))&&x>-1&&x%1==0&&x<T}function Uu(x,T,D){if(!As(D))return!1;var z=typeof T;return(z=="number"?kl(D)&&i0(T,D.length):z=="string"&&T in D)?Fd(D[T],x):!1}function $7(x,T){if(Vn(x))return!1;var D=typeof x;return D=="number"||D=="symbol"||D=="boolean"||x==null||Dc(x)?!0:ki.test(x)||!Br.test(x)||T!=null&&x in Vi(T)}function TWe(x){var T=typeof x;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?x!=="__proto__":x===null}function L7(x){var T=yN(x),D=Z[T];if(typeof D!="function"||!(T in br.prototype))return!1;if(x===D)return!0;var z=D7(D);return!!z&&x===z[0]}function SWe(x){return!!lle&&lle in x}var CWe=GD?s0:Z7;function JC(x){var T=x&&x.constructor,D=typeof T=="function"&&T.prototype||$w;return x===D}function lce(x){return x===x&&!As(x)}function cce(x,T){return function(D){return D==null?!1:D[x]===T&&(T!==n||x in Vi(D))}}function AWe(x){var T=EN(x,function(z){return D.size===l&&D.clear(),z}),D=T.cache;return T}function IWe(x,T){var D=x[1],z=T[1],X=D|z,re=X<(g|y|C),ce=z==C&&D==b||z==C&&D==A&&x[7].length<=T[8]||z==(C|A)&&T[7].length<=T[8]&&D==b;if(!(re||ce))return x;z&g&&(x[2]=T[2],X|=D&g?0:v);var ve=T[3];if(ve){var Ie=x[3];x[3]=Ie?Wle(Ie,ve,T[4]):ve,x[4]=Ie?ly(x[3],c):T[4]}return ve=T[5],ve&&(Ie=x[5],x[5]=Ie?Gle(Ie,ve,T[6]):ve,x[6]=Ie?ly(x[5],c):T[6]),ve=T[7],ve&&(x[7]=ve),z&C&&(x[8]=x[8]==null?T[8]:Ja(x[8],T[8])),x[9]==null&&(x[9]=T[9]),x[0]=T[0],x[1]=X,x}function kWe(x){var T=[];if(x!=null)for(var D in Vi(x))T.push(D);return T}function RWe(x){return KD.call(x)}function fce(x,T,D){return T=Do(T===n?x.length-1:T,0),function(){for(var z=arguments,X=-1,re=Do(z.length-T,0),ce=je(re);++X<re;)ce[X]=z[T+X];X=-1;for(var ve=je(T+1);++X<T;)ve[X]=z[X];return ve[T]=D(ce),Xa(x,this,ve)}}function dce(x,T){return T.length<2?x:yb(x,Pf(T,0,-1))}function PWe(x,T){for(var D=x.length,z=Ja(T.length,D),X=Il(x);z--;){var re=T[z];x[z]=i0(re,D)?X[re]:n}return x}function M7(x,T){if(!(T==="constructor"&&typeof x[T]=="function")&&T!="__proto__")return x[T]}var hce=mce(Lle),ZC=WHe||function(x,T){return un.setTimeout(x,T)},F7=mce(eWe);function pce(x,T,D){var z=T+"";return F7(x,wWe(z,DWe(bWe(z),D)))}function mce(x){var T=0,D=0;return function(){var z=XHe(),X=O-(z-D);if(D=z,X>0){if(++T>=L)return arguments[0]}else T=0;return x.apply(n,arguments)}}function bN(x,T){var D=-1,z=x.length,X=z-1;for(T=T===n?z:T;++D<T;){var re=x7(D,X),ce=x[re];x[re]=x[D],x[D]=ce}return x.length=T,x}var gce=AWe(function(x){var T=[];return x.charCodeAt(0)===46&&T.push(""),x.replace(mi,function(D,z,X,re){T.push(X?re.replace(Ut,"$1"):z||D)}),T});function ap(x){if(typeof x=="string"||Dc(x))return x;var T=x+"";return T=="0"&&1/x==-1/0?"-0":T}function bb(x){if(x!=null){try{return YD.call(x)}catch{}try{return x+""}catch{}}return""}function DWe(x,T){return Bu(V,function(D){var z="_."+D[0];T&D[1]&&!cb(x,z)&&x.push(z)}),x.sort()}function yce(x){if(x instanceof br)return x.clone();var T=new kf(x.__wrapped__,x.__chain__);return T.__actions__=Il(x.__actions__),T.__index__=x.__index__,T.__values__=x.__values__,T}function NWe(x,T,D){(D?Uu(x,T,D):T===n)?T=1:T=Do(Kn(T),0);var z=x==null?0:x.length;if(!z||T<1)return[];for(var X=0,re=0,ce=je(tN(z/T));X<z;)ce[re++]=Pf(x,X,X+=T);return ce}function OWe(x){for(var T=-1,D=x==null?0:x.length,z=0,X=[];++T<D;){var re=x[T];re&&(X[z++]=re)}return X}function $We(){var x=arguments.length;if(!x)return[];for(var T=je(x-1),D=arguments[0],z=x;z--;)T[z-1]=arguments[z];return Od(Vn(D)?Il(D):[D],Ta(T,1))}var LWe=sr(function(x,T){return Js(x)?GC(x,Ta(T,1,Js,!0)):[]}),MWe=sr(function(x,T){var D=Df(T);return Js(D)&&(D=n),Js(x)?GC(x,Ta(T,1,Js,!0),pn(D,2)):[]}),FWe=sr(function(x,T){var D=Df(T);return Js(D)&&(D=n),Js(x)?GC(x,Ta(T,1,Js,!0),n,D):[]});function BWe(x,T,D){var z=x==null?0:x.length;return z?(T=D||T===n?1:Kn(T),Pf(x,T<0?0:T,z)):[]}function jWe(x,T,D){var z=x==null?0:x.length;return z?(T=D||T===n?1:Kn(T),T=z-T,Pf(x,0,T<0?0:T)):[]}function UWe(x,T){return x&&x.length?fN(x,pn(T,3),!0,!0):[]}function zWe(x,T){return x&&x.length?fN(x,pn(T,3),!0):[]}function VWe(x,T,D,z){var X=x==null?0:x.length;return X?(D&&typeof D!="number"&&Uu(x,T,D)&&(D=0,z=X),$qe(x,T,D,z)):[]}function vce(x,T,D){var z=x==null?0:x.length;if(!z)return-1;var X=D==null?0:Kn(D);return X<0&&(X=Do(z+X,0)),fb(x,pn(T,3),X)}function bce(x,T,D){var z=x==null?0:x.length;if(!z)return-1;var X=z-1;return D!==n&&(X=Kn(D),X=D<0?Do(z+X,0):Ja(X,z-1)),fb(x,pn(T,3),X,!0)}function xce(x){var T=x==null?0:x.length;return T?Ta(x,1):[]}function HWe(x){var T=x==null?0:x.length;return T?Ta(x,G):[]}function qWe(x,T){var D=x==null?0:x.length;return D?(T=T===n?1:Kn(T),Ta(x,T)):[]}function WWe(x){for(var T=-1,D=x==null?0:x.length,z={};++T<D;){var X=x[T];z[X[0]]=X[1]}return z}function _ce(x){return x&&x.length?x[0]:n}function GWe(x,T,D){var z=x==null?0:x.length;if(!z)return-1;var X=D==null?0:Kn(D);return X<0&&(X=Do(z+X,0)),Jm(x,T,X)}function YWe(x){var T=x==null?0:x.length;return T?Pf(x,0,-1):[]}var KWe=sr(function(x){var T=zi(x,S7);return T.length&&T[0]===x[0]?m7(T):[]}),XWe=sr(function(x){var T=Df(x),D=zi(x,S7);return T===Df(D)?T=n:D.pop(),D.length&&D[0]===x[0]?m7(D,pn(T,2)):[]}),QWe=sr(function(x){var T=Df(x),D=zi(x,S7);return T=typeof T=="function"?T:n,T&&D.pop(),D.length&&D[0]===x[0]?m7(D,n,T):[]});function JWe(x,T){return x==null?"":YHe.call(x,T)}function Df(x){var T=x==null?0:x.length;return T?x[T-1]:n}function ZWe(x,T,D){var z=x==null?0:x.length;if(!z)return-1;var X=z;return D!==n&&(X=Kn(D),X=X<0?Do(z+X,0):Ja(X,z-1)),T===T?DHe(x,T,X):fb(x,I,X,!0)}function eGe(x,T){return x&&x.length?Dle(x,Kn(T)):n}var tGe=sr(wce);function wce(x,T){return x&&x.length&&T&&T.length?b7(x,T):x}function nGe(x,T,D){return x&&x.length&&T&&T.length?b7(x,T,pn(D,2)):x}function rGe(x,T,D){return x&&x.length&&T&&T.length?b7(x,T,n,D):x}var iGe=r0(function(x,T){var D=x==null?0:x.length,z=f7(x,T);return $le(x,zi(T,function(X){return i0(X,D)?+X:X}).sort(qle)),z});function sGe(x,T){var D=[];if(!(x&&x.length))return D;var z=-1,X=[],re=x.length;for(T=pn(T,3);++z<re;){var ce=x[z];T(ce,z,x)&&(D.push(ce),X.push(z))}return $le(x,X),D}function B7(x){return x==null?x:JHe.call(x)}function oGe(x,T,D){var z=x==null?0:x.length;return z?(D&&typeof D!="number"&&Uu(x,T,D)?(T=0,D=z):(T=T==null?0:Kn(T),D=D===n?z:Kn(D)),Pf(x,T,D)):[]}function aGe(x,T){return cN(x,T)}function uGe(x,T,D){return w7(x,T,pn(D,2))}function lGe(x,T){var D=x==null?0:x.length;if(D){var z=cN(x,T);if(z<D&&Fd(x[z],T))return z}return-1}function cGe(x,T){return cN(x,T,!0)}function fGe(x,T,D){return w7(x,T,pn(D,2),!0)}function dGe(x,T){var D=x==null?0:x.length;if(D){var z=cN(x,T,!0)-1;if(Fd(x[z],T))return z}return-1}function hGe(x){return x&&x.length?Mle(x):[]}function pGe(x,T){return x&&x.length?Mle(x,pn(T,2)):[]}function mGe(x){var T=x==null?0:x.length;return T?Pf(x,1,T):[]}function gGe(x,T,D){return x&&x.length?(T=D||T===n?1:Kn(T),Pf(x,0,T<0?0:T)):[]}function yGe(x,T,D){var z=x==null?0:x.length;return z?(T=D||T===n?1:Kn(T),T=z-T,Pf(x,T<0?0:T,z)):[]}function vGe(x,T){return x&&x.length?fN(x,pn(T,3),!1,!0):[]}function bGe(x,T){return x&&x.length?fN(x,pn(T,3)):[]}var xGe=sr(function(x){return dy(Ta(x,1,Js,!0))}),_Ge=sr(function(x){var T=Df(x);return Js(T)&&(T=n),dy(Ta(x,1,Js,!0),pn(T,2))}),wGe=sr(function(x){var T=Df(x);return T=typeof T=="function"?T:n,dy(Ta(x,1,Js,!0),n,T)});function EGe(x){return x&&x.length?dy(x):[]}function TGe(x,T){return x&&x.length?dy(x,pn(T,2)):[]}function SGe(x,T){return T=typeof T=="function"?T:n,x&&x.length?dy(x,n,T):[]}function j7(x){if(!(x&&x.length))return[];var T=0;return x=Cf(x,function(D){if(Js(D))return T=Do(D.length,T),!0}),li(T,function(D){return zi(x,Y(D))})}function Ece(x,T){if(!(x&&x.length))return[];var D=j7(x);return T==null?D:zi(D,function(z){return Xa(T,n,z)})}var CGe=sr(function(x,T){return Js(x)?GC(x,T):[]}),AGe=sr(function(x){return T7(Cf(x,Js))}),IGe=sr(function(x){var T=Df(x);return Js(T)&&(T=n),T7(Cf(x,Js),pn(T,2))}),kGe=sr(function(x){var T=Df(x);return T=typeof T=="function"?T:n,T7(Cf(x,Js),n,T)}),RGe=sr(j7);function PGe(x,T){return Ule(x||[],T||[],WC)}function DGe(x,T){return Ule(x||[],T||[],XC)}var NGe=sr(function(x){var T=x.length,D=T>1?x[T-1]:n;return D=typeof D=="function"?(x.pop(),D):n,Ece(x,D)});function Tce(x){var T=Z(x);return T.__chain__=!0,T}function OGe(x,T){return T(x),x}function xN(x,T){return T(x)}var $Ge=r0(function(x){var T=x.length,D=T?x[0]:0,z=this.__wrapped__,X=function(re){return f7(re,x)};return T>1||this.__actions__.length||!(z instanceof br)||!i0(D)?this.thru(X):(z=z.slice(D,+D+(T?1:0)),z.__actions__.push({func:xN,args:[X],thisArg:n}),new kf(z,this.__chain__).thru(function(re){return T&&!re.length&&re.push(n),re}))});function LGe(){return Tce(this)}function MGe(){return new kf(this.value(),this.__chain__)}function FGe(){this.__values__===n&&(this.__values__=Fce(this.value()));var x=this.__index__>=this.__values__.length,T=x?n:this.__values__[this.__index__++];return{done:x,value:T}}function BGe(){return this}function jGe(x){for(var T,D=this;D instanceof sN;){var z=yce(D);z.__index__=0,z.__values__=n,T?X.__wrapped__=z:T=z;var X=z;D=D.__wrapped__}return X.__wrapped__=x,T}function UGe(){var x=this.__wrapped__;if(x instanceof br){var T=x;return this.__actions__.length&&(T=new br(this)),T=T.reverse(),T.__actions__.push({func:xN,args:[B7],thisArg:n}),new kf(T,this.__chain__)}return this.thru(B7)}function zGe(){return jle(this.__wrapped__,this.__actions__)}var VGe=dN(function(x,T,D){Ei.call(x,D)?++x[D]:t0(x,D,1)});function HGe(x,T,D){var z=Vn(x)?kw:Oqe;return D&&Uu(x,T,D)&&(T=n),z(x,pn(T,3))}function qGe(x,T){var D=Vn(x)?Cf:Ele;return D(x,pn(T,3))}var WGe=Qle(vce),GGe=Qle(bce);function YGe(x,T){return Ta(_N(x,T),1)}function KGe(x,T){return Ta(_N(x,T),G)}function XGe(x,T,D){return D=D===n?1:Kn(D),Ta(_N(x,T),D)}function Sce(x,T){var D=Vn(x)?Bu:fy;return D(x,pn(T,3))}function Cce(x,T){var D=Vn(x)?UD:wle;return D(x,pn(T,3))}var QGe=dN(function(x,T,D){Ei.call(x,D)?x[D].push(T):t0(x,D,[T])});function JGe(x,T,D,z){x=kl(x)?x:Vw(x),D=D&&!z?Kn(D):0;var X=x.length;return D<0&&(D=Do(X+D,0)),CN(x)?D<=X&&x.indexOf(T,D)>-1:!!X&&Jm(x,T,D)>-1}var ZGe=sr(function(x,T,D){var z=-1,X=typeof T=="function",re=kl(x)?je(x.length):[];return fy(x,function(ce){re[++z]=X?Xa(T,ce,D):YC(ce,T,D)}),re}),eYe=dN(function(x,T,D){t0(x,D,T)});function _N(x,T){var D=Vn(x)?zi:kle;return D(x,pn(T,3))}function tYe(x,T,D,z){return x==null?[]:(Vn(T)||(T=T==null?[]:[T]),D=z?n:D,Vn(D)||(D=D==null?[]:[D]),Nle(x,T,D))}var nYe=dN(function(x,T,D){x[D?0:1].push(T)},function(){return[[],[]]});function rYe(x,T,D){var z=Vn(x)?$d:Pe,X=arguments.length<3;return z(x,pn(T,4),D,X,fy)}function iYe(x,T,D){var z=Vn(x)?zD:Pe,X=arguments.length<3;return z(x,pn(T,4),D,X,wle)}function sYe(x,T){var D=Vn(x)?Cf:Ele;return D(x,TN(pn(T,3)))}function oYe(x){var T=Vn(x)?vle:Jqe;return T(x)}function aYe(x,T,D){(D?Uu(x,T,D):T===n)?T=1:T=Kn(T);var z=Vn(x)?kqe:Zqe;return z(x,T)}function uYe(x){var T=Vn(x)?Rqe:tWe;return T(x)}function lYe(x){if(x==null)return 0;if(kl(x))return CN(x)?Nw(x):x.length;var T=Za(x);return T==Ze||T==Pt?x.size:y7(x).length}function cYe(x,T,D){var z=Vn(x)?Rw:nWe;return D&&Uu(x,T,D)&&(T=n),z(x,pn(T,3))}var fYe=sr(function(x,T){if(x==null)return[];var D=T.length;return D>1&&Uu(x,T[0],T[1])?T=[]:D>2&&Uu(T[0],T[1],T[2])&&(T=[T[0]]),Nle(x,Ta(T,1),[])}),wN=qHe||function(){return un.Date.now()};function dYe(x,T){if(typeof T!="function")throw new If(o);return x=Kn(x),function(){if(--x<1)return T.apply(this,arguments)}}function Ace(x,T,D){return T=D?n:T,T=x&&T==null?x.length:T,n0(x,C,n,n,n,n,T)}function Ice(x,T){var D;if(typeof T!="function")throw new If(o);return x=Kn(x),function(){return--x>0&&(D=T.apply(this,arguments)),x<=1&&(T=n),D}}var U7=sr(function(x,T,D){var z=g;if(D.length){var X=ly(D,Uw(U7));z|=E}return n0(x,z,T,D,X)}),kce=sr(function(x,T,D){var z=g|y;if(D.length){var X=ly(D,Uw(kce));z|=E}return n0(T,z,x,D,X)});function Rce(x,T,D){T=D?n:T;var z=n0(x,b,n,n,n,n,n,T);return z.placeholder=Rce.placeholder,z}function Pce(x,T,D){T=D?n:T;var z=n0(x,_,n,n,n,n,n,T);return z.placeholder=Pce.placeholder,z}function Dce(x,T,D){var z,X,re,ce,ve,Ie,et=0,tt=!1,lt=!1,$t=!0;if(typeof x!="function")throw new If(o);T=Nf(T)||0,As(D)&&(tt=!!D.leading,lt="maxWait"in D,re=lt?Do(Nf(D.maxWait)||0,T):re,$t="trailing"in D?!!D.trailing:$t);function Qt(Zs){var Bd=z,a0=X;return z=X=n,et=Zs,ce=x.apply(a0,Bd),ce}function mn(Zs){return et=Zs,ve=ZC(pr,T),tt?Qt(Zs):ce}function tr(Zs){var Bd=Zs-Ie,a0=Zs-et,Qce=T-Bd;return lt?Ja(Qce,re-a0):Qce}function gn(Zs){var Bd=Zs-Ie,a0=Zs-et;return Ie===n||Bd>=T||Bd<0||lt&&a0>=re}function pr(){var Zs=wN();if(gn(Zs))return Rr(Zs);ve=ZC(pr,tr(Zs))}function Rr(Zs){return ve=n,$t&&z?Qt(Zs):(z=X=n,ce)}function Nc(){ve!==n&&zle(ve),et=0,z=Ie=X=ve=n}function zu(){return ve===n?ce:Rr(wN())}function Oc(){var Zs=wN(),Bd=gn(Zs);if(z=arguments,X=this,Ie=Zs,Bd){if(ve===n)return mn(Ie);if(lt)return zle(ve),ve=ZC(pr,T),Qt(Ie)}return ve===n&&(ve=ZC(pr,T)),ce}return Oc.cancel=Nc,Oc.flush=zu,Oc}var hYe=sr(function(x,T){return _le(x,1,T)}),pYe=sr(function(x,T,D){return _le(x,Nf(T)||0,D)});function mYe(x){return n0(x,R)}function EN(x,T){if(typeof x!="function"||T!=null&&typeof T!="function")throw new If(o);var D=function(){var z=arguments,X=T?T.apply(this,z):z[0],re=D.cache;if(re.has(X))return re.get(X);var ce=x.apply(this,z);return D.cache=re.set(X,ce)||re,ce};return D.cache=new(EN.Cache||e0),D}EN.Cache=e0;function TN(x){if(typeof x!="function")throw new If(o);return function(){var T=arguments;switch(T.length){case 0:return!x.call(this);case 1:return!x.call(this,T[0]);case 2:return!x.call(this,T[0],T[1]);case 3:return!x.call(this,T[0],T[1],T[2])}return!x.apply(this,T)}}function gYe(x){return Ice(2,x)}var yYe=rWe(function(x,T){T=T.length==1&&Vn(T[0])?zi(T[0],gi(pn())):zi(Ta(T,1),gi(pn()));var D=T.length;return sr(function(z){for(var X=-1,re=Ja(z.length,D);++X<re;)z[X]=T[X].call(this,z[X]);return Xa(x,this,z)})}),z7=sr(function(x,T){var D=ly(T,Uw(z7));return n0(x,E,n,T,D)}),Nce=sr(function(x,T){var D=ly(T,Uw(Nce));return n0(x,S,n,T,D)}),vYe=r0(function(x,T){return n0(x,A,n,n,n,T)});function bYe(x,T){if(typeof x!="function")throw new If(o);return T=T===n?T:Kn(T),sr(x,T)}function xYe(x,T){if(typeof x!="function")throw new If(o);return T=T==null?0:Do(Kn(T),0),sr(function(D){var z=D[T],X=py(D,0,T);return z&&Od(X,z),Xa(x,this,X)})}function _Ye(x,T,D){var z=!0,X=!0;if(typeof x!="function")throw new If(o);return As(D)&&(z="leading"in D?!!D.leading:z,X="trailing"in D?!!D.trailing:X),Dce(x,T,{leading:z,maxWait:T,trailing:X})}function wYe(x){return Ace(x,1)}function EYe(x,T){return z7(C7(T),x)}function TYe(){if(!arguments.length)return[];var x=arguments[0];return Vn(x)?x:[x]}function SYe(x){return Rf(x,h)}function CYe(x,T){return T=typeof T=="function"?T:n,Rf(x,h,T)}function AYe(x){return Rf(x,f|h)}function IYe(x,T){return T=typeof T=="function"?T:n,Rf(x,f|h,T)}function kYe(x,T){return T==null||xle(x,T,ea(T))}function Fd(x,T){return x===T||x!==x&&T!==T}var RYe=gN(p7),PYe=gN(function(x,T){return x>=T}),xb=Cle(function(){return arguments}())?Cle:function(x){return $s(x)&&Ei.call(x,"callee")&&!dle.call(x,"callee")},Vn=je.isArray,DYe=Xm?gi(Xm):jqe;function kl(x){return x!=null&&SN(x.length)&&!s0(x)}function Js(x){return $s(x)&&kl(x)}function NYe(x){return x===!0||x===!1||$s(x)&&ju(x)==he}var my=GHe||Z7,OYe=Qm?gi(Qm):Uqe;function $Ye(x){return $s(x)&&x.nodeType===1&&!eA(x)}function LYe(x){if(x==null)return!0;if(kl(x)&&(Vn(x)||typeof x=="string"||typeof x.splice=="function"||my(x)||zw(x)||xb(x)))return!x.length;var T=Za(x);if(T==Ze||T==Pt)return!x.size;if(JC(x))return!y7(x).length;for(var D in x)if(Ei.call(x,D))return!1;return!0}function MYe(x,T){return KC(x,T)}function FYe(x,T,D){D=typeof D=="function"?D:n;var z=D?D(x,T):n;return z===n?KC(x,T,n,D):!!z}function V7(x){if(!$s(x))return!1;var T=ju(x);return T==rt||T==Ne||typeof x.message=="string"&&typeof x.name=="string"&&!eA(x)}function BYe(x){return typeof x=="number"&&ple(x)}function s0(x){if(!As(x))return!1;var T=ju(x);return T==Re||T==Tt||T==be||T==st}function Oce(x){return typeof x=="number"&&x==Kn(x)}function SN(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=K}function As(x){var T=typeof x;return x!=null&&(T=="object"||T=="function")}function $s(x){return x!=null&&typeof x=="object"}var $ce=ab?gi(ab):Vqe;function jYe(x,T){return x===T||g7(x,T,N7(T))}function UYe(x,T,D){return D=typeof D=="function"?D:n,g7(x,T,N7(T),D)}function zYe(x){return Lce(x)&&x!=+x}function VYe(x){if(CWe(x))throw new Fn(s);return Ale(x)}function HYe(x){return x===null}function qYe(x){return x==null}function Lce(x){return typeof x=="number"||$s(x)&&ju(x)==It}function eA(x){if(!$s(x)||ju(x)!=Se)return!1;var T=JD(x);if(T===null)return!0;var D=Ei.call(T,"constructor")&&T.constructor;return typeof D=="function"&&D instanceof D&&YD.call(D)==UHe}var H7=BC?gi(BC):Hqe;function WYe(x){return Oce(x)&&x>=-9007199254740991&&x<=K}var Mce=ub?gi(ub):qqe;function CN(x){return typeof x=="string"||!Vn(x)&&$s(x)&&ju(x)==Je}function Dc(x){return typeof x=="symbol"||$s(x)&&ju(x)==we}var zw=jD?gi(jD):Wqe;function GYe(x){return x===n}function YYe(x){return $s(x)&&Za(x)==Rt}function KYe(x){return $s(x)&&ju(x)==Ee}var XYe=gN(v7),QYe=gN(function(x,T){return x<=T});function Fce(x){if(!x)return[];if(kl(x))return CN(x)?Ld(x):Il(x);if(UC&&x[UC])return kHe(x[UC]());var T=Za(x),D=T==Ze?s7:T==Pt?qD:Vw;return D(x)}function o0(x){if(!x)return x===0?x:0;if(x=Nf(x),x===G||x===-1/0){var T=x<0?-1:1;return T*J}return x===x?x:0}function Kn(x){var T=o0(x),D=T%1;return T===T?D?T-D:T:0}function Bce(x){return x?gb(Kn(x),0,j):0}function Nf(x){if(typeof x=="number")return x;if(Dc(x))return F;if(As(x)){var T=typeof x.valueOf=="function"?x.valueOf():x;x=As(T)?T+"":T}if(typeof x!="string")return x===0?x:+x;x=kr(x);var D=On.test(x);return D||ai.test(x)?ir(x.slice(2),D?2:8):ur.test(x)?F:+x}function jce(x){return op(x,Rl(x))}function JYe(x){return x?gb(Kn(x),-9007199254740991,K):x===0?x:0}function yi(x){return x==null?"":Pc(x)}var ZYe=Bw(function(x,T){if(JC(T)||kl(T)){op(T,ea(T),x);return}for(var D in T)Ei.call(T,D)&&WC(x,D,T[D])}),Uce=Bw(function(x,T){op(T,Rl(T),x)}),AN=Bw(function(x,T,D,z){op(T,Rl(T),x,z)}),eKe=Bw(function(x,T,D,z){op(T,ea(T),x,z)}),tKe=r0(f7);function nKe(x,T){var D=Fw(x);return T==null?D:ble(D,T)}var rKe=sr(function(x,T){x=Vi(x);var D=-1,z=T.length,X=z>2?T[2]:n;for(X&&Uu(T[0],T[1],X)&&(z=1);++D<z;)for(var re=T[D],ce=Rl(re),ve=-1,Ie=ce.length;++ve<Ie;){var et=ce[ve],tt=x[et];(tt===n||Fd(tt,$w[et])&&!Ei.call(x,et))&&(x[et]=re[et])}return x}),iKe=sr(function(x){return x.push(n,ice),Xa(zce,n,x)});function sKe(x,T){return Qa(x,pn(T,3),sp)}function oKe(x,T){return Qa(x,pn(T,3),h7)}function aKe(x,T){return x==null?x:d7(x,pn(T,3),Rl)}function uKe(x,T){return x==null?x:Tle(x,pn(T,3),Rl)}function lKe(x,T){return x&&sp(x,pn(T,3))}function cKe(x,T){return x&&h7(x,pn(T,3))}function fKe(x){return x==null?[]:uN(x,ea(x))}function dKe(x){return x==null?[]:uN(x,Rl(x))}function q7(x,T,D){var z=x==null?n:yb(x,T);return z===n?D:z}function hKe(x,T){return x!=null&&ace(x,T,Lqe)}function W7(x,T){return x!=null&&ace(x,T,Mqe)}var pKe=Zle(function(x,T,D){T!=null&&typeof T.toString!="function"&&(T=KD.call(T)),x[T]=D},Y7(Pl)),mKe=Zle(function(x,T,D){T!=null&&typeof T.toString!="function"&&(T=KD.call(T)),Ei.call(x,T)?x[T].push(D):x[T]=[D]},pn),gKe=sr(YC);function ea(x){return kl(x)?yle(x):y7(x)}function Rl(x){return kl(x)?yle(x,!0):Gqe(x)}function yKe(x,T){var D={};return T=pn(T,3),sp(x,function(z,X,re){t0(D,T(z,X,re),z)}),D}function vKe(x,T){var D={};return T=pn(T,3),sp(x,function(z,X,re){t0(D,X,T(z,X,re))}),D}var bKe=Bw(function(x,T,D){lN(x,T,D)}),zce=Bw(function(x,T,D,z){lN(x,T,D,z)}),xKe=r0(function(x,T){var D={};if(x==null)return D;var z=!1;T=zi(T,function(re){return re=hy(re,x),z||(z=re.length>1),re}),op(x,P7(x),D),z&&(D=Rf(D,f|d|h,pWe));for(var X=T.length;X--;)E7(D,T[X]);return D});function _Ke(x,T){return Vce(x,TN(pn(T)))}var wKe=r0(function(x,T){return x==null?{}:Kqe(x,T)});function Vce(x,T){if(x==null)return{};var D=zi(P7(x),function(z){return[z]});return T=pn(T),Ole(x,D,function(z,X){return T(z,X[0])})}function EKe(x,T,D){T=hy(T,x);var z=-1,X=T.length;for(X||(X=1,x=n);++z<X;){var re=x==null?n:x[ap(T[z])];re===n&&(z=X,re=D),x=s0(re)?re.call(x):re}return x}function TKe(x,T,D){return x==null?x:XC(x,T,D)}function SKe(x,T,D,z){return z=typeof z=="function"?z:n,x==null?x:XC(x,T,D,z)}var Hce=nce(ea),qce=nce(Rl);function CKe(x,T,D){var z=Vn(x),X=z||my(x)||zw(x);if(T=pn(T,4),D==null){var re=x&&x.constructor;X?D=z?new re:[]:As(x)?D=s0(re)?Fw(JD(x)):{}:D={}}return(X?Bu:sp)(x,function(ce,ve,Ie){return T(D,ce,ve,Ie)}),D}function AKe(x,T){return x==null?!0:E7(x,T)}function IKe(x,T,D){return x==null?x:Ble(x,T,C7(D))}function kKe(x,T,D,z){return z=typeof z=="function"?z:n,x==null?x:Ble(x,T,C7(D),z)}function Vw(x){return x==null?[]:vo(x,ea(x))}function RKe(x){return x==null?[]:vo(x,Rl(x))}function PKe(x,T,D){return D===n&&(D=T,T=n),D!==n&&(D=Nf(D),D=D===D?D:0),T!==n&&(T=Nf(T),T=T===T?T:0),gb(Nf(x),T,D)}function DKe(x,T,D){return T=o0(T),D===n?(D=T,T=0):D=o0(D),x=Nf(x),Fqe(x,T,D)}function NKe(x,T,D){if(D&&typeof D!="boolean"&&Uu(x,T,D)&&(T=D=n),D===n&&(typeof T=="boolean"?(D=T,T=n):typeof x=="boolean"&&(D=x,x=n)),x===n&&T===n?(x=0,T=1):(x=o0(x),T===n?(T=x,x=0):T=o0(T)),x>T){var z=x;x=T,T=z}if(D||x%1||T%1){var X=mle();return Ja(x+X*(T-x+Ht("1e-"+((X+"").length-1))),T)}return x7(x,T)}var OKe=jw(function(x,T,D){return T=T.toLowerCase(),x+(D?Wce(T):T)});function Wce(x){return G7(yi(x).toLowerCase())}function Gce(x){return x=yi(x),x&&x.replace(Ar,THe).replace(Dd,"")}function $Ke(x,T,D){x=yi(x),T=Pc(T);var z=x.length;D=D===n?z:gb(Kn(D),0,z);var X=D;return D-=T.length,D>=0&&x.slice(D,X)==T}function LKe(x){return x=yi(x),x&&ps.test(x)?x.replace(Ns,SHe):x}function MKe(x){return x=yi(x),x&&oi.test(x)?x.replace(Qs,"\\$&"):x}var FKe=jw(function(x,T,D){return x+(D?"-":"")+T.toLowerCase()}),BKe=jw(function(x,T,D){return x+(D?" ":"")+T.toLowerCase()}),jKe=Xle("toLowerCase");function UKe(x,T,D){x=yi(x),T=Kn(T);var z=T?Nw(x):0;if(!T||z>=T)return x;var X=(T-z)/2;return mN(nN(X),D)+x+mN(tN(X),D)}function zKe(x,T,D){x=yi(x),T=Kn(T);var z=T?Nw(x):0;return T&&z<T?x+mN(T-z,D):x}function VKe(x,T,D){x=yi(x),T=Kn(T);var z=T?Nw(x):0;return T&&z<T?mN(T-z,D)+x:x}function HKe(x,T,D){return D||T==null?T=0:T&&(T=+T),QHe(yi(x).replace(Ri,""),T||0)}function qKe(x,T,D){return(D?Uu(x,T,D):T===n)?T=1:T=Kn(T),_7(yi(x),T)}function WKe(){var x=arguments,T=yi(x[0]);return x.length<3?T:T.replace(x[1],x[2])}var GKe=jw(function(x,T,D){return x+(D?"_":"")+T.toLowerCase()});function YKe(x,T,D){return D&&typeof D!="number"&&Uu(x,T,D)&&(T=D=n),D=D===n?j:D>>>0,D?(x=yi(x),x&&(typeof T=="string"||T!=null&&!H7(T))&&(T=Pc(T),!T&&Dw(x))?py(Ld(x),0,D):x.split(T,D)):[]}var KKe=jw(function(x,T,D){return x+(D?" ":"")+G7(T)});function XKe(x,T,D){return x=yi(x),D=D==null?0:gb(Kn(D),0,x.length),T=Pc(T),x.slice(D,D+T.length)==T}function QKe(x,T,D){var z=Z.templateSettings;D&&Uu(x,T,D)&&(T=n),x=yi(x),T=AN({},T,z,rce);var X=AN({},T.imports,z.imports,rce),re=ea(X),ce=vo(X,re),ve,Ie,et=0,tt=T.interpolate||Jr,lt="__p += '",$t=o7((T.escape||Jr).source+"|"+tt.source+"|"+(tt===Mu?dn:Jr).source+"|"+(T.evaluate||Jr).source+"|$","g"),Qt="//# sourceURL="+(Ei.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Aw+"]")+`
`;x.replace($t,function(gn,pr,Rr,Nc,zu,Oc){return Rr||(Rr=Nc),lt+=x.slice(et,Oc).replace(yr,CHe),pr&&(ve=!0,lt+=`' +
__e(`+pr+`) +
'`),zu&&(Ie=!0,lt+=`';
`+zu+`;
__p += '`),Rr&&(lt+=`' +
((__t = (`+Rr+`)) == null ? '' : __t) +
'`),et=Oc+gn.length,gn}),lt+=`';
`;var mn=Ei.call(T,"variable")&&T.variable;if(!mn)lt=`with (obj) {
`+lt+`
}
`;else if(_t.test(mn))throw new Fn(a);lt=(Ie?lt.replace(gr,""):lt).replace(Qo,"$1").replace(ts,"$1;"),lt="function("+(mn||"obj")+`) {
`+(mn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(Ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+lt+`return __p
}`;var tr=Kce(function(){return ci(re,Qt+"return "+lt).apply(n,ce)});if(tr.source=lt,V7(tr))throw tr;return tr}function JKe(x){return yi(x).toLowerCase()}function ZKe(x){return yi(x).toUpperCase()}function eXe(x,T,D){if(x=yi(x),x&&(D||T===n))return kr(x);if(!x||!(T=Pc(T)))return x;var z=Ld(x),X=Ld(T),re=Al(z,X),ce=db(z,X)+1;return py(z,re,ce).join("")}function tXe(x,T,D){if(x=yi(x),x&&(D||T===n))return x.slice(0,ule(x)+1);if(!x||!(T=Pc(T)))return x;var z=Ld(x),X=db(z,Ld(T))+1;return py(z,0,X).join("")}function nXe(x,T,D){if(x=yi(x),x&&(D||T===n))return x.replace(Ri,"");if(!x||!(T=Pc(T)))return x;var z=Ld(x),X=Al(z,Ld(T));return py(z,X).join("")}function rXe(x,T){var D=k,z=N;if(As(T)){var X="separator"in T?T.separator:X;D="length"in T?Kn(T.length):D,z="omission"in T?Pc(T.omission):z}x=yi(x);var re=x.length;if(Dw(x)){var ce=Ld(x);re=ce.length}if(D>=re)return x;var ve=D-Nw(z);if(ve<1)return z;var Ie=ce?py(ce,0,ve).join(""):x.slice(0,ve);if(X===n)return Ie+z;if(ce&&(ve+=Ie.length-ve),H7(X)){if(x.slice(ve).search(X)){var et,tt=Ie;for(X.global||(X=o7(X.source,yi(Zn.exec(X))+"g")),X.lastIndex=0;et=X.exec(tt);)var lt=et.index;Ie=Ie.slice(0,lt===n?ve:lt)}}else if(x.indexOf(Pc(X),ve)!=ve){var $t=Ie.lastIndexOf(X);$t>-1&&(Ie=Ie.slice(0,$t))}return Ie+z}function iXe(x){return x=yi(x),x&&Vr.test(x)?x.replace(hs,NHe):x}var sXe=jw(function(x,T,D){return x+(D?" ":"")+T.toUpperCase()}),G7=Xle("toUpperCase");function Yce(x,T,D){return x=yi(x),T=D?n:T,T===n?IHe(x)?LHe(x):Pw(x):x.match(T)||[]}var Kce=sr(function(x,T){try{return Xa(x,n,T)}catch(D){return V7(D)?D:new Fn(D)}}),oXe=r0(function(x,T){return Bu(T,function(D){D=ap(D),t0(x,D,U7(x[D],x))}),x});function aXe(x){var T=x==null?0:x.length,D=pn();return x=T?zi(x,function(z){if(typeof z[1]!="function")throw new If(o);return[D(z[0]),z[1]]}):[],sr(function(z){for(var X=-1;++X<T;){var re=x[X];if(Xa(re[0],this,z))return Xa(re[1],this,z)}})}function uXe(x){return Nqe(Rf(x,f))}function Y7(x){return function(){return x}}function lXe(x,T){return x==null||x!==x?T:x}var cXe=Jle(),fXe=Jle(!0);function Pl(x){return x}function K7(x){return Ile(typeof x=="function"?x:Rf(x,f))}function dXe(x){return Rle(Rf(x,f))}function hXe(x,T){return Ple(x,Rf(T,f))}var pXe=sr(function(x,T){return function(D){return YC(D,x,T)}}),mXe=sr(function(x,T){return function(D){return YC(x,D,T)}});function X7(x,T,D){var z=ea(T),X=uN(T,z);D==null&&!(As(T)&&(X.length||!z.length))&&(D=T,T=x,x=this,X=uN(T,ea(T)));var re=!(As(D)&&"chain"in D)||!!D.chain,ce=s0(x);return Bu(X,function(ve){var Ie=T[ve];x[ve]=Ie,ce&&(x.prototype[ve]=function(){var et=this.__chain__;if(re||et){var tt=x(this.__wrapped__),lt=tt.__actions__=Il(this.__actions__);return lt.push({func:Ie,args:arguments,thisArg:x}),tt.__chain__=et,tt}return Ie.apply(x,Od([this.value()],arguments))})}),x}function gXe(){return un._===this&&(un._=zHe),this}function Q7(){}function yXe(x){return x=Kn(x),sr(function(T){return Dle(T,x)})}var vXe=I7(zi),bXe=I7(kw),xXe=I7(Rw);function Xce(x){return $7(x)?Y(ap(x)):Xqe(x)}function _Xe(x){return function(T){return x==null?n:yb(x,T)}}var wXe=ece(),EXe=ece(!0);function J7(){return[]}function Z7(){return!1}function TXe(){return{}}function SXe(){return""}function CXe(){return!0}function AXe(x,T){if(x=Kn(x),x<1||x>K)return[];var D=j,z=Ja(x,j);T=pn(T),x-=j;for(var X=li(z,T);++D<x;)T(D);return X}function IXe(x){return Vn(x)?zi(x,ap):Dc(x)?[x]:Il(gce(yi(x)))}function kXe(x){var T=++jHe;return yi(x)+T}var RXe=pN(function(x,T){return x+T},0),PXe=k7("ceil"),DXe=pN(function(x,T){return x/T},1),NXe=k7("floor");function OXe(x){return x&&x.length?aN(x,Pl,p7):n}function $Xe(x,T){return x&&x.length?aN(x,pn(T,2),p7):n}function LXe(x){return U(x,Pl)}function MXe(x,T){return U(x,pn(T,2))}function FXe(x){return x&&x.length?aN(x,Pl,v7):n}function BXe(x,T){return x&&x.length?aN(x,pn(T,2),v7):n}var jXe=pN(function(x,T){return x*T},1),UXe=k7("round"),zXe=pN(function(x,T){return x-T},0);function VXe(x){return x&&x.length?At(x,Pl):0}function HXe(x,T){return x&&x.length?At(x,pn(T,2)):0}return Z.after=dYe,Z.ary=Ace,Z.assign=ZYe,Z.assignIn=Uce,Z.assignInWith=AN,Z.assignWith=eKe,Z.at=tKe,Z.before=Ice,Z.bind=U7,Z.bindAll=oXe,Z.bindKey=kce,Z.castArray=TYe,Z.chain=Tce,Z.chunk=NWe,Z.compact=OWe,Z.concat=$We,Z.cond=aXe,Z.conforms=uXe,Z.constant=Y7,Z.countBy=VGe,Z.create=nKe,Z.curry=Rce,Z.curryRight=Pce,Z.debounce=Dce,Z.defaults=rKe,Z.defaultsDeep=iKe,Z.defer=hYe,Z.delay=pYe,Z.difference=LWe,Z.differenceBy=MWe,Z.differenceWith=FWe,Z.drop=BWe,Z.dropRight=jWe,Z.dropRightWhile=UWe,Z.dropWhile=zWe,Z.fill=VWe,Z.filter=qGe,Z.flatMap=YGe,Z.flatMapDeep=KGe,Z.flatMapDepth=XGe,Z.flatten=xce,Z.flattenDeep=HWe,Z.flattenDepth=qWe,Z.flip=mYe,Z.flow=cXe,Z.flowRight=fXe,Z.fromPairs=WWe,Z.functions=fKe,Z.functionsIn=dKe,Z.groupBy=QGe,Z.initial=YWe,Z.intersection=KWe,Z.intersectionBy=XWe,Z.intersectionWith=QWe,Z.invert=pKe,Z.invertBy=mKe,Z.invokeMap=ZGe,Z.iteratee=K7,Z.keyBy=eYe,Z.keys=ea,Z.keysIn=Rl,Z.map=_N,Z.mapKeys=yKe,Z.mapValues=vKe,Z.matches=dXe,Z.matchesProperty=hXe,Z.memoize=EN,Z.merge=bKe,Z.mergeWith=zce,Z.method=pXe,Z.methodOf=mXe,Z.mixin=X7,Z.negate=TN,Z.nthArg=yXe,Z.omit=xKe,Z.omitBy=_Ke,Z.once=gYe,Z.orderBy=tYe,Z.over=vXe,Z.overArgs=yYe,Z.overEvery=bXe,Z.overSome=xXe,Z.partial=z7,Z.partialRight=Nce,Z.partition=nYe,Z.pick=wKe,Z.pickBy=Vce,Z.property=Xce,Z.propertyOf=_Xe,Z.pull=tGe,Z.pullAll=wce,Z.pullAllBy=nGe,Z.pullAllWith=rGe,Z.pullAt=iGe,Z.range=wXe,Z.rangeRight=EXe,Z.rearg=vYe,Z.reject=sYe,Z.remove=sGe,Z.rest=bYe,Z.reverse=B7,Z.sampleSize=aYe,Z.set=TKe,Z.setWith=SKe,Z.shuffle=uYe,Z.slice=oGe,Z.sortBy=fYe,Z.sortedUniq=hGe,Z.sortedUniqBy=pGe,Z.split=YKe,Z.spread=xYe,Z.tail=mGe,Z.take=gGe,Z.takeRight=yGe,Z.takeRightWhile=vGe,Z.takeWhile=bGe,Z.tap=OGe,Z.throttle=_Ye,Z.thru=xN,Z.toArray=Fce,Z.toPairs=Hce,Z.toPairsIn=qce,Z.toPath=IXe,Z.toPlainObject=jce,Z.transform=CKe,Z.unary=wYe,Z.union=xGe,Z.unionBy=_Ge,Z.unionWith=wGe,Z.uniq=EGe,Z.uniqBy=TGe,Z.uniqWith=SGe,Z.unset=AKe,Z.unzip=j7,Z.unzipWith=Ece,Z.update=IKe,Z.updateWith=kKe,Z.values=Vw,Z.valuesIn=RKe,Z.without=CGe,Z.words=Yce,Z.wrap=EYe,Z.xor=AGe,Z.xorBy=IGe,Z.xorWith=kGe,Z.zip=RGe,Z.zipObject=PGe,Z.zipObjectDeep=DGe,Z.zipWith=NGe,Z.entries=Hce,Z.entriesIn=qce,Z.extend=Uce,Z.extendWith=AN,X7(Z,Z),Z.add=RXe,Z.attempt=Kce,Z.camelCase=OKe,Z.capitalize=Wce,Z.ceil=PXe,Z.clamp=PKe,Z.clone=SYe,Z.cloneDeep=AYe,Z.cloneDeepWith=IYe,Z.cloneWith=CYe,Z.conformsTo=kYe,Z.deburr=Gce,Z.defaultTo=lXe,Z.divide=DXe,Z.endsWith=$Ke,Z.eq=Fd,Z.escape=LKe,Z.escapeRegExp=MKe,Z.every=HGe,Z.find=WGe,Z.findIndex=vce,Z.findKey=sKe,Z.findLast=GGe,Z.findLastIndex=bce,Z.findLastKey=oKe,Z.floor=NXe,Z.forEach=Sce,Z.forEachRight=Cce,Z.forIn=aKe,Z.forInRight=uKe,Z.forOwn=lKe,Z.forOwnRight=cKe,Z.get=q7,Z.gt=RYe,Z.gte=PYe,Z.has=hKe,Z.hasIn=W7,Z.head=_ce,Z.identity=Pl,Z.includes=JGe,Z.indexOf=GWe,Z.inRange=DKe,Z.invoke=gKe,Z.isArguments=xb,Z.isArray=Vn,Z.isArrayBuffer=DYe,Z.isArrayLike=kl,Z.isArrayLikeObject=Js,Z.isBoolean=NYe,Z.isBuffer=my,Z.isDate=OYe,Z.isElement=$Ye,Z.isEmpty=LYe,Z.isEqual=MYe,Z.isEqualWith=FYe,Z.isError=V7,Z.isFinite=BYe,Z.isFunction=s0,Z.isInteger=Oce,Z.isLength=SN,Z.isMap=$ce,Z.isMatch=jYe,Z.isMatchWith=UYe,Z.isNaN=zYe,Z.isNative=VYe,Z.isNil=qYe,Z.isNull=HYe,Z.isNumber=Lce,Z.isObject=As,Z.isObjectLike=$s,Z.isPlainObject=eA,Z.isRegExp=H7,Z.isSafeInteger=WYe,Z.isSet=Mce,Z.isString=CN,Z.isSymbol=Dc,Z.isTypedArray=zw,Z.isUndefined=GYe,Z.isWeakMap=YYe,Z.isWeakSet=KYe,Z.join=JWe,Z.kebabCase=FKe,Z.last=Df,Z.lastIndexOf=ZWe,Z.lowerCase=BKe,Z.lowerFirst=jKe,Z.lt=XYe,Z.lte=QYe,Z.max=OXe,Z.maxBy=$Xe,Z.mean=LXe,Z.meanBy=MXe,Z.min=FXe,Z.minBy=BXe,Z.stubArray=J7,Z.stubFalse=Z7,Z.stubObject=TXe,Z.stubString=SXe,Z.stubTrue=CXe,Z.multiply=jXe,Z.nth=eGe,Z.noConflict=gXe,Z.noop=Q7,Z.now=wN,Z.pad=UKe,Z.padEnd=zKe,Z.padStart=VKe,Z.parseInt=HKe,Z.random=NKe,Z.reduce=rYe,Z.reduceRight=iYe,Z.repeat=qKe,Z.replace=WKe,Z.result=EKe,Z.round=UXe,Z.runInContext=Te,Z.sample=oYe,Z.size=lYe,Z.snakeCase=GKe,Z.some=cYe,Z.sortedIndex=aGe,Z.sortedIndexBy=uGe,Z.sortedIndexOf=lGe,Z.sortedLastIndex=cGe,Z.sortedLastIndexBy=fGe,Z.sortedLastIndexOf=dGe,Z.startCase=KKe,Z.startsWith=XKe,Z.subtract=zXe,Z.sum=VXe,Z.sumBy=HXe,Z.template=QKe,Z.times=AXe,Z.toFinite=o0,Z.toInteger=Kn,Z.toLength=Bce,Z.toLower=JKe,Z.toNumber=Nf,Z.toSafeInteger=JYe,Z.toString=yi,Z.toUpper=ZKe,Z.trim=eXe,Z.trimEnd=tXe,Z.trimStart=nXe,Z.truncate=rXe,Z.unescape=iXe,Z.uniqueId=kXe,Z.upperCase=sXe,Z.upperFirst=G7,Z.each=Sce,Z.eachRight=Cce,Z.first=_ce,X7(Z,function(){var x={};return sp(Z,function(T,D){Ei.call(Z.prototype,D)||(x[D]=T)}),x}(),{chain:!1}),Z.VERSION=r,Bu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){Z[x].placeholder=Z}),Bu(["drop","take"],function(x,T){br.prototype[x]=function(D){D=D===n?1:Do(Kn(D),0);var z=this.__filtered__&&!T?new br(this):this.clone();return z.__filtered__?z.__takeCount__=Ja(D,z.__takeCount__):z.__views__.push({size:Ja(D,j),type:x+(z.__dir__<0?"Right":"")}),z},br.prototype[x+"Right"]=function(D){return this.reverse()[x](D).reverse()}}),Bu(["filter","map","takeWhile"],function(x,T){var D=T+1,z=D==B||D==H;br.prototype[x]=function(X){var re=this.clone();return re.__iteratees__.push({iteratee:pn(X,3),type:D}),re.__filtered__=re.__filtered__||z,re}}),Bu(["head","last"],function(x,T){var D="take"+(T?"Right":"");br.prototype[x]=function(){return this[D](1).value()[0]}}),Bu(["initial","tail"],function(x,T){var D="drop"+(T?"":"Right");br.prototype[x]=function(){return this.__filtered__?new br(this):this[D](1)}}),br.prototype.compact=function(){return this.filter(Pl)},br.prototype.find=function(x){return this.filter(x).head()},br.prototype.findLast=function(x){return this.reverse().find(x)},br.prototype.invokeMap=sr(function(x,T){return typeof x=="function"?new br(this):this.map(function(D){return YC(D,x,T)})}),br.prototype.reject=function(x){return this.filter(TN(pn(x)))},br.prototype.slice=function(x,T){x=Kn(x);var D=this;return D.__filtered__&&(x>0||T<0)?new br(D):(x<0?D=D.takeRight(-x):x&&(D=D.drop(x)),T!==n&&(T=Kn(T),D=T<0?D.dropRight(-T):D.take(T-x)),D)},br.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},br.prototype.toArray=function(){return this.take(j)},sp(br.prototype,function(x,T){var D=/^(?:filter|find|map|reject)|While$/.test(T),z=/^(?:head|last)$/.test(T),X=Z[z?"take"+(T=="last"?"Right":""):T],re=z||/^find/.test(T);X&&(Z.prototype[T]=function(){var ce=this.__wrapped__,ve=z?[1]:arguments,Ie=ce instanceof br,et=ve[0],tt=Ie||Vn(ce),lt=function(pr){var Rr=X.apply(Z,Od([pr],ve));return z&&$t?Rr[0]:Rr};tt&&D&&typeof et=="function"&&et.length!=1&&(Ie=tt=!1);var $t=this.__chain__,Qt=!!this.__actions__.length,mn=re&&!$t,tr=Ie&&!Qt;if(!re&&tt){ce=tr?ce:new br(this);var gn=x.apply(ce,ve);return gn.__actions__.push({func:xN,args:[lt],thisArg:n}),new kf(gn,$t)}return mn&&tr?x.apply(this,ve):(gn=this.thru(lt),mn?z?gn.value()[0]:gn.value():gn)})}),Bu(["pop","push","shift","sort","splice","unshift"],function(x){var T=WD[x],D=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",z=/^(?:pop|shift)$/.test(x);Z.prototype[x]=function(){var X=arguments;if(z&&!this.__chain__){var re=this.value();return T.apply(Vn(re)?re:[],X)}return this[D](function(ce){return T.apply(Vn(ce)?ce:[],X)})}}),sp(br.prototype,function(x,T){var D=Z[T];if(D){var z=D.name+"";Ei.call(Mw,z)||(Mw[z]=[]),Mw[z].push({name:T,func:D})}}),Mw[hN(n,y).name]=[{name:"wrapper",func:n}],br.prototype.clone=iqe,br.prototype.reverse=sqe,br.prototype.value=oqe,Z.prototype.at=$Ge,Z.prototype.chain=LGe,Z.prototype.commit=MGe,Z.prototype.next=FGe,Z.prototype.plant=jGe,Z.prototype.reverse=UGe,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=zGe,Z.prototype.first=Z.prototype.head,UC&&(Z.prototype[UC]=BGe),Z},Ow=MHe();wi?((wi.exports=Ow)._=Ow,ui._=Ow):un._=Ow}).call(Jt)})(yM,yM.exports);var shn=yM.exports;const ohn="#/definitions/LibraryConfig",ahn="http://json-schema.org/draft-07/schema#",uhn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},description:{description:"A description of the library.",type:"string"},name:{description:"The name of the library.",type:"string"},reference:{description:"The reference to the paper where the content of the library is based on.",type:"string"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},lhn={$ref:ohn,$schema:ahn,definitions:uhn},TUe=new Zae;TUe.addSchema(lhn);const chn=TUe.getSchema("#/definitions/LibraryConfig");function SUe(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?SUe(n,t):`$${t}.components.${n}`)}}function CUe(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return CUe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=SUe(l,a),l}return r})}}function fhn(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;oC(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function dhn(e,t){let n=!1,r;try{r=R9.parse(e),n=chn(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function hhn(e){const t=await(await fetch(`${dl}libraries/${e}/config.json`)).text();return dhn(t,e)}async function phn(e,t,n){const r=e.map(async s=>{const o=await hhn(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(oC(a)){const u=shn.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const AUe=new Zae;AUe.addSchema(ihn);const j_e=AUe.getSchema("#/definitions/GlobalConfig"),IUe=new Zae;IUe.addSchema(ehn);const U_e=IUe.getSchema("#/definitions/StudyConfig");function mhn(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function ghn(e){const t=R9.parse(e),n=j_e(t),r=mhn(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...j_e.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function kUe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):kUe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function yhn(e,t){const n=[],r=[];fhn(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;oC(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=Mke(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return kUe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function eue(e){let t=!1,n;try{n=R9.parse(e),t=U_e(n)}catch{t=!1}let r=U_e.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await phn(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=CUe(n.sequence,o,r);const{errors:a,warnings:u}=yhn(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function vhn(e){const t=await(await fetch(`${dl}${e}`)).text();return await eue(t)}async function tue(e,t){const n=t.configsList.find(r=>HAe(r)===e);if(n){const r=t.configs[n];return await vhn(`${r.path}`)}return null}async function bhn(e){const t={},n=e.configsList.map(async i=>tue(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function xhn({globalConfig:e}){const t=Q_(),[n,r]=P.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";P.useEffect(()=>{if(t!=="__revisit-widget")return tue(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&eue(m.data.payload).then(async g=>{r(g);const y=await d_e(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:y},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=P.useState([]),[a,u]=P.useState(null),{storageEngine:l}=po(),[c]=Ov(),f=P.useMemo(()=>c.get("participantId"),[c]);P.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await d_e(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),v=await fetch("https://api.ipify.org?format=json").catch(A=>""),b=v instanceof Response?await v.json():{ip:""},_={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},E=await l.initializeParticipantSession(t,y,n,_,f||g),S=await l.getModes(t),C=await Pvt(t,n,E.sequence,_,E.answers,S,E.participantId);u(C),o([{element:w.jsx(yun,{}),children:[{path:"/",element:w.jsx(Aje,{to:oh(0),replace:!0})},{path:"/:index",element:n.errors.length>0?w.jsxs(w.Fragment,{children:[w.jsx(Vs,{order:2,mb:8,children:"Error loading config"}),w.jsx(q4,{issues:n.errors,type:"error"})]}):w.jsx(eun,{})}]}])}p()},[l,n,t,c,f]);const d=$Ae(s);let h=null;return i?s.length===0?h=w.jsx(cf,{visible:!0}):h=d&&a?w.jsx(Uke.Provider,{value:a,children:w.jsx(A1t,{store:a.store,children:d})}):w.jsx(U1,{}):h=w.jsx(U1,{}),h}function $6({studyIds:e}){const t=Hh(),{studyId:n}=lm(),r=Nv(),i=e.map(o=>({value:o,label:o})),s=r.pathname.includes("analysis");return w.jsx(Oi.Header,{p:"md",children:w.jsxs(Yc,{mt:-7,align:"center",children:[w.jsx(Yc.Col,{span:6,children:w.jsxs(qt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[w.jsx(Dv,{w:40,src:`${dl}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsx(Eu,{w:"md"}),w.jsx(Vs,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),w.jsx(Yc.Col,{span:6,children:w.jsxs(qt,{justify:"flex-end",direction:"row",children:[s&&w.jsx(PS,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),w.jsx(UAe,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function RUe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=yQ(!1),[a,u]=P.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;Ene(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return w.jsxs(w.Fragment,{children:[w.jsxs(bi,{style:{gap:n},children:[w.jsx(os,{label:"Download all participants data as JSON",children:w.jsx(on,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:w.jsx(Zct,{})})}),w.jsx(os,{label:"Download all participants data as a tidy CSV",children:w.jsx(on,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:w.jsx(zAe,{})})})]}),i&&a.length>0&&w.jsx(gMt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}var z_e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PUe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},_hn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},nue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(PUe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):_hn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new whn;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class whn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ehn=function(e){const t=PUe(e);return nue.encodeByteArray(t,!0)},vM=function(e){return Ehn(e).replace(/\./g,"")},DUe=function(e){try{return nue.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NUe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Thn=()=>NUe().__FIREBASE_DEFAULTS__,Shn=()=>{if(typeof process>"u"||typeof z_e>"u")return;const e=z_e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Chn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&DUe(e[1]);return t&&JSON.parse(t)},L9=()=>{try{return Thn()||Shn()||Chn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},OUe=e=>{var t,n;return(n=(t=L9())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Ahn=e=>{const t=OUe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},$Ue=()=>{var e;return(e=L9())===null||e===void 0?void 0:e.config},LUe=e=>{var t;return(t=L9())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ihn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[vM(JSON.stringify(n)),vM(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function khn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qa())}function Rhn(){var e;const t=(e=L9())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Phn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Dhn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nhn(){const e=qa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ohn(){return!Rhn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rue(){try{return typeof indexedDB=="object"}catch{return!1}}function $hn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lhn="FirebaseError";class Gm extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Lhn,Object.setPrototypeOf(this,Gm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,PC.prototype.create)}}class PC{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Mhn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gm(i,a,r)}}function Mhn(e,t){return e.replace(Fhn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Fhn=/\{\$([^}]+)}/g;function Bhn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A3(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(V_e(s)&&V_e(o)){if(!A3(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function V_e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function jhn(e,t){const n=new Uhn(e,t);return n.subscribe.bind(n)}class Uhn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zhn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=pH),i.error===void 0&&(i.error=pH),i.complete===void 0&&(i.complete=pH);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zhn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function pH(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vhn=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hhn=1e3,qhn=2,Whn=4*60*60*1e3,Ghn=.5;function Yhn(e,t=Hhn,n=qhn){const r=t*Math.pow(n,e),i=Math.round(Ghn*r*(Math.random()-.5)*2);return Math.min(Whn,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e){return e&&e._delegate?e._delegate:e}class Sm{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Khn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new C3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Qhn(t))try{this.getOrInitializeService({instanceIdentifier:Kb})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Kb){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Kb){return this.instances.has(t)}getOptions(t=Kb){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Xhn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Kb){return this.component?this.component.multipleInstances?t:Kb:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xhn(e){return e===Kb?void 0:e}function Qhn(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jhn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Khn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Nr||(Nr={}));const Zhn={debug:Nr.DEBUG,verbose:Nr.VERBOSE,info:Nr.INFO,warn:Nr.WARN,error:Nr.ERROR,silent:Nr.SILENT},epn=Nr.INFO,tpn={[Nr.DEBUG]:"log",[Nr.VERBOSE]:"log",[Nr.INFO]:"info",[Nr.WARN]:"warn",[Nr.ERROR]:"error"},npn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=tpn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class M9{constructor(t){this.name=t,this._logLevel=epn,this._logHandler=npn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Zhn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nr.DEBUG,...t),this._logHandler(this,Nr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nr.VERBOSE,...t),this._logHandler(this,Nr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nr.INFO,...t),this._logHandler(this,Nr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nr.WARN,...t),this._logHandler(this,Nr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nr.ERROR,...t),this._logHandler(this,Nr.ERROR,...t)}}const rpn=(e,t)=>t.some(n=>e instanceof n);let H_e,q_e;function ipn(){return H_e||(H_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function spn(){return q_e||(q_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MUe=new WeakMap,qK=new WeakMap,FUe=new WeakMap,mH=new WeakMap,iue=new WeakMap;function opn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(P1(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&MUe.set(n,e)}).catch(()=>{}),iue.set(t,e),t}function apn(e){if(qK.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});qK.set(e,t)}let WK={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return qK.get(e);if(t==="objectStoreNames")return e.objectStoreNames||FUe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return P1(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function upn(e){WK=e(WK)}function lpn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(gH(this),t,...n);return FUe.set(r,t.sort?t.sort():[t]),P1(r)}:spn().includes(e)?function(...t){return e.apply(gH(this),t),P1(MUe.get(this))}:function(...t){return P1(e.apply(gH(this),t))}}function cpn(e){return typeof e=="function"?lpn(e):(e instanceof IDBTransaction&&apn(e),rpn(e,ipn())?new Proxy(e,WK):e)}function P1(e){if(e instanceof IDBRequest)return opn(e);if(mH.has(e))return mH.get(e);const t=cpn(e);return t!==e&&(mH.set(e,t),iue.set(t,e)),t}const gH=e=>iue.get(e);function fpn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=P1(o);return r&&o.addEventListener("upgradeneeded",u=>{r(P1(o.result),u.oldVersion,u.newVersion,P1(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const dpn=["get","getKey","getAll","getAllKeys","count"],hpn=["put","add","delete","clear"],yH=new Map;function W_e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(yH.get(t))return yH.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=hpn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dpn.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return yH.set(t,s),s}upn(e=>({...e,get:(t,n,r)=>W_e(t,n)||e.get(t,n,r),has:(t,n)=>!!W_e(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ppn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mpn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mpn(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const GK="@firebase/app",G_e="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new M9("@firebase/app"),gpn="@firebase/app-compat",ypn="@firebase/analytics-compat",vpn="@firebase/analytics",bpn="@firebase/app-check-compat",xpn="@firebase/app-check",_pn="@firebase/auth",wpn="@firebase/auth-compat",Epn="@firebase/database",Tpn="@firebase/database-compat",Spn="@firebase/functions",Cpn="@firebase/functions-compat",Apn="@firebase/installations",Ipn="@firebase/installations-compat",kpn="@firebase/messaging",Rpn="@firebase/messaging-compat",Ppn="@firebase/performance",Dpn="@firebase/performance-compat",Npn="@firebase/remote-config",Opn="@firebase/remote-config-compat",$pn="@firebase/storage",Lpn="@firebase/storage-compat",Mpn="@firebase/firestore",Fpn="@firebase/vertexai-preview",Bpn="@firebase/firestore-compat",jpn="firebase",Upn="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK="[DEFAULT]",zpn={[GK]:"fire-core",[gpn]:"fire-core-compat",[vpn]:"fire-analytics",[ypn]:"fire-analytics-compat",[xpn]:"fire-app-check",[bpn]:"fire-app-check-compat",[_pn]:"fire-auth",[wpn]:"fire-auth-compat",[Epn]:"fire-rtdb",[Tpn]:"fire-rtdb-compat",[Spn]:"fire-fn",[Cpn]:"fire-fn-compat",[Apn]:"fire-iid",[Ipn]:"fire-iid-compat",[kpn]:"fire-fcm",[Rpn]:"fire-fcm-compat",[Ppn]:"fire-perf",[Dpn]:"fire-perf-compat",[Npn]:"fire-rc",[Opn]:"fire-rc-compat",[$pn]:"fire-gcs",[Lpn]:"fire-gcs-compat",[Mpn]:"fire-fst",[Bpn]:"fire-fst-compat",[Fpn]:"fire-vertex","fire-js":"fire-js",[jpn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new Map,Vpn=new Map,KK=new Map;function Y_e(e,t){try{e.container.addComponent(t)}catch(n){k_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Pg(e){const t=e.name;if(KK.has(t))return k_.debug(`There were multiple attempts to register component ${t}.`),!1;KK.set(t,e);for(const n of bM.values())Y_e(n,e);for(const n of Vpn.values())Y_e(n,e);return!0}function DC(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Hp(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hpn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},D1=new PC("app","Firebase",Hpn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qpn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw D1.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=Upn;function BUe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:YK,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw D1.create("bad-app-name",{appName:String(i)});if(n||(n=$Ue()),!n)throw D1.create("no-options");const s=bM.get(i);if(s){if(A3(n,s.options)&&A3(r,s.config))return s;throw D1.create("duplicate-app",{appName:i})}const o=new Jhn(i);for(const u of KK.values())o.addComponent(u);const a=new qpn(n,r,o);return bM.set(i,a),a}function sue(e=YK){const t=bM.get(e);if(!t&&e===YK&&$Ue())return BUe();if(!t)throw D1.create("no-app",{appName:e});return t}function Ih(e,t,n){var r;let i=(r=zpn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),k_.warn(a.join(" "));return}Pg(new Sm(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wpn="firebase-heartbeat-database",Gpn=1,I3="firebase-heartbeat-store";let vH=null;function jUe(){return vH||(vH=fpn(Wpn,Gpn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(I3)}catch(n){console.warn(n)}}}}).catch(e=>{throw D1.create("idb-open",{originalErrorMessage:e.message})})),vH}async function Ypn(e){try{const n=(await jUe()).transaction(I3),r=await n.objectStore(I3).get(UUe(e));return await n.done,r}catch(t){if(t instanceof Gm)k_.warn(t.message);else{const n=D1.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});k_.warn(n.message)}}}async function K_e(e,t){try{const r=(await jUe()).transaction(I3,"readwrite");await r.objectStore(I3).put(t,UUe(e)),await r.done}catch(n){if(n instanceof Gm)k_.warn(n.message);else{const r=D1.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});k_.warn(r.message)}}}function UUe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kpn=1024,Xpn=30*24*60*60*1e3;class Qpn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zpn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=X_e();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Xpn}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=X_e(),{heartbeatsToSend:r,unsentEntries:i}=Jpn(this._heartbeatsCache.heartbeats),s=vM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function X_e(){return new Date().toISOString().substring(0,10)}function Jpn(e,t=Kpn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Q_e(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Q_e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Zpn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rue()?$hn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ypn(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return K_e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return K_e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Q_e(e){return vM(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function emn(e){Pg(new Sm("platform-logger",t=>new ppn(t),"PRIVATE")),Pg(new Sm("heartbeat",t=>new Qpn(t),"PRIVATE")),Ih(GK,G_e,e),Ih(GK,G_e,"esm2017"),Ih("fire-js","")}emn("");function zUe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tmn=zUe,VUe=new PC("auth","Firebase",zUe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=new M9("@firebase/auth");function nmn(e,...t){xM.logLevel<=Nr.WARN&&xM.warn(`Auth (${xw}): ${e}`,...t)}function L6(e,...t){xM.logLevel<=Nr.ERROR&&xM.error(`Auth (${xw}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(e,...t){throw aue(e,...t)}function kh(e,...t){return aue(e,...t)}function oue(e,t,n){const r=Object.assign(Object.assign({},tmn()),{[t]:n});return new PC("auth","Firebase",r).create(t,{appName:e.name})}function N1(e){return oue(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rmn(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Cm(e,"argument-error"),oue(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function aue(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return VUe.create(e,...t)}function Rn(e,t,...n){if(!e)throw aue(t,...n)}function V0(e){const t="INTERNAL ASSERTION FAILED: "+e;throw L6(t),new Error(t)}function Dg(e,t){e||V0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XK(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function imn(){return J_e()==="http:"||J_e()==="https:"}function J_e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function smn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(imn()||Phn()||"connection"in navigator)?navigator.onLine:!0}function omn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,n){this.shortDelay=t,this.longDelay=n,Dg(n>t,"Short delay should be less than long delay!"),this.isMobile=khn()||Dhn()}get(){return smn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uue(e,t){Dg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HUe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;V0("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;V0("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;V0("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const amn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const umn=new TD(3e4,6e4);function F9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function NC(e,t,n,r,i={}){return qUe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=ED(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),HUe.fetch()(GUe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function qUe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},amn),t);try{const i=new lmn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw u4(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw u4(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw u4(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw u4(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw oue(e,c,l);Cm(e,c)}}catch(i){if(i instanceof Gm)throw i;Cm(e,"network-request-failed",{message:String(i)})}}async function WUe(e,t,n,r,i={}){const s=await NC(e,t,n,r,i);return"mfaPendingCredential"in s&&Cm(e,"multi-factor-auth-required",{_serverResponse:s}),s}function GUe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?uue(e.config,i):`${e.config.apiScheme}://${i}`}class lmn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kh(this.auth,"network-request-failed")),umn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function u4(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kh(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cmn(e,t){return NC(e,"POST","/v1/accounts:delete",t)}async function YUe(e,t){return NC(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function fmn(e,t=!1){const n=es(e),r=await n.getIdToken(t),i=lue(r);Rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:zk(bH(i.auth_time)),issuedAtTime:zk(bH(i.iat)),expirationTime:zk(bH(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bH(e){return Number(e)*1e3}function lue(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return L6("JWT malformed, contained fewer than 3 sections"),null;try{const i=DUe(n);return i?JSON.parse(i):(L6("Failed to decode base64 JWT payload"),null)}catch(i){return L6("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Z_e(e){const t=lue(e);return Rn(t,"internal-error"),Rn(typeof t.exp<"u","internal-error"),Rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Gm&&dmn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function dmn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hmn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zk(this.lastLoginAt),this.creationTime=zk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(e){var t;const n=e.auth,r=await e.getIdToken(),i=await k3(e,YUe(n,{idToken:r}));Rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?KUe(s.providerUserInfo):[],a=mmn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new QK(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function pmn(e){const t=es(e);await _M(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function mmn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function KUe(e){return e.map(t=>{var{providerId:n}=t,r=G3(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gmn(e,t){const n=await qUe(e,{},async()=>{const r=ED({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=GUe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HUe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ymn(e,t){return NC(e,"POST","/v2/accounts:revokeToken",F9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rn(t.idToken,"internal-error"),Rn(typeof t.idToken<"u","internal-error"),Rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Z_e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Rn(t.length!==0,"internal-error");const n=Z_e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await gmn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new q2;return r&&(Rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new q2,this.toJSON())}_performRefresh(){return V0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(e,t){Rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class H0{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=G3(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hmn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new QK(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await k3(this,this.stsTokenManager.getToken(this.auth,t));return Rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return fmn(this,t)}reload(){return pmn(this)}_assign(t){this!==t&&(Rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new H0(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await _M(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hp(this.auth.app))return Promise.reject(N1(this.auth));const t=await this.getIdToken();return await k3(this,cmn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:_,isAnonymous:E,providerData:S,stsTokenManager:C}=n;Rn(b&&C,t,"internal-error");const A=q2.fromJSON(this.name,C);Rn(typeof b=="string",t,"internal-error"),wy(f,t.name),wy(d,t.name),Rn(typeof _=="boolean",t,"internal-error"),Rn(typeof E=="boolean",t,"internal-error"),wy(h,t.name),wy(p,t.name),wy(m,t.name),wy(g,t.name),wy(y,t.name),wy(v,t.name);const R=new H0({uid:b,auth:t,email:d,emailVerified:_,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(R.providerData=S.map(k=>Object.assign({},k))),g&&(R._redirectEventId=g),R}static async _fromIdTokenResponse(t,n,r=!1){const i=new q2;i.updateFromServerResponse(n);const s=new H0({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await _M(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?KUe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new q2;a.updateFromIdToken(r);const u=new H0({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new QK(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ewe=new Map;function q0(e){Dg(e instanceof Function,"Expected a class definition");let t=ewe.get(e);return t?(Dg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ewe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XUe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}XUe.type="NONE";const twe=XUe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(e,t,n){return`firebase:${e}:${t}:${n}`}class W2{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=M6(this.userKey,i.apiKey,s),this.fullPersistenceKey=M6("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?H0._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new W2(q0(twe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||q0(twe);const o=M6(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=H0._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new W2(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new W2(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nwe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ZUe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(QUe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tze(t))return"Blackberry";if(nze(t))return"Webos";if(cue(t))return"Safari";if((t.includes("chrome/")||JUe(t))&&!t.includes("edge/"))return"Chrome";if(eze(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QUe(e=qa()){return/firefox\//i.test(e)}function cue(e=qa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function JUe(e=qa()){return/crios\//i.test(e)}function ZUe(e=qa()){return/iemobile/i.test(e)}function eze(e=qa()){return/android/i.test(e)}function tze(e=qa()){return/blackberry/i.test(e)}function nze(e=qa()){return/webos/i.test(e)}function B9(e=qa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vmn(e=qa()){var t;return B9(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function bmn(){return Nhn()&&document.documentMode===10}function rze(e=qa()){return B9(e)||eze(e)||nze(e)||tze(e)||/windows phone/i.test(e)||ZUe(e)}function xmn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ize(e,t=[]){let n;switch(e){case"Browser":n=nwe(qa());break;case"Worker":n=`${nwe(qa())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${xw}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _mn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wmn(e,t={}){return NC(e,"GET","/v2/passwordPolicy",F9(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Emn=6;class Tmn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Emn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Smn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rwe(this),this.idTokenSubscription=new rwe(this),this.beforeStateQueue=new _mn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VUe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=q0(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await W2.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await YUe(this,{idToken:t}),r=await H0._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Hp(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await _M(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=omn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Hp(this.app))return Promise.reject(N1(this));const n=t?es(t):null;return n&&Rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Hp(this.app)?Promise.reject(N1(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Hp(this.app)?Promise.reject(N1(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(q0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await wmn(this),n=new Tmn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new PC("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ymn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&q0(t)||this._popupRedirectResolver;Rn(n,this,"argument-error"),this.redirectPersistenceManager=await W2.create(this,[q0(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ize(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&nmn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function SD(e){return es(e)}class rwe{constructor(t){this.auth=t,this.observer=null,this.addObserver=jhn(n=>this.observer=n)}get next(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fue={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cmn(e){fue=e}function Amn(e){return fue.loadJS(e)}function Imn(){return fue.gapiScript}function kmn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rmn(e,t){const n=DC(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(A3(s,t??{}))return i;Cm(i,"already-initialized")}return n.initialize({options:t})}function Pmn(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(q0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Dmn(e,t,n){const r=SD(e);Rn(r._canInitEmulator,r,"emulator-config-failed"),Rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=sze(t),{host:o,port:a}=Nmn(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Omn()}function sze(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Nmn(e){const t=sze(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:iwe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:iwe(o)}}}function iwe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Omn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oze{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return V0("not implemented")}_getIdTokenResponse(t){return V0("not implemented")}_linkToIdToken(t,n){return V0("not implemented")}_getReauthenticationResolver(t){return V0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(e,t){return WUe(e,"POST","/v1/accounts:signInWithIdp",F9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $mn="http://localhost";class R_ extends oze{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new R_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Cm("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=G3(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new R_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return G2(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,G2(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,G2(t,n)}buildRequest(){const t={requestUri:$mn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ED(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class due{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD extends due{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy extends CD{constructor(){super("facebook.com")}static credential(t){return R_._fromParams({providerId:Wy.PROVIDER_ID,signInMethod:Wy.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wy.credentialFromTaggedObject(t)}static credentialFromError(t){return Wy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wy.credential(t.oauthAccessToken)}catch{return null}}}Wy.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends CD{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return R_._fromParams({providerId:P0.PROVIDER_ID,signInMethod:P0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return P0.credentialFromTaggedObject(t)}static credentialFromError(t){return P0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return P0.credential(n,r)}catch{return null}}}P0.GOOGLE_SIGN_IN_METHOD="google.com";P0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends CD{constructor(){super("github.com")}static credential(t){return R_._fromParams({providerId:Gy.PROVIDER_ID,signInMethod:Gy.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gy.credentialFromTaggedObject(t)}static credentialFromError(t){return Gy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gy.credential(t.oauthAccessToken)}catch{return null}}}Gy.GITHUB_SIGN_IN_METHOD="github.com";Gy.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy extends CD{constructor(){super("twitter.com")}static credential(t,n){return R_._fromParams({providerId:Yy.PROVIDER_ID,signInMethod:Yy.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Yy.credentialFromTaggedObject(t)}static credentialFromError(t){return Yy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Yy.credential(n,r)}catch{return null}}}Yy.TWITTER_SIGN_IN_METHOD="twitter.com";Yy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lmn(e,t){return WUe(e,"POST","/v1/accounts:signUp",F9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await H0._fromIdTokenResponse(t,r,i),o=swe(r);return new vv({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=swe(r);return new vv({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function swe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mmn(e){var t;if(Hp(e.app))return Promise.reject(N1(e));const n=SD(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new vv({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Lmn(n,{returnSecureToken:!0}),i=await vv._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM extends Gm{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wM.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new wM(t,n,r,i)}}function aze(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wM._fromErrorAndOperation(e,s,t,r):s})}async function Fmn(e,t,n=!1){const r=await k3(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vv._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bmn(e,t,n=!1){const{auth:r}=e;if(Hp(r.app))return Promise.reject(N1(r));const i="reauthenticate";try{const s=await k3(e,aze(r,i,t,e),n);Rn(s.idToken,r,"internal-error");const o=lue(s.idToken);Rn(o,r,"internal-error");const{sub:a}=o;return Rn(e.uid===a,r,"user-mismatch"),vv._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Cm(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jmn(e,t,n=!1){if(Hp(e.app))return Promise.reject(N1(e));const r="signIn",i=await aze(e,r,t),s=await vv._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Umn(e,t,n,r){return es(e).onIdTokenChanged(t,n,r)}function zmn(e,t,n){return es(e).beforeAuthStateChanged(t,n)}function Vmn(e,t,n,r){return es(e).onAuthStateChanged(t,n,r)}function Hmn(e){return es(e).signOut()}const EM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uze{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(EM,"1"),this.storage.removeItem(EM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qmn(){const e=qa();return cue(e)||B9(e)}const Wmn=1e3,Gmn=10;class lze extends uze{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=qmn()&&xmn(),this.fallbackToPolling=rze(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bmn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Gmn):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Wmn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}lze.type="LOCAL";const Ymn=lze;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cze extends uze{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}cze.type="SESSION";const fze=cze;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kmn(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new j9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Kmn(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}j9.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hue(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xmn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=hue("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){return window}function Qmn(e){sm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dze(){return typeof sm().WorkerGlobalScope<"u"&&typeof sm().importScripts=="function"}async function Jmn(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zmn(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function e0n(){return dze()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hze="firebaseLocalStorageDb",t0n=1,TM="firebaseLocalStorage",pze="fbase_key";class AD{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function U9(e,t){return e.transaction([TM],t?"readwrite":"readonly").objectStore(TM)}function n0n(){const e=indexedDB.deleteDatabase(hze);return new AD(e).toPromise()}function JK(){const e=indexedDB.open(hze,t0n);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(TM,{keyPath:pze})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(TM)?t(r):(r.close(),await n0n(),t(await JK()))})})}async function owe(e,t,n){const r=U9(e,!0).put({[pze]:t,value:n});return new AD(r).toPromise()}async function r0n(e,t){const n=U9(e,!1).get(t),r=await new AD(n).toPromise();return r===void 0?null:r.value}function awe(e,t){const n=U9(e,!0).delete(t);return new AD(n).toPromise()}const i0n=800,s0n=3;class mze{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await JK(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>s0n)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dze()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=j9._getInstance(e0n()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Jmn(),!this.activeServiceWorker)return;this.sender=new Xmn(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Zmn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await JK();return await owe(t,EM,"1"),await awe(t,EM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>owe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>r0n(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>awe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=U9(i,!1).getAll();return new AD(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i0n)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mze.type="LOCAL";const o0n=mze;new TD(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gze(e,t){return t?q0(t):(Rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pue extends oze{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return G2(t,this._buildIdpRequest())}_linkToIdToken(t,n){return G2(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return G2(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function a0n(e){return jmn(e.auth,new pue(e),e.bypassAuthState)}function u0n(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),Bmn(n,new pue(e),e.bypassAuthState)}async function l0n(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),Fmn(n,new pue(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yze{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return a0n;case"linkViaPopup":case"linkViaRedirect":return l0n;case"reauthViaPopup":case"reauthViaRedirect":return u0n;default:Cm(this.auth,"internal-error")}}resolve(t){Dg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Dg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0n=new TD(2e3,1e4);async function f0n(e,t,n){if(Hp(e.app))return Promise.reject(kh(e,"operation-not-supported-in-this-environment"));const r=SD(e);rmn(e,t,due);const i=gze(r,n);return new Ix(r,"signInViaPopup",t,i).executeNotNull()}class Ix extends yze{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ix.currentPopupAction&&Ix.currentPopupAction.cancel(),Ix.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rn(t,this.auth,"internal-error"),t}async onExecution(){Dg(this.filter.length===1,"Popup operations only handle one event");const t=hue();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(kh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ix.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,c0n.get())};t()}}Ix.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0n="pendingRedirect",F6=new Map;class h0n extends yze{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=F6.get(this.auth._key());if(!t){try{const r=await p0n(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}F6.set(this.auth._key(),t)}return this.bypassAuthState||F6.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p0n(e,t){const n=y0n(t),r=g0n(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function m0n(e,t){F6.set(e._key(),t)}function g0n(e){return q0(e._redirectPersistence)}function y0n(e){return M6(d0n,e.config.apiKey,e.name)}async function v0n(e,t,n=!1){if(Hp(e.app))return Promise.reject(N1(e));const r=SD(e),i=gze(r,t),o=await new h0n(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0n=10*60*1e3;class x0n{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!_0n(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!vze(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(kh(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=b0n&&this.cachedEventUids.clear(),this.cachedEventUids.has(uwe(t))}saveEventToCache(t){this.cachedEventUids.add(uwe(t)),this.lastProcessedEventTime=Date.now()}}function uwe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function vze({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function _0n(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vze(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0n(e,t={}){return NC(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0n=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T0n=/^https?/;async function S0n(e){if(e.config.emulator)return;const{authorizedDomains:t}=await w0n(e);for(const n of t)try{if(C0n(n))return}catch{}Cm(e,"unauthorized-domain")}function C0n(e){const t=XK(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!T0n.test(n))return!1;if(E0n.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0n=new TD(3e4,6e4);function lwe(){const e=sm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function I0n(e){return new Promise((t,n)=>{var r,i,s;function o(){lwe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{lwe(),n(kh(e,"network-request-failed"))},timeout:A0n.get()})}if(!((i=(r=sm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=sm().gapi)===null||s===void 0)&&s.load)o();else{const a=kmn("iframefcb");return sm()[a]=()=>{gapi.load?o():n(kh(e,"network-request-failed"))},Amn(`${Imn()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw B6=null,t})}let B6=null;function k0n(e){return B6=B6||I0n(e),B6}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0n=new TD(5e3,15e3),P0n="__/auth/iframe",D0n="emulator/auth/iframe",N0n={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O0n=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $0n(e){const t=e.config;Rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?uue(t,D0n):`https://${e.config.authDomain}/${P0n}`,r={apiKey:t.apiKey,appName:e.name,v:xw},i=O0n.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ED(r).slice(1)}`}async function L0n(e){const t=await k0n(e),n=sm().gapi;return Rn(n,e,"internal-error"),t.open({where:document.body,url:$0n(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N0n,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=kh(e,"network-request-failed"),a=sm().setTimeout(()=>{s(o)},R0n.get());function u(){sm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0n={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F0n=500,B0n=600,j0n="_blank",U0n="http://localhost";class cwe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z0n(e,t,n,r=F0n,i=B0n){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},M0n),{width:r.toString(),height:i.toString(),top:s,left:o}),l=qa().toLowerCase();n&&(a=JUe(l)?j0n:n),QUe(l)&&(t=t||U0n,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(vmn(l)&&a!=="_self")return V0n(t||"",a),new cwe(null);const f=window.open(t||"",a,c);Rn(f,e,"popup-blocked");try{f.focus()}catch{}return new cwe(f)}function V0n(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0n="__/auth/handler",q0n="emulator/auth/handler",W0n=encodeURIComponent("fac");async function fwe(e,t,n,r,i,s){Rn(e.config.authDomain,e,"auth-domain-config-required"),Rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xw,eventId:i};if(t instanceof due){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Bhn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof CD){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${W0n}=${encodeURIComponent(u)}`:"";return`${G0n(e)}?${ED(a).slice(1)}${l}`}function G0n({config:e}){return e.emulator?uue(e,q0n):`https://${e.authDomain}/${H0n}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH="webStorageSupport";class Y0n{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fze,this._completeRedirectFn=v0n,this._overrideRedirectResult=m0n}async _openPopup(t,n,r,i){var s;Dg((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await fwe(t,n,r,XK(),i);return z0n(t,o,hue())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await fwe(t,n,r,XK(),i);return Qmn(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Dg(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await L0n(t),r=new x0n(t);return n.register("authEvent",i=>(Rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(xH,{type:xH},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[xH];o!==void 0&&n(!!o),Cm(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=S0n(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return rze()||cue()||B9()}}const bze=Y0n;var dwe="@firebase/auth",hwe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0n{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0n(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q0n(e){Pg(new Sm("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ize(e)},l=new Smn(r,i,s,u);return Pmn(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Pg(new Sm("auth-internal",t=>{const n=SD(t.getProvider("auth").getImmediate());return(r=>new K0n(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ih(dwe,hwe,X0n(e)),Ih(dwe,hwe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0n=5*60,Z0n=LUe("authIdTokenMaxAge")||J0n;let pwe=null;const egn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Z0n)return;const i=n==null?void 0:n.token;pwe!==i&&(pwe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function SM(e=sue()){const t=DC(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Rmn(e,{popupRedirectResolver:bze,persistence:[o0n,Ymn,fze]}),r=LUe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=egn(s.toString());zmn(n,o,()=>o(n.currentUser)),Umn(n,a=>o(a))}}const i=OUe("auth");return i&&Dmn(n,`http://${i}`),n}function tgn(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Cmn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=kh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",tgn().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q0n("Browser");var ngn="firebase",rgn="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ih(ngn,rgn,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xze="firebasestorage.googleapis.com",_ze="storageBucket",ign=2*60*1e3,sgn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Gm{constructor(t,n,r=0){super(_H(t),`Firebase Storage: ${n} (${_H(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return _H(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ks;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ks||(Ks={}));function _H(e){return"storage/"+e}function mue(){const e="An unknown error occurred, please check the error payload for server response.";return new Xs(Ks.UNKNOWN,e)}function ogn(e){return new Xs(Ks.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function agn(e){return new Xs(Ks.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ugn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xs(Ks.UNAUTHENTICATED,e)}function lgn(){return new Xs(Ks.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cgn(e){return new Xs(Ks.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function fgn(){return new Xs(Ks.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dgn(){return new Xs(Ks.CANCELED,"User canceled the upload/download.")}function hgn(e){return new Xs(Ks.INVALID_URL,"Invalid URL '"+e+"'.")}function pgn(e){return new Xs(Ks.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function mgn(){return new Xs(Ks.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_ze+"' property when initializing the app?")}function ggn(){return new Xs(Ks.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ygn(){return new Xs(Ks.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vgn(e){return new Xs(Ks.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ZK(e){return new Xs(Ks.INVALID_ARGUMENT,e)}function wze(){return new Xs(Ks.APP_DELETED,"The Firebase app was deleted.")}function bgn(e){return new Xs(Ks.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vk(e,t){return new Xs(Ks.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function XA(e){throw new Xs(Ks.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=sl.makeFromUrl(t,n)}catch{return new sl(t,"")}if(r.path==="")return r;throw pgn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(_){_.path_=decodeURIComponent(_.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===xze?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let _=0;_<b.length;_++){const E=b[_],S=E.regex.exec(t);if(S){const C=S[E.indices.bucket];let A=S[E.indices.path];A||(A=""),r=new sl(C,A),E.postModify(r);break}}if(r==null)throw hgn(t);return r}}class xgn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _gn(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function wgn(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Egn(e){return e!==void 0}function Tgn(e){return typeof e=="object"&&!Array.isArray(e)}function gue(e){return typeof e=="string"||e instanceof String}function mwe(e){return yue()&&e instanceof Blob}function yue(){return typeof Blob<"u"}function eX(e,t,n,r){if(r<t)throw ZK(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw ZK(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Eze(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vx;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Vx||(Vx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sgn(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cgn{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new l4(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Vx.NO_ERROR,u=s.getStatus();if(!a||Sgn(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Vx.ABORT;r(!1,new l4(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new l4(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Egn(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=mue();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?wze():dgn();o(u)}else{const u=fgn();o(u)}};this.canceled_?n(!1,new l4(!1,null,!0)):this.backoffId_=_gn(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&wgn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class l4{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Agn(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Ign(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function kgn(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Rgn(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Pgn(e,t,n,r,i,s,o=!0){const a=Eze(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return kgn(l,t),Agn(l,n),Ign(l,s),Rgn(l,r),new Cgn(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dgn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Ngn(...e){const t=Dgn();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(yue())return new Blob(e);throw new Xs(Ks.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ogn(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $gn(e){if(typeof atob>"u")throw vgn("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wH{constructor(t,n){this.data=t,this.contentType=n||null}}function Lgn(e,t){switch(e){case qp.RAW:return new wH(Tze(t));case qp.BASE64:case qp.BASE64URL:return new wH(Sze(e,t));case qp.DATA_URL:return new wH(Fgn(t),Bgn(t))}throw mue()}function Tze(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Mgn(e){let t;try{t=decodeURIComponent(e)}catch{throw Vk(qp.DATA_URL,"Malformed data URL.")}return Tze(t)}function Sze(e,t){switch(e){case qp.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Vk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case qp.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Vk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$gn(t)}catch(i){throw i.message.includes("polyfill")?i:Vk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Cze{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Vk(qp.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=jgn(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function Fgn(e){const t=new Cze(e);return t.base64?Sze(qp.BASE64,t.rest):Mgn(t.rest)}function Bgn(e){return new Cze(e).contentType}function jgn(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,n){let r=0,i="";mwe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(mwe(this.data_)){const r=this.data_,i=Ogn(r,t,n);return i===null?null:new Ky(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Ky(r,!0)}}static getBlob(...t){if(yue()){const n=t.map(r=>r instanceof Ky?r.data_:r);return new Ky(Ngn.apply(null,n))}else{const n=t.map(o=>gue(o)?Lgn(qp.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ky(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vue(e){let t;try{t=JSON.parse(e)}catch{return null}return Tgn(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ugn(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function zgn(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Aze(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vgn(e,t){return t}class Gu{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Vgn}}let c4=null;function Hgn(e){return!gue(e)||e.length<2?e:Aze(e)}function Ize(){if(c4)return c4;const e=[];e.push(new Gu("bucket")),e.push(new Gu("generation")),e.push(new Gu("metageneration")),e.push(new Gu("name","fullPath",!0));function t(s,o){return Hgn(o)}const n=new Gu("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Gu("size");return i.xform=r,e.push(i),e.push(new Gu("timeCreated")),e.push(new Gu("updated")),e.push(new Gu("md5Hash",null,!0)),e.push(new Gu("cacheControl",null,!0)),e.push(new Gu("contentDisposition",null,!0)),e.push(new Gu("contentEncoding",null,!0)),e.push(new Gu("contentLanguage",null,!0)),e.push(new Gu("contentType",null,!0)),e.push(new Gu("metadata","customMetadata",!0)),c4=e,c4}function qgn(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new sl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Wgn(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return qgn(r,e),r}function kze(e,t,n){const r=vue(t);return r===null?null:Wgn(e,r,n)}function Ggn(e,t,n,r){const i=vue(t);if(i===null||!gue(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=ID(d,n,r),p=Eze({alt:"media",token:l});return h+p})[0]}function Ygn(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gwe="prefixes",ywe="items";function Kgn(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[gwe])for(const i of n[gwe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new sl(t,s));r.prefixes.push(o)}if(n[ywe])for(const i of n[ywe]){const s=e._makeStorageReference(new sl(t,i.name));r.items.push(s)}return r}function Xgn(e,t,n){const r=vue(n);return r===null?null:Kgn(e,t,r)}class z9{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bue(e){if(!e)throw mue()}function Qgn(e,t){function n(r,i){const s=kze(e,i,t);return bue(s!==null),s}return n}function Jgn(e,t){function n(r,i){const s=Xgn(e,t,i);return bue(s!==null),s}return n}function Zgn(e,t){function n(r,i){const s=kze(e,i,t);return bue(s!==null),Ggn(s,i,e.host,e._protocol)}return n}function xue(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=lgn():i=ugn():n.getStatus()===402?i=agn(e.bucket):n.getStatus()===403?i=cgn(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function Rze(e){const t=xue(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=ogn(e.path)),s.serverResponse=i.serverResponse,s}return n}function eyn(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=ID(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new z9(a,u,Jgn(e,t.bucket),l);return c.urlParams=s,c.errorHandler=xue(t),c}function tyn(e,t,n){const r=t.fullServerUrl(),i=ID(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new z9(i,s,Zgn(e,n),o);return a.errorHandler=Rze(t),a}function nyn(e,t){const n=t.fullServerUrl(),r=ID(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new z9(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Rze(t),a}function ryn(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function iyn(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=ryn(null,t)),r}function syn(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let _=0;_<2;_++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=iyn(t,r,i),c=Ygn(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Ky.getBlob(f,r,d);if(h===null)throw ggn();const p={name:l.fullPath},m=ID(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new z9(m,g,Qgn(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=xue(t),v}class oyn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vx.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vx.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vx.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw XA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw XA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw XA("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw XA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw XA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class ayn extends oyn{initXhr(){this.xhr_.responseType="text"}}function V9(){return new ayn}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(t,n){this._service=t,n instanceof sl?this._location=n:this._location=sl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new P_(t,n)}get root(){const t=new sl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Aze(this._location.path)}get storage(){return this._service}get parent(){const t=Ugn(this._location.path);if(t===null)return null;const n=new sl(this._location.bucket,t);return new P_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw bgn(t)}}function uyn(e,t,n){e._throwIfRoot("uploadBytes");const r=syn(e.storage,e._location,Ize(),new Ky(t,!0),n);return e.storage.makeRequestWithTokens(r,V9).then(i=>({metadata:i,ref:e}))}function lyn(e){const t={prefixes:[],items:[]};return Pze(e,t).then(()=>t)}async function Pze(e,t,n){const i=await cyn(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await Pze(e,t,i.nextPageToken)}function cyn(e,t){t!=null&&typeof t.maxResults=="number"&&eX("options.maxResults",1,1e3,t.maxResults);const n=t,r=eyn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,V9)}function fyn(e){e._throwIfRoot("getDownloadURL");const t=tyn(e.storage,e._location,Ize());return e.storage.makeRequestWithTokens(t,V9).then(n=>{if(n===null)throw ygn();return n})}function dyn(e){e._throwIfRoot("deleteObject");const t=nyn(e.storage,e._location);return e.storage.makeRequestWithTokens(t,V9)}function hyn(e,t){const n=zgn(e._location.path,t),r=new sl(e._location.bucket,n);return new P_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pyn(e){return/^[A-Za-z]+:\/\//.test(e)}function myn(e,t){return new P_(e,t)}function Dze(e,t){if(e instanceof _ue){const n=e;if(n._bucket==null)throw mgn();const r=new P_(n,n._bucket);return t!=null?Dze(r,t):r}else return t!==void 0?hyn(e,t):e}function gyn(e,t){if(t&&pyn(t)){if(e instanceof _ue)return myn(e,t);throw ZK("To use ref(service, url), the first argument must be a Storage instance.")}else return Dze(e,t)}function vwe(e,t){const n=t==null?void 0:t[_ze];return n==null?null:sl.makeFromBucketSpec(n,e)}function yyn(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:Ihn(i,e.app.options.projectId))}class _ue{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=xze,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ign,this._maxUploadRetryTime=sgn,this._requests=new Set,i!=null?this._bucket=sl.makeFromBucketSpec(i,this._host):this._bucket=vwe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=sl.makeFromBucketSpec(this._url,t):this._bucket=vwe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){eX("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){eX("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new P_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new xgn(wze());{const o=Pgn(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const bwe="@firebase/storage",xwe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nze="storage";function f4(e,t,n){return e=es(e),uyn(e,t,n)}function QA(e){return e=es(e),lyn(e)}function d4(e){return e=es(e),fyn(e)}function _we(e){return e=es(e),dyn(e)}function $c(e,t){return e=es(e),gyn(e,t)}function wwe(e=sue(),t){e=es(e);const r=DC(e,Nze).getImmediate({identifier:t}),i=Ahn("storage");return i&&vyn(r,...i),r}function vyn(e,t,n,r={}){yyn(e,t,n,r)}function byn(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new _ue(n,r,i,t,xw)}function xyn(){Pg(new Sm(Nze,byn,"PUBLIC").setMultipleInstances(!0)),Ih(bwe,xwe,""),Ih(bwe,xwe,"esm2017")}xyn();var Ewe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hx,Oze;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,A){function R(){}R.prototype=A.prototype,C.D=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(k,N,L){for(var O=Array(arguments.length-2),B=2;B<arguments.length;B++)O[B-2]=arguments[B];return A.prototype[N].apply(k,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,A,R){R||(R=0);var k=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)k[N]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(N=0;16>N;++N)k[N]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],N=C.g[2];var L=C.g[3],O=A+(L^R&(N^L))+k[0]+3614090360&4294967295;A=R+(O<<7&4294967295|O>>>25),O=L+(N^A&(R^N))+k[1]+3905402710&4294967295,L=A+(O<<12&4294967295|O>>>20),O=N+(R^L&(A^R))+k[2]+606105819&4294967295,N=L+(O<<17&4294967295|O>>>15),O=R+(A^N&(L^A))+k[3]+3250441966&4294967295,R=N+(O<<22&4294967295|O>>>10),O=A+(L^R&(N^L))+k[4]+4118548399&4294967295,A=R+(O<<7&4294967295|O>>>25),O=L+(N^A&(R^N))+k[5]+1200080426&4294967295,L=A+(O<<12&4294967295|O>>>20),O=N+(R^L&(A^R))+k[6]+2821735955&4294967295,N=L+(O<<17&4294967295|O>>>15),O=R+(A^N&(L^A))+k[7]+4249261313&4294967295,R=N+(O<<22&4294967295|O>>>10),O=A+(L^R&(N^L))+k[8]+1770035416&4294967295,A=R+(O<<7&4294967295|O>>>25),O=L+(N^A&(R^N))+k[9]+2336552879&4294967295,L=A+(O<<12&4294967295|O>>>20),O=N+(R^L&(A^R))+k[10]+4294925233&4294967295,N=L+(O<<17&4294967295|O>>>15),O=R+(A^N&(L^A))+k[11]+2304563134&4294967295,R=N+(O<<22&4294967295|O>>>10),O=A+(L^R&(N^L))+k[12]+1804603682&4294967295,A=R+(O<<7&4294967295|O>>>25),O=L+(N^A&(R^N))+k[13]+4254626195&4294967295,L=A+(O<<12&4294967295|O>>>20),O=N+(R^L&(A^R))+k[14]+2792965006&4294967295,N=L+(O<<17&4294967295|O>>>15),O=R+(A^N&(L^A))+k[15]+1236535329&4294967295,R=N+(O<<22&4294967295|O>>>10),O=A+(N^L&(R^N))+k[1]+4129170786&4294967295,A=R+(O<<5&4294967295|O>>>27),O=L+(R^N&(A^R))+k[6]+3225465664&4294967295,L=A+(O<<9&4294967295|O>>>23),O=N+(A^R&(L^A))+k[11]+643717713&4294967295,N=L+(O<<14&4294967295|O>>>18),O=R+(L^A&(N^L))+k[0]+3921069994&4294967295,R=N+(O<<20&4294967295|O>>>12),O=A+(N^L&(R^N))+k[5]+3593408605&4294967295,A=R+(O<<5&4294967295|O>>>27),O=L+(R^N&(A^R))+k[10]+38016083&4294967295,L=A+(O<<9&4294967295|O>>>23),O=N+(A^R&(L^A))+k[15]+3634488961&4294967295,N=L+(O<<14&4294967295|O>>>18),O=R+(L^A&(N^L))+k[4]+3889429448&4294967295,R=N+(O<<20&4294967295|O>>>12),O=A+(N^L&(R^N))+k[9]+568446438&4294967295,A=R+(O<<5&4294967295|O>>>27),O=L+(R^N&(A^R))+k[14]+3275163606&4294967295,L=A+(O<<9&4294967295|O>>>23),O=N+(A^R&(L^A))+k[3]+4107603335&4294967295,N=L+(O<<14&4294967295|O>>>18),O=R+(L^A&(N^L))+k[8]+1163531501&4294967295,R=N+(O<<20&4294967295|O>>>12),O=A+(N^L&(R^N))+k[13]+2850285829&4294967295,A=R+(O<<5&4294967295|O>>>27),O=L+(R^N&(A^R))+k[2]+4243563512&4294967295,L=A+(O<<9&4294967295|O>>>23),O=N+(A^R&(L^A))+k[7]+1735328473&4294967295,N=L+(O<<14&4294967295|O>>>18),O=R+(L^A&(N^L))+k[12]+2368359562&4294967295,R=N+(O<<20&4294967295|O>>>12),O=A+(R^N^L)+k[5]+4294588738&4294967295,A=R+(O<<4&4294967295|O>>>28),O=L+(A^R^N)+k[8]+2272392833&4294967295,L=A+(O<<11&4294967295|O>>>21),O=N+(L^A^R)+k[11]+1839030562&4294967295,N=L+(O<<16&4294967295|O>>>16),O=R+(N^L^A)+k[14]+4259657740&4294967295,R=N+(O<<23&4294967295|O>>>9),O=A+(R^N^L)+k[1]+2763975236&4294967295,A=R+(O<<4&4294967295|O>>>28),O=L+(A^R^N)+k[4]+1272893353&4294967295,L=A+(O<<11&4294967295|O>>>21),O=N+(L^A^R)+k[7]+4139469664&4294967295,N=L+(O<<16&4294967295|O>>>16),O=R+(N^L^A)+k[10]+3200236656&4294967295,R=N+(O<<23&4294967295|O>>>9),O=A+(R^N^L)+k[13]+681279174&4294967295,A=R+(O<<4&4294967295|O>>>28),O=L+(A^R^N)+k[0]+3936430074&4294967295,L=A+(O<<11&4294967295|O>>>21),O=N+(L^A^R)+k[3]+3572445317&4294967295,N=L+(O<<16&4294967295|O>>>16),O=R+(N^L^A)+k[6]+76029189&4294967295,R=N+(O<<23&4294967295|O>>>9),O=A+(R^N^L)+k[9]+3654602809&4294967295,A=R+(O<<4&4294967295|O>>>28),O=L+(A^R^N)+k[12]+3873151461&4294967295,L=A+(O<<11&4294967295|O>>>21),O=N+(L^A^R)+k[15]+530742520&4294967295,N=L+(O<<16&4294967295|O>>>16),O=R+(N^L^A)+k[2]+3299628645&4294967295,R=N+(O<<23&4294967295|O>>>9),O=A+(N^(R|~L))+k[0]+4096336452&4294967295,A=R+(O<<6&4294967295|O>>>26),O=L+(R^(A|~N))+k[7]+1126891415&4294967295,L=A+(O<<10&4294967295|O>>>22),O=N+(A^(L|~R))+k[14]+2878612391&4294967295,N=L+(O<<15&4294967295|O>>>17),O=R+(L^(N|~A))+k[5]+4237533241&4294967295,R=N+(O<<21&4294967295|O>>>11),O=A+(N^(R|~L))+k[12]+1700485571&4294967295,A=R+(O<<6&4294967295|O>>>26),O=L+(R^(A|~N))+k[3]+2399980690&4294967295,L=A+(O<<10&4294967295|O>>>22),O=N+(A^(L|~R))+k[10]+4293915773&4294967295,N=L+(O<<15&4294967295|O>>>17),O=R+(L^(N|~A))+k[1]+2240044497&4294967295,R=N+(O<<21&4294967295|O>>>11),O=A+(N^(R|~L))+k[8]+1873313359&4294967295,A=R+(O<<6&4294967295|O>>>26),O=L+(R^(A|~N))+k[15]+4264355552&4294967295,L=A+(O<<10&4294967295|O>>>22),O=N+(A^(L|~R))+k[6]+2734768916&4294967295,N=L+(O<<15&4294967295|O>>>17),O=R+(L^(N|~A))+k[13]+1309151649&4294967295,R=N+(O<<21&4294967295|O>>>11),O=A+(N^(R|~L))+k[4]+4149444226&4294967295,A=R+(O<<6&4294967295|O>>>26),O=L+(R^(A|~N))+k[11]+3174756917&4294967295,L=A+(O<<10&4294967295|O>>>22),O=N+(A^(L|~R))+k[2]+718787259&4294967295,N=L+(O<<15&4294967295|O>>>17),O=R+(L^(N|~A))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(N+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.u=function(C,A){A===void 0&&(A=C.length);for(var R=A-this.blockSize,k=this.B,N=this.h,L=0;L<A;){if(N==0)for(;L<=R;)i(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<A;)if(k[N++]=C.charCodeAt(L++),N==this.blockSize){i(this,k),N=0;break}}else for(;L<A;)if(k[N++]=C[L++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=A},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;var R=8*this.o;for(A=C.length-8;A<C.length;++A)C[A]=R&255,R/=256;for(this.u(C),C=Array(16),A=R=0;4>A;++A)for(var k=0;32>k;k+=8)C[R++]=this.g[A]>>>k&255;return C};function s(C,A){var R=a;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function o(C,A){this.h=A;for(var R=[],k=!0,N=C.length-1;0<=N;N--){var L=C[N]|0;k&&L==A||(R[N]=L,k=!1)}this.g=R}var a={};function u(C){return-128<=C&&128>C?s(C,function(A){return new o([A|0],0>A?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return g(l(-C));for(var A=[],R=1,k=0;C>=R;k++)A[k]=C/R|0,R*=4294967296;return new o(A,0)}function c(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return g(c(C.substring(1),A));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=l(Math.pow(A,8)),k=f,N=0;N<C.length;N+=8){var L=Math.min(8,C.length-N),O=parseInt(C.substring(N,N+L),A);8>L?(L=l(Math.pow(A,L)),k=k.j(L).add(l(O))):(k=k.j(R),k=k.add(l(O)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var C=0,A=1,R=0;R<this.g.length;R++){var k=this.i(R);C+=(0<=k?k:4294967296+k)*A,A*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(p(this))return"0";if(m(this))return"-"+g(this).toString(C);for(var A=l(Math.pow(C,6)),R=this,k="";;){var N=_(R,A).g;R=y(R,N.j(A));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=N,p(R))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function p(C){if(C.h!=0)return!1;for(var A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function m(C){return C.h==-1}e.l=function(C){return C=y(this,C),m(C)?-1:p(C)?0:1};function g(C){for(var A=C.g.length,R=[],k=0;k<A;k++)R[k]=~C.g[k];return new o(R,~C.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(C){for(var A=Math.max(this.g.length,C.g.length),R=[],k=0,N=0;N<=A;N++){var L=k+(this.i(N)&65535)+(C.i(N)&65535),O=(L>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);k=O>>>16,L&=65535,O&=65535,R[N]=O<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function y(C,A){return C.add(g(A))}e.j=function(C){if(p(this)||p(C))return f;if(m(this))return m(C)?g(this).j(g(C)):g(g(this).j(C));if(m(C))return g(this.j(g(C)));if(0>this.l(h)&&0>C.l(h))return l(this.m()*C.m());for(var A=this.g.length+C.g.length,R=[],k=0;k<2*A;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<C.g.length;N++){var L=this.i(k)>>>16,O=this.i(k)&65535,B=C.i(N)>>>16,q=C.i(N)&65535;R[2*k+2*N]+=O*q,v(R,2*k+2*N),R[2*k+2*N+1]+=L*q,v(R,2*k+2*N+1),R[2*k+2*N+1]+=O*B,v(R,2*k+2*N+1),R[2*k+2*N+2]+=L*B,v(R,2*k+2*N+2)}for(k=0;k<A;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=A;k<2*A;k++)R[k]=0;return new o(R,0)};function v(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function b(C,A){this.g=C,this.h=A}function _(C,A){if(p(A))throw Error("division by zero");if(p(C))return new b(f,f);if(m(C))return A=_(g(C),A),new b(g(A.g),g(A.h));if(m(A))return A=_(C,g(A)),new b(g(A.g),A.h);if(30<C.g.length){if(m(C)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var R=d,k=A;0>=k.l(C);)R=E(R),k=E(k);var N=S(R,1),L=S(k,1);for(k=S(k,2),R=S(R,2);!p(k);){var O=L.add(k);0>=O.l(C)&&(N=N.add(R),L=O),k=S(k,1),R=S(R,1)}return A=y(C,N.j(A)),new b(N,A)}for(N=f;0<=C.l(A);){for(R=Math.max(1,Math.floor(C.m()/A.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=l(R),O=L.j(A);m(O)||0<O.l(C);)R-=k,L=l(R),O=L.j(A);p(L)&&(L=d),N=N.add(L),C=y(C,O)}return new b(N,C)}e.A=function(C){return _(this,C).h},e.and=function(C){for(var A=Math.max(this.g.length,C.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)&C.i(k);return new o(R,this.h&C.h)},e.or=function(C){for(var A=Math.max(this.g.length,C.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)|C.i(k);return new o(R,this.h|C.h)},e.xor=function(C){for(var A=Math.max(this.g.length,C.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)^C.i(k);return new o(R,this.h^C.h)};function E(C){for(var A=C.g.length+1,R=[],k=0;k<A;k++)R[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(R,C.h)}function S(C,A){var R=A>>5;A%=32;for(var k=C.g.length-R,N=[],L=0;L<k;L++)N[L]=0<A?C.i(L+R)>>>A|C.i(L+R+1)<<32-A:C.i(L+R);return new o(N,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Oze=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Hx=o}).apply(typeof Ewe<"u"?Ewe:typeof self<"u"?self:typeof window<"u"?window:{});var h4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $ze,Lze,HI,Mze,j6,tX,Fze,Bze,jze;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,U,Y){return I==Array.prototype||I==Object.prototype||(I[U]=Y.value),I};function n(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof h4=="object"&&h4];for(var U=0;U<I.length;++U){var Y=I[U];if(Y&&Y.Math==Math)return Y}throw Error("Cannot find global object")}var r=n(this);function i(I,U){if(U)e:{var Y=r;I=I.split(".");for(var ne=0;ne<I.length-1;ne++){var Pe=I[ne];if(!(Pe in Y))break e;Y=Y[Pe]}I=I[I.length-1],ne=Y[I],U=U(ne),U!=ne&&U!=null&&t(Y,I,{configurable:!0,writable:!0,value:U})}}function s(I,U){I instanceof String&&(I+="");var Y=0,ne=!1,Pe={next:function(){if(!ne&&Y<I.length){var Ve=Y++;return{value:U(Ve,I[Ve]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return Pe[Symbol.iterator]=function(){return Pe},Pe}i("Array.prototype.values",function(I){return I||function(){return s(this,function(U,Y){return Y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(I){var U=typeof I;return U=U!="object"?U:I?Array.isArray(I)?"array":U:"null",U=="array"||U=="object"&&typeof I.length=="number"}function l(I){var U=typeof I;return U=="object"&&I!=null||U=="function"}function c(I,U,Y){return I.call.apply(I.bind,arguments)}function f(I,U,Y){if(!I)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var Pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Pe,ne),I.apply(U,Pe)}}return function(){return I.apply(U,arguments)}}function d(I,U,Y){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(I,U){var Y=Array.prototype.slice.call(arguments,1);return function(){var ne=Y.slice();return ne.push.apply(ne,arguments),I.apply(this,ne)}}function p(I,U){function Y(){}Y.prototype=U.prototype,I.aa=U.prototype,I.prototype=new Y,I.prototype.constructor=I,I.Qb=function(ne,Pe,Ve){for(var At=Array(arguments.length-2),li=2;li<arguments.length;li++)At[li-2]=arguments[li];return U.prototype[Pe].apply(ne,At)}}function m(I){const U=I.length;if(0<U){const Y=Array(U);for(let ne=0;ne<U;ne++)Y[ne]=I[ne];return Y}return[]}function g(I,U){for(let Y=1;Y<arguments.length;Y++){const ne=arguments[Y];if(u(ne)){const Pe=I.length||0,Ve=ne.length||0;I.length=Pe+Ve;for(let At=0;At<Ve;At++)I[Pe+At]=ne[At]}else I.push(ne)}}class y{constructor(U,Y){this.i=U,this.j=Y,this.h=0,this.g=null}get(){let U;return 0<this.h?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}function v(I){return/^[\s\xa0]*$/.test(I)}function b(){var I=a.navigator;return I&&(I=I.userAgent)?I:""}function _(I){return _[" "](I),I}_[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(I,U,Y){for(const ne in I)U.call(Y,I[ne],ne,I)}function C(I,U){for(const Y in I)U.call(void 0,I[Y],Y,I)}function A(I){const U={};for(const Y in I)U[Y]=I[Y];return U}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(I,U){let Y,ne;for(let Pe=1;Pe<arguments.length;Pe++){ne=arguments[Pe];for(Y in ne)I[Y]=ne[Y];for(let Ve=0;Ve<R.length;Ve++)Y=R[Ve],Object.prototype.hasOwnProperty.call(ne,Y)&&(I[Y]=ne[Y])}}function N(I){var U=1;I=I.split(":");const Y=[];for(;0<U&&I.length;)Y.push(I.shift()),U--;return I.length&&Y.push(I.join(":")),Y}function L(I){a.setTimeout(()=>{throw I},0)}function O(){var I=J;let U=null;return I.g&&(U=I.g,I.g=I.g.next,I.g||(I.h=null),U.next=null),U}class B{constructor(){this.h=this.g=null}add(U,Y){const ne=q.get();ne.set(U,Y),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var q=new y(()=>new H,I=>I.reset());class H{constructor(){this.next=this.g=this.h=null}set(U,Y){this.h=U,this.g=Y,this.next=null}reset(){this.next=this.g=this.h=null}}let G,K=!1,J=new B,F=()=>{const I=a.Promise.resolve(void 0);G=()=>{I.then(j)}};var j=()=>{for(var I;I=O();){try{I.h.call(I.g)}catch(Y){L(Y)}var U=q;U.j(I),100>U.h&&(U.h++,I.next=U.g,U.g=I)}K=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(I,U){this.type=I,this.g=this.target=U,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var I=!1,U=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const Y=()=>{};a.addEventListener("test",Y,U),a.removeEventListener("test",Y,U)}catch{}return I}();function Q(I,U){if(M.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var Y=this.type=I.type,ne=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=U,U=I.relatedTarget){if(E){e:{try{_(U.nodeName);var Pe=!0;break e}catch{}Pe=!1}Pe||(U=null)}}else Y=="mouseover"?U=I.fromElement:Y=="mouseout"&&(U=I.toElement);this.relatedTarget=U,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:se[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&Q.aa.h.call(this)}}p(Q,M);var se={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),he=0;function Ae(I,U,Y,ne,Pe){this.listener=I,this.proxy=null,this.src=U,this.type=Y,this.capture=!!ne,this.ha=Pe,this.key=++he,this.da=this.fa=!1}function Ne(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function rt(I){this.src=I,this.g={},this.h=0}rt.prototype.add=function(I,U,Y,ne,Pe){var Ve=I.toString();I=this.g[Ve],I||(I=this.g[Ve]=[],this.h++);var At=Tt(I,U,ne,Pe);return-1<At?(U=I[At],Y||(U.fa=!1)):(U=new Ae(U,this.src,Ve,!!ne,Pe),U.fa=Y,I.push(U)),U};function Re(I,U){var Y=U.type;if(Y in I.g){var ne=I.g[Y],Pe=Array.prototype.indexOf.call(ne,U,void 0),Ve;(Ve=0<=Pe)&&Array.prototype.splice.call(ne,Pe,1),Ve&&(Ne(U),I.g[Y].length==0&&(delete I.g[Y],I.h--))}}function Tt(I,U,Y,ne){for(var Pe=0;Pe<I.length;++Pe){var Ve=I[Pe];if(!Ve.da&&Ve.listener==U&&Ve.capture==!!Y&&Ve.ha==ne)return Pe}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),It={};function mt(I,U,Y,ne,Pe){if(Array.isArray(U)){for(var Ve=0;Ve<U.length;Ve++)mt(I,U[Ve],Y,ne,Pe);return null}return Y=Rt(Y),I&&I[be]?I.K(U,Y,l(ne)?!!ne.capture:!1,Pe):Se(I,U,Y,!1,ne,Pe)}function Se(I,U,Y,ne,Pe,Ve){if(!U)throw Error("Invalid event type");var At=l(Pe)?!!Pe.capture:!!Pe,li=we(I);if(li||(I[Ze]=li=new rt(I)),Y=li.add(U,Y,ne,At,Ve),Y.proxy)return Y;if(ne=Fe(),Y.proxy=ne,ne.src=I,ne.listener=Y,I.addEventListener)V||(Pe=At),Pe===void 0&&(Pe=!1),I.addEventListener(U.toString(),ne,Pe);else if(I.attachEvent)I.attachEvent(Pt(U.toString()),ne);else if(I.addListener&&I.removeListener)I.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return Y}function Fe(){function I(Y){return U.call(I.src,I.listener,Y)}const U=Je;return I}function st(I,U,Y,ne,Pe){if(Array.isArray(U))for(var Ve=0;Ve<U.length;Ve++)st(I,U[Ve],Y,ne,Pe);else ne=l(ne)?!!ne.capture:!!ne,Y=Rt(Y),I&&I[be]?(I=I.i,U=String(U).toString(),U in I.g&&(Ve=I.g[U],Y=Tt(Ve,Y,ne,Pe),-1<Y&&(Ne(Ve[Y]),Array.prototype.splice.call(Ve,Y,1),Ve.length==0&&(delete I.g[U],I.h--)))):I&&(I=we(I))&&(U=I.g[U.toString()],I=-1,U&&(I=Tt(U,Y,ne,Pe)),(Y=-1<I?U[I]:null)&&yt(Y))}function yt(I){if(typeof I!="number"&&I&&!I.da){var U=I.src;if(U&&U[be])Re(U.i,I);else{var Y=I.type,ne=I.proxy;U.removeEventListener?U.removeEventListener(Y,ne,I.capture):U.detachEvent?U.detachEvent(Pt(Y),ne):U.addListener&&U.removeListener&&U.removeListener(ne),(Y=we(U))?(Re(Y,I),Y.h==0&&(Y.src=null,U[Ze]=null)):Ne(I)}}}function Pt(I){return I in It?It[I]:It[I]="on"+I}function Je(I,U){if(I.da)I=!0;else{U=new Q(U,this);var Y=I.listener,ne=I.ha||I.src;I.fa&&yt(I),I=Y.call(ne,U)}return I}function we(I){return I=I[Ze],I instanceof rt?I:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(I){return typeof I=="function"?I:(I[kt]||(I[kt]=function(U){return I.handleEvent(U)}),I[kt])}function Ee(){W.call(this),this.i=new rt(this),this.M=this,this.F=null}p(Ee,W),Ee.prototype[be]=!0,Ee.prototype.removeEventListener=function(I,U,Y,ne){st(this,I,U,Y,ne)};function Oe(I,U){var Y,ne=I.F;if(ne)for(Y=[];ne;ne=ne.F)Y.push(ne);if(I=I.M,ne=U.type||U,typeof U=="string")U=new M(U,I);else if(U instanceof M)U.target=U.target||I;else{var Pe=U;U=new M(ne,I),k(U,Pe)}if(Pe=!0,Y)for(var Ve=Y.length-1;0<=Ve;Ve--){var At=U.g=Y[Ve];Pe=ot(At,ne,!0,U)&&Pe}if(At=U.g=I,Pe=ot(At,ne,!0,U)&&Pe,Pe=ot(At,ne,!1,U)&&Pe,Y)for(Ve=0;Ve<Y.length;Ve++)At=U.g=Y[Ve],Pe=ot(At,ne,!1,U)&&Pe}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var I=this.i,U;for(U in I.g){for(var Y=I.g[U],ne=0;ne<Y.length;ne++)Ne(Y[ne]);delete I.g[U],I.h--}}this.F=null},Ee.prototype.K=function(I,U,Y,ne){return this.i.add(String(I),U,!1,Y,ne)},Ee.prototype.L=function(I,U,Y,ne){return this.i.add(String(I),U,!0,Y,ne)};function ot(I,U,Y,ne){if(U=I.i.g[String(U)],!U)return!0;U=U.concat();for(var Pe=!0,Ve=0;Ve<U.length;++Ve){var At=U[Ve];if(At&&!At.da&&At.capture==Y){var li=At.listener,Ro=At.ha||At.src;At.fa&&Re(I.i,At),Pe=li.call(Ro,ne)!==!1&&Pe}}return Pe&&!ne.defaultPrevented}function xt(I,U,Y){if(typeof I=="function")Y&&(I=d(I,Y));else if(I&&typeof I.handleEvent=="function")I=d(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(U)?-1:a.setTimeout(I,U||0)}function jt(I){I.g=xt(()=>{I.g=null,I.i&&(I.i=!1,jt(I))},I.l);const U=I.h;I.h=null,I.m.apply(null,U)}class Un extends W{constructor(U,Y){super(),this.m=U,this.l=Y,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:jt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(I){W.call(this),this.h=I,this.g={}}p(dr,W);var Sr=[];function xi(I){S(I.g,function(U,Y){this.g.hasOwnProperty(Y)&&yt(U)},I),I.g={}}dr.prototype.N=function(){dr.aa.N.call(this),xi(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=a.JSON.stringify,zn=a.JSON.parse,hr=class{stringify(I){return a.JSON.stringify(I,void 0)}parse(I){return a.JSON.parse(I,void 0)}};function gr(){}gr.prototype.h=null;function Qo(I){return I.h||(I.h=I.i())}function ts(){}var hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ns(){M.call(this,"d")}p(Ns,M);function Vr(){M.call(this,"c")}p(Vr,M);var ps={},kc=null;function Jo(){return kc=kc||new Ee}ps.La="serverreachability";function Mu(I){M.call(this,ps.La,I)}p(Mu,M);function Br(I){const U=Jo();Oe(U,new Mu(U))}ps.STAT_EVENT="statevent";function ki(I,U){M.call(this,ps.STAT_EVENT,I),this.stat=U}p(ki,M);function mi(I){const U=Jo();Oe(U,new ki(U,I))}ps.Ma="timingevent";function Qs(I,U){M.call(this,ps.Ma,I),this.size=U}p(Qs,M);function oi(I,U){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){I()},U)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function me(I,U,Y,ne,Pe,Ve){I.info(function(){if(I.g)if(Ve)for(var At="",li=Ve.split("&"),Ro=0;Ro<li.length;Ro++){var kr=li[Ro].split("=");if(1<kr.length){var gi=kr[0];kr=kr[1];var vo=gi.split("_");At=2<=vo.length&&vo[1]=="type"?At+(gi+"="+kr+"&"):At+(gi+"=redacted&")}}else At=null;else At=Ve;return"XMLHTTP REQ ("+ne+") [attempt "+Pe+"]: "+U+`
`+Y+`
`+At})}function ue(I,U,Y,ne,Pe,Ve,At){I.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+Pe+"]: "+U+`
`+Y+`
`+Ve+" "+At})}function ge(I,U,Y,ne){I.info(function(){return"XMLHTTP TEXT ("+U+"): "+Le(I,Y)+(ne?" "+ne:"")})}function Me(I,U){I.info(function(){return"TIMEOUT: "+U})}Ri.prototype.info=function(){};function Le(I,U){if(!I.g)return U;if(!U)return null;try{var Y=JSON.parse(U);if(Y){for(I=0;I<Y.length;I++)if(Array.isArray(Y[I])){var ne=Y[I];if(!(2>ne.length)){var Pe=ne[1];if(Array.isArray(Pe)&&!(1>Pe.length)){var Ve=Pe[0];if(Ve!="noop"&&Ve!="stop"&&Ve!="close")for(var At=1;At<Pe.length;At++)Pe[At]=""}}}}return Sn(Y)}catch{return U}}var _t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ut={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dn;function Zn(){}p(Zn,gr),Zn.prototype.g=function(){return new XMLHttpRequest},Zn.prototype.i=function(){return{}},dn=new Zn;function ur(I,U,Y,ne){this.j=I,this.i=U,this.l=Y,this.R=ne||1,this.U=new dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new On}function On(){this.i=null,this.g="",this.h=!1}var Cr={},ai={};function an(I,U,Y){I.L=1,I.v=er(ut(U)),I.m=Y,I.P=!0,Ar(I,null)}function Ar(I,U){I.F=Date.now(),Pi(I),I.A=ut(I.v);var Y=I.A,ne=I.R;Array.isArray(ne)||(ne=[String(ne)]),sb(Y.i,"t",ne),I.C=0,Y=I.j.J,I.h=new On,I.g=VD(I.j,Y?U:null,!I.m),0<I.O&&(I.M=new Un(d(I.Y,I,I.g),I.O)),U=I.U,Y=I.g,ne=I.ca;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(Sr[0]=Pe.toString()),Pe=Sr);for(var Ve=0;Ve<Pe.length;Ve++){var At=mt(Y,Pe[Ve],ne||U.handleEvent,!1,U.h||U);if(!At)break;U.g[At.key]=At}U=I.H?A(I.H):{},I.m?(I.u||(I.u="POST"),U["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,U)):(I.u="GET",I.g.ea(I.A,I.u,null,U)),Br(),me(I.i,I.u,I.A,I.l,I.R,I.m)}ur.prototype.ca=function(I){I=I.target;const U=this.M;U&&wi(I)==3?U.j():this.Y(I)},ur.prototype.Y=function(I){try{if(I==this.g)e:{const vo=wi(this.g);var U=this.g.Ba();const Af=this.g.Z();if(!(3>vo)&&(vo!=3||this.g&&(this.h.h||this.g.oa()||ko(this.g)))){this.J||vo!=4||U==7||(U==8||0>=Af?Br(3):Br(2)),Di(this);var Y=this.g.Z();this.X=Y;t:if(Jr(this)){var ne=ko(this.g);I="";var Pe=ne.length,Ve=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),Co(this);var At="";break t}this.h.i=new a.TextDecoder}for(U=0;U<Pe;U++)this.h.h=!0,I+=this.h.i.decode(ne[U],{stream:!(Ve&&U==Pe-1)});ne.length=0,this.h.g+=I,this.C=0,At=this.h.g}else At=this.g.oa();if(this.o=Y==200,ue(this.i,this.u,this.A,this.l,this.R,vo,Y),this.o){if(this.T&&!this.K){t:{if(this.g){var li,Ro=this.g;if((li=Ro.g?Ro.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(li)){var kr=li;break t}}kr=null}if(Y=kr)ge(this.i,this.l,Y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rs(this,Y);else{this.o=!1,this.s=3,mi(12),ns(this),Co(this);break e}}if(this.P){Y=!0;let Al;for(;!this.J&&this.C<At.length;)if(Al=yr(this,At),Al==ai){vo==4&&(this.s=4,mi(14),Y=!1),ge(this.i,this.l,null,"[Incomplete Response]");break}else if(Al==Cr){this.s=4,mi(15),ge(this.i,this.l,At,"[Invalid Chunk]"),Y=!1;break}else ge(this.i,this.l,Al,null),rs(this,Al);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vo!=4||At.length!=0||this.h.h||(this.s=1,mi(16),Y=!1),this.o=this.o&&Y,!Y)ge(this.i,this.l,At,"[Invalid Chunked Response]"),ns(this),Co(this);else if(0<At.length&&!this.W){this.W=!0;var gi=this.j;gi.g==this&&gi.ba&&!gi.M&&(gi.j.info("Great, no buffering proxy detected. Bytes received: "+At.length),Cf(gi),gi.M=!0,mi(11))}}else ge(this.i,this.l,At,null),rs(this,At);vo==4&&ns(this),this.o&&!this.J&&(vo==4?zi(this.j,this):(this.o=!1,Pi(this)))}else Nd(this.g),Y==400&&0<At.indexOf("Unknown SID")?(this.s=3,mi(12)):(this.s=0,mi(13)),ns(this),Co(this)}}}catch{}finally{}};function Jr(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function yr(I,U){var Y=I.C,ne=U.indexOf(`
`,Y);return ne==-1?ai:(Y=Number(U.substring(Y,ne)),isNaN(Y)?Cr:(ne+=1,ne+Y>U.length?ai:(U=U.slice(ne,ne+Y),I.C=ne+Y,U)))}ur.prototype.cancel=function(){this.J=!0,ns(this)};function Pi(I){I.S=Date.now()+I.I,go(I,I.I)}function go(I,U){if(I.B!=null)throw Error("WatchDog timer not null");I.B=oi(d(I.ba,I),U)}function Di(I){I.B&&(a.clearTimeout(I.B),I.B=null)}ur.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(Me(this.i,this.A),this.L!=2&&(Br(),mi(17)),ns(this),this.s=2,Co(this)):go(this,this.S-I)};function Co(I){I.j.G==0||I.J||zi(I.j,I)}function ns(I){Di(I);var U=I.M;U&&typeof U.ma=="function"&&U.ma(),I.M=null,xi(I.U),I.g&&(U=I.g,I.g=null,U.abort(),U.ma())}function rs(I,U){try{var Y=I.j;if(Y.G!=0&&(Y.g==I||Sf(Y.h,I))){if(!I.K&&Sf(Y.h,I)&&Y.G==3){try{var ne=Y.Da.g.parse(U)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var Pe=ne;if(Pe[0]==0){e:if(!Y.u){if(Y.g)if(Y.g.F+3e3<I.F)ay(Y),ab(Y);else break e;kw(Y),mi(18)}}else Y.za=Pe[1],0<Y.za-Y.T&&37500>Pe[2]&&Y.F&&Y.v==0&&!Y.C&&(Y.C=oi(d(Y.Za,Y),6e3));if(1>=Cl(Y.h)&&Y.ca){try{Y.ca()}catch{}Y.ca=void 0}}else $d(Y,11)}else if((I.K||Y.g==I)&&ay(Y),!v(U))for(Pe=Y.Da.g.parse(U),U=0;U<Pe.length;U++){let kr=Pe[U];if(Y.T=kr[0],kr=kr[1],Y.G==2)if(kr[0]=="c"){Y.K=kr[1],Y.ia=kr[2];const gi=kr[3];gi!=null&&(Y.la=gi,Y.j.info("VER="+Y.la));const vo=kr[4];vo!=null&&(Y.Aa=vo,Y.j.info("SVER="+Y.Aa));const Af=kr[5];Af!=null&&typeof Af=="number"&&0<Af&&(ne=1.5*Af,Y.L=ne,Y.j.info("backChannelRequestTimeoutMs_="+ne)),ne=Y;const Al=I.g;if(Al){const db=Al.g?Al.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(db){var Ve=ne.h;Ve.g||db.indexOf("spdy")==-1&&db.indexOf("quic")==-1&&db.indexOf("h2")==-1||(Ve.j=Ve.l,Ve.g=new Set,Ve.h&&(ee(Ve,Ve.h),Ve.h=null))}if(ne.D){const jC=Al.g?Al.g.getResponseHeader("X-HTTP-Session-Id"):null;jC&&(ne.ya=jC,Kt(ne.I,ne.D,jC))}}Y.G=3,Y.l&&Y.l.ua(),Y.ba&&(Y.R=Date.now()-I.F,Y.j.info("Handshake RTT: "+Y.R+"ms")),ne=Y;var At=I;if(ne.qa=Rw(ne,ne.J?ne.ia:null,ne.W),At.K){pe(ne.h,At);var li=At,Ro=ne.L;Ro&&(li.I=Ro),li.B&&(Di(li),Pi(li)),ne.g=At}else UD(ne);0<Y.i.length&&ub(Y)}else kr[0]!="stop"&&kr[0]!="close"||$d(Y,7);else Y.G==3&&(kr[0]=="stop"||kr[0]=="close"?kr[0]=="stop"?$d(Y,7):Qm(Y):kr[0]!="noop"&&Y.l&&Y.l.ta(kr),Y.v=0)}}Br(4)}catch{}}var Ao=class{constructor(I,U){this.g=I,this.map=U}};function Ea(I){this.l=I||10,a.PerformanceNavigationTiming?(I=a.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yo(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function Cl(I){return I.h?1:I.g?I.g.size:0}function Sf(I,U){return I.h?I.h==U:I.g?I.g.has(U):!1}function ee(I,U){I.g?I.g.add(U):I.h=U}function pe(I,U){I.h&&I.h==U?I.h=null:I.g&&I.g.has(U)&&I.g.delete(U)}Ea.prototype.cancel=function(){if(this.i=oe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function oe(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let U=I.i;for(const Y of I.g.values())U=U.concat(Y.D);return U}return m(I.i)}function _e(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(u(I)){for(var U=[],Y=I.length,ne=0;ne<Y;ne++)U.push(I[ne]);return U}U=[],Y=0;for(ne in I)U[Y++]=I[ne];return U}function Ce(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(u(I)||typeof I=="string"){var U=[];I=I.length;for(var Y=0;Y<I;Y++)U.push(Y);return U}U=[],Y=0;for(const ne in I)U[Y++]=ne;return U}}}function xe(I,U){if(I.forEach&&typeof I.forEach=="function")I.forEach(U,void 0);else if(u(I)||typeof I=="string")Array.prototype.forEach.call(I,U,void 0);else for(var Y=Ce(I),ne=_e(I),Pe=ne.length,Ve=0;Ve<Pe;Ve++)U.call(void 0,ne[Ve],Y&&Y[Ve],I)}var qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(I,U){if(I){I=I.split("&");for(var Y=0;Y<I.length;Y++){var ne=I[Y].indexOf("="),Pe=null;if(0<=ne){var Ve=I[Y].substring(0,ne);Pe=I[Y].substring(ne+1)}else Ve=I[Y];U(Ve,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}function at(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof at){this.h=I.h,vt(this,I.j),this.o=I.o,this.g=I.g,Lt(this,I.s),this.l=I.l;var U=I.i,Y=new Fu;Y.i=U.i,U.g&&(Y.g=new Map(U.g),Y.h=U.h),$n(this,Y),this.m=I.m}else I&&(U=String(I).match(qe))?(this.h=!1,vt(this,U[1]||"",!0),this.o=Hr(U[2]||""),this.g=Hr(U[3]||"",!0),Lt(this,U[4]),this.l=Hr(U[5]||"",!0),$n(this,U[6]||"",!0),this.m=Hr(U[7]||"")):(this.h=!1,this.i=new Fu(null,this.h))}at.prototype.toString=function(){var I=[],U=this.j;U&&I.push(vr(U,Rc,!0),":");var Y=this.g;return(Y||U=="file")&&(I.push("//"),(U=this.o)&&I.push(vr(U,Rc,!0),"@"),I.push(encodeURIComponent(String(Y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Y=this.s,Y!=null&&I.push(":",String(Y))),(Y=this.l)&&(this.g&&Y.charAt(0)!="/"&&I.push("/"),I.push(vr(Y,Y.charAt(0)=="/"?sy:kd,!0))),(Y=this.i.toString())&&I.push("?",Y),(Y=this.m)&&I.push("#",vr(Y,ib)),I.join("")};function ut(I){return new at(I)}function vt(I,U,Y){I.j=Y?Hr(U,!0):U,I.j&&(I.j=I.j.replace(/:$/,""))}function Lt(I,U){if(U){if(U=Number(U),isNaN(U)||0>U)throw Error("Bad port number "+U);I.s=U}else I.s=null}function $n(I,U,Y){U instanceof Fu?(I.i=U,ob(I.i,I.h)):(Y||(U=vr(U,ip)),I.i=new Fu(U,I.h))}function Kt(I,U,Y){I.i.set(U,Y)}function er(I){return Kt(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function Hr(I,U){return I?U?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function vr(I,U,Y){return typeof I=="string"?(I=encodeURI(I).replace(U,Io),Y&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function Io(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var Rc=/[#\/\?@]/g,kd=/[#\?:]/g,sy=/[#\?]/g,ip=/[#\?@]/g,ib=/#/g;function Fu(I,U){this.h=this.g=null,this.i=I||null,this.j=!!U}function Ka(I){I.g||(I.g=new Map,I.h=0,I.i&&it(I.i,function(U,Y){I.add(decodeURIComponent(U.replace(/\+/g," ")),Y)}))}e=Fu.prototype,e.add=function(I,U){Ka(this),this.i=null,I=Pd(this,I);var Y=this.g.get(I);return Y||this.g.set(I,Y=[]),Y.push(U),this.h+=1,this};function Rd(I,U){Ka(I),U=Pd(I,U),I.g.has(U)&&(I.i=null,I.h-=I.g.get(U).length,I.g.delete(U))}function oy(I,U){return Ka(I),U=Pd(I,U),I.g.has(U)}e.forEach=function(I,U){Ka(this),this.g.forEach(function(Y,ne){Y.forEach(function(Pe){I.call(U,Pe,ne,this)},this)},this)},e.na=function(){Ka(this);const I=Array.from(this.g.values()),U=Array.from(this.g.keys()),Y=[];for(let ne=0;ne<U.length;ne++){const Pe=I[ne];for(let Ve=0;Ve<Pe.length;Ve++)Y.push(U[ne])}return Y},e.V=function(I){Ka(this);let U=[];if(typeof I=="string")oy(this,I)&&(U=U.concat(this.g.get(Pd(this,I))));else{I=Array.from(this.g.values());for(let Y=0;Y<I.length;Y++)U=U.concat(I[Y])}return U},e.set=function(I,U){return Ka(this),this.i=null,I=Pd(this,I),oy(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[U]),this.h+=1,this},e.get=function(I,U){return I?(I=this.V(I),0<I.length?String(I[0]):U):U};function sb(I,U,Y){Rd(I,U),0<Y.length&&(I.i=null,I.g.set(Pd(I,U),m(Y)),I.h+=Y.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],U=Array.from(this.g.keys());for(var Y=0;Y<U.length;Y++){var ne=U[Y];const Ve=encodeURIComponent(String(ne)),At=this.V(ne);for(ne=0;ne<At.length;ne++){var Pe=Ve;At[ne]!==""&&(Pe+="="+encodeURIComponent(String(At[ne]))),I.push(Pe)}}return this.i=I.join("&")};function Pd(I,U){return U=String(U),I.j&&(U=U.toLowerCase()),U}function ob(I,U){U&&!I.j&&(Ka(I),I.i=null,I.g.forEach(function(Y,ne){var Pe=ne.toLowerCase();ne!=Pe&&(Rd(this,ne),sb(this,Pe,Y))},I)),I.j=U}function Sw(I,U){const Y=new Ri;if(a.Image){const ne=new Image;ne.onload=h(Zo,Y,"TestLoadImage: loaded",!0,U,ne),ne.onerror=h(Zo,Y,"TestLoadImage: error",!1,U,ne),ne.onabort=h(Zo,Y,"TestLoadImage: abort",!1,U,ne),ne.ontimeout=h(Zo,Y,"TestLoadImage: timeout",!1,U,ne),a.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=I}else U(!1)}function Dd(I,U){const Y=new Ri,ne=new AbortController,Pe=setTimeout(()=>{ne.abort(),Zo(Y,"TestPingServer: timeout",!1,U)},1e4);fetch(I,{signal:ne.signal}).then(Ve=>{clearTimeout(Pe),Ve.ok?Zo(Y,"TestPingServer: ok",!0,U):Zo(Y,"TestPingServer: server error",!1,U)}).catch(()=>{clearTimeout(Pe),Zo(Y,"TestPingServer: error",!1,U)})}function Zo(I,U,Y,ne,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),ne(Y)}catch{}}function FC(){this.g=new hr}function Cw(I,U,Y){const ne=Y||"";try{xe(I,function(Pe,Ve){let At=Pe;l(Pe)&&(At=Sn(Pe)),U.push(ne+Ve+"="+encodeURIComponent(At))})}catch(Pe){throw U.push(ne+"type="+encodeURIComponent("_badmap")),Pe}}function Ym(I){this.l=I.Ub||null,this.j=I.eb||!1}p(Ym,gr),Ym.prototype.g=function(){return new Km(this.l,this.j)},Ym.prototype.i=function(I){return function(){return I}}({});function Km(I,U){Ee.call(this),this.D=I,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Km,Ee),e=Km.prototype,e.open=function(I,U){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=U,this.readyState=1,Ir(this)},e.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const U={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(U.body=I),(this.D||a).fetch(new Request(this.A,U)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qr(this)),this.readyState=0},e.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Aw(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function Aw(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}e.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var U=I.value?I.value:new Uint8Array(0);(U=this.v.decode(U,{stream:!I.done}))&&(this.response=this.responseText+=U)}I.done?qr(this):Ir(this),this.readyState==3&&Aw(this)}},e.Ra=function(I){this.g&&(this.response=this.responseText=I,qr(this))},e.Qa=function(I){this.g&&(this.response=I,qr(this))},e.ga=function(){this.g&&qr(this)};function qr(I){I.readyState=4,I.l=null,I.j=null,I.v=null,Ir(I)}e.setRequestHeader=function(I,U){this.u.append(I,U)},e.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],U=this.h.entries();for(var Y=U.next();!Y.done;)Y=Y.value,I.push(Y[0]+": "+Y[1]),Y=U.next();return I.join(`\r
`)};function Ir(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(Km.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function Iw(I){let U="";return S(I,function(Y,ne){U+=ne,U+=":",U+=Y,U+=`\r
`}),U}function le(I,U,Y){e:{for(ne in Y){var ne=!1;break e}ne=!0}ne||(Y=Iw(Y),typeof I=="string"?Y!=null&&encodeURIComponent(String(Y)):Kt(I,U,Y))}function ye(I){Ee.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ye,Ee);var Be=/^https?$/i,Ht=["POST","PUT"];e=ye.prototype,e.Ha=function(I){this.J=I},e.ea=function(I,U,Y,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);U=U?U.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dn.g(),this.v=this.o?Qo(this.o):Qo(dn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(U,String(I),!0),this.B=!1}catch(Ve){ir(this,Ve);return}if(I=Y||"",Y=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var Pe in ne)Y.set(Pe,ne[Pe]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const Ve of ne.keys())Y.set(Ve,ne.get(Ve));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(Y.keys()).find(Ve=>Ve.toLowerCase()=="content-type"),Pe=a.FormData&&I instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ht,U,void 0))||ne||Pe||Y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ve,At]of Y)this.g.setRequestHeader(Ve,At);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ui(this),this.u=!0,this.g.send(I),this.u=!1}catch(Ve){ir(this,Ve)}};function ir(I,U){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=U,I.m=5,Wr(I),un(I)}function Wr(I){I.A||(I.A=!0,Oe(I,"complete"),Oe(I,"error"))}e.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,Oe(this,"complete"),Oe(this,"abort"),un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),ye.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?_i(this):this.bb())},e.bb=function(){_i(this)};function _i(I){if(I.h&&typeof o<"u"&&(!I.v[1]||wi(I)!=4||I.Z()!=2)){if(I.u&&wi(I)==4)xt(I.Ea,0,I);else if(Oe(I,"readystatechange"),wi(I)==4){I.h=!1;try{const At=I.Z();e:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var Y;if(!(Y=U)){var ne;if(ne=At===0){var Pe=String(I.D).match(qe)[1]||null;!Pe&&a.self&&a.self.location&&(Pe=a.self.location.protocol.slice(0,-1)),ne=!Be.test(Pe?Pe.toLowerCase():"")}Y=ne}if(Y)Oe(I,"complete"),Oe(I,"success");else{I.m=6;try{var Ve=2<wi(I)?I.g.statusText:""}catch{Ve=""}I.l=Ve+" ["+I.Z()+"]",Wr(I)}}finally{un(I)}}}}function un(I,U){if(I.g){ui(I);const Y=I.g,ne=I.v[0]?()=>{}:null;I.g=null,I.v=null,U||Oe(I,"ready");try{Y.onreadystatechange=ne}catch{}}}function ui(I){I.I&&(a.clearTimeout(I.I),I.I=null)}e.isActive=function(){return!!this.g};function wi(I){return I.g?I.g.readyState:0}e.Z=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(I){if(this.g){var U=this.g.responseText;return I&&U.indexOf(I)==0&&(U=U.substring(I.length)),zn(U)}};function ko(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function Nd(I){const U={};I=(I.g&&2<=wi(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<I.length;ne++){if(v(I[ne]))continue;var Y=N(I[ne]);const Pe=Y[0];if(Y=Y[1],typeof Y!="string")continue;Y=Y.trim();const Ve=U[Pe]||[];U[Pe]=Ve,Ve.push(Y)}C(U,function(ne){return ne.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(I,U,Y){return Y&&Y.internalChannelParams&&Y.internalChannelParams[I]||U}function Xm(I){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,I),this.cb=Os("retryDelaySeedMs",1e4,I),this.Wa=Os("forwardChannelMaxRetries",2,I),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new Ea(I&&I.concurrentRequestLimit),this.Da=new FC,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Xm.prototype,e.la=8,e.G=1,e.connect=function(I,U,Y,ne){mi(0),this.W=I,this.H=U||{},Y&&ne!==void 0&&(this.H.OSID=Y,this.H.OAID=ne),this.F=this.X,this.I=Rw(this,null,this.W),ub(this)};function Qm(I){if(BC(I),I.G==3){var U=I.U++,Y=ut(I.I);if(Kt(Y,"SID",I.K),Kt(Y,"RID",U),Kt(Y,"TYPE","terminate"),lb(I,Y),U=new ur(I,I.j,U),U.L=2,U.v=er(ut(Y)),Y=!1,a.navigator&&a.navigator.sendBeacon)try{Y=a.navigator.sendBeacon(U.v.toString(),"")}catch{}!Y&&a.Image&&(new Image().src=U.v,Y=!0),Y||(U.g=VD(U.j,null),U.g.ea(U.v)),U.F=Date.now(),Pi(U)}zD(I)}function ab(I){I.g&&(Cf(I),I.g.cancel(),I.g=null)}function BC(I){ab(I),I.u&&(a.clearTimeout(I.u),I.u=null),ay(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&a.clearTimeout(I.s),I.s=null)}function ub(I){if(!yo(I.h)&&!I.s){I.s=!0;var U=I.Ga;G||F(),K||(G(),K=!0),J.add(U,I),I.B=0}}function jD(I,U){return Cl(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=U.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=oi(d(I.Ga,I,U),Od(I,I.B)),I.B++,!0)}e.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const Pe=new ur(this,this.j,I);let Ve=this.o;if(this.S&&(Ve?(Ve=A(Ve),k(Ve,this.S)):Ve=this.S),this.m!==null||this.O||(Pe.H=Ve,Ve=null),this.P)e:{for(var U=0,Y=0;Y<this.i.length;Y++){t:{var ne=this.i[Y];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(U+=ne,4096<U){U=Y;break e}if(U===4096||Y===this.i.length-1){U=Y+1;break e}}U=1e3}else U=1e3;U=Bu(this,Pe,U),Y=ut(this.I),Kt(Y,"RID",I),Kt(Y,"CVER",22),this.D&&Kt(Y,"X-HTTP-Session-Id",this.D),lb(this,Y),Ve&&(this.O?U="headers="+encodeURIComponent(String(Iw(Ve)))+"&"+U:this.m&&le(Y,this.m,Ve)),ee(this.h,Pe),this.Ua&&Kt(Y,"TYPE","init"),this.P?(Kt(Y,"$req",U),Kt(Y,"SID","null"),Pe.T=!0,an(Pe,Y,null)):an(Pe,Y,U),this.G=2}}else this.G==3&&(I?Xa(this,I):this.i.length==0||yo(this.h)||Xa(this))};function Xa(I,U){var Y;U?Y=U.l:Y=I.U++;const ne=ut(I.I);Kt(ne,"SID",I.K),Kt(ne,"RID",Y),Kt(ne,"AID",I.T),lb(I,ne),I.m&&I.o&&le(ne,I.m,I.o),Y=new ur(I,I.j,Y,I.B+1),I.m===null&&(Y.H=I.o),U&&(I.i=U.D.concat(I.i)),U=Bu(I,Y,1e3),Y.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),ee(I.h,Y),an(Y,ne,U)}function lb(I,U){I.H&&S(I.H,function(Y,ne){Kt(U,ne,Y)}),I.l&&xe({},function(Y,ne){Kt(U,ne,Y)})}function Bu(I,U,Y){Y=Math.min(I.i.length,Y);var ne=I.l?d(I.l.Na,I.l,I):null;e:{var Pe=I.i;let Ve=-1;for(;;){const At=["count="+Y];Ve==-1?0<Y?(Ve=Pe[0].g,At.push("ofs="+Ve)):Ve=0:At.push("ofs="+Ve);let li=!0;for(let Ro=0;Ro<Y;Ro++){let kr=Pe[Ro].g;const gi=Pe[Ro].map;if(kr-=Ve,0>kr)Ve=Math.max(0,Pe[Ro].g-100),li=!1;else try{Cw(gi,At,"req"+kr+"_")}catch{ne&&ne(gi)}}if(li){ne=At.join("&");break e}}}return I=I.i.splice(0,Y),U.D=I,ne}function UD(I){if(!I.g&&!I.u){I.Y=1;var U=I.Fa;G||F(),K||(G(),K=!0),J.add(U,I),I.v=0}}function kw(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=oi(d(I.Fa,I),Od(I,I.v)),I.v++,!0)}e.Fa=function(){if(this.u=null,cb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=oi(d(this.ab,this),I)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mi(10),ab(this),cb(this))};function Cf(I){I.A!=null&&(a.clearTimeout(I.A),I.A=null)}function cb(I){I.g=new ur(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var U=ut(I.qa);Kt(U,"RID","rpc"),Kt(U,"SID",I.K),Kt(U,"AID",I.T),Kt(U,"CI",I.F?"0":"1"),!I.F&&I.ja&&Kt(U,"TO",I.ja),Kt(U,"TYPE","xmlhttp"),lb(I,U),I.m&&I.o&&le(U,I.m,I.o),I.L&&(I.g.I=I.L);var Y=I.g;I=I.ia,Y.L=1,Y.v=er(ut(U)),Y.m=null,Y.P=!0,Ar(Y,I)}e.Za=function(){this.C!=null&&(this.C=null,ab(this),kw(this),mi(19))};function ay(I){I.C!=null&&(a.clearTimeout(I.C),I.C=null)}function zi(I,U){var Y=null;if(I.g==U){ay(I),Cf(I),I.g=null;var ne=2}else if(Sf(I.h,U))Y=U.D,pe(I.h,U),ne=1;else return;if(I.G!=0){if(U.o)if(ne==1){Y=U.m?U.m.length:0,U=Date.now()-U.F;var Pe=I.B;ne=Jo(),Oe(ne,new Qs(ne,Y)),ub(I)}else UD(I);else if(Pe=U.s,Pe==3||Pe==0&&0<U.X||!(ne==1&&jD(I,U)||ne==2&&kw(I)))switch(Y&&0<Y.length&&(U=I.h,U.i=U.i.concat(Y)),Pe){case 1:$d(I,5);break;case 4:$d(I,10);break;case 3:$d(I,6);break;default:$d(I,2)}}}function Od(I,U){let Y=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(Y*=2),Y*U}function $d(I,U){if(I.j.info("Error code "+U),U==2){var Y=d(I.fb,I),ne=I.Xa;const Pe=!ne;ne=new at(ne||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vt(ne,"https"),er(ne),Pe?Sw(ne.toString(),Y):Dd(ne.toString(),Y)}else mi(2);I.G=0,I.l&&I.l.sa(U),zD(I),BC(I)}e.fb=function(I){I?(this.j.info("Successfully pinged google.com"),mi(2)):(this.j.info("Failed to ping google.com"),mi(1))};function zD(I){if(I.G=0,I.ka=[],I.l){const U=oe(I.h);(U.length!=0||I.i.length!=0)&&(g(I.ka,U),g(I.ka,I.i),I.h.i.length=0,m(I.i),I.i.length=0),I.l.ra()}}function Rw(I,U,Y){var ne=Y instanceof at?ut(Y):new at(Y);if(ne.g!="")U&&(ne.g=U+"."+ne.g),Lt(ne,ne.s);else{var Pe=a.location;ne=Pe.protocol,U=U?U+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;var Ve=new at(null);ne&&vt(Ve,ne),U&&(Ve.g=U),Pe&&Lt(Ve,Pe),Y&&(Ve.l=Y),ne=Ve}return Y=I.D,U=I.ya,Y&&U&&Kt(ne,Y,U),Kt(ne,"VER",I.la),lb(I,ne),ne}function VD(I,U,Y){if(U&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return U=I.Ca&&!I.pa?new ye(new Ym({eb:Y})):new ye(I.pa),U.Ha(I.J),U}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function HD(){}e=HD.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Pw(){}Pw.prototype.g=function(I,U){return new Qa(I,U)};function Qa(I,U){Ee.call(this),this.g=new Xm(U),this.l=I,this.h=U&&U.messageUrlParams||null,I=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(I?I["X-WebChannel-Content-Type"]=U.messageContentType:I={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.va&&(I?I["X-WebChannel-Client-Profile"]=U.va:I={"X-WebChannel-Client-Profile":U.va}),this.g.S=I,(I=U&&U.Sb)&&!v(I)&&(this.g.m=I),this.v=U&&U.supportsCrossDomainXhr||!1,this.u=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!v(U)&&(this.g.D=U,I=this.h,I!==null&&U in I&&(I=this.h,U in I&&delete I[U])),this.j=new uy(this)}p(Qa,Ee),Qa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qa.prototype.close=function(){Qm(this.g)},Qa.prototype.o=function(I){var U=this.g;if(typeof I=="string"){var Y={};Y.__data__=I,I=Y}else this.u&&(Y={},Y.__data__=Sn(I),I=Y);U.i.push(new Ao(U.Ya++,I)),U.G==3&&ub(U)},Qa.prototype.N=function(){this.g.l=null,delete this.j,Qm(this.g),delete this.g,Qa.aa.N.call(this)};function fb(I){Ns.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var U=I.__sm__;if(U){e:{for(const Y in U){I=Y;break e}I=void 0}(this.i=I)&&(I=this.i,U=U!==null&&I in U?U[I]:void 0),this.data=U}else this.data=I}p(fb,Ns);function Jm(){Vr.call(this),this.status=1}p(Jm,Vr);function uy(I){this.g=I}p(uy,HD),uy.prototype.ua=function(){Oe(this.g,"a")},uy.prototype.ta=function(I){Oe(this.g,new fb(I))},uy.prototype.sa=function(I){Oe(this.g,new Jm)},uy.prototype.ra=function(){Oe(this.g,"b")},Pw.prototype.createWebChannel=Pw.prototype.g,Qa.prototype.send=Qa.prototype.o,Qa.prototype.open=Qa.prototype.m,Qa.prototype.close=Qa.prototype.close,jze=function(){return new Pw},Bze=function(){return Jo()},Fze=ps,tX={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,j6=_t,Ut.COMPLETE="complete",Mze=Ut,ts.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,HI=ts,Lze=Ym,ye.prototype.listenOnce=ye.prototype.L,ye.prototype.getLastError=ye.prototype.Ka,ye.prototype.getLastErrorCode=ye.prototype.Ba,ye.prototype.getStatus=ye.prototype.Z,ye.prototype.getResponseJson=ye.prototype.Oa,ye.prototype.getResponseText=ye.prototype.oa,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Ha,$ze=ye}).apply(typeof h4<"u"?h4:typeof self<"u"?self:typeof window<"u"?window:{});const Twe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Fl.UNAUTHENTICATED=new Fl(null),Fl.GOOGLE_CREDENTIALS=new Fl("google-credentials-uid"),Fl.FIRST_PARTY=new Fl("first-party-uid"),Fl.MOCK_USER=new Fl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OC="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new M9("@firebase/firestore");function JA(){return D_.logLevel}function Yt(e,...t){if(D_.logLevel<=Nr.DEBUG){const n=t.map(wue);D_.debug(`Firestore (${OC}): ${e}`,...n)}}function Ng(e,...t){if(D_.logLevel<=Nr.ERROR){const n=t.map(wue);D_.error(`Firestore (${OC}): ${e}`,...n)}}function R3(e,...t){if(D_.logLevel<=Nr.WARN){const n=t.map(wue);D_.warn(`Firestore (${OC}): ${e}`,...n)}}function wue(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(e="Unexpected state"){const t=`FIRESTORE (${OC}) INTERNAL ASSERTION FAILED: `+e;throw Ng(t),new Error(t)}function Ji(e,t){e||Pn()}function jn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mt extends Gm{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _yn{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wyn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Fl.UNAUTHENTICATED))}shutdown(){}}class Eyn{constructor(t){this.t=t,this.currentUser=Fl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new og;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new og,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new og)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ji(typeof r.accessToken=="string"),new _yn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ji(t===null||typeof t=="string"),new Fl(t)}}class Tyn{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Fl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Syn{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Tyn(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Fl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cyn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ayn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Yt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ji(typeof n.token=="string"),this.R=n.token,new Cyn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iyn(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uze{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Iyn(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function fi(e,t){return e<t?-1:e>t?1:0}function lS(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ho.fromMillis(Date.now())}static fromDate(t){return Ho.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ho(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fi(this.nanoseconds,t.nanoseconds):fi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bn(t)}static min(){return new Bn(new Ho(0,0))}static max(){return new Bn(new Ho(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(t,n,r){n===void 0?n=0:n>t.length&&Pn(),r===void 0?r=t.length-n:r>t.length-n&&Pn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return P3.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof P3?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class cs extends P3{construct(t,n,r){return new cs(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Mt(nt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new cs(n)}static emptyPath(){return new cs([])}}const kyn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $a extends P3{construct(t,n,r){return new $a(t,n,r)}static isValidIdentifier(t){return kyn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$a.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $a(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Mt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Mt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Mt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Mt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $a(n)}static emptyPath(){return new $a([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.path=t}static fromPath(t){return new cn(cs.fromString(t))}static fromName(t){return new cn(cs.fromString(t).popFirst(5))}static empty(){return new cn(cs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&cs.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return cs.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new cn(new cs(t.slice()))}}function Ryn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Bn.fromTimestamp(r===1e9?new Ho(n+1,0):new Ho(n,r));return new bv(i,cn.empty(),t)}function Pyn(e){return new bv(e.readTime,e.key,-1)}class bv{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new bv(Bn.min(),cn.empty(),-1)}static max(){return new bv(Bn.max(),cn.empty(),-1)}}function Dyn(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=cn.comparator(e.documentKey,t.documentKey),n!==0?n:fi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nyn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Oyn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(e){if(e.code!==nt.FAILED_PRECONDITION||e.message!==Nyn)throw e;Yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(i=>i?dt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new dt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function $yn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function RD(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Eue.oe=-1;function H9(e){return e==null}function CM(e){return e===0&&1/e==-1/0}function Lyn(e){return typeof e=="number"&&Number.isInteger(e)&&!CM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Swe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _w(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zze(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,n){this.comparator=t,this.root=n||Na.EMPTY}insert(t,n){return new Ds(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Na.BLACK,null,null))}remove(t){return new Ds(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Na.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new p4(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new p4(this.root,t,this.comparator,!1)}getReverseIterator(){return new p4(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new p4(this.root,t,this.comparator,!0)}}class p4{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Na{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Na.RED,this.left=i??Na.EMPTY,this.right=s??Na.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Na(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Na.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Na.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Na.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Na.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pn();const t=this.left.check();if(t!==this.right.check())throw Pn();return t+(this.isRed()?0:1)}}Na.EMPTY=null,Na.RED=!0,Na.BLACK=!1;Na.EMPTY=new class{constructor(){this.size=0}get key(){throw Pn()}get value(){throw Pn()}get color(){throw Pn()}get left(){throw Pn()}get right(){throw Pn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Na(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t){this.comparator=t,this.data=new Ds(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cwe(this.data.getIterator())}getIteratorFrom(t){return new Cwe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof za)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new za(this.comparator);return n.data=t,n}}class Cwe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t){this.fields=t,t.sort($a.comparator)}static empty(){return new Zc([])}unionWith(t){let n=new za($a.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Zc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return lS(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vze extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vze("Invalid base64 string: "+s):s}}(t);return new Nu(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Nu(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Nu.EMPTY_BYTE_STRING=new Nu("");const Myn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xv(e){if(Ji(!!e),typeof e=="string"){let t=0;const n=Myn.exec(e);if(Ji(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_o(e.seconds),nanos:_o(e.nanos)}}function _o(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function N_(e){return typeof e=="string"?Nu.fromBase64String(e):Nu.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tue(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Sue(e){const t=e.mapValue.fields.__previous_value__;return Tue(t)?Sue(t):t}function D3(e){const t=xv(e.mapValue.fields.__local_write_time__.timestampValue);return new Ho(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fyn{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class N3{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new N3("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof N3&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function O_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tue(e)?4:Byn(e)?9007199254740991:10:Pn()}function Am(e,t){if(e===t)return!0;const n=O_(e);if(n!==O_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return D3(e).isEqual(D3(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xv(i.timestampValue),a=xv(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return N_(i.bytesValue).isEqual(N_(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return _o(i.geoPointValue.latitude)===_o(s.geoPointValue.latitude)&&_o(i.geoPointValue.longitude)===_o(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _o(i.integerValue)===_o(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_o(i.doubleValue),a=_o(s.doubleValue);return o===a?CM(o)===CM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return lS(e.arrayValue.values||[],t.arrayValue.values||[],Am);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Swe(o)!==Swe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Am(o[u],a[u])))return!1;return!0}(e,t);default:return Pn()}}function O3(e,t){return(e.values||[]).find(n=>Am(n,t))!==void 0}function cS(e,t){if(e===t)return 0;const n=O_(e),r=O_(t);if(n!==r)return fi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fi(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=_o(s.integerValue||s.doubleValue),u=_o(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Awe(e.timestampValue,t.timestampValue);case 4:return Awe(D3(e),D3(t));case 5:return fi(e.stringValue,t.stringValue);case 6:return function(s,o){const a=N_(s),u=N_(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=fi(a[l],u[l]);if(c!==0)return c}return fi(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=fi(_o(s.latitude),_o(o.latitude));return a!==0?a:fi(_o(s.longitude),_o(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=cS(a[l],u[l]);if(c)return c}return fi(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===m4.mapValue&&o===m4.mapValue)return 0;if(s===m4.mapValue)return 1;if(o===m4.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=fi(u[f],c[f]);if(d!==0)return d;const h=cS(a[u[f]],l[c[f]]);if(h!==0)return h}return fi(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Pn()}}function Awe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return fi(e,t);const n=xv(e),r=xv(t),i=fi(n.seconds,r.seconds);return i!==0?i:fi(n.nanos,r.nanos)}function fS(e){return nX(e)}function nX(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=xv(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return N_(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return cn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=nX(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${nX(n.fields[o])}`;return i+"}"}(e.mapValue):Pn()}function Iwe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function rX(e){return!!e&&"integerValue"in e}function Cue(e){return!!e&&"arrayValue"in e}function kwe(e){return!!e&&"nullValue"in e}function Rwe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function U6(e){return!!e&&"mapValue"in e}function Hk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return _w(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Hk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Hk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Byn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this.value=t}static empty(){return new Kl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!U6(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Hk(n)}setAll(t){let n=$a.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Hk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());U6(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Am(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];U6(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){_w(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Kl(Hk(this.value))}}function Hze(e){const t=[];return _w(e.fields,(n,r)=>{const i=new $a([n]);if(U6(r)){const s=Hze(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Zc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new gu(t,0,Bn.min(),Bn.min(),Bn.min(),Kl.empty(),0)}static newFoundDocument(t,n,r,i){return new gu(t,1,n,Bn.min(),r,i,0)}static newNoDocument(t,n){return new gu(t,2,n,Bn.min(),Bn.min(),Kl.empty(),0)}static newUnknownDocument(t,n){return new gu(t,3,n,Bn.min(),Bn.min(),Kl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Bn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Kl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Kl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof gu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(t,n){this.position=t,this.inclusive=n}}function Pwe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=cn.comparator(cn.fromName(o.referenceValue),n.key):r=cS(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dwe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Am(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(t,n="asc"){this.field=t,this.dir=n}}function jyn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qze{}class Eo extends qze{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new zyn(t,n,r):n==="array-contains"?new qyn(t,r):n==="in"?new Wyn(t,r):n==="not-in"?new Gyn(t,r):n==="array-contains-any"?new Yyn(t,r):new Eo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Vyn(t,r):new Hyn(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(cS(n,this.value)):n!==null&&O_(this.value)===O_(n)&&this.matchesComparison(cS(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Pn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Uh extends qze{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Uh(t,n)}matches(t){return Wze(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wze(e){return e.op==="and"}function Gze(e){return Uyn(e)&&Wze(e)}function Uyn(e){for(const t of e.filters)if(t instanceof Uh)return!1;return!0}function iX(e){if(e instanceof Eo)return e.field.canonicalString()+e.op.toString()+fS(e.value);if(Gze(e))return e.filters.map(t=>iX(t)).join(",");{const t=e.filters.map(n=>iX(n)).join(",");return`${e.op}(${t})`}}function Yze(e,t){return e instanceof Eo?function(r,i){return i instanceof Eo&&r.op===i.op&&r.field.isEqual(i.field)&&Am(r.value,i.value)}(e,t):e instanceof Uh?function(r,i){return i instanceof Uh&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Yze(o,i.filters[a]),!0):!1}(e,t):void Pn()}function Kze(e){return e instanceof Eo?function(n){return`${n.field.canonicalString()} ${n.op} ${fS(n.value)}`}(e):e instanceof Uh?function(n){return n.op.toString()+" {"+n.getFilters().map(Kze).join(" ,")+"}"}(e):"Filter"}class zyn extends Eo{constructor(t,n,r){super(t,n,r),this.key=cn.fromName(r.referenceValue)}matches(t){const n=cn.comparator(t.key,this.key);return this.matchesComparison(n)}}class Vyn extends Eo{constructor(t,n){super(t,"in",n),this.keys=Xze("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Hyn extends Eo{constructor(t,n){super(t,"not-in",n),this.keys=Xze("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Xze(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>cn.fromName(r.referenceValue))}class qyn extends Eo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Cue(n)&&O3(n.arrayValue,this.value)}}class Wyn extends Eo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&O3(this.value.arrayValue,n)}}class Gyn extends Eo{constructor(t,n){super(t,"not-in",n)}matches(t){if(O3(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!O3(this.value.arrayValue,n)}}class Yyn extends Eo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Cue(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>O3(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kyn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Nwe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Kyn(e,t,n,r,i,s,o)}function Aue(e){const t=jn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>iX(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),H9(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>fS(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>fS(r)).join(",")),t.ue=n}return t.ue}function Iue(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jyn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Yze(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Dwe(e.startAt,t.startAt)&&Dwe(e.endAt,t.endAt)}function sX(e){return cn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Xyn(e,t,n,r,i,s,o,a){return new $C(e,t,n,r,i,s,o,a)}function kue(e){return new $C(e)}function Owe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Qze(e){return e.collectionGroup!==null}function qk(e){const t=jn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new za($a.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new $3(s,r))}),n.has($a.keyField().canonicalString())||t.ce.push(new $3($a.keyField(),r))}return t.ce}function om(e){const t=jn(e);return t.le||(t.le=Qyn(t,qk(e))),t.le}function Qyn(e,t){if(e.limitType==="F")return Nwe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new $3(i.field,s)});const n=e.endAt?new AM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new AM(e.startAt.position,e.startAt.inclusive):null;return Nwe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function oX(e,t){const n=e.filters.concat([t]);return new $C(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function aX(e,t,n){return new $C(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function q9(e,t){return Iue(om(e),om(t))&&e.limitType===t.limitType}function Jze(e){return`${Aue(om(e))}|lt:${e.limitType}`}function PE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Kze(i)).join(", ")}]`),H9(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fS(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fS(i)).join(",")),`Target(${r})`}(om(e))}; limitType=${e.limitType})`}function W9(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):cn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of qk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Pwe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,qk(r),i)||r.endAt&&!function(o,a,u){const l=Pwe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,qk(r),i))}(e,t)}function Jyn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zze(e){return(t,n)=>{let r=!1;for(const i of qk(e)){const s=Zyn(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Zyn(e,t,n){const r=e.field.isKeyField()?cn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?cS(u,l):Pn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Pn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){_w(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return zze(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1n=new Ds(cn.comparator);function Og(){return e1n}const eVe=new Ds(cn.comparator);function qI(...e){let t=eVe;for(const n of e)t=t.insert(n.key,n);return t}function tVe(e){let t=eVe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function kx(){return Wk()}function nVe(){return Wk()}function Wk(){return new LC(e=>e.toString(),(e,t)=>e.isEqual(t))}const t1n=new Ds(cn.comparator),n1n=new za(cn.comparator);function _r(...e){let t=n1n;for(const n of e)t=t.add(n);return t}const r1n=new za(fi);function i1n(){return r1n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rVe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:CM(t)?"-0":t}}function iVe(e){return{integerValue:""+e}}function s1n(e,t){return Lyn(t)?iVe(t):rVe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(){this._=void 0}}function o1n(e,t,n){return e instanceof L3?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tue(s)&&(s=Sue(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof M3?oVe(e,t):e instanceof F3?aVe(e,t):function(i,s){const o=sVe(i,s),a=$we(o)+$we(i.Pe);return rX(o)&&rX(i.Pe)?iVe(a):rVe(i.serializer,a)}(e,t)}function a1n(e,t,n){return e instanceof M3?oVe(e,t):e instanceof F3?aVe(e,t):n}function sVe(e,t){return e instanceof IM?function(r){return rX(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class L3 extends G9{}class M3 extends G9{constructor(t){super(),this.elements=t}}function oVe(e,t){const n=uVe(t);for(const r of e.elements)n.some(i=>Am(i,r))||n.push(r);return{arrayValue:{values:n}}}class F3 extends G9{constructor(t){super(),this.elements=t}}function aVe(e,t){let n=uVe(t);for(const r of e.elements)n=n.filter(i=>!Am(i,r));return{arrayValue:{values:n}}}class IM extends G9{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function $we(e){return _o(e.integerValue||e.doubleValue)}function uVe(e){return Cue(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1n{constructor(t,n){this.field=t,this.transform=n}}function l1n(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof M3&&i instanceof M3||r instanceof F3&&i instanceof F3?lS(r.elements,i.elements,Am):r instanceof IM&&i instanceof IM?Am(r.Pe,i.Pe):r instanceof L3&&i instanceof L3}(e.transform,t.transform)}class c1n{constructor(t,n){this.version=t,this.transformResults=n}}class of{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new of}static exists(t){return new of(void 0,t)}static updateTime(t){return new of(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function z6(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Y9{}function lVe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Rue(e.key,of.none()):new PD(e.key,e.data,of.none());{const n=e.data,r=Kl.empty();let i=new za($a.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new rb(e.key,r,new Zc(i.toArray()),of.none())}}function f1n(e,t,n){e instanceof PD?function(i,s,o){const a=i.value.clone(),u=Mwe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof rb?function(i,s,o){if(!z6(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Mwe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(cVe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Gk(e,t,n,r){return e instanceof PD?function(s,o,a,u){if(!z6(s.precondition,o))return a;const l=s.value.clone(),c=Fwe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof rb?function(s,o,a,u){if(!z6(s.precondition,o))return a;const l=Fwe(s.fieldTransforms,u,o),c=o.data;return c.setAll(cVe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return z6(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function d1n(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=sVe(r.transform,i||null);s!=null&&(n===null&&(n=Kl.empty()),n.set(r.field,s))}return n||null}function Lwe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lS(r,i,(s,o)=>l1n(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class PD extends Y9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class rb extends Y9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cVe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Mwe(e,t,n){const r=new Map;Ji(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,a1n(o,a,n[i]))}return r}function Fwe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,o1n(s,o,t))}return r}class Rue extends Y9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h1n extends Y9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1n{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&f1n(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Gk(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Gk(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=nVe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=lVe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Bn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),_r())}isEqual(t){return this.batchId===t.batchId&&lS(this.mutations,t.mutations,(n,r)=>Lwe(n,r))&&lS(this.baseMutations,t.baseMutations,(n,r)=>Lwe(n,r))}}class Pue{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Ji(t.mutations.length===r.length);let i=function(){return t1n}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Pue(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1n{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1n{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bo,jr;function y1n(e){switch(e){default:return Pn();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function fVe(e){if(e===void 0)return Ng("GRPC error has no .code"),nt.UNKNOWN;switch(e){case bo.OK:return nt.OK;case bo.CANCELLED:return nt.CANCELLED;case bo.UNKNOWN:return nt.UNKNOWN;case bo.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case bo.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case bo.INTERNAL:return nt.INTERNAL;case bo.UNAVAILABLE:return nt.UNAVAILABLE;case bo.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case bo.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case bo.NOT_FOUND:return nt.NOT_FOUND;case bo.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case bo.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case bo.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case bo.ABORTED:return nt.ABORTED;case bo.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case bo.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case bo.DATA_LOSS:return nt.DATA_LOSS;default:return Pn()}}(jr=bo||(bo={}))[jr.OK=0]="OK",jr[jr.CANCELLED=1]="CANCELLED",jr[jr.UNKNOWN=2]="UNKNOWN",jr[jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jr[jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jr[jr.NOT_FOUND=5]="NOT_FOUND",jr[jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",jr[jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",jr[jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",jr[jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jr[jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jr[jr.ABORTED=10]="ABORTED",jr[jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",jr[jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",jr[jr.INTERNAL=13]="INTERNAL",jr[jr.UNAVAILABLE=14]="UNAVAILABLE",jr[jr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1n(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1n=new Hx([4294967295,4294967295],0);function Bwe(e){const t=v1n().encode(e),n=new Oze;return n.update(t),new Uint8Array(n.digest())}function jwe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Hx([n,r],0),new Hx([i,s],0)]}class Due{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new WI(`Invalid padding: ${n}`);if(r<0)throw new WI(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new WI(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new WI(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Hx.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Hx.fromNumber(r)));return i.compare(b1n)===1&&(i=new Hx([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Bwe(t),[r,i]=jwe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Due(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Bwe(t),[r,i]=jwe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class WI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,DD.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new K9(Bn.min(),i,new Ds(fi),Og(),_r())}}class DD{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new DD(r,n,_r(),_r(),_r())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class dVe{constructor(t,n){this.targetId=t,this.me=n}}class hVe{constructor(t,n,r=Nu.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Uwe{constructor(){this.fe=0,this.ge=Vwe(),this.pe=Nu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=_r(),n=_r(),r=_r();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pn()}}),new DD(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Vwe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ji(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class x1n{constructor(t){this.Le=t,this.Be=new Map,this.ke=Og(),this.qe=zwe(),this.Qe=new Ds(fi)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Pn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(sX(s))if(r===0){const o=new cn(s.path);this.Ue(n,o,gu.newNoDocument(o,Bn.min()))}else Ji(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=N_(r).toUint8Array()}catch(u){if(u instanceof Vze)return R3("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Due(o,i,s)}catch(u){return R3(u instanceof WI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&sX(a.target)){const u=new cn(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,gu.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=_r();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new K9(t,n,this.Qe,this.ke,r);return this.ke=Og(),this.qe=zwe(),this.Qe=new Ds(fi),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Uwe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new za(fi),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Yt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Uwe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function zwe(){return new Ds(cn.comparator)}function Vwe(){return new Ds(cn.comparator)}const _1n={asc:"ASCENDING",desc:"DESCENDING"},w1n={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E1n={and:"AND",or:"OR"};class T1n{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function uX(e,t){return e.useProto3Json||H9(t)?t:{value:t}}function kM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pVe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function S1n(e,t){return kM(e,t.toTimestamp())}function am(e){return Ji(!!e),Bn.fromTimestamp(function(n){const r=xv(n);return new Ho(r.seconds,r.nanos)}(e))}function Nue(e,t){return lX(e,t).canonicalString()}function lX(e,t){const n=function(i){return new cs(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function mVe(e){const t=cs.fromString(e);return Ji(xVe(t)),t}function cX(e,t){return Nue(e.databaseId,t.path)}function EH(e,t){const n=mVe(t);if(n.get(1)!==e.databaseId.projectId)throw new Mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cn(yVe(n))}function gVe(e,t){return Nue(e.databaseId,t)}function C1n(e){const t=mVe(e);return t.length===4?cs.emptyPath():yVe(t)}function fX(e){return new cs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yVe(e){return Ji(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Hwe(e,t,n){return{name:cX(e,t),fields:n.value.mapValue.fields}}function A1n(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Pn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Ji(c===void 0||typeof c=="string"),Nu.fromBase64String(c||"")):(Ji(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Nu.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?nt.UNKNOWN:fVe(l.code);return new Mt(c,l.message||"")}(o);n=new hVe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=EH(e,r.document.name),s=am(r.document.updateTime),o=r.document.createTime?am(r.document.createTime):Bn.min(),a=new Kl({mapValue:{fields:r.document.fields}}),u=gu.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new V6(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=EH(e,r.document),s=r.readTime?am(r.readTime):Bn.min(),o=gu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new V6([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=EH(e,r.document),s=r.removedTargetIds||[];n=new V6([],s,i,null)}else{if(!("filter"in t))return Pn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new g1n(i,s),a=r.targetId;n=new dVe(a,o)}}return n}function I1n(e,t){let n;if(t instanceof PD)n={update:Hwe(e,t.key,t.value)};else if(t instanceof Rue)n={delete:cX(e,t.key)};else if(t instanceof rb)n={update:Hwe(e,t.key,t.data),updateMask:M1n(t.fieldMask)};else{if(!(t instanceof h1n))return Pn();n={verify:cX(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof L3)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof M3)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof F3)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof IM)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Pn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:S1n(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pn()}(e,t.precondition)),n}function k1n(e,t){return e&&e.length>0?(Ji(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?am(i.updateTime):am(s);return o.isEqual(Bn.min())&&(o=am(s)),new c1n(o,i.transformResults||[])}(n,t))):[]}function R1n(e,t){return{documents:[gVe(e,t.path)]}}function P1n(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gVe(e,i);const s=function(l){if(l.length!==0)return bVe(Uh.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:DE(d.field),direction:O1n(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=uX(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function D1n(e){let t=C1n(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ji(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=vVe(f);return d instanceof Uh&&Gze(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new $3(NE(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,H9(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new AM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new AM(h,d)}(n.endAt)),Xyn(t,i,o,s,a,"F",u,l)}function N1n(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function vVe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=NE(n.unaryFilter.field);return Eo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=NE(n.unaryFilter.field);return Eo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=NE(n.unaryFilter.field);return Eo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=NE(n.unaryFilter.field);return Eo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pn()}}(e):e.fieldFilter!==void 0?function(n){return Eo.create(NE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Uh.create(n.compositeFilter.filters.map(r=>vVe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pn()}}(n.compositeFilter.op))}(e):Pn()}function O1n(e){return _1n[e]}function $1n(e){return w1n[e]}function L1n(e){return E1n[e]}function DE(e){return{fieldPath:e.canonicalString()}}function NE(e){return $a.fromServerFormat(e.fieldPath)}function bVe(e){return e instanceof Eo?function(n){if(n.op==="=="){if(Rwe(n.value))return{unaryFilter:{field:DE(n.field),op:"IS_NAN"}};if(kwe(n.value))return{unaryFilter:{field:DE(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rwe(n.value))return{unaryFilter:{field:DE(n.field),op:"IS_NOT_NAN"}};if(kwe(n.value))return{unaryFilter:{field:DE(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:DE(n.field),op:$1n(n.op),value:n.value}}}(e):e instanceof Uh?function(n){const r=n.getFilters().map(i=>bVe(i));return r.length===1?r[0]:{compositeFilter:{op:L1n(n.op),filters:r}}}(e):Pn()}function M1n(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function xVe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(t,n,r,i,s=Bn.min(),o=Bn.min(),a=Nu.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new c1(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new c1(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new c1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new c1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1n{constructor(t){this.ct=t}}function B1n(e){const t=D1n({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?aX(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1n{constructor(){this._n=new U1n}addToCollectionParentIndex(t,n){return this._n.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(bv.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(bv.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class U1n{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new za(cs.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new za(cs.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new dS(0)}static Ln(){return new dS(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1n{constructor(){this.changes=new LC(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,gu.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1n{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1n{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Gk(r.mutation,i,Zc.empty(),Ho.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,_r()).next(()=>r))}getLocalViewOfDocuments(t,n,r=_r()){const i=kx();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=qI();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=kx();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,_r()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Og();const o=Wk(),a=function(){return Wk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof rb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),Gk(c.mutation,l,c.mutation.getFieldMask(),Ho.now())):o.set(l.key,Zc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new V1n(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Wk();let i=new Ds((o,a)=>o-a),s=_r();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Zc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||_r()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=nVe();c.forEach(d=>{if(!s.has(d)){const h=lVe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return dt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return cn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Qze(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):dt.resolve(kx());let a=-1,u=s;return o.next(l=>dt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?dt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,_r())).next(c=>({batchId:a,changes:tVe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new cn(n)).next(r=>{let i=qI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=qI();return this.indexManager.getCollectionParents(t,s).next(a=>dt.forEach(a,u=>{const l=function(f,d){return new $C(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,gu.newInvalidDocument(c)))});let a=qI();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&Gk(c.mutation,l,Zc.empty(),Ho.now()),W9(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1n{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return dt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:am(i.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:B1n(i.bundledQuery),readTime:am(i.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1n{constructor(){this.overlays=new Ds(cn.comparator),this.hr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=kx();return dt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const i=kx(),s=n.length+1,o=new cn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return dt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ds((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=kx(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=kx(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return dt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new m1n(n,r));let s=this.hr.get(n);s===void 0&&(s=_r(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oue{constructor(){this.Pr=new za(ia.Ir),this.Tr=new za(ia.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new ia(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new ia(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new cn(new cs([])),r=new ia(n,t),i=new ia(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new cn(new cs([])),r=new ia(n,t),i=new ia(n,t+1);let s=_r();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ia(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ia{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return cn.comparator(t.key,n.key)||fi(t.pr,n.pr)}static Er(t,n){return fi(t.pr,n.pr)||cn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1n{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new za(ia.Ir)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new p1n(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new ia(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return dt.resolve(o)}lookupMutationBatch(t,n){return dt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ia(n,0),i=new ia(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new za(fi);return n.forEach(i=>{const s=new ia(i,0),o=new ia(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),dt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;cn.isDocumentKey(s)||(s=s.child(""));const o=new ia(new cn(s),0);let a=new za(fi);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),dt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Ji(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return dt.forEach(n.mutations,i=>{const s=new ia(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new ia(n,0),i=this.wr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1n{constructor(t){this.vr=t,this.docs=function(){return new Ds(cn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():gu.newInvalidDocument(n))}getEntries(t,n){let r=Og();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gu.newInvalidDocument(i))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Og();const o=n.path,a=new cn(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Dyn(Pyn(c),r)<=0||(i.has(c.key)||W9(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return dt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Pn()}Fr(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new K1n(this)}getSize(t){return dt.resolve(this.size)}}class K1n extends z1n{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1n{constructor(t){this.persistence=t,this.Mr=new LC(n=>Aue(n),Iue),this.lastRemoteSnapshotVersion=Bn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Oue,this.targetCount=0,this.Lr=dS.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),dt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new dS(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.qn(n),dt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),dt.waitFor(s).next(()=>i)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),dt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1n{constructor(t,n){this.Br={},this.overlays={},this.kr=new Eue(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new X1n(this),this.indexManager=new j1n,this.remoteDocumentCache=function(i){return new Y1n(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new F1n(n),this.$r=new q1n(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new W1n,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new G1n(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Yt("MemoryPersistence","Starting transaction:",t);const i=new J1n(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return dt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class J1n extends Oyn{constructor(t){super(),this.currentSequenceNumber=t}}class $ue{constructor(t){this.persistence=t,this.zr=new Oue,this.jr=null}static Hr(t){return new $ue(t)}get Jr(){if(this.jr)return this.jr;throw Pn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),dt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.Jr,r=>{const i=cn.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,Bn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return dt.or([()=>dt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lue{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=_r(),i=_r();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lue(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1n{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class evn{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ohn()?8:$yn(qa())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Z1n;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(JA()<=Nr.DEBUG&&Yt("QueryEngine","SDK will not create cache indexes for query:",PE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),dt.resolve()):(JA()<=Nr.DEBUG&&Yt("QueryEngine","Query:",PE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(JA()<=Nr.DEBUG&&Yt("QueryEngine","The SDK decides to create cache indexes for query:",PE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,om(n))):dt.resolve())}ji(t,n){if(Owe(n))return dt.resolve(null);let r=om(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=aX(n,null,"F"),r=om(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=_r(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,aX(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Owe(n)||i.isEqual(Bn.min())?dt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?dt.resolve(null):(JA()<=Nr.DEBUG&&Yt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),PE(n)),this.es(t,o,n,Ryn(i,-1)).next(a=>a))})}Zi(t,n){let r=new za(Zze(t));return n.forEach((i,s)=>{W9(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return JA()<=Nr.DEBUG&&Yt("QueryEngine","Using full collection scan to execute query:",PE(n)),this.zi.getDocumentsMatchingQuery(t,n,bv.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tvn{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Ds(fi),this.rs=new LC(s=>Aue(s),Iue),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new H1n(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function nvn(e,t,n,r){return new tvn(e,t,n,r)}async function _Ve(e,t){const n=jn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=_r();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function rvn(e,t){const n=jn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=dt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Ji(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=_r();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function wVe(e){const t=jn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function ivn(e,t){const n=jn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Nu.EMPTY_BYTE_STRING,Bn.min()).withLastLimboFreeSnapshotVersion(Bn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Og(),l=_r();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(svn(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(Bn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return dt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function svn(e,t,n){let r=_r(),i=_r();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Og();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Bn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Yt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function ovn(e,t){const n=jn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function avn(e,t){const n=jn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,dt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new c1(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function dX(e,t,n){const r=jn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!RD(o))throw o;Yt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function qwe(e,t,n){const r=jn(e);let i=Bn.min(),s=_r();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=jn(u),d=f.rs.get(c);return d!==void 0?dt.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,om(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:Bn.min(),n?s:_r())).next(a=>(uvn(r,Jyn(t),a),{documents:a,hs:s})))}function uvn(e,t,n){let r=e.ss.get(t)||Bn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Wwe{constructor(){this.activeTargetIds=i1n()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class lvn{constructor(){this.no=new Wwe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Wwe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cvn{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gwe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Yt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Yt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g4=null;function TH(){return g4===null?g4=function(){return 268435456+Math.round(2147483648*Math.random())}():g4++,"0x"+g4.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fvn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dvn{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="WebChannelConnection";class hvn extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=TH(),u=this.vo(n,r.toUriEncodedString());Yt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Yt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw R3("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+OC}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=fvn[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=TH();return new Promise((o,a)=>{const u=new $ze;u.setWithCredentials(!0),u.listenOnce(Mze.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case j6.NO_ERROR:const c=u.getResponseJson();Yt(au,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case j6.TIMEOUT:Yt(au,`RPC '${t}' ${s} timed out`),a(new Mt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case j6.HTTP_ERROR:const f=u.getStatus();if(Yt(au,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(y)>=0?y:nt.UNKNOWN}(h.status);a(new Mt(p,h.message))}else a(new Mt(nt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Mt(nt.UNAVAILABLE,"Connection failed."));break;default:Pn()}}finally{Yt(au,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Yt(au,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=TH(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=jze(),a=Bze(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Lze({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Yt(au,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new dvn({lo:g=>{h?Yt(au,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Yt(au,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Yt(au,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(_){setTimeout(()=>{throw _},0)}})};return m(f,HI.EventType.OPEN,()=>{h||(Yt(au,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,HI.EventType.CLOSE,()=>{h||(h=!0,Yt(au,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,HI.EventType.ERROR,g=>{h||(h=!0,R3(au,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Mt(nt.UNAVAILABLE,"The operation could not be completed")))}),m(f,HI.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Ji(!!v);const b=v,_=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(_){Yt(au,`RPC '${t}' stream ${i} received error:`,_);const E=_.status;let S=function(R){const k=bo[R];if(k!==void 0)return fVe(k)}(E),C=_.message;S===void 0&&(S=nt.INTERNAL,C="Unknown error status: "+E+" with message "+_.message),h=!0,p.po(new Mt(S,C)),f.close()}else Yt(au,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,Fze.STAT_EVENT,g=>{g.stat===tX.PROXY?Yt(au,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===tX.NOPROXY&&Yt(au,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function SH(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(e){return new T1n(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EVe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Yt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TVe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new EVe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(Ng(n.toString()),Ng("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Mt(nt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Yt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Yt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pvn extends TVe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=A1n(this.serializer,t),r=function(s){if(!("targetChange"in s))return Bn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Bn.min():o.readTime?am(o.readTime):Bn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=fX(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=sX(u)?{documents:R1n(s,u)}:{query:P1n(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pVe(s,o.resumeToken);const l=uX(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Bn.min())>0){a.readTime=kM(s,o.snapshotVersion.toTimestamp());const l=uX(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=N1n(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=fX(this.serializer),n.removeTarget=t,this.i_(n)}}class mvn extends TVe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Ji(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=k1n(t.writeResults,t.commitTime),r=am(t.commitTime);return this.listener.A_(r,n)}return Ji(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=fX(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>I1n(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gvn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,lX(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Mt(nt.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,lX(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Mt(nt.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class yvn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ng(n),this.y_=!1):Yt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vvn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{ww(this)&&(Yt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=jn(u);l.M_.add(4),await OD(l),l.N_.set("Unknown"),l.M_.delete(4),await ND(l)}(this))})}),this.N_=new yvn(r,i)}}async function ND(e){if(ww(e))for(const t of e.x_)await t(!0)}async function OD(e){for(const t of e.x_)await t(!1)}function SVe(e,t){const n=jn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),jue(n)?Bue(n):MC(n).Xo()&&Fue(n,t))}function Mue(e,t){const n=jn(e),r=MC(n);n.F_.delete(t),r.Xo()&&CVe(n,t),n.F_.size===0&&(r.Xo()?r.n_():ww(n)&&n.N_.set("Unknown"))}function Fue(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}MC(e).P_(t)}function CVe(e,t){e.L_.xe(t),MC(e).I_(t)}function Bue(e){e.L_=new x1n({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),MC(e).start(),e.N_.w_()}function jue(e){return ww(e)&&!MC(e).Zo()&&e.F_.size>0}function ww(e){return jn(e).M_.size===0}function AVe(e){e.L_=void 0}async function bvn(e){e.N_.set("Online")}async function xvn(e){e.F_.forEach((t,n)=>{Fue(e,t)})}async function _vn(e,t){AVe(e),jue(e)?(e.N_.D_(t),Bue(e)):e.N_.set("Unknown")}async function wvn(e,t,n){if(e.N_.set("Online"),t instanceof hVe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Yt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await RM(e,r)}else if(t instanceof V6?e.L_.Ke(t):t instanceof dVe?e.L_.He(t):e.L_.We(t),!n.isEqual(Bn.min()))try{const r=await wVe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Nu.EMPTY_BYTE_STRING,c.snapshotVersion)),CVe(s,u);const f=new c1(c.target,u,l,c.sequenceNumber);Fue(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Yt("RemoteStore","Failed to raise snapshot:",r),await RM(e,r)}}async function RM(e,t,n){if(!RD(t))throw t;e.M_.add(1),await OD(e),e.N_.set("Offline"),n||(n=()=>wVe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Yt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await ND(e)})}function IVe(e,t){return t().catch(n=>RM(e,n,t))}async function Q9(e){const t=jn(e),n=_v(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Evn(t);)try{const i=await ovn(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,Tvn(t,i)}catch(i){await RM(t,i)}kVe(t)&&RVe(t)}function Evn(e){return ww(e)&&e.v_.length<10}function Tvn(e,t){e.v_.push(t);const n=_v(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function kVe(e){return ww(e)&&!_v(e).Zo()&&e.v_.length>0}function RVe(e){_v(e).start()}async function Svn(e){_v(e).V_()}async function Cvn(e){const t=_v(e);for(const n of e.v_)t.d_(n.mutations)}async function Avn(e,t,n){const r=e.v_.shift(),i=Pue.from(r,t,n);await IVe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Q9(e)}async function Ivn(e,t){t&&_v(e).E_&&await async function(r,i){if(function(o){return y1n(o)&&o!==nt.ABORTED}(i.code)){const s=r.v_.shift();_v(r).t_(),await IVe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Q9(r)}}(e,t),kVe(e)&&RVe(e)}async function Ywe(e,t){const n=jn(e);n.asyncQueue.verifyOperationInProgress(),Yt("RemoteStore","RemoteStore received new credentials");const r=ww(n);n.M_.add(3),await OD(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await ND(n)}async function kvn(e,t){const n=jn(e);t?(n.M_.delete(2),await ND(n)):t||(n.M_.add(2),await OD(n),n.N_.set("Unknown"))}function MC(e){return e.B_||(e.B_=function(n,r,i){const s=jn(n);return s.f_(),new pvn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:bvn.bind(null,e),To:xvn.bind(null,e),Ao:_vn.bind(null,e),h_:wvn.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),jue(e)?Bue(e):e.N_.set("Unknown")):(await e.B_.stop(),AVe(e))})),e.B_}function _v(e){return e.k_||(e.k_=function(n,r,i){const s=jn(n);return s.f_(),new mvn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Svn.bind(null,e),Ao:Ivn.bind(null,e),R_:Cvn.bind(null,e),A_:Avn.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await Q9(e)):(await e.k_.stop(),e.v_.length>0&&(Yt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uue{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new og,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Uue(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Mt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zue(e,t){if(Ng("AsyncQueue",`${t}: ${e}`),RD(e))return new Mt(nt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(t){this.comparator=t?(n,r)=>t(n,r)||cn.comparator(n.key,r.key):(n,r)=>cn.comparator(n.key,r.key),this.keyedMap=qI(),this.sortedSet=new Ds(this.comparator)}static emptySet(t){return new Y2(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Y2)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Y2;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kwe{constructor(){this.q_=new Ds(cn.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Pn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class hS{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new hS(t,n,Y2.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&q9(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rvn{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Pvn{constructor(){this.queries=new LC(t=>Jze(t),q9),this.onlineState="Unknown",this.z_=new Set}}async function PVe(e,t){const n=jn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new Rvn,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=zue(o,`Initialization of query '${PE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Vue(n)}async function DVe(e,t){const n=jn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dvn(e,t){const n=jn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Vue(n)}function Nvn(e,t,n){const r=jn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Vue(e){e.z_.forEach(t=>{t.next()})}var hX,Xwe;(Xwe=hX||(hX={})).J_="default",Xwe.Cache="cache";class NVe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new hS(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=hS.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==hX.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OVe{constructor(t){this.key=t}}class $Ve{constructor(t){this.key=t}}class Ovn{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=_r(),this.mutatedKeys=_r(),this.Ia=Zze(t),this.Ta=new Y2(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Kwe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=W9(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new hS(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Kwe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=_r(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new $Ve(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new OVe(r))}),n}pa(t){this.la=t.hs,this.Pa=_r();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return hS.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class $vn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Lvn{constructor(t){this.key=t,this.wa=!1}}class Mvn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new LC(a=>Jze(a),q9),this.Da=new Map,this.Ca=new Set,this.va=new Ds(cn.comparator),this.Fa=new Map,this.Ma=new Oue,this.xa={},this.Oa=new Map,this.Na=dS.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Fvn(e,t,n=!0){const r=UVe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await LVe(r,t,n,!0),i}async function Bvn(e,t){const n=UVe(e);await LVe(n,t,!0,!1)}async function LVe(e,t,n,r){const i=await avn(e.localStore,om(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await jvn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&SVe(e.remoteStore,i),a}async function jvn(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await qwe(m.localStore,g.query,!1).then(({documents:C})=>g.view.da(C,b)));const _=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,_,E);return Jwe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await qwe(e.localStore,t,!0),o=new Ovn(t,s.hs),a=o.da(s.documents),u=DD.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Jwe(e,n,l.fa);const c=new $vn(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function Uvn(e,t,n){const r=jn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!q9(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dX(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mue(r.remoteStore,i.targetId),pX(r,i.targetId)}).catch(kD)):(pX(r,i.targetId),await dX(r.localStore,i.targetId,!0))}async function zvn(e,t){const n=jn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mue(n.remoteStore,r.targetId))}async function Vvn(e,t,n){const r=Xvn(e);try{const i=await function(o,a){const u=jn(o),l=Ho.now(),c=a.reduce((h,p)=>h.add(p.key),_r());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Og(),m=_r();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=d1n(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new rb(v.key,b,Hze(b.value.mapValue),of.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:tVe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ds(fi)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await $D(r,i.changes),await Q9(r.remoteStore)}catch(i){const s=zue(i,"Failed to persist write");n.reject(s)}}async function MVe(e,t){const n=jn(e);try{const r=await ivn(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Ji(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Ji(o.wa):i.removedDocuments.size>0&&(Ji(o.wa),o.wa=!1))}),await $D(n,r,t)}catch(r){await kD(r)}}function Qwe(e,t,n){const r=jn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=jn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&Vue(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Hvn(e,t,n){const r=jn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Ds(cn.comparator);o=o.insert(s,gu.newNoDocument(s,Bn.min()));const a=_r().add(s),u=new K9(Bn.min(),new Map,new Ds(fi),o,a);await MVe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),Hue(r)}else await dX(r.localStore,t,!1).then(()=>pX(r,t,n)).catch(kD)}async function qvn(e,t){const n=jn(e),r=t.batch.batchId;try{const i=await rvn(n.localStore,t);BVe(n,r,null),FVe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $D(n,i)}catch(i){await kD(i)}}async function Wvn(e,t,n){const r=jn(e);try{const i=await function(o,a){const u=jn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Ji(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);BVe(r,t,n),FVe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $D(r,i)}catch(i){await kD(i)}}function FVe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function BVe(e,t,n){const r=jn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function pX(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||jVe(e,r)})}function jVe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(Mue(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Hue(e))}function Jwe(e,t,n){for(const r of n)r instanceof OVe?(e.Ma.addReference(r.key,t),Gvn(e,r)):r instanceof $Ve?(Yt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||jVe(e,r.key)):Pn()}function Gvn(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Yt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Hue(e))}function Hue(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new cn(cs.fromString(t)),r=e.Na.next();e.Fa.set(r,new Lvn(n)),e.va=e.va.insert(n,r),SVe(e.remoteStore,new c1(om(kue(n.path)),r,"TargetPurposeLimboResolution",Eue.oe))}}async function $D(e,t,n){const r=jn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=Lue.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=jn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>dt.forEach(l,d=>dt.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>dt.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!RD(f))throw f;Yt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function Yvn(e,t){const n=jn(e);if(!n.currentUser.isEqual(t)){Yt("SyncEngine","User change. New user:",t.toKey());const r=await _Ve(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Mt(nt.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await $D(n,r.us)}}function Kvn(e,t){const n=jn(e),r=n.Fa.get(t);if(r&&r.wa)return _r().add(r.key);{let i=_r();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function UVe(e){const t=jn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=MVe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kvn.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hvn.bind(null,t),t.Sa.h_=Dvn.bind(null,t.eventManager),t.Sa.ka=Nvn.bind(null,t.eventManager),t}function Xvn(e){const t=jn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qvn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wvn.bind(null,t),t}class Zwe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=X9(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return nvn(this.persistence,new evn,t.initialUser,this.serializer)}createPersistence(t){return new Q1n($ue.Hr,this.serializer)}createSharedClientState(t){return new lvn}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Qvn{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qwe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yvn.bind(null,this.syncEngine),await kvn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Pvn}()}createDatastore(t){const n=X9(t.databaseInfo.databaseId),r=function(s){return new hvn(s)}(t.databaseInfo);return function(s,o,a,u){return new gvn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new vvn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Qwe(this.syncEngine,n,0),function(){return Gwe.D()?new Gwe:new cvn}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Mvn(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=jn(r);Yt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await OD(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zVe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Ng("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jvn{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Fl.UNAUTHENTICATED,this.clientId=Uze.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Yt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Yt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new og;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=zue(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function CH(e,t){e.asyncQueue.verifyOperationInProgress(),Yt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _Ve(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function eEe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await VVe(e);Yt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Ywe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Ywe(t.remoteStore,i)),e._onlineComponents=t}function Zvn(e){return e.name==="FirebaseError"?e.code===nt.FAILED_PRECONDITION||e.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function VVe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Yt("FirestoreClient","Using user provided OfflineComponentProvider");try{await CH(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Zvn(n))throw n;R3("Error using user provided cache. Falling back to memory cache: "+n),await CH(e,new Zwe)}}else Yt("FirestoreClient","Using default OfflineComponentProvider"),await CH(e,new Zwe);return e._offlineComponents}async function que(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Yt("FirestoreClient","Using user provided OnlineComponentProvider"),await eEe(e,e._uninitializedComponentsProvider._online)):(Yt("FirestoreClient","Using default OnlineComponentProvider"),await eEe(e,new Qvn))),e._onlineComponents}function ebn(e){return VVe(e).then(t=>t.persistence)}function tbn(e){return que(e).then(t=>t.remoteStore)}function nbn(e){return que(e).then(t=>t.syncEngine)}async function HVe(e){const t=await que(e),n=t.eventManager;return n.onListen=Fvn.bind(null,t.syncEngine),n.onUnlisten=Uvn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Bvn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=zvn.bind(null,t.syncEngine),n}function rbn(e){return e.asyncQueue.enqueue(async()=>{const t=await ebn(e),n=await tbn(e);return t.setNetworkEnabled(!0),function(i){const s=jn(i);return s.M_.delete(0),ND(s)}(n)})}function ibn(e,t,n={}){const r=new og;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new zVe({next:d=>{o.enqueueAndForget(()=>DVe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Mt(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Mt(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new NVe(kue(a.path),c,{includeMetadataChanges:!0,ra:!0});return PVe(s,f)}(await HVe(e),e.asyncQueue,t,n,r)),r.promise}function sbn(e,t,n={}){const r=new og;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new zVe({next:d=>{o.enqueueAndForget(()=>DVe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Mt(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new NVe(a,c,{includeMetadataChanges:!0,ra:!0});return PVe(s,f)}(await HVe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qVe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tEe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WVe(e,t,n){if(!n)throw new Mt(nt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function obn(e,t,n,r){if(t===!0&&r===!0)throw new Mt(nt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function nEe(e){if(!cn.isDocumentKey(e))throw new Mt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function rEe(e){if(cn.isDocumentKey(e))throw new Mt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function J9(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Pn()}function Im(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Mt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=J9(e);throw new Mt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iEe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Mt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}obn("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qVe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Wue{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iEe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Mt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Mt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iEe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wyn;switch(r.type){case"firstParty":return new Syn(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Mt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tEe.get(n);r&&(Yt("ComponentProvider","Removing Datastore"),tEe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ew(this.firestore,t,this._query)}}class cl{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new O1(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new cl(this.firestore,t,this._key)}}class O1 extends Ew{constructor(t,n,r){super(t,n,kue(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new cl(this.firestore,null,new cn(t))}withConverter(t){return new O1(this.firestore,t,this._path)}}function Ol(e,t,...n){if(e=es(e),WVe("collection","path",t),e instanceof Wue){const r=cs.fromString(t,...n);return rEe(r),new O1(e,null,r)}{if(!(e instanceof cl||e instanceof O1))throw new Mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(cs.fromString(t,...n));return rEe(r),new O1(e.firestore,null,r)}}function is(e,t,...n){if(e=es(e),arguments.length===1&&(t=Uze.newId()),WVe("doc","path",t),e instanceof Wue){const r=cs.fromString(t,...n);return nEe(r),new cl(e,null,new cn(r))}{if(!(e instanceof cl||e instanceof O1))throw new Mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(cs.fromString(t,...n));return nEe(r),new cl(e.firestore,e instanceof O1?e.converter:null,new cn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class abn{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new EVe(this,"async_queue_retry"),this.hu=()=>{const n=SH();n&&Yt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=SH();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=SH();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new og;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!RD(t))throw t;Yt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ng("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Uue.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Pn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Tw extends Wue{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new abn}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||GVe(this),this._firestoreClient.terminate()}}function ubn(e,t,n){n||(n="(default)");const r=DC(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(A3(s,t))return i;throw new Mt(nt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Mt(nt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function LD(e){return e._firestoreClient||GVe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function GVe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Fyn(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,qVe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Jvn(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function lbn(e){return rbn(LD(e=Im(e,Tw)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t){this._byteString=t}static fromBase64String(t){try{return new pS(Nu.fromBase64String(t))}catch(n){throw new Mt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new pS(Nu.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Mt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $a(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gue{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Mt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Mt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fi(this._lat,t._lat)||fi(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cbn=/^__.*__$/;class fbn{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new rb(t,this.data,this.fieldMask,n,this.fieldTransforms):new PD(t,this.data,n,this.fieldTransforms)}}class YVe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new rb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function KVe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pn()}}class Yue{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Yue(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return PM(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(KVe(this.fu)&&cbn.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class dbn{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||X9(t)}Fu(t,n,r,i=!1){return new Yue({fu:t,methodName:n,vu:r,path:$a.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e7(e){const t=e._freezeSettings(),n=X9(e._databaseId);return new dbn(e._databaseId,!!t.ignoreUndefinedProperties,n)}function XVe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Xue("Data must be an object, but it was:",o,r);const a=ZVe(r,o);let u,l;if(s.merge)u=new Zc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=mX(t,f,n);if(!o.contains(d))throw new Mt(nt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);tHe(c,d)||c.push(d)}u=new Zc(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new fbn(new Kl(a),u,l)}class t7 extends Z9{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof t7}}class Kue extends Z9{_toFieldTransform(t){return new u1n(t.path,new L3)}isEqual(t){return t instanceof Kue}}function QVe(e,t,n,r){const i=e.Fu(1,t,n);Xue("Data must be an object, but it was:",i,r);const s=[],o=Kl.empty();_w(r,(u,l)=>{const c=Que(t,u,n);l=es(l);const f=i.Su(c);if(l instanceof t7)s.push(c);else{const d=FD(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Zc(s);return new YVe(o,a,i.fieldTransforms)}function JVe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[mX(t,r,n)],u=[i];if(s.length%2!=0)throw new Mt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(mX(t,s[d])),u.push(s[d+1]);const l=[],c=Kl.empty();for(let d=a.length-1;d>=0;--d)if(!tHe(l,a[d])){const h=a[d];let p=u[d];p=es(p);const m=o.Su(h);if(p instanceof t7)l.push(h);else{const g=FD(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Zc(l);return new YVe(c,f,o.fieldTransforms)}function hbn(e,t,n,r=!1){return FD(n,e.Fu(r?4:3,t))}function FD(e,t){if(eHe(e=es(e)))return Xue("Unsupported field value:",t,e),ZVe(e,t);if(e instanceof Z9)return function(r,i){if(!KVe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=FD(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=es(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s1n(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ho.fromDate(r);return{timestampValue:kM(i.serializer,s)}}if(r instanceof Ho){const s=new Ho(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kM(i.serializer,s)}}if(r instanceof Gue)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pS)return{bytesValue:pVe(i.serializer,r._byteString)};if(r instanceof cl){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Nue(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${J9(r)}`)}(e,t)}function ZVe(e,t){const n={};return zze(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_w(e,(r,i)=>{const s=FD(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function eHe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ho||e instanceof Gue||e instanceof pS||e instanceof cl||e instanceof Z9)}function Xue(e,t,n){if(!eHe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=J9(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function mX(e,t,n){if((t=es(t))instanceof MD)return t._internalPath;if(typeof t=="string")return Que(e,t);throw PM("Field path arguments must be of type string or ",e,!1,void 0,n)}const pbn=new RegExp("[~\\*/\\[\\]]");function Que(e,t,n){if(t.search(pbn)>=0)throw PM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new MD(...t.split("."))._internalPath}catch{throw PM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function PM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Mt(nt.INVALID_ARGUMENT,a+e+u)}function tHe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nHe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new mbn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(n7("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mbn extends nHe{data(){return super.data()}}function n7(e,t){return typeof t=="string"?Que(e,t):t instanceof MD?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gbn(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Mt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jue{}class rHe extends Jue{}function AH(e,t,...n){let r=[];t instanceof Jue&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Zue).length,a=s.filter(u=>u instanceof r7).length;if(o>1||o>0&&a>0)throw new Mt(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class r7 extends rHe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new r7(t,n,r)}_apply(t){const n=this._parse(t);return iHe(t._query,n),new Ew(t.firestore,t.converter,oX(t._query,n))}_parse(t){const n=e7(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Mt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){uEe(f,c);const h=[];for(const p of f)h.push(aEe(u,s,p));d={arrayValue:{values:h}}}else d=aEe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||uEe(f,c),d=hbn(a,o,f,c==="in"||c==="not-in");return Eo.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function sEe(e,t,n){const r=t,i=n7("where",e);return r7._create(i,r,n)}class Zue extends Jue{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Zue(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Uh.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)iHe(o,u),o=oX(o,u)}(t._query,n),new Ew(t.firestore,t.converter,oX(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ele extends rHe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new ele(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $3(s,o)}(t._query,this._field,this._direction);return new Ew(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $C(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function oEe(e,t="asc"){const n=t,r=n7("orderBy",e);return ele._create(r,n)}function aEe(e,t,n){if(typeof(n=es(n))=="string"){if(n==="")throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qze(t)&&n.indexOf("/")!==-1)throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(cs.fromString(n));if(!cn.isDocumentKey(r))throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iwe(e,new cn(r))}if(n instanceof cl)return Iwe(e,n._key);throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${J9(n)}.`)}function uEe(e,t){if(!Array.isArray(e)||e.length===0)throw new Mt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function iHe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ybn{convertValue(t,n="none"){switch(O_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _o(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(N_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Pn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return _w(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Gue(_o(t.latitude),_o(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Sue(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(D3(t));default:return null}}convertTimestamp(t){const n=xv(t);return new Ho(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=cs.fromString(t);Ji(xVe(r));const i=new N3(r.get(1),r.get(3)),s=new cn(r.popFirst(5));return i.isEqual(n)||Ng(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sHe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class oHe extends nHe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new H6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(n7("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class H6 extends oHe{data(t={}){return super.data(t)}}class vbn{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new GI(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new H6(this._firestore,this._userDataWriter,r.key,r,new GI(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Mt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new H6(i._firestore,i._userDataWriter,a.doc.key,a.doc,new GI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new H6(i._firestore,i._userDataWriter,a.doc.key,a.doc,new GI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:bbn(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bbn(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(e){e=Im(e,cl);const t=Im(e.firestore,Tw);return ibn(LD(t),e._key).then(n=>xbn(t,e,n))}class aHe extends ybn{constructor(t){super(),this.firestore=t}convertBytes(t){return new pS(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new cl(this.firestore,null,n)}}function bE(e){e=Im(e,Ew);const t=Im(e.firestore,Tw),n=LD(t),r=new aHe(t);return gbn(e._query),sbn(n,e._query).then(i=>new vbn(t,r,e,i))}function uu(e,t,n){e=Im(e,cl);const r=Im(e.firestore,Tw),i=sHe(e.converter,t,n);return tle(r,[XVe(e7(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,of.none())])}function lEe(e,t,n,...r){e=Im(e,cl);const i=Im(e.firestore,Tw),s=e7(i);let o;return o=typeof(t=es(t))=="string"||t instanceof MD?JVe(s,"updateDoc",e._key,t,n,r):QVe(s,"updateDoc",e._key,t),tle(i,[o.toMutation(e._key,of.exists(!0))])}function tle(e,t){return function(r,i){const s=new og;return r.asyncQueue.enqueueAndForget(async()=>Vvn(await nbn(r),i,s)),s.promise}(LD(e),t)}function xbn(e,t,n){const r=n.docs.get(t._key),i=new aHe(e);return new oHe(e,i,t._key,r,new GI(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _bn{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=e7(t)}set(t,n,r){this._verifyNotCommitted();const i=IH(t,this._firestore),s=sHe(i.converter,n,r),o=XVe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,of.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=IH(t,this._firestore);let o;return o=typeof(n=es(n))=="string"||n instanceof MD?JVe(this._dataReader,"WriteBatch.update",s._key,n,r,i):QVe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,of.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=IH(t,this._firestore);return this._mutations=this._mutations.concat(new Rue(n._key,of.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mt(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function IH(e,t){if((e=es(e)).firestore!==t)throw new Mt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function cEe(){return new Kue("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fEe(e){return LD(e=Im(e,Tw)),new _bn(e,t=>tle(e,t))}(function(t,n=!0){(function(i){OC=i})(xw),Pg(new Sm("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Tw(new Eyn(r.getProvider("auth-internal")),new Ayn(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Mt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new N3(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ih(Twe,"4.6.3",t),Ih(Twe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gX=new Map,uHe={activated:!1,tokenObservers:[]},wbn={initialized:!1,enabled:!1};function qo(e){return gX.get(e)||Object.assign({},uHe)}function Ebn(e,t){return gX.set(e,t),gX.get(e)}function i7(){return wbn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lHe="https://content-firebaseappcheck.googleapis.com/v1",Tbn="exchangeRecaptchaV3Token",Sbn="exchangeDebugToken",dEe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Cbn=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Abn{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new C3,this.pending.promise.catch(n=>{}),await Ibn(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new C3,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Ibn(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kbn={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},nc=new PC("appCheck","AppCheck",kbn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hEe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function nle(e){if(!qo(e).activated)throw nc.create("use-before-activation",{appName:e.name})}function cHe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=v4(n)+"d:"),r&&(o+=v4(r)+"h:"),o+=v4(i)+"m:"+v4(s)+"s",o}function v4(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rle({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw nc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw nc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw nc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw nc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function Rbn(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${lHe}/projects/${n}/apps/${r}:${Tbn}?key=${i}`,body:{recaptcha_v3_token:t}}}function fHe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${lHe}/projects/${n}/apps/${r}:${Sbn}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pbn="firebase-app-check-database",Dbn=1,B3="firebase-app-check-store",dHe="debug-token";let b4=null;function hHe(){return b4||(b4=new Promise((e,t)=>{try{const n=indexedDB.open(Pbn,Dbn);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(nc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(B3,{keyPath:"compositeKey"})}}}catch(n){t(nc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),b4)}function Nbn(e){return mHe(gHe(e))}function Obn(e,t){return pHe(gHe(e),t)}function $bn(e){return pHe(dHe,e)}function Lbn(){return mHe(dHe)}async function pHe(e,t){const r=(await hHe()).transaction(B3,"readwrite"),s=r.objectStore(B3).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(nc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function mHe(e){const n=(await hHe()).transaction(B3,"readonly"),i=n.objectStore(B3).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(nc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function gHe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=new M9("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mbn(e){if(rue()){let t;try{t=await Nbn(e)}catch(n){j3.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function kH(e,t){return rue()?Obn(e,t).catch(n=>{j3.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Fbn(){let e;try{e=await Lbn()}catch{}if(e)return e;{const t=Vhn();return $bn(t).catch(n=>j3.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ile(){return i7().enabled}async function sle(){const e=i7();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Bbn(){const e=NUe(),t=i7();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new C3;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Fbn())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jbn={error:"UNKNOWN_ERROR"};function Ubn(e){return nue.encodeString(JSON.stringify(e),!1)}async function yX(e,t=!1){const n=e.app;nle(n);const r=qo(n);let i=r.token,s;if(i&&!o2(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(o2(u)?i=u:await kH(n,void 0))}if(!t&&i&&o2(i))return{token:i.token};let o=!1;if(ile()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rle(fHe(n,await sle()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await kH(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await qo(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?j3.warn(u.message):j3.error(u),s=u}let a;return i?s?o2(i)?a={token:i.token,internalError:s}:a=mEe(s):(a={token:i.token},r.token=i,await kH(n,i)):a=mEe(s),o&&bHe(n,a),a}async function zbn(e){const t=e.app;nle(t);const{provider:n}=qo(t);if(ile()){const r=await sle(),{token:i}=await rle(fHe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function yHe(e,t,n,r){const{app:i}=e,s=qo(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&o2(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),pEe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>pEe(e))}function vHe(e,t){const n=qo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function pEe(e){const{app:t}=e,n=qo(t);let r=n.tokenRefresher;r||(r=Vbn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Vbn(e){const{app:t}=e;return new Abn(async()=>{const n=qo(t);let r;if(n.token?r=await yX(e,!0):r=await yX(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=qo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},dEe.RETRIAL_MIN_WAIT,dEe.RETRIAL_MAX_WAIT)}function bHe(e,t){const n=qo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function o2(e){return e.expireTimeMillis-Date.now()>0}function mEe(e){return{token:Ubn(jbn),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hbn{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=qo(this.app);for(const n of t)vHe(this.app,n.next);return Promise.resolve()}}function qbn(e,t){return new Hbn(e,t)}function Wbn(e){return{getToken:t=>yX(e,t),getLimitedUseToken:()=>zbn(e),addTokenListener:t=>yHe(e,"INTERNAL",t),removeTokenListener:t=>vHe(e.app,t)}}const Gbn="@firebase/app-check",Ybn="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kbn="https://www.google.com/recaptcha/api.js";function Xbn(e,t){const n=new C3,r=qo(e);r.reCAPTCHAState={initialized:n};const i=Qbn(e),s=hEe(!1);return s?gEe(e,t,s,i,n):exn(()=>{const o=hEe(!1);if(!o)throw new Error("no recaptcha");gEe(e,t,o,i,n)}),n.promise}function gEe(e,t,n,r,i){n.ready(()=>{Zbn(e,t,n,r),i.resolve(n)})}function Qbn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Jbn(e){nle(e);const n=await qo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=qo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function Zbn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{qo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{qo(e).reCAPTCHAState.succeeded=!1}}),s=qo(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function exn(e){const t=document.createElement("script");t.src=Kbn,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ole{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;nxn(this._throttleData);const i=await Jbn(this._app).catch(o=>{throw nc.create("recaptcha-error")});if(!(!((t=qo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw nc.create("recaptcha-error");let s;try{s=await rle(Rbn(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=txn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),nc.create("throttled",{time:cHe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=DC(t,"heartbeat"),Xbn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof ole?this._siteKey===t._siteKey:!1}}function txn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Cbn,httpStatus:e};{const n=t?t.backoffCount:0,r=Yhn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function nxn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw nc.create("throttled",{time:cHe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rxn(e=sue(),t){e=es(e);const n=DC(e,"app-check");if(i7().initialized||Bbn(),ile()&&sle().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw nc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return ixn(e,t.provider,t.isTokenAutoRefreshEnabled),qo(e).isTokenAutoRefreshEnabled&&yHe(r,"INTERNAL",()=>{}),r}function ixn(e,t,n){const r=Ebn(e,Object.assign({},uHe));r.activated=!0,r.provider=t,r.cachedTokenPromise=Mbn(e).then(i=>(i&&o2(i)&&(r.token=i,bHe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const sxn="app-check",yEe="app-check-internal";function oxn(){Pg(new Sm(sxn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return qbn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(yEe).initialize()})),Pg(new Sm(yEe,e=>{const t=e.getProvider("app-check").getImmediate();return Wbn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ih(Gbn,Ybn)}oxn();var xHe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof lI=="function"&&lI;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof lI=="function"&&lI,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var C=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:S;h(C,A,this.outcome)}else this.queue.push(new d(C,E,S));return C};function d(E,S,C){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,C){s(function(){var A;try{A=S(C)}catch(R){return a.reject(E,R)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,S){var C=g(p,S);if(C.status==="error")return a.reject(E,C.value);var A=C.value;if(A)m(E,A);else{E.state=l,E.outcome=S;for(var R=-1,k=E.queue.length;++R<k;)E.queue[R].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var C=-1,A=E.queue.length;++C<A;)E.queue[C].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var C=!1;function A(L){C||(C=!0,a.reject(E,L))}function R(L){C||(C=!0,a.resolve(E,L))}function k(){S(R,A)}var N=g(k);N.status==="error"&&A(N.value)}function g(E,S){var C={};try{C.value=E(S),C.status="success"}catch(A){C.status="error",C.value=A}return C}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=b;function b(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,A=!1;if(!C)return this.resolve([]);for(var R=new Array(C),k=0,N=-1,L=new this(o);++N<C;)O(E[N],N);return L;function O(B,q){S.resolve(B).then(H,function(G){A||(A=!0,a.reject(L,G))});function H(G){R[q]=G,++k===C&&!A&&(A=!0,a.resolve(L,R))}}}f.race=_;function _(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,A=!1;if(!C)return this.resolve([]);for(var R=-1,k=new this(o);++R<C;)N(E[R]);return k;function N(L){S.resolve(L).then(function(O){A||(A=!0,a.resolve(k,O))},function(O){A||(A=!0,a.reject(k,O))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee};function o(ee,pe){if(!(ee instanceof pe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ee=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),pe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ee||pe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ee,pe){ee=ee||[],pe=pe||{};try{return new Blob(ee,pe)}catch(xe){if(xe.name!=="TypeError")throw xe;for(var oe=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,_e=new oe,Ce=0;Ce<ee.length;Ce+=1)_e.append(ee[Ce]);return _e.getBlob(pe.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ee,pe){pe&&ee.then(function(oe){pe(null,oe)},function(oe){pe(oe)})}function h(ee,pe,oe){typeof pe=="function"&&ee.then(pe),typeof oe=="function"&&ee.catch(oe)}function p(ee){return typeof ee!="string"&&(console.warn(ee+" used as a key, but it is not a string."),ee=String(ee)),ee}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,_="readonly",E="readwrite";function S(ee){for(var pe=ee.length,oe=new ArrayBuffer(pe),_e=new Uint8Array(oe),Ce=0;Ce<pe;Ce++)_e[Ce]=ee.charCodeAt(Ce);return oe}function C(ee){return new f(function(pe){var oe=ee.transaction(g,E),_e=c([""]);oe.objectStore(g).put(_e,"key"),oe.onabort=function(Ce){Ce.preventDefault(),Ce.stopPropagation(),pe(!1)},oe.oncomplete=function(){var Ce=navigator.userAgent.match(/Chrome\/(\d+)/),xe=navigator.userAgent.match(/Edge\//);pe(xe||!Ce||parseInt(Ce[1],10)>=43)}}).catch(function(){return!1})}function A(ee){return typeof y=="boolean"?f.resolve(y):C(ee).then(function(pe){return y=pe,y})}function R(ee){var pe=v[ee.name],oe={};oe.promise=new f(function(_e,Ce){oe.resolve=_e,oe.reject=Ce}),pe.deferredOperations.push(oe),pe.dbReady?pe.dbReady=pe.dbReady.then(function(){return oe.promise}):pe.dbReady=oe.promise}function k(ee){var pe=v[ee.name],oe=pe.deferredOperations.pop();if(oe)return oe.resolve(),oe.promise}function N(ee,pe){var oe=v[ee.name],_e=oe.deferredOperations.pop();if(_e)return _e.reject(pe),_e.promise}function L(ee,pe){return new f(function(oe,_e){if(v[ee.name]=v[ee.name]||W(),ee.db)if(pe)R(ee),ee.db.close();else return oe(ee.db);var Ce=[ee.name];pe&&Ce.push(ee.version);var xe=u.open.apply(u,Ce);pe&&(xe.onupgradeneeded=function(qe){var it=xe.result;try{it.createObjectStore(ee.storeName),qe.oldVersion<=1&&it.createObjectStore(g)}catch(at){if(at.name==="ConstraintError")console.warn('The database "'+ee.name+'" has been upgraded from version '+qe.oldVersion+" to version "+qe.newVersion+', but the storage "'+ee.storeName+'" already exists.');else throw at}}),xe.onerror=function(qe){qe.preventDefault(),_e(xe.error)},xe.onsuccess=function(){var qe=xe.result;qe.onversionchange=function(it){it.target.close()},oe(qe),k(ee)}})}function O(ee){return L(ee,!1)}function B(ee){return L(ee,!0)}function q(ee,pe){if(!ee.db)return!0;var oe=!ee.db.objectStoreNames.contains(ee.storeName),_e=ee.version<ee.db.version,Ce=ee.version>ee.db.version;if(_e&&(ee.version!==pe&&console.warn('The database "'+ee.name+`" can't be downgraded from version `+ee.db.version+" to version "+ee.version+"."),ee.version=ee.db.version),Ce||oe){if(oe){var xe=ee.db.version+1;xe>ee.version&&(ee.version=xe)}return!0}return!1}function H(ee){return new f(function(pe,oe){var _e=new FileReader;_e.onerror=oe,_e.onloadend=function(Ce){var xe=btoa(Ce.target.result||"");pe({__local_forage_encoded_blob:!0,data:xe,type:ee.type})},_e.readAsBinaryString(ee)})}function G(ee){var pe=S(atob(ee.data));return c([pe],{type:ee.type})}function K(ee){return ee&&ee.__local_forage_encoded_blob}function J(ee){var pe=this,oe=pe._initReady().then(function(){var _e=v[pe._dbInfo.name];if(_e&&_e.dbReady)return _e.dbReady});return h(oe,ee,ee),oe}function F(ee){R(ee);for(var pe=v[ee.name],oe=pe.forages,_e=0;_e<oe.length;_e++){var Ce=oe[_e];Ce._dbInfo.db&&(Ce._dbInfo.db.close(),Ce._dbInfo.db=null)}return ee.db=null,O(ee).then(function(xe){return ee.db=xe,q(ee)?B(ee):xe}).then(function(xe){ee.db=pe.db=xe;for(var qe=0;qe<oe.length;qe++)oe[qe]._dbInfo.db=xe}).catch(function(xe){throw N(ee,xe),xe})}function j(ee,pe,oe,_e){_e===void 0&&(_e=1);try{var Ce=ee.db.transaction(ee.storeName,pe);oe(null,Ce)}catch(xe){if(_e>0&&(!ee.db||xe.name==="InvalidStateError"||xe.name==="NotFoundError"))return f.resolve().then(function(){if(!ee.db||xe.name==="NotFoundError"&&!ee.db.objectStoreNames.contains(ee.storeName)&&ee.version<=ee.db.version)return ee.db&&(ee.version=ee.db.version+1),B(ee)}).then(function(){return F(ee).then(function(){j(ee,pe,oe,_e-1)})}).catch(oe);oe(xe)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function M(ee){var pe=this,oe={db:null};if(ee)for(var _e in ee)oe[_e]=ee[_e];var Ce=v[oe.name];Ce||(Ce=W(),v[oe.name]=Ce),Ce.forages.push(pe),pe._initReady||(pe._initReady=pe.ready,pe.ready=J);var xe=[];function qe(){return f.resolve()}for(var it=0;it<Ce.forages.length;it++){var at=Ce.forages[it];at!==pe&&xe.push(at._initReady().catch(qe))}var ut=Ce.forages.slice(0);return f.all(xe).then(function(){return oe.db=Ce.db,O(oe)}).then(function(vt){return oe.db=vt,q(oe,pe._defaultConfig.version)?B(oe):vt}).then(function(vt){oe.db=Ce.db=vt,pe._dbInfo=oe;for(var Lt=0;Lt<ut.length;Lt++){var $n=ut[Lt];$n!==pe&&($n._dbInfo.db=oe.db,$n._dbInfo.version=oe.version)}})}function V(ee,pe){var oe=this;ee=p(ee);var _e=new f(function(Ce,xe){oe.ready().then(function(){j(oe._dbInfo,_,function(qe,it){if(qe)return xe(qe);try{var at=it.objectStore(oe._dbInfo.storeName),ut=at.get(ee);ut.onsuccess=function(){var vt=ut.result;vt===void 0&&(vt=null),K(vt)&&(vt=G(vt)),Ce(vt)},ut.onerror=function(){xe(ut.error)}}catch(vt){xe(vt)}})}).catch(xe)});return d(_e,pe),_e}function Q(ee,pe){var oe=this,_e=new f(function(Ce,xe){oe.ready().then(function(){j(oe._dbInfo,_,function(qe,it){if(qe)return xe(qe);try{var at=it.objectStore(oe._dbInfo.storeName),ut=at.openCursor(),vt=1;ut.onsuccess=function(){var Lt=ut.result;if(Lt){var $n=Lt.value;K($n)&&($n=G($n));var Kt=ee($n,Lt.key,vt++);Kt!==void 0?Ce(Kt):Lt.continue()}else Ce()},ut.onerror=function(){xe(ut.error)}}catch(Lt){xe(Lt)}})}).catch(xe)});return d(_e,pe),_e}function se(ee,pe,oe){var _e=this;ee=p(ee);var Ce=new f(function(xe,qe){var it;_e.ready().then(function(){return it=_e._dbInfo,b.call(pe)==="[object Blob]"?A(it.db).then(function(at){return at?pe:H(pe)}):pe}).then(function(at){j(_e._dbInfo,E,function(ut,vt){if(ut)return qe(ut);try{var Lt=vt.objectStore(_e._dbInfo.storeName);at===null&&(at=void 0);var $n=Lt.put(at,ee);vt.oncomplete=function(){at===void 0&&(at=null),xe(at)},vt.onabort=vt.onerror=function(){var Kt=$n.error?$n.error:$n.transaction.error;qe(Kt)}}catch(Kt){qe(Kt)}})}).catch(qe)});return d(Ce,oe),Ce}function be(ee,pe){var oe=this;ee=p(ee);var _e=new f(function(Ce,xe){oe.ready().then(function(){j(oe._dbInfo,E,function(qe,it){if(qe)return xe(qe);try{var at=it.objectStore(oe._dbInfo.storeName),ut=at.delete(ee);it.oncomplete=function(){Ce()},it.onerror=function(){xe(ut.error)},it.onabort=function(){var vt=ut.error?ut.error:ut.transaction.error;xe(vt)}}catch(vt){xe(vt)}})}).catch(xe)});return d(_e,pe),_e}function he(ee){var pe=this,oe=new f(function(_e,Ce){pe.ready().then(function(){j(pe._dbInfo,E,function(xe,qe){if(xe)return Ce(xe);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.clear();qe.oncomplete=function(){_e()},qe.onabort=qe.onerror=function(){var ut=at.error?at.error:at.transaction.error;Ce(ut)}}catch(ut){Ce(ut)}})}).catch(Ce)});return d(oe,ee),oe}function Ae(ee){var pe=this,oe=new f(function(_e,Ce){pe.ready().then(function(){j(pe._dbInfo,_,function(xe,qe){if(xe)return Ce(xe);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.count();at.onsuccess=function(){_e(at.result)},at.onerror=function(){Ce(at.error)}}catch(ut){Ce(ut)}})}).catch(Ce)});return d(oe,ee),oe}function Ne(ee,pe){var oe=this,_e=new f(function(Ce,xe){if(ee<0){Ce(null);return}oe.ready().then(function(){j(oe._dbInfo,_,function(qe,it){if(qe)return xe(qe);try{var at=it.objectStore(oe._dbInfo.storeName),ut=!1,vt=at.openKeyCursor();vt.onsuccess=function(){var Lt=vt.result;if(!Lt){Ce(null);return}ee===0||ut?Ce(Lt.key):(ut=!0,Lt.advance(ee))},vt.onerror=function(){xe(vt.error)}}catch(Lt){xe(Lt)}})}).catch(xe)});return d(_e,pe),_e}function rt(ee){var pe=this,oe=new f(function(_e,Ce){pe.ready().then(function(){j(pe._dbInfo,_,function(xe,qe){if(xe)return Ce(xe);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.openKeyCursor(),ut=[];at.onsuccess=function(){var vt=at.result;if(!vt){_e(ut);return}ut.push(vt.key),vt.continue()},at.onerror=function(){Ce(at.error)}}catch(vt){Ce(vt)}})}).catch(Ce)});return d(oe,ee),oe}function Re(ee,pe){pe=m.apply(this,arguments);var oe=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||oe.name,ee.storeName=ee.storeName||oe.storeName);var _e=this,Ce;if(!ee.name)Ce=f.reject("Invalid arguments");else{var xe=ee.name===oe.name&&_e._dbInfo.db,qe=xe?f.resolve(_e._dbInfo.db):O(ee).then(function(it){var at=v[ee.name],ut=at.forages;at.db=it;for(var vt=0;vt<ut.length;vt++)ut[vt]._dbInfo.db=it;return it});ee.storeName?Ce=qe.then(function(it){if(it.objectStoreNames.contains(ee.storeName)){var at=it.version+1;R(ee);var ut=v[ee.name],vt=ut.forages;it.close();for(var Lt=0;Lt<vt.length;Lt++){var $n=vt[Lt];$n._dbInfo.db=null,$n._dbInfo.version=at}var Kt=new f(function(er,Hr){var vr=u.open(ee.name,at);vr.onerror=function(Io){var Rc=vr.result;Rc.close(),Hr(Io)},vr.onupgradeneeded=function(){var Io=vr.result;Io.deleteObjectStore(ee.storeName)},vr.onsuccess=function(){var Io=vr.result;Io.close(),er(Io)}});return Kt.then(function(er){ut.db=er;for(var Hr=0;Hr<vt.length;Hr++){var vr=vt[Hr];vr._dbInfo.db=er,k(vr._dbInfo)}}).catch(function(er){throw(N(ee,er)||f.resolve()).catch(function(){}),er})}}):Ce=qe.then(function(it){R(ee);var at=v[ee.name],ut=at.forages;it.close();for(var vt=0;vt<ut.length;vt++){var Lt=ut[vt];Lt._dbInfo.db=null}var $n=new f(function(Kt,er){var Hr=u.deleteDatabase(ee.name);Hr.onerror=function(){var vr=Hr.result;vr&&vr.close(),er(Hr.error)},Hr.onblocked=function(){console.warn('dropInstance blocked for database "'+ee.name+'" until all open connections are closed')},Hr.onsuccess=function(){var vr=Hr.result;vr&&vr.close(),Kt(vr)}});return $n.then(function(Kt){at.db=Kt;for(var er=0;er<ut.length;er++){var Hr=ut[er];k(Hr._dbInfo)}}).catch(function(Kt){throw(N(ee,Kt)||f.resolve()).catch(function(){}),Kt})})}return d(Ce,pe),Ce}var Tt={_driver:"asyncStorage",_initStorage:M,_support:l(),iterate:Q,getItem:V,setItem:se,removeItem:be,clear:he,length:Ae,key:Ne,keys:rt,dropInstance:Re};function Ze(){return typeof openDatabase=="function"}var It="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt="~~local_forage_type~",Se=/^~~local_forage_type~([^~]+)~/,Fe="__lfsc__:",st=Fe.length,yt="arbf",Pt="blob",Je="si08",we="ui08",kt="uic8",Rt="si16",Ee="si32",Oe="ur16",ot="ui32",xt="fl32",jt="fl64",Un=st+yt.length,dr=Object.prototype.toString;function Sr(ee){var pe=ee.length*.75,oe=ee.length,_e,Ce=0,xe,qe,it,at;ee[ee.length-1]==="="&&(pe--,ee[ee.length-2]==="="&&pe--);var ut=new ArrayBuffer(pe),vt=new Uint8Array(ut);for(_e=0;_e<oe;_e+=4)xe=It.indexOf(ee[_e]),qe=It.indexOf(ee[_e+1]),it=It.indexOf(ee[_e+2]),at=It.indexOf(ee[_e+3]),vt[Ce++]=xe<<2|qe>>4,vt[Ce++]=(qe&15)<<4|it>>2,vt[Ce++]=(it&3)<<6|at&63;return ut}function xi(ee){var pe=new Uint8Array(ee),oe="",_e;for(_e=0;_e<pe.length;_e+=3)oe+=It[pe[_e]>>2],oe+=It[(pe[_e]&3)<<4|pe[_e+1]>>4],oe+=It[(pe[_e+1]&15)<<2|pe[_e+2]>>6],oe+=It[pe[_e+2]&63];return pe.length%3===2?oe=oe.substring(0,oe.length-1)+"=":pe.length%3===1&&(oe=oe.substring(0,oe.length-2)+"=="),oe}function Sn(ee,pe){var oe="";if(ee&&(oe=dr.call(ee)),ee&&(oe==="[object ArrayBuffer]"||ee.buffer&&dr.call(ee.buffer)==="[object ArrayBuffer]")){var _e,Ce=Fe;ee instanceof ArrayBuffer?(_e=ee,Ce+=yt):(_e=ee.buffer,oe==="[object Int8Array]"?Ce+=Je:oe==="[object Uint8Array]"?Ce+=we:oe==="[object Uint8ClampedArray]"?Ce+=kt:oe==="[object Int16Array]"?Ce+=Rt:oe==="[object Uint16Array]"?Ce+=Oe:oe==="[object Int32Array]"?Ce+=Ee:oe==="[object Uint32Array]"?Ce+=ot:oe==="[object Float32Array]"?Ce+=xt:oe==="[object Float64Array]"?Ce+=jt:pe(new Error("Failed to get type for BinaryArray"))),pe(Ce+xi(_e))}else if(oe==="[object Blob]"){var xe=new FileReader;xe.onload=function(){var qe=mt+ee.type+"~"+xi(this.result);pe(Fe+Pt+qe)},xe.readAsArrayBuffer(ee)}else try{pe(JSON.stringify(ee))}catch(qe){console.error("Couldn't convert value into a JSON string: ",ee),pe(null,qe)}}function zn(ee){if(ee.substring(0,st)!==Fe)return JSON.parse(ee);var pe=ee.substring(Un),oe=ee.substring(st,Un),_e;if(oe===Pt&&Se.test(pe)){var Ce=pe.match(Se);_e=Ce[1],pe=pe.substring(Ce[0].length)}var xe=Sr(pe);switch(oe){case yt:return xe;case Pt:return c([xe],{type:_e});case Je:return new Int8Array(xe);case we:return new Uint8Array(xe);case kt:return new Uint8ClampedArray(xe);case Rt:return new Int16Array(xe);case Oe:return new Uint16Array(xe);case Ee:return new Int32Array(xe);case ot:return new Uint32Array(xe);case xt:return new Float32Array(xe);case jt:return new Float64Array(xe);default:throw new Error("Unkown type: "+oe)}}var hr={serialize:Sn,deserialize:zn,stringToBuffer:Sr,bufferToString:xi};function gr(ee,pe,oe,_e){ee.executeSql("CREATE TABLE IF NOT EXISTS "+pe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],oe,_e)}function Qo(ee){var pe=this,oe={db:null};if(ee)for(var _e in ee)oe[_e]=typeof ee[_e]!="string"?ee[_e].toString():ee[_e];var Ce=new f(function(xe,qe){try{oe.db=openDatabase(oe.name,String(oe.version),oe.description,oe.size)}catch(it){return qe(it)}oe.db.transaction(function(it){gr(it,oe,function(){pe._dbInfo=oe,xe()},function(at,ut){qe(ut)})},qe)});return oe.serializer=hr,Ce}function ts(ee,pe,oe,_e,Ce,xe){ee.executeSql(oe,_e,Ce,function(qe,it){it.code===it.SYNTAX_ERR?qe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[pe.storeName],function(at,ut){ut.rows.length?xe(at,it):gr(at,pe,function(){at.executeSql(oe,_e,Ce,xe)},xe)},xe):xe(qe,it)},xe)}function hs(ee,pe){var oe=this;ee=p(ee);var _e=new f(function(Ce,xe){oe.ready().then(function(){var qe=oe._dbInfo;qe.db.transaction(function(it){ts(it,qe,"SELECT * FROM "+qe.storeName+" WHERE key = ? LIMIT 1",[ee],function(at,ut){var vt=ut.rows.length?ut.rows.item(0).value:null;vt&&(vt=qe.serializer.deserialize(vt)),Ce(vt)},function(at,ut){xe(ut)})})}).catch(xe)});return d(_e,pe),_e}function Ns(ee,pe){var oe=this,_e=new f(function(Ce,xe){oe.ready().then(function(){var qe=oe._dbInfo;qe.db.transaction(function(it){ts(it,qe,"SELECT * FROM "+qe.storeName,[],function(at,ut){for(var vt=ut.rows,Lt=vt.length,$n=0;$n<Lt;$n++){var Kt=vt.item($n),er=Kt.value;if(er&&(er=qe.serializer.deserialize(er)),er=ee(er,Kt.key,$n+1),er!==void 0){Ce(er);return}}Ce()},function(at,ut){xe(ut)})})}).catch(xe)});return d(_e,pe),_e}function Vr(ee,pe,oe,_e){var Ce=this;ee=p(ee);var xe=new f(function(qe,it){Ce.ready().then(function(){pe===void 0&&(pe=null);var at=pe,ut=Ce._dbInfo;ut.serializer.serialize(pe,function(vt,Lt){Lt?it(Lt):ut.db.transaction(function($n){ts($n,ut,"INSERT OR REPLACE INTO "+ut.storeName+" (key, value) VALUES (?, ?)",[ee,vt],function(){qe(at)},function(Kt,er){it(er)})},function($n){if($n.code===$n.QUOTA_ERR){if(_e>0){qe(Vr.apply(Ce,[ee,at,oe,_e-1]));return}it($n)}})})}).catch(it)});return d(xe,oe),xe}function ps(ee,pe,oe){return Vr.apply(this,[ee,pe,oe,1])}function kc(ee,pe){var oe=this;ee=p(ee);var _e=new f(function(Ce,xe){oe.ready().then(function(){var qe=oe._dbInfo;qe.db.transaction(function(it){ts(it,qe,"DELETE FROM "+qe.storeName+" WHERE key = ?",[ee],function(){Ce()},function(at,ut){xe(ut)})})}).catch(xe)});return d(_e,pe),_e}function Jo(ee){var pe=this,oe=new f(function(_e,Ce){pe.ready().then(function(){var xe=pe._dbInfo;xe.db.transaction(function(qe){ts(qe,xe,"DELETE FROM "+xe.storeName,[],function(){_e()},function(it,at){Ce(at)})})}).catch(Ce)});return d(oe,ee),oe}function Mu(ee){var pe=this,oe=new f(function(_e,Ce){pe.ready().then(function(){var xe=pe._dbInfo;xe.db.transaction(function(qe){ts(qe,xe,"SELECT COUNT(key) as c FROM "+xe.storeName,[],function(it,at){var ut=at.rows.item(0).c;_e(ut)},function(it,at){Ce(at)})})}).catch(Ce)});return d(oe,ee),oe}function Br(ee,pe){var oe=this,_e=new f(function(Ce,xe){oe.ready().then(function(){var qe=oe._dbInfo;qe.db.transaction(function(it){ts(it,qe,"SELECT key FROM "+qe.storeName+" WHERE id = ? LIMIT 1",[ee+1],function(at,ut){var vt=ut.rows.length?ut.rows.item(0).key:null;Ce(vt)},function(at,ut){xe(ut)})})}).catch(xe)});return d(_e,pe),_e}function ki(ee){var pe=this,oe=new f(function(_e,Ce){pe.ready().then(function(){var xe=pe._dbInfo;xe.db.transaction(function(qe){ts(qe,xe,"SELECT key FROM "+xe.storeName,[],function(it,at){for(var ut=[],vt=0;vt<at.rows.length;vt++)ut.push(at.rows.item(vt).key);_e(ut)},function(it,at){Ce(at)})})}).catch(Ce)});return d(oe,ee),oe}function mi(ee){return new f(function(pe,oe){ee.transaction(function(_e){_e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ce,xe){for(var qe=[],it=0;it<xe.rows.length;it++)qe.push(xe.rows.item(it).name);pe({db:ee,storeNames:qe})},function(Ce,xe){oe(xe)})},function(_e){oe(_e)})})}function Qs(ee,pe){pe=m.apply(this,arguments);var oe=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||oe.name,ee.storeName=ee.storeName||oe.storeName);var _e=this,Ce;return ee.name?Ce=new f(function(xe){var qe;ee.name===oe.name?qe=_e._dbInfo.db:qe=openDatabase(ee.name,"","",0),ee.storeName?xe({db:qe,storeNames:[ee.storeName]}):xe(mi(qe))}).then(function(xe){return new f(function(qe,it){xe.db.transaction(function(at){function ut(Kt){return new f(function(er,Hr){at.executeSql("DROP TABLE IF EXISTS "+Kt,[],function(){er()},function(vr,Io){Hr(Io)})})}for(var vt=[],Lt=0,$n=xe.storeNames.length;Lt<$n;Lt++)vt.push(ut(xe.storeNames[Lt]));f.all(vt).then(function(){qe()}).catch(function(Kt){it(Kt)})},function(at){it(at)})})}):Ce=f.reject("Invalid arguments"),d(Ce,pe),Ce}var oi={_driver:"webSQLStorage",_initStorage:Qo,_support:Ze(),iterate:Ns,getItem:hs,setItem:ps,removeItem:kc,clear:Jo,length:Mu,key:Br,keys:ki,dropInstance:Qs};function Ri(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function me(ee,pe){var oe=ee.name+"/";return ee.storeName!==pe.storeName&&(oe+=ee.storeName+"/"),oe}function ue(){var ee="_localforage_support_test";try{return localStorage.setItem(ee,!0),localStorage.removeItem(ee),!1}catch{return!0}}function ge(){return!ue()||localStorage.length>0}function Me(ee){var pe=this,oe={};if(ee)for(var _e in ee)oe[_e]=ee[_e];return oe.keyPrefix=me(ee,pe._defaultConfig),ge()?(pe._dbInfo=oe,oe.serializer=hr,f.resolve()):f.reject()}function Le(ee){var pe=this,oe=pe.ready().then(function(){for(var _e=pe._dbInfo.keyPrefix,Ce=localStorage.length-1;Ce>=0;Ce--){var xe=localStorage.key(Ce);xe.indexOf(_e)===0&&localStorage.removeItem(xe)}});return d(oe,ee),oe}function _t(ee,pe){var oe=this;ee=p(ee);var _e=oe.ready().then(function(){var Ce=oe._dbInfo,xe=localStorage.getItem(Ce.keyPrefix+ee);return xe&&(xe=Ce.serializer.deserialize(xe)),xe});return d(_e,pe),_e}function Ut(ee,pe){var oe=this,_e=oe.ready().then(function(){for(var Ce=oe._dbInfo,xe=Ce.keyPrefix,qe=xe.length,it=localStorage.length,at=1,ut=0;ut<it;ut++){var vt=localStorage.key(ut);if(vt.indexOf(xe)===0){var Lt=localStorage.getItem(vt);if(Lt&&(Lt=Ce.serializer.deserialize(Lt)),Lt=ee(Lt,vt.substring(qe),at++),Lt!==void 0)return Lt}}});return d(_e,pe),_e}function dn(ee,pe){var oe=this,_e=oe.ready().then(function(){var Ce=oe._dbInfo,xe;try{xe=localStorage.key(ee)}catch{xe=null}return xe&&(xe=xe.substring(Ce.keyPrefix.length)),xe});return d(_e,pe),_e}function Zn(ee){var pe=this,oe=pe.ready().then(function(){for(var _e=pe._dbInfo,Ce=localStorage.length,xe=[],qe=0;qe<Ce;qe++){var it=localStorage.key(qe);it.indexOf(_e.keyPrefix)===0&&xe.push(it.substring(_e.keyPrefix.length))}return xe});return d(oe,ee),oe}function ur(ee){var pe=this,oe=pe.keys().then(function(_e){return _e.length});return d(oe,ee),oe}function On(ee,pe){var oe=this;ee=p(ee);var _e=oe.ready().then(function(){var Ce=oe._dbInfo;localStorage.removeItem(Ce.keyPrefix+ee)});return d(_e,pe),_e}function Cr(ee,pe,oe){var _e=this;ee=p(ee);var Ce=_e.ready().then(function(){pe===void 0&&(pe=null);var xe=pe;return new f(function(qe,it){var at=_e._dbInfo;at.serializer.serialize(pe,function(ut,vt){if(vt)it(vt);else try{localStorage.setItem(at.keyPrefix+ee,ut),qe(xe)}catch(Lt){(Lt.name==="QuotaExceededError"||Lt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&it(Lt),it(Lt)}})})});return d(Ce,oe),Ce}function ai(ee,pe){if(pe=m.apply(this,arguments),ee=typeof ee!="function"&&ee||{},!ee.name){var oe=this.config();ee.name=ee.name||oe.name,ee.storeName=ee.storeName||oe.storeName}var _e=this,Ce;return ee.name?Ce=new f(function(xe){ee.storeName?xe(me(ee,_e._defaultConfig)):xe(ee.name+"/")}).then(function(xe){for(var qe=localStorage.length-1;qe>=0;qe--){var it=localStorage.key(qe);it.indexOf(xe)===0&&localStorage.removeItem(it)}}):Ce=f.reject("Invalid arguments"),d(Ce,pe),Ce}var an={_driver:"localStorageWrapper",_initStorage:Me,_support:Ri(),iterate:Ut,getItem:_t,setItem:Cr,removeItem:On,clear:Le,length:ur,key:dn,keys:Zn,dropInstance:ai},Ar=function(pe,oe){return pe===oe||typeof pe=="number"&&typeof oe=="number"&&isNaN(pe)&&isNaN(oe)},Jr=function(pe,oe){for(var _e=pe.length,Ce=0;Ce<_e;){if(Ar(pe[Ce],oe))return!0;Ce++}return!1},yr=Array.isArray||function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},Pi={},go={},Di={INDEXEDDB:Tt,WEBSQL:oi,LOCALSTORAGE:an},Co=[Di.INDEXEDDB._driver,Di.WEBSQL._driver,Di.LOCALSTORAGE._driver],ns=["dropInstance"],rs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ns),Ao={description:"",driver:Co.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ea(ee,pe){ee[pe]=function(){var oe=arguments;return ee.ready().then(function(){return ee[pe].apply(ee,oe)})}}function yo(){for(var ee=1;ee<arguments.length;ee++){var pe=arguments[ee];if(pe)for(var oe in pe)pe.hasOwnProperty(oe)&&(yr(pe[oe])?arguments[0][oe]=pe[oe].slice():arguments[0][oe]=pe[oe])}return arguments[0]}var Cl=function(){function ee(pe){o(this,ee);for(var oe in Di)if(Di.hasOwnProperty(oe)){var _e=Di[oe],Ce=_e._driver;this[oe]=Ce,Pi[Ce]||this.defineDriver(_e)}this._defaultConfig=yo({},Ao),this._config=yo({},this._defaultConfig,pe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ee.prototype.config=function(oe){if((typeof oe>"u"?"undefined":s(oe))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var _e in oe){if(_e==="storeName"&&(oe[_e]=oe[_e].replace(/\W/g,"_")),_e==="version"&&typeof oe[_e]!="number")return new Error("Database version must be a number.");this._config[_e]=oe[_e]}return"driver"in oe&&oe.driver?this.setDriver(this._config.driver):!0}else return typeof oe=="string"?this._config[oe]:this._config},ee.prototype.defineDriver=function(oe,_e,Ce){var xe=new f(function(qe,it){try{var at=oe._driver,ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!oe._driver){it(ut);return}for(var vt=rs.concat("_initStorage"),Lt=0,$n=vt.length;Lt<$n;Lt++){var Kt=vt[Lt],er=!Jr(ns,Kt);if((er||oe[Kt])&&typeof oe[Kt]!="function"){it(ut);return}}var Hr=function(){for(var Rc=function(Fu){return function(){var Ka=new Error("Method "+Fu+" is not implemented by the current driver"),Rd=f.reject(Ka);return d(Rd,arguments[arguments.length-1]),Rd}},kd=0,sy=ns.length;kd<sy;kd++){var ip=ns[kd];oe[ip]||(oe[ip]=Rc(ip))}};Hr();var vr=function(Rc){Pi[at]&&console.info("Redefining LocalForage driver: "+at),Pi[at]=oe,go[at]=Rc,qe()};"_support"in oe?oe._support&&typeof oe._support=="function"?oe._support().then(vr,it):vr(!!oe._support):vr(!0)}catch(Io){it(Io)}});return h(xe,_e,Ce),xe},ee.prototype.driver=function(){return this._driver||null},ee.prototype.getDriver=function(oe,_e,Ce){var xe=Pi[oe]?f.resolve(Pi[oe]):f.reject(new Error("Driver not found."));return h(xe,_e,Ce),xe},ee.prototype.getSerializer=function(oe){var _e=f.resolve(hr);return h(_e,oe),_e},ee.prototype.ready=function(oe){var _e=this,Ce=_e._driverSet.then(function(){return _e._ready===null&&(_e._ready=_e._initDriver()),_e._ready});return h(Ce,oe,oe),Ce},ee.prototype.setDriver=function(oe,_e,Ce){var xe=this;yr(oe)||(oe=[oe]);var qe=this._getSupportedDrivers(oe);function it(){xe._config.driver=xe.driver()}function at(Lt){return xe._extend(Lt),it(),xe._ready=xe._initStorage(xe._config),xe._ready}function ut(Lt){return function(){var $n=0;function Kt(){for(;$n<Lt.length;){var er=Lt[$n];return $n++,xe._dbInfo=null,xe._ready=null,xe.getDriver(er).then(at).catch(Kt)}it();var Hr=new Error("No available storage method found.");return xe._driverSet=f.reject(Hr),xe._driverSet}return Kt()}}var vt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=vt.then(function(){var Lt=qe[0];return xe._dbInfo=null,xe._ready=null,xe.getDriver(Lt).then(function($n){xe._driver=$n._driver,it(),xe._wrapLibraryMethodsWithReady(),xe._initDriver=ut(qe)})}).catch(function(){it();var Lt=new Error("No available storage method found.");return xe._driverSet=f.reject(Lt),xe._driverSet}),h(this._driverSet,_e,Ce),this._driverSet},ee.prototype.supports=function(oe){return!!go[oe]},ee.prototype._extend=function(oe){yo(this,oe)},ee.prototype._getSupportedDrivers=function(oe){for(var _e=[],Ce=0,xe=oe.length;Ce<xe;Ce++){var qe=oe[Ce];this.supports(qe)&&_e.push(qe)}return _e},ee.prototype._wrapLibraryMethodsWithReady=function(){for(var oe=0,_e=rs.length;oe<_e;oe++)Ea(this,rs[oe])},ee.prototype.createInstance=function(oe){return new ee(oe)},ee}(),Sf=new Cl;r.exports=Sf},{3:3}]},{},[4])(4)})})(xHe);var axn=xHe.exports;const OE=zh(axn);var Aa=[];for(var RH=0;RH<256;++RH)Aa.push((RH+256).toString(16).slice(1));function uxn(e,t=0){return(Aa[e[t+0]]+Aa[e[t+1]]+Aa[e[t+2]]+Aa[e[t+3]]+"-"+Aa[e[t+4]]+Aa[e[t+5]]+"-"+Aa[e[t+6]]+Aa[e[t+7]]+"-"+Aa[e[t+8]]+Aa[e[t+9]]+"-"+Aa[e[t+10]]+Aa[e[t+11]]+Aa[e[t+12]]+Aa[e[t+13]]+Aa[e[t+14]]+Aa[e[t+15]]).toLowerCase()}var x4,lxn=new Uint8Array(16);function cxn(){if(!x4&&(x4=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x4))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x4(lxn)}var fxn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const vEe={randomUUID:fxn};function DM(e,t,n){if(vEe.randomUUID&&!e)return vEe.randomUUID();e=e||{};var r=e.random||(e.rng||cxn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,uxn(r)}class _He{constructor(t){Vu(this,"engine");Vu(this,"connected",!1);Vu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function NM(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function ZA(e){return e.participantId!==void 0}class Sp extends _He{constructor(){super("firebase");Vu(this,"RECAPTCHAV3TOKEN","6LdQ8qUqAAAAAPE14fuWshHdzOerFOSMhzEdA1Wp");Vu(this,"firestore");Vu(this,"collectionPrefix","prod-");Vu(this,"studyCollection");Vu(this,"storage");Vu(this,"studyId","");Vu(this,"localForage",OE.createInstance({name:"currentParticipantId"}));Vu(this,"participantData",null);Vu(this,"userManagementData",{});const n=R9.parse(`
{
  apiKey: "AIzaSyBB3ZVfd5sNerH0LLPbe8Pn-NXtLOO4-8M",
  authDomain: "vis-decode-operator-1eb8d.firebaseapp.com",
  projectId: "vis-decode-operator-1eb8d",
  storageBucket: "vis-decode-operator-1eb8d.firebasestorage.app",
  messagingSenderId: "967262141033",
  appId: "1:967262141033:web:b1ed6ad992b441194440f8"
}
`),r=BUe(n);this.firestore=ubn(r,{}),this.storage=wwe();try{rxn(r,{provider:new ole(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await lbn(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=SM();if(!i.currentUser&&(await Mmn(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Ol(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await NM(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(ZA(a))return this.participantData=a,a;const l=await NM(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=is(this.studyCollection,"configHash"),r=await y4(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=is(this.studyCollection,"configHash");await uu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=$c(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=DM(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=is(this.studyCollection,"sequenceAssignment");await uu(i,{});const s=Ol(i,"sequenceAssignment"),o=is(s,this.currentParticipantId),a=AH(s,sEe("rejected","==",!0),sEe("claimed","==",!1)),u=await bE(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await uu(m.ref,{claimed:!0}),await uu(o,{participantId:this.currentParticipantId,timestamp:g,rejected:!1,claimed:!1,completed:null}))}else r.dataCollectionEnabled&&await uu(o,{participantId:this.currentParticipantId,timestamp:cEe(),rejected:!1,claimed:!1,completed:null});const l=AH(s,oEe("timestamp","asc")),d=(await bE(l)).docs.map(m=>m.data()).filter(m=>!m.rejected).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=$c(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await QA(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");ZA(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=wwe(),s=await d4($c(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return ZA(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=DM();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=is(this.studyCollection,"sequenceAssignment"),i=Ol(r,"sequenceAssignment"),s=is(i,this.currentParticipantId);return await lEe(s,{completed:cEe()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=Ol(this.firestore,"user-management"),i=await bE(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await uu(is(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await uu(is(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await uu(is(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await uu(is(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await uu(is(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=$c(this.storage,`${this.collectionPrefix}${n}/participants`),i=await QA(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");ZA(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=Ol(this.firestore,`${this.collectionPrefix}${n}`),o=$c(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!ZA(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=is(s,"sequenceAssignment"),l=Ol(u,"sequenceAssignment"),c=is(l,r);await lEe(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=is(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await uu(s,{[r]:i},{merge:!0})}async getModes(n){const r=is(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await y4(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await uu(r,s),s}async getParticipantsStatusCounts(n){const r=Ol(this.firestore,`${this.collectionPrefix}${n}`),i=is(r,"sequenceAssignment"),s=Ol(i,"sequenceAssignment"),o=AH(s,oEe("timestamp","asc")),u=(await bE(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=is(this.firestore,"metadata","collections"),i=await y4(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=is(this.firestore,"metadata","collections");await uu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=is(this.firestore,"metadata","collections");return await uu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=is(this.firestore,"metadata","collections"),i=await y4(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await uu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=$c(this.storage,n),s=(await QA(r)).items.map(o=>_we(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=$c(this.storage,n),o=(await QA(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=$c(this.storage,n),s=$c(this.storage,r),o=await d4(i),u=await(await fetch(o)).blob();await f4(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Ol(this.firestore,n),s=is(i,"sequenceAssignment"),o=Ol(s,"sequenceAssignment"),a=Ol(this.firestore,r),u=is(a,"sequenceAssignment");await uu(u,{});const l=Ol(u,"sequenceAssignment"),c=await bE(o),f=fEe(this.firestore);c.docs.forEach(d=>{const h=is(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Ol(this.firestore,n),i=is(r,"sequenceAssignment"),s=Ol(i,"sequenceAssignment"),o=await bE(s),a=fEe(this.firestore);o.forEach(u=>{const l=is(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=$c(this.storage,n);return(await QA(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=$c(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await d4(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await d4(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=$c(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await f4(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await f4(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await f4(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=$c(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await _we(i)}}const wHe=P.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),BD=()=>P.useContext(wHe);function dxn({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=P.useState(t),[o,a]=P.useState(!1),{storageEngine:u}=po(),l=async()=>{const h=SM();try{await Hmn(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;P.useEffect(()=>{s(t);let h;if(u instanceof Sp)try{h=SM()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof Sp){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=Vmn(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=P.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return w.jsx(wHe.Provider,{value:d,children:i.determiningStatus?w.jsx(cf,{visible:!0}):e})}function hxn({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?w.jsx(ln.Td,{children:w.jsx(qi,{miw:100,children:e.timedOut?w.jsx(ze,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>w.jsxs(ke,{children:[w.jsxs(ze,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?w.jsx(ze,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):w.jsx(ze,{span:!0,children:n})]},`cell-${t}`))})}):w.jsx(ln.Td,{children:"N/A"})}function bEe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=l$e(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?w.jsxs(ln.Td,{children:[t.toFixed(1)," ","s",n&&w.jsxs(w.Fragment,{children:[w.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):w.jsx(ln.Td,{children:"N/A"})}function pxn(e){const{metaData:t}=e;return w.jsx(ln.Td,{children:w.jsx(GJ,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:w.jsxs(qi,{gap:"xs",children:[w.jsxs(ke,{children:["IP:"," ",t.ip]}),w.jsxs(ke,{children:["Language:"," ",t.language]}),w.jsxs(ke,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),w.jsxs(ke,{children:["User Agent:"," ",t.userAgent]})]})})})}function mxn({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=po(),{studyId:i}=lm(),{user:s}=BD(),o=async(_,E)=>{if(r&&i)if(s.isAdmin){const S=E===""?"Rejected by admin":E;await r.rejectParticipant(i,_,S),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=P.useState([]),[l,c]=P.useState(!1),[f,d]=P.useState(!1),[h,p]=P.useState(""),m=async()=>{c(!0),d(!1);const _=a.map(async E=>await o(E,h));await Promise.all(_),u([]),await n(),c(!1)};function g(_){_==="all"?a.length===e.length?u([]):u(e.map(E=>E.participantId)):a.includes(_)?u(a.filter(E=>E!==_)):u([...a,_])}const y=jke(t.sequence),v=[w.jsx(ln.Th,{children:w.jsx(qt,{justify:"center",children:w.jsx(Ql,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),w.jsx(ln.Th,{children:"ID"},"ID"),w.jsx(ln.Th,{children:"Status"},"status"),w.jsx(ln.Th,{children:"Tags"},"tags"),w.jsx(ln.Th,{children:"Meta"},"meta"),...y.flatMap(_=>[w.jsx(ln.Th,{children:_.componentName},`header-${_.componentName}-${_.timesSeenInBlock}`),w.jsxs(ln.Th,{children:[w.jsx("span",{style:{whiteSpace:"nowrap"},children:_.componentName})," ","Duration (clean)"]},`header-${_.componentName}-${_.timesSeenInBlock}-duration`)]),w.jsx(ln.Th,{children:"Total Duration (clean)"},"total-duration")],b=e.map(_=>w.jsxs(ln.Tr,{children:[w.jsx(ln.Td,{children:w.jsx(qt,{justify:"center",children:w.jsx(Ql,{mb:-4,checked:a.includes(_.participantId),onChange:()=>g(_.participantId)})})}),w.jsx(ln.Td,{style:{whiteSpace:"nowrap"},children:_.participantId}),w.jsx(ln.Td,{children:w.jsxs(qt,{direction:"column",miw:100,children:[w.jsxs(qt,{direction:"row",align:"center",children:[_.rejected?w.jsx(os,{label:"Rejected",children:w.jsx(lZ,{size:16,color:"red",style:{marginBottom:-3}})}):_.completed?w.jsx(os,{label:"Completed",children:w.jsx(BAe,{size:16,color:"teal",style:{marginBottom:-3}})}):w.jsx(os,{label:"In Progress",children:w.jsx(jAe,{size:16,color:"orange",style:{marginBottom:-3}})}),!_.completed&&w.jsxs(ze,{size:"sm",mb:-1,ml:4,children:[(Object.entries(_.answers).filter(([E,S])=>S.endTime!==-1&&S.endTime!==void 0).length/(Dh(_.sequence).length-1)*100).toFixed(2),"%"]})]}),_.rejected&&w.jsx(ze,{mt:5,fz:10,children:_.rejected.reason})]})}),w.jsx(ln.Td,{children:w.jsx(qt,{direction:"column",miw:100,children:(_.participantTags||[]).map(E=>w.jsxs(ze,{fz:10,children:["-"," ",E]},`tag-${E}`))})}),_.metadata?w.jsx(pxn,{metaData:_.metadata}):w.jsx(ln.Td,{children:"N/A"}),y.map(E=>{const S=$Z(_.sequence,E.orderPath),C=S&&Object.entries(_.answers).sort((A,R)=>{const k=parseInt(A[0].slice(A[0].lastIndexOf("_")+1),10),N=parseInt(R[0].slice(R[0].lastIndexOf("_")+1),10);return k-N}).filter(([A])=>{const R=A.slice(0,A.lastIndexOf("_")),k=parseInt(A.slice(A.lastIndexOf("_")+1),10);return R===E.componentName&&k<=S[0].lastIndex&&k>=S[0].firstIndex});return C!==null&&C.length>=E.timesSeenInBlock+1&&C[E.timesSeenInBlock][1].endTime!==-1?w.jsxs(ni.Fragment,{children:[w.jsx(hxn,{cellData:C[E.timesSeenInBlock][1]}),w.jsx(bEe,{cellData:C[E.timesSeenInBlock][1]})]},`cellgroup-${_.participantId}-${E.componentName}-${E.timesSeenInBlock}`):w.jsxs(ni.Fragment,{children:[w.jsx(ln.Td,{children:"N/A"}),w.jsx(ln.Td,{children:"N/A"})]},`cellgroup-${_.participantId}-${E.componentName}-${E.timesSeenInBlock}`)}),w.jsx(bEe,{cellData:{startTime:Math.min(...Object.values(_.answers).filter(E=>E.endTime!==-1&&E.endTime!==void 0).map(E=>E.startTime)),endTime:Math.max(...Object.values(_.answers).filter(E=>E.endTime!==-1&&E.endTime!==void 0).map(E=>E.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(_.answers).flatMap(E=>E.windowEvents),timedOut:!1}},`cell-${_.participantId}-total-duration`)]},_.participantId));return e.length>0?w.jsxs(w.Fragment,{children:[w.jsx(cf,{visible:l,overlayProps:{blur:2}}),w.jsxs(qt,{justify:"space-between",mb:8,p:8,children:[w.jsx(bi,{children:w.jsx(PS,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(_=>_.participantId))],searchable:!0,value:null,leftSection:w.jsx(pft,{size:14}),onChange:_=>_&&g(_)})}),w.jsxs(bi,{children:[w.jsx(RUe,{visibleParticipants:e,studyId:i||""}),w.jsxs(on,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),w.jsx(qt,{direction:"column",style:{width:"100%",overflow:"auto"},children:w.jsxs(ln,{striped:!0,withTableBorder:!0,children:[w.jsx(ln.Thead,{children:w.jsx(ln.Tr,{children:v})}),w.jsx(ln.Tbody,{children:b})]})}),w.jsxs(Ws,{opened:f,onClose:()=>d(!1),title:w.jsxs(ze,{children:["Reject Participants (",a.length,")"]}),children:[w.jsx(L0,{label:"Please enter the reason for rejection.",onChange:_=>p(_.target.value)}),w.jsxs(qt,{mt:"sm",justify:"right",children:[w.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),w.jsx(on,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):w.jsxs(w.Fragment,{children:[w.jsx(Eu,{h:"xl"}),w.jsx(qt,{justify:"center",align:"center",children:w.jsx(ze,{children:"No data available"})})]})}function gxn({studyId:e,refresh:t}){const[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1),[c,f]=P.useState(""),[d,h]=P.useState([]),[p,m]=P.useState(""),[g,y]=P.useState(""),[v,b]=P.useState(!1),[_,E]=P.useState(!1),{storageEngine:S}=po(),C=S,A=P.useCallback(async()=>{E(!0);const F=await C.getSnapshots(e);h(F),E(!1)},[C,e]);P.useEffect(()=>{A()},[A]);const R=async(F,...j)=>{b(!0);const W=await F(...j);W.status==="SUCCESS"?(A(),b(!1),await t(),W.notifications&&W.notifications.forEach(M=>{t3(M)})):(b(!1),t3({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await R(C.createSnapshot.bind(C),e,!1)},N=async()=>{m(""),r(!1),await R(C.createSnapshot.bind(C),e,!0)},L=async()=>{a(!1),await R(C.renameSnapshot.bind(C),c,g)},O=async F=>{await R(C.restoreSnapshot.bind(C),e,F)},B=async()=>{m(""),s(!1),await R(C.removeSnapshotOrLive.bind(C),c,!0)},q=async()=>{m(""),l(!1),await R(C.removeSnapshotOrLive.bind(C),e,!0)},H=()=>whe({title:"Create a Snapshot",children:w.jsx(ze,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),G=F=>whe({title:"Restore Snapshot",children:w.jsx(ze,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O(F)}),K=F=>{const j=/-snapshot-(.+)$/,W=F.match(j);return W&&W[1]?W[1].replace("T"," "):null},J=async F=>{const j=F.slice(F.indexOf("-")+1);return await C.getAllParticipantsDataByStudy(j)};return w.jsxs(w.Fragment,{children:[w.jsx(cf,{visible:v}),w.jsxs(qt,{justify:"space-between",align:"center",children:[w.jsxs(ke,{style:{width:"70%"},children:[w.jsx(Vs,{order:5,children:"Create a Snapshot"}),w.jsxs(ze,{children:["This will create a snapshot of the live"," ",w.jsx(ze,{span:!0,fw:700,children:e})," ","database. It will"," ",w.jsx(ze,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),w.jsx(os,{label:"Create a snapshot",children:w.jsx(on,{onClick:H,children:"Snapshot"})})]}),w.jsx(Eu,{h:"lg"}),w.jsxs(qt,{justify:"space-between",align:"center",children:[w.jsxs(ke,{style:{width:"70%"},children:[w.jsx(Vs,{order:5,children:"Archive Data"}),w.jsxs(ze,{children:["This will create a snapshot of the live"," ",w.jsx(ze,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),w.jsx(os,{label:"Snapshot and Delete Data",children:w.jsx(on,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),w.jsx(Eu,{h:"lg"}),w.jsxs(qt,{justify:"space-between",align:"center",children:[w.jsxs(ke,{style:{width:"70%"},children:[w.jsx(Vs,{order:5,children:"Delete Data"}),w.jsxs(ze,{children:["This will delete the live"," ",w.jsx(ze,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),w.jsx(os,{label:"Delete Data",children:w.jsx(on,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),w.jsx(Eu,{h:"xl"}),w.jsxs(qt,{direction:"column",children:[w.jsx(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:w.jsx(Vs,{order:5,children:"Snapshots"})}),w.jsxs(ke,{style:{position:"relative"},children:[w.jsx(cf,{visible:_}),d.length>0?w.jsxs(ln,{children:[w.jsx(ln.Thead,{children:w.jsxs(ln.Tr,{children:[w.jsx(ln.Th,{children:"Snapshot Name"}),w.jsx(ln.Th,{children:"Date Created"}),w.jsx(ln.Th,{children:"Actions"})]})}),w.jsx(ln.Tbody,{children:d.map(F=>w.jsxs(ln.Tr,{children:[w.jsx(ln.Td,{children:F.alternateName}),w.jsx(ln.Td,{children:K(F.originalName)}),w.jsx(ln.Td,{children:w.jsxs(qt,{children:[w.jsx(os,{label:"Rename",children:w.jsx(on,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(F.originalName)},children:w.jsx(lft,{})})}),w.jsx(os,{label:"Restore Snapshot",children:w.jsx(on,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{G(F.originalName)},children:w.jsx(dft,{})})}),w.jsx(os,{label:"Delete Snapshot",children:w.jsx(on,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(F.originalName)},children:w.jsx(VAe,{})})}),w.jsx(RUe,{visibleParticipants:()=>J(F.originalName),studyId:e,gap:"10px",fileName:F.alternateName})]})})]},F.originalName))})]}):w.jsx(ze,{children:"No snapshots."})]})]}),w.jsxs(Ws,{opened:n,onClose:()=>{r(!1),m("")},title:w.jsx(ze,{children:"Archive Data"}),children:[w.jsx(ze,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),w.jsx(L0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),w.jsxs(qt,{mt:"sm",justify:"right",children:[w.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),w.jsx(on,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),w.jsxs(Ws,{opened:i,onClose:()=>{s(!1),m("")},title:w.jsx(ze,{children:"Delete Snapshot"}),children:[w.jsxs(ze,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",w.jsx(ze,{span:!0,fw:700,children:"irreversible"}),"."]}),w.jsx(L0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),w.jsxs(qt,{mt:"sm",justify:"right",children:[w.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),w.jsx(on,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]}),w.jsxs(Ws,{opened:o,onClose:()=>{a(!1),y("")},title:w.jsx(ze,{children:"Rename Snapshot"}),children:[w.jsx(L0,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:F=>y(F.target.value)}),w.jsxs(qt,{mt:"sm",justify:"right",children:[w.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),w.jsx(on,{color:"green",onClick:L,disabled:!g||g.length===0,children:"Rename"})]})]}),w.jsxs(Ws,{opened:u,onClose:()=>{l(!1),m("")},title:w.jsx(ze,{children:"Delete Live Data"}),children:[w.jsxs(ze,{mb:"sm",children:["This will permanently delete the live"," ",w.jsx(ze,{span:!0,fw:700,children:e})," ","data. This action is"," ",w.jsx(ze,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),w.jsx(L0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),w.jsxs(qt,{mt:"sm",justify:"right",children:[w.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),w.jsx(on,{color:"red",onClick:q,disabled:p!==e,children:"Delete"})]})]})]})}function yxn({studyId:e}){const{storageEngine:t}=po(),[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1);P.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&w.jsxs(qi,{children:[w.jsx(y2,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),w.jsx(y2,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),w.jsx(y2,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function vxn({studyId:e,refresh:t}){const{storageEngine:n}=po();return w.jsx(fl,{children:w.jsxs(Bl,{multiple:!0,variant:"contained",children:[w.jsxs(Bl.Item,{value:"ReVISit Modes",children:[w.jsx(Bl.Control,{children:w.jsx(Vs,{order:5,children:"ReVISit Modes"})}),w.jsx(Bl.Panel,{children:w.jsx(yxn,{studyId:e})})]},"modes"),w.jsxs(Bl.Item,{value:"Data Management",children:[w.jsx(Bl.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:w.jsx(Vs,{order:5,children:"Data Management"})}),w.jsx(Bl.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&w.jsx(gxn,{studyId:e,refresh:t})})]},"dataManagement")]})})}function bxn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=yQ(!0),[o,a]=tf(),u=P.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=P.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=P.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return w.jsxs(xS,{p:"lg",withBorder:!0,ref:o,children:[w.jsxs(qt,{direction:"row",justify:"space-between",onClick:s,children:[w.jsxs(qt,{align:"center",children:[e.type==="metadata"&&w.jsx(Jct,{size:20}),e.type==="numerical"&&w.jsx(aft,{size:20}),(e.type==="shortText"||e.type==="longText")&&w.jsx(Kct,{size:20}),e.type==="likert"&&w.jsx(tft,{size:20}),e.type==="dropdown"&&w.jsx(mft,{size:20}),e.type==="slider"&&w.jsx(Vct,{size:20}),e.type==="radio"&&w.jsx(fft,{size:20}),e.type==="checkbox"&&w.jsx(gft,{size:20}),e.type==="iframe"&&w.jsx(rft,{size:20}),w.jsx(Vs,{order:5,ml:4,children:e.id})]}),w.jsx(Qct,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),w.jsxs(eF,{in:i,mah:400,children:[w.jsx(ke,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:w.jsx(AS,{})}),w.jsxs(HJ,{cols:2,h:360,children:[w.jsx(fg,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?w.jsx(s_e,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):w.jsxs(qt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&w.jsx(ik,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&w.jsxs(w.Fragment,{children:[w.jsx(ze,{fw:700,children:"Response Values: "}),u.map((f,d)=>w.jsx(qt,{align:"center",gap:"xs",children:w.jsx(ze,{children:f[e.id]})},d))]})]})}),w.jsx(fg,{mih:200,children:e.type==="metadata"?w.jsx(s_e,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):w.jsxs(w.Fragment,{children:[w.jsx(ze,{fw:700,children:"Response Specification: "}),w.jsx(ik,{block:!0,children:JSON.stringify(e,null,2)}),w.jsx("br",{}),l&&w.jsxs(w.Fragment,{children:[w.jsx(ze,{fw:700,children:"Correct Answer: "}),w.jsx(ik,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function xxn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&Pje(t.components[n],t),i=P.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?w.jsx(qt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>w.jsx(bxn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):w.jsx(qt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:w.jsx(ze,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function _xn({studyConfig:e,visibleParticipants:t}){const n=P.useMemo(()=>{let i=K0(e.sequence);return i=LZ(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=lm();return w.jsx(xS,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?w.jsx(qt,{justify:"center",align:"center",pt:"lg",pb:"md",children:w.jsx(ze,{children:"No data available."})}):w.jsxs(qt,{direction:"row",children:[w.jsx(ke,{w:340,children:w.jsx(cM,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),w.jsx(AS,{orientation:"vertical",mx:"md"}),w.jsx(xxn,{participantData:t,studyConfig:e,trialId:r})]})})}function wxn({xScale:e,answer:t,height:n,labelHeight:r=0}){return w.jsx("g",{children:w.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const _4=3,xE=25,w4=25,E4=20,xEe=1;function Exn({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=P.useState(!1),[l,{width:c}]=tf();return w.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[w.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+xEe,width:e(t.endTime)-e(t.startTime)-xEe*2,y:r-xE,height:xE}),w.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-_4,width:c+_4*2,y:r-xE-w4-o,height:E4,fill:"whitesmoke"}),w.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-_4,x2:c+e(t.startTime)+_4,y1:r-xE-w4+E4-o,y2:r-xE-w4+E4-o}),w.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-xE-w4-o,height:E4,children:w.jsx(Wo,{style:{width:"fit-content"},children:w.jsx(ze,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}const _Ee=25,Txn=8,PH={left:20,top:0,right:20,bottom:0};function Sxn({participantData:e,width:t,height:n,selectedTask:r,studyId:i}){const s=Hh(),o=P.useCallback(f=>{const d=f.split("_"),h=+d[d.length-1];s(`/${i}/${oh(h)}?participantId=${e.participantId}`)},[s,e.participantId,i]),a=P.useMemo(()=>{const f=Object.values(e.answers||{}).filter(p=>p.startTime).map(p=>[p.startTime,p.endTime]).flat(),d=CR(f);return va([PH.left,t-PH.left-PH.right]).domain(d).clamp(!0)},[e,t]),u=P.useMemo(()=>{let f=0;const d=Object.entries(e.answers||{}).filter(h=>!!h[1].startTime).sort((h,p)=>h[1].startTime-p[1].startTime);return d.map((h,p)=>{const[m,g]=h,y=p>0?d[p-f-1]:null;return y&&y[0].length*Txn+a(y[1].startTime)>a(g.startTime)?f+=1:f=0,{line:w.jsx(wxn,{labelHeight:f*_Ee,answer:g,height:n,xScale:a},m),label:w.jsx(Exn,{labelHeight:f*_Ee,isSelected:r===m,setSelectedTask:o,answer:g,height:n,name:m,xScale:a},m)}})},[n,e.answers,r,o,a]),l=P.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const f=Object.values(e.answers).filter(d=>d.startTime).sort((d,h)=>d.startTime-h.startTime);return new Date(f[f.length-1].endTime-(f[0]?f[0].startTime:0)).getTime()},[e]),c=P.useMemo(()=>Object.entries(e.answers||{}).sort((d,h)=>d[1].startTime-h[1].startTime).map(d=>{const[h,p]=d,m=[];let g=[-1,-1],y="visible";if(p.windowEvents)for(let v=0;v<p.windowEvents.length;v+=1)p.windowEvents[v][1]==="visibility"&&(p.windowEvents[v][2]==="hidden"&&y==="visible"?(g=[p.windowEvents[v][0],-1],y="hidden"):p.windowEvents[v][2]==="visible"&&y==="hidden"&&(g[1]=p.windowEvents[v][0],m.push(g),g=[-1,-1],y="visible"));return m.map((v,b)=>w.jsx(os,{withinPortal:!0,label:"Browsed away",children:w.jsx("rect",{x:a(v[0]),width:a(v[1])-a(v[0]),y:n-5,height:10})},b))}),[n,e,a]);return w.jsx(Wo,{children:w.jsxs(qi,{gap:25,style:{width:"100%"},children:[w.jsx(AS,{size:"md"}),w.jsxs(bi,{justify:"center",children:[w.jsx(Rv,{href:"",onClick:()=>s(`/${i}/${oh(0)}?participantId=${e.participantId}`),children:e.participantId}),e.completed?null:w.jsx(ze,{size:"xl",c:"red",children:"Not completed"}),w.jsx(ze,{size:"xl",children:`${NK(l)}`})]}),e.completed?w.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[u.map(f=>f.line),u.map(f=>f.label),c]}):null]})})}function Cxn({visibleParticipants:e}){const{studyId:t}=lm(),[n,{width:r}]=tf();return w.jsx(qi,{ref:n,style:{width:"100%"},children:e.map(i=>w.jsx(Sxn,{studyId:t||"",height:200,participantData:i,width:r},i.participantId))})}function Axn({globalConfig:e}){const{studyId:t}=lm(),[n,r]=P.useState([]),[i,s]=P.useState(void 0),[o,a]=P.useState(!1),{storageEngine:u}=po(),l=Hh(),{tab:c}=lm(),{user:f}=BD();P.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const b=async _=>{if(_.data.type==="revisitWidget/CONFIG"&&u){const E=await eue(_.data.payload);s(E)}};return window.addEventListener("message",b),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",b)}}return tue(t,e).then(b=>{b&&s(b)}),()=>{}},[t,e,u]);const d=P.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const b=await u.getAllParticipantsData();r(b),a(!1)}},[u,t,i]);P.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=P.useState([]),[m,g,y]=P.useMemo(()=>{const b=n.filter(S=>!S.rejected&&S.completed),_=n.filter(S=>!S.rejected&&!S.completed),E=n.filter(S=>S.rejected);return p([...b,..._,...E]),[b,_,E]},[n]),v=P.useCallback(b=>{const _=[];b.includes("completed")&&_.push(...m),b.includes("inprogress")&&_.push(...g),b.includes("rejected")&&_.push(...y),p(_)},[m,g,y]);return w.jsxs(w.Fragment,{children:[w.jsx($6,{studyIds:e.configsList}),w.jsx(Oi.Main,{children:w.jsxs(fl,{fluid:!0,style:{height:"100%",position:"relative"},children:[w.jsx(cf,{visible:o}),w.jsxs(qt,{direction:"row",align:"center",justify:"space-between",children:[w.jsx(Vs,{order:5,children:t}),w.jsxs(qt,{direction:"row",align:"center",children:[w.jsx(ze,{mt:-2,size:"sm",children:"Participants: "}),w.jsx(Ql.Group,{defaultValue:["completed","inprogress","rejected"],onChange:v,mb:"xs",mt:8,ml:"xs",children:w.jsxs(bi,{children:[w.jsx(Ql,{value:"completed",label:"Completed"}),w.jsx(Ql,{value:"inprogress",label:"In Progress"}),w.jsx(Ql,{value:"rejected",label:"Rejected"})]})})]})]}),w.jsx(Eu,{h:"xs"}),w.jsxs(Dr,{variant:"outline",value:c,onChange:b=>l(`/analysis/stats/${t}/${b}`),style:{height:"100%"},children:[w.jsxs(Dr.List,{children:[w.jsx(Dr.Tab,{value:"table",leftSection:w.jsx(yft,{size:16}),children:"Table View"}),w.jsx(Dr.Tab,{value:"stats",leftSection:w.jsx(Xct,{size:16}),children:"Trial Stats"}),w.jsx(Dr.Tab,{value:"replay",leftSection:w.jsx(cft,{size:16}),children:"Participant Replay"}),w.jsx(Dr.Tab,{value:"manage",leftSection:w.jsx(UAe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),w.jsx(Dr.Panel,{value:"table",pt:"xs",children:i&&w.jsx(mxn,{visibleParticipants:h,studyConfig:i,refresh:d})}),w.jsx(Dr.Panel,{value:"stats",pt:"xs",children:i&&w.jsx(_xn,{studyConfig:i,visibleParticipants:h})}),w.jsx(Dr.Panel,{value:"replay",pt:"xs",children:w.jsx(Cxn,{visibleParticipants:h})}),w.jsx(Dr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?w.jsx(vxn,{studyId:t,refresh:d}):w.jsx(fl,{mt:20,children:w.jsx(Y0,{title:"Unauthorized Access",variant:"light",color:"red",icon:w.jsx(aZ,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function wEe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=BD(),{storageEngine:o}=po(),[a,u]=P.useState(!1),l=lm();return P.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?w.jsx(cf,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?w.jsx(sZ,{to:"/login"}):w.jsx(w.Fragment,{children:e})}async function EHe(e,t){if(e instanceof Sp){t(!0);const n=new P0,r=SM();try{await f0n(r,n,bze)}catch(i){t3({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function Ixn(){const{user:e}=BD(),[t,n]=P.useState(!1),{storageEngine:r}=po();return P.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&t3({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?w.jsx(sZ,{to:"/"}):w.jsx(fl,{children:w.jsx(CS,{padding:"lg",children:w.jsxs(qt,{align:"center",direction:"column",justify:"center",children:[w.jsx(Dv,{maw:200,mt:50,mb:100,src:`${dl}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsxs(w.Fragment,{children:[w.jsx(ze,{mb:20,children:"To access admin settings, please sign in using your Google account."}),w.jsx(on,{onClick:()=>EHe(r,n),leftSection:w.jsx(vft,{}),variant:"filled",children:"Sign In With Google"})]}),w.jsx(cf,{visible:t})]})})})}function kxn(){const{user:e,triggerAuth:t}=BD(),{storageEngine:n}=po(),[r,i]=P.useState(!1),[s,o]=P.useState([]),[a,u]=P.useState(!1),[l,c]=P.useState(!1),[f,d]=P.useState(!1),[h,p]=P.useState(!1),[m,g]=P.useState(!1),[y,v]=P.useState(""),[b,_]=P.useState(null),E=Xke({initialValues:{email:""},validate:{email:Cbt("Invalid email")}});P.useEffect(()=>{(async()=>{if(u(!0),n instanceof Sp){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i((O==null?void 0:O.isEnabled)||!1);const B=await(n==null?void 0:n.getUserManagementData("adminUsers"));B&&B.adminUsersList&&o(B==null?void 0:B.adminUsersList.map(q=>q.email))}else i(!1);u(!1)})()},[n]);const S=async()=>{if(u(!0),n instanceof Sp){const L=await EHe(n,u);L&&L.email?(_({email:L.email,uid:L.uid}),p(!0)):g(!0)}u(!1)},C=async L=>{u(!0),n instanceof Sp&&L&&(await n.changeAuth(!0),await n.addAdminUser(L),o([L.email]),i(!0),t()),p(!1),u(!1)},A=async()=>{if(u(!0),n instanceof Sp){await n.addAdminUser({email:E.values.email,uid:null});const L=await n.getUserManagementData("adminUsers");o((L==null?void 0:L.adminUsersList.map(O=>O.email))||[])}u(!1),c(!1),E.setValues({email:""})},R=L=>{d(!0),v(L)},k=async()=>{if(u(!0),n instanceof Sp){await n.removeAdminUser(y);const L=await n.getUserManagementData("adminUsers");o((L==null?void 0:L.adminUsersList.map(O=>O.email))||[])}d(!1),u(!1)},N=P.useMemo(()=>n instanceof Sp,[n]);return w.jsxs(w.Fragment,{children:[w.jsx(fl,{children:w.jsxs(CS,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[w.jsx(Vs,{mb:20,order:3,children:"Authentication"}),r?w.jsx(qt,{children:w.jsx(ze,{children:"Authentication is enabled."})}):w.jsxs(qt,{justify:"space-between",children:[w.jsx(ke,{children:w.jsx(ze,{children:"Authentication is currently disabled."})}),w.jsx(os,{label:"You can only enable auth when using Firebase",disabled:N,children:w.jsx(on,{onClick:L=>N?S():L.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?w.jsxs(qt,{mt:40,direction:"column",children:[w.jsxs(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[w.jsx(Vs,{order:6,children:"Enabled Users"}),w.jsx(uZ,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(L=>{var O;return w.jsxs(qt,{justify:"space-between",mb:10,children:[w.jsx(ze,{children:L}),L===((O=e.user)==null?void 0:O.email)?w.jsx(ze,{color:"blue",size:"xs",children:"You"}):w.jsx(U_,{variant:"subtle",onClick:()=>R(L),children:w.jsx(VAe,{color:"red"})})]},L)}):null]}):null]})}),w.jsx(Ws,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:w.jsxs(ke,{component:"form",onSubmit:E.onSubmit(()=>A()),children:[w.jsx(L0,{leftSection:w.jsx(Wct,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),w.jsxs(qt,{mt:30,justify:"right",children:[w.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),w.jsx(on,{type:"submit",children:"Save"})]})]})}),w.jsxs(Ws,{opened:f,size:"large",onClose:()=>d(!1),title:w.jsxs(ze,{fw:700,children:["Remove",y,"?"]}),children:[w.jsxs(ze,{mt:40,children:["Are you sure you want to remove",w.jsx("b",{children:y})," ","as an administrator?"]}),w.jsxs(qt,{mt:40,justify:"right",children:[w.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),w.jsx(on,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),w.jsxs(Ws,{opened:h,size:"md",onClose:()=>p(!1),title:w.jsx(ze,{fw:700,children:"Enable Authentication?"}),children:[w.jsxs(ze,{mt:40,children:["User"," ",w.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),w.jsxs(qt,{mt:40,justify:"right",children:[w.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),w.jsx(on,{onClick:()=>C(b),children:"Yes, I'm sure."})]})]}),w.jsxs(Ws,{opened:m,size:"md",onClose:()=>g(!1),title:w.jsx(ze,{fw:700,children:"An Error Occurred."}),children:[w.jsxs(ze,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",w.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),w.jsx(qt,{mt:40,justify:"right",children:w.jsx(on,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),w.jsx(cf,{visible:a})]})}class Rxn extends _He{constructor(){super("localStorage");Vu(this,"studyDatabase");Vu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await OE.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await NM(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await NM(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await OE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=DM();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=OE.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=DM();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await OE.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await OE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function Pxn(){let e;{const t=new Rxn;await t.connect(),e=t}return e}function eI({title:e}){const t=Nv();return P.useEffect(()=>{document.title=e},[t,e]),null}async function Dxn(){const t=await(await fetch(`${dl}global.json`)).text();return ghn(t)}function Nxn(){const[e,t]=P.useState(null),[n,r]=P.useState({});P.useEffect(()=>{async function a(){e&&r(await bhn(e))}a()},[e]),P.useEffect(()=>{e||Dxn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=po();P.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await Pxn();s(u)}a()},[s,i]);const o=async a=>i instanceof Sp?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?w.jsx($ct,{basename:dl,children:w.jsx(dxn,{children:w.jsx(Uct,{children:w.jsxs(Pct,{children:[w.jsx(Mb,{path:"/",element:w.jsxs(w.Fragment,{children:[w.jsx(eI,{title:"ReVISit | Home"}),w.jsxs(Oi,{padding:"md",header:{height:70},children:[w.jsx($6,{studyIds:e.configsList}),w.jsx(s1t,{globalConfig:e,studyConfigs:n})]})]})}),w.jsx(Mb,{path:"/:studyId/*",element:w.jsxs(w.Fragment,{children:[w.jsx(eI,{title:"ReVISit | Study"}),w.jsx(xhn,{globalConfig:e})]})}),w.jsx(Mb,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:w.jsxs(w.Fragment,{children:[w.jsx(eI,{title:"ReVISit | Analysis"}),w.jsx(wEe,{paramToCheck:"studyId",paramCallback:o,children:w.jsx(Oi,{padding:"md",header:{height:70},children:w.jsx(Axn,{globalConfig:e})})})]})}),w.jsx(Mb,{path:"/analysis/stats/:studyId",element:w.jsx(Aje,{to:"./table",replace:!0})}),w.jsx(Mb,{path:"/settings",element:w.jsxs(wEe,{children:[w.jsx(eI,{title:"ReVISit | Settings"}),w.jsxs(Oi,{padding:"md",header:{height:70},children:[w.jsx($6,{studyIds:e.configsList}),w.jsx(Oi.Main,{children:w.jsx(kxn,{})})]})]})}),w.jsx(Mb,{path:"/login",element:w.jsxs(w.Fragment,{children:[w.jsx(eI,{title:"ReVISit | Login"}),w.jsxs(Oi,{padding:"md",header:{height:70},children:[w.jsx($6,{studyIds:e.configsList}),w.jsx(Oi.Main,{children:w.jsx(Ixn,{})})]})]})})]})})})}):null}DH.createRoot(document.getElementById("root")).render(w.jsx(ni.StrictMode,{children:w.jsx(Ult,{children:w.jsxs(iSe,{children:[w.jsx(zg,{}),w.jsx(Nxn,{})]})})}))});export default Oxn();

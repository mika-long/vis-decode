var _et=Object.defineProperty;var Eet=(e,t,n)=>t in e?_et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cet=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gl=(e,t,n)=>Eet(e,typeof t!="symbol"?t+"":t,n);var dSn=Cet((_Dn,ple)=>{function Tet(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var on=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Aet(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var hTe={exports:{}},oL={},pTe={exports:{}},Rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JR=Symbol.for("react.element"),Det=Symbol.for("react.portal"),Iet=Symbol.for("react.fragment"),ket=Symbol.for("react.strict_mode"),Ret=Symbol.for("react.profiler"),Net=Symbol.for("react.provider"),Pet=Symbol.for("react.context"),Oet=Symbol.for("react.forward_ref"),Fet=Symbol.for("react.suspense"),$et=Symbol.for("react.memo"),Met=Symbol.for("react.lazy"),lhe=Symbol.iterator;function Let(e){return e===null||typeof e!="object"?null:(e=lhe&&e[lhe]||e["@@iterator"],typeof e=="function"?e:null)}var mTe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gTe=Object.assign,yTe={};function EA(e,t,n){this.props=e,this.context=t,this.refs=yTe,this.updater=n||mTe}EA.prototype.isReactComponent={};EA.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};EA.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vTe(){}vTe.prototype=EA.prototype;function hJ(e,t,n){this.props=e,this.context=t,this.refs=yTe,this.updater=n||mTe}var pJ=hJ.prototype=new vTe;pJ.constructor=hJ;gTe(pJ,EA.prototype);pJ.isPureReactComponent=!0;var che=Array.isArray,bTe=Object.prototype.hasOwnProperty,mJ={current:null},xTe={key:!0,ref:!0,__self:!0,__source:!0};function wTe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)bTe.call(t,r)&&!xTe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:JR,type:e,key:s,ref:o,props:i,_owner:mJ.current}}function Bet(e,t){return{$$typeof:JR,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gJ(e){return typeof e=="object"&&e!==null&&e.$$typeof===JR}function jet(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fhe=/\/+/g;function PU(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jet(""+e.key):t.toString(36)}function BO(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case JR:case Det:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+PU(o,0):r,che(i)?(n="",e!=null&&(n=e.replace(fhe,"$&/")+"/"),BO(i,t,n,"",function(l){return l})):i!=null&&(gJ(i)&&(i=Bet(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fhe,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",che(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+PU(s,a);o+=BO(s,t,n,u,i)}else if(u=Let(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+PU(s,a++),o+=BO(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function B4(e,t,n){if(e==null)return e;var r=[],i=0;return BO(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Uet(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yl={current:null},jO={transition:null},zet={ReactCurrentDispatcher:Yl,ReactCurrentBatchConfig:jO,ReactCurrentOwner:mJ};function _Te(){throw Error("act(...) is not supported in production builds of React.")}Rr.Children={map:B4,forEach:function(e,t,n){B4(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return B4(e,function(){t++}),t},toArray:function(e){return B4(e,function(t){return t})||[]},only:function(e){if(!gJ(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rr.Component=EA;Rr.Fragment=Iet;Rr.Profiler=Ret;Rr.PureComponent=hJ;Rr.StrictMode=ket;Rr.Suspense=Fet;Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zet;Rr.act=_Te;Rr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gTe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=mJ.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)bTe.call(t,u)&&!xTe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:JR,type:e.type,key:i,ref:s,props:r,_owner:o}};Rr.createContext=function(e){return e={$$typeof:Pet,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Net,_context:e},e.Consumer=e};Rr.createElement=wTe;Rr.createFactory=function(e){var t=wTe.bind(null,e);return t.type=e,t};Rr.createRef=function(){return{current:null}};Rr.forwardRef=function(e){return{$$typeof:Oet,render:e}};Rr.isValidElement=gJ;Rr.lazy=function(e){return{$$typeof:Met,_payload:{_status:-1,_result:e},_init:Uet}};Rr.memo=function(e,t){return{$$typeof:$et,type:e,compare:t===void 0?null:t}};Rr.startTransition=function(e){var t=jO.transition;jO.transition={};try{e()}finally{jO.transition=t}};Rr.unstable_act=_Te;Rr.useCallback=function(e,t){return Yl.current.useCallback(e,t)};Rr.useContext=function(e){return Yl.current.useContext(e)};Rr.useDebugValue=function(){};Rr.useDeferredValue=function(e){return Yl.current.useDeferredValue(e)};Rr.useEffect=function(e,t){return Yl.current.useEffect(e,t)};Rr.useId=function(){return Yl.current.useId()};Rr.useImperativeHandle=function(e,t,n){return Yl.current.useImperativeHandle(e,t,n)};Rr.useInsertionEffect=function(e,t){return Yl.current.useInsertionEffect(e,t)};Rr.useLayoutEffect=function(e,t){return Yl.current.useLayoutEffect(e,t)};Rr.useMemo=function(e,t){return Yl.current.useMemo(e,t)};Rr.useReducer=function(e,t,n){return Yl.current.useReducer(e,t,n)};Rr.useRef=function(e){return Yl.current.useRef(e)};Rr.useState=function(e){return Yl.current.useState(e)};Rr.useSyncExternalStore=function(e,t,n){return Yl.current.useSyncExternalStore(e,t,n)};Rr.useTransition=function(){return Yl.current.useTransition()};Rr.version="18.3.1";pTe.exports=Rr;var N=pTe.exports;const vi=_p(N),u5=Tet({__proto__:null,default:vi},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vet=N,Het=Symbol.for("react.element"),qet=Symbol.for("react.fragment"),Wet=Object.prototype.hasOwnProperty,Get=Vet.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yet={key:!0,ref:!0,__self:!0,__source:!0};function ETe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Wet.call(t,r)&&!Yet.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Het,type:e,key:s,ref:o,props:i,_owner:Get.current}}oL.Fragment=qet;oL.jsx=ETe;oL.jsxs=ETe;hTe.exports=oL;var E=hTe.exports,mW={},CTe={exports:{}},Xf={},TTe={exports:{}},ATe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,Q){var M=Y.length;Y.push(Q);e:for(;0<M;){var j=M-1>>>1,W=Y[j];if(0<i(W,Q))Y[j]=Q,Y[M]=W,M=j;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var Q=Y[0],M=Y.pop();if(M!==Q){Y[0]=M;e:for(var j=0,W=Y.length,L=W>>>1;j<L;){var q=2*(j+1)-1,J=Y[q],re=q+1,ve=Y[re];if(0>i(J,M))re<W&&0>i(ve,J)?(Y[j]=ve,Y[re]=M,j=re):(Y[j]=J,Y[q]=M,j=q);else if(re<W&&0>i(ve,M))Y[j]=ve,Y[re]=M,j=re;else break e}}return Q}function i(Y,Q){var M=Y.sortIndex-Q.sortIndex;return M!==0?M:Y.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var Q=n(l);Q!==null;){if(Q.callback===null)r(l);else if(Q.startTime<=Y)r(l),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=n(l)}}function x(Y){if(m=!1,b(Y),!p)if(n(u)!==null)p=!0,U(_);else{var Q=n(l);Q!==null&&G(x,Q.startTime-Y)}}function _(Y,Q){p=!1,m&&(m=!1,y(S),S=-1),h=!0;var M=d;try{for(b(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||Y&&!R());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var W=j(f.expirationTime<=Q);Q=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(Q)}else r(u);f=n(u)}if(f!==null)var L=!0;else{var q=n(l);q!==null&&G(x,q.startTime-Q),L=!1}return L}finally{f=null,d=M,h=!1}}var C=!1,T=null,S=-1,k=5,I=-1;function R(){return!(e.unstable_now()-I<k)}function F(){if(T!==null){var Y=e.unstable_now();I=Y;var Q=!0;try{Q=T(!0,Y)}finally{Q?O():(C=!1,T=null)}}else C=!1}var O;if(typeof v=="function")O=function(){v(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=F,O=function(){H.postMessage(null)}}else O=function(){g(F,0)};function U(Y){T=Y,C||(C=!0,O())}function G(Y,Q){S=g(function(){Y(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,U(_))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var M=d;d=Q;try{return Y()}finally{d=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,Q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var M=d;d=Y;try{return Q()}finally{d=M}},e.unstable_scheduleCallback=function(Y,Q,M){var j=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?j+M:j):M=j,Y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=M+W,Y={id:c++,callback:Q,priorityLevel:Y,startTime:M,expirationTime:W,sortIndex:-1},M>j?(Y.sortIndex=M,t(l,Y),n(u)===null&&Y===n(l)&&(m?(y(S),S=-1):m=!0,G(x,M-j))):(Y.sortIndex=W,t(u,Y),p||h||(p=!0,U(_))),Y},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(Y){var Q=d;return function(){var M=d;d=Q;try{return Y.apply(this,arguments)}finally{d=M}}}})(ATe);TTe.exports=ATe;var Ket=TTe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xet=N,Ff=Ket;function kt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var STe=new Set,r3={};function k_(e,t){ZC(e,t),ZC(e+"Capture",t)}function ZC(e,t){for(r3[e]=t,e=0;e<t.length;e++)STe.add(t[e])}var qg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gW=Object.prototype.hasOwnProperty,Qet=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dhe={},hhe={};function Jet(e){return gW.call(hhe,e)?!0:gW.call(dhe,e)?!1:Qet.test(e)?hhe[e]=!0:(dhe[e]=!0,!1)}function Zet(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ett(e,t,n,r){if(t===null||typeof t>"u"||Zet(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Kl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var pu={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pu[e]=new Kl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pu[t]=new Kl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pu[e]=new Kl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pu[e]=new Kl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pu[e]=new Kl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pu[e]=new Kl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pu[e]=new Kl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pu[e]=new Kl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pu[e]=new Kl(e,5,!1,e.toLowerCase(),null,!1,!1)});var yJ=/[\-:]([a-z])/g;function vJ(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yJ,vJ);pu[t]=new Kl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yJ,vJ);pu[t]=new Kl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yJ,vJ);pu[t]=new Kl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pu[e]=new Kl(e,1,!1,e.toLowerCase(),null,!1,!1)});pu.xlinkHref=new Kl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pu[e]=new Kl(e,1,!1,e.toLowerCase(),null,!0,!0)});function bJ(e,t,n,r){var i=pu.hasOwnProperty(t)?pu[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ett(t,n,i,r)&&(n=null),r||i===null?Jet(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var by=Xet.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j4=Symbol.for("react.element"),$2=Symbol.for("react.portal"),M2=Symbol.for("react.fragment"),xJ=Symbol.for("react.strict_mode"),yW=Symbol.for("react.profiler"),DTe=Symbol.for("react.provider"),ITe=Symbol.for("react.context"),wJ=Symbol.for("react.forward_ref"),vW=Symbol.for("react.suspense"),bW=Symbol.for("react.suspense_list"),_J=Symbol.for("react.memo"),m1=Symbol.for("react.lazy"),kTe=Symbol.for("react.offscreen"),phe=Symbol.iterator;function cD(e){return e===null||typeof e!="object"?null:(e=phe&&e[phe]||e["@@iterator"],typeof e=="function"?e:null)}var Xs=Object.assign,OU;function cI(e){if(OU===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);OU=t&&t[1]||""}return`
`+OU+e}var FU=!1;function $U(e,t){if(!e||FU)return"";FU=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{FU=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?cI(e):""}function ttt(e){switch(e.tag){case 5:return cI(e.type);case 16:return cI("Lazy");case 13:return cI("Suspense");case 19:return cI("SuspenseList");case 0:case 2:case 15:return e=$U(e.type,!1),e;case 11:return e=$U(e.type.render,!1),e;case 1:return e=$U(e.type,!0),e;default:return""}}function xW(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M2:return"Fragment";case $2:return"Portal";case yW:return"Profiler";case xJ:return"StrictMode";case vW:return"Suspense";case bW:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ITe:return(e.displayName||"Context")+".Consumer";case DTe:return(e._context.displayName||"Context")+".Provider";case wJ:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _J:return t=e.displayName||null,t!==null?t:xW(e.type)||"Memo";case m1:t=e._payload,e=e._init;try{return xW(e(t))}catch{}}return null}function ntt(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xW(t);case 8:return t===xJ?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tv(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RTe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rtt(e){var t=RTe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function U4(e){e._valueTracker||(e._valueTracker=rtt(e))}function NTe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=RTe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function l5(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wW(e,t){var n=t.checked;return Xs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function mhe(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Tv(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PTe(e,t){t=t.checked,t!=null&&bJ(e,"checked",t,!1)}function _W(e,t){PTe(e,t);var n=Tv(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?EW(e,t.type,n):t.hasOwnProperty("defaultValue")&&EW(e,t.type,Tv(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ghe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function EW(e,t,n){(t!=="number"||l5(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var fI=Array.isArray;function uC(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Tv(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function CW(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(kt(91));return Xs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yhe(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(kt(92));if(fI(n)){if(1<n.length)throw Error(kt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tv(n)}}function OTe(e,t){var n=Tv(t.value),r=Tv(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function vhe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function FTe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TW(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?FTe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var z4,$Te=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(z4=z4||document.createElement("div"),z4.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=z4.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function i3(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rk={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},itt=["Webkit","ms","Moz","O"];Object.keys(rk).forEach(function(e){itt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rk[t]=rk[e]})});function MTe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||rk.hasOwnProperty(e)&&rk[e]?(""+t).trim():t+"px"}function LTe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=MTe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var stt=Xs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function AW(e,t){if(t){if(stt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(kt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(kt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(kt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(kt(62))}}function SW(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DW=null;function EJ(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var IW=null,lC=null,cC=null;function bhe(e){if(e=tN(e)){if(typeof IW!="function")throw Error(kt(280));var t=e.stateNode;t&&(t=fL(t),IW(e.stateNode,e.type,t))}}function BTe(e){lC?cC?cC.push(e):cC=[e]:lC=e}function jTe(){if(lC){var e=lC,t=cC;if(cC=lC=null,bhe(e),t)for(e=0;e<t.length;e++)bhe(t[e])}}function UTe(e,t){return e(t)}function zTe(){}var MU=!1;function VTe(e,t,n){if(MU)return e(t,n);MU=!0;try{return UTe(e,t,n)}finally{MU=!1,(lC!==null||cC!==null)&&(zTe(),jTe())}}function s3(e,t){var n=e.stateNode;if(n===null)return null;var r=fL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(kt(231,t,typeof n));return n}var kW=!1;if(qg)try{var fD={};Object.defineProperty(fD,"passive",{get:function(){kW=!0}}),window.addEventListener("test",fD,fD),window.removeEventListener("test",fD,fD)}catch{kW=!1}function ott(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var ik=!1,c5=null,f5=!1,RW=null,att={onError:function(e){ik=!0,c5=e}};function utt(e,t,n,r,i,s,o,a,u){ik=!1,c5=null,ott.apply(att,arguments)}function ltt(e,t,n,r,i,s,o,a,u){if(utt.apply(this,arguments),ik){if(ik){var l=c5;ik=!1,c5=null}else throw Error(kt(198));f5||(f5=!0,RW=l)}}function R_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function HTe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xhe(e){if(R_(e)!==e)throw Error(kt(188))}function ctt(e){var t=e.alternate;if(!t){if(t=R_(e),t===null)throw Error(kt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return xhe(i),e;if(s===r)return xhe(i),t;s=s.sibling}throw Error(kt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(kt(189))}}if(n.alternate!==r)throw Error(kt(190))}if(n.tag!==3)throw Error(kt(188));return n.stateNode.current===n?e:t}function qTe(e){return e=ctt(e),e!==null?WTe(e):null}function WTe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=WTe(e);if(t!==null)return t;e=e.sibling}return null}var GTe=Ff.unstable_scheduleCallback,whe=Ff.unstable_cancelCallback,ftt=Ff.unstable_shouldYield,dtt=Ff.unstable_requestPaint,Co=Ff.unstable_now,htt=Ff.unstable_getCurrentPriorityLevel,CJ=Ff.unstable_ImmediatePriority,YTe=Ff.unstable_UserBlockingPriority,d5=Ff.unstable_NormalPriority,ptt=Ff.unstable_LowPriority,KTe=Ff.unstable_IdlePriority,aL=null,A0=null;function mtt(e){if(A0&&typeof A0.onCommitFiberRoot=="function")try{A0.onCommitFiberRoot(aL,e,void 0,(e.current.flags&128)===128)}catch{}}var Zh=Math.clz32?Math.clz32:vtt,gtt=Math.log,ytt=Math.LN2;function vtt(e){return e>>>=0,e===0?32:31-(gtt(e)/ytt|0)|0}var V4=64,H4=4194304;function dI(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function h5(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=dI(a):(s&=o,s!==0&&(r=dI(s)))}else o=n&~i,o!==0?r=dI(o):s!==0&&(r=dI(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zh(t),i=1<<n,r|=e[n],t&=~i;return r}function btt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xtt(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Zh(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=btt(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function NW(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XTe(){var e=V4;return V4<<=1,!(V4&4194240)&&(V4=64),e}function LU(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ZR(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zh(t),e[t]=n}function wtt(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Zh(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function TJ(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zh(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var qi=0;function QTe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var JTe,AJ,ZTe,eAe,tAe,PW=!1,q4=[],ev=null,tv=null,nv=null,o3=new Map,a3=new Map,A1=[],_tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _he(e,t){switch(e){case"focusin":case"focusout":ev=null;break;case"dragenter":case"dragleave":tv=null;break;case"mouseover":case"mouseout":nv=null;break;case"pointerover":case"pointerout":o3.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":a3.delete(t.pointerId)}}function dD(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=tN(t),t!==null&&AJ(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ett(e,t,n,r,i){switch(t){case"focusin":return ev=dD(ev,e,t,n,r,i),!0;case"dragenter":return tv=dD(tv,e,t,n,r,i),!0;case"mouseover":return nv=dD(nv,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return o3.set(s,dD(o3.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,a3.set(s,dD(a3.get(s)||null,e,t,n,r,i)),!0}return!1}function nAe(e){var t=iw(e.target);if(t!==null){var n=R_(t);if(n!==null){if(t=n.tag,t===13){if(t=HTe(n),t!==null){e.blockedOn=t,tAe(e.priority,function(){ZTe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function UO(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=OW(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);DW=r,n.target.dispatchEvent(r),DW=null}else return t=tN(n),t!==null&&AJ(t),e.blockedOn=n,!1;t.shift()}return!0}function Ehe(e,t,n){UO(e)&&n.delete(t)}function Ctt(){PW=!1,ev!==null&&UO(ev)&&(ev=null),tv!==null&&UO(tv)&&(tv=null),nv!==null&&UO(nv)&&(nv=null),o3.forEach(Ehe),a3.forEach(Ehe)}function hD(e,t){e.blockedOn===t&&(e.blockedOn=null,PW||(PW=!0,Ff.unstable_scheduleCallback(Ff.unstable_NormalPriority,Ctt)))}function u3(e){function t(i){return hD(i,e)}if(0<q4.length){hD(q4[0],e);for(var n=1;n<q4.length;n++){var r=q4[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ev!==null&&hD(ev,e),tv!==null&&hD(tv,e),nv!==null&&hD(nv,e),o3.forEach(t),a3.forEach(t),n=0;n<A1.length;n++)r=A1[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<A1.length&&(n=A1[0],n.blockedOn===null);)nAe(n),n.blockedOn===null&&A1.shift()}var fC=by.ReactCurrentBatchConfig,p5=!0;function Ttt(e,t,n,r){var i=qi,s=fC.transition;fC.transition=null;try{qi=1,SJ(e,t,n,r)}finally{qi=i,fC.transition=s}}function Att(e,t,n,r){var i=qi,s=fC.transition;fC.transition=null;try{qi=4,SJ(e,t,n,r)}finally{qi=i,fC.transition=s}}function SJ(e,t,n,r){if(p5){var i=OW(e,t,n,r);if(i===null)YU(e,t,r,m5,n),_he(e,r);else if(Ett(i,e,t,n,r))r.stopPropagation();else if(_he(e,r),t&4&&-1<_tt.indexOf(e)){for(;i!==null;){var s=tN(i);if(s!==null&&JTe(s),s=OW(e,t,n,r),s===null&&YU(e,t,r,m5,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else YU(e,t,r,null,n)}}var m5=null;function OW(e,t,n,r){if(m5=null,e=EJ(r),e=iw(e),e!==null)if(t=R_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=HTe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return m5=e,null}function rAe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(htt()){case CJ:return 1;case YTe:return 4;case d5:case ptt:return 16;case KTe:return 536870912;default:return 16}default:return 16}}var M1=null,DJ=null,zO=null;function iAe(){if(zO)return zO;var e,t=DJ,n=t.length,r,i="value"in M1?M1.value:M1.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return zO=i.slice(e,1<r?1-r:void 0)}function VO(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function W4(){return!0}function Che(){return!1}function Qf(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?W4:Che,this.isPropagationStopped=Che,this}return Xs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=W4)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=W4)},persist:function(){},isPersistent:W4}),t}var CA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IJ=Qf(CA),eN=Xs({},CA,{view:0,detail:0}),Stt=Qf(eN),BU,jU,pD,uL=Xs({},eN,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kJ,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pD&&(pD&&e.type==="mousemove"?(BU=e.screenX-pD.screenX,jU=e.screenY-pD.screenY):jU=BU=0,pD=e),BU)},movementY:function(e){return"movementY"in e?e.movementY:jU}}),The=Qf(uL),Dtt=Xs({},uL,{dataTransfer:0}),Itt=Qf(Dtt),ktt=Xs({},eN,{relatedTarget:0}),UU=Qf(ktt),Rtt=Xs({},CA,{animationName:0,elapsedTime:0,pseudoElement:0}),Ntt=Qf(Rtt),Ptt=Xs({},CA,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ott=Qf(Ptt),Ftt=Xs({},CA,{data:0}),Ahe=Qf(Ftt),$tt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mtt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ltt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Btt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ltt[e])?!!t[e]:!1}function kJ(){return Btt}var jtt=Xs({},eN,{key:function(e){if(e.key){var t=$tt[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=VO(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mtt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kJ,charCode:function(e){return e.type==="keypress"?VO(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?VO(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Utt=Qf(jtt),ztt=Xs({},uL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),She=Qf(ztt),Vtt=Xs({},eN,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kJ}),Htt=Qf(Vtt),qtt=Xs({},CA,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wtt=Qf(qtt),Gtt=Xs({},uL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ytt=Qf(Gtt),Ktt=[9,13,27,32],RJ=qg&&"CompositionEvent"in window,sk=null;qg&&"documentMode"in document&&(sk=document.documentMode);var Xtt=qg&&"TextEvent"in window&&!sk,sAe=qg&&(!RJ||sk&&8<sk&&11>=sk),Dhe=" ",Ihe=!1;function oAe(e,t){switch(e){case"keyup":return Ktt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aAe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var L2=!1;function Qtt(e,t){switch(e){case"compositionend":return aAe(t);case"keypress":return t.which!==32?null:(Ihe=!0,Dhe);case"textInput":return e=t.data,e===Dhe&&Ihe?null:e;default:return null}}function Jtt(e,t){if(L2)return e==="compositionend"||!RJ&&oAe(e,t)?(e=iAe(),zO=DJ=M1=null,L2=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sAe&&t.locale!=="ko"?null:t.data;default:return null}}var Ztt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function khe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ztt[e.type]:t==="textarea"}function uAe(e,t,n,r){BTe(r),t=g5(t,"onChange"),0<t.length&&(n=new IJ("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ok=null,l3=null;function ent(e){bAe(e,0)}function lL(e){var t=U2(e);if(NTe(t))return e}function tnt(e,t){if(e==="change")return t}var lAe=!1;if(qg){var zU;if(qg){var VU="oninput"in document;if(!VU){var Rhe=document.createElement("div");Rhe.setAttribute("oninput","return;"),VU=typeof Rhe.oninput=="function"}zU=VU}else zU=!1;lAe=zU&&(!document.documentMode||9<document.documentMode)}function Nhe(){ok&&(ok.detachEvent("onpropertychange",cAe),l3=ok=null)}function cAe(e){if(e.propertyName==="value"&&lL(l3)){var t=[];uAe(t,l3,e,EJ(e)),VTe(ent,t)}}function nnt(e,t,n){e==="focusin"?(Nhe(),ok=t,l3=n,ok.attachEvent("onpropertychange",cAe)):e==="focusout"&&Nhe()}function rnt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lL(l3)}function int(e,t){if(e==="click")return lL(t)}function snt(e,t){if(e==="input"||e==="change")return lL(t)}function ont(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cp=typeof Object.is=="function"?Object.is:ont;function c3(e,t){if(cp(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gW.call(t,i)||!cp(e[i],t[i]))return!1}return!0}function Phe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ohe(e,t){var n=Phe(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Phe(n)}}function fAe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fAe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dAe(){for(var e=window,t=l5();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=l5(e.document)}return t}function NJ(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ant(e){var t=dAe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fAe(n.ownerDocument.documentElement,n)){if(r!==null&&NJ(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Ohe(n,s);var o=Ohe(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var unt=qg&&"documentMode"in document&&11>=document.documentMode,B2=null,FW=null,ak=null,$W=!1;function Fhe(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$W||B2==null||B2!==l5(r)||(r=B2,"selectionStart"in r&&NJ(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ak&&c3(ak,r)||(ak=r,r=g5(FW,"onSelect"),0<r.length&&(t=new IJ("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=B2)))}function G4(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var j2={animationend:G4("Animation","AnimationEnd"),animationiteration:G4("Animation","AnimationIteration"),animationstart:G4("Animation","AnimationStart"),transitionend:G4("Transition","TransitionEnd")},HU={},hAe={};qg&&(hAe=document.createElement("div").style,"AnimationEvent"in window||(delete j2.animationend.animation,delete j2.animationiteration.animation,delete j2.animationstart.animation),"TransitionEvent"in window||delete j2.transitionend.transition);function cL(e){if(HU[e])return HU[e];if(!j2[e])return e;var t=j2[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hAe)return HU[e]=t[n];return e}var pAe=cL("animationend"),mAe=cL("animationiteration"),gAe=cL("animationstart"),yAe=cL("transitionend"),vAe=new Map,$he="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hb(e,t){vAe.set(e,t),k_(t,[e])}for(var qU=0;qU<$he.length;qU++){var WU=$he[qU],lnt=WU.toLowerCase(),cnt=WU[0].toUpperCase()+WU.slice(1);hb(lnt,"on"+cnt)}hb(pAe,"onAnimationEnd");hb(mAe,"onAnimationIteration");hb(gAe,"onAnimationStart");hb("dblclick","onDoubleClick");hb("focusin","onFocus");hb("focusout","onBlur");hb(yAe,"onTransitionEnd");ZC("onMouseEnter",["mouseout","mouseover"]);ZC("onMouseLeave",["mouseout","mouseover"]);ZC("onPointerEnter",["pointerout","pointerover"]);ZC("onPointerLeave",["pointerout","pointerover"]);k_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));k_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));k_("onBeforeInput",["compositionend","keypress","textInput","paste"]);k_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));k_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));k_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fnt=new Set("cancel close invalid load scroll toggle".split(" ").concat(hI));function Mhe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ltt(r,t,void 0,e),e.currentTarget=null}function bAe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Mhe(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Mhe(i,a,l),s=u}}}if(f5)throw e=RW,f5=!1,RW=null,e}function bs(e,t){var n=t[UW];n===void 0&&(n=t[UW]=new Set);var r=e+"__bubble";n.has(r)||(xAe(t,e,2,!1),n.add(r))}function GU(e,t,n){var r=0;t&&(r|=4),xAe(n,e,r,t)}var Y4="_reactListening"+Math.random().toString(36).slice(2);function f3(e){if(!e[Y4]){e[Y4]=!0,STe.forEach(function(n){n!=="selectionchange"&&(fnt.has(n)||GU(n,!1,e),GU(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Y4]||(t[Y4]=!0,GU("selectionchange",!1,t))}}function xAe(e,t,n,r){switch(rAe(t)){case 1:var i=Ttt;break;case 4:i=Att;break;default:i=SJ}n=i.bind(null,t,n,e),i=void 0,!kW||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function YU(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=iw(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}VTe(function(){var l=s,c=EJ(n),f=[];e:{var d=vAe.get(e);if(d!==void 0){var h=IJ,p=e;switch(e){case"keypress":if(VO(n)===0)break e;case"keydown":case"keyup":h=Utt;break;case"focusin":p="focus",h=UU;break;case"focusout":p="blur",h=UU;break;case"beforeblur":case"afterblur":h=UU;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=The;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Itt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Htt;break;case pAe:case mAe:case gAe:h=Ntt;break;case yAe:h=Wtt;break;case"scroll":h=Stt;break;case"wheel":h=Ytt;break;case"copy":case"cut":case"paste":h=Ott;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=She}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=s3(v,y),x!=null&&m.push(d3(v,x,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==DW&&(p=n.relatedTarget||n.fromElement)&&(iw(p)||p[Wg]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?iw(p):null,p!==null&&(g=R_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=The,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=She,x="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:U2(h),b=p==null?d:U2(p),d=new m(x,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,x=null,iw(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,x=m),g=x,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=UE(b))v++;for(b=0,x=y;x;x=UE(x))b++;for(;0<v-b;)m=UE(m),v--;for(;0<b-v;)y=UE(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=UE(m),y=UE(y)}m=null}else m=null;h!==null&&Lhe(f,d,h,m,!1),p!==null&&g!==null&&Lhe(f,g,p,m,!0)}}e:{if(d=l?U2(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var _=tnt;else if(khe(d))if(lAe)_=snt;else{_=rnt;var C=nnt}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=int);if(_&&(_=_(e,l))){uAe(f,_,n,c);break e}C&&C(e,d,l),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&EW(d,"number",d.value)}switch(C=l?U2(l):window,e){case"focusin":(khe(C)||C.contentEditable==="true")&&(B2=C,FW=l,ak=null);break;case"focusout":ak=FW=B2=null;break;case"mousedown":$W=!0;break;case"contextmenu":case"mouseup":case"dragend":$W=!1,Fhe(f,n,c);break;case"selectionchange":if(unt)break;case"keydown":case"keyup":Fhe(f,n,c)}var T;if(RJ)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else L2?oAe(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(sAe&&n.locale!=="ko"&&(L2||S!=="onCompositionStart"?S==="onCompositionEnd"&&L2&&(T=iAe()):(M1=c,DJ="value"in M1?M1.value:M1.textContent,L2=!0)),C=g5(l,S),0<C.length&&(S=new Ahe(S,e,null,n,c),f.push({event:S,listeners:C}),T?S.data=T:(T=aAe(n),T!==null&&(S.data=T)))),(T=Xtt?Qtt(e,n):Jtt(e,n))&&(l=g5(l,"onBeforeInput"),0<l.length&&(c=new Ahe("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}bAe(f,t)})}function d3(e,t,n){return{instance:e,listener:t,currentTarget:n}}function g5(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=s3(e,n),s!=null&&r.unshift(d3(e,s,i)),s=s3(e,t),s!=null&&r.push(d3(e,s,i))),e=e.return}return r}function UE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lhe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=s3(n,s),u!=null&&o.unshift(d3(n,u,a))):i||(u=s3(n,s),u!=null&&o.push(d3(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var dnt=/\r\n?/g,hnt=/\u0000|\uFFFD/g;function Bhe(e){return(typeof e=="string"?e:""+e).replace(dnt,`
`).replace(hnt,"")}function K4(e,t,n){if(t=Bhe(t),Bhe(e)!==t&&n)throw Error(kt(425))}function y5(){}var MW=null,LW=null;function BW(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jW=typeof setTimeout=="function"?setTimeout:void 0,pnt=typeof clearTimeout=="function"?clearTimeout:void 0,jhe=typeof Promise=="function"?Promise:void 0,mnt=typeof queueMicrotask=="function"?queueMicrotask:typeof jhe<"u"?function(e){return jhe.resolve(null).then(e).catch(gnt)}:jW;function gnt(e){setTimeout(function(){throw e})}function KU(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),u3(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);u3(t)}function rv(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Uhe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var TA=Math.random().toString(36).slice(2),o0="__reactFiber$"+TA,h3="__reactProps$"+TA,Wg="__reactContainer$"+TA,UW="__reactEvents$"+TA,ynt="__reactListeners$"+TA,vnt="__reactHandles$"+TA;function iw(e){var t=e[o0];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wg]||n[o0]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Uhe(e);e!==null;){if(n=e[o0])return n;e=Uhe(e)}return t}e=n,n=e.parentNode}return null}function tN(e){return e=e[o0]||e[Wg],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function U2(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(kt(33))}function fL(e){return e[h3]||null}var zW=[],z2=-1;function pb(e){return{current:e}}function As(e){0>z2||(e.current=zW[z2],zW[z2]=null,z2--)}function hs(e,t){z2++,zW[z2]=e.current,e.current=t}var Av={},el=pb(Av),Rc=pb(!1),jw=Av;function eT(e,t){var n=e.type.contextTypes;if(!n)return Av;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nc(e){return e=e.childContextTypes,e!=null}function v5(){As(Rc),As(el)}function zhe(e,t,n){if(el.current!==Av)throw Error(kt(168));hs(el,t),hs(Rc,n)}function wAe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(kt(108,ntt(e)||"Unknown",i));return Xs({},n,r)}function b5(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Av,jw=el.current,hs(el,e),hs(Rc,Rc.current),!0}function Vhe(e,t,n){var r=e.stateNode;if(!r)throw Error(kt(169));n?(e=wAe(e,t,jw),r.__reactInternalMemoizedMergedChildContext=e,As(Rc),As(el),hs(el,e)):As(Rc),hs(Rc,n)}var ng=null,dL=!1,XU=!1;function _Ae(e){ng===null?ng=[e]:ng.push(e)}function bnt(e){dL=!0,_Ae(e)}function mb(){if(!XU&&ng!==null){XU=!0;var e=0,t=qi;try{var n=ng;for(qi=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ng=null,dL=!1}catch(i){throw ng!==null&&(ng=ng.slice(e+1)),GTe(CJ,mb),i}finally{qi=t,XU=!1}}return null}var V2=[],H2=0,x5=null,w5=0,wd=[],_d=0,Uw=null,mg=1,gg="";function Ax(e,t){V2[H2++]=w5,V2[H2++]=x5,x5=e,w5=t}function EAe(e,t,n){wd[_d++]=mg,wd[_d++]=gg,wd[_d++]=Uw,Uw=e;var r=mg;e=gg;var i=32-Zh(r)-1;r&=~(1<<i),n+=1;var s=32-Zh(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,mg=1<<32-Zh(t)+i|n<<i|r,gg=s+e}else mg=1<<s|n<<i|r,gg=e}function PJ(e){e.return!==null&&(Ax(e,1),EAe(e,1,0))}function OJ(e){for(;e===x5;)x5=V2[--H2],V2[H2]=null,w5=V2[--H2],V2[H2]=null;for(;e===Uw;)Uw=wd[--_d],wd[_d]=null,gg=wd[--_d],wd[_d]=null,mg=wd[--_d],wd[_d]=null}var If=null,wf=null,Ls=!1,Oh=null;function CAe(e,t){var n=Id(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Hhe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,If=e,wf=rv(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,If=e,wf=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Uw!==null?{id:mg,overflow:gg}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Id(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,If=e,wf=null,!0):!1;default:return!1}}function VW(e){return(e.mode&1)!==0&&(e.flags&128)===0}function HW(e){if(Ls){var t=wf;if(t){var n=t;if(!Hhe(e,t)){if(VW(e))throw Error(kt(418));t=rv(n.nextSibling);var r=If;t&&Hhe(e,t)?CAe(r,n):(e.flags=e.flags&-4097|2,Ls=!1,If=e)}}else{if(VW(e))throw Error(kt(418));e.flags=e.flags&-4097|2,Ls=!1,If=e}}}function qhe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;If=e}function X4(e){if(e!==If)return!1;if(!Ls)return qhe(e),Ls=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!BW(e.type,e.memoizedProps)),t&&(t=wf)){if(VW(e))throw TAe(),Error(kt(418));for(;t;)CAe(e,t),t=rv(t.nextSibling)}if(qhe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(kt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wf=rv(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wf=null}}else wf=If?rv(e.stateNode.nextSibling):null;return!0}function TAe(){for(var e=wf;e;)e=rv(e.nextSibling)}function tT(){wf=If=null,Ls=!1}function FJ(e){Oh===null?Oh=[e]:Oh.push(e)}var xnt=by.ReactCurrentBatchConfig;function mD(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(kt(309));var r=n.stateNode}if(!r)throw Error(kt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(kt(284));if(!n._owner)throw Error(kt(290,e))}return e}function Q4(e,t){throw e=Object.prototype.toString.call(t),Error(kt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Whe(e){var t=e._init;return t(e._payload)}function AAe(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=av(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=rz(b,y.mode,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,x){var _=b.type;return _===M2?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===m1&&Whe(_)===v.type)?(x=i(v,b.props),x.ref=mD(y,v,b),x.return=y,x):(x=XO(b.type,b.key,b.props,null,y.mode,x),x.ref=mD(y,v,b),x.return=y,x)}function l(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=iz(b,y.mode,x),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,_){return v===null||v.tag!==7?(v=Aw(b,y.mode,x,_),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=rz(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case j4:return b=XO(v.type,v.key,v.props,null,y.mode,b),b.ref=mD(y,null,v),b.return=y,b;case $2:return v=iz(v,y.mode,b),v.return=y,v;case m1:var x=v._init;return f(y,x(v._payload),b)}if(fI(v)||cD(v))return v=Aw(v,y.mode,b,null),v.return=y,v;Q4(y,v)}return null}function d(y,v,b,x){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case j4:return b.key===_?u(y,v,b,x):null;case $2:return b.key===_?l(y,v,b,x):null;case m1:return _=b._init,d(y,v,_(b._payload),x)}if(fI(b)||cD(b))return _!==null?null:c(y,v,b,x,null);Q4(y,b)}return null}function h(y,v,b,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case j4:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,_);case $2:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,_);case m1:var C=x._init;return h(y,v,b,C(x._payload),_)}if(fI(x)||cD(x))return y=y.get(b)||null,c(v,y,x,_,null);Q4(v,x)}return null}function p(y,v,b,x){for(var _=null,C=null,T=v,S=v=0,k=null;T!==null&&S<b.length;S++){T.index>S?(k=T,T=null):k=T.sibling;var I=d(y,T,b[S],x);if(I===null){T===null&&(T=k);break}e&&T&&I.alternate===null&&t(y,T),v=s(I,v,S),C===null?_=I:C.sibling=I,C=I,T=k}if(S===b.length)return n(y,T),Ls&&Ax(y,S),_;if(T===null){for(;S<b.length;S++)T=f(y,b[S],x),T!==null&&(v=s(T,v,S),C===null?_=T:C.sibling=T,C=T);return Ls&&Ax(y,S),_}for(T=r(y,T);S<b.length;S++)k=h(T,y,S,b[S],x),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?S:k.key),v=s(k,v,S),C===null?_=k:C.sibling=k,C=k);return e&&T.forEach(function(R){return t(y,R)}),Ls&&Ax(y,S),_}function m(y,v,b,x){var _=cD(b);if(typeof _!="function")throw Error(kt(150));if(b=_.call(b),b==null)throw Error(kt(151));for(var C=_=null,T=v,S=v=0,k=null,I=b.next();T!==null&&!I.done;S++,I=b.next()){T.index>S?(k=T,T=null):k=T.sibling;var R=d(y,T,I.value,x);if(R===null){T===null&&(T=k);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,S),C===null?_=R:C.sibling=R,C=R,T=k}if(I.done)return n(y,T),Ls&&Ax(y,S),_;if(T===null){for(;!I.done;S++,I=b.next())I=f(y,I.value,x),I!==null&&(v=s(I,v,S),C===null?_=I:C.sibling=I,C=I);return Ls&&Ax(y,S),_}for(T=r(y,T);!I.done;S++,I=b.next())I=h(T,y,S,I.value,x),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?S:I.key),v=s(I,v,S),C===null?_=I:C.sibling=I,C=I);return e&&T.forEach(function(F){return t(y,F)}),Ls&&Ax(y,S),_}function g(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===M2&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case j4:e:{for(var _=b.key,C=v;C!==null;){if(C.key===_){if(_=b.type,_===M2){if(C.tag===7){n(y,C.sibling),v=i(C,b.props.children),v.return=y,y=v;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===m1&&Whe(_)===C.type){n(y,C.sibling),v=i(C,b.props),v.ref=mD(y,C,b),v.return=y,y=v;break e}n(y,C);break}else t(y,C);C=C.sibling}b.type===M2?(v=Aw(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=XO(b.type,b.key,b.props,null,y.mode,x),x.ref=mD(y,v,b),x.return=y,y=x)}return o(y);case $2:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=iz(b,y.mode,x),v.return=y,y=v}return o(y);case m1:return C=b._init,g(y,v,C(b._payload),x)}if(fI(b))return p(y,v,b,x);if(cD(b))return m(y,v,b,x);Q4(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=rz(b,y.mode,x),v.return=y,y=v),o(y)):n(y,v)}return g}var nT=AAe(!0),SAe=AAe(!1),_5=pb(null),E5=null,q2=null,$J=null;function MJ(){$J=q2=E5=null}function LJ(e){var t=_5.current;As(_5),e._currentValue=t}function qW(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dC(e,t){E5=e,$J=q2=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Cc=!0),e.firstContext=null)}function Md(e){var t=e._currentValue;if($J!==e)if(e={context:e,memoizedValue:t,next:null},q2===null){if(E5===null)throw Error(kt(308));q2=e,E5.dependencies={lanes:0,firstContext:e}}else q2=q2.next=e;return t}var sw=null;function BJ(e){sw===null?sw=[e]:sw.push(e)}function DAe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,BJ(t)):(n.next=i.next,i.next=n),t.interleaved=n,Gg(e,r)}function Gg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var g1=!1;function jJ(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IAe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function iv(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ci&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Gg(e,n)}return i=r.interleaved,i===null?(t.next=t,BJ(r)):(t.next=i.next,i.next=t),r.interleaved=t,Gg(e,n)}function HO(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,TJ(e,n)}}function Ghe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function C5(e,t,n,r){var i=e.updateQueue;g1=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Xs({},f,d);break e;case 2:g1=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Vw|=o,e.lanes=o,e.memoizedState=f}}function Yhe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(kt(191,i));i.call(r)}}}var nN={},S0=pb(nN),p3=pb(nN),m3=pb(nN);function ow(e){if(e===nN)throw Error(kt(174));return e}function UJ(e,t){switch(hs(m3,t),hs(p3,e),hs(S0,nN),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:TW(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=TW(t,e)}As(S0),hs(S0,t)}function rT(){As(S0),As(p3),As(m3)}function kAe(e){ow(m3.current);var t=ow(S0.current),n=TW(t,e.type);t!==n&&(hs(p3,e),hs(S0,n))}function zJ(e){p3.current===e&&(As(S0),As(p3))}var Gs=pb(0);function T5(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var QU=[];function VJ(){for(var e=0;e<QU.length;e++)QU[e]._workInProgressVersionPrimary=null;QU.length=0}var qO=by.ReactCurrentDispatcher,JU=by.ReactCurrentBatchConfig,zw=0,Ks=null,na=null,Da=null,A5=!1,uk=!1,g3=0,wnt=0;function Tu(){throw Error(kt(321))}function HJ(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cp(e[n],t[n]))return!1;return!0}function qJ(e,t,n,r,i,s){if(zw=s,Ks=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qO.current=e===null||e.memoizedState===null?Tnt:Ant,e=n(r,i),uk){s=0;do{if(uk=!1,g3=0,25<=s)throw Error(kt(301));s+=1,Da=na=null,t.updateQueue=null,qO.current=Snt,e=n(r,i)}while(uk)}if(qO.current=S5,t=na!==null&&na.next!==null,zw=0,Da=na=Ks=null,A5=!1,t)throw Error(kt(300));return e}function WJ(){var e=g3!==0;return g3=0,e}function Kp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Da===null?Ks.memoizedState=Da=e:Da=Da.next=e,Da}function Ld(){if(na===null){var e=Ks.alternate;e=e!==null?e.memoizedState:null}else e=na.next;var t=Da===null?Ks.memoizedState:Da.next;if(t!==null)Da=t,na=e;else{if(e===null)throw Error(kt(310));na=e,e={memoizedState:na.memoizedState,baseState:na.baseState,baseQueue:na.baseQueue,queue:na.queue,next:null},Da===null?Ks.memoizedState=Da=e:Da=Da.next=e}return Da}function y3(e,t){return typeof t=="function"?t(e):t}function ZU(e){var t=Ld(),n=t.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=e;var r=na,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((zw&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ks.lanes|=c,Vw|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,cp(r,t.memoizedState)||(Cc=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ks.lanes|=s,Vw|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ez(e){var t=Ld(),n=t.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);cp(s,t.memoizedState)||(Cc=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function RAe(){}function NAe(e,t){var n=Ks,r=Ld(),i=t(),s=!cp(r.memoizedState,i);if(s&&(r.memoizedState=i,Cc=!0),r=r.queue,GJ(FAe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Da!==null&&Da.memoizedState.tag&1){if(n.flags|=2048,v3(9,OAe.bind(null,n,r,i,t),void 0,null),La===null)throw Error(kt(349));zw&30||PAe(n,t,i)}return i}function PAe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ks.updateQueue,t===null?(t={lastEffect:null,stores:null},Ks.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function OAe(e,t,n,r){t.value=n,t.getSnapshot=r,$Ae(t)&&MAe(e)}function FAe(e,t,n){return n(function(){$Ae(t)&&MAe(e)})}function $Ae(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cp(e,n)}catch{return!0}}function MAe(e){var t=Gg(e,1);t!==null&&ep(t,e,1,-1)}function Khe(e){var t=Kp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y3,lastRenderedState:e},t.queue=e,e=e.dispatch=Cnt.bind(null,Ks,e),[t.memoizedState,e]}function v3(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ks.updateQueue,t===null?(t={lastEffect:null,stores:null},Ks.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function LAe(){return Ld().memoizedState}function WO(e,t,n,r){var i=Kp();Ks.flags|=e,i.memoizedState=v3(1|t,n,void 0,r===void 0?null:r)}function hL(e,t,n,r){var i=Ld();r=r===void 0?null:r;var s=void 0;if(na!==null){var o=na.memoizedState;if(s=o.destroy,r!==null&&HJ(r,o.deps)){i.memoizedState=v3(t,n,s,r);return}}Ks.flags|=e,i.memoizedState=v3(1|t,n,s,r)}function Xhe(e,t){return WO(8390656,8,e,t)}function GJ(e,t){return hL(2048,8,e,t)}function BAe(e,t){return hL(4,2,e,t)}function jAe(e,t){return hL(4,4,e,t)}function UAe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zAe(e,t,n){return n=n!=null?n.concat([e]):null,hL(4,4,UAe.bind(null,t,e),n)}function YJ(){}function VAe(e,t){var n=Ld();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&HJ(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function HAe(e,t){var n=Ld();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&HJ(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qAe(e,t,n){return zw&21?(cp(n,t)||(n=XTe(),Ks.lanes|=n,Vw|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Cc=!0),e.memoizedState=n)}function _nt(e,t){var n=qi;qi=n!==0&&4>n?n:4,e(!0);var r=JU.transition;JU.transition={};try{e(!1),t()}finally{qi=n,JU.transition=r}}function WAe(){return Ld().memoizedState}function Ent(e,t,n){var r=ov(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GAe(e))YAe(t,n);else if(n=DAe(e,t,n,r),n!==null){var i=Pl();ep(n,e,r,i),KAe(n,t,r)}}function Cnt(e,t,n){var r=ov(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GAe(e))YAe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cp(a,o)){var u=t.interleaved;u===null?(i.next=i,BJ(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=DAe(e,t,i,r),n!==null&&(i=Pl(),ep(n,e,r,i),KAe(n,t,r))}}function GAe(e){var t=e.alternate;return e===Ks||t!==null&&t===Ks}function YAe(e,t){uk=A5=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function KAe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,TJ(e,n)}}var S5={readContext:Md,useCallback:Tu,useContext:Tu,useEffect:Tu,useImperativeHandle:Tu,useInsertionEffect:Tu,useLayoutEffect:Tu,useMemo:Tu,useReducer:Tu,useRef:Tu,useState:Tu,useDebugValue:Tu,useDeferredValue:Tu,useTransition:Tu,useMutableSource:Tu,useSyncExternalStore:Tu,useId:Tu,unstable_isNewReconciler:!1},Tnt={readContext:Md,useCallback:function(e,t){return Kp().memoizedState=[e,t===void 0?null:t],e},useContext:Md,useEffect:Xhe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,WO(4194308,4,UAe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return WO(4194308,4,e,t)},useInsertionEffect:function(e,t){return WO(4,2,e,t)},useMemo:function(e,t){var n=Kp();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Kp();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ent.bind(null,Ks,e),[r.memoizedState,e]},useRef:function(e){var t=Kp();return e={current:e},t.memoizedState=e},useState:Khe,useDebugValue:YJ,useDeferredValue:function(e){return Kp().memoizedState=e},useTransition:function(){var e=Khe(!1),t=e[0];return e=_nt.bind(null,e[1]),Kp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ks,i=Kp();if(Ls){if(n===void 0)throw Error(kt(407));n=n()}else{if(n=t(),La===null)throw Error(kt(349));zw&30||PAe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Xhe(FAe.bind(null,r,s,e),[e]),r.flags|=2048,v3(9,OAe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Kp(),t=La.identifierPrefix;if(Ls){var n=gg,r=mg;n=(r&~(1<<32-Zh(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=g3++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wnt++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ant={readContext:Md,useCallback:VAe,useContext:Md,useEffect:GJ,useImperativeHandle:zAe,useInsertionEffect:BAe,useLayoutEffect:jAe,useMemo:HAe,useReducer:ZU,useRef:LAe,useState:function(){return ZU(y3)},useDebugValue:YJ,useDeferredValue:function(e){var t=Ld();return qAe(t,na.memoizedState,e)},useTransition:function(){var e=ZU(y3)[0],t=Ld().memoizedState;return[e,t]},useMutableSource:RAe,useSyncExternalStore:NAe,useId:WAe,unstable_isNewReconciler:!1},Snt={readContext:Md,useCallback:VAe,useContext:Md,useEffect:GJ,useImperativeHandle:zAe,useInsertionEffect:BAe,useLayoutEffect:jAe,useMemo:HAe,useReducer:ez,useRef:LAe,useState:function(){return ez(y3)},useDebugValue:YJ,useDeferredValue:function(e){var t=Ld();return na===null?t.memoizedState=e:qAe(t,na.memoizedState,e)},useTransition:function(){var e=ez(y3)[0],t=Ld().memoizedState;return[e,t]},useMutableSource:RAe,useSyncExternalStore:NAe,useId:WAe,unstable_isNewReconciler:!1};function Dh(e,t){if(e&&e.defaultProps){t=Xs({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function WW(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xs({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pL={isMounted:function(e){return(e=e._reactInternals)?R_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pl(),i=ov(e),s=kg(r,i);s.payload=t,n!=null&&(s.callback=n),t=iv(e,s,i),t!==null&&(ep(t,e,i,r),HO(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pl(),i=ov(e),s=kg(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=iv(e,s,i),t!==null&&(ep(t,e,i,r),HO(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pl(),r=ov(e),i=kg(n,r);i.tag=2,t!=null&&(i.callback=t),t=iv(e,i,r),t!==null&&(ep(t,e,r,n),HO(t,e,r))}};function Qhe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!c3(n,r)||!c3(i,s):!0}function XAe(e,t,n){var r=!1,i=Av,s=t.contextType;return typeof s=="object"&&s!==null?s=Md(s):(i=Nc(t)?jw:el.current,r=t.contextTypes,s=(r=r!=null)?eT(e,i):Av),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Jhe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pL.enqueueReplaceState(t,t.state,null)}function GW(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jJ(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Md(s):(s=Nc(t)?jw:el.current,i.context=eT(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(WW(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&pL.enqueueReplaceState(i,i.state,null),C5(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function iT(e,t){try{var n="",r=t;do n+=ttt(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function tz(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function YW(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dnt=typeof WeakMap=="function"?WeakMap:Map;function QAe(e,t,n){n=kg(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){I5||(I5=!0,iG=r),YW(e,t)},n}function JAe(e,t,n){n=kg(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){YW(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){YW(e,t),typeof r!="function"&&(sv===null?sv=new Set([this]):sv.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Zhe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Dnt;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=znt.bind(null,e,t,n),t.then(e,e))}function epe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tpe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kg(-1,1),t.tag=2,iv(n,t,1))),n.lanes|=1),e)}var Int=by.ReactCurrentOwner,Cc=!1;function _l(e,t,n,r){t.child=e===null?SAe(t,null,n,r):nT(t,e.child,n,r)}function npe(e,t,n,r,i){n=n.render;var s=t.ref;return dC(t,i),r=qJ(e,t,n,r,s,i),n=WJ(),e!==null&&!Cc?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Yg(e,t,i)):(Ls&&n&&PJ(t),t.flags|=1,_l(e,t,r,i),t.child)}function rpe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!nZ(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,ZAe(e,t,s,r,i)):(e=XO(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:c3,n(o,r)&&e.ref===t.ref)return Yg(e,t,i)}return t.flags|=1,e=av(s,r),e.ref=t.ref,e.return=t,t.child=e}function ZAe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(c3(s,r)&&e.ref===t.ref)if(Cc=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Cc=!0);else return t.lanes=e.lanes,Yg(e,t,i)}return KW(e,t,n,r,i)}function eSe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},hs(G2,pf),pf|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,hs(G2,pf),pf|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,hs(G2,pf),pf|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,hs(G2,pf),pf|=r;return _l(e,t,i,n),t.child}function tSe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function KW(e,t,n,r,i){var s=Nc(n)?jw:el.current;return s=eT(t,s),dC(t,i),n=qJ(e,t,n,r,s,i),r=WJ(),e!==null&&!Cc?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Yg(e,t,i)):(Ls&&r&&PJ(t),t.flags|=1,_l(e,t,n,i),t.child)}function ipe(e,t,n,r,i){if(Nc(n)){var s=!0;b5(t)}else s=!1;if(dC(t,i),t.stateNode===null)GO(e,t),XAe(t,n,r),GW(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Md(l):(l=Nc(n)?jw:el.current,l=eT(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Jhe(t,o,r,l),g1=!1;var d=t.memoizedState;o.state=d,C5(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Rc.current||g1?(typeof c=="function"&&(WW(t,n,c,r),u=t.memoizedState),(a=g1||Qhe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,IAe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Dh(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Md(u):(u=Nc(n)?jw:el.current,u=eT(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Jhe(t,o,r,u),g1=!1,d=t.memoizedState,o.state=d,C5(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Rc.current||g1?(typeof h=="function"&&(WW(t,n,h,r),p=t.memoizedState),(l=g1||Qhe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return XW(e,t,n,r,s,i)}function XW(e,t,n,r,i,s){tSe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Vhe(t,n,!1),Yg(e,t,s);r=t.stateNode,Int.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=nT(t,e.child,null,s),t.child=nT(t,null,a,s)):_l(e,t,a,s),t.memoizedState=r.state,i&&Vhe(t,n,!0),t.child}function nSe(e){var t=e.stateNode;t.pendingContext?zhe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zhe(e,t.context,!1),UJ(e,t.containerInfo)}function spe(e,t,n,r,i){return tT(),FJ(i),t.flags|=256,_l(e,t,n,r),t.child}var QW={dehydrated:null,treeContext:null,retryLane:0};function JW(e){return{baseLanes:e,cachePool:null,transitions:null}}function rSe(e,t,n){var r=t.pendingProps,i=Gs.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),hs(Gs,i&1),e===null)return HW(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yL(o,r,0,null),e=Aw(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=JW(n),t.memoizedState=QW,e):KJ(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return knt(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=av(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=av(a,s):(s=Aw(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?JW(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=QW,r}return s=e.child,e=s.sibling,r=av(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function KJ(e,t){return t=yL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function J4(e,t,n,r){return r!==null&&FJ(r),nT(t,e.child,null,n),e=KJ(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function knt(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=tz(Error(kt(422))),J4(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=yL({mode:"visible",children:r.children},i,0,null),s=Aw(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&nT(t,e.child,null,o),t.child.memoizedState=JW(o),t.memoizedState=QW,s);if(!(t.mode&1))return J4(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(kt(419)),r=tz(s,r,void 0),J4(e,t,o,r)}if(a=(o&e.childLanes)!==0,Cc||a){if(r=La,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gg(e,i),ep(r,e,i,-1))}return tZ(),r=tz(Error(kt(421))),J4(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Vnt.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,wf=rv(i.nextSibling),If=t,Ls=!0,Oh=null,e!==null&&(wd[_d++]=mg,wd[_d++]=gg,wd[_d++]=Uw,mg=e.id,gg=e.overflow,Uw=t),t=KJ(t,r.children),t.flags|=4096,t)}function ope(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qW(e.return,t,n)}function nz(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iSe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_l(e,t,r.children,n),r=Gs.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ope(e,n,t);else if(e.tag===19)ope(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hs(Gs,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&T5(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),nz(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&T5(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}nz(t,!0,n,null,s);break;case"together":nz(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function GO(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yg(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vw|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(kt(153));if(t.child!==null){for(e=t.child,n=av(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=av(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Rnt(e,t,n){switch(t.tag){case 3:nSe(t),tT();break;case 5:kAe(t);break;case 1:Nc(t.type)&&b5(t);break;case 4:UJ(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;hs(_5,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(hs(Gs,Gs.current&1),t.flags|=128,null):n&t.child.childLanes?rSe(e,t,n):(hs(Gs,Gs.current&1),e=Yg(e,t,n),e!==null?e.sibling:null);hs(Gs,Gs.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return iSe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),hs(Gs,Gs.current),r)break;return null;case 22:case 23:return t.lanes=0,eSe(e,t,n)}return Yg(e,t,n)}var sSe,ZW,oSe,aSe;sSe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ZW=function(){};oSe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ow(S0.current);var s=null;switch(n){case"input":i=wW(e,i),r=wW(e,r),s=[];break;case"select":i=Xs({},i,{value:void 0}),r=Xs({},r,{value:void 0}),s=[];break;case"textarea":i=CW(e,i),r=CW(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=y5)}AW(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(r3.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(r3.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&bs("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};aSe=function(e,t,n,r){n!==r&&(t.flags|=4)};function gD(e,t){if(!Ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Au(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Nnt(e,t,n){var r=t.pendingProps;switch(OJ(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Au(t),null;case 1:return Nc(t.type)&&v5(),Au(t),null;case 3:return r=t.stateNode,rT(),As(Rc),As(el),VJ(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(X4(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Oh!==null&&(aG(Oh),Oh=null))),ZW(e,t),Au(t),null;case 5:zJ(t);var i=ow(m3.current);if(n=t.type,e!==null&&t.stateNode!=null)oSe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(kt(166));return Au(t),null}if(e=ow(S0.current),X4(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[o0]=t,r[h3]=s,e=(t.mode&1)!==0,n){case"dialog":bs("cancel",r),bs("close",r);break;case"iframe":case"object":case"embed":bs("load",r);break;case"video":case"audio":for(i=0;i<hI.length;i++)bs(hI[i],r);break;case"source":bs("error",r);break;case"img":case"image":case"link":bs("error",r),bs("load",r);break;case"details":bs("toggle",r);break;case"input":mhe(r,s),bs("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bs("invalid",r);break;case"textarea":yhe(r,s),bs("invalid",r)}AW(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&K4(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&K4(r.textContent,a,e),i=["children",""+a]):r3.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bs("scroll",r)}switch(n){case"input":U4(r),ghe(r,s,!0);break;case"textarea":U4(r),vhe(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=y5)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=FTe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[o0]=t,e[h3]=r,sSe(e,t,!1,!1),t.stateNode=e;e:{switch(o=SW(n,r),n){case"dialog":bs("cancel",e),bs("close",e),i=r;break;case"iframe":case"object":case"embed":bs("load",e),i=r;break;case"video":case"audio":for(i=0;i<hI.length;i++)bs(hI[i],e);i=r;break;case"source":bs("error",e),i=r;break;case"img":case"image":case"link":bs("error",e),bs("load",e),i=r;break;case"details":bs("toggle",e),i=r;break;case"input":mhe(e,r),i=wW(e,r),bs("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Xs({},r,{value:void 0}),bs("invalid",e);break;case"textarea":yhe(e,r),i=CW(e,r),bs("invalid",e);break;default:i=r}AW(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?LTe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$Te(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&i3(e,u):typeof u=="number"&&i3(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(r3.hasOwnProperty(s)?u!=null&&s==="onScroll"&&bs("scroll",e):u!=null&&bJ(e,s,u,o))}switch(n){case"input":U4(e),ghe(e,r,!1);break;case"textarea":U4(e),vhe(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Tv(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?uC(e,!!r.multiple,s,!1):r.defaultValue!=null&&uC(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=y5)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Au(t),null;case 6:if(e&&t.stateNode!=null)aSe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(kt(166));if(n=ow(m3.current),ow(S0.current),X4(t)){if(r=t.stateNode,n=t.memoizedProps,r[o0]=t,(s=r.nodeValue!==n)&&(e=If,e!==null))switch(e.tag){case 3:K4(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&K4(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[o0]=t,t.stateNode=r}return Au(t),null;case 13:if(As(Gs),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ls&&wf!==null&&t.mode&1&&!(t.flags&128))TAe(),tT(),t.flags|=98560,s=!1;else if(s=X4(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(kt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(kt(317));s[o0]=t}else tT(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Au(t),s=!1}else Oh!==null&&(aG(Oh),Oh=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Gs.current&1?ca===0&&(ca=3):tZ())),t.updateQueue!==null&&(t.flags|=4),Au(t),null);case 4:return rT(),ZW(e,t),e===null&&f3(t.stateNode.containerInfo),Au(t),null;case 10:return LJ(t.type._context),Au(t),null;case 17:return Nc(t.type)&&v5(),Au(t),null;case 19:if(As(Gs),s=t.memoizedState,s===null)return Au(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)gD(s,!1);else{if(ca!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=T5(e),o!==null){for(t.flags|=128,gD(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hs(Gs,Gs.current&1|2),t.child}e=e.sibling}s.tail!==null&&Co()>sT&&(t.flags|=128,r=!0,gD(s,!1),t.lanes=4194304)}else{if(!r)if(e=T5(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gD(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ls)return Au(t),null}else 2*Co()-s.renderingStartTime>sT&&n!==1073741824&&(t.flags|=128,r=!0,gD(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Co(),t.sibling=null,n=Gs.current,hs(Gs,r?n&1|2:n&1),t):(Au(t),null);case 22:case 23:return eZ(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pf&1073741824&&(Au(t),t.subtreeFlags&6&&(t.flags|=8192)):Au(t),null;case 24:return null;case 25:return null}throw Error(kt(156,t.tag))}function Pnt(e,t){switch(OJ(t),t.tag){case 1:return Nc(t.type)&&v5(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rT(),As(Rc),As(el),VJ(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zJ(t),null;case 13:if(As(Gs),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(kt(340));tT()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return As(Gs),null;case 4:return rT(),null;case 10:return LJ(t.type._context),null;case 22:case 23:return eZ(),null;case 24:return null;default:return null}}var Z4=!1,ju=!1,Ont=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function W2(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){io(e,t,r)}else n.current=null}function eG(e,t,n){try{n()}catch(r){io(e,t,r)}}var ape=!1;function Fnt(e,t){if(MW=p5,e=dAe(),NJ(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(LW={focusedElem:e,selectionRange:n},p5=!1,Kt=t;Kt!==null;)if(t=Kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Kt=e;else for(;Kt!==null;){t=Kt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Dh(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(kt(163))}}catch(x){io(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Kt=e;break}Kt=t.return}return p=ape,ape=!1,p}function lk(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&eG(t,n,s)}i=i.next}while(i!==r)}}function mL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tG(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function uSe(e){var t=e.alternate;t!==null&&(e.alternate=null,uSe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[o0],delete t[h3],delete t[UW],delete t[ynt],delete t[vnt])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lSe(e){return e.tag===5||e.tag===3||e.tag===4}function upe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lSe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nG(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=y5));else if(r!==4&&(e=e.child,e!==null))for(nG(e,t,n),e=e.sibling;e!==null;)nG(e,t,n),e=e.sibling}function rG(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(rG(e,t,n),e=e.sibling;e!==null;)rG(e,t,n),e=e.sibling}var eu=null,kh=!1;function e1(e,t,n){for(n=n.child;n!==null;)cSe(e,t,n),n=n.sibling}function cSe(e,t,n){if(A0&&typeof A0.onCommitFiberUnmount=="function")try{A0.onCommitFiberUnmount(aL,n)}catch{}switch(n.tag){case 5:ju||W2(n,t);case 6:var r=eu,i=kh;eu=null,e1(e,t,n),eu=r,kh=i,eu!==null&&(kh?(e=eu,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):eu.removeChild(n.stateNode));break;case 18:eu!==null&&(kh?(e=eu,n=n.stateNode,e.nodeType===8?KU(e.parentNode,n):e.nodeType===1&&KU(e,n),u3(e)):KU(eu,n.stateNode));break;case 4:r=eu,i=kh,eu=n.stateNode.containerInfo,kh=!0,e1(e,t,n),eu=r,kh=i;break;case 0:case 11:case 14:case 15:if(!ju&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&eG(n,t,o),i=i.next}while(i!==r)}e1(e,t,n);break;case 1:if(!ju&&(W2(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){io(n,t,a)}e1(e,t,n);break;case 21:e1(e,t,n);break;case 22:n.mode&1?(ju=(r=ju)||n.memoizedState!==null,e1(e,t,n),ju=r):e1(e,t,n);break;default:e1(e,t,n)}}function lpe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ont),t.forEach(function(r){var i=Hnt.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yh(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:eu=a.stateNode,kh=!1;break e;case 3:eu=a.stateNode.containerInfo,kh=!0;break e;case 4:eu=a.stateNode.containerInfo,kh=!0;break e}a=a.return}if(eu===null)throw Error(kt(160));cSe(s,o,i),eu=null,kh=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){io(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fSe(t,e),t=t.sibling}function fSe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yh(t,e),zp(e),r&4){try{lk(3,e,e.return),mL(3,e)}catch(m){io(e,e.return,m)}try{lk(5,e,e.return)}catch(m){io(e,e.return,m)}}break;case 1:yh(t,e),zp(e),r&512&&n!==null&&W2(n,n.return);break;case 5:if(yh(t,e),zp(e),r&512&&n!==null&&W2(n,n.return),e.flags&32){var i=e.stateNode;try{i3(i,"")}catch(m){io(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&PTe(i,s),SW(a,o);var l=SW(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?LTe(i,f):c==="dangerouslySetInnerHTML"?$Te(i,f):c==="children"?i3(i,f):bJ(i,c,f,l)}switch(a){case"input":_W(i,s);break;case"textarea":OTe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?uC(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?uC(i,!!s.multiple,s.defaultValue,!0):uC(i,!!s.multiple,s.multiple?[]:"",!1))}i[h3]=s}catch(m){io(e,e.return,m)}}break;case 6:if(yh(t,e),zp(e),r&4){if(e.stateNode===null)throw Error(kt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){io(e,e.return,m)}}break;case 3:if(yh(t,e),zp(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{u3(t.containerInfo)}catch(m){io(e,e.return,m)}break;case 4:yh(t,e),zp(e);break;case 13:yh(t,e),zp(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(JJ=Co())),r&4&&lpe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ju=(l=ju)||c,yh(t,e),ju=l):yh(t,e),zp(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Kt=e,c=e.child;c!==null;){for(f=Kt=c;Kt!==null;){switch(d=Kt,h=d.child,d.tag){case 0:case 11:case 14:case 15:lk(4,d,d.return);break;case 1:W2(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){io(r,n,m)}}break;case 5:W2(d,d.return);break;case 22:if(d.memoizedState!==null){fpe(f);continue}}h!==null?(h.return=d,Kt=h):fpe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=MTe("display",o))}catch(m){io(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){io(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yh(t,e),zp(e),r&4&&lpe(e);break;case 21:break;default:yh(t,e),zp(e)}}function zp(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lSe(n)){var r=n;break e}n=n.return}throw Error(kt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(i3(i,""),r.flags&=-33);var s=upe(e);rG(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=upe(e);nG(e,a,o);break;default:throw Error(kt(161))}}catch(u){io(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $nt(e,t,n){Kt=e,dSe(e)}function dSe(e,t,n){for(var r=(e.mode&1)!==0;Kt!==null;){var i=Kt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Z4;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ju;a=Z4;var l=ju;if(Z4=o,(ju=u)&&!l)for(Kt=i;Kt!==null;)o=Kt,u=o.child,o.tag===22&&o.memoizedState!==null?dpe(i):u!==null?(u.return=o,Kt=u):dpe(i);for(;s!==null;)Kt=s,dSe(s),s=s.sibling;Kt=i,Z4=a,ju=l}cpe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Kt=s):cpe(e)}}function cpe(e){for(;Kt!==null;){var t=Kt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ju||mL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ju)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Dh(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Yhe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yhe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&u3(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(kt(163))}ju||t.flags&512&&tG(t)}catch(d){io(t,t.return,d)}}if(t===e){Kt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function fpe(e){for(;Kt!==null;){var t=Kt;if(t===e){Kt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function dpe(e){for(;Kt!==null;){var t=Kt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mL(4,t)}catch(u){io(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){io(t,i,u)}}var s=t.return;try{tG(t)}catch(u){io(t,s,u)}break;case 5:var o=t.return;try{tG(t)}catch(u){io(t,o,u)}}}catch(u){io(t,t.return,u)}if(t===e){Kt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Kt=a;break}Kt=t.return}}var Mnt=Math.ceil,D5=by.ReactCurrentDispatcher,XJ=by.ReactCurrentOwner,Od=by.ReactCurrentBatchConfig,ci=0,La=null,Ho=null,lu=0,pf=0,G2=pb(0),ca=0,b3=null,Vw=0,gL=0,QJ=0,ck=null,yc=null,JJ=0,sT=1/0,Qm=null,I5=!1,iG=null,sv=null,e6=!1,L1=null,k5=0,fk=0,sG=null,YO=-1,KO=0;function Pl(){return ci&6?Co():YO!==-1?YO:YO=Co()}function ov(e){return e.mode&1?ci&2&&lu!==0?lu&-lu:xnt.transition!==null?(KO===0&&(KO=XTe()),KO):(e=qi,e!==0||(e=window.event,e=e===void 0?16:rAe(e.type)),e):1}function ep(e,t,n,r){if(50<fk)throw fk=0,sG=null,Error(kt(185));ZR(e,n,r),(!(ci&2)||e!==La)&&(e===La&&(!(ci&2)&&(gL|=n),ca===4&&S1(e,lu)),Pc(e,r),n===1&&ci===0&&!(t.mode&1)&&(sT=Co()+500,dL&&mb()))}function Pc(e,t){var n=e.callbackNode;xtt(e,t);var r=h5(e,e===La?lu:0);if(r===0)n!==null&&whe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&whe(n),t===1)e.tag===0?bnt(hpe.bind(null,e)):_Ae(hpe.bind(null,e)),mnt(function(){!(ci&6)&&mb()}),n=null;else{switch(QTe(r)){case 1:n=CJ;break;case 4:n=YTe;break;case 16:n=d5;break;case 536870912:n=KTe;break;default:n=d5}n=xSe(n,hSe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hSe(e,t){if(YO=-1,KO=0,ci&6)throw Error(kt(327));var n=e.callbackNode;if(hC()&&e.callbackNode!==n)return null;var r=h5(e,e===La?lu:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=R5(e,r);else{t=r;var i=ci;ci|=2;var s=mSe();(La!==e||lu!==t)&&(Qm=null,sT=Co()+500,Tw(e,t));do try{jnt();break}catch(a){pSe(e,a)}while(!0);MJ(),D5.current=s,ci=i,Ho!==null?t=0:(La=null,lu=0,t=ca)}if(t!==0){if(t===2&&(i=NW(e),i!==0&&(r=i,t=oG(e,i))),t===1)throw n=b3,Tw(e,0),S1(e,r),Pc(e,Co()),n;if(t===6)S1(e,r);else{if(i=e.current.alternate,!(r&30)&&!Lnt(i)&&(t=R5(e,r),t===2&&(s=NW(e),s!==0&&(r=s,t=oG(e,s))),t===1))throw n=b3,Tw(e,0),S1(e,r),Pc(e,Co()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(kt(345));case 2:Sx(e,yc,Qm);break;case 3:if(S1(e,r),(r&130023424)===r&&(t=JJ+500-Co(),10<t)){if(h5(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Pl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jW(Sx.bind(null,e,yc,Qm),t);break}Sx(e,yc,Qm);break;case 4:if(S1(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Zh(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Co()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mnt(r/1960))-r,10<r){e.timeoutHandle=jW(Sx.bind(null,e,yc,Qm),r);break}Sx(e,yc,Qm);break;case 5:Sx(e,yc,Qm);break;default:throw Error(kt(329))}}}return Pc(e,Co()),e.callbackNode===n?hSe.bind(null,e):null}function oG(e,t){var n=ck;return e.current.memoizedState.isDehydrated&&(Tw(e,t).flags|=256),e=R5(e,t),e!==2&&(t=yc,yc=n,t!==null&&aG(t)),e}function aG(e){yc===null?yc=e:yc.push.apply(yc,e)}function Lnt(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cp(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function S1(e,t){for(t&=~QJ,t&=~gL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zh(t),r=1<<n;e[n]=-1,t&=~r}}function hpe(e){if(ci&6)throw Error(kt(327));hC();var t=h5(e,0);if(!(t&1))return Pc(e,Co()),null;var n=R5(e,t);if(e.tag!==0&&n===2){var r=NW(e);r!==0&&(t=r,n=oG(e,r))}if(n===1)throw n=b3,Tw(e,0),S1(e,t),Pc(e,Co()),n;if(n===6)throw Error(kt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sx(e,yc,Qm),Pc(e,Co()),null}function ZJ(e,t){var n=ci;ci|=1;try{return e(t)}finally{ci=n,ci===0&&(sT=Co()+500,dL&&mb())}}function Hw(e){L1!==null&&L1.tag===0&&!(ci&6)&&hC();var t=ci;ci|=1;var n=Od.transition,r=qi;try{if(Od.transition=null,qi=1,e)return e()}finally{qi=r,Od.transition=n,ci=t,!(ci&6)&&mb()}}function eZ(){pf=G2.current,As(G2)}function Tw(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,pnt(n)),Ho!==null)for(n=Ho.return;n!==null;){var r=n;switch(OJ(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&v5();break;case 3:rT(),As(Rc),As(el),VJ();break;case 5:zJ(r);break;case 4:rT();break;case 13:As(Gs);break;case 19:As(Gs);break;case 10:LJ(r.type._context);break;case 22:case 23:eZ()}n=n.return}if(La=e,Ho=e=av(e.current,null),lu=pf=t,ca=0,b3=null,QJ=gL=Vw=0,yc=ck=null,sw!==null){for(t=0;t<sw.length;t++)if(n=sw[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}sw=null}return e}function pSe(e,t){do{var n=Ho;try{if(MJ(),qO.current=S5,A5){for(var r=Ks.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}A5=!1}if(zw=0,Da=na=Ks=null,uk=!1,g3=0,XJ.current=null,n===null||n.return===null){ca=1,b3=t,Ho=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=lu,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=epe(o);if(h!==null){h.flags&=-257,tpe(h,o,a,s,t),h.mode&1&&Zhe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Zhe(s,l,t),tZ();break e}u=Error(kt(426))}}else if(Ls&&a.mode&1){var g=epe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),tpe(g,o,a,s,t),FJ(iT(u,a));break e}}s=u=iT(u,a),ca!==4&&(ca=2),ck===null?ck=[s]:ck.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=QAe(s,u,t);Ghe(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(sv===null||!sv.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=JAe(s,a,t);Ghe(s,x);break e}}s=s.return}while(s!==null)}ySe(n)}catch(_){t=_,Ho===n&&n!==null&&(Ho=n=n.return);continue}break}while(!0)}function mSe(){var e=D5.current;return D5.current=S5,e===null?S5:e}function tZ(){(ca===0||ca===3||ca===2)&&(ca=4),La===null||!(Vw&268435455)&&!(gL&268435455)||S1(La,lu)}function R5(e,t){var n=ci;ci|=2;var r=mSe();(La!==e||lu!==t)&&(Qm=null,Tw(e,t));do try{Bnt();break}catch(i){pSe(e,i)}while(!0);if(MJ(),ci=n,D5.current=r,Ho!==null)throw Error(kt(261));return La=null,lu=0,ca}function Bnt(){for(;Ho!==null;)gSe(Ho)}function jnt(){for(;Ho!==null&&!ftt();)gSe(Ho)}function gSe(e){var t=bSe(e.alternate,e,pf);e.memoizedProps=e.pendingProps,t===null?ySe(e):Ho=t,XJ.current=null}function ySe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Pnt(n,t),n!==null){n.flags&=32767,Ho=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ca=6,Ho=null;return}}else if(n=Nnt(n,t,pf),n!==null){Ho=n;return}if(t=t.sibling,t!==null){Ho=t;return}Ho=t=e}while(t!==null);ca===0&&(ca=5)}function Sx(e,t,n){var r=qi,i=Od.transition;try{Od.transition=null,qi=1,Unt(e,t,n,r)}finally{Od.transition=i,qi=r}return null}function Unt(e,t,n,r){do hC();while(L1!==null);if(ci&6)throw Error(kt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(kt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(wtt(e,s),e===La&&(Ho=La=null,lu=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||e6||(e6=!0,xSe(d5,function(){return hC(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Od.transition,Od.transition=null;var o=qi;qi=1;var a=ci;ci|=4,XJ.current=null,Fnt(e,n),fSe(n,e),ant(LW),p5=!!MW,LW=MW=null,e.current=n,$nt(n),dtt(),ci=a,qi=o,Od.transition=s}else e.current=n;if(e6&&(e6=!1,L1=e,k5=i),s=e.pendingLanes,s===0&&(sv=null),mtt(n.stateNode),Pc(e,Co()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(I5)throw I5=!1,e=iG,iG=null,e;return k5&1&&e.tag!==0&&hC(),s=e.pendingLanes,s&1?e===sG?fk++:(fk=0,sG=e):fk=0,mb(),null}function hC(){if(L1!==null){var e=QTe(k5),t=Od.transition,n=qi;try{if(Od.transition=null,qi=16>e?16:e,L1===null)var r=!1;else{if(e=L1,L1=null,k5=0,ci&6)throw Error(kt(331));var i=ci;for(ci|=4,Kt=e.current;Kt!==null;){var s=Kt,o=s.child;if(Kt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Kt=l;Kt!==null;){var c=Kt;switch(c.tag){case 0:case 11:case 15:lk(8,c,s)}var f=c.child;if(f!==null)f.return=c,Kt=f;else for(;Kt!==null;){c=Kt;var d=c.sibling,h=c.return;if(uSe(c),c===l){Kt=null;break}if(d!==null){d.return=h,Kt=d;break}Kt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Kt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Kt=o;else e:for(;Kt!==null;){if(s=Kt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lk(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Kt=y;break e}Kt=s.return}}var v=e.current;for(Kt=v;Kt!==null;){o=Kt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Kt=b;else e:for(o=v;Kt!==null;){if(a=Kt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mL(9,a)}}catch(_){io(a,a.return,_)}if(a===o){Kt=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Kt=x;break e}Kt=a.return}}if(ci=i,mb(),A0&&typeof A0.onPostCommitFiberRoot=="function")try{A0.onPostCommitFiberRoot(aL,e)}catch{}r=!0}return r}finally{qi=n,Od.transition=t}}return!1}function ppe(e,t,n){t=iT(n,t),t=QAe(e,t,1),e=iv(e,t,1),t=Pl(),e!==null&&(ZR(e,1,t),Pc(e,t))}function io(e,t,n){if(e.tag===3)ppe(e,e,n);else for(;t!==null;){if(t.tag===3){ppe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sv===null||!sv.has(r))){e=iT(n,e),e=JAe(t,e,1),t=iv(t,e,1),e=Pl(),t!==null&&(ZR(t,1,e),Pc(t,e));break}}t=t.return}}function znt(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pl(),e.pingedLanes|=e.suspendedLanes&n,La===e&&(lu&n)===n&&(ca===4||ca===3&&(lu&130023424)===lu&&500>Co()-JJ?Tw(e,0):QJ|=n),Pc(e,t)}function vSe(e,t){t===0&&(e.mode&1?(t=H4,H4<<=1,!(H4&130023424)&&(H4=4194304)):t=1);var n=Pl();e=Gg(e,t),e!==null&&(ZR(e,t,n),Pc(e,n))}function Vnt(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vSe(e,n)}function Hnt(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(kt(314))}r!==null&&r.delete(t),vSe(e,n)}var bSe;bSe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rc.current)Cc=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Cc=!1,Rnt(e,t,n);Cc=!!(e.flags&131072)}else Cc=!1,Ls&&t.flags&1048576&&EAe(t,w5,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;GO(e,t),e=t.pendingProps;var i=eT(t,el.current);dC(t,n),i=qJ(null,t,r,e,i,n);var s=WJ();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nc(r)?(s=!0,b5(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jJ(t),i.updater=pL,t.stateNode=i,i._reactInternals=t,GW(t,r,e,n),t=XW(null,t,r,!0,s,n)):(t.tag=0,Ls&&s&&PJ(t),_l(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(GO(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Wnt(r),e=Dh(r,e),i){case 0:t=KW(null,t,r,e,n);break e;case 1:t=ipe(null,t,r,e,n);break e;case 11:t=npe(null,t,r,e,n);break e;case 14:t=rpe(null,t,r,Dh(r.type,e),n);break e}throw Error(kt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dh(r,i),KW(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dh(r,i),ipe(e,t,r,i,n);case 3:e:{if(nSe(t),e===null)throw Error(kt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,IAe(e,t),C5(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=iT(Error(kt(423)),t),t=spe(e,t,r,n,i);break e}else if(r!==i){i=iT(Error(kt(424)),t),t=spe(e,t,r,n,i);break e}else for(wf=rv(t.stateNode.containerInfo.firstChild),If=t,Ls=!0,Oh=null,n=SAe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tT(),r===i){t=Yg(e,t,n);break e}_l(e,t,r,n)}t=t.child}return t;case 5:return kAe(t),e===null&&HW(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,BW(r,i)?o=null:s!==null&&BW(r,s)&&(t.flags|=32),tSe(e,t),_l(e,t,o,n),t.child;case 6:return e===null&&HW(t),null;case 13:return rSe(e,t,n);case 4:return UJ(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=nT(t,null,r,n):_l(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dh(r,i),npe(e,t,r,i,n);case 7:return _l(e,t,t.pendingProps,n),t.child;case 8:return _l(e,t,t.pendingProps.children,n),t.child;case 12:return _l(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,hs(_5,r._currentValue),r._currentValue=o,s!==null)if(cp(s.value,o)){if(s.children===i.children&&!Rc.current){t=Yg(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=kg(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),qW(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(kt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qW(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_l(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,dC(t,n),i=Md(i),r=r(i),t.flags|=1,_l(e,t,r,n),t.child;case 14:return r=t.type,i=Dh(r,t.pendingProps),i=Dh(r.type,i),rpe(e,t,r,i,n);case 15:return ZAe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dh(r,i),GO(e,t),t.tag=1,Nc(r)?(e=!0,b5(t)):e=!1,dC(t,n),XAe(t,r,i),GW(t,r,i,n),XW(null,t,r,!0,e,n);case 19:return iSe(e,t,n);case 22:return eSe(e,t,n)}throw Error(kt(156,t.tag))};function xSe(e,t){return GTe(e,t)}function qnt(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Id(e,t,n,r){return new qnt(e,t,n,r)}function nZ(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wnt(e){if(typeof e=="function")return nZ(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wJ)return 11;if(e===_J)return 14}return 2}function av(e,t){var n=e.alternate;return n===null?(n=Id(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function XO(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")nZ(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case M2:return Aw(n.children,i,s,t);case xJ:o=8,i|=8;break;case yW:return e=Id(12,n,t,i|2),e.elementType=yW,e.lanes=s,e;case vW:return e=Id(13,n,t,i),e.elementType=vW,e.lanes=s,e;case bW:return e=Id(19,n,t,i),e.elementType=bW,e.lanes=s,e;case kTe:return yL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case DTe:o=10;break e;case ITe:o=9;break e;case wJ:o=11;break e;case _J:o=14;break e;case m1:o=16,r=null;break e}throw Error(kt(130,e==null?e:typeof e,""))}return t=Id(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Aw(e,t,n,r){return e=Id(7,e,r,t),e.lanes=n,e}function yL(e,t,n,r){return e=Id(22,e,r,t),e.elementType=kTe,e.lanes=n,e.stateNode={isHidden:!1},e}function rz(e,t,n){return e=Id(6,e,null,t),e.lanes=n,e}function iz(e,t,n){return t=Id(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gnt(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=LU(0),this.expirationTimes=LU(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=LU(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rZ(e,t,n,r,i,s,o,a,u){return e=new Gnt(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Id(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jJ(s),e}function Ynt(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$2,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wSe(e){if(!e)return Av;e=e._reactInternals;e:{if(R_(e)!==e||e.tag!==1)throw Error(kt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nc(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(kt(171))}if(e.tag===1){var n=e.type;if(Nc(n))return wAe(e,n,t)}return t}function _Se(e,t,n,r,i,s,o,a,u){return e=rZ(n,r,!0,e,i,s,o,a,u),e.context=wSe(null),n=e.current,r=Pl(),i=ov(n),s=kg(r,i),s.callback=t??null,iv(n,s,i),e.current.lanes=i,ZR(e,i,r),Pc(e,r),e}function vL(e,t,n,r){var i=t.current,s=Pl(),o=ov(i);return n=wSe(n),t.context===null?t.context=n:t.pendingContext=n,t=kg(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=iv(i,t,o),e!==null&&(ep(e,i,o,s),HO(e,i,o)),o}function N5(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mpe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function iZ(e,t){mpe(e,t),(e=e.alternate)&&mpe(e,t)}var ESe=typeof reportError=="function"?reportError:function(e){console.error(e)};function sZ(e){this._internalRoot=e}bL.prototype.render=sZ.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(kt(409));vL(e,t,null,null)};bL.prototype.unmount=sZ.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hw(function(){vL(null,e,null,null)}),t[Wg]=null}};function bL(e){this._internalRoot=e}bL.prototype.unstable_scheduleHydration=function(e){if(e){var t=eAe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<A1.length&&t!==0&&t<A1[n].priority;n++);A1.splice(n,0,e),n===0&&nAe(e)}};function oZ(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gpe(){}function Knt(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=N5(o);s.call(l)}}var o=_Se(t,r,e,0,null,!1,!1,"",gpe);return e._reactRootContainer=o,e[Wg]=o.current,f3(e.nodeType===8?e.parentNode:e),Hw(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=N5(u);a.call(l)}}var u=rZ(e,0,!1,null,null,!1,!1,"",gpe);return e._reactRootContainer=u,e[Wg]=u.current,f3(e.nodeType===8?e.parentNode:e),Hw(function(){vL(t,u,n,r)}),u}function wL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=N5(o);a.call(u)}}vL(t,o,e,i)}else o=Knt(n,t,e,i,r);return N5(o)}JTe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dI(t.pendingLanes);n!==0&&(TJ(t,n|1),Pc(t,Co()),!(ci&6)&&(sT=Co()+500,mb()))}break;case 13:Hw(function(){var r=Gg(e,1);if(r!==null){var i=Pl();ep(r,e,1,i)}}),iZ(e,1)}};AJ=function(e){if(e.tag===13){var t=Gg(e,134217728);if(t!==null){var n=Pl();ep(t,e,134217728,n)}iZ(e,134217728)}};ZTe=function(e){if(e.tag===13){var t=ov(e),n=Gg(e,t);if(n!==null){var r=Pl();ep(n,e,t,r)}iZ(e,t)}};eAe=function(){return qi};tAe=function(e,t){var n=qi;try{return qi=e,t()}finally{qi=n}};IW=function(e,t,n){switch(t){case"input":if(_W(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=fL(r);if(!i)throw Error(kt(90));NTe(r),_W(r,i)}}}break;case"textarea":OTe(e,n);break;case"select":t=n.value,t!=null&&uC(e,!!n.multiple,t,!1)}};UTe=ZJ;zTe=Hw;var Xnt={usingClientEntryPoint:!1,Events:[tN,U2,fL,BTe,jTe,ZJ]},yD={findFiberByHostInstance:iw,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qnt={bundleType:yD.bundleType,version:yD.version,rendererPackageName:yD.rendererPackageName,rendererConfig:yD.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:by.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qTe(e),e===null?null:e.stateNode},findFiberByHostInstance:yD.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t6=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t6.isDisabled&&t6.supportsFiber)try{aL=t6.inject(Qnt),A0=t6}catch{}}Xf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xnt;Xf.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oZ(t))throw Error(kt(200));return Ynt(e,t,null,n)};Xf.createRoot=function(e,t){if(!oZ(e))throw Error(kt(299));var n=!1,r="",i=ESe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=rZ(e,1,!1,null,null,n,!1,r,i),e[Wg]=t.current,f3(e.nodeType===8?e.parentNode:e),new sZ(t)};Xf.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(kt(188)):(e=Object.keys(e).join(","),Error(kt(268,e)));return e=qTe(t),e=e===null?null:e.stateNode,e};Xf.flushSync=function(e){return Hw(e)};Xf.hydrate=function(e,t,n){if(!xL(t))throw Error(kt(200));return wL(null,e,t,!0,n)};Xf.hydrateRoot=function(e,t,n){if(!oZ(e))throw Error(kt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ESe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=_Se(t,null,e,1,n??null,i,!1,s,o),e[Wg]=t.current,f3(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new bL(t)};Xf.render=function(e,t,n){if(!xL(t))throw Error(kt(200));return wL(null,e,t,!1,n)};Xf.unmountComponentAtNode=function(e){if(!xL(e))throw Error(kt(40));return e._reactRootContainer?(Hw(function(){wL(null,null,e,!1,function(){e._reactRootContainer=null,e[Wg]=null})}),!0):!1};Xf.unstable_batchedUpdates=ZJ;Xf.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xL(n))throw Error(kt(200));if(e==null||e._reactInternals===void 0)throw Error(kt(38));return wL(e,t,n,!1,r)};Xf.version="18.3.1-next-f1338f8080-20240426";function CSe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CSe)}catch(e){console.error(e)}}CSe(),CTe.exports=Xf;var rN=CTe.exports;const pI=_p(rN);var ype=rN;mW.createRoot=ype.createRoot,mW.hydrateRoot=ype.hydrateRoot;var a0=function(){return a0=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},a0.apply(this,arguments)};function iN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ug(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function vpe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jnt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Gr(e){return this instanceof Gr?(this.v=e,this):new Gr(e)}function aw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Gr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function sz(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Gr(e[i](o)),done:!1}:s?s(o):o}:s}}function dk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof vpe=="function"?vpe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var QO="right-scroll-bar-position",JO="width-before-scroll-bar",Znt="with-scroll-bars-hidden",ert="--removed-body-scroll-bar-size";function oz(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function trt(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var nrt=typeof window<"u"?N.useLayoutEffect:N.useEffect,bpe=new WeakMap;function rrt(e,t){var n=trt(null,function(r){return e.forEach(function(i){return oz(i,r)})});return nrt(function(){var r=bpe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||oz(a,null)}),s.forEach(function(a){i.has(a)||oz(a,o)})}bpe.set(n,e)},[e]),n}function irt(e){return e}function srt(e,t){t===void 0&&(t=irt);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function ort(e){e===void 0&&(e={});var t=srt(null);return t.options=a0({async:!0,ssr:!1},e),t}var TSe=function(e){var t=e.sideCar,n=iN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,a0({},n))};TSe.isSideCarExport=!0;function art(e,t){return e.useMedium(t),TSe}var ASe=ort(),az=function(){},_L=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:az,onWheelCapture:az,onTouchMoveCapture:az}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=iN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=d,_=rrt([n,t]),C=a0(a0({},b),i);return N.createElement(N.Fragment,null,c&&N.createElement(x,{sideCar:ASe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),a0(a0({},C),{ref:_})):N.createElement(y,a0({},C,{className:u,ref:_}),a))});_L.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_L.classNames={fullWidth:JO,zeroRight:QO};var urt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lrt(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=urt();return t&&e.setAttribute("nonce",t),e}function crt(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function frt(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var drt=function(){var e=0,t=null;return{add:function(n){e==0&&(t=lrt())&&(crt(t,n),frt(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hrt=function(){var e=drt();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},SSe=function(){var e=hrt(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},prt={left:0,top:0,right:0,gap:0},uz=function(e){return parseInt(e||"",10)||0},mrt=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[uz(n),uz(r),uz(i)]},grt=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return prt;var t=mrt(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},yrt=SSe(),pC="data-scroll-locked",vrt=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Znt,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(pC,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(QO,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(JO,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(QO," .").concat(QO,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(JO," .").concat(JO,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pC,`] {
    `).concat(ert,": ").concat(a,`px;
  }
`)},xpe=function(){var e=parseInt(document.body.getAttribute(pC)||"0",10);return isFinite(e)?e:0},brt=function(){N.useEffect(function(){return document.body.setAttribute(pC,(xpe()+1).toString()),function(){var e=xpe()-1;e<=0?document.body.removeAttribute(pC):document.body.setAttribute(pC,e.toString())}},[])},xrt=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;brt();var s=N.useMemo(function(){return grt(i)},[i]);return N.createElement(yrt,{styles:vrt(s,!t,i,n?"":"!important")})},uG=!1;if(typeof window<"u")try{var n6=Object.defineProperty({},"passive",{get:function(){return uG=!0,!0}});window.addEventListener("test",n6,n6),window.removeEventListener("test",n6,n6)}catch{uG=!1}var zE=uG?{passive:!1}:!1,wrt=function(e){return e.tagName==="TEXTAREA"},DSe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!wrt(e)&&n[t]==="visible")},_rt=function(e){return DSe(e,"overflowY")},Ert=function(e){return DSe(e,"overflowX")},wpe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ISe(e,r);if(i){var s=kSe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Crt=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Trt=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},ISe=function(e,t){return e==="v"?_rt(t):Ert(t)},kSe=function(e,t){return e==="v"?Crt(t):Trt(t)},Art=function(e,t){return e==="h"&&t==="rtl"?-1:1},Srt=function(e,t,n,r,i){var s=Art(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=kSe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&ISe(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},r6=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_pe=function(e){return[e.deltaX,e.deltaY]},Epe=function(e){return e&&"current"in e?e.current:e},Drt=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Irt=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},krt=0,VE=[];function Rrt(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(krt++)[0],s=N.useState(SSe)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Jnt([e.lockRef.current],(e.shards||[]).map(Epe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=r6(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],x="deltaY"in m?m.deltaY:v[1]-y[1],_,C=m.target,T=Math.abs(b)>Math.abs(x)?"h":"v";if("touches"in m&&T==="h"&&C.type==="range")return!1;var S=wpe(T,C);if(!S)return!0;if(S?_=T:(_=T==="v"?"h":"v",S=wpe(T,C)),!S)return!1;if(!r.current&&"changedTouches"in m&&(b||x)&&(r.current=_),!_)return!0;var k=r.current||_;return Srt(k,g,m,k==="h"?b:x)},[]),u=N.useCallback(function(m){var g=m;if(!(!VE.length||VE[VE.length-1]!==s)){var y="deltaY"in g?_pe(g):r6(g),v=t.current.filter(function(_){return _.name===g.type&&(_.target===g.target||g.target===_.shadowParent)&&Drt(_.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(Epe).filter(Boolean).filter(function(_){return _.contains(g.target)}),x=b.length>0?a(g,b[0]):!o.current.noIsolation;x&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:Nrt(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(x){return x!==b})},1)},[]),c=N.useCallback(function(m){n.current=r6(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,_pe(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,r6(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return VE.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,zE),document.addEventListener("touchmove",u,zE),document.addEventListener("touchstart",c,zE),function(){VE=VE.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,zE),document.removeEventListener("touchmove",u,zE),document.removeEventListener("touchstart",c,zE)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:Irt(i)}):null,h?N.createElement(xrt,{gapMode:e.gapMode}):null)}function Nrt(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Prt=art(ASe,Rrt);var oT=N.forwardRef(function(e,t){return N.createElement(_L,a0({},e,{ref:t,sideCar:Prt}))});oT.classNames=_L.classNames;function ls(e){return Object.keys(e)}function lz(e){return e&&typeof e=="object"&&!Array.isArray(e)}function aZ(e,t){const n={...e},r=t;return lz(e)&&lz(t)&&Object.keys(t).forEach(i=>{lz(r[i])&&i in e?n[i]=aZ(n[i],r[i]):n[i]=r[i]}),n}function Ort(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Frt(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function x3(e){const t=Frt(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function cz(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function RSe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?cz(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?cz(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?cz(s):s}}return r}return n}const ze=RSe("rem",{shouldScale:!0}),P5=RSe("em");function gb(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function NSe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function yb(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function yu(e){const t=N.createContext(null);return[({children:i,value:s})=>E.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function AA(e=null){const t=N.createContext(e);return[({children:i,value:s})=>E.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function O5(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function F5(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function $rt(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function Mrt(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function Lrt(e,t,n){return F5(e,n)===F5(t,n)}function uZ({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=F5(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>Lrt(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=Mrt(l,u,r),f=$rt(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const Brt={app:100,modal:200,popover:300,overlay:400,max:9999};function Ep(e){return Brt[e]}const jrt=()=>{};function Urt(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||jrt:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function ur(e,t="size",n=!0){if(e!==void 0)return NSe(e)?n?ze(e):e:`var(--${t}-${e})`}function Wo(e){return ur(e,"mantine-spacing")}function Zi(e){return e===void 0?"var(--mantine-radius-default)":ur(e,"mantine-radius")}function Ol(e){return ur(e,"mantine-font-size")}function PSe(e){return ur(e,"mantine-line-height",!1)}function lZ(e){if(e)return ur(e,"mantine-shadow",!1)}function yg(e,t){return n=>{e==null||e(n),t==null||t(n)}}function cZ(e,t){return e in t.breakpoints?x3(t.breakpoints[e]):x3(e)}function w3(e,t){const n=e.map(r=>({value:r,px:cZ(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Hh(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function zrt(e,t,n){var r;return n?Array.from(((r=F5(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function Vrt(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function vg(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function mC(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function D1(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function EL(e,t){const n=D1(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Cpe=["mousedown","touchstart"];function Hrt(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Cpe).forEach(s=>document.addEventListener(s,i)),()=>{(t||Cpe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function qrt(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Wrt(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function Grt(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:Wrt(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),qrt(s.current,o=>i(o.matches))},[e]),r}const N_=typeof document<"u"?N.useLayoutEffect:N.useEffect;function z0(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function OSe({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return z0(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function Yrt(e,t="body > :not(script)"){const n=mC(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Krt=/input|select|textarea|button|object/,FSe="a, input, select, textarea, button, object, [tabindex]";function Xrt(e){return e.style.display==="none"}function Qrt(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(Xrt(n))return!1;n=n.parentNode}return!0}function $Se(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function lG(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN($Se(e));return(Krt.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&Qrt(e)}function MSe(e){const t=$Se(e);return(Number.isNaN(t)||t>=0)&&lG(e)}function Jrt(e){return Array.from(e.querySelectorAll(FSe)).filter(MSe)}function Zrt(e,t){const n=Jrt(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function eit(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(FSe));o=a.find(MSe)||a.find(lG)||null,!o&&lG(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=Yrt(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&Zrt(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const tit=e=>(e+1)%1e6;function nit(){const[,e]=N.useReducer(tit,0);return e}const rit=vi.useId||(()=>{});function iit(){const e=rit();return e?`mantine-${e.replace(/:/g,"")}`:""}function al(e){const t=iit(),[n,r]=N.useState(t);return N_(()=>{r(mC())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function LSe(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function fZ(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function BSe(...e){return t=>{e.forEach(n=>fZ(n,t))}}function No(...e){return N.useCallback(BSe(...e),e)}function jSe(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var v,b;const l=({x,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const T=vg((x-C.left)/C.width,0,1);e({x:n==="ltr"?T:1-T,y:vg((_-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=x=>{d(),x.preventDefault(),m(x)},m=x=>l({x:x.clientX,y:x.clientY}),g=x=>{x.cancelable&&x.preventDefault(),d(),y(x)},y=x=>{x.cancelable&&x.preventDefault(),l({x:x.changedTouches[0].clientX,y:x.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ja({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function CL(e,t){return Grt("(prefers-reduced-motion: reduce)",e,t)}const sit={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function kf(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(sit),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function oit(e){const[t,{width:n,height:r}]=kf(e);return{ref:t,width:n,height:r}}function ait(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function uit(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function lit(e){return t=>uit(ait(e),t)}function cit(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{lit(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function dZ(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function fit(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function dit(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function hit(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function pit(e,t){const n=D1(e),r=N.useRef(),i=N.useRef(),s=N.useRef(!0),o=N.useRef(t),a=N.useRef(-1),u=()=>window.clearTimeout(a.current),l=N.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=N.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=N.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return N.useEffect(()=>{o.current=t},[t]),[f,u]}function mit(e,t){const[n,r]=N.useState(e),[i,s]=pit(r,t);return N.useEffect(()=>s,[]),[n,i]}function git(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function yit(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});N_(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>git(`${e}:${String(r)}`,i[0])}return[t,n]}var vit={};function USe(){return typeof process<"u"&&vit?"production":"development"}function zSe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=zSe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Do(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=zSe(e))&&(r&&(r+=" "),r+=t);return r}const bit={};function xit(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Do(t[r],i):t[r]=i})}),t}function TL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||bit);return xit(s)}function $5({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const VSe=N.createContext(null);function vb(){const e=N.useContext(VSe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function wit(){return vb().cssVariablesResolver}function _it(){return vb().classNamesPrefix}function hZ(){return vb().getStyleNonce}function Eit(){return vb().withStaticClasses}function Cit(){return vb().headless}function Tit(){var e;return(e=vb().stylesTransform)==null?void 0:e.sx}function Ait(){var e;return(e=vb().stylesTransform)==null?void 0:e.styles}function Sit(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function Dit(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function Iit(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function kit(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function pZ(e){return Sit(e)?Dit(e):e.startsWith("rgb")?Iit(e):e.startsWith("hsl")?kit(e):{r:0,g:0,b:0,a:1}}function i6(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=pZ(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function _3(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function fz(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function Rit(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function Nit(e){if(e.startsWith("oklch("))return(Rit(e)||0)/100;const{r:t,g:n,b:r}=pZ(e),i=t/255,s=n/255,o=r/255,a=fz(i),u=fz(s),l=fz(o);return .2126*a+.7152*u+.0722*l}function vD(e,t=.179){return e.startsWith("var(")?!1:Nit(e)>t}function cm({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:vD(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:vD(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:vD(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][_3(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:vD(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:vD(e,t.luminanceThreshold),shade:s,variable:void 0}}function Ki(e,t){const n=cm({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function cG(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Ki(n.from,t),i=Ki(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Xp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=pZ(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const HE=Xp,Pit=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=cm({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${ze(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${ze(1)} solid transparent`}:{background:e,hover:i6(e,.1),color:a,border:`${ze(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Xp(a,.1),hover:Xp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:Xp(e,.1),hover:Xp(e,.12),color:e,border:`${ze(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${ze(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Xp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ze(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Xp(e,.05),color:e,border:`${ze(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Xp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:"transparent",hover:Xp(e,.12),color:e,border:`${ze(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${ze(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:i6(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:i6(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:i6(t.white,.01),color:e,border:`${ze(1)} solid transparent`}:n==="gradient"?{background:cG(r,t),hover:cG(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ze(1)} solid var(--mantine-color-default-border)`}:{}},Oit={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Tpe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",mZ={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Oit,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Pit,autoContrast:!1,luminanceThreshold:.3,fontFamily:Tpe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Tpe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ze(34),lineHeight:"1.3"},h2:{fontSize:ze(26),lineHeight:"1.35"},h3:{fontSize:ze(22),lineHeight:"1.4"},h4:{fontSize:ze(18),lineHeight:"1.45"},h5:{fontSize:ze(16),lineHeight:"1.5"},h6:{fontSize:ze(14),lineHeight:"1.5"}}},fontSizes:{xs:ze(12),sm:ze(14),md:ze(16),lg:ze(18),xl:ze(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ze(2),sm:ze(4),md:ze(8),lg:ze(16),xl:ze(32)},spacing:{xs:ze(10),sm:ze(12),md:ze(16),lg:ze(20),xl:ze(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), 0 ${ze(1)} ${ze(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(10)} ${ze(15)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(7)} ${ze(7)} ${ze(-5)}`,md:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(20)} ${ze(25)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(10)} ${ze(10)} ${ze(-5)}`,lg:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(28)} ${ze(23)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(12)} ${ze(12)} ${ze(-7)}`,xl:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(36)} ${ze(28)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(17)} ${ze(17)} ${ze(-7)}`},other:{},components:{}};function Ape(e){return e==="auto"||e==="dark"||e==="light"}function Fit({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Ape(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Ape(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const $it="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Spe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function dz(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Dpe(e){if(!(e.primaryColor in e.colors))throw new Error($it);if(typeof e.primaryShade=="object"&&(!dz(e.primaryShade.dark)||!dz(e.primaryShade.light)))throw new Error(Spe);if(typeof e.primaryShade=="number"&&!dz(e.primaryShade))throw new Error(Spe)}function Mit(e,t){var r;if(!t)return Dpe(e),e;const n=aZ(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Dpe(n),n}const gZ=N.createContext(null),Lit=()=>N.useContext(gZ)||mZ;function Po(){const e=N.useContext(gZ);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function HSe({theme:e,children:t,inherit:n=!0}){const r=Lit(),i=N.useMemo(()=>Mit(n?r:mZ,e),[e,r,n]);return E.jsx(gZ.Provider,{value:i,children:t})}HSe.displayName="@mantine/core/MantineThemeProvider";function Bit(){const e=Po(),t=hZ(),n=ls(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=x3(e.breakpoints[i]),a=s?`${o-.1}px`:P5(o-.1),u=s?`${o}px`:P5(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return E.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function hz(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function pz(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function jit(e,t){const n=hz(e.variables),r=n?pz(t,n):"",i=hz(e.dark),s=i?pz(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=hz(e.light),a=o?pz(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function bb({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&cm({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Ipe(e,t){return bb({color:e.colors[e.primaryColor][_3(e,t)],theme:e,autoContrast:null})}function s6({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=_3(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:HE(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:HE(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:HE(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=_3(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:HE(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:HE(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:HE(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function Uit(e){return Array.isArray(e)?e:Array(10).fill(e)}function zit(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function qE(e,t,n){ls(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const qSe=e=>{const t=_3(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:ze(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Ipe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Ipe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};qE(r.variables,e.breakpoints,"breakpoint"),qE(r.variables,e.spacing,"spacing"),qE(r.variables,e.fontSizes,"font-size"),qE(r.variables,e.lineHeights,"line-height"),qE(r.variables,e.shadows,"shadow"),qE(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),ls(e.colors).forEach(s=>{const o=e.colors[s];if(zit(o)){Object.assign(r.light,s6({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,s6({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,s6({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,s6({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return ls(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Vit({theme:e,generator:t}){const n=qSe(e),r=t==null?void 0:t(e);return r?aZ(n,r):n}const mz=qSe(mZ);function Hit(e){const t={variables:{},light:{},dark:{}};return ls(e.variables).forEach(n=>{mz.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),ls(e.light).forEach(n=>{mz.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),ls(e.dark).forEach(n=>{mz.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function qit(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function WSe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Po(),r=hZ(),i=wit(),s=Vit({theme:n,generator:i}),o=e===":root"&&t,a=o?Hit(s):s,u=jit(a,e);return u?E.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":qit(e)}`}}):null}WSe.displayName="@mantine/CssVariables";function Wit(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function WE(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Git({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(WE(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),WE(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),N_(()=>{WE(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return WE(r,n),()=>{};r===void 0&&WE(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&WE(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Yit({respectReducedMotion:e,getRootElement:t}){N_(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Wit();function GSe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=Fit(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=Git({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Yit({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),E.jsx(VSe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:E.jsxs(HSe,{theme:e,children:[o&&E.jsx(WSe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&E.jsx(Bit,{}),t]})})}GSe.displayName="@mantine/core/MantineProvider";function sN({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Po();return{resolvedClassNames:TL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:$5({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Kit={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Xit({theme:e,options:t,unstyled:n}){return Do((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Kit[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function Qit({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return TL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function kpe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return TL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Jit({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Zit({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function est({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function tst({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=TL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function nst({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function rst({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Do(Xit({theme:e,options:t,unstyled:a||h}),tst({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),nst({options:t,classes:o,selector:r,unstyled:a}),kpe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),kpe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),Qit({selector:r,stylesCtx:f,options:t,props:c,theme:e}),Jit({rootSelector:l,selector:r,className:u}),Zit({selector:r,classes:o,unstyled:a||h}),d&&!h&&est({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function ist({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return $5({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function fG({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...fG({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function sst(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...gb(n[r])}}),t),{})}function ost({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=sst([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function ast({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&ist({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&$5({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&$5({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...ost({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?fG({style:u,theme:e}):null,...fG({style:r==null?void 0:r.style,theme:e})}}function ust({props:e,stylesCtx:t,themeName:n}){var o;const r=Po(),i=(o=Ait())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Gt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Po(),h=_it(),p=Eit(),m=Cit(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=ust({props:n,stylesCtx:r,themeName:g});return(b,x)=>({className:rst({theme:d,options:x,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([x==null?void 0:x.styles,l])}),style:ast({theme:d,themeName:g,selector:b,options:x,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function SA(e,t){return typeof e=="boolean"?e:t.autoContrast}function Je(e,t,n){var o;const r=Po(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...gb(n)}}function gz(e){return ls(e).reduce((t,n)=>e[n]!==void 0?`${t}${Ort(n)}:${e[n]};`:t,"").trim()}function lst({selector:e,styles:t,media:n,container:r}){const i=t?gz(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${gz(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${gz(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function P_(e){const t=hZ();return E.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:lst(e)}})}function O_(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:x,c:_,opacity:C,ff:T,fz:S,fw:k,lts:I,ta:R,lh:F,fs:O,tt:B,td:H,w:U,miw:G,maw:Y,h:Q,mih:M,mah:j,bgsz:W,bgp:L,bgr:q,bga:J,pos:re,top:ve,left:pe,bottom:Ae,right:ke,inset:it,display:Re,flex:ut,hiddenFrom:Xe,visibleFrom:Tt,lightHidden:gt,darkHidden:Ie,sx:Ve,...ft}=e;return{styleProps:gb({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:x,c:_,opacity:C,ff:T,fz:S,fw:k,lts:I,ta:R,lh:F,fs:O,tt:B,td:H,w:U,miw:G,maw:Y,h:Q,mih:M,mah:j,bgsz:W,bgp:L,bgr:q,bga:J,pos:re,top:ve,left:pe,bottom:Ae,right:ke,inset:it,display:Re,flex:ut,hiddenFrom:Xe,visibleFrom:Tt,lightHidden:gt,darkHidden:Ie,sx:Ve}),rest:ft}}const cst={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function yZ(e,t){const n=cm({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function fst(e,t){const n=cm({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:yZ(e,t)}function dst(e,t){if(typeof e=="number")return ze(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${ze(n)}`;return r&&(s+=` ${r}`),Uit.length>0&&(s+=` ${yZ(i.join(" "),t)}`),s.trim()}return e}const Rpe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function hst(e){return typeof e=="string"&&e in Rpe?Rpe[e]:e}const pst=["h1","h2","h3","h4","h5","h6"];function mst(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&pst.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?ze(e):e}function gst(e){return e}const yst=["h1","h2","h3","h4","h5","h6"];function vst(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&yst.includes(e)?`var(--mantine-${e}-line-height)`:e}function bst(e){return typeof e=="number"?ze(e):e}function xst(e,t){if(typeof e=="number")return ze(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return ze(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const yz={color:yZ,textColor:fst,fontSize:mst,spacing:xst,identity:gst,size:bst,lineHeight:vst,fontFamily:hst,border:dst};function Npe(e){return e.replace("(min-width: ","").replace("em)","")}function wst({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Npe(i))-Number(Npe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function _st(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function Est(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Cst(e){return typeof e=="object"&&e!==null?ls(e).filter(t=>t!=="base"):[]}function Tst(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function YSe({styleProps:e,data:t,theme:n}){return wst(ls(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=Est(e[i]);if(!_st(e[i]))return o.forEach(l=>{r.inlineStyles[l]=yz[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=Cst(e[i]);return o.forEach(l=>{a&&(r.styles[l]=yz[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:yz[s.type](Tst(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function oN(){return`__m__-${N.useId().replace(/:/g,"")}`}function vZ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...vZ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function KSe(e){return e.startsWith("data-")?e:`data-${e}`}function Ast(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[KSe(n)]=e[n]),t},{})}function XSe(e){return e?typeof e=="string"?{[KSe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...XSe(n)}),{}):Ast(e):null}function dG(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...dG(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Sst({theme:e,style:t,vars:n,styleProps:r}){const i=dG(t,e),s=dG(n,e);return{...i,...s,...r}}const QSe=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var S;const m=Po(),g=e||"div",{styleProps:y,rest:v}=O_(h),b=Tit(),x=(S=b==null?void 0:b())==null?void 0:S(y.sx),_=oN(),C=YSe({styleProps:y,theme:m,data:cst}),T={ref:p,style:Sst({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:Do(r,x,{[_]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":NSe(o)?void 0:o||void 0,size:d,...XSe(s),...v};return E.jsxs(E.Fragment,{children:[C.hasResponsiveStyles&&E.jsx(P_,{selector:`.${_}`,styles:C.styles,media:C.media}),typeof f=="function"?f(T):E.jsx(g,{...T})]})});QSe.displayName="@mantine/core/Box";const Fe=QSe;function JSe(e){return e}function wt(e){const t=N.forwardRef(e);return t.extend=JSe,t}function va(e){const t=N.forwardRef(e);return t.extend=JSe,t}const Dst=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function xy(){return N.useContext(Dst)}function Ist(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function vz(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const bD=typeof window<"u"&&window.requestAnimationFrame;function kst({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{rN.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||Ist(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}z0(()=>{typeof bD=="function"&&bD(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),bD(()=>{const p=vz(i);c({...f(p),height:p})})}:()=>{const p=vz(i);c({...f(p),willChange:"height",height:p}),bD(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=vz(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:BSe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const Rst={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},AL=wt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Je("Collapse",Rst,e),c=Po(),f=CL(),h=(c.respectReducedMotion?f:!1)?0:i,p=kst({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?E.jsx(Fe,{...l,children:n}):null:E.jsx(Fe,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...vZ(o,c)},ref:t,...l}),children:n})});AL.displayName="@mantine/core/Collapse";const[Nst,Yd]=yu("ScrollArea.Root component was not found in tree");function aT(e,t){const n=D1(t);N_(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Pst=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Yd(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return aT(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),aT(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?E.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),Ost=N.forwardRef((e,t)=>{const n=Yd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?E.jsx(Pst,{...e,ref:t}):null}),Fst={scrollHideDelay:1e3,type:"hover"},ZSe=N.forwardRef((e,t)=>{const n=Je("ScrollAreaRoot",Fst,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,v]=N.useState(0),[b,x]=N.useState(0),[_,C]=N.useState(!1),[T,S]=N.useState(!1),k=No(t,I=>u(I));return E.jsx(Nst,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:x},children:E.jsx(Fe,{...o,ref:k,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});ZSe.displayName="@mantine/core/ScrollAreaRoot";function eDe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function SL(e){const t=eDe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function tDe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function $st(e,[t,n]){return Math.min(n,Math.max(t,e))}function Ppe(e,t,n="ltr"){const r=SL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=$st(e,u);return tDe([0,o],[0,a])(l)}function Mst(e,t,n,r="ltr"){const i=SL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return tDe([u,l],f)(e)}function nDe(e,t){return e>0&&e<t}function M5(e){return e?parseInt(e,10):0}function Sw(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[Lst,rDe]=yu("ScrollAreaScrollbar was not found in tree"),iDe=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Yd(),[h,p]=N.useState(null),m=No(t,S=>p(S)),g=N.useRef(null),y=N.useRef(""),{viewport:v}=d,b=n.content-n.viewport,x=D1(l),_=D1(a),C=EL(c,10),T=S=>{if(g.current){const k=S.clientX-g.current.left,I=S.clientY-g.current.top;u({x:k,y:I})}};return N.useEffect(()=>{const S=k=>{const I=k.target;(h==null?void 0:h.contains(I))&&x(k,b)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[v,h,b,x]),N.useEffect(_,[n,_]),aT(h,C),aT(d.content,C),E.jsx(Lst,{value:{scrollbar:h,hasThumb:r,onThumbChange:D1(i),onThumbPointerUp:D1(s),onThumbPositionChange:_,onThumbPointerDown:D1(o)},children:E.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:Sw(e.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(S))}),onPointerMove:Sw(e.onPointerMove,T),onPointerUp:Sw(e.onPointerUp,S=>{const k=S.target;k.hasPointerCapture(S.pointerId)&&k.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),Bst=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Yd(),[a,u]=N.useState(),l=N.useRef(null),c=No(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),E.jsx(iDe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${SL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),nDe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:M5(a.paddingLeft),paddingEnd:M5(a.paddingRight)}})}})}),jst=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Yd(),[a,u]=N.useState(),l=N.useRef(null),c=No(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),E.jsx(iDe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${SL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),nDe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:M5(a.paddingTop),paddingEnd:M5(a.paddingBottom)}})}})}),bZ=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=xy(),s=Yd(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=eDe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>Mst(h,a.current,u,p);return n==="horizontal"?E.jsx(Bst,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Ppe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?E.jsx(jst,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Ppe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),sDe=N.forwardRef((e,t)=>{const n=Yd(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=EL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return aT(n.viewport,u),aT(n.content,u),r||s?E.jsx(bZ,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Ust=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yd(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?E.jsx(sDe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),zst=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yd(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=EL(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?E.jsx(bZ,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Sw(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Sw(e.onPointerLeave,()=>a("idle"))}):null}),Ope=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yd(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?E.jsx(Ust,{...r,ref:t,forceMount:n}):i.type==="scroll"?E.jsx(zst,{...r,ref:t,forceMount:n}):i.type==="auto"?E.jsx(sDe,{...r,ref:t,forceMount:n}):i.type==="always"?E.jsx(bZ,{...r,ref:t}):null});function Vst(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Hst=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Yd(),s=rDe(),{onThumbPositionChange:o}=s,a=No(t,c=>s.onThumbChange(c)),u=N.useRef(),l=EL(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Vst(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),E.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Sw(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Sw(e.onPointerUp,s.onThumbPointerUp)})}),Fpe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=rDe();return n||i.hasThumb?E.jsx(Hst,{ref:t,...r}):null}),oDe=N.forwardRef(({children:e,style:t,...n},r)=>{const i=Yd(),s=No(r,i.onViewportChange);return E.jsx(Fe,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:E.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});oDe.displayName="@mantine/core/ScrollAreaViewport";var xZ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const aDe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},qst=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":ze(t)}}),Kg=wt((e,t)=>{const n=Je("ScrollArea",aDe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,x]=N.useState(!1),_=Gt({name:"ScrollArea",props:n,classes:xZ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:qst});return E.jsxs(ZSe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,..._("root"),...v,children:[E.jsx(oDe,{...d,..._("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:C=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,C),p==null||p({x:C.currentTarget.scrollLeft,y:C.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&E.jsx(Ope,{..._("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:E.jsx(Fpe,{..._("thumb")})}),(y==="xy"||y==="y")&&E.jsx(Ope,{..._("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:E.jsx(Fpe,{..._("thumb")})}),E.jsx(Ost,{..._("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Kg.displayName="@mantine/core/ScrollArea";const wZ=wt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Je("ScrollAreaAutosize",aDe,e);return E.jsx(Fe,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:E.jsx(Fe,{style:{display:"flex",flexDirection:"column",flex:1},children:E.jsx(Kg,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Kg.classes=xZ;wZ.displayName="@mantine/core/ScrollAreaAutosize";wZ.classes=xZ;Kg.Autosize=wZ;var uDe={root:"m_87cf2631"};const Wst={__staticSelector:"UnstyledButton"},$f=va((e,t)=>{const n=Je("UnstyledButton",Wst,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Gt({name:s,props:n,classes:uDe,className:r,style:l,classNames:a,styles:u,unstyled:o});return E.jsx(Fe,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});$f.classes=uDe;$f.displayName="@mantine/core/UnstyledButton";var lDe={root:"m_515a97f8"};const Gst={},_Z=wt((e,t)=>{const n=Je("VisuallyHidden",Gst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Gt({name:"VisuallyHidden",classes:lDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return E.jsx(Fe,{component:"span",ref:t,...c("root"),...l})});_Z.classes=lDe;_Z.displayName="@mantine/core/VisuallyHidden";var cDe={root:"m_1b7284a3"};const Yst={},Kst=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Zi(t),"--paper-shadow":lZ(n)}}),DA=va((e,t)=>{const n=Je("Paper",Yst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Gt({name:"Paper",props:n,classes:cDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Kst});return E.jsx(Fe,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});DA.classes=cDe;DA.displayName="@mantine/core/Paper";function IA(e){return fDe(e)?(e.nodeName||"").toLowerCase():"#document"}function Oc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wy(e){var t;return(t=(fDe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function fDe(e){return e instanceof Node||e instanceof Oc(e).Node}function Bs(e){return e instanceof Element||e instanceof Oc(e).Element}function Mf(e){return e instanceof HTMLElement||e instanceof Oc(e).HTMLElement}function hG(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Oc(e).ShadowRoot}function aN(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Bd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Xst(e){return["table","td","th"].includes(IA(e))}function EZ(e){const t=CZ(),n=Bd(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Qst(e){let t=Xg(e);for(;Mf(t)&&!Sv(t);){if(EZ(t))return t;t=Xg(t)}return null}function CZ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Sv(e){return["html","body","#document"].includes(IA(e))}function Bd(e){return Oc(e).getComputedStyle(e)}function DL(e){return Bs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Xg(e){if(IA(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hG(e)&&e.host||wy(e);return hG(t)?t.host:t}function dDe(e){const t=Xg(e);return Sv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Mf(t)&&aN(t)?t:dDe(t)}function Rg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=dDe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Oc(i);return s?t.concat(o,o.visualViewport||[],aN(i)?i:[],o.frameElement&&n?Rg(o.frameElement):[]):t.concat(i,Rg(i,[],n))}function $pe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function E3(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&hG(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function hDe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function pDe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Jst(e){return tot()?!1:!Mpe()&&e.width===0&&e.height===0||Mpe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Zst(){return/apple/i.test(navigator.vendor)}function Mpe(){const e=/android/i;return e.test(hDe())||e.test(pDe())}function eot(){return hDe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function tot(){return pDe().includes("jsdom/")}function pG(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function not(e){return"nativeEvent"in e}function rot(e){return e.matches("html,body")}function uw(e){return(e==null?void 0:e.ownerDocument)||document}function bz(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function w2(e){return"composedPath"in e?e.composedPath()[0]:e.target}const iot="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function sot(e){return Mf(e)&&e.matches(iot)}const _f=Math.min,Uu=Math.max,L5=Math.round,o6=Math.floor,Dv=e=>({x:e,y:e}),oot={left:"right",right:"left",bottom:"top",top:"bottom"},aot={start:"end",end:"start"};function mG(e,t,n){return Uu(e,_f(t,n))}function Qg(e,t){return typeof e=="function"?e(t):e}function fp(e){return e.split("-")[0]}function kA(e){return e.split("-")[1]}function TZ(e){return e==="x"?"y":"x"}function AZ(e){return e==="y"?"height":"width"}function F_(e){return["top","bottom"].includes(fp(e))?"y":"x"}function SZ(e){return TZ(F_(e))}function uot(e,t,n){n===void 0&&(n=!1);const r=kA(e),i=SZ(e),s=AZ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=B5(o)),[o,B5(o)]}function lot(e){const t=B5(e);return[gG(e),t,gG(t)]}function gG(e){return e.replace(/start|end/g,t=>aot[t])}function cot(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function fot(e,t,n,r){const i=kA(e);let s=cot(fp(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(gG)))),s}function B5(e){return e.replace(/left|right|bottom|top/g,t=>oot[t])}function dot(e){return{top:0,right:0,bottom:0,left:0,...e}}function DZ(e){return typeof e!="number"?dot(e):{top:e,right:e,bottom:e,left:e}}function uT(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Lpe(e,t,n){let{reference:r,floating:i}=e;const s=F_(t),o=SZ(t),a=AZ(o),u=fp(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(kA(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const hot=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Lpe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:x,reset:_}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...x}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(l=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:c,y:f}=Lpe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function IZ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Qg(t,e),p=DZ(h),g=a[d?f==="floating"?"reference":"floating":f],y=uT(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},_=uT(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-_.top+p.top)/x.y,bottom:(_.bottom-y.bottom+p.bottom)/x.y,left:(y.left-_.left+p.left)/x.x,right:(_.right-y.right+p.right)/x.x}}const pot=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Qg(e,t)||{};if(l==null)return{};const f=DZ(c),d={x:n,y:r},h=SZ(i),p=AZ(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=s.reference[p]+s.reference[h]-d[h]-s.floating[p],_=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=C?C[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=a.floating[b]||s.floating[p]);const S=x/2-_/2,k=T/2-m[p]/2-1,I=_f(f[y],k),R=_f(f[v],k),F=I,O=T-m[p]-R,B=T/2-m[p]/2+S,H=mG(F,B,O),U=!u.arrow&&kA(i)!=null&&B!==H&&s.reference[p]/2-(B<F?I:R)-m[p]/2<0,G=U?B<F?B-F:B-O:0;return{[h]:d[h]+G,data:{[h]:H,centerOffset:B-H-G,...U&&{alignmentOffset:G}},reset:U}}}),mot=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Qg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=fp(i),v=fp(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),x=d||(v||!m?[B5(a)]:lot(a));!d&&p!=="none"&&x.push(...fot(a,m,p,b));const _=[a,...x],C=await IZ(t,g),T=[];let S=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(C[y]),f){const F=uot(i,o,b);T.push(C[F[0]],C[F[1]])}if(S=[...S,{placement:i,overflows:T}],!T.every(F=>F<=0)){var k,I;const F=(((k=s.flip)==null?void 0:k.index)||0)+1,O=_[F];if(O)return{data:{index:F,overflows:S},reset:{placement:O}};let B=(I=S.filter(H=>H.overflows[0]<=0).sort((H,U)=>H.overflows[1]-U.overflows[1])[0])==null?void 0:I.placement;if(!B)switch(h){case"bestFit":{var R;const H=(R=S.map(U=>[U.placement,U.overflows.filter(G=>G>0).reduce((G,Y)=>G+Y,0)]).sort((U,G)=>U[1]-G[1])[0])==null?void 0:R[0];H&&(B=H);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function mDe(e){const t=_f(...e.map(s=>s.left)),n=_f(...e.map(s=>s.top)),r=Uu(...e.map(s=>s.right)),i=Uu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function got(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>uT(mDe(i)))}const yot=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Qg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=got(c),d=uT(mDe(c)),h=DZ(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(F_(n)==="y"){const I=f[0],R=f[f.length-1],F=fp(n)==="top",O=I.top,B=R.bottom,H=F?I.left:R.left,U=F?I.right:R.right,G=U-H,Y=B-O;return{top:O,bottom:B,left:H,right:U,width:G,height:Y,x:H,y:O}}const g=fp(n)==="left",y=Uu(...f.map(I=>I.right)),v=_f(...f.map(I=>I.left)),b=f.filter(I=>g?I.left===v:I.right===y),x=b[0].top,_=b[b.length-1].bottom,C=v,T=y,S=T-C,k=_-x;return{top:x,bottom:_,left:C,right:T,width:S,height:k,x:C,y:x}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function vot(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=fp(n),a=kA(n),u=F_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Qg(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const bot=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await vot(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},xot=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Qg(e,t),l={x:n,y:r},c=await IZ(t,u),f=F_(fp(i)),d=TZ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=mG(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=mG(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},wot=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Qg(e,t),c={x:n,y:r},f=F_(i),d=TZ(f);let h=c[d],p=c[f];const m=Qg(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",x=s.reference[d]-s.floating[b]+g.mainAxis,_=s.reference[d]+s.reference[b]-g.mainAxis;h<x?h=x:h>_&&(h=_)}if(l){var y,v;const b=d==="y"?"width":"height",x=["top","left"].includes(fp(i)),_=s.reference[f]-s.floating[b]+(x&&((y=o.offset)==null?void 0:y[f])||0)+(x?0:g.crossAxis),C=s.reference[f]+s.reference[b]+(x?0:((v=o.offset)==null?void 0:v[f])||0)-(x?g.crossAxis:0);p<_?p=_:p>C&&(p=C)}return{[d]:h,[f]:p}}}},_ot=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Qg(e,t),u=await IZ(t,a),l=fp(n),c=kA(n),f=F_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=_f(h-u[p],g),b=_f(d-u[m],y),x=!t.middlewareData.shift;let _=v,C=b;if(f?C=c||x?_f(b,y):y:_=c||x?_f(v,g):g,x&&!c){const S=Uu(u.left,0),k=Uu(u.right,0),I=Uu(u.top,0),R=Uu(u.bottom,0);f?C=d-2*(S!==0||k!==0?S+k:Uu(u.left,u.right)):_=h-2*(I!==0||R!==0?I+R:Uu(u.top,u.bottom))}await o({...t,availableWidth:C,availableHeight:_});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function gDe(e){const t=Bd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Mf(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=L5(n)!==s||L5(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function kZ(e){return Bs(e)?e:e.contextElement}function gC(e){const t=kZ(e);if(!Mf(t))return Dv(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=gDe(t);let o=(s?L5(n.width):n.width)/r,a=(s?L5(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Eot=Dv(0);function yDe(e){const t=Oc(e);return!CZ()||!t.visualViewport?Eot:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Cot(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Oc(e)?!1:t}function qw(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=kZ(e);let o=Dv(1);t&&(r?Bs(r)&&(o=gC(r)):o=gC(e));const a=Cot(s,n,r)?yDe(s):Dv(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Oc(s),h=r&&Bs(r)?Oc(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=gC(m),y=m.getBoundingClientRect(),v=Bd(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,x=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=x,p=Oc(m),m=p.frameElement}}return uT({width:c,height:f,x:u,y:l})}const Tot=[":popover-open",":modal"];function RZ(e){return Tot.some(t=>{try{return e.matches(t)}catch{return!1}})}function Aot(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=wy(r),a=t?RZ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Dv(1);const c=Dv(0),f=Mf(r);if((f||!f&&!s)&&((IA(r)!=="body"||aN(o))&&(u=DL(r)),Mf(r))){const d=qw(r);l=gC(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function Sot(e){return Array.from(e.getClientRects())}function vDe(e){return qw(wy(e)).left+DL(e).scrollLeft}function Dot(e){const t=wy(e),n=DL(e),r=e.ownerDocument.body,i=Uu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Uu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+vDe(e);const a=-n.scrollTop;return Bd(r).direction==="rtl"&&(o+=Uu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Iot(e,t){const n=Oc(e),r=wy(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=CZ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function kot(e,t){const n=qw(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Mf(e)?gC(e):Dv(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Bpe(e,t,n){let r;if(t==="viewport")r=Iot(e,n);else if(t==="document")r=Dot(wy(e));else if(Bs(t))r=kot(t,n);else{const i=yDe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return uT(r)}function bDe(e,t){const n=Xg(e);return n===t||!Bs(n)||Sv(n)?!1:Bd(n).position==="fixed"||bDe(n,t)}function Rot(e,t){const n=t.get(e);if(n)return n;let r=Rg(e,[],!1).filter(a=>Bs(a)&&IA(a)!=="body"),i=null;const s=Bd(e).position==="fixed";let o=s?Xg(e):e;for(;Bs(o)&&!Sv(o);){const a=Bd(o),u=EZ(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||aN(o)&&!u&&bDe(e,o))?r=r.filter(c=>c!==o):i=a,o=Xg(o)}return t.set(e,r),r}function Not(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?RZ(t)?[]:Rot(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Bpe(t,c,i);return l.top=Uu(f.top,l.top),l.right=_f(f.right,l.right),l.bottom=_f(f.bottom,l.bottom),l.left=Uu(f.left,l.left),l},Bpe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Pot(e){const{width:t,height:n}=gDe(e);return{width:t,height:n}}function Oot(e,t,n){const r=Mf(t),i=wy(t),s=n==="fixed",o=qw(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=Dv(0);if(r||!r&&!s)if((IA(t)!=="body"||aN(i))&&(a=DL(t)),r){const f=qw(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=vDe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function xz(e){return Bd(e).position==="static"}function jpe(e,t){return!Mf(e)||Bd(e).position==="fixed"?null:t?t(e):e.offsetParent}function xDe(e,t){const n=Oc(e);if(RZ(e))return n;if(!Mf(e)){let i=Xg(e);for(;i&&!Sv(i);){if(Bs(i)&&!xz(i))return i;i=Xg(i)}return n}let r=jpe(e,t);for(;r&&Xst(r)&&xz(r);)r=jpe(r,t);return r&&Sv(r)&&xz(r)&&!EZ(r)?n:r||Qst(e)||n}const Fot=async function(e){const t=this.getOffsetParent||xDe,n=this.getDimensions,r=await n(e.floating);return{reference:Oot(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $ot(e){return Bd(e).direction==="rtl"}const Mot={convertOffsetParentRelativeRectToViewportRelativeRect:Aot,getDocumentElement:wy,getClippingRect:Not,getOffsetParent:xDe,getElementRects:Fot,getClientRects:Sot,getDimensions:Pot,getScale:gC,isElement:Bs,isRTL:$ot};function Lot(e,t){let n=null,r;const i=wy(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=o6(c),p=o6(i.clientWidth-(l+f)),m=o6(i.clientHeight-(c+d)),g=o6(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Uu(0,_f(1,u))||1};let b=!0;function x(_){const C=_[0].intersectionRatio;if(C!==u){if(!b)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(x,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,v)}n.observe(e)}return o(!0),s}function Bot(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=kZ(e),c=i||s?[...l?Rg(l):[],...Rg(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?Lot(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?qw(e):null;u&&g();function g(){const y=qw(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const jot=bot,Uot=xot,zot=mot,Vot=_ot,Upe=pot,Hot=yot,qot=wot,Wot=(e,t,n)=>{const r=new Map,i={platform:Mot,...n},s={...i.platform,_c:r};return hot(e,t,{...i,platform:s})};var ZO=typeof document<"u"?N.useLayoutEffect:N.useEffect;function j5(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!j5(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!j5(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function wDe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function zpe(e,t){const n=wDe(e);return Math.round(t*n)/n}function Vpe(e){const t=N.useRef(e);return ZO(()=>{t.current=e}),t}function Got(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);j5(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),v=N.useCallback(G=>{G!==C.current&&(C.current=G,m(G))},[]),b=N.useCallback(G=>{G!==T.current&&(T.current=G,y(G))},[]),x=s||p,_=o||g,C=N.useRef(null),T=N.useRef(null),S=N.useRef(c),k=u!=null,I=Vpe(u),R=Vpe(i),F=N.useCallback(()=>{if(!C.current||!T.current)return;const G={placement:t,strategy:n,middleware:d};R.current&&(G.platform=R.current),Wot(C.current,T.current,G).then(Y=>{const Q={...Y,isPositioned:!0};O.current&&!j5(S.current,Q)&&(S.current=Q,rN.flushSync(()=>{f(Q)}))})},[d,t,n,R]);ZO(()=>{l===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[l]);const O=N.useRef(!1);ZO(()=>(O.current=!0,()=>{O.current=!1}),[]),ZO(()=>{if(x&&(C.current=x),_&&(T.current=_),x&&_){if(I.current)return I.current(x,_,F);F()}},[x,_,F,I,k]);const B=N.useMemo(()=>({reference:C,floating:T,setReference:v,setFloating:b}),[v,b]),H=N.useMemo(()=>({reference:x,floating:_}),[x,_]),U=N.useMemo(()=>{const G={position:n,left:0,top:0};if(!H.floating)return G;const Y=zpe(H.floating,c.x),Q=zpe(H.floating,c.y);return a?{...G,transform:"translate("+Y+"px, "+Q+"px)",...wDe(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:Q}},[n,a,H.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:F,refs:B,elements:H,floatingStyles:U}),[c,F,B,H,U])}const Yot=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Upe({element:r.current,padding:i}).fn(n):{}:r?Upe({element:r,padding:i}).fn(n):{}}}},_De=(e,t)=>({...jot(e),options:[e,t]}),NZ=(e,t)=>({...Uot(e),options:[e,t]}),Hpe=(e,t)=>({...qot(e),options:[e,t]}),yG=(e,t)=>({...zot(e),options:[e,t]}),Kot=(e,t)=>({...Vot(e),options:[e,t]}),vG=(e,t)=>({...Hot(e),options:[e,t]}),EDe=(e,t)=>({...Yot(e),options:[e,t]}),CDe={...u5},Xot=CDe.useInsertionEffect,Qot=Xot||(e=>e());function I1(e){const t=N.useRef(()=>{});return Qot(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var D0=typeof document<"u"?N.useLayoutEffect:N.useEffect;let qpe=!1,Jot=0;const Wpe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Jot++;function Zot(){const[e,t]=N.useState(()=>qpe?Wpe():void 0);return D0(()=>{e==null&&t(Wpe())},[]),N.useEffect(()=>{qpe=!0},[]),e}const eat=CDe.useId,TDe=eat||Zot;function tat(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const nat=N.createContext(null),rat=N.createContext(null),PZ=()=>{var e;return((e=N.useContext(nat))==null?void 0:e.id)||null},OZ=()=>N.useContext(rat);function FZ(e){return"data-floating-ui-"+e}function Gpe(e){const t=N.useRef(e);return D0(()=>{t.current=e}),t}const Ype=FZ("safe-polygon");function eF(e,t,n){return n&&!pG(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function iat(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=OZ(),m=PZ(),g=Gpe(c),y=Gpe(l),v=N.useRef(),b=N.useRef(-1),x=N.useRef(),_=N.useRef(-1),C=N.useRef(!0),T=N.useRef(!1),S=N.useRef(()=>{}),k=N.useCallback(()=>{var O;const B=(O=i.current.openEvent)==null?void 0:O.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function O(B){let{open:H}=B;H||(clearTimeout(b.current),clearTimeout(_.current),C.current=!0)}return s.on("openchange",O),()=>{s.off("openchange",O)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function O(H){k()&&r(!1,H,"hover")}const B=uw(a).documentElement;return B.addEventListener("mouseleave",O),()=>{B.removeEventListener("mouseleave",O)}},[a,n,r,u,g,k]);const I=N.useCallback(function(O,B,H){B===void 0&&(B=!0),H===void 0&&(H="hover");const U=eF(y.current,"close",v.current);U&&!x.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,O,H),U)):B&&(clearTimeout(b.current),r(!1,O,H))},[y,r]),R=I1(()=>{S.current(),x.current=void 0}),F=I1(()=>{if(T.current){const O=uw(a).body;O.style.pointerEvents="",O.removeAttribute(Ype),T.current=!1}});return N.useEffect(()=>{if(!u)return;function O(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function B(G){if(clearTimeout(b.current),C.current=!1,f&&!pG(v.current)||d>0&&!eF(y.current,"open"))return;const Y=eF(y.current,"open",v.current);Y?b.current=window.setTimeout(()=>{r(!0,G,"hover")},Y):r(!0,G,"hover")}function H(G){if(O())return;S.current();const Y=uw(a);if(clearTimeout(_.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),x.current=g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){F(),R(),I(G,!0,"safe-polygon")}});const M=x.current;Y.addEventListener("mousemove",M),S.current=()=>{Y.removeEventListener("mousemove",M)};return}(v.current==="touch"?!E3(a,G.relatedTarget):!0)&&I(G)}function U(G){O()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){F(),R(),I(G)}})(G))}if(Bs(o)){const G=o;return n&&G.addEventListener("mouseleave",U),a==null||a.addEventListener("mouseleave",U),h&&G.addEventListener("mousemove",B,{once:!0}),G.addEventListener("mouseenter",B),G.addEventListener("mouseleave",H),()=>{n&&G.removeEventListener("mouseleave",U),a==null||a.removeEventListener("mouseleave",U),h&&G.removeEventListener("mousemove",B),G.removeEventListener("mouseenter",B),G.removeEventListener("mouseleave",H)}}},[o,a,u,e,f,d,h,I,R,F,r,n,p,y,g,i]),D0(()=>{var O;if(u&&n&&(O=g.current)!=null&&O.__options.blockPointerEvents&&k()){const H=uw(a).body;if(H.setAttribute(Ype,""),H.style.pointerEvents="none",T.current=!0,Bs(o)&&a){var B;const U=o,G=p==null||(B=p.nodesRef.current.find(Y=>Y.id===m))==null||(B=B.context)==null?void 0:B.elements.floating;return G&&(G.style.pointerEvents=""),U.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{U.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,k]),D0(()=>{n||(v.current=void 0,R(),F())},[n,R,F]),N.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(_.current),F()},[u,o,R,F]),N.useMemo(()=>{if(!u)return{};function O(B){v.current=B.pointerType}return{reference:{onPointerDown:O,onPointerEnter:O,onMouseMove(B){function H(){C.current||r(!0,B.nativeEvent,"hover")}f&&!pG(v.current)||n||d===0||(clearTimeout(_.current),v.current==="touch"?H():_.current=window.setTimeout(H,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(B){I(B.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const bG=()=>{},ADe=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:bG,setState:bG,isInstantPhase:!1}),SDe=()=>N.useContext(ADe);function sat(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return D0(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(ADe.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function oat(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=SDe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return D0(()=>{u&&(f({delay:{open:1,close:eF(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),D0(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),D0(()=>{l===bG||!n||l(o)},[n,l,o]),a}function wz(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const aat={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},uat={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Kpe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function lat(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=OZ(),v=I1(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,x=N.useRef(!1),_=N.useRef(!1),{escapeKey:C,outsidePress:T}=Kpe(m),{escapeKey:S,outsidePress:k}=Kpe(g),I=I1(B=>{var H;if(!n||!u||!l||B.key!=="Escape")return;const U=(H=a.current.floatingContext)==null?void 0:H.nodeId,G=y?wz(y.nodesRef.current,U):[];if(!C&&(B.stopPropagation(),G.length>0)){let Y=!0;if(G.forEach(Q=>{var M;if((M=Q.context)!=null&&M.open&&!Q.context.dataRef.current.__escapeKeyBubbles){Y=!1;return}}),!Y)return}r(!1,not(B)?B.nativeEvent:B,"escape-key")}),R=I1(B=>{var H;const U=()=>{var G;I(B),(G=w2(B))==null||G.removeEventListener("keydown",U)};(H=w2(B))==null||H.addEventListener("keydown",U)}),F=I1(B=>{var H;const U=x.current;x.current=!1;const G=_.current;if(_.current=!1,f==="click"&&G||U||typeof b=="function"&&!b(B))return;const Y=w2(B),Q="["+FZ("inert")+"]",M=uw(o).querySelectorAll(Q);let j=Bs(Y)?Y:null;for(;j&&!Sv(j);){const J=Xg(j);if(Sv(J)||!Bs(J))break;j=J}if(M.length&&Bs(Y)&&!rot(Y)&&!E3(Y,o)&&Array.from(M).every(J=>!E3(j,J)))return;if(Mf(Y)&&o){const J=Y.clientWidth>0&&Y.scrollWidth>Y.clientWidth,re=Y.clientHeight>0&&Y.scrollHeight>Y.clientHeight;let ve=re&&B.offsetX>Y.clientWidth;if(re&&Bd(Y).direction==="rtl"&&(ve=B.offsetX<=Y.offsetWidth-Y.clientWidth),ve||J&&B.offsetY>Y.clientHeight)return}const W=(H=a.current.floatingContext)==null?void 0:H.nodeId,L=y&&wz(y.nodesRef.current,W).some(J=>{var re;return bz(B,(re=J.context)==null?void 0:re.elements.floating)});if(bz(B,o)||bz(B,s)||L)return;const q=y?wz(y.nodesRef.current,W):[];if(q.length>0){let J=!0;if(q.forEach(re=>{var ve;if((ve=re.context)!=null&&ve.open&&!re.context.dataRef.current.__outsidePressBubbles){J=!1;return}}),!J)return}r(!1,B,"outside-press")}),O=I1(B=>{var H;const U=()=>{var G;F(B),(G=w2(B))==null||G.removeEventListener(f,U)};(H=w2(B))==null||H.addEventListener(f,U)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=C,a.current.__outsidePressBubbles=T;function B(G){r(!1,G,"ancestor-scroll")}const H=uw(o);l&&H.addEventListener("keydown",S?R:I,S),b&&H.addEventListener(f,k?O:F,k);let U=[];return p&&(Bs(s)&&(U=Rg(s)),Bs(o)&&(U=U.concat(Rg(o))),!Bs(i)&&i&&i.contextElement&&(U=U.concat(Rg(i.contextElement)))),U=U.filter(G=>{var Y;return G!==((Y=H.defaultView)==null?void 0:Y.visualViewport)}),U.forEach(G=>{G.addEventListener("scroll",B,{passive:!0})}),()=>{l&&H.removeEventListener("keydown",S?R:I,S),b&&H.removeEventListener(f,k?O:F,k),U.forEach(G=>{G.removeEventListener("scroll",B)})}},[a,o,s,i,l,b,f,n,r,p,u,C,T,I,S,R,F,k,O]),N.useEffect(()=>{x.current=!1},[b,f]),N.useMemo(()=>u?{reference:{onKeyDown:I,[aat[h]]:B=>{d&&r(!1,B.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[uat[f]]:()=>{x.current=!0}}}:{},[u,d,f,h,r,I])}function cat(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=TDe(),s=N.useRef({}),[o]=N.useState(()=>tat()),a=PZ()!=null,[u,l]=N.useState(r.reference),c=I1((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function $Z(e){e===void 0&&(e={});const{nodeId:t}=e,n=cat({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=OZ();D0(()=>{c&&(f.current=c)},[c]);const h=Got({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(b=>{const x=Bs(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(x),h.refs.setReference(x)},[h.refs]),m=N.useCallback(b=>{(Bs(b)||b===null)&&(f.current=b,o(b)),(Bs(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Bs(b))&&h.refs.setReference(b)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return D0(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(x=>x.id===t);b&&(b.context=v)}),N.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function fat(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=Oc(o);function h(){!n&&Mf(o)&&o===$pe(uw(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){Jst(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=w2(d.nativeEvent);if(u&&Bs(h))try{if(Zst()&&eot())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!sot(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Bs(h)&&h.hasAttribute(FZ("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=$pe(o?o.ownerDocument:document);!h&&g===o||E3((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||E3(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Xpe="active",Qpe="selected";function _z(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Xpe]:o,[Qpe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Xpe,Qpe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function dat(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>_z(s,e,"reference"),t),r=N.useCallback(s=>_z(s,e,"floating"),t),i=N.useCallback(s=>_z(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const hat=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function pat(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=hat.get(o))!=null?n:o,u=TDe(),c=PZ()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function DDe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Jpe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Zpe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const mat={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function gat({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:ze(t),height:ze(t),transform:"rotate(45deg)",position:"absolute",[mat[u]]:ze(r)},f=ze(-t/2);return u==="left"?{...c,...Jpe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Jpe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Zpe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Zpe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const MZ=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=xy();return s?E.jsx("div",{...l,ref:c,style:{...u,...gat({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});MZ.displayName="@mantine/core/FloatingArrow";const[yat,IDe]=yu("Popover component was not found in the tree");function IL({children:e,active:t=!0,refProp:n="ref"}){const r=eit(t),i=No(r,e==null?void 0:e.ref);return yb(e)?N.cloneElement(e,{[n]:i}):e}function kDe(e){return E.jsx(_Z,{tabIndex:-1,"data-autofocus":!0,...e})}IL.displayName="@mantine/core/FocusTrap";kDe.displayName="@mantine/core/FocusTrapInitialFocus";IL.InitialFocus=kDe;function vat(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const bat={},RDe=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=Je("Portal",bat,e),[s,o]=N.useState(!1),a=N.useRef(null);return N_(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:vat(i),fZ(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:rN.createPortal(E.jsx(E.Fragment,{children:n}),a.current)});RDe.displayName="@mantine/core/Portal";function RA({withinPortal:e=!0,children:t,...n}){return e?E.jsx(RDe,{...n,children:t}):E.jsx(E.Fragment,{children:t})}RA.displayName="@mantine/core/OptionalPortal";const xD=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${ze(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),a6={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${ze(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${ze(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${ze(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${ze(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ze(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...xD("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...xD("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...xD("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...xD("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...xD("top"),common:{transformOrigin:"top right"}}},e0e={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function xat({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in a6?{transitionProperty:a6[e].transitionProperty,...i,...a6[e].common,...a6[e][e0e[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[e0e[t]]}}function wat({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Po(),l=CL(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=v=>{const b=v?i:s,x=v?o:a;window.clearTimeout(m.current);const _=c?0:v?e:t;d(_),_===0?(typeof b=="function"&&b(),typeof x=="function"&&x(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{pI.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof x=="function"&&x(),p(v?"entered":"exited")},_)})})};return z0(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function _y({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=wat({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?E.jsx(E.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:E.jsx(E.Fragment,{children:s(xat({transition:t,duration:f,state:d,timingFunction:h}))})}_y.displayName="@mantine/core/Transition";var NDe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const _at={},LZ=wt((e,t)=>{var g,y,v,b;const n=Je("PopoverDropdown",_at,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=IDe(),h=OSe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=No(t,d.floating);return d.disabled?null:E.jsx(RA,{...d.portalProps,withinPortal:d.withinPortal,children:E.jsx(_y,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:x=>E.jsx(IL,{active:d.trapFocus,children:E.jsxs(Fe,{...p,...f,variant:u,ref:m,onKeyDownCapture:Urt(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...x,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:ze(d.width)},i]}),children:[o,E.jsx(MZ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});LZ.classes=NDe;LZ.displayName="@mantine/core/PopoverDropdown";const Eat={refProp:"ref",popupType:"dialog"},PDe=wt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Je("PopoverTarget",Eat,e);if(!yb(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=IDe(),u=No(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Do(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});PDe.displayName="@mantine/core/PopoverTarget";function ODe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return Bot(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),z0(()=>{t.update()},r),z0(()=>{s(o=>o+1)},[e])}function Cat(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Tat(e,t){const n=Cat(e.middlewares),r=[_De(e.offset)];return n.shift&&r.push(NZ(typeof n.shift=="boolean"?{limiter:Hpe(),padding:5}:{limiter:Hpe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?yG():yG(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?vG():vG(n.inline)),r.push(EDe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Kot({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function Aat(e){const[t,n]=ja({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=$Z({strategy:e.strategy,placement:e.position,middleware:Tat(e,()=>s)});return ODe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),z0(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),z0(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const Sat={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ep("popover"),__staticSelector:"Popover",width:"max-content"},Dat=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Zi(t),"--popover-shadow":lZ(n)}});function Fc(e){var Ie,Ve,ft,_t,$t,st;const t=Je("Popover",Sat,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:x,portalProps:_,closeOnEscape:C,clickOutsideEvents:T,trapFocus:S,onClose:k,onOpen:I,onChange:R,zIndex:F,radius:O,shadow:B,id:H,defaultOpened:U,__staticSelector:G,withRoles:Y,disabled:Q,returnFocus:M,variant:j,keepMounted:W,vars:L,floatingStrategy:q,...J}=t,re=Gt({name:G,props:t,classes:NDe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:L,varsResolver:Dat}),ve=N.useRef(null),[pe,Ae]=N.useState(null),[ke,it]=N.useState(null),{dir:Re}=xy(),ut=al(H),Xe=Aat({middlewares:c,width:l,position:DDe(Re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ve,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:U,onChange:R,onOpen:I,onClose:k,strategy:q});Hrt(()=>b&&Xe.onClose(),T,[pe,ke]);const Tt=N.useCallback(X=>{Ae(X),Xe.floating.refs.setReference(X)},[Xe.floating.refs.setReference]),gt=N.useCallback(X=>{it(X),Xe.floating.refs.setFloating(X)},[Xe.floating.refs.setFloating]);return E.jsx(yat,{value:{returnFocus:M,disabled:Q,controlled:Xe.controlled,reference:Tt,floating:gt,x:Xe.floating.x,y:Xe.floating.y,arrowX:(ft=(Ve=(Ie=Xe.floating)==null?void 0:Ie.middlewareData)==null?void 0:Ve.arrow)==null?void 0:ft.x,arrowY:(st=($t=(_t=Xe.floating)==null?void 0:_t.middlewareData)==null?void 0:$t.arrow)==null?void 0:st.y,opened:Xe.opened,arrowRef:ve,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Xe.floating.placement,trapFocus:S,withinPortal:x,portalProps:_,zIndex:F,radius:O,shadow:B,closeOnEscape:C,onClose:Xe.onClose,onToggle:Xe.onToggle,getTargetId:()=>`${ut}-target`,getDropdownId:()=>`${ut}-dropdown`,withRoles:Y,targetProps:J,__staticSelector:G,classNames:y,styles:v,unstyled:g,variant:j,keepMounted:W,getStyles:re},children:n})}Fc.Target=PDe;Fc.Dropdown=LZ;Fc.displayName="@mantine/core/Popover";Fc.extend=e=>e;var qh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Iat=N.forwardRef(({className:e,...t},n)=>E.jsxs(Fe,{component:"span",className:Do(qh.barsLoader,e),...t,ref:n,children:[E.jsx("span",{className:qh.bar}),E.jsx("span",{className:qh.bar}),E.jsx("span",{className:qh.bar})]})),kat=N.forwardRef(({className:e,...t},n)=>E.jsxs(Fe,{component:"span",className:Do(qh.dotsLoader,e),...t,ref:n,children:[E.jsx("span",{className:qh.dot}),E.jsx("span",{className:qh.dot}),E.jsx("span",{className:qh.dot})]})),Rat=N.forwardRef(({className:e,...t},n)=>E.jsx(Fe,{component:"span",className:Do(qh.ovalLoader,e),...t,ref:n})),FDe={bars:Iat,oval:Rat,dots:kat},Nat={loaders:FDe,type:"oval"},Pat=(e,{size:t,color:n})=>({root:{"--loader-size":ur(t,"loader-size"),"--loader-color":n?Ki(n,e):void 0}}),Zc=wt((e,t)=>{const n=Je("Loader",Nat,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Gt({name:"Loader",props:n,classes:qh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:Pat});return p?E.jsx(Fe,{...g("root"),ref:t,...m,children:p}):E.jsx(Fe,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Zc.defaultLoaders=FDe;Zc.classes=qh;Zc.displayName="@mantine/core/Loader";var kL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const t0e={orientation:"horizontal"},Oat=(e,{borderWidth:t})=>({group:{"--ai-border-width":ze(t)}}),BZ=wt((e,t)=>{const n=Je("ActionIconGroup",t0e,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Je("ActionIconGroup",t0e,e),p=Gt({name:"ActionIconGroup",props:n,classes:kL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Oat,rootSelector:"group"});return E.jsx(Fe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});BZ.classes=kL;BZ.displayName="@mantine/core/ActionIconGroup";const Fat={},$at=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":ur(t,"ai-size"),"--ai-radius":n===void 0?void 0:Zi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},$_=va((e,t)=>{const n=Je("ActionIcon",Fat,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:x,mod:_,...C}=n,T=Gt({name:["ActionIcon",p],props:n,className:r,style:u,classes:kL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:$at});return E.jsxs($f,{...T("root",{active:!v&&!l&&!b}),...C,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},_],children:[E.jsx(_y,{mounted:!!l,transition:"slide-down",duration:150,children:S=>E.jsx(Fe,{component:"span",...T("loader",{style:S}),"aria-hidden":!0,children:E.jsx(Zc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),E.jsx(Fe,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});$_.classes=kL;$_.displayName="@mantine/core/ActionIcon";$_.Group=BZ;const $De=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>E.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:E.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));$De.displayName="@mantine/core/CloseIcon";var MDe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Mat={variant:"subtle"},Lat=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":ur(t,"cb-size"),"--cb-radius":n===void 0?void 0:Zi(n),"--cb-icon-size":ze(r)}}),xb=va((e,t)=>{const n=Je("CloseButton",Mat,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=Gt({name:"CloseButton",props:n,className:a,style:l,classes:MDe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:Lat});return E.jsxs($f,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||E.jsx($De,{}),i]})});xb.classes=MDe;xb.displayName="@mantine/core/CloseButton";function Bat(e){return N.Children.toArray(e).filter(Boolean)}var LDe={root:"m_4081bf90"};const jat={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Uat=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Wo(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Mi=wt((e,t)=>{const n=Je("Group",jat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,x=Bat(u),_=x.length,C=Wo(l??"md"),S={childWidth:`calc(${100/_}% - (${C} - ${C} / ${_}))`},k=Gt({name:"Group",props:n,stylesCtx:S,className:i,style:s,classes:LDe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:Uat});return E.jsx(Fe,{...k("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:x})});Mi.classes=LDe;Mi.displayName="@mantine/core/Group";var BDe={root:"m_9814e45f"};const zat={zIndex:Ep("modal")},Vat=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Xp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${ze(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Zi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),C3=va((e,t)=>{const n=Je("Overlay",zat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,x=Gt({name:"Overlay",props:n,classes:BDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vat});return E.jsx(Fe,{ref:t,...x("root"),mod:[{center:c,fixed:l},v],...b,children:f})});C3.classes=BDe;C3.displayName="@mantine/core/Overlay";const[Hat,Ey]=yu("ModalBase component was not found in tree");function qat({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=CL()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Wat({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=al(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=qat({opened:n,transitionDuration:d});return LSe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),OSe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Gat=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},x)=>{const{_id:_,titleMounted:C,bodyMounted:T,shouldLockScroll:S,setTitleMounted:k,setBodyMounted:I}=Wat({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return E.jsx(RA,{...c,withinPortal:l,children:E.jsx(Hat,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${_}-title`,getBodyId:()=>`${_}-body`,titleMounted:C,bodyMounted:T,setTitleMounted:k,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:E.jsx(oT,{enabled:S&&f,...v,children:E.jsx(Fe,{ref:x,...b,__vars:{...g,"--mb-z-index":(h||Ep("modal")).toString(),"--mb-shadow":lZ(p),"--mb-padding":Wo(m)},children:d})})})})});function Yat(){const e=Ey();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var lT={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const jDe=N.forwardRef(({className:e,...t},n)=>{const r=Yat(),i=Ey();return E.jsx(Fe,{ref:n,...t,id:r,className:Do({[lT.body]:!i.unstyled},e)})});jDe.displayName="@mantine/core/ModalBaseBody";const UDe=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Ey();return E.jsx(xb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Do({[lT.close]:!i.unstyled},e),unstyled:i.unstyled})});UDe.displayName="@mantine/core/ModalBaseCloseButton";const Kat=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Ey();return E.jsx(_y,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>E.jsx("div",{...n,className:Do({[lT.inner]:!a.unstyled},n.className),children:E.jsx(IL,{active:a.opened&&a.trapFocus,children:E.jsx(DA,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Do({[lT.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),zDe=N.forwardRef(({className:e,...t},n)=>{const r=Ey();return E.jsx(Fe,{component:"header",ref:n,className:Do({[lT.header]:!r.unstyled},e),...t})});zDe.displayName="@mantine/core/ModalBaseHeader";const Xat={duration:200,timingFunction:"ease",transition:"fade"};function Qat(e){const t=Ey();return{...Xat,...t.transitionProps,...e}}const VDe=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Ey(),o=Qat(t);return E.jsx(_y,{mounted:s.opened,...o,transition:"fade",children:a=>E.jsx(C3,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});VDe.displayName="@mantine/core/ModalBaseOverlay";function Jat(){const e=Ey();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const HDe=N.forwardRef(({className:e,...t},n)=>{const r=Jat(),i=Ey();return E.jsx(Fe,{component:"h2",ref:n,className:Do({[lT.title]:!i.unstyled},e),...t,id:r})});HDe.displayName="@mantine/core/ModalBaseTitle";function Zat({children:e}){return E.jsx(E.Fragment,{children:e})}const[eut,NA]=AA({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Kd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const n0e={},tut=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Ol(t)} - ${ze(2)})`}}),RL=wt((e,t)=>{const n=Je("InputDescription",n0e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Je("InputDescription",n0e,n),p=NA(),m=Gt({name:["InputWrapper",c],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:tut}),g=f&&(p==null?void 0:p.getStyles)||m;return E.jsx(Fe,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});RL.classes=Kd;RL.displayName="@mantine/core/InputDescription";const nut={},rut=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Ol(t)} - ${ze(2)})`}}),NL=wt((e,t)=>{const n=Je("InputError",nut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Gt({name:["InputWrapper",c],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:rut}),m=NA(),g=f&&(m==null?void 0:m.getStyles)||p;return E.jsx(Fe,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});NL.classes=Kd;NL.displayName="@mantine/core/InputError";const r0e={labelElement:"label"},iut=(e,{size:t})=>({label:{"--input-label-size":Ol(t),"--input-asterisk-color":void 0}}),PL=wt((e,t)=>{const n=Je("InputLabel",r0e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Je("InputLabel",r0e,n),b=Gt({name:["InputWrapper",m],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:iut}),x=NA(),_=(x==null?void 0:x.getStyles)||b;return E.jsxs(Fe,{..._("label",x!=null&&x.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...v,children:[p,f&&E.jsx("span",{..._("required"),"aria-hidden":!0,children:" *"})]})});PL.classes=Kd;PL.displayName="@mantine/core/InputLabel";const i0e={},jZ=wt((e,t)=>{const n=Je("InputPlaceholder",i0e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Je("InputPlaceholder",i0e,n),p=Gt({name:["InputPlaceholder",l],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return E.jsx(Fe,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});jZ.classes=Kd;jZ.displayName="@mantine/core/InputPlaceholder";function sut(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const out={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},aut=(e,{size:t})=>({label:{"--input-label-size":Ol(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Ol(t)} - ${ze(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Ol(t)} - ${ze(2)})`}}),UZ=wt((e,t)=>{const n=Je("InputWrapper",out,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:x,children:_,withAsterisk:C,id:T,required:S,__stylesApiProps:k,mod:I,...R}=n,F=Gt({name:["InputWrapper",f],props:k||n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aut}),O={size:l,variant:c,__staticSelector:f},B=al(T),H=typeof C=="boolean"?C:S,U=(b==null?void 0:b.id)||`${B}-error`,G=(v==null?void 0:v.id)||`${B}-description`,Y=B,Q=!!m&&typeof m!="boolean",M=!!g,j=`${Q?U:""} ${M?G:""}`,W=j.trim().length>0?j.trim():void 0,L=(y==null?void 0:y.id)||`${B}-label`,q=p&&E.jsx(PL,{labelElement:x,id:L,htmlFor:Y,required:H,...O,...y,children:p},"label"),J=M&&E.jsx(RL,{...v,...O,size:(v==null?void 0:v.size)||O.size,id:(v==null?void 0:v.id)||G,children:g},"description"),re=E.jsx(N.Fragment,{children:d(_)},"input"),ve=Q&&N.createElement(NL,{...b,...O,size:(b==null?void 0:b.size)||O.size,key:"error",id:(b==null?void 0:b.id)||U},m),pe=h.map(Ae=>{switch(Ae){case"label":return q;case"input":return re;case"description":return J;case"error":return ve;default:return null}});return E.jsx(eut,{value:{getStyles:F,describedBy:W,inputId:Y,labelId:L,...sut(h,{hasDescription:M,hasError:Q})},children:E.jsx(Fe,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...F("root"),...R,children:pe})})});UZ.classes=Kd;UZ.displayName="@mantine/core/InputWrapper";const uut={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},lut=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":ur(t.size,"input-height"),"--input-fz":Ol(t.size),"--input-radius":t.radius===void 0?void 0:Zi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?ze(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?ze(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?ur(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),po=va((e,t)=>{const n=Je("Input",uut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:x,rightSectionPointerEvents:_,leftSectionPointerEvents:C,variant:T,vars:S,pointer:k,multiline:I,radius:R,id:F,withAria:O,withErrorStyles:B,mod:H,inputSize:U,...G}=n,{styleProps:Y,rest:Q}=O_(G),M=NA(),j={offsetBottom:M==null?void 0:M.offsetBottom,offsetTop:M==null?void 0:M.offsetTop},W=Gt({name:["Input",l],props:c||n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:j,rootSelector:"wrapper",vars:S,varsResolver:lut}),L=O?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":M==null?void 0:M.describedBy,id:(M==null?void 0:M.inputId)||F}:{};return E.jsxs(Fe,{...W("wrapper"),...Y,...d,mod:[{error:!!h&&B,pointer:k,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},H],variant:T,size:f,children:[m&&E.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),E.jsx(Fe,{component:"input",...Q,...L,ref:t,required:u,mod:{disabled:p,error:!!h&&B},variant:T,__size:U,...W("input")}),v&&E.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});po.classes=Kd;po.Wrapper=UZ;po.Label=PL;po.Error=NL;po.Description=RL;po.Placeholder=jZ;po.displayName="@mantine/core/Input";function cut(e,t,n){const r=Je(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:x,inputContainer:_,inputWrapperOrder:C,withAsterisk:T,variant:S,vars:k,mod:I,...R}=r,{styleProps:F,rest:O}=O_(R),B={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:x,inputContainer:_,inputWrapperOrder:C,withAsterisk:T,variant:S,id:v,mod:I,...y};return{...O,classNames:u,styles:l,unstyled:f,wrapperProps:{...B,...F},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:S,id:v}}}const fut={__staticSelector:"InputBase",withAria:!0},Xd=va((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=cut("InputBase",fut,e);return E.jsx(po.Wrapper,{...r,children:E.jsx(po,{...n,...i,ref:t})})});Xd.classes={...po.classes,...po.Wrapper.classes};Xd.displayName="@mantine/core/InputBase";const dut={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var qDe={root:"m_8bffd616"};const hut={},Jt=va((e,t)=>{const n=Je("Flex",hut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Gt({name:"Flex",classes:qDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Po(),b=oN(),x=YSe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:dut});return E.jsxs(E.Fragment,{children:[x.hasResponsiveStyles&&E.jsx(P_,{selector:`.${b}`,styles:x.styles,media:x.media}),E.jsx(Fe,{ref:t,...y("root",{className:b,style:gb(x.inlineStyles)}),...g})]})});Jt.classes=qDe;Jt.displayName="@mantine/core/Flex";function put(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function mut({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{put(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),fit(()=>{USe()!=="test"&&o(!0)},20,{autoInvoke:!0}),dit(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var WDe={root:"m_96b553a6"};const gut={},yut=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),zZ=wt((e,t)=>{const n=Je("FloatingIndicator",gut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Gt({name:"FloatingIndicator",classes:WDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yut}),g=N.useRef(null),{initialized:y,hidden:v}=mut({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=No(t,g);return!l||!c?null:E.jsx(Fe,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});zZ.displayName="@mantine/core/FloatingIndicator";zZ.classes=WDe;const[vut,VZ]=yu("Accordion component was not found in the tree");function OL({style:e,size:t=16,...n}){return E.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:ze(t),height:ze(t),display:"block"},...n,children:E.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}OL.displayName="@mantine/core/AccordionChevron";const[but,GDe]=yu("Accordion.Item component was not found in the tree");var uN={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const xut={},HZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Je("AccordionControl",xut,e),{value:m}=GDe(),g=VZ(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,x=E.jsxs($f,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:_=>{l==null||l(_),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:uZ({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[E.jsx(Fe,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),E.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&E.jsx(Fe,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?E.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:x}):x});HZ.displayName="@mantine/core/AccordionControl";HZ.classes=uN;const wut={},qZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Je("AccordionItem",wut,e),c=VZ();return E.jsx(but,{value:{value:a},children:E.jsx(Fe,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});qZ.displayName="@mantine/core/AccordionItem";qZ.classes=uN;const _ut={},WZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Je("AccordionPanel",_ut,e),{value:l}=GDe(),c=VZ();return E.jsx(AL,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:E.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});WZ.displayName="@mantine/core/AccordionPanel";WZ.classes=uN;const Eut={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:E.jsx(OL,{})},Cut=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:ze(n),"--accordion-radius":r===void 0?void 0:Zi(r)}});function hc(e){const t=Je("Accordion",Eut,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:x,variant:_,radius:C,...T}=t,S=al(h),[k,I]=ja({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),R=B=>Array.isArray(k)?k.includes(B):B===k,F=B=>{const H=Array.isArray(k)?k.includes(B)?k.filter(U=>U!==B):[...k,B]:B===k?null:B;I(H)},O=Gt({name:"Accordion",classes:uN,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:Cut});return E.jsx(vut,{value:{isItemActive:R,onChange:F,getControlId:O5(`${S}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:O5(`${S}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:x,loop:p,getStyles:O,variant:_,unstyled:o},children:E.jsx(Fe,{...O("root"),id:S,...T,variant:_,"data-accordion":!0,children:u})})}const Tut=e=>e;hc.extend=Tut;hc.classes=uN;hc.displayName="@mantine/core/Accordion";hc.Item=qZ;hc.Panel=WZ;hc.Control=HZ;hc.Chevron=OL;var YDe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const Aut={},Sut=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Zi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Ng=wt((e,t)=>{const n=Je("Alert",Aut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...x}=n,_=Gt({name:"Alert",classes:YDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Sut}),C=al(h),T=f&&`${C}-title`||void 0,S=`${C}-body`;return E.jsx(Fe,{id:C,..._("root",{variant:v}),variant:v,ref:t,...x,role:"alert","aria-describedby":S,"aria-labelledby":T,children:E.jsxs("div",{..._("wrapper"),children:[p&&E.jsx("div",{..._("icon"),children:p}),E.jsxs("div",{..._("body"),children:[f&&E.jsx("div",{..._("title"),"data-with-close-button":m||void 0,children:E.jsx("span",{id:T,..._("label"),children:f})}),d&&E.jsx("div",{id:S,..._("message"),"data-variant":v,children:d})]}),m&&E.jsx(xb,{..._("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Ng.classes=YDe;Ng.displayName="@mantine/core/Alert";var KDe={root:"m_b6d8b162"};function Dut(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const Iut={inherit:!1},kut=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Ol(i),"--text-lh":PSe(i),"--text-gradient":t==="gradient"?cG(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Ki(s,e):void 0}}),Ye=va((e,t)=>{const n=Je("Text",Iut,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,x=Gt({name:["Text",l],props:n,classes:KDe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:kut});return E.jsx(Fe,{...x("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":Dut(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});Ye.classes=KDe;Ye.displayName="@mantine/core/Text";var XDe={root:"m_849cf0da"};const Rut={underline:"hover"},wb=va((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Je("Anchor",Rut,e);return E.jsx(Ye,{component:"a",ref:t,className:Do({[XDe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});wb.classes=XDe;wb.displayName="@mantine/core/Anchor";const[Nut,PA]=yu("AppShell was not found in tree");var _b={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const Put={},GZ=wt((e,t)=>{const n=Je("AppShellAside",Put,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=PA();return h.disabled?null:E.jsx(Fe,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});GZ.classes=_b;GZ.displayName="@mantine/core/AppShellAside";const Out={},YZ=wt((e,t)=>{var p;const n=Je("AppShellFooter",Out,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=PA();return h.disabled?null:E.jsx(Fe,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Do({[oT.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});YZ.classes=_b;YZ.displayName="@mantine/core/AppShellFooter";const Fut={},KZ=wt((e,t)=>{var p;const n=Je("AppShellHeader",Fut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=PA();return h.disabled?null:E.jsx(Fe,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Do({[oT.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});KZ.classes=_b;KZ.displayName="@mantine/core/AppShellHeader";const $ut={},XZ=wt((e,t)=>{const n=Je("AppShellMain",$ut,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=PA();return E.jsx(Fe,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});XZ.classes=_b;XZ.displayName="@mantine/core/AppShellMain";function lN(e){return typeof e=="object"?e.base:e}function cN(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function fN(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function Mut({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),cN(s)){const f=ze(lN(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(fN(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=ze(s.base),e["--app-shell-aside-offset"]=ze(s.base)),ls(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=ze(s[f]),t[f]["--app-shell-aside-offset"]=ze(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=cZ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function Lut({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(cN(r)){const o=ze(lN(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}fN(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=ze(r.base),s&&(e["--app-shell-footer-offset"]=ze(r.base))),ls(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=ze(r[o]),s&&(t[o]["--app-shell-footer-offset"]=ze(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function But({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(cN(r)){const o=ze(lN(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}fN(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=ze(r.base),s&&(e["--app-shell-header-offset"]=ze(r.base))),ls(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=ze(r[o]),s&&(t[o]["--app-shell-header-offset"]=ze(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function jut({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),cN(s)){const f=ze(lN(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(fN(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=ze(s.base),e["--app-shell-navbar-offset"]=ze(s.base)),ls(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=ze(s[f]),t[f]["--app-shell-navbar-offset"]=ze(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=cZ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Ez(e){return Number(e)===0?"0px":Wo(e)}function Uut({padding:e,baseStyles:t,minMediaStyles:n}){cN(e)&&(t["--app-shell-padding"]=Ez(lN(e))),fN(e)&&(e.base&&(t["--app-shell-padding"]=Ez(e.base)),ls(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Ez(e[r]))}))}function zut({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};jut({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),Mut({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),But({baseStyles:u,minMediaStyles:o,header:t}),Lut({baseStyles:u,minMediaStyles:o,footer:n}),Uut({baseStyles:u,minMediaStyles:o,padding:i});const l=w3(ls(o),s).map(d=>({query:`(min-width: ${P5(d.px)})`,styles:o[d.value]})),c=w3(ls(a),s).map(d=>({query:`(max-width: ${P5(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function Vut({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Po(),o=vb(),{media:a,baseStyles:u}=zut({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return E.jsx(P_,{media:a,styles:u,selector:o.cssVariablesSelector})}const Hut={},QZ=wt((e,t)=>{const n=Je("AppShellNavbar",Hut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=PA();return h.disabled?null:E.jsx(Fe,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});QZ.classes=_b;QZ.displayName="@mantine/core/AppShellNavbar";const qut={},JZ=va((e,t)=>{const n=Je("AppShellSection",qut,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=PA();return E.jsx(Fe,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});JZ.classes=_b;JZ.displayName="@mantine/core/AppShellSection";function Wut({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return LSe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),N_(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Gut={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Ep("app")},Yut=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Yi=wt((e,t)=>{const n=Je("AppShell",Gut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:x,mod:_,...C}=n,T=Gt({name:"AppShell",classes:_b,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Yut}),S=Wut({disabled:y,transitionDuration:d});return E.jsxs(Nut,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:x},children:[E.jsx(Vut,{navbar:l,header:p,aside:v,footer:b,padding:f}),E.jsx(Fe,{ref:t,...T("root"),mod:[{resizing:S,layout:g,disabled:y},_],...C})]})});Yi.classes=_b;Yi.displayName="@mantine/core/AppShell";Yi.Navbar=QZ;Yi.Header=KZ;Yi.Main=XZ;Yi.Aside=GZ;Yi.Footer=YZ;Yi.Section=JZ;function QDe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>QDe(t))}:e}function JDe(e){return e?e.map(t=>QDe(t)):[]}function ZZ(e){return e.reduce((t,n)=>"group"in n?{...t,...ZZ(n.items)}:(t[n.value]=n,t),{})}var Uc={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Kut={error:null},Xut=(e,{size:t})=>({chevron:{"--combobox-chevron-size":ur(t,"combobox-chevron-size")}}),eee=wt((e,t)=>{const n=Je("ComboboxChevron",Kut,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Gt({name:"ComboboxChevron",classes:Uc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Xut,rootSelector:"chevron"});return E.jsx(Fe,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:E.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});eee.classes=Uc;eee.displayName="@mantine/core/ComboboxChevron";const[Qut,Qd]=yu("Combobox component was not found in tree"),ZDe=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>E.jsx(xb,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));ZDe.displayName="@mantine/core/ComboboxClearButton";const Jut={},tee=wt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Je("ComboboxDropdown",Jut,e),u=Qd();return E.jsx(Fc.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});tee.classes=Uc;tee.displayName="@mantine/core/ComboboxDropdown";const Zut={refProp:"ref"},eIe=wt((e,t)=>{const{children:n,refProp:r}=Je("ComboboxDropdownTarget",Zut,e);if(Qd(),!yb(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return E.jsx(Fc.Target,{ref:t,refProp:r,children:n})});eIe.displayName="@mantine/core/ComboboxDropdownTarget";const elt={},nee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxEmpty",elt,e),u=Qd();return E.jsx(Fe,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});nee.classes=Uc;nee.displayName="@mantine/core/ComboboxEmpty";function ree({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Qd(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const tlt={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},tIe=wt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Je("ComboboxEventsTarget",tlt,e);if(!yb(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Qd(),f=ree({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:No(t,c.store.targetRef,n==null?void 0:n.ref)})});tIe.displayName="@mantine/core/ComboboxEventsTarget";const nlt={},iee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxFooter",nlt,e),u=Qd();return E.jsx(Fe,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});iee.classes=Uc;iee.displayName="@mantine/core/ComboboxFooter";const rlt={},see=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Je("ComboboxGroup",rlt,e),c=Qd();return E.jsxs(Fe,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&E.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});see.classes=Uc;see.displayName="@mantine/core/ComboboxGroup";const ilt={},oee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxHeader",ilt,e),u=Qd();return E.jsx(Fe,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});oee.classes=Uc;oee.displayName="@mantine/core/ComboboxHeader";function nIe({value:e,valuesDivider:t=",",...n}){return E.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}nIe.displayName="@mantine/core/ComboboxHiddenInput";const slt={},aee=wt((e,t)=>{const n=Je("ComboboxOption",slt,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Qd(),v=N.useId(),b=l||v;return E.jsx(Fe,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:x=>{var _;h?x.preventDefault():((_=y.onOptionSubmit)==null||_.call(y,n.value,n),u==null||u(x))},onMouseDown:x=>{x.preventDefault(),f==null||f(x)},onMouseOver:x=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(x)}})});aee.classes=Uc;aee.displayName="@mantine/core/ComboboxOption";const olt={},uee=wt((e,t)=>{const n=Je("ComboboxOptions",olt,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Qd(),d=al(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),E.jsx(Fe,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});uee.classes=Uc;uee.displayName="@mantine/core/ComboboxOptions";const alt={withAriaAttributes:!0,withKeyboardNavigation:!0},lee=wt((e,t)=>{const n=Je("ComboboxSearch",alt,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Qd(),h=d.getStyles("search"),p=ree({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return E.jsx(po,{ref:No(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});lee.classes=Uc;lee.displayName="@mantine/core/ComboboxSearch";const ult={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},rIe=wt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Je("ComboboxTarget",ult,e);if(!yb(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Qd(),f=ree({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return E.jsx(Fc.Target,{ref:No(t,c.store.targetRef),children:d})});rIe.displayName="@mantine/core/ComboboxTarget";function llt(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function clt(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function flt(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function cee({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ja({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((U="unknown")=>{a||(u(!0),i==null||i(U))},[u,i,a]),y=N.useCallback((U="unknown")=>{a&&(u(!1),r==null||r(U))},[u,r,a]),v=N.useCallback((U="unknown")=>{a?y(U):g(U)},[y,g,a]),b=N.useCallback(()=>{const U=document.querySelector(`#${l.current} [data-combobox-selected]`);U==null||U.removeAttribute("data-combobox-selected"),U==null||U.removeAttribute("aria-selected")},[]),x=N.useCallback(U=>{const G=document.getElementById(l.current),Y=G==null?void 0:G.querySelectorAll("[data-combobox-option]");if(!Y)return null;const Q=U>=Y.length?0:U<0?Y.length-1:U;return c.current=Q,Y!=null&&Y[Q]&&!Y[Q].hasAttribute("data-combobox-disabled")?(b(),Y[Q].setAttribute("data-combobox-selected","true"),Y[Q].setAttribute("aria-selected","true"),Y[Q].scrollIntoView({block:"nearest",behavior:o}),Y[Q].id):null},[o,b]),_=N.useCallback(()=>{const U=document.querySelector(`#${l.current} [data-combobox-active]`);if(U){const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Y=Array.from(G).findIndex(Q=>Q===U);return x(Y)}return x(0)},[x]),C=N.useCallback(()=>x(clt(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[x,s]),T=N.useCallback(()=>x(llt(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[x,s]),S=N.useCallback(()=>x(flt(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[x]),k=N.useCallback((U="selected",G)=>{m.current=window.setTimeout(()=>{var M;const Y=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Q=Array.from(Y).findIndex(j=>j.hasAttribute(`data-combobox-${U}`));c.current=Q,G!=null&&G.scrollIntoView&&((M=Y[Q])==null||M.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=N.useCallback(()=>{c.current=-1,b()},[b]),R=N.useCallback(()=>{const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),G=U==null?void 0:U[c.current];G==null||G.click()},[]),F=N.useCallback(U=>{l.current=U},[]),O=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),B=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),H=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:H,selectOption:x,selectFirstOption:S,selectActiveOption:_,selectNextOption:C,selectPreviousOption:T,resetSelectedOption:I,updateSelectedOptionIndex:k,listId:l.current,setListId:F,clickSelectedOption:R,searchRef:f,focusSearchInput:O,targetRef:d,focusTarget:B}}const dlt={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},hlt=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Ol(t),"--combobox-option-padding":ur(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:ze(n),"--combobox-option-fz":Ol(t),"--combobox-option-padding":ur(t,"combobox-option-padding")}});function Yr(e){const t=Je("Combobox",dlt,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=cee(),y=o||g,v=Gt({name:h||"Combobox",classes:Uc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:hlt}),b=()=>{l==null||l(),y.closeDropdown()};return E.jsx(Qut,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:E.jsx(Fc,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const plt=e=>e;Yr.extend=plt;Yr.classes=Uc;Yr.displayName="@mantine/core/Combobox";Yr.Target=rIe;Yr.Dropdown=tee;Yr.Options=uee;Yr.Option=aee;Yr.Search=lee;Yr.Empty=nee;Yr.Chevron=eee;Yr.Footer=iee;Yr.Header=oee;Yr.EventsTarget=tIe;Yr.DropdownTarget=eIe;Yr.Group=see;Yr.ClearButton=ZDe;Yr.HiddenInput=nIe;var iIe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const sIe=iIe,FL=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...x},_)=>{const C=Gt({name:e,props:t,className:n,style:y,classes:iIe,classNames:r,styles:i,unstyled:s});return E.jsx(Fe,{...C("root"),ref:_,__vars:{"--label-fz":Ol(d),"--label-lh":ur(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...x,children:E.jsxs(Fe,{component:p,htmlFor:p==="label"?l:void 0,...C("body"),children:[o,E.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&E.jsx(Fe,{component:m,htmlFor:m==="label"?l:void 0,...C("label"),"data-disabled":c||void 0,children:a}),u&&E.jsx(po.Description,{size:d,__inheritStyles:!1,...C("description"),children:u}),f&&typeof f!="boolean"&&E.jsx(po.Error,{size:d,__inheritStyles:!1,...C("error"),children:f})]})]})})});FL.displayName="@mantine/core/InlineInput";const oIe=N.createContext(null),mlt=oIe.Provider,aIe=()=>N.useContext(oIe),[glt,ylt]=AA();var uIe={card:"m_26775b0a"};const vlt={withBorder:!0},blt=(e,{radius:t})=>({card:{"--card-radius":Zi(t)}}),fee=wt((e,t)=>{const n=Je("CheckboxCard",vlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Gt({name:"CheckboxCard",classes:uIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:blt,rootSelector:"card"}),g=aIe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return E.jsx(glt,{value:{checked:y},children:E.jsx($f,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});fee.displayName="@mantine/core/CheckboxCard";fee.classes=uIe;function dee({children:e,role:t}){const n=NA();return n?E.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):E.jsx(E.Fragment,{children:e})}const xlt={},hee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Je("CheckboxGroup",xlt,e),[c,f]=ja({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return E.jsx(mlt,{value:{value:c,onChange:d,size:s},children:E.jsx(po.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:E.jsx(dee,{role:"group",children:a})})})});hee.classes=po.Wrapper.classes;hee.displayName="@mantine/core/CheckboxGroup";function lIe({size:e,style:t,...n}){const r=e!==void 0?{width:ze(e),height:ze(e),...t}:t;return E.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:E.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function cIe({indeterminate:e,...t}){return e?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:E.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):E.jsx(lIe,{...t})}var fIe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const wlt={icon:cIe},_lt=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=cm({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":ur(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Zi(t),"--checkbox-color":s==="outline"?u:Ki(n,e),"--checkbox-icon-color":i?Ki(i,e):SA(o,e)?bb({color:n,theme:e,autoContrast:o}):void 0}}},pee=wt((e,t)=>{const n=Je("CheckboxIndicator",wlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,x=l,_=Gt({name:"CheckboxIndicator",classes:fIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_lt,rootSelector:"indicator"}),C=ylt(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(C==null?void 0:C.checked)||!1;return E.jsx(Fe,{ref:t,..._("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:E.jsx(x,{indeterminate:c,..._("icon")})})});pee.displayName="@mantine/core/CheckboxIndicator";pee.classes=fIe;var dIe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Elt={labelPosition:"right",icon:cIe},Clt=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=cm({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":ur(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Zi(t),"--checkbox-color":s==="outline"?u:Ki(n,e),"--checkbox-icon-color":i?Ki(i,e):SA(o,e)?bb({color:n,theme:e,autoContrast:o}):void 0}}},Tc=wt((e,t)=>{const n=Je("Checkbox",Elt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:x,variant:_,indeterminate:C,icon:T,rootRef:S,iconColor:k,onChange:I,autoContrast:R,mod:F,...O}=n,B=aIe(),H=d||(B==null?void 0:B.size),U=T,G=Gt({name:"Checkbox",props:n,classes:dIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Clt}),{styleProps:Y,rest:Q}=O_(O),M=al(f),j=B?{checked:B.value.includes(Q.value),onChange:W=>{B.onChange(W),I==null||I(W)}}:{};return E.jsx(FL,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:M,size:H,labelPosition:y,label:c,description:v,error:b,disabled:x,classNames:r,styles:o,unstyled:a,"data-checked":j.checked||g||void 0,variant:_,ref:S,mod:F,...Y,...p,children:E.jsxs(Fe,{...G("inner"),mod:{"data-label-position":y},children:[E.jsx(Fe,{component:"input",id:M,ref:t,checked:g,disabled:x,mod:{error:!!b,indeterminate:C},...G("input",{focusable:!0,variant:_}),onChange:I,...Q,...j,type:"checkbox"}),E.jsx(U,{indeterminate:C,...G("icon")})]})})});Tc.classes={...dIe,...sIe};Tc.displayName="@mantine/core/Checkbox";Tc.Group=hee;Tc.Indicator=pee;Tc.Card=fee;function cT(e){return"group"in e}function hIe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;cT(o)&&i.push({group:o.group,items:hIe({options:o.items,search:t,limit:n-i.length})}),cT(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Tlt(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function pIe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(cT(n))pIe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Alt(e,t){return Array.isArray(e)?e.includes(t):e===t}function mIe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!cT(e)){const a=Alt(n,e.value),u=t&&a&&E.jsx(lIe,{className:Uc.optionsDropdownCheckIcon}),l=E.jsxs(E.Fragment,{children:[r==="left"&&u,E.jsx("span",{children:e.label}),r==="right"&&u]});return E.jsx(Yr.Option,{value:e.value,disabled:e.disabled,className:Do({[Uc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>E.jsx(mIe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return E.jsx(Yr.Group,{label:e.group,children:o})}function gIe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){pIe(e);const b=typeof i=="string"?(r||hIe)({options:e,search:u?i:"",limit:s??1/0}):e,x=Tlt(b),_=b.map(C=>E.jsx(mIe,{data:C,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},cT(C)?C.group:C.value));return E.jsx(Yr.Dropdown,{hidden:t||n&&x,children:E.jsxs(Yr.Options,{labelledBy:p,"aria-label":y,children:[a?E.jsx(Kg.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:_}):_,x&&d&&E.jsx(Yr.Empty,{children:d})]})})}var yIe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Slt={},Dlt=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":ur(s,"badge-height"),"--badge-padding-x":ur(s,"badge-padding-x"),"--badge-fz":ur(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Zi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Ki(n,e):void 0}}},uv=va((e,t)=>{const n=Je("Badge",Slt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...x}=n,_=Gt({name:"Badge",props:n,classes:yIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Dlt});return E.jsxs(Fe,{variant:m,mod:[{block:g,circle:v},b],..._("root",{variant:m}),ref:t,...x,children:[d&&E.jsx("span",{..._("section"),"data-position":"left",children:d}),E.jsx("span",{..._("label"),children:p}),h&&E.jsx("span",{..._("section"),"data-position":"right",children:h})]})});uv.classes=yIe;uv.displayName="@mantine/core/Badge";var $L={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const s0e={orientation:"horizontal"},Ilt=(e,{borderWidth:t})=>({group:{"--button-border-width":ze(t)}}),mee=wt((e,t)=>{const n=Je("ButtonGroup",s0e,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Je("ButtonGroup",s0e,e),p=Gt({name:"ButtonGroup",props:n,classes:$L,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Ilt,rootSelector:"group"});return E.jsx(Fe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});mee.classes=$L;mee.displayName="@mantine/core/ButtonGroup";const klt={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ze(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Rlt={},Nlt=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":ur(s,"button-height"),"--button-padding-x":ur(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Ol(s.replace("compact-","")):Ol(s),"--button-radius":t===void 0?void 0:Zi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},bn=va((e,t)=>{const n=Je("Button",Rlt,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":x,autoContrast:_,mod:C,...T}=n,S=Gt({name:"Button",props:n,classes:$L,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:Nlt}),k=!!l,I=!!c;return E.jsxs($f,{ref:t,...S("root",{active:!a&&!p&&!x}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||x,loading:p,block:f,"with-left-section":k,"with-right-section":I},C],...T,children:[E.jsx(_y,{mounted:!!p,transition:klt,duration:150,children:R=>E.jsx(Fe,{component:"span",...S("loader",{style:R}),"aria-hidden":!0,children:E.jsx(Zc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),E.jsxs("span",{...S("inner"),children:[l&&E.jsx(Fe,{component:"span",...S("section"),mod:{position:"left"},children:l}),E.jsx(Fe,{component:"span",mod:{loading:p},...S("label"),children:u}),c&&E.jsx(Fe,{component:"span",...S("section"),mod:{position:"right"},children:c})]})]})});bn.classes=$L;bn.displayName="@mantine/core/Button";bn.Group=mee;const[Plt,Olt]=yu("Card component was not found in tree");var gee={root:"m_e615b15f",section:"m_599a2148"};const Flt={},ML=va((e,t)=>{const n=Je("CardSection",Flt,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=Olt();return E.jsx(Fe,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});ML.classes=gee;ML.displayName="@mantine/core/CardSection";const $lt={},Mlt=(e,{padding:t})=>({root:{"--card-padding":Wo(t)}}),OA=va((e,t)=>{const n=Je("Card",$lt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Gt({name:"Card",props:n,classes:gee,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Mlt}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===ML?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return E.jsx(Plt,{value:{getStyles:d},children:E.jsx(DA,{ref:t,unstyled:a,...d("root"),...f,children:p})})});OA.classes=gee;OA.displayName="@mantine/core/Card";OA.Section=ML;var vIe={root:"m_4451eb3a"};const Llt={},ga=va((e,t)=>{const n=Je("Center",Llt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Gt({name:"Center",props:n,classes:vIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return E.jsx(Fe,{ref:t,mod:[{inline:l},c],...d("root"),...f})});ga.classes=vIe;ga.displayName="@mantine/core/Center";var bIe={root:"m_b183c0a2"};const Blt={},jlt=(e,{color:t})=>({root:{"--code-bg":t?Ki(t,e):void 0}}),hk=wt((e,t)=>{const n=Je("Code",Blt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Gt({name:"Code",props:n,classes:bIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jlt});return E.jsx(Fe,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});hk.classes=bIe;hk.displayName="@mantine/core/Code";var xIe={root:"m_7485cace"};const Ult={},zlt=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:ur(t,"container-size")}}),Bl=wt((e,t)=>{const n=Je("Container",Ult,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Gt({name:"Container",classes:xIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zlt});return E.jsx(Fe,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Bl.classes=xIe;Bl.displayName="@mantine/core/Container";var wIe={root:"m_3eebeb36",label:"m_9e365f20"};const Vlt={orientation:"horizontal"},Hlt=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Ki(t,e):void 0,"--divider-border-style":n,"--divider-size":ur(r,"divider-size")}}),FA=wt((e,t)=>{const n=Je("Divider",Vlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Gt({name:"Divider",classes:wIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Hlt});return E.jsx(Fe,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&E.jsx(Fe,{component:"span",mod:{position:d},...m("label"),children:f})})});FA.classes=wIe;FA.displayName="@mantine/core/Divider";function qlt({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Wlt,_Ie]=yu("Grid component was not found in tree"),xG=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,o0e=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":xG(e,t),a0e=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},u0e=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Glt({span:e,order:t,offset:n,selector:r}){var d;const i=Po(),s=_Ie(),a=Hh(e)===void 0?12:Hh(e),u=gb({"--col-order":(d=Hh(t))==null?void 0:d.toString(),"--col-flex-grow":a0e(a,s.grow),"--col-flex-basis":xG(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":o0e(a,s.columns,s.grow),"--col-offset":u0e(Hh(n),s.columns)}),l=ls(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=a0e(e[p],s.grow),h[p]["--col-flex-basis"]=xG(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=o0e(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=u0e(n[p],s.columns)),h},{}),f=w3(ls(l),i).filter(h=>ls(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return E.jsx(P_,{styles:u,media:f,selector:r})}var yee={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Ylt={span:12},vee=wt((e,t)=>{const n=Je("GridCol",Ylt,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=_Ie(),h=oN();return E.jsxs(E.Fragment,{children:[E.jsx(Glt,{selector:`.${h}`,span:u,order:l,offset:c}),E.jsx(Fe,{ref:t,...d.getStyles("col",{className:Do(i,h),style:s,classNames:r,styles:o}),...f})]})});vee.classes=yee;vee.displayName="@mantine/core/GridCol";function Klt({gutter:e,selector:t}){const n=Po(),r=gb({"--grid-gutter":Wo(Hh(e))}),i=ls(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Wo(e[u])),a),{}),o=w3(ls(i),n).filter(a=>ls(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return E.jsx(P_,{styles:r,media:o,selector:t})}const Xlt={gutter:"md",grow:!1,columns:12},Qlt=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ef=wt((e,t)=>{const n=Je("Grid",Xlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Gt({name:"Grid",classes:yee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qlt}),y=oN();return E.jsxs(Wlt,{value:{getStyles:g,grow:l,columns:f},children:[E.jsx(Klt,{selector:`.${y}`,...n}),E.jsx(Fe,{ref:t,...g("root",{className:y}),...m,children:E.jsx("div",{...g("inner"),children:p})})]})});Ef.classes=yee;Ef.displayName="@mantine/core/Grid";Ef.Col=vee;var EIe={root:"m_9e117634"};const Jlt={},Zlt=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Zi(t),"--image-object-fit":n}}),Eb=va((e,t)=>{const n=Je("Image",Jlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const v=Gt({name:"Image",classes:EIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zlt});return g&&h?E.jsx(Fe,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):E.jsx(Fe,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Eb.classes=EIe;Eb.displayName="@mantine/core/Image";function fT(){return fT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fT.apply(null,arguments)}function bee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var ect=N.useLayoutEffect,tct=function(t){var n=N.useRef(t);return ect(function(){n.current=t}),n},l0e=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},nct=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&l0e(r.current,null),r.current=n,n&&l0e(n,i)},[n])},c0e={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},rct=function(t){Object.keys(c0e).forEach(function(n){t.style.setProperty(n,c0e[n],"important")})},f0e=rct,yl=null,d0e=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function ict(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),yl||(yl=document.createElement("textarea"),yl.setAttribute("tabindex","-1"),yl.setAttribute("aria-hidden","true"),f0e(yl)),yl.parentNode===null&&document.body.appendChild(yl);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;yl.style[h]=o[h]}),f0e(yl),yl.value=t;var u=d0e(yl,e);yl.value=t,u=d0e(yl,e),yl.value="x";var l=yl.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var h0e=function(){},sct=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},oct=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],act=!!document.documentElement.currentStyle,uct=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=sct(oct,n),i=r.boxSizing;if(i==="")return null;act&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},lct=uct;function CIe(e,t,n){var r=tct(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var cct=function(t){CIe(window,"resize",t)},fct=function(t){CIe(document.fonts,"loadingdone",t)},dct=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],hct=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?h0e:o,u=t.onHeightChange,l=u===void 0?h0e:u,c=bee(t,dct),f=c.value!==void 0,d=N.useRef(null),h=nct(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var b=d.current,x=r&&m.current?m.current:lct(b);if(x){m.current=x;var _=ict(x,b.value||b.placeholder||"x",s,i),C=_[0],T=_[1];p.current!==C&&(p.current=C,b.style.setProperty("height",C+"px","important"),l(C,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return N.useLayoutEffect(g),cct(g),fct(g),N.createElement("textarea",fT({},c,{onChange:y,ref:h}))},pct=N.forwardRef(hct);const mct={},xee=wt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Je("Textarea",mct,e),u=n&&USe()!=="test",l=u?{maxRows:r,minRows:i}:{};return E.jsx(Xd,{component:u?pct:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});xee.classes=Xd.classes;xee.displayName="@mantine/core/Textarea";const[gct,yct]=yu("List component was not found in tree");var wee={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const vct={},_ee=wt((e,t)=>{const n=Je("ListItem",vct,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=yct(),h=u||d.icon,p={classNames:r,styles:o};return E.jsx(Fe,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:E.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&E.jsx("span",{...d.getStyles("itemIcon",p),children:h}),E.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});_ee.classes=wee;_ee.displayName="@mantine/core/ListItem";const bct={type:"unordered"},xct=(e,{size:t,spacing:n})=>({root:{"--list-fz":Ol(t),"--list-lh":PSe(t),"--list-spacing":Wo(n)}}),To=wt((e,t)=>{const n=Je("List",bct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Gt({name:"List",classes:wee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xct});return E.jsx(gct,{value:{center:p,icon:d,getStyles:v},children:E.jsx(Fe,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});To.classes=wee;To.displayName="@mantine/core/List";To.Item=_ee;var TIe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const p0e={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Ep("overlay")},wct=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Lf=wt((e,t)=>{const n=Je("LoadingOverlay",p0e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Po(),g=Gt({name:"LoadingOverlay",classes:TIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wct}),y={...p0e.overlayProps,...f};return E.jsx(_y,{transition:"fade",...l,mounted:!!d,children:v=>E.jsxs(Fe,{...g("root",{style:v}),ref:t,...p,children:[E.jsx(Zc,{...g("loader"),unstyled:a,...c}),E.jsx(C3,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),E.jsx(C3,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Lf.classes=TIe;Lf.displayName="@mantine/core/LoadingOverlay";const[_ct,dN]=yu("Menu component was not found in the tree");var $A={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Ect={},Eee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("MenuDivider",Ect,e),u=dN();return E.jsx(Fe,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});Eee.classes=$A;Eee.displayName="@mantine/core/MenuDivider";const Cct={},Cee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Je("MenuDropdown",Cct,e),f=N.useRef(null),d=dN(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=yg(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=yg(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return E.jsxs(Fc.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:No(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[E.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});Cee.classes=$A;Cee.displayName="@mantine/core/MenuDropdown";const Tct={},Tee=va((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Je("MenuItem",Tct,e),p=dN(),m=Po(),{dir:g}=xy(),y=N.useRef(),v=p.getItemIndex(y.current),b=h,x=yg(b.onMouseLeave,()=>p.setHovered(-1)),_=yg(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),C=yg(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=yg(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),S=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,k=a?cm({color:a,theme:m}):null;return E.jsxs($f,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:No(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:_,onMouseLeave:x,onClick:C,onKeyDown:uZ({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":k!=null&&k.isThemeColor&&(k==null?void 0:k.shade)===void 0?`var(--mantine-color-${k.color}-6)`:S==null?void 0:S.color,"--menu-item-hover":S==null?void 0:S.hover},children:[l&&E.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&E.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&E.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});Tee.classes=$A;Tee.displayName="@mantine/core/MenuItem";const Act={},Aee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("MenuLabel",Act,e),u=dN();return E.jsx(Fe,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});Aee.classes=$A;Aee.displayName="@mantine/core/MenuLabel";const Sct={refProp:"ref"},AIe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Je("MenuTarget",Sct,e);if(!yb(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=dN(),o=yg(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=yg(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=yg(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return E.jsx(Fc.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});AIe.displayName="@mantine/core/MenuTarget";const Dct={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Cl(e){const t=Je("Menu",Dct,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:x,keepMounted:_,...C}=t,T=Gt({name:"Menu",classes:$A,props:t,classNames:m,styles:g,unstyled:y}),[S,{setHovered:k,resetHovered:I}]=Vrt(),[R,F]=ja({value:s,defaultValue:o,finalValue:!1,onChange:u}),[O,B]=N.useState(!1),H=()=>{F(!1),B(!1),R&&(i==null||i())},U=()=>{F(!0),!R&&(r==null||r())},G=()=>{R?H():U()},{openDropdown:Y,closeDropdown:Q}=qlt({open:U,close:H,closeDelay:p,openDelay:h}),M=L=>zrt("[data-menu-item]","[data-menu-dropdown]",L),{resolvedClassNames:j,resolvedStyles:W}=sN({classNames:m,styles:g,props:t});return z0(()=>{I()},[R]),E.jsx(_ct,{value:{getStyles:T,opened:R,toggleDropdown:G,getItemIndex:M,hovered:S,setHovered:k,openedViaClick:O,setOpenedViaClick:B,closeOnItemClick:l,closeDropdown:d==="click"?H:Q,openDropdown:d==="click"?U:Y,closeDropdownImmediately:H,loop:c,trigger:d,unstyled:y,menuItemTabIndex:x},children:E.jsx(Fc,{...C,opened:R,onChange:G,defaultOpened:o,trapFocus:_?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:j,styles:W,unstyled:y,variant:v,keepMounted:_,children:n})})}Cl.extend=e=>e;Cl.classes=$A;Cl.displayName="@mantine/core/Menu";Cl.Item=Tee;Cl.Label=Aee;Cl.Dropdown=Cee;Cl.Target=AIe;Cl.Divider=Eee;const[Ict,MA]=yu("Modal component was not found in tree");var Cy={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const kct={},LL=wt((e,t)=>{const n=Je("ModalBody",kct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=MA();return E.jsx(jDe,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});LL.classes=Cy;LL.displayName="@mantine/core/ModalBody";const Rct={},BL=wt((e,t)=>{const n=Je("ModalCloseButton",Rct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=MA();return E.jsx(UDe,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});BL.classes=Cy;BL.displayName="@mantine/core/ModalCloseButton";const Nct={},jL=wt((e,t)=>{const n=Je("ModalContent",Nct,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=MA(),f=c.scrollAreaComponent||Zat;return E.jsx(Kat,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:E.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${ze(c.yOffset)} * 2))`},children:u})})});jL.classes=Cy;jL.displayName="@mantine/core/ModalContent";const Pct={},UL=wt((e,t)=>{const n=Je("ModalHeader",Pct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=MA();return E.jsx(zDe,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});UL.classes=Cy;UL.displayName="@mantine/core/ModalHeader";const Oct={},zL=wt((e,t)=>{const n=Je("ModalOverlay",Oct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=MA();return E.jsx(VDe,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});zL.classes=Cy;zL.displayName="@mantine/core/ModalOverlay";const Fct={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ep("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},$ct=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Zi(t),"--modal-size":ur(n,"modal-size"),"--modal-y-offset":ze(r),"--modal-x-offset":ze(i)}}),VL=wt((e,t)=>{const n=Je("ModalRoot",Fct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Gt({name:m,classes:Cy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$ct});return E.jsx(Ict,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:E.jsx(Gat,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});VL.classes=Cy;VL.displayName="@mantine/core/ModalRoot";const Mct={},HL=wt((e,t)=>{const n=Je("ModalTitle",Mct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=MA();return E.jsx(HDe,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});HL.classes=Cy;HL.displayName="@mantine/core/ModalTitle";const Lct={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ep("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},fo=wt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Je("Modal",Lct,e),c=!!n||s;return E.jsxs(VL,{ref:t,radius:u,...l,children:[r&&E.jsx(zL,{...i}),E.jsxs(jL,{radius:u,children:[c&&E.jsxs(UL,{children:[n&&E.jsx(HL,{children:n}),s&&E.jsx(BL,{...o})]}),E.jsx(LL,{children:a})]})]})});fo.classes=Cy;fo.displayName="@mantine/core/Modal";fo.Root=VL;fo.Overlay=zL;fo.Content=jL;fo.Body=LL;fo.Header=UL;fo.Title=HL;fo.CloseButton=BL;const[Bct,See]=AA(),[jct,Uct]=AA();var qL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const zct={},Vct=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?ur(t):ur(n,"pg-gap")}}),Dee=wt((e,t)=>{const n=Je("PillGroup",zct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=See(),h=(d==null?void 0:d.size)||l||void 0,p=Gt({name:"PillGroup",classes:qL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vct,stylesCtx:{size:h},rootSelector:"group"});return E.jsx(jct,{value:{size:h,disabled:c},children:E.jsx(Fe,{ref:t,size:h,...p("group"),...f})})});Dee.classes=qL;Dee.displayName="@mantine/core/PillGroup";const Hct={variant:"default"},qct=(e,{radius:t},{size:n})=>({root:{"--pill-fz":ur(n,"pill-fz"),"--pill-height":ur(n,"pill-height"),"--pill-radius":t===void 0?void 0:Zi(t)}}),T3=wt((e,t)=>{const n=Je("Pill",Hct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=Uct(),x=See(),_=m||(b==null?void 0:b.size)||void 0,C=(x==null?void 0:x.variant)==="filled"?"contrast":l||"default",T=Gt({name:"Pill",classes:qL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qct,stylesCtx:{size:_}});return E.jsxs(Fe,{component:"span",ref:t,variant:C,size:_,...T("root",{variant:C}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[E.jsx("span",{...T("label"),children:c}),f&&E.jsx(xb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:S=>{var k;S.preventDefault(),S.stopPropagation(),(k=h==null?void 0:h.onMouseDown)==null||k.call(h,S)},onClick:S=>{var k;S.stopPropagation(),d==null||d(),(k=h==null?void 0:h.onClick)==null||k.call(h,S)}})]})});T3.classes=qL;T3.displayName="@mantine/core/Pill";T3.Group=Dee;var SIe={field:"m_45c4369d"};const Wct={type:"visible"},Iee=wt((e,t)=>{const n=Je("PillsInputField",Wct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=See(),g=NA(),y=Gt({name:"PillsInputField",classes:SIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return E.jsx(Fe,{component:"input",ref:No(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});Iee.classes=SIe;Iee.displayName="@mantine/core/PillsInputField";const Gct={},U5=wt((e,t)=>{const n=Je("PillsInput",Gct,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return E.jsx(Bct,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:E.jsx(Xd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});U5.displayName="@mantine/core/PillsInput";U5.Field=Iee;function Yct({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(cT(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Kct={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},kee=wt((e,t)=>{const n=Je("MultiSelect",Kct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:x,onOptionSubmit:_,comboboxProps:C,filter:T,limit:S,withScrollArea:k,maxDropdownHeight:I,searchValue:R,defaultSearchValue:F,onSearchChange:O,readOnly:B,disabled:H,onFocus:U,onBlur:G,onPaste:Y,radius:Q,rightSection:M,rightSectionWidth:j,rightSectionPointerEvents:W,rightSectionProps:L,leftSection:q,leftSectionWidth:J,leftSectionPointerEvents:re,leftSectionProps:ve,inputContainer:pe,inputWrapperOrder:Ae,withAsterisk:ke,labelProps:it,descriptionProps:Re,errorProps:ut,wrapperProps:Xe,description:Tt,label:gt,error:Ie,maxValues:Ve,searchable:ft,nothingFoundMessage:_t,withCheckIcon:$t,checkIconPosition:st,hidePickedOptions:X,withErrorStyles:de,name:we,form:ae,id:he,clearable:Ee,clearButtonProps:Me,hiddenInputProps:Be,placeholder:lt,hiddenInputValuesDivider:Ze,required:Xt,mod:fn,renderOption:Wt,onRemove:an,onClear:Cn,scrollAreaProps:$n,...ki}=n,hi=al(he),Li=JDe(m),Ds=ZZ(Li),Br=cee({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Br.resetSelectedOption()}}),{styleProps:cs,rest:{type:cl,autoComplete:$o,...Wa}}=O_(ki),[Nr,Ri]=ja({value:c,defaultValue:f,finalValue:[],onChange:d}),[pi,Hs]=ja({value:R,defaultValue:F,finalValue:"",onChange:O}),ri=Gt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ni,resolvedStyles:be}=sN({props:n,styles:o,classNames:r}),ce=Dt=>{h==null||h(Dt),Dt.key===" "&&!ft&&(Dt.preventDefault(),Br.toggleDropdown()),Dt.key==="Backspace"&&pi.length===0&&Nr.length>0&&(an==null||an(Nr[Nr.length-1]),Ri(Nr.slice(0,Nr.length-1)))},_e=Nr.map((Dt,Ht)=>{var xn,rr;return E.jsx(T3,{withRemoveButton:!B&&!((xn=Ds[Dt])!=null&&xn.disabled),onRemove:()=>{Ri(Nr.filter(mr=>Dt!==mr)),an==null||an(Dt)},unstyled:a,disabled:H,...ri("pill"),children:((rr=Ds[Dt])==null?void 0:rr.label)||Dt},`${Dt}-${Ht}`)});N.useEffect(()=>{x&&Br.selectFirstOption()},[x,Nr]);const Ue=Ee&&Nr.length>0&&!H&&!B&&E.jsx(Yr.ClearButton,{size:l,...Me,onClear:()=>{Cn==null||Cn(),Ri([]),Hs("")}}),je=Yct({data:Li,value:Nr});return E.jsxs(E.Fragment,{children:[E.jsxs(Yr,{store:Br,classNames:Ni,styles:be,unstyled:a,size:l,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:Dt=>{_==null||_(Dt),Hs(""),Br.updateSelectedOptionIndex("selected"),Nr.includes(Ds[Dt].value)?(Ri(Nr.filter(Ht=>Ht!==Ds[Dt].value)),an==null||an(Ds[Dt].value)):Nr.length<Ve&&Ri([...Nr,Ds[Dt].value])},...C,children:[E.jsx(Yr.DropdownTarget,{children:E.jsx(U5,{...cs,__staticSelector:"MultiSelect",classNames:Ni,styles:be,unstyled:a,size:l,className:i,style:s,variant:p,disabled:H,radius:Q,rightSection:M||Ue||E.jsx(Yr.Chevron,{size:l,error:Ie,unstyled:a}),rightSectionPointerEvents:W||(Ue?"all":"none"),rightSectionWidth:j,rightSectionProps:L,leftSection:q,leftSectionWidth:J,leftSectionPointerEvents:re,leftSectionProps:ve,inputContainer:pe,inputWrapperOrder:Ae,withAsterisk:ke,labelProps:it,descriptionProps:Re,errorProps:ut,wrapperProps:Xe,description:Tt,label:gt,error:Ie,multiline:!0,withErrorStyles:de,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ue?"all":"none"),multiline:!0},pointer:!ft,onClick:()=>ft?Br.openDropdown():Br.toggleDropdown(),"data-expanded":Br.dropdownOpened||void 0,id:hi,required:Xt,mod:fn,children:E.jsxs(T3.Group,{disabled:H,unstyled:a,...ri("pillsList"),children:[_e,E.jsx(Yr.EventsTarget,{autoComplete:$o,children:E.jsx(U5.Field,{...Wa,ref:t,id:hi,placeholder:lt,type:!ft&&!lt?"hidden":"visible",...ri("inputField"),unstyled:a,onFocus:Dt=>{U==null||U(Dt),ft&&Br.openDropdown()},onBlur:Dt=>{G==null||G(Dt),Br.closeDropdown(),Hs("")},onKeyDown:ce,value:pi,onChange:Dt=>{Hs(Dt.currentTarget.value),ft&&Br.openDropdown(),x&&Br.selectFirstOption()},disabled:H,readOnly:B||!ft,pointer:!ft})})]})})}),E.jsx(gIe,{data:X?je:Li,hidden:B||H,filter:T,search:pi,limit:S,hiddenWhenEmpty:!ft||!_t||X&&je.length===0&&pi.trim().length===0,withScrollArea:k,maxDropdownHeight:I,filterOptions:ft,value:Nr,checkIconPosition:st,withCheckIcon:$t,nothingFoundMessage:_t,unstyled:a,labelId:gt?`${hi}-label`:void 0,"aria-label":gt?void 0:ki["aria-label"],renderOption:Wt,scrollAreaProps:$n})]}),E.jsx(Yr.HiddenInput,{name:we,valuesDivider:Ze,value:Nr,form:ae,disabled:H,...Be})]})});kee.classes={...Xd.classes,...Yr.classes};kee.displayName="@mantine/core/MultiSelect";var DIe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const Xct={},Qct=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Wo(r)}}},WL=va((e,t)=>{const n=Je("NavLink",Xct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:x,noWrap:_,childrenOffset:C,onKeyDown:T,autoContrast:S,mod:k,...I}=n,R=Gt({name:"NavLink",props:n,classes:DIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qct}),[F,O]=ja({value:l,defaultValue:c,finalValue:!1,onChange:f}),B=!!d,H=U=>{h==null||h(U),B&&(U.preventDefault(),O(!F))};return E.jsxs(E.Fragment,{children:[E.jsxs($f,{...R("root"),component:"a",ref:t,onClick:H,onKeyDown:U=>{T==null||T(U),U.nativeEvent.code==="Space"&&B&&(U.preventDefault(),O(!F))},unstyled:a,mod:[{disabled:m,active:p,expanded:F},k],...I,children:[g&&E.jsx(Fe,{component:"span",...R("section"),mod:{position:"left"},children:g}),E.jsxs(Fe,{...R("body"),mod:{"no-wrap":_},children:[E.jsx(Fe,{component:"span",...R("label"),children:v}),E.jsx(Fe,{component:"span",mod:{active:p},...R("description"),children:b})]}),(B||y)&&E.jsx(Fe,{...R("section"),component:"span",mod:{rotate:F&&!x,position:"right"},children:B?y||E.jsx(OL,{...R("chevron")}):y})]}),E.jsx(AL,{in:F,...R("collapse"),children:E.jsx("div",{...R("children"),children:d})})]})});WL.classes=DIe;WL.displayName="@mantine/core/NavLink";var IIe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Jct={withCloseButton:!0},Zct=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Zi(t),"--notification-color":n?Ki(n,e):void 0}}),Ree=wt((e,t)=>{const n=Je("Notification",Jct,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:x,..._}=n,C=Gt({name:"Notification",classes:IIe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:Zct});return E.jsxs(Fe,{...C("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},x],ref:t,variant:v,..._,role:"alert",children:[c&&!o&&E.jsx("div",{...C("icon"),children:c}),o&&E.jsx(Zc,{size:28,color:i,...C("loader")}),E.jsxs("div",{...C("body"),children:[l&&E.jsx("div",{...C("title"),children:l}),E.jsx(Fe,{...C("description"),mod:{"data-with-title":!!l},children:f})]}),a&&E.jsx(xb,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...C("closeButton")})]})});Ree.classes=IIe;Ree.displayName="@mantine/core/Notification";function kIe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var A3;(function(e){e.event="event",e.props="prop"})(A3||(A3={}));function k1(){}function eft(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function S3(e){return!!(e||"").match(/\d/)}function yC(e){return e==null}function tft(e){return typeof e=="number"&&isNaN(e)}function RIe(e){return yC(e)||tft(e)||typeof e=="number"&&!isFinite(e)}function NIe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function nft(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function rft(e,t,n){var r=nft(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function ift(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function Nee(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function sft(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function PIe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function m0e(e,t){return Array(t+1).join(e)}function OIe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+m0e("0",Math.abs(o))+i:o>=a?i=i+m0e("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function g0e(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=Nee(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=PIe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Hx(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var FIe=eft(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),oft=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function aft(e,t,n){return Math.min(Math.max(e,t),n)}function Cz(e){return Math.max(e.selectionStart,e.selectionEnd)}function uft(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function lft(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function cft(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function fft(e,t,n,r,i,s,o){o===void 0&&(o=cft);var a=i.findIndex(function(x){return x}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function y0e(e,t,n,r){var i=e.length;if(t=aft(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function dft(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(S3(e[n])||S3(e[n-1]));return t}function $Ie(e,t,n,r,i,s){s===void 0&&(s=k1);var o=ift(function(p,m){var g,y;return RIe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?OIe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(yC(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;yC(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function hft(e){return e.replace(/[^0-9]/g,"")}function pft(e){return e}function mft(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=pft);var a=e.removeFormatting;a===void 0&&(a=hft);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=k1);var h=e.onKeyDown;h===void 0&&(h=k1);var p=e.onMouseUp;p===void 0&&(p=k1);var m=e.onFocus;m===void 0&&(m=k1);var g=e.onBlur;g===void 0&&(g=k1);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=dft);var b=e.isValidInputCharacter;b===void 0&&(b=S3);var x=e.isCharacterSame,_=kIe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=$Ie(y,u,!!l,o,a,c),T=C[0],S=T.formattedValue,k=T.numAsString,I=C[1],R=N.useRef(),F=N.useRef({formattedValue:S,numAsString:k}),O=function(Ie,Ve){F.current={formattedValue:Ie.formattedValue,numAsString:Ie.value},I(Ie,Ve)},B=N.useState(!1),H=B[0],U=B[1],G=N.useRef(null),Y=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return U(!0),function(){clearTimeout(Y.current.setCaretTimeout),clearTimeout(Y.current.focusTimeout)}},[]);var Q=o,M=function(Ie,Ve){var ft=parseFloat(Ve);return{formattedValue:Ie,value:Ve,floatValue:isNaN(ft)?void 0:ft}},j=function(Ie,Ve,ft){Ie.selectionStart===0&&Ie.selectionEnd===Ie.value.length||(Hx(Ie,Ve),Y.current.setCaretTimeout=setTimeout(function(){Ie.value===ft&&Ie.selectionStart!==Ve&&Hx(Ie,Ve)},0))},W=function(Ie,Ve,ft){return y0e(Ie,Ve,v(Ie),ft)},L=function(Ie,Ve,ft){var _t=v(Ve),$t=fft(Ve,S,Ie,ft,_t,b,x);return $t=y0e(Ve,$t,_t),$t},q=function(Ie){var Ve=Ie.formattedValue;Ve===void 0&&(Ve="");var ft=Ie.input,_t=Ie.source,$t=Ie.event,st=Ie.numAsString,X;if(ft){var de=Ie.inputValue||ft.value,we=Cz(ft);ft.value=Ve,X=L(de,Ve,we),X!==void 0&&j(ft,X,Ve)}Ve!==S&&O(M(Ve,st),{event:$t,source:_t})};N.useEffect(function(){var Ie=F.current,Ve=Ie.formattedValue,ft=Ie.numAsString;(S!==Ve||k!==ft)&&O(M(S,k),{event:void 0,source:A3.props})},[S,k]);var J=G.current?Cz(G.current):void 0,re=typeof window<"u"?N.useLayoutEffect:N.useEffect;re(function(){var Ie=G.current;if(S!==F.current.formattedValue&&Ie){var Ve=L(F.current.formattedValue,S,J);Ie.value=S,j(Ie,Ve,S)}},[S]);var ve=function(Ie,Ve,ft){var _t=Ve.target,$t=R.current?oft(R.current,_t.selectionEnd):FIe(S,Ie),st=Object.assign(Object.assign({},$t),{lastValue:S}),X=a(Ie,st),de=Q(X);if(X=a(de,void 0),f&&!f(M(de,X))){var we=Ve.target,ae=Cz(we),he=L(Ie,S,ae);return we.value=S,j(we,he,S),!1}return q({formattedValue:de,numAsString:X,inputValue:Ie,event:Ve,source:ft,input:Ve.target}),!0},pe=function(Ie,Ve){Ve===void 0&&(Ve=0);var ft=Ie.selectionStart,_t=Ie.selectionEnd;R.current={selectionStart:ft,selectionEnd:_t+Ve}},Ae=function(Ie){var Ve=Ie.target,ft=Ve.value,_t=ve(ft,Ie,A3.event);_t&&d(Ie),R.current=void 0},ke=function(Ie){var Ve=Ie.target,ft=Ie.key,_t=Ve.selectionStart,$t=Ve.selectionEnd,st=Ve.value;st===void 0&&(st="");var X;ft==="ArrowLeft"||ft==="Backspace"?X=Math.max(_t-1,0):ft==="ArrowRight"?X=Math.min(_t+1,st.length):ft==="Delete"&&(X=_t);var de=0;ft==="Delete"&&_t===$t&&(de=1);var we=ft==="ArrowLeft"||ft==="ArrowRight";if(X===void 0||_t!==$t&&!we){h(Ie),pe(Ve,de);return}var ae=X;if(we){var he=ft==="ArrowLeft"?"left":"right";ae=W(st,X,he),ae!==X&&Ie.preventDefault()}else ft==="Delete"&&!b(st[X])?ae=W(st,X,"right"):ft==="Backspace"&&!b(st[X])&&(ae=W(st,X,"left"));ae!==X&&j(Ve,ae,st),h(Ie),pe(Ve,de)},it=function(Ie){var Ve=Ie.target,ft=function(){var _t=Ve.selectionStart,$t=Ve.selectionEnd,st=Ve.value;if(st===void 0&&(st=""),_t===$t){var X=W(st,_t);X!==_t&&j(Ve,X,st)}};ft(),requestAnimationFrame(function(){ft()}),p(Ie),pe(Ve)},Re=function(Ie){Ie.persist&&Ie.persist();var Ve=Ie.target,ft=Ie.currentTarget;G.current=Ve,Y.current.focusTimeout=setTimeout(function(){var _t=Ve.selectionStart,$t=Ve.selectionEnd,st=Ve.value;st===void 0&&(st="");var X=W(st,_t);X!==_t&&!(_t===0&&$t===st.length)&&j(Ve,X,st),m(Object.assign(Object.assign({},Ie),{currentTarget:ft}))},0)},ut=function(Ie){G.current=null,clearTimeout(Y.current.focusTimeout),clearTimeout(Y.current.setCaretTimeout),g(Ie)},Xe=H&&uft()?"numeric":void 0,Tt=Object.assign({inputMode:Xe},_,{type:t,value:S,onChange:Ae,onKeyDown:ke,onMouseUp:it,onFocus:Re,onBlur:ut});if(n==="text")return i?vi.createElement(vi.Fragment,null,i(S,_)||null):vi.createElement("span",Object.assign({},_,{ref:s}),S);if(r){var gt=r;return vi.createElement(gt,Object.assign({},Tt,{ref:s}))}return vi.createElement("input",Object.assign({},Tt,{ref:s}))}function v0e(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=GL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=Nee(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=PIe(p,n,!!r)),l&&(h=rft(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function GL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function gft(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function yft(e,t){return new RegExp("(^-)|[0-9]|"+NIe(e),"g")}function vft(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function bft(e,t,n){var r;t===void 0&&(t=lft(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=GL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(S3(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(G,Y,Q){var M=!1,j=!1;s.startsWith("-")?M=!1:G.startsWith("--")?(M=!1,j=!0):o.startsWith("-")&&G.length===o.length?M=!1:G[0]==="-"&&(M=!0);var W=M?1:0;return j&&(W=2),W&&(G=G.substring(W),Y-=W,Q-=W),{value:G,start:Y,end:Q,hasNegation:M}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var x=y(t.lastValue,u.start,u.end),_=x.start,C=x.end,T=x.value,S=e.substring(c,f);e.length&&T.length&&(_>T.length-o.length||C<s.length)&&!(S&&o.startsWith(S))&&(e=T);var k=0;e.startsWith(s)?k+=s.length:c<s.length&&(k=c),e=e.substring(k),f-=k;var I=e.length,R=e.length-o.length;e.endsWith(o)?I=R:(f>R||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=gft(b?"-"+e:e,i),e=(e.match(yft(p))||[]).join("");var F=e.indexOf(p);e=e.replace(new RegExp(NIe(p),"g"),function(G,Y){return Y===F?".":""});var O=Nee(e,i),B=O.beforeDecimal,H=O.afterDecimal,U=O.addNegation;return l.end-l.start<u.end-u.start&&B===""&&m&&!parseFloat(H)&&(e=U?"-":""),e}function xft(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function wft(e){var t=GL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function _ft(e){e=wft(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=k1);var s=e.onBlur;s===void 0&&(s=k1);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=kIe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=GL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(U){return v0e(U,e)},b=function(U,G){return bft(U,G,e)},x=yC(f)?c:f,_=d??vft(x,l,t);yC(f)?yC(c)||(_=_||typeof c=="number"):_=_||typeof f=="number";var C=function(U){return RIe(U)?U:(typeof U=="number"&&(U=OIe(U)),_&&typeof a=="number"?g0e(U,a,!!u):U)},T=$Ie(C(f),C(c),!!_,v,b,h),S=T[0],k=S.numAsString,I=S.formattedValue,R=T[1],F=function(U){var G=U.target,Y=U.key,Q=G.selectionStart,M=G.selectionEnd,j=G.value;if(j===void 0&&(j=""),(Y==="Backspace"||Y==="Delete")&&M<l.length){U.preventDefault();return}if(Q!==M){i(U);return}Y==="Backspace"&&j[0]==="-"&&Q===l.length+1&&n&&Hx(G,1),a&&u&&(Y==="Backspace"&&j[Q-1]===g?(Hx(G,Q-1),U.preventDefault()):Y==="Delete"&&j[Q]===g&&U.preventDefault()),y!=null&&y.includes(Y)&&j[Q]===g&&Hx(G,Q+1);var W=o===!0?",":o;Y==="Backspace"&&j[Q-1]===W&&Hx(G,Q-1),Y==="Delete"&&j[Q]===W&&Hx(G,Q+1),i(U)},O=function(U){var G=k;if(G.match(/\d/g)||(G=""),r||(G=sft(G)),u&&a&&(G=g0e(G,a,u)),G!==k){var Y=v0e(G,e);R({formattedValue:Y,value:G,floatValue:parseFloat(G)},{event:U,source:A3.event})}s(U)},B=function(U){return U===g?!0:S3(U)},H=function(U){var G=U.currentValue,Y=U.lastValue,Q=U.formattedValue,M=U.currentValueIndex,j=U.formattedValueIndex,W=G[M],L=Q[j],q=FIe(Y,G),J=q.to;return M>=J.start&&M<J.end&&y&&y.includes(W)&&L===g?!0:W===L};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:H,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(U){return xft(U,e)},onKeyDown:F,onBlur:O})}function Eft(e){var t=_ft(e);return vi.createElement(mft,Object.assign({},t))}function b0e({direction:e,style:t,...n}){return E.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:E.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var wG={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Cft=/^(0\.0*|-0(\.0*)?)$/,Tft=/^-?0\d+(\.\d+)?\.?$/;function Aft(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function x0e(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const Sft={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Dft=(e,{size:t})=>({controls:{"--ni-chevron-size":ur(t,"ni-chevron-size")}}),Pee=wt((e,t)=>{const n=Je("NumberInput",Sft,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:x,decimalScale:_,onKeyDown:C,onKeyDownCapture:T,handlersRef:S,startValue:k,disabled:I,rightSectionPointerEvents:R,allowNegative:F,readOnly:O,size:B,rightSectionWidth:H,stepHoldInterval:U,stepHoldDelay:G,allowLeadingZeros:Y,withKeyboardEvents:Q,trimLeadingZeroesOnBlur:M,...j}=n,W=Gt({name:"NumberInput",classes:wG,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:Dft}),{resolvedClassNames:L,resolvedStyles:q}=sN({classNames:i,styles:s,props:n}),[J,re]=ja({value:c,defaultValue:f,onChange:u}),ve=G!==void 0&&U!==void 0,pe=N.useRef(null),Ae=N.useRef(null),ke=N.useRef(0),it=(X,de)=>{de.source==="event"&&re(Aft(X.floatValue)&&!Cft.test(X.value)&&!(Y&&Tft.test(X.value))?X.floatValue:X.value),l==null||l(X,de)},Re=X=>{const de=String(X).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return de?Math.max(0,(de[1]?de[1].length:0)-(de[2]?+de[2]:0)):0},ut=X=>{pe.current&&typeof X<"u"&&pe.current.setSelectionRange(X,X)},Xe=N.useRef();Xe.current=()=>{let X;const de=Re(J),we=Re(p),ae=Math.max(de,we),he=10**ae;if(typeof J!="number"||Number.isNaN(J))X=vg(k,h,d);else if(d!==void 0){const Me=(Math.round(J*he)+Math.round(p*he))/he;X=Me<=d?Me:d}else X=(Math.round(J*he)+Math.round(p*he))/he;const Ee=X.toFixed(ae);re(parseFloat(Ee)),l==null||l({floatValue:parseFloat(Ee),formattedValue:Ee,value:Ee},{source:"increment"}),setTimeout(()=>{var Me;return ut((Me=pe.current)==null?void 0:Me.value.length)},0)};const Tt=N.useRef();Tt.current=()=>{let X;const de=h!==void 0?h:F?Number.MIN_SAFE_INTEGER:0,we=Re(J),ae=Re(p),he=Math.max(we,ae),Ee=10**he;if(typeof J!="number"||Number.isNaN(J))X=vg(k,de,d);else{const Be=(Math.round(J*Ee)-Math.round(p*Ee))/Ee;X=de!==void 0&&Be<de?de:Be}const Me=X.toFixed(he);re(parseFloat(Me)),l==null||l({floatValue:parseFloat(Me),formattedValue:Me,value:Me},{source:"decrement"}),setTimeout(()=>{var Be;return ut((Be=pe.current)==null?void 0:Be.value.length)},0)};const gt=X=>{C==null||C(X),!(O||!Q)&&(X.key==="ArrowUp"&&(X.preventDefault(),Xe.current()),X.key==="ArrowDown"&&(X.preventDefault(),Tt.current()))},Ie=X=>{if(T==null||T(X),X.key==="Backspace"){const de=pe.current;de.selectionStart===0&&de.selectionStart===de.selectionEnd&&(X.preventDefault(),window.setTimeout(()=>ut(0),0))}};fZ(S,{increment:Xe.current,decrement:Tt.current});const Ve=X=>{X?Xe.current():Tt.current(),ke.current+=1},ft=X=>{if(Ve(X),ve){const de=typeof U=="number"?U:U(ke.current);Ae.current=window.setTimeout(()=>ft(X),de)}},_t=(X,de)=>{var we;X.preventDefault(),(we=pe.current)==null||we.focus(),Ve(de),ve&&(Ae.current=window.setTimeout(()=>ft(de),G))},$t=()=>{Ae.current&&window.clearTimeout(Ae.current),Ae.current=null,ke.current=0},st=E.jsxs("div",{...W("controls"),children:[E.jsx($f,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof J=="number"&&d!==void 0&&J>=d,mod:{direction:"up"},onMouseDown:X=>X.preventDefault(),onPointerDown:X=>{_t(X,!0)},onPointerUp:$t,onPointerLeave:$t,children:E.jsx(b0e,{direction:"up"})}),E.jsx($f,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof J=="number"&&h!==void 0&&J<=h,mod:{direction:"down"},onMouseDown:X=>X.preventDefault(),onPointerDown:X=>{_t(X,!1)},onPointerUp:$t,onPointerLeave:$t,children:E.jsx(b0e,{direction:"down"})})]});return E.jsx(Xd,{component:Eft,allowNegative:F,className:Do(wG.root,r),size:B,...j,readOnly:O,disabled:I,value:J,getInputRef:No(t,pe),onValueChange:it,rightSection:m||O?g:g||st,classNames:L,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:x?_:0,onKeyDown:gt,onKeyDownCapture:Ie,rightSectionPointerEvents:R??(I?"none":void 0),rightSectionWidth:H??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:Y,onBlur:X=>{if(b==null||b(X),v==="blur"&&typeof J=="number"&&vg(J,h,d)!==J&&re(vg(J,h,d)),M&&typeof J=="string"){const de=J.replace(/^0+/,""),we=parseFloat(de);re(Number.isNaN(we)?de:we)}},isAllowed:X=>v==="strict"?y?y(X)&&x0e(X.floatValue,h,d):x0e(X.floatValue,h,d):y?y(X):!0})});Pee.classes={...Xd.classes,...wG};Pee.displayName="@mantine/core/NumberInput";const[Ift,MIe]=yu("Progress.Root component was not found in tree");var hN={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const kft={},Oee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ProgressLabel",kft,e),u=MIe();return E.jsx(Fe,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});Oee.classes=hN;Oee.displayName="@mantine/core/ProgressLabel";const Rft={},Nft=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":ur(t,"progress-size"),"--progress-radius":n===void 0?void 0:Zi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),YL=wt((e,t)=>{const n=Je("ProgressRoot",Rft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Gt({name:"Progress",classes:hN,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nft});return E.jsx(Ift,{value:{getStyles:d,autoContrast:l},children:E.jsx(Fe,{ref:t,...d("root"),...f})})});YL.classes=hN;YL.displayName="@mantine/core/ProgressRoot";const Pft={withAria:!0},KL=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Je("ProgressSection",Pft,e),p=MIe(),m=Po(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return E.jsx(Fe,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Ki(l,m),"--progress-label-color":SA(p.autoContrast,m)?bb({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});KL.classes=hN;KL.displayName="@mantine/core/ProgressSection";const Oft={},LA=wt((e,t)=>{const n=Je("Progress",Oft,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=sN({classNames:i,styles:s,props:n});return E.jsx(YL,{ref:t,classNames:d,styles:h,vars:o,...f,children:E.jsx(KL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});LA.classes=hN;LA.displayName="@mantine/core/Progress";LA.Section=KL;LA.Root=YL;LA.Label=Oee;const[Fft,LIe]=AA(),[$ft,Mft]=AA();var BIe={card:"m_9dc8ae12"};const Lft={withBorder:!0},Bft=(e,{radius:t})=>({card:{"--card-radius":Zi(t)}}),Fee=wt((e,t)=>{const n=Je("RadioCard",Lft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Gt({name:"RadioCard",classes:BIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Bft,rootSelector:"card"}),{dir:v}=xy(),b=LIe(),x=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,_=p||(b==null?void 0:b.name),C=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const S=Array.from(document.querySelectorAll(`[role="radio"][name="${_||"__mantine"}"]`)),k=S.findIndex(F=>F===T.target),I=k+1>=S.length?0:k+1,R=k-1<0?S.length-1:k-1;T.nativeEvent.code==="ArrowDown"&&(S[I].focus(),S[I].click()),T.nativeEvent.code==="ArrowUp"&&(S[R].focus(),S[R].click()),T.nativeEvent.code==="ArrowLeft"&&(S[v==="ltr"?R:I].focus(),S[v==="ltr"?R:I].click()),T.nativeEvent.code==="ArrowRight"&&(S[v==="ltr"?I:R].focus(),S[v==="ltr"?I:R].click())}};return E.jsx($ft,{value:{checked:x},children:E.jsx($f,{ref:t,mod:[{"with-border":f,checked:x},c],...y("card"),...g,role:"radio","aria-checked":x,name:_,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:C})})});Fee.displayName="@mantine/core/RadioCard";Fee.classes=BIe;const jft={},$ee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Je("RadioGroup",jft,e),f=al(u),[d,h]=ja({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return E.jsx(Fft,{value:{value:d,onChange:p,size:s,name:f},children:E.jsx(po.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:E.jsx(dee,{role:"radiogroup",children:a})})})});$ee.classes=po.Wrapper.classes;$ee.displayName="@mantine/core/RadioGroup";function jIe({size:e,style:t,...n}){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:ze(e),height:ze(e),...t},"aria-hidden":!0,...n,children:E.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var UIe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const Uft={icon:jIe},zft=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=cm({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":ur(r,"radio-size"),"--radio-radius":t===void 0?void 0:Zi(t),"--radio-color":s==="outline"?u:Ki(n,e),"--radio-icon-size":ur(r,"radio-icon-size"),"--radio-icon-color":i?Ki(i,e):SA(o,e)?bb({color:n,theme:e,autoContrast:o}):void 0}}},Mee=wt((e,t)=>{const n=Je("RadioIndicator",Uft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,x=Gt({name:"RadioIndicator",classes:UIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zft,rootSelector:"indicator"}),_=Mft(),C=typeof p=="boolean"?p:(_==null?void 0:_.checked)||!1;return E.jsx(Fe,{ref:t,...x("indicator",{variant:g}),variant:g,mod:[{checked:C,disabled:y},m],...v,children:E.jsx(b,{...x("icon")})})});Mee.displayName="@mantine/core/RadioIndicator";Mee.classes=UIe;var zIe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Vft={labelPosition:"right"},Hft=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=cm({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":ur(t,"radio-size"),"--radio-radius":n===void 0?void 0:Zi(n),"--radio-color":s==="outline"?u:Ki(r,e),"--radio-icon-color":i?Ki(i,e):SA(o,e)?bb({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":ur(t,"radio-icon-size")}}},Jg=wt((e,t)=>{const n=Je("Radio",Vft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:x=jIe,rootRef:_,iconColor:C,onChange:T,mod:S,...k}=n,I=Gt({name:"Radio",classes:zIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Hft}),R=LIe(),F=(R==null?void 0:R.size)??c,O=n.size?c:F,{styleProps:B,rest:H}=O_(k),U=al(l),G=R?{checked:R.value===H.value,name:H.name??R.name,onChange:Y=>{R.onChange(Y),T==null||T(Y)}}:{};return E.jsx(FL,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:U,size:O,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":G.checked||void 0,variant:y,ref:_,mod:S,...B,...b,children:E.jsxs(Fe,{...I("inner"),mod:{"label-position":d},children:[E.jsx(Fe,{...I("radio",{focusable:!0,variant:y}),onChange:T,...H,...G,component:"input",mod:{error:!!p},ref:t,id:U,disabled:v,type:"radio"}),E.jsx(x,{...I("icon"),"aria-hidden":!0})]})})});Jg.classes=zIe;Jg.displayName="@mantine/core/Radio";Jg.Group=$ee;Jg.Card=Fee;Jg.Indicator=Mee;const qft={duration:100,transition:"fade"};function Wft(e,t){return{...qft,...t,...e}}function Gft({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=$Z({placement:t,middleware:[NZ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Rg(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var XL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Yft={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Ep("popover")},Kft=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Zi(t),"--tooltip-bg":n?Ki(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Lee=wt((e,t)=>{const n=Je("TooltipFloating",Yft,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:x,portalProps:_,...C}=n,T=Po(),S=Gt({name:"TooltipFloating",props:n,classes:XL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:x,varsResolver:Kft}),{handleMouseMove:k,x:I,y:R,opened:F,boundaryRef:O,floating:B,setOpened:H}=Gft({offset:p,position:m});if(!yb(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const U=No(O,r.ref,t),G=Q=>{var M,j;(j=(M=r.props).onMouseEnter)==null||j.call(M,Q),k(Q),H(!0)},Y=Q=>{var M,j;(j=(M=r.props).onMouseLeave)==null||j.call(M,Q),H(!1)};return E.jsxs(E.Fragment,{children:[E.jsx(RA,{..._,withinPortal:s,children:E.jsx(Fe,{...C,...S("tooltip",{style:{...vZ(o,T),zIndex:y,display:!v&&F?"block":"none",top:(R&&Math.round(R))??"",left:(I&&Math.round(I))??""}}),variant:b,ref:B,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:U,onMouseEnter:G,onMouseLeave:Y})]})});Lee.classes=XL;Lee.displayName="@mantine/core/TooltipFloating";const VIe=N.createContext(!1),Xft=VIe.Provider,Qft=()=>N.useContext(VIe),Jft={openDelay:0,closeDelay:0};function HIe(e){const{openDelay:t,closeDelay:n,children:r}=Je("TooltipGroup",Jft,e);return E.jsx(Xft,{value:!0,children:E.jsx(sat,{delay:{open:t,close:n},children:r})})}HIe.displayName="@mantine/core/TooltipGroup";function Zft(e){var C,T,S;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Qft(),o=al(),{delay:a,currentId:u,setCurrentId:l}=SDe(),c=N.useCallback(k=>{n(k),k&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=$Z({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[_De(e.offset),NZ({padding:8}),yG(),EDe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[vG()]:[]]}),{getReferenceProps:b,getFloatingProps:x}=dat([iat(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),fat(h,{enabled:(S=e.events)==null?void 0:S.focus,visibleOnly:!0}),pat(h,{role:"tooltip"}),lat(h,{enabled:typeof e.opened>"u"}),oat(h,{id:o})]);ODe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),z0(()=>{var k;(k=e.onPositionChange)==null||k.call(e,g)},[g]);const _=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:x,getReferenceProps:b,isGroupPhase:_,opened:i,placement:g}}const w0e={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Ep("popover"),positionDependencies:[]},edt=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Zi(t),"--tooltip-bg":n?Ki(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ws=wt((e,t)=>{const n=Je("Tooltip",w0e,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:x,arrowOffset:_,arrowRadius:C,arrowPosition:T,offset:S,transitionProps:k,multiline:I,events:R,zIndex:F,disabled:O,positionDependencies:B,onClick:H,onMouseEnter:U,onMouseLeave:G,inline:Y,variant:Q,keepMounted:M,vars:j,portalProps:W,mod:L,floatingStrategy:q,...J}=Je("Tooltip",w0e,n),{dir:re}=xy(),ve=N.useRef(null),pe=Zft({position:DDe(re,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:ve,arrowOffset:_,offset:typeof S=="number"?S+(b?x/2:0):S,positionDependencies:[...B,r],inline:Y,strategy:q}),Ae=Gt({name:"Tooltip",props:n,classes:XL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:j,varsResolver:edt});if(!yb(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ke=No(pe.reference,r.ref,t),it=Wft(k,{duration:100,transition:"fade"});return E.jsxs(E.Fragment,{children:[E.jsx(RA,{...W,withinPortal:f,children:E.jsx(_y,{...it,keepMounted:M,mounted:!O&&!!pe.opened,duration:pe.isGroupPhase?10:it.duration,children:Re=>E.jsxs(Fe,{...J,variant:Q,mod:[{multiline:I},L],...pe.getFloatingProps({ref:pe.floating,className:Ae("tooltip").className,style:{...Ae("tooltip").style,...Re,zIndex:F,top:pe.y??0,left:pe.x??0}}),children:[o,E.jsx(MZ,{ref:ve,arrowX:pe.arrowX,arrowY:pe.arrowY,visible:b,position:pe.placement,arrowSize:x,arrowOffset:_,arrowRadius:C,arrowPosition:T,...Ae("arrow")})]})})}),N.cloneElement(r,pe.getReferenceProps({onClick:H,onMouseEnter:U,onMouseLeave:G,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ke,className:Do(v,r.props.className),...r.props}))]})});ws.classes=XL;ws.displayName="@mantine/core/Tooltip";ws.Floating=Lee;ws.Group=HIe;var qIe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const tdt={withItemsBorders:!0},ndt=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Zi(t),"--sc-color":n?Ki(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":ur(i,"sc-padding"),"--sc-font-size":Ol(i)}}),QL=wt((e,t)=>{var re,ve;const n=Je("SegmentedControl",tdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:x,transitionDuration:_,transitionTimingFunction:C,variant:T,autoContrast:S,withItemsBorders:k,mod:I,...R}=n,F=Gt({name:"SegmentedControl",props:n,classes:qIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ndt}),O=Po(),B=l.map(pe=>typeof pe=="string"?{label:pe,value:pe}:pe),H=hit(),[U,G]=N.useState(null),[Y,Q]=N.useState({}),M=(pe,Ae)=>{Y[Ae]=pe,Q(Y)},[j,W]=ja({value:c,defaultValue:f,finalValue:Array.isArray(l)?((re=B.find(pe=>!pe.disabled))==null?void 0:re.value)??((ve=l[0])==null?void 0:ve.value)??null:null,onChange:d}),L=al(p),q=B.map(pe=>N.createElement(Fe,{...F("control"),mod:{active:j===pe.value,orientation:v},key:pe.value},N.createElement("input",{...F("input"),disabled:m||pe.disabled,type:"radio",name:L,value:pe.value,id:`${L}-${pe.value}`,checked:j===pe.value,onChange:()=>!g&&W(pe.value),"data-focus-ring":O.focusRing,key:`${pe.value}-input`}),N.createElement(Fe,{component:"label",...F("label"),mod:{active:j===pe.value&&!(m||pe.disabled),disabled:m||pe.disabled,"read-only":g},htmlFor:`${L}-${pe.value}`,ref:Ae=>M(Ae,pe.value),__vars:{"--sc-label-color":x!==void 0?bb({color:x,theme:O,autoContrast:S}):void 0},key:`${pe.value}-label`},E.jsx("span",{...F("innerLabel"),children:pe.label})))),J=No(t,pe=>G(pe));return l.length===0?null:E.jsxs(Fe,{...F("root"),variant:T,size:h,ref:J,mod:[{"full-width":y,orientation:v,initialized:H,"with-items-borders":k},I],...R,role:"radiogroup",children:[typeof j=="string"&&E.jsx(zZ,{target:Y[j],parent:U,component:"span",transitionDuration:"var(--sc-transition-duration)",...F("indicator")}),q]})});QL.classes=qIe;QL.displayName="@mantine/core/SegmentedControl";const rdt={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},BA=wt((e,t)=>{const n=Je("Select",rdt,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:x,readOnly:_,disabled:C,filter:T,limit:S,withScrollArea:k,maxDropdownHeight:I,size:R,searchable:F,rightSection:O,checkIconPosition:B,withCheckIcon:H,nothingFoundMessage:U,name:G,form:Y,searchValue:Q,defaultSearchValue:M,onSearchChange:j,allowDeselect:W,error:L,rightSectionPointerEvents:q,id:J,clearable:re,clearButtonProps:ve,hiddenInputProps:pe,renderOption:Ae,onClear:ke,autoComplete:it,scrollAreaProps:Re,...ut}=n,Xe=N.useMemo(()=>JDe(m),[m]),Tt=N.useMemo(()=>ZZ(Xe),[Xe]),gt=al(J),[Ie,Ve,ft]=ja({value:g,defaultValue:y,finalValue:null,onChange:p}),_t=typeof Ie=="string"?Tt[Ie]:void 0,[$t,st]=ja({value:Q,defaultValue:M,finalValue:_t?_t.label:"",onChange:j}),X=cee({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),X.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),X.resetSelectedOption()}}),{resolvedClassNames:de,resolvedStyles:we}=sN({props:n,styles:i,classNames:r});N.useEffect(()=>{v&&X.selectFirstOption()},[v,Ie]),N.useEffect(()=>{g===null&&st(""),typeof g=="string"&&_t&&st(_t.label)},[g,_t]);const ae=re&&!!Ie&&!C&&!_&&E.jsx(Yr.ClearButton,{size:R,...ve,onClear:()=>{Ve(null,null),st(""),ke==null||ke()}});return E.jsxs(E.Fragment,{children:[E.jsxs(Yr,{store:X,__staticSelector:"Select",classNames:de,styles:we,unstyled:s,readOnly:_,onOptionSubmit:he=>{b==null||b(he);const Ee=W&&Tt[he].value===Ie?null:Tt[he],Me=Ee?Ee.value:null;Ve(Me,Ee),!ft&&st(typeof Me=="string"&&(Ee==null?void 0:Ee.label)||""),X.closeDropdown()},size:R,...x,children:[E.jsx(Yr.Target,{targetType:F?"input":"button",autoComplete:it,children:E.jsx(Xd,{id:gt,ref:t,rightSection:O||ae||E.jsx(Yr.Chevron,{size:R,error:L,unstyled:s}),rightSectionPointerEvents:q||(ae?"all":"none"),...ut,size:R,__staticSelector:"Select",disabled:C,readOnly:_||!F,value:$t,onChange:he=>{st(he.currentTarget.value),X.openDropdown(),v&&X.selectFirstOption()},onFocus:he=>{F&&X.openDropdown(),f==null||f(he)},onBlur:he=>{var Ee;F&&X.closeDropdown(),st(Ie!=null&&((Ee=Tt[Ie])==null?void 0:Ee.label)||""),d==null||d(he)},onClick:he=>{F?X.openDropdown():X.toggleDropdown(),h==null||h(he)},classNames:de,styles:we,unstyled:s,pointer:!F,error:L})}),E.jsx(gIe,{data:Xe,hidden:_||C,filter:T,search:$t,limit:S,hiddenWhenEmpty:!F||!U,withScrollArea:k,maxDropdownHeight:I,filterOptions:F&&(_t==null?void 0:_t.label)!==$t,value:Ie,checkIconPosition:B,withCheckIcon:H,nothingFoundMessage:U,unstyled:s,labelId:ut.label?`${gt}-label`:void 0,"aria-label":ut.label?void 0:ut["aria-label"],renderOption:Ae,scrollAreaProps:Re})]}),E.jsx(Yr.HiddenInput,{value:Ie,name:G,form:Y,disabled:C,...pe})]})});BA.classes={...Xd.classes,...Yr.classes};BA.displayName="@mantine/core/Select";function idt({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Po(),s=t===void 0?e:t,o=gb({"--sg-spacing-x":Wo(Hh(e)),"--sg-spacing-y":Wo(Hh(s)),"--sg-cols":(c=Hh(n))==null?void 0:c.toString()}),a=ls(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Wo(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Wo(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=w3(ls(a),i).filter(f=>ls(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return E.jsx(P_,{styles:o,media:l,selector:r})}function Tz(e){return typeof e=="object"&&e!==null?ls(e):[]}function sdt(e){return e.sort((t,n)=>x3(t)-x3(n))}function odt({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...Tz(e),...Tz(t),...Tz(n)]));return sdt(r)}function adt({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=gb({"--sg-spacing-x":Wo(Hh(e)),"--sg-spacing-y":Wo(Hh(i)),"--sg-cols":(l=Hh(n))==null?void 0:l.toString()}),o=odt({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Wo(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Wo(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return E.jsx(P_,{styles:s,container:u,selector:r})}var WIe={container:"m_925c2d2c",root:"m_2415a157"};const udt={cols:1,spacing:"md",type:"media"},Bee=wt((e,t)=>{const n=Je("SimpleGrid",udt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Gt({name:"SimpleGrid",classes:WIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=oN();return d==="container"?E.jsxs(E.Fragment,{children:[E.jsx(adt,{...n,selector:`.${m}`}),E.jsx("div",{...p("container"),children:E.jsx(Fe,{ref:t,...p("root",{className:m}),...h})})]}):E.jsxs(E.Fragment,{children:[E.jsx(idt,{...n,selector:`.${m}`}),E.jsx(Fe,{ref:t,...p("root",{className:m}),...h})]})});Bee.classes=WIe;Bee.displayName="@mantine/core/SimpleGrid";const[GIe,JL]=yu("SliderProvider was not found in tree"),jee=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=JL();return E.jsx(Fe,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});jee.displayName="@mantine/core/SliderRoot";const z5=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=JL(),[b,x]=N.useState(!1),_=l||s||b||h&&p;return E.jsxs(Fe,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{x(!0),typeof f=="function"&&f()},onBlur:()=>{x(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[m,E.jsx(_y,{mounted:i!=null&&!!_,transition:"fade",duration:0,...u,children:C=>E.jsx("div",{...v("label",{style:C}),children:i})})]})});z5.displayName="@mantine/core/SliderThumb";function V5({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function ldt({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function YIe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=JL();if(!e)return null;const u=e.map((l,c)=>N.createElement(Fe,{...a("markWrapper"),__vars:{"--mark-offset":`${V5({value:l.value,min:t,max:n})}%`},key:c},E.jsx(Fe,{...a("mark"),mod:{filled:ldt({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&E.jsx("div",{...a("markLabel"),children:l.label})));return E.jsx("div",{children:u})}YIe.displayName="@mantine/core/SliderMarks";function Uee({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=JL();return E.jsx(E.Fragment,{children:E.jsx(Fe,{...u("trackContainer"),mod:{disabled:r},...o,children:E.jsxs(Fe,{...u("track"),mod:{inverted:s,disabled:r},children:[E.jsx(Fe,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,E.jsx(YIe,{...a,offset:i,disabled:r,inverted:s})]})})})}Uee.displayName="@mantine/core/SliderTrack";function _G({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function bd(e,t){return parseFloat(e.toFixed(t))}function KIe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var ZL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const cdt={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},fdt=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":ur(t,"slider-size"),"--slider-color":n?Ki(n,e):void 0,"--slider-radius":i===void 0?void 0:Zi(i),"--slider-thumb-size":r!==void 0?ze(r):"calc(var(--slider-size) * 2)"}}),M_=wt((e,t)=>{const n=Je("Slider",cdt,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:x,thumbChildren:_,disabled:C,unstyled:T,scale:S,inverted:k,className:I,style:R,vars:F,hiddenInputProps:O,...B}=n,H=Gt({name:"Slider",props:n,classes:ZL,classNames:r,className:I,styles:i,style:R,vars:F,varsResolver:fdt,unstyled:T}),{dir:U}=xy(),[G,Y]=N.useState(!1),[Q,M]=ja({value:typeof s=="number"?vg(s,l,c):s,defaultValue:typeof h=="number"?vg(h,l,c):h,finalValue:vg(0,l,c),onChange:o}),j=N.useRef(Q),W=N.useRef(),L=N.useRef(),q=V5({value:Q,min:l,max:c}),J=S(Q),re=typeof g=="function"?g(J):g,ve=d??KIe(f),pe=N.useCallback(({x:Re})=>{if(!C){const ut=_G({value:Re,min:l,max:c,step:f,precision:ve});M(ut),j.current=ut}},[C,l,c,f,ve,M]),{ref:Ae,active:ke}=jSe(pe,{onScrubEnd:()=>a==null?void 0:a(j.current)},U),it=Re=>{var ut,Xe,Tt,gt,Ie,Ve;if(!C)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(ut=L.current)==null||ut.focus();const ft=bd(Math.min(Math.max(Q+f,l),c),ve);M(ft),a==null||a(ft);break}case"ArrowRight":{Re.preventDefault(),(Xe=L.current)==null||Xe.focus();const ft=bd(Math.min(Math.max(U==="rtl"?Q-f:Q+f,l),c),ve);M(ft),a==null||a(ft);break}case"ArrowDown":{Re.preventDefault(),(Tt=L.current)==null||Tt.focus();const ft=bd(Math.min(Math.max(Q-f,l),c),ve);M(ft),a==null||a(ft);break}case"ArrowLeft":{Re.preventDefault(),(gt=L.current)==null||gt.focus();const ft=bd(Math.min(Math.max(U==="rtl"?Q+f:Q-f,l),c),ve);M(ft),a==null||a(ft);break}case"Home":{Re.preventDefault(),(Ie=L.current)==null||Ie.focus(),M(l),a==null||a(l);break}case"End":{Re.preventDefault(),(Ve=L.current)==null||Ve.focus(),M(c),a==null||a(c);break}}};return E.jsx(GIe,{value:{getStyles:H},children:E.jsxs(jee,{...B,ref:No(t,W),onKeyDownCapture:it,onMouseDownCapture:()=>{var Re;return(Re=W.current)==null?void 0:Re.focus()},size:u,disabled:C,children:[E.jsx(Uee,{inverted:k,offset:0,filled:q,marks:m,min:l,max:c,value:J,disabled:C,containerProps:{ref:Ae,onMouseEnter:x?()=>Y(!0):void 0,onMouseLeave:x?()=>Y(!1):void 0},children:E.jsx(z5,{max:c,min:l,value:J,position:q,dragging:ke,label:re,ref:L,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:x,isHovered:G,disabled:C,children:_})}),E.jsx("input",{type:"hidden",name:p,value:J,...O})]})})});M_.classes=ZL;M_.displayName="@mantine/core/Slider";function ddt(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const hdt=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":ur(t,"slider-size"),"--slider-color":n?Ki(n,e):void 0,"--slider-radius":i===void 0?void 0:Zi(i),"--slider-thumb-size":r!==void 0?ze(r):"calc(var(--slider-size) * 2)"}}),pdt={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},dT=wt((e,t)=>{const n=Je("RangeSlider",pdt,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:x,thumbFromLabel:_,thumbToLabel:C,showLabelOnHover:T,thumbChildren:S,disabled:k,unstyled:I,scale:R,inverted:F,className:O,style:B,vars:H,hiddenInputProps:U,...G}=n,Y=Gt({name:"Slider",props:n,classes:ZL,classNames:r,className:O,styles:i,style:B,vars:H,varsResolver:hdt,unstyled:I}),{dir:Q}=xy(),[M,j]=N.useState(-1),[W,L]=N.useState(!1),[q,J]=ja({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),re=N.useRef(q),ve=N.useRef([]),pe=N.useRef(void 0),Ae=[V5({value:q[0],min:l,max:c}),V5({value:q[1],min:l,max:c})],ke=p??KIe(h),it=st=>{J(st),re.current=st};N.useEffect(()=>{Array.isArray(s)&&(re.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Re=(st,X,de)=>{const we=[...re.current];we[X]=st,X===0&&(st>we[1]-(f-1e-9)&&(we[1]=Math.min(st+f,c)),st>(c-(f-1e-9)||l)&&(we[X]=re.current[X]),we[1]-st>d&&(we[1]=st+d)),X===1&&(st<we[0]+f&&(we[0]=Math.max(st-f,l)),st<we[0]+f&&(we[X]=re.current[X]),st-we[0]>d&&(we[0]=st-d)),we[0]=bd(we[0],ke),we[1]=bd(we[1],ke),it(we),de&&(a==null||a(re.current))},ut=st=>{if(!k){const X=_G({value:st,min:l,max:c,step:h,precision:ke});Re(X,pe.current,!1)}},{ref:Xe,active:Tt}=jSe(({x:st})=>ut(st),{onScrubEnd:()=>a==null?void 0:a(re.current)},Q);function gt(st){pe.current=st}const Ie=st=>{Xe.current.focus();const X=Xe.current.getBoundingClientRect(),de=ddt(st.nativeEvent),we=_G({value:de-X.left,max:c,min:l,step:h,containerWidth:X.width}),ae=Math.abs(q[0]-we)>Math.abs(q[1]-we)?1:0,he=Q==="ltr"?ae:ae===1?0:1;pe.current=he},Ve=()=>M!==1&&M!==0?(j(0),0):M,ft=st=>{if(!k)switch(st.key){case"ArrowUp":{st.preventDefault();const X=Ve();ve.current[X].focus(),Re(bd(Math.min(Math.max(re.current[X]+h,l),c),ke),X,!0);break}case"ArrowRight":{st.preventDefault();const X=Ve();ve.current[X].focus(),Re(bd(Math.min(Math.max(Q==="rtl"?re.current[X]-h:re.current[X]+h,l),c),ke),X,!0);break}case"ArrowDown":{st.preventDefault();const X=Ve();ve.current[X].focus(),Re(bd(Math.min(Math.max(re.current[X]-h,l),c),ke),X,!0);break}case"ArrowLeft":{st.preventDefault();const X=Ve();ve.current[X].focus(),Re(bd(Math.min(Math.max(Q==="rtl"?re.current[X]+h:re.current[X]-h,l),c),ke),X,!0);break}}},_t={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:x,onBlur:()=>j(-1)},$t=Array.isArray(S);return E.jsx(GIe,{value:{getStyles:Y},children:E.jsxs(jee,{...G,size:u,ref:t,disabled:k,children:[E.jsxs(Uee,{offset:Ae[0],marksOffset:q[0],filled:Ae[1]-Ae[0],marks:y,inverted:F,min:l,max:c,value:q[1],disabled:k,containerProps:{ref:Xe,onMouseEnter:T?()=>L(!0):void 0,onMouseLeave:T?()=>L(!1):void 0,onTouchStartCapture:Ie,onTouchEndCapture:()=>{pe.current=-1},onMouseDownCapture:Ie,onMouseUpCapture:()=>{pe.current=-1},onKeyDownCapture:ft},children:[E.jsx(z5,{..._t,value:R(q[0]),position:Ae[0],dragging:Tt,label:typeof v=="function"?v(bd(R(q[0]),ke)):v,ref:st=>{ve.current[0]=st},thumbLabel:_,onMouseDown:()=>gt(0),onFocus:()=>j(0),showLabelOnHover:T,isHovered:W,disabled:k,children:$t?S[0]:S}),E.jsx(z5,{..._t,thumbLabel:C,value:R(q[1]),position:Ae[1],dragging:Tt,label:typeof v=="function"?v(bd(R(q[1]),ke)):v,ref:st=>{ve.current[1]=st},onMouseDown:()=>gt(1),onFocus:()=>j(1),showLabelOnHover:T,isHovered:W,disabled:k,children:$t?S[1]:S})]}),E.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...U}),E.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...U})]})})});dT.classes=ZL;dT.displayName="@mantine/core/RangeSlider";const mdt={},Ku=wt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Je("Space",mdt,e);return E.jsx(Fe,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Ku.displayName="@mantine/core/Space";var XIe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const gdt={maxHeight:100,initialState:!1},ydt=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),zee=wt((e,t)=>{const n=Je("Spoiler",gdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=Gt({name:"Spoiler",classes:XIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ydt}),b=al(g),x=`${b}-region`,[_,C]=N.useState(l),{ref:T,height:S}=oit(),k=_?f:d,I=k!==null&&c<S;return E.jsxs(Fe,{...v("root"),id:b,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&E.jsx(wb,{component:"button",type:"button",ref:p,onClick:()=>C(R=>!R),"aria-expanded":_,"aria-controls":x,...v("control"),children:k}),E.jsx("div",{...v("content",{style:{maxHeight:_?S?ze(S):void 0:ze(c)}}),"data-reduce-motion":!0,role:"region",id:x,children:E.jsx("div",{ref:T,children:h})})]})});zee.classes=XIe;zee.displayName="@mantine/core/Spoiler";var QIe={root:"m_6d731127"};const vdt={gap:"md",align:"stretch",justify:"flex-start"},bdt=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Wo(t),"--stack-align":n,"--stack-justify":r}}),os=wt((e,t)=>{const n=Je("Stack",vdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Gt({name:"Stack",props:n,classes:QIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bdt});return E.jsx(Fe,{ref:t,...p("root"),variant:d,...h})});os.classes=QIe;os.displayName="@mantine/core/Stack";const JIe=N.createContext(null),xdt=JIe.Provider,wdt=()=>N.useContext(JIe),_dt={},Vee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Je("SwitchGroup",_dt,e),[c,f]=ja({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return E.jsx(xdt,{value:{value:c,onChange:d,size:s},children:E.jsx(po.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:E.jsx(dee,{role:"group",children:a})})})});Vee.classes=po.Wrapper.classes;Vee.displayName="@mantine/core/SwitchGroup";var ZIe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Edt={labelPosition:"right"},Cdt=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Zi(t),"--switch-height":ur(r,"switch-height"),"--switch-width":ur(r,"switch-width"),"--switch-thumb-size":ur(r,"switch-thumb-size"),"--switch-label-font-size":ur(r,"switch-label-font-size"),"--switch-track-label-padding":ur(r,"switch-track-label-padding"),"--switch-color":n?Ki(n,e):void 0}}),vC=wt((e,t)=>{const n=Je("Switch",Edt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:x,onChange:_,labelPosition:C,description:T,error:S,disabled:k,variant:I,rootRef:R,mod:F,...O}=n,B=wdt(),H=p||(B==null?void 0:B.size),U=Gt({name:"Switch",props:n,classes:ZIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Cdt}),{styleProps:G,rest:Y}=O_(O),Q=al(h),M=B?{checked:B.value.includes(Y.value),onChange:B.onChange}:{},[j,W]=ja({value:M.checked??b,defaultValue:x,finalValue:!1});return E.jsxs(FL,{...U("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Q,size:H,labelPosition:C,label:c,description:T,error:S,disabled:k,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":M.checked||void 0,variant:I,ref:R,mod:F,...G,...g,children:[E.jsx("input",{...Y,disabled:k,checked:j,onChange:L=>{var q;B?(q=M.onChange)==null||q.call(M,L):_==null||_(L),W(L.currentTarget.checked)},id:Q,ref:t,type:"checkbox",role:"switch",...U("input")}),E.jsxs(Fe,{"aria-hidden":"true",mod:{error:S,"label-position":C},...U("track"),children:[E.jsx(Fe,{component:"span",mod:"reduce-motion",...U("thumb"),children:v}),E.jsx("span",{...U("trackLabel"),children:j?d:f})]})]})});vC.classes={...ZIe,...sIe};vC.displayName="@mantine/core/Switch";vC.Group=Vee;const[Tdt,Adt]=yu("Table component was not found in the tree");var pN={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function Sdt(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function L_(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=wt((i,s)=>{const o=Je(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=Adt();return E.jsx(Fe,{component:e,ref:s,...Sdt(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=pN,r}const EG=L_("th",{columnBorder:!0}),eke=L_("td",{columnBorder:!0}),tF=L_("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),tke=L_("thead",{stickyHeader:!0}),nke=L_("tbody"),rke=L_("tfoot"),ike=L_("caption",{captionSide:!0});function Hee({data:e}){return E.jsxs(E.Fragment,{children:[e.caption&&E.jsx(ike,{children:e.caption}),e.head&&E.jsx(tke,{children:E.jsx(tF,{children:e.head.map((t,n)=>E.jsx(EG,{children:t},n))})}),e.body&&E.jsx(nke,{children:e.body.map((t,n)=>E.jsx(tF,{children:t.map((r,i)=>E.jsx(eke,{children:r},i))},n))}),e.foot&&E.jsx(rke,{children:E.jsx(tF,{children:e.foot.map((t,n)=>E.jsx(EG,{children:t},n))})})]})}Hee.displayName="@mantine/core/TableDataRenderer";const Ddt={type:"scrollarea"},Idt=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":ze(t),"--table-overflow":n==="native"?"auto":void 0}}),qee=wt((e,t)=>{const n=Je("TableScrollContainer",Ddt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Gt({name:"TableScrollContainer",classes:pN,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Idt,rootSelector:"scrollContainer"});return E.jsx(Fe,{component:f==="scrollarea"?Kg:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:E.jsx("div",{...h("scrollContainerInner"),children:l})})});qee.classes=pN;qee.displayName="@mantine/core/TableScrollContainer";const kdt={withRowBorders:!0,verticalSpacing:7},Rdt=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Wo(r),"--table-vertical-spacing":Wo(i),"--table-border-color":s?Ki(s,e):void 0,"--table-striped-color":u&&o?Ki(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Ki(a,e):void 0,"--table-sticky-header-offset":f?ze(c):void 0}}),_n=wt((e,t)=>{const n=Je("Table",kdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:x,variant:_,data:C,children:T,stickyHeader:S,stickyHeaderOffset:k,mod:I,...R}=n,F=Gt({name:"Table",props:n,className:i,style:s,classes:pN,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:Rdt});return E.jsx(Tdt,{value:{getStyles:F,stickyHeader:S,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:E.jsx(Fe,{component:"table",variant:_,ref:t,mod:[{"data-with-table-border":v},I],...F("table"),...R,children:T||!!C&&E.jsx(Hee,{data:C})})})});_n.classes=pN;_n.displayName="@mantine/core/Table";_n.Td=eke;_n.Th=EG;_n.Tr=tF;_n.Thead=tke;_n.Tbody=nke;_n.Tfoot=rke;_n.Caption=ike;_n.ScrollContainer=qee;_n.DataRenderer=Hee;const[Ndt,Wee]=yu("Tabs component was not found in the tree");var mN={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Pdt={},Gee=wt((e,t)=>{const n=Je("TabsList",Pdt,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=Wee();return E.jsx(Fe,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});Gee.classes=mN;Gee.displayName="@mantine/core/TabsList";const Odt={},Yee=wt((e,t)=>{const n=Je("TabsPanel",Odt,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=Wee(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return E.jsx(Fe,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});Yee.classes=mN;Yee.displayName="@mantine/core/TabsPanel";const Fdt={},Kee=wt((e,t)=>{const n=Je("TabsTab",Fdt,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Po(),{dir:b}=xy(),x=Wee(),_=a===x.value,C=S=>{x.onChange(x.allowTabDeactivation&&a===x.value?null:a),u==null||u(S)},T={classNames:h,styles:p,props:n};return E.jsxs($f,{...y,...x.getStyles("tab",{className:r,style:d,variant:x.variant,...T}),disabled:c,unstyled:x.unstyled,variant:x.variant,mod:[{active:_,disabled:c,orientation:x.orientation,inverted:x.inverted,placement:x.orientation==="vertical"&&x.placement},g],ref:t,role:"tab",id:x.getTabId(a),"aria-selected":_,tabIndex:_||x.value===null?0:-1,"aria-controls":x.getPanelId(a),onClick:C,__vars:{"--tabs-color":f?Ki(f,v):void 0},onKeyDown:uZ({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:x.activateTabWithKeyboard,loop:x.loop,orientation:x.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&E.jsx("span",{...x.getStyles("tabSection",T),"data-position":"left",children:o}),i&&E.jsx("span",{...x.getStyles("tabLabel",T),children:i}),s&&E.jsx("span",{...x.getStyles("tabSection",T),"data-position":"right",children:s})]})});Kee.classes=mN;Kee.displayName="@mantine/core/TabsTab";const _0e="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",$dt={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Mdt=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Zi(t),"--tabs-color":Ki(n,e),"--tabs-text-color":SA(r,e)?bb({color:n,theme:e,autoContrast:r}):void 0}}),qr=wt((e,t)=>{const n=Je("Tabs",$dt,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:x,className:_,style:C,vars:T,autoContrast:S,mod:k,...I}=n,R=al(l),[F,O]=ja({value:i,defaultValue:r,finalValue:null,onChange:s}),B=Gt({name:"Tabs",props:n,classes:mN,className:_,style:C,classNames:v,styles:b,unstyled:x,vars:T,varsResolver:Mdt});return E.jsx(Ndt,{value:{placement:g,value:F,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:O5(`${R}-tab`,_0e),getPanelId:O5(`${R}-panel`,_0e),onChange:O,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:x,getStyles:B},children:E.jsx(Fe,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},k],...B("root"),...I,children:a})})});qr.classes=mN;qr.displayName="@mantine/core/Tabs";qr.Tab=Kee;qr.Panel=Yee;qr.List=Gee;const Ldt={},bg=wt((e,t)=>{const n=Je("TextInput",Ldt,e);return E.jsx(Xd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});bg.classes=Xd.classes;bg.displayName="@mantine/core/TextInput";const Bdt=["h1","h2","h3","h4","h5","h6"];function jdt(e,t){const n=t!==void 0?t:`h${e}`;return Bdt.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:ze(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var ske={root:"m_8a5d1357"};const Udt={order:1},zdt=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=jdt(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},uo=wt((e,t)=>{const n=Je("Title",Udt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Gt({name:"Title",props:n,classes:ske,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:zdt});return[1,2,3,4,5,6].includes(u)?E.jsx(Fe,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});uo.classes=ske;uo.displayName="@mantine/core/Title";function Vdt(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Hdt(e){return N.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function qdt(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const Wdt=()=>Vdt({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),B_=Wdt(),Gdt=(e=B_)=>Hdt(e);function jA(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=qdt(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Ydt(e,t=B_){const n=e.id||mC();return jA(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function oke(e,t=B_){return jA(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Kdt(e,t=B_){return jA(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function Xdt(e=B_){jA(e,()=>[])}function Qdt(e=B_){jA(e,t=>t.slice(0,e.getState().limit))}const j_={show:Ydt,hide:oke,update:Kdt,clean:Xdt,cleanQueue:Qdt,updateState:jA};function CG(e,t){return CG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},CG(e,t)}function ake(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,CG(e,t)}var uke={exports:{}},Jdt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Zdt=Jdt,eht=Zdt;function lke(){}function cke(){}cke.resetWarningCache=lke;var tht=function(){function e(r,i,s,o,a,u){if(u!==eht){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:cke,resetWarningCache:lke};return n.PropTypes=n,n};uke.exports=tht();var nht=uke.exports;const E0e=_p(nht),C0e={disabled:!1},H5=vi.createContext(null);var rht=function(t){return t.scrollTop},mI="unmounted",Dx="exited",Ix="entering",_2="entered",TG="exiting",Ty=function(e){ake(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Dx,s.appearStatus=Ix):u=_2:r.unmountOnExit||r.mountOnEnter?u=mI:u=Dx,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===mI?{status:Dx}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Ix&&o!==_2&&(s=Ix):(o===Ix||o===_2)&&(s=TG)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Ix){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:pI.findDOMNode(this);o&&rht(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Dx&&this.setState({status:mI})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[pI.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||C0e.disabled){this.safeSetState({status:_2},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Ix},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:_2},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:pI.findDOMNode(this);if(!s||C0e.disabled){this.safeSetState({status:Dx},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:TG},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Dx},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:pI.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===mI)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=bee(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return vi.createElement(H5.Provider,{value:null},typeof o=="function"?o(i,a):vi.cloneElement(vi.Children.only(o),a))},t}(vi.Component);Ty.contextType=H5;Ty.propTypes={};function GE(){}Ty.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:GE,onEntering:GE,onEntered:GE,onExit:GE,onExiting:GE,onExited:GE};Ty.UNMOUNTED=mI;Ty.EXITED=Dx;Ty.ENTERING=Ix;Ty.ENTERED=_2;Ty.EXITING=TG;function iht(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xee(e,t){var n=function(s){return t&&N.isValidElement(s)?t(s):s},r=Object.create(null);return e&&N.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function sht(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function lw(e,t,n){return n[t]!=null?n[t]:e.props[t]}function oht(e,t){return Xee(e.children,function(n){return N.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:lw(n,"appear",e),enter:lw(n,"enter",e),exit:lw(n,"exit",e)})})}function aht(e,t,n){var r=Xee(e.children),i=sht(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(N.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=N.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:lw(o,"exit",e),enter:lw(o,"enter",e)}):!u&&a&&!c?i[s]=N.cloneElement(o,{in:!1}):u&&a&&N.isValidElement(l)&&(i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:lw(o,"exit",e),enter:lw(o,"enter",e)}))}}),i}var uht=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},lht={component:"div",childFactory:function(t){return t}},y1=function(e){ake(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(iht(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?oht(i,a):aht(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Xee(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=fT({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=bee(i,["component","childFactory"]),u=this.state.contextValue,l=uht(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?vi.createElement(H5.Provider,{value:u},l):vi.createElement(H5.Provider,{value:u},vi.createElement(s,a,l))},t}(vi.Component);y1.propTypes={};y1.defaultProps=lht;const fke=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function cht(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),fke.reduce((n,r)=>(n[r]=[],n),{}))}const T0e={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},fht={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function dht({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:T0e[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:fht[o]},l={opacity:0,maxHeight:0,transform:T0e[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function hht(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const dke=N.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=hht(n,e.autoClose),l=N.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return N.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),N.useEffect(()=>(d(),c),[u]),E.jsx(Ree,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});dke.displayName="@mantine/notifications/NotificationContainer";var hke={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const pht=Ty,mht={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Ep("overlay"),store:B_,withinPortal:!0},ght=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":ze(n)}}),Ay=wt((e,t)=>{const n=Je("Notifications",mht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,x=Po(),_=Gdt(g),C=nit(),T=CL(),S=N.useRef({}),k=N.useRef(0),R=(x.respectReducedMotion?T:!1)?1:f,F=Gt({name:"Notifications",classes:hke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ght});N.useEffect(()=>{g==null||g.updateState(H=>({...H,limit:p||5,defaultPosition:l}))},[p,l]),z0(()=>{_.notifications.length>k.current&&setTimeout(()=>C(),0),k.current=_.notifications.length},[_.notifications]);const O=cht(_.notifications,l),B=fke.reduce((H,U)=>(H[U]=O[U].map(({style:G,...Y})=>E.jsx(pht,{timeout:R,onEnter:()=>S.current[Y.id].offsetHeight,nodeRef:{current:S.current[Y.id]},children:Q=>E.jsx(dke,{ref:M=>{S.current[Y.id]=M},data:Y,onHide:M=>oke(M,g),autoClose:c,...F("notification",{style:{...dht({state:Q,position:U,transitionDuration:R,maxHeight:h}),...G}})})},Y.id)),H),{});return E.jsxs(RA,{withinPortal:v,...y,children:[E.jsx(Fe,{...F("root"),"data-position":"top-center",ref:t,...b,children:E.jsx(y1,{children:B["top-center"]})}),E.jsx(Fe,{...F("root"),"data-position":"top-left",...b,children:E.jsx(y1,{children:B["top-left"]})}),E.jsx(Fe,{...F("root",{className:oT.classNames.fullWidth}),"data-position":"top-right",...b,children:E.jsx(y1,{children:B["top-right"]})}),E.jsx(Fe,{...F("root",{className:oT.classNames.fullWidth}),"data-position":"bottom-right",...b,children:E.jsx(y1,{children:B["bottom-right"]})}),E.jsx(Fe,{...F("root"),"data-position":"bottom-left",...b,children:E.jsx(y1,{children:B["bottom-left"]})}),E.jsx(Fe,{...F("root"),"data-position":"bottom-center",...b,children:E.jsx(y1,{children:B["bottom-center"]})})]})});Ay.classes=hke;Ay.displayName="@mantine/notifications/Notifications";Ay.show=j_.show;Ay.hide=j_.hide;Ay.update=j_.update;Ay.clean=j_.clean;Ay.cleanQueue=j_.cleanQueue;Ay.updateState=j_.updateState;const pke=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Oo=()=>N.useContext(pke);function yht({children:e}){const[t,n]=N.useState(void 0),r=N.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return E.jsx(pke.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D3(){return D3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D3.apply(this,arguments)}var B1;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(B1||(B1={}));const A0e="popstate";function vht(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return AG("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gke(i)}return xht(t,n,null,e)}function So(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mke(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function bht(){return Math.random().toString(36).substr(2,8)}function S0e(e,t){return{usr:e.state,key:e.key,idx:t}}function AG(e,t,n,r){return n===void 0&&(n=null),D3({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?UA(t):t,{state:n,key:t&&t.key||r||bht()})}function gke(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function UA(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function xht(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=B1.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(D3({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=B1.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=B1.Push;let v=AG(m.location,g,y);l=c()+1;let b=S0e(v,l),x=m.createHref(v);try{o.pushState(b,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(x)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=B1.Replace;let v=AG(m.location,g,y);l=c();let b=S0e(v,l),x=m.createHref(v);o.replaceState(b,"",x),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:gke(g);return v=v.replace(/ $/,"%20"),So(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(A0e,f),u=g,()=>{i.removeEventListener(A0e,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var D0e;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(D0e||(D0e={}));function wht(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?UA(t):t,i=bke(r.pathname||"/",n);if(i==null)return null;let s=yke(e);_ht(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=Oht(i);o=Rht(s[a],u)}return o}function yke(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(So(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=lv([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(So(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),yke(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:Iht(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of vke(s.path))i(s,o,u)}),t}function vke(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=vke(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function _ht(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kht(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Eht=/^:[\w-]+$/,Cht=3,Tht=2,Aht=1,Sht=10,Dht=-2,I0e=e=>e==="*";function Iht(e,t){let n=e.split("/"),r=n.length;return n.some(I0e)&&(r+=Dht),t&&(r+=Tht),n.filter(i=>!I0e(i)).reduce((i,s)=>i+(Eht.test(s)?Cht:s===""?Aht:Sht),r)}function kht(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Rht(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=Nht({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:lv([i,c.pathname]),pathnameBase:Lht(lv([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=lv([i,c.pathnameBase]))}return s}function Nht(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Pht(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function Pht(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),mke(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Oht(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mke(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bke(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Fht(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?UA(e):e;return{pathname:n?n.startsWith("/")?n:$ht(n,t):t,search:Bht(r),hash:jht(i)}}function $ht(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Az(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mht(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Qee(e,t){let n=Mht(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jee(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=UA(e):(i=D3({},e),So(!i.pathname||!i.pathname.includes("?"),Az("?","pathname","search",i)),So(!i.pathname||!i.pathname.includes("#"),Az("#","pathname","hash",i)),So(!i.search||!i.search.includes("#"),Az("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=Fht(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const lv=e=>e.join("/").replace(/\/\/+/g,"/"),Lht=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Bht=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jht=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Uht(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const xke=["post","put","patch","delete"];new Set(xke);const zht=["get",...xke];new Set(zht);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function I3(){return I3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I3.apply(this,arguments)}const Zee=N.createContext(null),Vht=N.createContext(null),U_=N.createContext(null),eB=N.createContext(null),fm=N.createContext({outlet:null,matches:[],isDataRoute:!1}),wke=N.createContext(null);function _ke(e,t){let{relative:n}={};zA()||So(!1);let{basename:r,navigator:i}=N.useContext(U_),{hash:s,pathname:o,search:a}=Ght(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:lv([r,o])),i.createHref({pathname:u,search:a,hash:s})}function zA(){return N.useContext(eB)!=null}function Cb(){return zA()||So(!1),N.useContext(eB).location}function Eke(e){N.useContext(U_).static||N.useLayoutEffect(e)}function Cp(){let{isDataRoute:e}=N.useContext(fm);return e?ipt():Hht()}function Hht(){zA()||So(!1);let e=N.useContext(Zee),{basename:t,future:n,navigator:r}=N.useContext(U_),{matches:i}=N.useContext(fm),{pathname:s}=Cb(),o=JSON.stringify(Qee(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return Eke(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=Jee(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:lv([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const qht=N.createContext(null);function Wht(e){let t=N.useContext(fm).outlet;return t&&N.createElement(qht.Provider,{value:e},t)}function V0(){let{matches:e}=N.useContext(fm),t=e[e.length-1];return t?t.params:{}}function Ght(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(U_),{matches:i}=N.useContext(fm),{pathname:s}=Cb(),o=JSON.stringify(Qee(i,r.v7_relativeSplatPath));return N.useMemo(()=>Jee(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Cke(e,t){return Yht(e,t)}function Yht(e,t,n,r){zA()||So(!1);let{navigator:i}=N.useContext(U_),{matches:s}=N.useContext(fm),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Cb(),c;if(t){var f;let g=typeof t=="string"?UA(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||So(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=wht(e,{pathname:h}),m=Zht(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:lv([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:lv([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(eB.Provider,{value:{location:I3({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:B1.Pop}},m):m}function Kht(){let e=rpt(),t=Uht(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const Xht=N.createElement(Kht,null);class Qht extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(fm.Provider,{value:this.props.routeContext},N.createElement(wke.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jht(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(Zee);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(fm.Provider,{value:t},r)}function Zht(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||So(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||Xht,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=N.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,N.createElement(Jht,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(Qht,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Tke=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Tke||{}),q5=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(q5||{});function ept(e){let t=N.useContext(Zee);return t||So(!1),t}function tpt(e){let t=N.useContext(Vht);return t||So(!1),t}function npt(e){let t=N.useContext(fm);return t||So(!1),t}function Ake(e){let t=npt(),n=t.matches[t.matches.length-1];return n.route.id||So(!1),n.route.id}function rpt(){var e;let t=N.useContext(wke),n=tpt(q5.UseRouteError),r=Ake(q5.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function ipt(){let{router:e}=ept(Tke.UseNavigateStable),t=Ake(q5.UseNavigateStable),n=N.useRef(!1);return Eke(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,I3({fromRouteId:t},s)))},[e,t])}function ete(e){let{to:t,replace:n,state:r,relative:i}=e;zA()||So(!1);let{future:s,static:o}=N.useContext(U_),{matches:a}=N.useContext(fm),{pathname:u}=Cb(),l=Cp(),c=Jee(t,Qee(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function spt(e){return Wht(e.context)}function kx(e){So(!1)}function opt(e){let{basename:t="/",children:n=null,location:r,navigationType:i=B1.Pop,navigator:s,static:o=!1,future:a}=e;zA()&&So(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:I3({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=UA(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=bke(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(U_.Provider,{value:l},N.createElement(eB.Provider,{children:n,value:m}))}function apt(e){let{children:t,location:n}=e;return Cke(SG(t),n)}new Promise(()=>{});function SG(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,SG(r.props.children,s));return}r.type!==kx&&So(!1),!r.props.index||!r.props.children||So(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=SG(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DG(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function upt(e,t){let n=DG(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const lpt="6";try{window.__reactRouterVersion=lpt}catch{}const cpt="startTransition",k0e=u5[cpt];function fpt(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=vht({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&k0e?k0e(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(opt,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var R0e;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(R0e||(R0e={}));var N0e;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(N0e||(N0e={}));function Tb(e){let t=N.useRef(DG(e)),n=N.useRef(!1),r=Cb(),i=N.useMemo(()=>upt(r.search,n.current?null:t.current),[r.search]),s=Cp(),o=N.useCallback((a,u)=>{const l=DG(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const tte=N.createContext(null);tte.displayName="@mantine/modals/ModalsContext";function dpt(){const e=N.useContext(tte);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function hpt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=dpt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return E.jsxs(E.Fragment,{children:[l&&E.jsx(Fe,{mb:"md",children:l}),E.jsxs(Mi,{justify:"flex-end",...o,children:[E.jsx(bn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),E.jsx(bn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[ppt,tB]=yit("mantine-modals");tB("openModal");tB("closeModal");tB("closeAllModals");const P0e=tB("openConfirmModal");function O0e(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function mpt(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;O0e(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{O0e(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function gpt(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function ypt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(mpt,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const v=g||mC();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=N.useCallback(({modalId:g,...y})=>{const v=g||mC();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=N.useCallback((g,{modalId:y,...v})=>{const b=y||mC();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);ppt({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:E.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=gpt(g.props);return{modalProps:y,content:E.jsx(hpt,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:E.jsx(E.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return E.jsxs(tte.Provider,{value:d,children:[E.jsx(fo,{zIndex:Ep("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vpt={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...vpt[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bpt=Yn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xpt=Yn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pk=Yn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F0e=Yn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $0e=Yn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wpt=Yn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _pt=Yn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ept=Yn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cpt=Yn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tpt=Yn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Apt=Yn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ske=Yn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dke=Yn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Spt=Yn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var M0e=Yn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dpt=Yn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ipt=Yn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kpt=Yn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rpt=Yn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Npt=Yn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ppt=Yn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nte=Yn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Opt=Yn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fpt=Yn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $pt=Yn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mpt=Yn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lpt=Yn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bpt=Yn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jpt=Yn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ike=Yn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Upt=Yn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zpt=Yn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vpt=Yn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hpt=Yn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qpt=Yn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kke=Yn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wpt=Yn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rke=Yn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gpt=Yn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nke=Yn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rte=Yn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L0e=Yn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ite=Yn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ypt=Yn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kpt=Yn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xpt=Yn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function Pke(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const jl="/vis-decode/";function B0e(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Oke(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Qpt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jpt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Zpt={};function j0e(e,t){return(Zpt.jsx?Jpt:Qpt).test(e)}const e0t=/[ \t\n\f\r]/g;function t0t(e){return typeof e=="object"?e.type==="text"?U0e(e.value):!1:U0e(e)}function U0e(e){return e.replace(e0t,"")===""}let gN=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};gN.prototype.property={};gN.prototype.normal={};gN.prototype.space=null;function Fke(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new gN(n,r,t)}function k3(e){return e.toLowerCase()}let Jd=class{constructor(t,n){this.property=t,this.attribute=n}};Jd.prototype.space=null;Jd.prototype.boolean=!1;Jd.prototype.booleanish=!1;Jd.prototype.overloadedBoolean=!1;Jd.prototype.number=!1;Jd.prototype.commaSeparated=!1;Jd.prototype.spaceSeparated=!1;Jd.prototype.commaOrSpaceSeparated=!1;Jd.prototype.mustUseProperty=!1;Jd.prototype.defined=!1;let n0t=0;const sr=z_(),jo=z_(),$ke=z_(),Rt=z_(),ds=z_(),bC=z_(),ff=z_();function z_(){return 2**++n0t}const IG=Object.freeze(Object.defineProperty({__proto__:null,boolean:sr,booleanish:jo,commaOrSpaceSeparated:ff,commaSeparated:bC,number:Rt,overloadedBoolean:$ke,spaceSeparated:ds},Symbol.toStringTag,{value:"Module"})),Sz=Object.keys(IG);class ste extends Jd{constructor(t,n,r,i){let s=-1;if(super(t,n),z0e(this,"space",i),typeof r=="number")for(;++s<Sz.length;){const o=Sz[s];z0e(this,Sz[s],(r&IG[o])===IG[o])}}}ste.prototype.defined=!0;function z0e(e,t,n){n&&(e[t]=n)}const r0t={}.hasOwnProperty;function VA(e){const t={},n={};let r;for(r in e.properties)if(r0t.call(e.properties,r)){const i=e.properties[r],s=new ste(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[k3(r)]=r,n[k3(s.attribute)]=r}return new gN(t,n,e.space)}const Mke=VA({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Lke=VA({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Bke(e,t){return t in e?e[t]:t}function jke(e,t){return Bke(e,t.toLowerCase())}const Uke=VA({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:jke,properties:{xmlns:null,xmlnsXLink:null}}),zke=VA({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:jo,ariaAutoComplete:null,ariaBusy:jo,ariaChecked:jo,ariaColCount:Rt,ariaColIndex:Rt,ariaColSpan:Rt,ariaControls:ds,ariaCurrent:null,ariaDescribedBy:ds,ariaDetails:null,ariaDisabled:jo,ariaDropEffect:ds,ariaErrorMessage:null,ariaExpanded:jo,ariaFlowTo:ds,ariaGrabbed:jo,ariaHasPopup:null,ariaHidden:jo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ds,ariaLevel:Rt,ariaLive:null,ariaModal:jo,ariaMultiLine:jo,ariaMultiSelectable:jo,ariaOrientation:null,ariaOwns:ds,ariaPlaceholder:null,ariaPosInSet:Rt,ariaPressed:jo,ariaReadOnly:jo,ariaRelevant:null,ariaRequired:jo,ariaRoleDescription:ds,ariaRowCount:Rt,ariaRowIndex:Rt,ariaRowSpan:Rt,ariaSelected:jo,ariaSetSize:Rt,ariaSort:null,ariaValueMax:Rt,ariaValueMin:Rt,ariaValueNow:Rt,ariaValueText:null,role:null}}),i0t=VA({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:jke,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:bC,acceptCharset:ds,accessKey:ds,action:null,allow:null,allowFullScreen:sr,allowPaymentRequest:sr,allowUserMedia:sr,alt:null,as:null,async:sr,autoCapitalize:null,autoComplete:ds,autoFocus:sr,autoPlay:sr,blocking:ds,capture:null,charSet:null,checked:sr,cite:null,className:ds,cols:Rt,colSpan:null,content:null,contentEditable:jo,controls:sr,controlsList:ds,coords:Rt|bC,crossOrigin:null,data:null,dateTime:null,decoding:null,default:sr,defer:sr,dir:null,dirName:null,disabled:sr,download:$ke,draggable:jo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:sr,formTarget:null,headers:ds,height:Rt,hidden:sr,high:Rt,href:null,hrefLang:null,htmlFor:ds,httpEquiv:ds,id:null,imageSizes:null,imageSrcSet:null,inert:sr,inputMode:null,integrity:null,is:null,isMap:sr,itemId:null,itemProp:ds,itemRef:ds,itemScope:sr,itemType:ds,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:sr,low:Rt,manifest:null,max:null,maxLength:Rt,media:null,method:null,min:null,minLength:Rt,multiple:sr,muted:sr,name:null,nonce:null,noModule:sr,noValidate:sr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:sr,optimum:Rt,pattern:null,ping:ds,placeholder:null,playsInline:sr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:sr,referrerPolicy:null,rel:ds,required:sr,reversed:sr,rows:Rt,rowSpan:Rt,sandbox:ds,scope:null,scoped:sr,seamless:sr,selected:sr,shadowRootClonable:sr,shadowRootDelegatesFocus:sr,shadowRootMode:null,shape:null,size:Rt,sizes:null,slot:null,span:Rt,spellCheck:jo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Rt,step:null,style:null,tabIndex:Rt,target:null,title:null,translate:null,type:null,typeMustMatch:sr,useMap:null,value:jo,width:Rt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ds,axis:null,background:null,bgColor:null,border:Rt,borderColor:null,bottomMargin:Rt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:sr,declare:sr,event:null,face:null,frame:null,frameBorder:null,hSpace:Rt,leftMargin:Rt,link:null,longDesc:null,lowSrc:null,marginHeight:Rt,marginWidth:Rt,noResize:sr,noHref:sr,noShade:sr,noWrap:sr,object:null,profile:null,prompt:null,rev:null,rightMargin:Rt,rules:null,scheme:null,scrolling:jo,standby:null,summary:null,text:null,topMargin:Rt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Rt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:sr,disableRemotePlayback:sr,prefix:null,property:null,results:Rt,security:null,unselectable:null}}),s0t=VA({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Bke,properties:{about:ff,accentHeight:Rt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Rt,amplitude:Rt,arabicForm:null,ascent:Rt,attributeName:null,attributeType:null,azimuth:Rt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Rt,by:null,calcMode:null,capHeight:Rt,className:ds,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Rt,diffuseConstant:Rt,direction:null,display:null,dur:null,divisor:Rt,dominantBaseline:null,download:sr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Rt,enableBackground:null,end:null,event:null,exponent:Rt,externalResourcesRequired:null,fill:null,fillOpacity:Rt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:bC,g2:bC,glyphName:bC,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Rt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Rt,horizOriginX:Rt,horizOriginY:Rt,id:null,ideographic:Rt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Rt,k:Rt,k1:Rt,k2:Rt,k3:Rt,k4:Rt,kernelMatrix:ff,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Rt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Rt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Rt,overlineThickness:Rt,paintOrder:null,panose1:null,path:null,pathLength:Rt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ds,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Rt,pointsAtY:Rt,pointsAtZ:Rt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ff,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ff,rev:ff,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ff,requiredFeatures:ff,requiredFonts:ff,requiredFormats:ff,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Rt,specularExponent:Rt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Rt,strikethroughThickness:Rt,string:null,stroke:null,strokeDashArray:ff,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Rt,strokeOpacity:Rt,strokeWidth:null,style:null,surfaceScale:Rt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ff,tabIndex:Rt,tableValues:null,target:null,targetX:Rt,targetY:Rt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ff,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Rt,underlineThickness:Rt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Rt,values:null,vAlphabetic:Rt,vMathematical:Rt,vectorEffect:null,vHanging:Rt,vIdeographic:Rt,version:null,vertAdvY:Rt,vertOriginX:Rt,vertOriginY:Rt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Rt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),o0t=/^data[-\w.:]+$/i,V0e=/-[a-z]/g,a0t=/[A-Z]/g;function nB(e,t){const n=k3(t);let r=t,i=Jd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&o0t.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(V0e,l0t);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!V0e.test(s)){let o=s.replace(a0t,u0t);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=ste}return new i(r,t)}function u0t(e){return"-"+e.toLowerCase()}function l0t(e){return e.charAt(1).toUpperCase()}const c0t={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},yN=Fke([Lke,Mke,Uke,zke,i0t],"html"),Ab=Fke([Lke,Mke,Uke,zke,s0t],"svg");function H0e(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Vke(e){return e.join(" ").trim()}var Hke={},q0e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,f0t=/\n/g,d0t=/^\s*/,h0t=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,p0t=/^:\s*/,m0t=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,g0t=/^[;\s]*/,y0t=/^\s+|\s+$/g,v0t=`
`,W0e="/",G0e="*",qx="",b0t="comment",x0t="declaration",w0t=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(f0t);m&&(n+=m.length);var g=p.lastIndexOf(v0t);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(d0t)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(W0e!=e.charAt(0)||G0e!=e.charAt(1))){for(var m=2;qx!=e.charAt(m)&&(G0e!=e.charAt(m)||W0e!=e.charAt(m+1));)++m;if(m+=2,qx===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:b0t,comment:g})}}function d(){var p=s(),m=u(h0t);if(m){if(f(),!u(p0t))return a("property missing ':'");var g=u(m0t),y=p({type:x0t,property:Y0e(m[0].replace(q0e,qx)),value:g?Y0e(g[0].replace(q0e,qx)):qx});return u(g0t),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Y0e(e){return e?e.replace(y0t,qx):qx}var _0t=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hke,"__esModule",{value:!0});var E0t=_0t(w0t);function C0t(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,E0t.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var K0e=Hke.default=C0t;const T0t=K0e.default||K0e,rB=qke("end"),dm=qke("start");function qke(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function A0t(e){const t=dm(e),n=rB(e);if(t&&n)return{start:t,end:n}}function mk(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?X0e(e.position):"start"in e||"end"in e?X0e(e):"line"in e||"column"in e?kG(e):""}function kG(e){return Q0e(e&&e.line)+":"+Q0e(e&&e.column)}function X0e(e){return kG(e&&e.start)+"-"+kG(e&&e.end)}function Q0e(e){return e&&typeof e=="number"?e:1}class ul extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=mk(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}ul.prototype.file="";ul.prototype.name="";ul.prototype.reason="";ul.prototype.message="";ul.prototype.stack="";ul.prototype.column=void 0;ul.prototype.line=void 0;ul.prototype.ancestors=void 0;ul.prototype.cause=void 0;ul.prototype.fatal=void 0;ul.prototype.place=void 0;ul.prototype.ruleId=void 0;ul.prototype.source=void 0;const ote={}.hasOwnProperty,S0t=new Map,D0t=/[A-Z]/g,I0t=/-([a-z])/g,k0t=new Set(["table","tbody","thead","tfoot","tr"]),R0t=new Set(["td","th"]),Wke="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function N0t(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=j0t(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=B0t(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Ab:yN,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Gke(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Gke(e,t,n){if(t.type==="element")return P0t(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return O0t(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return $0t(e,t,n);if(t.type==="mdxjsEsm")return F0t(e,t);if(t.type==="root")return M0t(e,t,n);if(t.type==="text")return L0t(e,t)}function P0t(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Ab,e.schema=i),e.ancestors.push(t);const s=Kke(e,t.tagName,!1),o=U0t(e,t);let a=ute(e,t);return k0t.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!t0t(u):!0})),Yke(e,o,s,t),ate(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function O0t(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}R3(e,t.position)}function F0t(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);R3(e,t.position)}function $0t(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Ab,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Kke(e,t.name,!0),o=z0t(e,t),a=ute(e,t);return Yke(e,o,s,t),ate(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function M0t(e,t,n){const r={};return ate(r,ute(e,t)),e.create(t,e.Fragment,r,n)}function L0t(e,t){return t.value}function Yke(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function ate(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function B0t(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function j0t(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=dm(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function U0t(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&ote.call(t.properties,i)){const s=V0t(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&R0t.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function z0t(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else R3(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else R3(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function ute(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:S0t;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Gke(e,s,o);a!==void 0&&n.push(a)}return n}function V0t(e,t,n){const r=nB(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Oke(n):Vke(n)),r.property==="style"){let i=typeof n=="object"?n:H0t(e,String(n));return e.stylePropertyNameCase==="css"&&(i=q0t(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?c0t[r.property]||r.property:r.attribute,n]}}function H0t(e,t){const n={};try{T0t(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new ul("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Wke+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(I0t,G0t)),n[o]=s}}function Kke(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=j0e(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=j0e(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return ote.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);R3(e)}function R3(e,t){const n=new ul("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Wke+"#cannot-handle-mdx-estrees-without-createevaluater",n}function q0t(e){const t={};let n;for(n in e)ote.call(e,n)&&(t[W0t(n)]=e[n]);return t}function W0t(e){let t=e.replace(D0t,Y0t);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function G0t(e,t){return t.toUpperCase()}function Y0t(e){return"-"+e.toLowerCase()}const Dz={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},K0t={};function X0t(e,t){const n=K0t,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Xke(e,r,i)}function Xke(e,t,n){if(Q0t(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return J0e(e.children,t,n)}return Array.isArray(e)?J0e(e,t,n):""}function J0e(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Xke(e[i],t,n);return r.join("")}function Q0t(e){return!!(e&&typeof e=="object")}const Z0e=document.createElement("i");function lte(e){const t="&"+e+";";Z0e.innerHTML=t;const n=Z0e.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Zg(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Ed(e,t){return e.length>0?(Zg(e,e.length,0,t),e):t}const eme={}.hasOwnProperty;function J0t(e){const t={};let n=-1;for(;++n<e.length;)Z0t(t,e[n]);return t}function Z0t(e,t){let n;for(n in t){const i=(eme.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){eme.call(i,o)||(i[o]=[]);const a=s[o];emt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function emt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Zg(e,0,0,r)}function Qke(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function xC(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const u0=Sb(/[A-Za-z]/),Cf=Sb(/[\dA-Za-z]/),tmt=Sb(/[#-'*+\--9=?A-Z^-~]/);function RG(e){return e!==null&&(e<32||e===127)}const NG=Sb(/\d/),nmt=Sb(/[\dA-Fa-f]/),rmt=Sb(/[!-/:-@[-`{-~]/);function Un(e){return e!==null&&e<-2}function $c(e){return e!==null&&(e<0||e===32)}function Si(e){return e===-2||e===-1||e===32}const imt=Sb(new RegExp("\\p{P}|\\p{S}","u")),smt=Sb(/\s/);function Sb(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function HA(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Cf(e.charCodeAt(n+1))&&Cf(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ps(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Si(u)?(e.enter(n),a(u)):t(u)}function a(u){return Si(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const omt={tokenize:amt};function amt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ps(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Un(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const umt={tokenize:lmt},tme={tokenize:cmt};function lmt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const x=n[r];return t.containerState=x[1],e.attempt(x[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const x=t.events.length;let _=x,C;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){C=t.events[_][1].end;break}y(r);let T=x;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},C),T++;return Zg(t.events,_+1,0,t.events.slice(x)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(tme,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(tme,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Un(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,x){const _=t.sliceStream(b);if(x&&_.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(_),t.parser.lazy[b.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const T=t.events.length;let S=T,k,I;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){if(k){I=t.events[S][1].end;break}k=!0}for(y(r),C=T;C<t.events.length;)t.events[C][1].end=Object.assign({},I),C++;Zg(t.events,S+1,0,t.events.slice(T)),t.events.length=C}}function y(b){let x=n.length;for(;x-- >b;){const _=n[x];t.containerState=_[1],_[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function cmt(e,t,n){return ps(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function nme(e){if(e===null||$c(e)||smt(e))return 1;if(imt(e))return 2}function cte(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const PG={name:"attention",tokenize:dmt,resolveAll:fmt};function fmt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);rme(f,-u),rme(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Ed(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Ed(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Ed(l,cte(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Ed(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Ed(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Zg(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function dmt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=nme(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=nme(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function rme(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const hmt={name:"autolink",tokenize:pmt};function pmt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return u0(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Cf(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Cf(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||RG(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):tmt(h)?(e.consume(h),l):n(h)}function c(h){return Cf(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Cf(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const iB={tokenize:mmt,partial:!0};function mmt(e,t,n){return r;function r(s){return Si(s)?ps(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Un(s)?t(s):n(s)}}const Jke={name:"blockQuote",tokenize:gmt,continuation:{tokenize:ymt},exit:vmt};function gmt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Si(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function ymt(e,t,n){const r=this;return i;function i(o){return Si(o)?ps(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Jke,t,n)(o)}}function vmt(e){e.exit("blockQuote")}const Zke={name:"characterEscape",tokenize:bmt};function bmt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return rmt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const e3e={name:"characterReference",tokenize:xmt};function xmt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Cf,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=nmt,c):(e.enter("characterReferenceValue"),s=7,o=NG,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Cf&&!lte(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const ime={tokenize:_mt,partial:!0},sme={name:"codeFenced",tokenize:wmt,concrete:!0};function wmt(e,t,n){const r=this,i={tokenize:_,partial:!0};let s=0,o=0,a;return u;function u(C){return l(C)}function l(C){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),Si(C)?ps(e,f,"whitespace")(C):f(C))}function f(C){return C===null||Un(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(ime,m,x)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||Un(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(C)):Si(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ps(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),d)}function h(C){return C===null||Un(C)?f(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||Un(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,x,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),y}function y(C){return s>0&&Si(C)?ps(e,v,"linePrefix",s+1)(C):v(C)}function v(C){return C===null||Un(C)?e.check(ime,m,x)(C):(e.enter("codeFlowValue"),b(C))}function b(C){return C===null||Un(C)?(e.exit("codeFlowValue"),v(C)):(e.consume(C),b)}function x(C){return e.exit("codeFenced"),t(C)}function _(C,T,S){let k=0;return I;function I(H){return C.enter("lineEnding"),C.consume(H),C.exit("lineEnding"),R}function R(H){return C.enter("codeFencedFence"),Si(H)?ps(C,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):F(H)}function F(H){return H===a?(C.enter("codeFencedFenceSequence"),O(H)):S(H)}function O(H){return H===a?(k++,C.consume(H),O):k>=o?(C.exit("codeFencedFenceSequence"),Si(H)?ps(C,B,"whitespace")(H):B(H)):S(H)}function B(H){return H===null||Un(H)?(C.exit("codeFencedFence"),T(H)):S(H)}}}function _mt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Iz={name:"codeIndented",tokenize:Cmt},Emt={tokenize:Tmt,partial:!0};function Cmt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ps(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Un(l)?e.attempt(Emt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Un(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Tmt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Un(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ps(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Un(o)?i(o):n(o)}}const Amt={name:"codeText",tokenize:Imt,resolve:Smt,previous:Dmt};function Smt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Dmt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Imt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Un(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Un(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class kmt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&wD(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),wD(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),wD(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);wD(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);wD(this.left,n.reverse())}}}function wD(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function t3e(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new kmt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Rmt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Zg(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Rmt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Nmt={tokenize:Fmt,resolve:Omt},Pmt={tokenize:$mt,partial:!0};function Omt(e){return t3e(e),e}function Fmt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Un(a)?e.check(Pmt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function $mt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ps(e,s,"linePrefix")}function s(o){if(o===null||Un(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function n3e(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||RG(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Un(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||$c(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||RG(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function r3e(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Un(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Un(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Si(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function i3e(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Un(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ps(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Un(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function gk(e,t){let n;return r;function r(i){return Un(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Si(i)?ps(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Mmt={name:"definition",tokenize:Bmt},Lmt={tokenize:jmt,partial:!0};function Bmt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return r3e.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=xC(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return $c(h)?gk(e,l)(h):l(h)}function l(h){return n3e(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Lmt,f,f)(h)}function f(h){return Si(h)?ps(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Un(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function jmt(e,t,n){return r;function r(a){return $c(a)?gk(e,i)(a):n(a)}function i(a){return i3e(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Si(a)?ps(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Un(a)?t(a):n(a)}}const Umt={name:"hardBreakEscape",tokenize:zmt};function zmt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Un(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Vmt={name:"headingAtx",tokenize:qmt,resolve:Hmt};function Hmt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Zg(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function qmt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||$c(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Un(c)?(e.exit("atxHeading"),t(c)):Si(c)?ps(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||$c(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Wmt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ome=["pre","script","style","textarea"],Gmt={name:"htmlFlow",tokenize:Qmt,resolveTo:Xmt,concrete:!0},Ymt={tokenize:Zmt,partial:!0},Kmt={tokenize:Jmt,partial:!0};function Xmt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Qmt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(L){return c(L)}function c(L){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(L),f}function f(L){return L===33?(e.consume(L),d):L===47?(e.consume(L),s=!0,m):L===63?(e.consume(L),i=3,r.interrupt?t:M):u0(L)?(e.consume(L),o=String.fromCharCode(L),g):n(L)}function d(L){return L===45?(e.consume(L),i=2,h):L===91?(e.consume(L),i=5,a=0,p):u0(L)?(e.consume(L),i=4,r.interrupt?t:M):n(L)}function h(L){return L===45?(e.consume(L),r.interrupt?t:M):n(L)}function p(L){const q="CDATA[";return L===q.charCodeAt(a++)?(e.consume(L),a===q.length?r.interrupt?t:F:p):n(L)}function m(L){return u0(L)?(e.consume(L),o=String.fromCharCode(L),g):n(L)}function g(L){if(L===null||L===47||L===62||$c(L)){const q=L===47,J=o.toLowerCase();return!q&&!s&&ome.includes(J)?(i=1,r.interrupt?t(L):F(L)):Wmt.includes(o.toLowerCase())?(i=6,q?(e.consume(L),y):r.interrupt?t(L):F(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(L):s?v(L):b(L))}return L===45||Cf(L)?(e.consume(L),o+=String.fromCharCode(L),g):n(L)}function y(L){return L===62?(e.consume(L),r.interrupt?t:F):n(L)}function v(L){return Si(L)?(e.consume(L),v):I(L)}function b(L){return L===47?(e.consume(L),I):L===58||L===95||u0(L)?(e.consume(L),x):Si(L)?(e.consume(L),b):I(L)}function x(L){return L===45||L===46||L===58||L===95||Cf(L)?(e.consume(L),x):_(L)}function _(L){return L===61?(e.consume(L),C):Si(L)?(e.consume(L),_):b(L)}function C(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),u=L,T):Si(L)?(e.consume(L),C):S(L)}function T(L){return L===u?(e.consume(L),u=null,k):L===null||Un(L)?n(L):(e.consume(L),T)}function S(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||$c(L)?_(L):(e.consume(L),S)}function k(L){return L===47||L===62||Si(L)?b(L):n(L)}function I(L){return L===62?(e.consume(L),R):n(L)}function R(L){return L===null||Un(L)?F(L):Si(L)?(e.consume(L),R):n(L)}function F(L){return L===45&&i===2?(e.consume(L),U):L===60&&i===1?(e.consume(L),G):L===62&&i===4?(e.consume(L),j):L===63&&i===3?(e.consume(L),M):L===93&&i===5?(e.consume(L),Q):Un(L)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Ymt,W,O)(L)):L===null||Un(L)?(e.exit("htmlFlowData"),O(L)):(e.consume(L),F)}function O(L){return e.check(Kmt,B,W)(L)}function B(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),H}function H(L){return L===null||Un(L)?O(L):(e.enter("htmlFlowData"),F(L))}function U(L){return L===45?(e.consume(L),M):F(L)}function G(L){return L===47?(e.consume(L),o="",Y):F(L)}function Y(L){if(L===62){const q=o.toLowerCase();return ome.includes(q)?(e.consume(L),j):F(L)}return u0(L)&&o.length<8?(e.consume(L),o+=String.fromCharCode(L),Y):F(L)}function Q(L){return L===93?(e.consume(L),M):F(L)}function M(L){return L===62?(e.consume(L),j):L===45&&i===2?(e.consume(L),M):F(L)}function j(L){return L===null||Un(L)?(e.exit("htmlFlowData"),W(L)):(e.consume(L),j)}function W(L){return e.exit("htmlFlow"),t(L)}}function Jmt(e,t,n){const r=this;return i;function i(o){return Un(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Zmt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(iB,t,n)}}const egt={name:"htmlText",tokenize:tgt};function tgt(e,t,n){const r=this;let i,s,o;return a;function a(M){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(M),u}function u(M){return M===33?(e.consume(M),l):M===47?(e.consume(M),_):M===63?(e.consume(M),b):u0(M)?(e.consume(M),S):n(M)}function l(M){return M===45?(e.consume(M),c):M===91?(e.consume(M),s=0,p):u0(M)?(e.consume(M),v):n(M)}function c(M){return M===45?(e.consume(M),h):n(M)}function f(M){return M===null?n(M):M===45?(e.consume(M),d):Un(M)?(o=f,G(M)):(e.consume(M),f)}function d(M){return M===45?(e.consume(M),h):f(M)}function h(M){return M===62?U(M):M===45?d(M):f(M)}function p(M){const j="CDATA[";return M===j.charCodeAt(s++)?(e.consume(M),s===j.length?m:p):n(M)}function m(M){return M===null?n(M):M===93?(e.consume(M),g):Un(M)?(o=m,G(M)):(e.consume(M),m)}function g(M){return M===93?(e.consume(M),y):m(M)}function y(M){return M===62?U(M):M===93?(e.consume(M),y):m(M)}function v(M){return M===null||M===62?U(M):Un(M)?(o=v,G(M)):(e.consume(M),v)}function b(M){return M===null?n(M):M===63?(e.consume(M),x):Un(M)?(o=b,G(M)):(e.consume(M),b)}function x(M){return M===62?U(M):b(M)}function _(M){return u0(M)?(e.consume(M),C):n(M)}function C(M){return M===45||Cf(M)?(e.consume(M),C):T(M)}function T(M){return Un(M)?(o=T,G(M)):Si(M)?(e.consume(M),T):U(M)}function S(M){return M===45||Cf(M)?(e.consume(M),S):M===47||M===62||$c(M)?k(M):n(M)}function k(M){return M===47?(e.consume(M),U):M===58||M===95||u0(M)?(e.consume(M),I):Un(M)?(o=k,G(M)):Si(M)?(e.consume(M),k):U(M)}function I(M){return M===45||M===46||M===58||M===95||Cf(M)?(e.consume(M),I):R(M)}function R(M){return M===61?(e.consume(M),F):Un(M)?(o=R,G(M)):Si(M)?(e.consume(M),R):k(M)}function F(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(e.consume(M),i=M,O):Un(M)?(o=F,G(M)):Si(M)?(e.consume(M),F):(e.consume(M),B)}function O(M){return M===i?(e.consume(M),i=void 0,H):M===null?n(M):Un(M)?(o=O,G(M)):(e.consume(M),O)}function B(M){return M===null||M===34||M===39||M===60||M===61||M===96?n(M):M===47||M===62||$c(M)?k(M):(e.consume(M),B)}function H(M){return M===47||M===62||$c(M)?k(M):n(M)}function U(M){return M===62?(e.consume(M),e.exit("htmlTextData"),e.exit("htmlText"),t):n(M)}function G(M){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),Y}function Y(M){return Si(M)?ps(e,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):Q(M)}function Q(M){return e.enter("htmlTextData"),o(M)}}const fte={name:"labelEnd",tokenize:agt,resolveTo:ogt,resolveAll:sgt},ngt={tokenize:ugt},rgt={tokenize:lgt},igt={tokenize:cgt};function sgt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function ogt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Ed(a,e.slice(s+1,s+r+3)),a=Ed(a,[["enter",c,t]]),a=Ed(a,cte(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Ed(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Ed(a,e.slice(o+1)),a=Ed(a,[["exit",u,t]]),Zg(e,s,e.length,a),e}function agt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(xC(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(ngt,c,o?c:f)(d):d===91?e.attempt(rgt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(igt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function ugt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return $c(f)?gk(e,s)(f):s(f)}function s(f){return f===41?c(f):n3e(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return $c(f)?gk(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?i3e(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return $c(f)?gk(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function lgt(e,t,n){const r=this;return i;function i(a){return r3e.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(xC(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function cgt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const fgt={name:"labelStartImage",tokenize:dgt,resolveAll:fte.resolveAll};function dgt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const hgt={name:"labelStartLink",tokenize:pgt,resolveAll:fte.resolveAll};function pgt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const kz={name:"lineEnding",tokenize:mgt};function mgt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ps(e,t,"linePrefix")}}const nF={name:"thematicBreak",tokenize:ggt};function ggt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Un(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Si(l)?ps(e,a,"whitespace")(l):a(l))}}const lc={name:"list",tokenize:bgt,continuation:{tokenize:xgt},exit:_gt},ygt={tokenize:Egt,partial:!0},vgt={tokenize:wgt,partial:!0};function bgt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:NG(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(nF,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return NG(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(iB,r.interrupt?n:c,e.attempt(ygt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Si(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function xgt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(iB,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ps(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Si(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(vgt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ps(e,e.attempt(lc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function wgt(e,t,n){const r=this;return ps(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function _gt(e){e.exit(this.containerState.type)}function Egt(e,t,n){const r=this;return ps(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Si(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const ame={name:"setextUnderline",tokenize:Tgt,resolveTo:Cgt};function Cgt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Tgt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Si(l)?ps(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Un(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Agt={tokenize:Sgt};function Sgt(e){const t=this,n=e.attempt(iB,r,e.attempt(this.parser.constructs.flowInitial,i,ps(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Nmt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Dgt={resolveAll:o3e()},Igt=s3e("string"),kgt=s3e("text");function s3e(e){return{tokenize:t,resolveAll:o3e(e==="text"?Rgt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function o3e(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Rgt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Ngt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:x,attempt:T(_),check:T(C),interrupt:T(C,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=Ed(o,R),g(),o[o.length-1]!==null?[]:(S(t,0),l.events=cte(s,l.events,l),l.events)}function d(R,F){return Ogt(h(R),F)}function h(R){return Pgt(o,R)}function p(){const{line:R,column:F,offset:O,_index:B,_bufferIndex:H}=r;return{line:R,column:F,offset:O,_index:B,_bufferIndex:H}}function m(R){i[R.line]=R.column,I()}function g(){let R;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<F.length;)y(F.charCodeAt(r._bufferIndex));else y(F)}}function y(R){c=c(R)}function v(R){Un(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,I()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,F){const O=F||{};return O.type=R,O.start=p(),l.events.push(["enter",O,l]),a.push(O),O}function x(R){const F=a.pop();return F.end=p(),l.events.push(["exit",F,l]),F}function _(R,F){S(R,F.from)}function C(R,F){F.restore()}function T(R,F){return O;function O(B,H,U){let G,Y,Q,M;return Array.isArray(B)?W(B):"tokenize"in B?W([B]):j(B);function j(re){return ve;function ve(pe){const Ae=pe!==null&&re[pe],ke=pe!==null&&re.null,it=[...Array.isArray(Ae)?Ae:Ae?[Ae]:[],...Array.isArray(ke)?ke:ke?[ke]:[]];return W(it)(pe)}}function W(re){return G=re,Y=0,re.length===0?U:L(re[Y])}function L(re){return ve;function ve(pe){return M=k(),Q=re,re.partial||(l.currentConstruct=re),re.name&&l.parser.constructs.disable.null.includes(re.name)?J():re.tokenize.call(F?Object.assign(Object.create(l),F):l,u,q,J)(pe)}}function q(re){return R(Q,M),H}function J(re){return M.restore(),++Y<G.length?L(G[Y]):U}}}function S(R,F){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&Zg(l.events,F,l.events.length-F,R.resolve(l.events.slice(F),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function k(){const R=p(),F=l.previous,O=l.currentConstruct,B=l.events.length,H=Array.from(a);return{restore:U,from:B};function U(){r=R,l.previous=F,l.currentConstruct=O,l.events.length=B,a=H,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Pgt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Ogt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Fgt={42:lc,43:lc,45:lc,48:lc,49:lc,50:lc,51:lc,52:lc,53:lc,54:lc,55:lc,56:lc,57:lc,62:Jke},$gt={91:Mmt},Mgt={[-2]:Iz,[-1]:Iz,32:Iz},Lgt={35:Vmt,42:nF,45:[ame,nF],60:Gmt,61:ame,95:nF,96:sme,126:sme},Bgt={38:e3e,92:Zke},jgt={[-5]:kz,[-4]:kz,[-3]:kz,33:fgt,38:e3e,42:PG,60:[hmt,egt],91:hgt,92:[Umt,Zke],93:fte,95:PG,96:Amt},Ugt={null:[PG,Dgt]},zgt={null:[42,95]},Vgt={null:[]},Hgt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:zgt,contentInitial:$gt,disable:Vgt,document:Fgt,flow:Lgt,flowInitial:Mgt,insideSpan:Ugt,string:Bgt,text:jgt},Symbol.toStringTag,{value:"Module"}));function qgt(e){const n=J0t([Hgt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(omt),document:i(umt),flow:i(Agt),string:i(Igt),text:i(kgt)};return r;function i(s){return o;function o(a){return Ngt(r,s,a)}}}function Wgt(e){for(;!t3e(e););return e}const ume=/[\0\t\n\r]/g;function Ggt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(ume.lastIndex=f,l=ume.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Ygt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Kgt(e){return e.replace(Ygt,Xgt)}function Xgt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Qke(n.slice(s?2:1),s?16:10)}return lte(n)||e}const a3e={}.hasOwnProperty;function Qgt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Jgt(n)(Wgt(qgt(n).document().write(Ggt()(e,t,!0))))}function Jgt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ft),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(Tt),blockQuote:s(ke),characterEscape:k,characterReference:k,codeFenced:s(it),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(it,o),codeText:s(Re,o),codeTextData:k,data:k,codeFlowValue:k,definition:s(ut),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Xe),hardBreakEscape:s(gt),hardBreakTrailing:s(gt),htmlFlow:s(Ie,o),htmlFlowData:k,htmlText:s(Ie,o),htmlTextData:k,image:s(Ve),label:o,link:s(ft),listItem:s($t),listItemValue:d,listOrdered:s(_t,f),listUnordered:s(_t),paragraph:s(st),reference:L,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Tt),strong:s(X),thematicBreak:s(we)},exit:{atxHeading:u(),atxHeadingSequence:_,autolink:u(),autolinkEmail:Ae,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:J,characterReferenceMarkerNumeric:J,characterReferenceValue:re,characterReference:ve,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(H),codeTextData:I,data:I,definition:u(),definitionDestinationString:x,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u(O),htmlFlowData:I,htmlText:u(B),htmlTextData:I,image:u(G),label:Q,labelText:Y,lineEnding:R,link:u(U),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:M,resourceTitleString:j,resource:W,setextHeading:u(S),setextHeadingLineSequence:T,setextHeadingText:C,strong:u(),thematicBreak:u()}};u3e(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ae){let he={type:"root",children:[]};const Ee={stack:[he],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Me=[];let Be=-1;for(;++Be<ae.length;)if(ae[Be][1].type==="listOrdered"||ae[Be][1].type==="listUnordered")if(ae[Be][0]==="enter")Me.push(Be);else{const lt=Me.pop();Be=i(ae,lt,Be)}for(Be=-1;++Be<ae.length;){const lt=t[ae[Be][0]];a3e.call(lt,ae[Be][1].type)&&lt[ae[Be][1].type].call(Object.assign({sliceSerialize:ae[Be][2].sliceSerialize},Ee),ae[Be][1])}if(Ee.tokenStack.length>0){const lt=Ee.tokenStack[Ee.tokenStack.length-1];(lt[1]||lme).call(Ee,void 0,lt[0])}for(he.position={start:t1(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:t1(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Be=-1;++Be<t.transforms.length;)he=t.transforms[Be](he)||he;return he}function i(ae,he,Ee){let Me=he-1,Be=-1,lt=!1,Ze,Xt,fn,Wt;for(;++Me<=Ee;){const an=ae[Me];switch(an[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{an[0]==="enter"?Be++:Be--,Wt=void 0;break}case"lineEndingBlank":{an[0]==="enter"&&(Ze&&!Wt&&!Be&&!fn&&(fn=Me),Wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Wt=void 0}if(!Be&&an[0]==="enter"&&an[1].type==="listItemPrefix"||Be===-1&&an[0]==="exit"&&(an[1].type==="listUnordered"||an[1].type==="listOrdered")){if(Ze){let Cn=Me;for(Xt=void 0;Cn--;){const $n=ae[Cn];if($n[1].type==="lineEnding"||$n[1].type==="lineEndingBlank"){if($n[0]==="exit")continue;Xt&&(ae[Xt][1].type="lineEndingBlank",lt=!0),$n[1].type="lineEnding",Xt=Cn}else if(!($n[1].type==="linePrefix"||$n[1].type==="blockQuotePrefix"||$n[1].type==="blockQuotePrefixWhitespace"||$n[1].type==="blockQuoteMarker"||$n[1].type==="listItemIndent"))break}fn&&(!Xt||fn<Xt)&&(Ze._spread=!0),Ze.end=Object.assign({},Xt?ae[Xt][1].start:an[1].end),ae.splice(Xt||Me,0,["exit",Ze,an[2]]),Me++,Ee++}if(an[1].type==="listItemPrefix"){const Cn={type:"listItem",_spread:!1,start:Object.assign({},an[1].start),end:void 0};Ze=Cn,ae.splice(Me,0,["enter",Cn,an[2]]),Me++,Ee++,fn=void 0,Wt=!0}}}return ae[he][1]._spread=lt,Ee}function s(ae,he){return Ee;function Ee(Me){a.call(this,ae(Me),Me),he&&he.call(this,Me)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ae,he,Ee){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([he,Ee]),ae.position={start:t1(he.start),end:void 0}}function u(ae){return he;function he(Ee){ae&&ae.call(this,Ee),l.call(this,Ee)}}function l(ae,he){const Ee=this.stack.pop(),Me=this.tokenStack.pop();if(Me)Me[0].type!==ae.type&&(he?he.call(this,ae,Me[0]):(Me[1]||lme).call(this,ae,Me[0]));else throw new Error("Cannot close `"+ae.type+"` ("+mk({start:ae.start,end:ae.end})+"): its not open");Ee.position.end=t1(ae.end)}function c(){return X0t(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ae){if(this.data.expectingFirstListItemValue){const he=this.stack[this.stack.length-2];he.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.lang=ae}function p(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.meta=ae}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae.replace(/(\r?\n|\r)$/g,"")}function v(ae){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=he,Ee.identifier=xC(this.sliceSerialize(ae)).toLowerCase()}function b(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.title=ae}function x(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.url=ae}function _(ae){const he=this.stack[this.stack.length-1];if(!he.depth){const Ee=this.sliceSerialize(ae).length;he.depth=Ee}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function T(ae){const he=this.stack[this.stack.length-1];he.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function S(){this.data.setextHeadingSlurpLineEnding=void 0}function k(ae){const Ee=this.stack[this.stack.length-1].children;let Me=Ee[Ee.length-1];(!Me||Me.type!=="text")&&(Me=de(),Me.position={start:t1(ae.start),end:void 0},Ee.push(Me)),this.stack.push(Me)}function I(ae){const he=this.stack.pop();he.value+=this.sliceSerialize(ae),he.position.end=t1(ae.end)}function R(ae){const he=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ee=he.children[he.children.length-1];Ee.position.end=t1(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(he.type)&&(k.call(this,ae),I.call(this,ae))}function F(){this.data.atHardBreak=!0}function O(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function B(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function H(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function U(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=he,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function G(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=he,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function Y(ae){const he=this.sliceSerialize(ae),Ee=this.stack[this.stack.length-2];Ee.label=Kgt(he),Ee.identifier=xC(he).toLowerCase()}function Q(){const ae=this.stack[this.stack.length-1],he=this.resume(),Ee=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ee.type==="link"){const Me=ae.children;Ee.children=Me}else Ee.alt=he}function M(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.url=ae}function j(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.title=ae}function W(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function q(ae){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=he,Ee.identifier=xC(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function J(ae){this.data.characterReferenceType=ae.type}function re(ae){const he=this.sliceSerialize(ae),Ee=this.data.characterReferenceType;let Me;Ee?(Me=Qke(he,Ee==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Me=lte(he);const Be=this.stack[this.stack.length-1];Be.value+=Me}function ve(ae){const he=this.stack.pop();he.position.end=t1(ae.end)}function pe(ae){I.call(this,ae);const he=this.stack[this.stack.length-1];he.url=this.sliceSerialize(ae)}function Ae(ae){I.call(this,ae);const he=this.stack[this.stack.length-1];he.url="mailto:"+this.sliceSerialize(ae)}function ke(){return{type:"blockquote",children:[]}}function it(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function ut(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Xe(){return{type:"emphasis",children:[]}}function Tt(){return{type:"heading",depth:0,children:[]}}function gt(){return{type:"break"}}function Ie(){return{type:"html",value:""}}function Ve(){return{type:"image",title:null,url:"",alt:null}}function ft(){return{type:"link",title:null,url:"",children:[]}}function _t(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function $t(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function st(){return{type:"paragraph",children:[]}}function X(){return{type:"strong",children:[]}}function de(){return{type:"text",value:""}}function we(){return{type:"thematicBreak"}}}function t1(e){return{line:e.line,column:e.column,offset:e.offset}}function u3e(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?u3e(e,r):Zgt(e,r)}}function Zgt(e,t){let n;for(n in t)if(a3e.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function lme(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+mk({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+mk({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+mk({start:t.start,end:t.end})+") is still open")}function eyt(e){const t=this;t.parser=n;function n(r){return Qgt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function tyt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function nyt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function ryt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function iyt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function syt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function oyt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=HA(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function ayt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uyt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function l3e(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function lyt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return l3e(e,t);const i={src:HA(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function cyt(e,t){const n={src:HA(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function fyt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function dyt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return l3e(e,t);const i={href:HA(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function hyt(e,t){const n={href:HA(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function pyt(e,t,n){const r=e.all(t),i=n?myt(n):c3e(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function myt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=c3e(n[r])}return t}function c3e(e){const t=e.spread;return t??e.children.length>1}function gyt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function yyt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vyt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function byt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xyt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=dm(t.children[1]),u=rB(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function wyt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function _yt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const cme=9,fme=32;function Eyt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(dme(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(dme(t.slice(i),i>0,!1)),s.join("")}function dme(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===cme||s===fme;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===cme||s===fme;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Cyt(e,t){const n={type:"text",value:Eyt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Tyt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Ayt={blockquote:tyt,break:nyt,code:ryt,delete:iyt,emphasis:syt,footnoteReference:oyt,heading:ayt,html:uyt,imageReference:lyt,image:cyt,inlineCode:fyt,linkReference:dyt,link:hyt,listItem:pyt,list:gyt,paragraph:yyt,root:vyt,strong:byt,table:xyt,tableCell:_yt,tableRow:wyt,text:Cyt,thematicBreak:Tyt,toml:u6,yaml:u6,definition:u6,footnoteDefinition:u6};function u6(){}const f3e=-1,sB=0,W5=1,G5=2,dte=3,hte=4,pte=5,mte=6,d3e=7,h3e=8,hme=typeof self=="object"?self:globalThis,Syt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case sB:case f3e:return n(o,i);case W5:{const a=n([],i);for(const u of o)a.push(r(u));return a}case G5:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case dte:return n(new Date(o),i);case hte:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case pte:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case mte:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case d3e:{const{name:a,message:u}=o;return n(new hme[a](u),i)}case h3e:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new hme[s](o),i)};return r},pme=e=>Syt(new Map,e)(0),YE="",{toString:Dyt}={},{keys:Iyt}=Object,_D=e=>{const t=typeof e;if(t!=="object"||!e)return[sB,t];const n=Dyt.call(e).slice(8,-1);switch(n){case"Array":return[W5,YE];case"Object":return[G5,YE];case"Date":return[dte,YE];case"RegExp":return[hte,YE];case"Map":return[pte,YE];case"Set":return[mte,YE]}return n.includes("Array")?[W5,n]:n.includes("Error")?[d3e,n]:[G5,n]},l6=([e,t])=>e===sB&&(t==="function"||t==="symbol"),kyt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=_D(o);switch(a){case sB:{let c=o;switch(u){case"bigint":a=h3e,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([f3e],o)}return i([a,c],o)}case W5:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case G5:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Iyt(o))(e||!l6(_D(o[d])))&&c.push([s(d),s(o[d])]);return f}case dte:return i([a,o.toISOString()],o);case hte:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case pte:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(l6(_D(d))||l6(_D(h))))&&c.push([s(d),s(h)]);return f}case mte:{const c=[],f=i([a,c],o);for(const d of o)(e||!l6(_D(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},mme=(e,{json:t,lossy:n}={})=>{const r=[];return kyt(!(t||n),!!t,new Map,r)(e),r},hT=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?pme(mme(e,t)):structuredClone(e):(e,t)=>pme(mme(e,t));function Ryt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Nyt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Pyt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ryt,r=e.options.footnoteBackLabel||Nyt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=HA(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...hT(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const p3e=function(e){if(e==null)return Myt;if(typeof e=="function")return oB(e);if(typeof e=="object")return Array.isArray(e)?Oyt(e):Fyt(e);if(typeof e=="string")return $yt(e);throw new Error("Expected function, string, or object as test")};function Oyt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=p3e(e[n]);return oB(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Fyt(e){const t=e;return oB(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function $yt(e){return oB(t);function t(n){return n&&n.type===e}}function oB(e){return t;function t(n,r,i){return!!(Lyt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Myt(){return!0}function Lyt(e){return e!==null&&typeof e=="object"&&"type"in e}const m3e=[],Byt=!0,gme=!1,jyt="skip";function Uyt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=p3e(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=m3e,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=zyt(n(u,c)),h[0]===gme))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==jyt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===gme)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function zyt(e){return Array.isArray(e)?e:typeof e=="number"?[Byt,e]:e==null?m3e:[e]}function gte(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Uyt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const OG={}.hasOwnProperty,Vyt={};function Hyt(e,t){const n=t||Vyt,r=new Map,i=new Map,s=new Map,o={...Ayt,...n.handlers},a={all:l,applyData:Wyt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:qyt,wrap:Yyt};return gte(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(OG.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=hT(g);return y.children=a.all(c),y}return hT(c)}return(a.options.unknownHandler||Gyt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=yme(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=yme(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function qyt(e,t){e.position&&(t.position=A0t(e))}function Wyt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,hT(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Gyt(e,t){const n=t.data||{},r="value"in t&&!(OG.call(n,"hProperties")||OG.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Yyt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function yme(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function vme(e,t){const n=Hyt(e,t),r=n.one(e,void 0),i=Pyt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Kyt(e,t){return e&&"run"in e?async function(n,r){const i=vme(n,{file:r,...t});await e.run(i,r)}:function(n,r){return vme(n,{file:r,...t||e})}}function bme(e){if(e)throw e}var rF=Object.prototype.hasOwnProperty,g3e=Object.prototype.toString,xme=Object.defineProperty,wme=Object.getOwnPropertyDescriptor,_me=function(t){return typeof Array.isArray=="function"?Array.isArray(t):g3e.call(t)==="[object Array]"},Eme=function(t){if(!t||g3e.call(t)!=="[object Object]")return!1;var n=rF.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&rF.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||rF.call(t,i)},Cme=function(t,n){xme&&n.name==="__proto__"?xme(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Tme=function(t,n){if(n==="__proto__")if(rF.call(t,n)){if(wme)return wme(t,n).value}else return;return t[n]},Xyt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Tme(a,n),i=Tme(t,n),a!==i&&(c&&i&&(Eme(i)||(s=_me(i)))?(s?(s=!1,o=r&&_me(r)?r:[]):o=r&&Eme(r)?r:{},Cme(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Cme(a,{name:n,newValue:i}));return a};const Rz=_p(Xyt);function FG(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Qyt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Jyt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Jyt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Qp={basename:Zyt,dirname:e1t,extname:t1t,join:n1t,sep:"/"};function Zyt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');vN(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function e1t(e){if(vN(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function t1t(e){vN(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function n1t(...e){let t=-1,n;for(;++t<e.length;)vN(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":r1t(n)}function r1t(e){vN(e);const t=e.codePointAt(0)===47;let n=i1t(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function i1t(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function vN(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const s1t={cwd:o1t};function o1t(){return"/"}function $G(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function a1t(e){if(typeof e=="string")e=new URL(e);else if(!$G(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return u1t(e)}function u1t(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Nz=["history","path","basename","stem","extname","dirname"];class y3e{constructor(t){let n;t?$G(t)?n={path:t}:typeof t=="string"||l1t(t)?n={value:t}:n=t:n={},this.cwd=s1t.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Nz.length;){const s=Nz[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Nz.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Qp.basename(this.path):void 0}set basename(t){Oz(t,"basename"),Pz(t,"basename"),this.path=Qp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Qp.dirname(this.path):void 0}set dirname(t){Ame(this.basename,"dirname"),this.path=Qp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Qp.extname(this.path):void 0}set extname(t){if(Pz(t,"extname"),Ame(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){$G(t)&&(t=a1t(t)),Oz(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Qp.basename(this.path,this.extname):void 0}set stem(t){Oz(t,"stem"),Pz(t,"stem"),this.path=Qp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ul(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Pz(e,t){if(e&&e.includes(Qp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Qp.sep+"`")}function Oz(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ame(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function l1t(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const c1t=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},f1t={}.hasOwnProperty;class yte extends c1t{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Qyt()}copy(){const t=new yte;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Rz(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Mz("data",this.frozen),this.namespace[t]=n,this):f1t.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Mz("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=c6(t),r=this.parser||this.Parser;return Fz("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Fz("process",this.parser||this.Parser),$z("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=c6(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);p1t(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Fz("processSync",this.parser||this.Parser),$z("processSync",this.compiler||this.Compiler),this.process(t,i),Dme("processSync","process",n),r;function i(s,o){n=!0,bme(s),r=o}}run(t,n,r){Sme(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=c6(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Dme("runSync","run",r),i;function s(o,a){bme(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=c6(n),i=this.compiler||this.Compiler;return $z("stringify",i),Sme(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Mz("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Rz(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];FG(m)&&FG(h)&&(h=Rz(!0,m,h)),r[d]=[l,h,...p]}}}}const d1t=new yte().freeze();function Fz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function $z(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Mz(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Sme(e){if(!FG(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Dme(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function c6(e){return h1t(e)?e:new y3e(e)}function h1t(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function p1t(e){return typeof e=="string"||m1t(e)}function m1t(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const g1t="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ime=[],kme={allowDangerousHtml:!0},y1t=/^(https?|ircs?|mailto|xmpp)$/i,v1t=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function b1t(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Ime,u=e.remarkPlugins||Ime,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...kme}:kme,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||x1t,h=d1t().use(eyt).use(u).use(Kyt,l).use(a),p=new y3e;typeof r=="string"&&(p.value=r);for(const v of v1t)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+g1t+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),gte(g,y),N0t(g,{Fragment:E.Fragment,components:s,ignoreInvalidStyle:!0,jsx:E.jsx,jsxs:E.jsxs,passKeys:!0,passNode:!0});function y(v,b,x){if(v.type==="raw"&&x&&typeof b=="number")return c?x.children.splice(b,1):x.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let _;for(_ in Dz)if(Object.hasOwn(Dz,_)&&Object.hasOwn(v.properties,_)){const C=v.properties[_],T=Dz[_];(T===null||T.includes(v.tagName))&&(v.properties[_]=d(String(C||""),_,v))}}if(v.type==="element"){let _=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!_&&n&&typeof b=="number"&&(_=!n(v,b,x)),_&&x&&typeof b=="number")return f&&v.children?x.children.splice(b,1,...v.children):x.children.splice(b,1),b}}}function x1t(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||y1t.test(e.slice(0,t))?e:""}const Rme=/[#.]/g;function w1t(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Rme.lastIndex=i;const a=Rme.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const _1t=new Set(["button","menu","reset","submit"]),MG={}.hasOwnProperty;function v3e(e,t,n){const r=n&&A1t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=w1t(s,t),l.tagName=l.tagName.toLowerCase(),r&&MG.call(r,l.tagName)&&(l.tagName=r[l.tagName]),E1t(o,l.tagName)){let c;for(c in o)MG.call(o,c)&&C1t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)LG(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function E1t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?_1t.has(e.type.toLowerCase()):!("value"in e)}function C1t(e,t,n,r){const i=nB(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=H0e(r):i.commaSeparated?o=B0e(r):i.commaOrSpaceSeparated?o=H0e(B0e(r).join(" ")):o=Nme(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?T1t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Nme(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function LG(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)LG(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?LG(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Nme(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||k3(n)===k3(t)))return!0}return n}function T1t(e){const t=[];let n;for(n in e)MG.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function A1t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const S1t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],D1t=v3e(yN,"div"),I1t=v3e(Ab,"g",S1t),Lz=/\r?\n|\r/g;function k1t(e){const t=String(e),n=[];for(Lz.lastIndex=0;Lz.test(t);)n.push(Lz.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const cw={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},b3e={}.hasOwnProperty,R1t=Object.prototype;function N1t(e,t){const n=t;return vte({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ab:yN,verbose:n.verbose||!1},e)}function vte(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},iF(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:x3e(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=k1t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},iF(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},iF(e,r,n),n}default:return n=P1t(e,t),n}}function x3e(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=vte(e,t[n]);r.push(i)}return r}function P1t(e,t){const n=e.schema;e.schema=t.namespaceURI===cw.svg?Ab:yN;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;b3e.call(R1t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?I1t:D1t)(t.tagName,i,x3e(e,t.childNodes));if(iF(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Y2(u.startTag),c=u&&u.endTag&&Y2(u.endTag),f=vte(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function iF(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=O1t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function O1t(e,t,n){const r=Y2(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)b3e.call(n.attrs,o)&&(s[nB(e.schema,o).property]=Y2(n.attrs[o]));n.startTag;const a=Y2(n.startTag),u=n.endTag?Y2(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Y2(e){const t=Pme({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Pme({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Pme(e){return e.line&&e.column?e:void 0}const Ome={}.hasOwnProperty;function w3e(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Ome.call(i,e)){const u=String(i[e]);o=Ome.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const F1t={}.hasOwnProperty,_3e=w3e("type",{handlers:{root:M1t,element:z1t,text:j1t,comment:U1t,doctype:B1t}});function $1t(e,t){const r=t.space;return _3e(e,r==="svg"?Ab:yN)}function M1t(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=bte(e.children,n,t),qA(e,n),n}function L1t(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=bte(e.children,n,t),qA(e,n),n}function B1t(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return qA(e,t),t}function j1t(e){const t={nodeName:"#text",value:e.value,parentNode:null};return qA(e,t),t}function U1t(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return qA(e,t),t}function z1t(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Ab);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&F1t.call(e.properties,s)){const u=V1t(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:cw[o],childNodes:[],parentNode:null};return a.childNodes=bte(e.children,a,r),qA(e,a),e.tagName==="template"&&e.content&&(a.content=L1t(e.content,r)),a}function V1t(e,t,n){const r=nB(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Oke(n):Vke(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=cw[r.space]}return i}function bte(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=_3e(e[r],n);s.parentNode=t,i.push(s)}return i}function qA(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const H1t=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],q1t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ns="";var oe;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(oe=oe||(oe={}));const oc={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function E3e(e){return e>=55296&&e<=57343}function W1t(e){return e>=56320&&e<=57343}function G1t(e,t){return(e-55296)*1024+9216+t}function C3e(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function T3e(e){return e>=64976&&e<=65007||q1t.has(e)}var We;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(We=We||(We={}));const Y1t=65536;class K1t{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Y1t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(W1t(n))return this.pos++,this._addGap(),G1t(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,oe.EOF;return this._err(We.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,oe.EOF;const r=this.html.charCodeAt(n);return r===oe.CARRIAGE_RETURN?oe.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,oe.EOF;let t=this.html.charCodeAt(this.pos);return t===oe.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,oe.LINE_FEED):t===oe.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,E3e(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===oe.LINE_FEED||t===oe.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){C3e(t)?this._err(We.controlCharacterInInputStream):T3e(t)&&this._err(We.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var _r;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(_r=_r||(_r={}));function A3e(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const a1=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),X1t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Bz;const Q1t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),J1t=(Bz=String.fromCodePoint)!==null&&Bz!==void 0?Bz:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Z1t(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Q1t.get(e))!==null&&t!==void 0?t:e}var Ra;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ra||(Ra={}));const evt=32;var x0;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(x0||(x0={}));function BG(e){return e>=Ra.ZERO&&e<=Ra.NINE}function tvt(e){return e>=Ra.UPPER_A&&e<=Ra.UPPER_F||e>=Ra.LOWER_A&&e<=Ra.LOWER_F}function nvt(e){return e>=Ra.UPPER_A&&e<=Ra.UPPER_Z||e>=Ra.LOWER_A&&e<=Ra.LOWER_Z||BG(e)}function rvt(e){return e===Ra.EQUALS||nvt(e)}var Ca;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ca||(Ca={}));var Wx;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Wx||(Wx={}));class ivt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ca.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Wx.Strict}startEntity(t){this.decodeMode=t,this.state=Ca.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ca.EntityStart:return t.charCodeAt(n)===Ra.NUM?(this.state=Ca.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ca.NamedEntity,this.stateNamedEntity(t,n));case Ca.NumericStart:return this.stateNumericStart(t,n);case Ca.NumericDecimal:return this.stateNumericDecimal(t,n);case Ca.NumericHex:return this.stateNumericHex(t,n);case Ca.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|evt)===Ra.LOWER_X?(this.state=Ca.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ca.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(BG(i)||tvt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(BG(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ra.SEMI)this.consumed+=1;else if(this.decodeMode===Wx.Strict)return 0;return this.emitCodePoint(Z1t(this.result),this.consumed),this.errors&&(t!==Ra.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&x0.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=D3e(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Wx.Attribute&&(s===0||rvt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&x0.VALUE_LENGTH)>>14,s!==0){if(o===Ra.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Wx.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&x0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~x0.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ca.NamedEntity:return this.result!==0&&(this.decodeMode!==Wx.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ca.NumericDecimal:return this.emitNumericEntity(0,2);case Ca.NumericHex:return this.emitNumericEntity(0,3);case Ca.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ca.EntityStart:return 0}}}function S3e(e){let t="";const n=new ivt(e,r=>t+=J1t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function D3e(e,t,n,r){const i=(t&x0.BRANCH_LENGTH)>>7,s=t&x0.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}S3e(a1);S3e(X1t);var ot;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ot=ot||(ot={}));var cv;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(cv=cv||(cv={}));var gf;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(gf=gf||(gf={}));var Le;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Le=Le||(Le={}));var $;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})($=$||($={}));const svt=new Map([[Le.A,$.A],[Le.ADDRESS,$.ADDRESS],[Le.ANNOTATION_XML,$.ANNOTATION_XML],[Le.APPLET,$.APPLET],[Le.AREA,$.AREA],[Le.ARTICLE,$.ARTICLE],[Le.ASIDE,$.ASIDE],[Le.B,$.B],[Le.BASE,$.BASE],[Le.BASEFONT,$.BASEFONT],[Le.BGSOUND,$.BGSOUND],[Le.BIG,$.BIG],[Le.BLOCKQUOTE,$.BLOCKQUOTE],[Le.BODY,$.BODY],[Le.BR,$.BR],[Le.BUTTON,$.BUTTON],[Le.CAPTION,$.CAPTION],[Le.CENTER,$.CENTER],[Le.CODE,$.CODE],[Le.COL,$.COL],[Le.COLGROUP,$.COLGROUP],[Le.DD,$.DD],[Le.DESC,$.DESC],[Le.DETAILS,$.DETAILS],[Le.DIALOG,$.DIALOG],[Le.DIR,$.DIR],[Le.DIV,$.DIV],[Le.DL,$.DL],[Le.DT,$.DT],[Le.EM,$.EM],[Le.EMBED,$.EMBED],[Le.FIELDSET,$.FIELDSET],[Le.FIGCAPTION,$.FIGCAPTION],[Le.FIGURE,$.FIGURE],[Le.FONT,$.FONT],[Le.FOOTER,$.FOOTER],[Le.FOREIGN_OBJECT,$.FOREIGN_OBJECT],[Le.FORM,$.FORM],[Le.FRAME,$.FRAME],[Le.FRAMESET,$.FRAMESET],[Le.H1,$.H1],[Le.H2,$.H2],[Le.H3,$.H3],[Le.H4,$.H4],[Le.H5,$.H5],[Le.H6,$.H6],[Le.HEAD,$.HEAD],[Le.HEADER,$.HEADER],[Le.HGROUP,$.HGROUP],[Le.HR,$.HR],[Le.HTML,$.HTML],[Le.I,$.I],[Le.IMG,$.IMG],[Le.IMAGE,$.IMAGE],[Le.INPUT,$.INPUT],[Le.IFRAME,$.IFRAME],[Le.KEYGEN,$.KEYGEN],[Le.LABEL,$.LABEL],[Le.LI,$.LI],[Le.LINK,$.LINK],[Le.LISTING,$.LISTING],[Le.MAIN,$.MAIN],[Le.MALIGNMARK,$.MALIGNMARK],[Le.MARQUEE,$.MARQUEE],[Le.MATH,$.MATH],[Le.MENU,$.MENU],[Le.META,$.META],[Le.MGLYPH,$.MGLYPH],[Le.MI,$.MI],[Le.MO,$.MO],[Le.MN,$.MN],[Le.MS,$.MS],[Le.MTEXT,$.MTEXT],[Le.NAV,$.NAV],[Le.NOBR,$.NOBR],[Le.NOFRAMES,$.NOFRAMES],[Le.NOEMBED,$.NOEMBED],[Le.NOSCRIPT,$.NOSCRIPT],[Le.OBJECT,$.OBJECT],[Le.OL,$.OL],[Le.OPTGROUP,$.OPTGROUP],[Le.OPTION,$.OPTION],[Le.P,$.P],[Le.PARAM,$.PARAM],[Le.PLAINTEXT,$.PLAINTEXT],[Le.PRE,$.PRE],[Le.RB,$.RB],[Le.RP,$.RP],[Le.RT,$.RT],[Le.RTC,$.RTC],[Le.RUBY,$.RUBY],[Le.S,$.S],[Le.SCRIPT,$.SCRIPT],[Le.SECTION,$.SECTION],[Le.SELECT,$.SELECT],[Le.SOURCE,$.SOURCE],[Le.SMALL,$.SMALL],[Le.SPAN,$.SPAN],[Le.STRIKE,$.STRIKE],[Le.STRONG,$.STRONG],[Le.STYLE,$.STYLE],[Le.SUB,$.SUB],[Le.SUMMARY,$.SUMMARY],[Le.SUP,$.SUP],[Le.TABLE,$.TABLE],[Le.TBODY,$.TBODY],[Le.TEMPLATE,$.TEMPLATE],[Le.TEXTAREA,$.TEXTAREA],[Le.TFOOT,$.TFOOT],[Le.TD,$.TD],[Le.TH,$.TH],[Le.THEAD,$.THEAD],[Le.TITLE,$.TITLE],[Le.TR,$.TR],[Le.TRACK,$.TRACK],[Le.TT,$.TT],[Le.U,$.U],[Le.UL,$.UL],[Le.SVG,$.SVG],[Le.VAR,$.VAR],[Le.WBR,$.WBR],[Le.XMP,$.XMP]]);function WA(e){var t;return(t=svt.get(e))!==null&&t!==void 0?t:$.UNKNOWN}const Ct=$,ovt={[ot.HTML]:new Set([Ct.ADDRESS,Ct.APPLET,Ct.AREA,Ct.ARTICLE,Ct.ASIDE,Ct.BASE,Ct.BASEFONT,Ct.BGSOUND,Ct.BLOCKQUOTE,Ct.BODY,Ct.BR,Ct.BUTTON,Ct.CAPTION,Ct.CENTER,Ct.COL,Ct.COLGROUP,Ct.DD,Ct.DETAILS,Ct.DIR,Ct.DIV,Ct.DL,Ct.DT,Ct.EMBED,Ct.FIELDSET,Ct.FIGCAPTION,Ct.FIGURE,Ct.FOOTER,Ct.FORM,Ct.FRAME,Ct.FRAMESET,Ct.H1,Ct.H2,Ct.H3,Ct.H4,Ct.H5,Ct.H6,Ct.HEAD,Ct.HEADER,Ct.HGROUP,Ct.HR,Ct.HTML,Ct.IFRAME,Ct.IMG,Ct.INPUT,Ct.LI,Ct.LINK,Ct.LISTING,Ct.MAIN,Ct.MARQUEE,Ct.MENU,Ct.META,Ct.NAV,Ct.NOEMBED,Ct.NOFRAMES,Ct.NOSCRIPT,Ct.OBJECT,Ct.OL,Ct.P,Ct.PARAM,Ct.PLAINTEXT,Ct.PRE,Ct.SCRIPT,Ct.SECTION,Ct.SELECT,Ct.SOURCE,Ct.STYLE,Ct.SUMMARY,Ct.TABLE,Ct.TBODY,Ct.TD,Ct.TEMPLATE,Ct.TEXTAREA,Ct.TFOOT,Ct.TH,Ct.THEAD,Ct.TITLE,Ct.TR,Ct.TRACK,Ct.UL,Ct.WBR,Ct.XMP]),[ot.MATHML]:new Set([Ct.MI,Ct.MO,Ct.MN,Ct.MS,Ct.MTEXT,Ct.ANNOTATION_XML]),[ot.SVG]:new Set([Ct.TITLE,Ct.FOREIGN_OBJECT,Ct.DESC]),[ot.XLINK]:new Set,[ot.XML]:new Set,[ot.XMLNS]:new Set};function I3e(e){return e===Ct.H1||e===Ct.H2||e===Ct.H3||e===Ct.H4||e===Ct.H5||e===Ct.H6}Le.STYLE,Le.SCRIPT,Le.XMP,Le.IFRAME,Le.NOEMBED,Le.NOFRAMES,Le.PLAINTEXT;const avt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var le;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(le||(le={}));const Ao={DATA:le.DATA,RCDATA:le.RCDATA,RAWTEXT:le.RAWTEXT,SCRIPT_DATA:le.SCRIPT_DATA,PLAINTEXT:le.PLAINTEXT,CDATA_SECTION:le.CDATA_SECTION};function yk(e){return e>=oe.DIGIT_0&&e<=oe.DIGIT_9}function gI(e){return e>=oe.LATIN_CAPITAL_A&&e<=oe.LATIN_CAPITAL_Z}function uvt(e){return e>=oe.LATIN_SMALL_A&&e<=oe.LATIN_SMALL_Z}function u1(e){return uvt(e)||gI(e)}function jG(e){return u1(e)||yk(e)}function k3e(e){return e>=oe.LATIN_CAPITAL_A&&e<=oe.LATIN_CAPITAL_F}function R3e(e){return e>=oe.LATIN_SMALL_A&&e<=oe.LATIN_SMALL_F}function lvt(e){return yk(e)||k3e(e)||R3e(e)}function f6(e){return e+32}function N3e(e){return e===oe.SPACE||e===oe.LINE_FEED||e===oe.TABULATION||e===oe.FORM_FEED}function cvt(e){return e===oe.EQUALS_SIGN||jG(e)}function Fme(e){return N3e(e)||e===oe.SOLIDUS||e===oe.GREATER_THAN_SIGN}class fvt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=le.DATA,this.returnState=le.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new K1t(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:_r.START_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:_r.END_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:_r.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:_r.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(A3e(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(We.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=WA(t.tagName),t.type===_r.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(We.endTagWithAttributes),t.selfClosing&&this._err(We.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case _r.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case _r.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case _r.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:_r.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=N3e(t)?_r.WHITESPACE_CHARACTER:t===oe.NULL?_r.NULL_CHARACTER:_r.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(_r.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=a1[0];s>=0&&(s=D3e(a1,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=a1[s];const a=o&x0.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==oe.SEMICOLON&&this._isCharacterReferenceInAttribute()&&cvt(this.preprocessor.peek(1))?(n=[oe.AMPERSAND],s+=u):(n=u===0?[a1[s]&~x0.VALUE_LENGTH]:u===1?[a1[++s]]:[a1[++s],a1[++s]],r=0,i=t!==oe.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(We.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===le.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case le.DATA:{this._stateData(t);break}case le.RCDATA:{this._stateRcdata(t);break}case le.RAWTEXT:{this._stateRawtext(t);break}case le.SCRIPT_DATA:{this._stateScriptData(t);break}case le.PLAINTEXT:{this._statePlaintext(t);break}case le.TAG_OPEN:{this._stateTagOpen(t);break}case le.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case le.TAG_NAME:{this._stateTagName(t);break}case le.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case le.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case le.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case le.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case le.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case le.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case le.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case le.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case le.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case le.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case le.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case le.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case le.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case le.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case le.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case le.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case le.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case le.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case le.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case le.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case le.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case le.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case le.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case le.BOGUS_COMMENT:{this._stateBogusComment(t);break}case le.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case le.COMMENT_START:{this._stateCommentStart(t);break}case le.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case le.COMMENT:{this._stateComment(t);break}case le.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case le.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case le.COMMENT_END:{this._stateCommentEnd(t);break}case le.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case le.DOCTYPE:{this._stateDoctype(t);break}case le.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case le.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case le.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case le.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case le.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case le.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case le.CDATA_SECTION:{this._stateCdataSection(t);break}case le.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case le.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case le.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case le.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case le.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case le.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case le.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case le.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.TAG_OPEN;break}case oe.AMPERSAND:{this.returnState=le.DATA,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitCodePoint(t);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case oe.AMPERSAND:{this.returnState=le.RCDATA,this.state=le.CHARACTER_REFERENCE;break}case oe.LESS_THAN_SIGN:{this.state=le.RCDATA_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Ns);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.RAWTEXT_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Ns);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Ns);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Ns);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(u1(t))this._createStartTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case oe.EXCLAMATION_MARK:{this.state=le.MARKUP_DECLARATION_OPEN;break}case oe.SOLIDUS:{this.state=le.END_TAG_OPEN;break}case oe.QUESTION_MARK:{this._err(We.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t);break}case oe.EOF:{this._err(We.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(We.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=le.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(u1(t))this._createEndTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case oe.GREATER_THAN_SIGN:{this._err(We.missingEndTagName),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(We.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.tagName+=Ns;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(gI(t)?f6(t):t)}}_stateRcdataLessThanSign(t){t===oe.SOLIDUS?this.state=le.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){u1(t)?(this.state=le.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=le.BEFORE_ATTRIBUTE_NAME,!1;case oe.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=le.SELF_CLOSING_START_TAG,!1;case oe.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=le.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===oe.SOLIDUS?this.state=le.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){u1(t)?(this.state=le.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case oe.SOLIDUS:{this.state=le.SCRIPT_DATA_END_TAG_OPEN;break}case oe.EXCLAMATION_MARK:{this.state=le.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=le.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){u1(t)?(this.state=le.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===oe.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===oe.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Ns);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Ns);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case oe.HYPHEN_MINUS:{this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Ns);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===oe.SOLIDUS?this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:u1(t)?(this._emitChars("<"),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){u1(t)?(this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(oc.SCRIPT,!1)&&Fme(this.preprocessor.peek(oc.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<oc.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Ns);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ns);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case oe.HYPHEN_MINUS:{this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ns);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===oe.SOLIDUS?(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(oc.SCRIPT,!1)&&Fme(this.preprocessor.peek(oc.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<oc.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.SOLIDUS:case oe.GREATER_THAN_SIGN:case oe.EOF:{this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case oe.EQUALS_SIGN:{this._err(We.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=le.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:case oe.SOLIDUS:case oe.GREATER_THAN_SIGN:case oe.EOF:{this._leaveAttrName(),this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case oe.EQUALS_SIGN:{this._leaveAttrName(),this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case oe.QUOTATION_MARK:case oe.APOSTROPHE:case oe.LESS_THAN_SIGN:{this._err(We.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.name+=Ns;break}default:this.currentAttr.name+=String.fromCodePoint(gI(t)?f6(t):t)}}_stateAfterAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case oe.EQUALS_SIGN:{this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{this.state=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this.state=le.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingAttributeValue),this.state=le.DATA,this.emitCurrentTagToken();break}default:this.state=le.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Ns;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Ns;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_UNQUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Ns;break}case oe.QUOTATION_MARK:case oe.APOSTROPHE:case oe.LESS_THAN_SIGN:case oe.EQUALS_SIGN:case oe.GRAVE_ACCENT:{this._err(We.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.SOLIDUS:{this._leaveAttrValue(),this.state=le.SELF_CLOSING_START_TAG;break}case oe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._err(We.missingWhitespaceBetweenAttributes),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case oe.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._err(We.unexpectedSolidusInTag),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.data+=Ns;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(oc.DASH_DASH,!0)?(this._createCommentToken(oc.DASH_DASH.length+1),this.state=le.COMMENT_START):this._consumeSequenceIfMatch(oc.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(oc.DOCTYPE.length+1),this.state=le.DOCTYPE):this._consumeSequenceIfMatch(oc.CDATA_START,!0)?this.inForeignNode?this.state=le.CDATA_SECTION:(this._err(We.cdataInHtmlContent),this._createCommentToken(oc.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=le.BOGUS_COMMENT):this._ensureHibernation()||(this._err(We.incorrectlyOpenedComment),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_START_DASH;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptClosingOfEmptyComment),this.state=le.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptClosingOfEmptyComment),this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END_DASH;break}case oe.LESS_THAN_SIGN:{n.data+="<",this.state=le.COMMENT_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.data+=Ns;break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case oe.EXCLAMATION_MARK:{n.data+="!",this.state=le.COMMENT_LESS_THAN_SIGN_BANG;break}case oe.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===oe.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=le.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===oe.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=le.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==oe.GREATER_THAN_SIGN&&t!==oe.EOF&&this._err(We.nestedComment),this.state=le.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EXCLAMATION_MARK:{this.state=le.COMMENT_END_BANG;break}case oe.HYPHEN_MINUS:{n.data+="-";break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{n.data+="--!",this.state=le.COMMENT_END_DASH;break}case oe.GREATER_THAN_SIGN:{this._err(We.incorrectlyClosedComment),this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=le.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case oe.EOF:{this._err(We.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingWhitespaceBeforeDoctypeName),this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(gI(t))this._createDoctypeToken(String.fromCharCode(f6(t))),this.state=le.DOCTYPE_NAME;else switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.NULL:{this._err(We.unexpectedNullCharacter),this._createDoctypeToken(Ns),this.state=le.DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=le.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.AFTER_DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.name+=Ns;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(gI(t)?f6(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(oc.PUBLIC,!1)?this.state=le.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(oc.SYSTEM,!1)?this.state=le.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(We.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.publicId+=Ns;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.publicId+=Ns;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.systemId+=Ns;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.systemId+=Ns;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.NULL:{this._err(We.unexpectedNullCharacter);break}case oe.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case oe.RIGHT_SQUARE_BRACKET:{this.state=le.CDATA_SECTION_BRACKET;break}case oe.EOF:{this._err(We.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===oe.RIGHT_SQUARE_BRACKET?this.state=le.CDATA_SECTION_END:(this._emitChars("]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA;break}case oe.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===oe.NUMBER_SIGN?this.state=le.NUMERIC_CHARACTER_REFERENCE:jG(t)?(this.state=le.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this.state=le.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){jG(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===oe.SEMICOLON&&this._err(We.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===oe.LATIN_SMALL_X||t===oe.LATIN_CAPITAL_X?this.state=le.HEXADEMICAL_CHARACTER_REFERENCE_START:yk(t)?(this.state=le.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(We.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(oe.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){lvt(t)?(this.state=le.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(We.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(oe.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){k3e(t)?this.charRefCode=this.charRefCode*16+t-55:R3e(t)?this.charRefCode=this.charRefCode*16+t-87:yk(t)?this.charRefCode=this.charRefCode*16+t-48:t===oe.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(We.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){yk(t)?this.charRefCode=this.charRefCode*10+t-48:t===oe.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(We.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===oe.NULL)this._err(We.nullCharacterReference),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(We.characterReferenceOutsideUnicodeRange),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(E3e(this.charRefCode))this._err(We.surrogateCharacterReference),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(T3e(this.charRefCode))this._err(We.noncharacterCharacterReference);else if(C3e(this.charRefCode)||this.charRefCode===oe.CARRIAGE_RETURN){this._err(We.controlCharacterReference);const n=avt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const P3e=new Set([$.DD,$.DT,$.LI,$.OPTGROUP,$.OPTION,$.P,$.RB,$.RP,$.RT,$.RTC]),$me=new Set([...P3e,$.CAPTION,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]),d6=new Map([[$.APPLET,ot.HTML],[$.CAPTION,ot.HTML],[$.HTML,ot.HTML],[$.MARQUEE,ot.HTML],[$.OBJECT,ot.HTML],[$.TABLE,ot.HTML],[$.TD,ot.HTML],[$.TEMPLATE,ot.HTML],[$.TH,ot.HTML],[$.ANNOTATION_XML,ot.MATHML],[$.MI,ot.MATHML],[$.MN,ot.MATHML],[$.MO,ot.MATHML],[$.MS,ot.MATHML],[$.MTEXT,ot.MATHML],[$.DESC,ot.SVG],[$.FOREIGN_OBJECT,ot.SVG],[$.TITLE,ot.SVG]]),dvt=[$.H1,$.H2,$.H3,$.H4,$.H5,$.H6],hvt=[$.TR,$.TEMPLATE,$.HTML],pvt=[$.TBODY,$.TFOOT,$.THEAD,$.TEMPLATE,$.HTML],mvt=[$.TABLE,$.TEMPLATE,$.HTML],gvt=[$.TD,$.TH];class yvt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=$.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===$.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ot.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ot.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(dvt,ot.HTML)}popUntilTableCellPopped(){this.popUntilPopped(gvt,ot.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(mvt,ot.HTML)}clearBackToTableBodyContext(){this.clearBackTo(pvt,ot.HTML)}clearBackToTableRowContext(){this.clearBackTo(hvt,ot.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===$.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===$.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(d6.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(I3e(n)&&r===ot.HTML)return!0;if(d6.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if((r===$.UL||r===$.OL)&&i===ot.HTML||d6.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(r===$.BUTTON&&i===ot.HTML||d6.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r===$.TABLE||r===$.TEMPLATE||r===$.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ot.HTML){if(n===$.TBODY||n===$.THEAD||n===$.TFOOT)return!0;if(n===$.TABLE||n===$.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r!==$.OPTION&&r!==$.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;P3e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;$me.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&$me.has(this.currentTagId);)this.pop()}}const jz=3;var Fh;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Fh=Fh||(Fh={}));const Mme={type:Fh.Marker};class vvt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Fh.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<jz)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<jz)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=jz&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Mme)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Fh.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Fh.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Mme);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Fh.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Fh.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Fh.Element&&n.element===t)}}function Lme(e){return{nodeName:"#text",value:e,parentNode:null}}const E2={createDocument(){return{nodeName:"#document",mode:gf.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};E2.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(E2.isTextNode(n)){n.value+=t;return}}E2.appendChild(e,Lme(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&E2.isTextNode(r)?r.value+=t:E2.insertBefore(e,Lme(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},O3e="html",bvt="about:legacy-compat",xvt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",F3e=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],wvt=[...F3e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],_vt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),$3e=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Evt=[...$3e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Bme(e,t){return t.some(n=>e.startsWith(n))}function Cvt(e){return e.name===O3e&&e.publicId===null&&(e.systemId===null||e.systemId===bvt)}function Tvt(e){if(e.name!==O3e)return gf.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===xvt)return gf.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),_vt.has(n))return gf.QUIRKS;let r=t===null?wvt:F3e;if(Bme(n,r))return gf.QUIRKS;if(r=t===null?$3e:Evt,Bme(n,r))return gf.LIMITED_QUIRKS}return gf.NO_QUIRKS}const jme={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Avt="definitionurl",Svt="definitionURL",Dvt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Ivt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ot.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ot.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ot.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ot.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ot.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ot.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ot.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ot.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ot.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ot.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ot.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ot.XMLNS}]]),kvt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Rvt=new Set([$.B,$.BIG,$.BLOCKQUOTE,$.BODY,$.BR,$.CENTER,$.CODE,$.DD,$.DIV,$.DL,$.DT,$.EM,$.EMBED,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HR,$.I,$.IMG,$.LI,$.LISTING,$.MENU,$.META,$.NOBR,$.OL,$.P,$.PRE,$.RUBY,$.S,$.SMALL,$.SPAN,$.STRONG,$.STRIKE,$.SUB,$.SUP,$.TABLE,$.TT,$.U,$.UL,$.VAR]);function Nvt(e){const t=e.tagID;return t===$.FONT&&e.attrs.some(({name:r})=>r===cv.COLOR||r===cv.SIZE||r===cv.FACE)||Rvt.has(t)}function M3e(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Avt){e.attrs[t].name=Svt;break}}function L3e(e){for(let t=0;t<e.attrs.length;t++){const n=Dvt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function xte(e){for(let t=0;t<e.attrs.length;t++){const n=Ivt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Pvt(e){const t=kvt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=WA(e.tagName))}function Ovt(e,t){return t===ot.MATHML&&(e===$.MI||e===$.MO||e===$.MN||e===$.MS||e===$.MTEXT)}function Fvt(e,t,n){if(t===ot.MATHML&&e===$.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===cv.ENCODING){const i=n[r].value.toLowerCase();return i===jme.TEXT_HTML||i===jme.APPLICATION_XML}}return t===ot.SVG&&(e===$.FOREIGN_OBJECT||e===$.DESC||e===$.TITLE)}function $vt(e,t,n,r){return(!r||r===ot.HTML)&&Fvt(e,t,n)||(!r||r===ot.MATHML)&&Ovt(e,t)}const Mvt="hidden",Lvt=8,Bvt=3;var ye;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ye||(ye={}));const jvt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},B3e=new Set([$.TABLE,$.TBODY,$.TFOOT,$.THEAD,$.TR]),Ume={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:E2,onParseError:null};let zme=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ye.INITIAL,this.originalInsertionMode=ye.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Ume,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new fvt(this.options,this),this.activeFormattingElements=new vvt(this.treeAdapter),this.fragmentContextID=r?WA(this.treeAdapter.getTagName(r)):$.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new yvt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Ume,...n};t??(t=r.treeAdapter.createElement(Le.TEMPLATE,ot.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ot.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===$.TEMPLATE&&s.tmplInsertionModeStack.unshift(ye.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:jvt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ot.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ot.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ye.TEXT}switchToPlaintextParsing(){this.insertionMode=ye.TEXT,this.originalInsertionMode=ye.IN_BODY,this.tokenizer.state=Ao.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Le.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ot.HTML))switch(this.fragmentContextID){case $.TITLE:case $.TEXTAREA:{this.tokenizer.state=Ao.RCDATA;break}case $.STYLE:case $.XMP:case $.IFRAME:case $.NOEMBED:case $.NOFRAMES:case $.NOSCRIPT:{this.tokenizer.state=Ao.RAWTEXT;break}case $.SCRIPT:{this.tokenizer.state=Ao.SCRIPT_DATA;break}case $.PLAINTEXT:{this.tokenizer.state=Ao.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ot.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ot.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Le.HTML,ot.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,$.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===_r.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===$.SVG&&this.treeAdapter.getTagName(n)===Le.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ot.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===$.MGLYPH||t.tagID===$.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ot.HTML)}_processToken(t){switch(t.type){case _r.CHARACTER:{this.onCharacter(t);break}case _r.NULL_CHARACTER:{this.onNullCharacter(t);break}case _r.COMMENT:{this.onComment(t);break}case _r.DOCTYPE:{this.onDoctype(t);break}case _r.START_TAG:{this._processStartTag(t);break}case _r.END_TAG:{this.onEndTag(t);break}case _r.EOF:{this.onEof(t);break}case _r.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return $vt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Fh.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ye.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion($.P),this.openElements.popUntilTagNamePopped($.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case $.TR:{this.insertionMode=ye.IN_ROW;return}case $.TBODY:case $.THEAD:case $.TFOOT:{this.insertionMode=ye.IN_TABLE_BODY;return}case $.CAPTION:{this.insertionMode=ye.IN_CAPTION;return}case $.COLGROUP:{this.insertionMode=ye.IN_COLUMN_GROUP;return}case $.TABLE:{this.insertionMode=ye.IN_TABLE;return}case $.BODY:{this.insertionMode=ye.IN_BODY;return}case $.FRAMESET:{this.insertionMode=ye.IN_FRAMESET;return}case $.SELECT:{this._resetInsertionModeForSelect(t);return}case $.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case $.HTML:{this.insertionMode=this.headElement?ye.AFTER_HEAD:ye.BEFORE_HEAD;return}case $.TD:case $.TH:{if(t>0){this.insertionMode=ye.IN_CELL;return}break}case $.HEAD:{if(t>0){this.insertionMode=ye.IN_HEAD;return}break}}this.insertionMode=ye.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===$.TEMPLATE)break;if(r===$.TABLE){this.insertionMode=ye.IN_SELECT_IN_TABLE;return}}this.insertionMode=ye.IN_SELECT}_isElementCausesFosterParenting(t){return B3e.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case $.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ot.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case $.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return ovt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){gxt(this,t);return}switch(this.insertionMode){case ye.INITIAL:{ED(this,t);break}case ye.BEFORE_HTML:{vk(this,t);break}case ye.BEFORE_HEAD:{bk(this,t);break}case ye.IN_HEAD:{xk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{wk(this,t);break}case ye.AFTER_HEAD:{_k(this,t);break}case ye.IN_BODY:case ye.IN_CAPTION:case ye.IN_CELL:case ye.IN_TEMPLATE:{U3e(this,t);break}case ye.TEXT:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{Uz(this,t);break}case ye.IN_TABLE_TEXT:{G3e(this,t);break}case ye.IN_COLUMN_GROUP:{Y5(this,t);break}case ye.AFTER_BODY:{K5(this,t);break}case ye.AFTER_AFTER_BODY:{sF(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){mxt(this,t);return}switch(this.insertionMode){case ye.INITIAL:{ED(this,t);break}case ye.BEFORE_HTML:{vk(this,t);break}case ye.BEFORE_HEAD:{bk(this,t);break}case ye.IN_HEAD:{xk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{wk(this,t);break}case ye.AFTER_HEAD:{_k(this,t);break}case ye.TEXT:{this._insertCharacters(t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{Uz(this,t);break}case ye.IN_COLUMN_GROUP:{Y5(this,t);break}case ye.AFTER_BODY:{K5(this,t);break}case ye.AFTER_AFTER_BODY:{sF(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){UG(this,t);return}switch(this.insertionMode){case ye.INITIAL:case ye.BEFORE_HTML:case ye.BEFORE_HEAD:case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:case ye.IN_BODY:case ye.IN_TABLE:case ye.IN_CAPTION:case ye.IN_COLUMN_GROUP:case ye.IN_TABLE_BODY:case ye.IN_ROW:case ye.IN_CELL:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:case ye.IN_TEMPLATE:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:{UG(this,t);break}case ye.IN_TABLE_TEXT:{CD(this,t);break}case ye.AFTER_BODY:{Gvt(this,t);break}case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{Yvt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ye.INITIAL:{Kvt(this,t);break}case ye.BEFORE_HEAD:case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:{this._err(t,We.misplacedDoctype);break}case ye.IN_TABLE_TEXT:{CD(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,We.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?yxt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ye.INITIAL:{ED(this,t);break}case ye.BEFORE_HTML:{Xvt(this,t);break}case ye.BEFORE_HEAD:{Jvt(this,t);break}case ye.IN_HEAD:{Tp(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{tbt(this,t);break}case ye.AFTER_HEAD:{rbt(this,t);break}case ye.IN_BODY:{ll(this,t);break}case ye.IN_TABLE:{pT(this,t);break}case ye.IN_TABLE_TEXT:{CD(this,t);break}case ye.IN_CAPTION:{Zbt(this,t);break}case ye.IN_COLUMN_GROUP:{Ete(this,t);break}case ye.IN_TABLE_BODY:{lB(this,t);break}case ye.IN_ROW:{cB(this,t);break}case ye.IN_CELL:{nxt(this,t);break}case ye.IN_SELECT:{X3e(this,t);break}case ye.IN_SELECT_IN_TABLE:{ixt(this,t);break}case ye.IN_TEMPLATE:{oxt(this,t);break}case ye.AFTER_BODY:{uxt(this,t);break}case ye.IN_FRAMESET:{lxt(this,t);break}case ye.AFTER_FRAMESET:{fxt(this,t);break}case ye.AFTER_AFTER_BODY:{hxt(this,t);break}case ye.AFTER_AFTER_FRAMESET:{pxt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?vxt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ye.INITIAL:{ED(this,t);break}case ye.BEFORE_HTML:{Qvt(this,t);break}case ye.BEFORE_HEAD:{Zvt(this,t);break}case ye.IN_HEAD:{ebt(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{nbt(this,t);break}case ye.AFTER_HEAD:{ibt(this,t);break}case ye.IN_BODY:{uB(this,t);break}case ye.TEXT:{Vbt(this,t);break}case ye.IN_TABLE:{N3(this,t);break}case ye.IN_TABLE_TEXT:{CD(this,t);break}case ye.IN_CAPTION:{ext(this,t);break}case ye.IN_COLUMN_GROUP:{txt(this,t);break}case ye.IN_TABLE_BODY:{zG(this,t);break}case ye.IN_ROW:{K3e(this,t);break}case ye.IN_CELL:{rxt(this,t);break}case ye.IN_SELECT:{Q3e(this,t);break}case ye.IN_SELECT_IN_TABLE:{sxt(this,t);break}case ye.IN_TEMPLATE:{axt(this,t);break}case ye.AFTER_BODY:{Z3e(this,t);break}case ye.IN_FRAMESET:{cxt(this,t);break}case ye.AFTER_FRAMESET:{dxt(this,t);break}case ye.AFTER_AFTER_BODY:{sF(this,t);break}}}onEof(t){switch(this.insertionMode){case ye.INITIAL:{ED(this,t);break}case ye.BEFORE_HTML:{vk(this,t);break}case ye.BEFORE_HEAD:{bk(this,t);break}case ye.IN_HEAD:{xk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{wk(this,t);break}case ye.AFTER_HEAD:{_k(this,t);break}case ye.IN_BODY:case ye.IN_TABLE:case ye.IN_CAPTION:case ye.IN_COLUMN_GROUP:case ye.IN_TABLE_BODY:case ye.IN_ROW:case ye.IN_CELL:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:{q3e(this,t);break}case ye.TEXT:{Hbt(this,t);break}case ye.IN_TABLE_TEXT:{CD(this,t);break}case ye.IN_TEMPLATE:{J3e(this,t);break}case ye.AFTER_BODY:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{_te(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===oe.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:case ye.TEXT:case ye.IN_COLUMN_GROUP:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:{this._insertCharacters(t);break}case ye.IN_BODY:case ye.IN_CAPTION:case ye.IN_CELL:case ye.IN_TEMPLATE:case ye.AFTER_BODY:case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{j3e(this,t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{Uz(this,t);break}case ye.IN_TABLE_TEXT:{W3e(this,t);break}}}};function Uvt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):H3e(e,t),n}function zvt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Vvt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Bvt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Hvt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Hvt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function qvt(e,t,n){const r=e.treeAdapter.getTagName(t),i=WA(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===$.TEMPLATE&&s===ot.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Wvt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function wte(e,t){for(let n=0;n<Lvt;n++){const r=Uvt(e,t);if(!r)break;const i=zvt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Vvt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&qvt(e,o,s),Wvt(e,i,r)}}function UG(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Gvt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Yvt(e,t){e._appendCommentNode(t,e.document)}function _te(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Kvt(e,t){e._setDocumentType(t);const n=t.forceQuirks?gf.QUIRKS:Tvt(t);Cvt(t)||e._err(t,We.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ye.BEFORE_HTML}function ED(e,t){e._err(t,We.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,gf.QUIRKS),e.insertionMode=ye.BEFORE_HTML,e._processToken(t)}function Xvt(e,t){t.tagID===$.HTML?(e._insertElement(t,ot.HTML),e.insertionMode=ye.BEFORE_HEAD):vk(e,t)}function Qvt(e,t){const n=t.tagID;(n===$.HTML||n===$.HEAD||n===$.BODY||n===$.BR)&&vk(e,t)}function vk(e,t){e._insertFakeRootElement(),e.insertionMode=ye.BEFORE_HEAD,e._processToken(t)}function Jvt(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.HEAD:{e._insertElement(t,ot.HTML),e.headElement=e.openElements.current,e.insertionMode=ye.IN_HEAD;break}default:bk(e,t)}}function Zvt(e,t){const n=t.tagID;n===$.HEAD||n===$.BODY||n===$.HTML||n===$.BR?bk(e,t):e._err(t,We.endTagWithoutMatchingOpenElement)}function bk(e,t){e._insertFakeElement(Le.HEAD,$.HEAD),e.headElement=e.openElements.current,e.insertionMode=ye.IN_HEAD,e._processToken(t)}function Tp(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case $.TITLE:{e._switchToTextParsing(t,Ao.RCDATA);break}case $.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Ao.RAWTEXT):(e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_HEAD_NO_SCRIPT);break}case $.NOFRAMES:case $.STYLE:{e._switchToTextParsing(t,Ao.RAWTEXT);break}case $.SCRIPT:{e._switchToTextParsing(t,Ao.SCRIPT_DATA);break}case $.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ye.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ye.IN_TEMPLATE);break}case $.HEAD:{e._err(t,We.misplacedStartTagForHeadElement);break}default:xk(e,t)}}function ebt(e,t){switch(t.tagID){case $.HEAD:{e.openElements.pop(),e.insertionMode=ye.AFTER_HEAD;break}case $.BODY:case $.BR:case $.HTML:{xk(e,t);break}case $.TEMPLATE:{V_(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function V_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==$.TEMPLATE&&e._err(t,We.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,We.endTagWithoutMatchingOpenElement)}function xk(e,t){e.openElements.pop(),e.insertionMode=ye.AFTER_HEAD,e._processToken(t)}function tbt(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.BASEFONT:case $.BGSOUND:case $.HEAD:case $.LINK:case $.META:case $.NOFRAMES:case $.STYLE:{Tp(e,t);break}case $.NOSCRIPT:{e._err(t,We.nestedNoscriptInHead);break}default:wk(e,t)}}function nbt(e,t){switch(t.tagID){case $.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ye.IN_HEAD;break}case $.BR:{wk(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function wk(e,t){const n=t.type===_r.EOF?We.openElementsLeftAfterEof:We.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ye.IN_HEAD,e._processToken(t)}function rbt(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.BODY:{e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=ye.IN_BODY;break}case $.FRAMESET:{e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_FRAMESET;break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{e._err(t,We.abandonedHeadElementChild),e.openElements.push(e.headElement,$.HEAD),Tp(e,t),e.openElements.remove(e.headElement);break}case $.HEAD:{e._err(t,We.misplacedStartTagForHeadElement);break}default:_k(e,t)}}function ibt(e,t){switch(t.tagID){case $.BODY:case $.HTML:case $.BR:{_k(e,t);break}case $.TEMPLATE:{V_(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function _k(e,t){e._insertFakeElement(Le.BODY,$.BODY),e.insertionMode=ye.IN_BODY,aB(e,t)}function aB(e,t){switch(t.type){case _r.CHARACTER:{U3e(e,t);break}case _r.WHITESPACE_CHARACTER:{j3e(e,t);break}case _r.COMMENT:{UG(e,t);break}case _r.START_TAG:{ll(e,t);break}case _r.END_TAG:{uB(e,t);break}case _r.EOF:{q3e(e,t);break}}}function j3e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function U3e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function sbt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function obt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function abt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_FRAMESET)}function ubt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function lbt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),I3e(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ot.HTML)}function cbt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function fbt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,ot.HTML),n||(e.formElement=e.openElements.current))}function dbt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===$.LI&&i===$.LI||(n===$.DD||n===$.DT)&&(i===$.DD||i===$.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==$.ADDRESS&&i!==$.DIV&&i!==$.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function hbt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.tokenizer.state=Ao.PLAINTEXT}function pbt(e,t){e.openElements.hasInScope($.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1}function mbt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Le.A);n&&(wte(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function gbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ybt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope($.NOBR)&&(wte(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function bbt(e,t){e.treeAdapter.getDocumentMode(e.document)!==gf.QUIRKS&&e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=ye.IN_TABLE}function z3e(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function V3e(e){const t=A3e(e,cv.TYPE);return t!=null&&t.toLowerCase()===Mvt}function xbt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),V3e(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function wbt(e,t){e._appendElement(t,ot.HTML),t.ackSelfClosing=!0}function _bt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Ebt(e,t){t.tagName=Le.IMG,t.tagID=$.IMG,z3e(e,t)}function Cbt(e,t){e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Ao.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ye.TEXT}function Tbt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Ao.RAWTEXT)}function Abt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Ao.RAWTEXT)}function Vme(e,t){e._switchToTextParsing(t,Ao.RAWTEXT)}function Sbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ye.IN_TABLE||e.insertionMode===ye.IN_CAPTION||e.insertionMode===ye.IN_TABLE_BODY||e.insertionMode===ye.IN_ROW||e.insertionMode===ye.IN_CELL?ye.IN_SELECT_IN_TABLE:ye.IN_SELECT}function Dbt(e,t){e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function Ibt(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ot.HTML)}function kbt(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion($.RTC),e._insertElement(t,ot.HTML)}function Rbt(e,t){e._reconstructActiveFormattingElements(),M3e(t),xte(t),t.selfClosing?e._appendElement(t,ot.MATHML):e._insertElement(t,ot.MATHML),t.ackSelfClosing=!0}function Nbt(e,t){e._reconstructActiveFormattingElements(),L3e(t),xte(t),t.selfClosing?e._appendElement(t,ot.SVG):e._insertElement(t,ot.SVG),t.ackSelfClosing=!0}function Hme(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function ll(e,t){switch(t.tagID){case $.I:case $.S:case $.B:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.SMALL:case $.STRIKE:case $.STRONG:{gbt(e,t);break}case $.A:{mbt(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{lbt(e,t);break}case $.P:case $.DL:case $.OL:case $.UL:case $.DIV:case $.DIR:case $.NAV:case $.MAIN:case $.MENU:case $.ASIDE:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.DETAILS:case $.ADDRESS:case $.ARTICLE:case $.SECTION:case $.SUMMARY:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{ubt(e,t);break}case $.LI:case $.DD:case $.DT:{dbt(e,t);break}case $.BR:case $.IMG:case $.WBR:case $.AREA:case $.EMBED:case $.KEYGEN:{z3e(e,t);break}case $.HR:{_bt(e,t);break}case $.RB:case $.RTC:{Ibt(e,t);break}case $.RT:case $.RP:{kbt(e,t);break}case $.PRE:case $.LISTING:{cbt(e,t);break}case $.XMP:{Tbt(e,t);break}case $.SVG:{Nbt(e,t);break}case $.HTML:{sbt(e,t);break}case $.BASE:case $.LINK:case $.META:case $.STYLE:case $.TITLE:case $.SCRIPT:case $.BGSOUND:case $.BASEFONT:case $.TEMPLATE:{Tp(e,t);break}case $.BODY:{obt(e,t);break}case $.FORM:{fbt(e,t);break}case $.NOBR:{ybt(e,t);break}case $.MATH:{Rbt(e,t);break}case $.TABLE:{bbt(e,t);break}case $.INPUT:{xbt(e,t);break}case $.PARAM:case $.TRACK:case $.SOURCE:{wbt(e,t);break}case $.IMAGE:{Ebt(e,t);break}case $.BUTTON:{pbt(e,t);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{vbt(e,t);break}case $.IFRAME:{Abt(e,t);break}case $.SELECT:{Sbt(e,t);break}case $.OPTION:case $.OPTGROUP:{Dbt(e,t);break}case $.NOEMBED:{Vme(e,t);break}case $.FRAMESET:{abt(e,t);break}case $.TEXTAREA:{Cbt(e,t);break}case $.NOSCRIPT:{e.options.scriptingEnabled?Vme(e,t):Hme(e,t);break}case $.PLAINTEXT:{hbt(e,t);break}case $.COL:case $.TH:case $.TD:case $.TR:case $.HEAD:case $.FRAME:case $.TBODY:case $.TFOOT:case $.THEAD:case $.CAPTION:case $.COLGROUP:break;default:Hme(e,t)}}function Pbt(e,t){if(e.openElements.hasInScope($.BODY)&&(e.insertionMode=ye.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Obt(e,t){e.openElements.hasInScope($.BODY)&&(e.insertionMode=ye.AFTER_BODY,Z3e(e,t))}function Fbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function $bt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope($.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped($.FORM):n&&e.openElements.remove(n))}function Mbt(e){e.openElements.hasInButtonScope($.P)||e._insertFakeElement(Le.P,$.P),e._closePElement()}function Lbt(e){e.openElements.hasInListItemScope($.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion($.LI),e.openElements.popUntilTagNamePopped($.LI))}function Bbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function jbt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Ubt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function zbt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Le.BR,$.BR),e.openElements.pop(),e.framesetOk=!1}function H3e(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==$.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function uB(e,t){switch(t.tagID){case $.A:case $.B:case $.I:case $.S:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.NOBR:case $.SMALL:case $.STRIKE:case $.STRONG:{wte(e,t);break}case $.P:{Mbt(e);break}case $.DL:case $.UL:case $.OL:case $.DIR:case $.DIV:case $.NAV:case $.PRE:case $.MAIN:case $.MENU:case $.ASIDE:case $.BUTTON:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.ADDRESS:case $.ARTICLE:case $.DETAILS:case $.SECTION:case $.SUMMARY:case $.LISTING:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{Fbt(e,t);break}case $.LI:{Lbt(e);break}case $.DD:case $.DT:{Bbt(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{jbt(e);break}case $.BR:{zbt(e);break}case $.BODY:{Pbt(e,t);break}case $.HTML:{Obt(e,t);break}case $.FORM:{$bt(e);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{Ubt(e,t);break}case $.TEMPLATE:{V_(e,t);break}default:H3e(e,t)}}function q3e(e,t){e.tmplInsertionModeStack.length>0?J3e(e,t):_te(e,t)}function Vbt(e,t){var n;t.tagID===$.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Hbt(e,t){e._err(t,We.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Uz(e,t){if(B3e.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ye.IN_TABLE_TEXT,t.type){case _r.CHARACTER:{G3e(e,t);break}case _r.WHITESPACE_CHARACTER:{W3e(e,t);break}}else bN(e,t)}function qbt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_CAPTION}function Wbt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_COLUMN_GROUP}function Gbt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Le.COLGROUP,$.COLGROUP),e.insertionMode=ye.IN_COLUMN_GROUP,Ete(e,t)}function Ybt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_TABLE_BODY}function Kbt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Le.TBODY,$.TBODY),e.insertionMode=ye.IN_TABLE_BODY,lB(e,t)}function Xbt(e,t){e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Qbt(e,t){V3e(t)?e._appendElement(t,ot.HTML):bN(e,t),t.ackSelfClosing=!0}function Jbt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ot.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function pT(e,t){switch(t.tagID){case $.TD:case $.TH:case $.TR:{Kbt(e,t);break}case $.STYLE:case $.SCRIPT:case $.TEMPLATE:{Tp(e,t);break}case $.COL:{Gbt(e,t);break}case $.FORM:{Jbt(e,t);break}case $.TABLE:{Xbt(e,t);break}case $.TBODY:case $.TFOOT:case $.THEAD:{Ybt(e,t);break}case $.INPUT:{Qbt(e,t);break}case $.CAPTION:{qbt(e,t);break}case $.COLGROUP:{Wbt(e,t);break}default:bN(e,t)}}function N3(e,t){switch(t.tagID){case $.TABLE:{e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode());break}case $.TEMPLATE:{V_(e,t);break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:bN(e,t)}}function bN(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,aB(e,t),e.fosterParentingEnabled=n}function W3e(e,t){e.pendingCharacterTokens.push(t)}function G3e(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function CD(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)bN(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Y3e=new Set([$.CAPTION,$.COL,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]);function Zbt(e,t){const n=t.tagID;Y3e.has(n)?e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_TABLE,pT(e,t)):ll(e,t)}function ext(e,t){const n=t.tagID;switch(n){case $.CAPTION:case $.TABLE:{e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_TABLE,n===$.TABLE&&N3(e,t));break}case $.BODY:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:uB(e,t)}}function Ete(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.COL:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case $.TEMPLATE:{Tp(e,t);break}default:Y5(e,t)}}function txt(e,t){switch(t.tagID){case $.COLGROUP:{e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=ye.IN_TABLE);break}case $.TEMPLATE:{V_(e,t);break}case $.COL:break;default:Y5(e,t)}}function Y5(e,t){e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=ye.IN_TABLE,e._processToken(t))}function lB(e,t){switch(t.tagID){case $.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_ROW;break}case $.TH:case $.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Le.TR,$.TR),e.insertionMode=ye.IN_ROW,cB(e,t);break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE,pT(e,t));break}default:pT(e,t)}}function zG(e,t){const n=t.tagID;switch(t.tagID){case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE);break}case $.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE,N3(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:case $.TR:break;default:N3(e,t)}}function cB(e,t){switch(t.tagID){case $.TH:case $.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_CELL,e.activeFormattingElements.insertMarker();break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,lB(e,t));break}default:pT(e,t)}}function K3e(e,t){switch(t.tagID){case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY);break}case $.TABLE:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,zG(e,t));break}case $.TBODY:case $.TFOOT:case $.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope($.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,zG(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:break;default:N3(e,t)}}function nxt(e,t){const n=t.tagID;Y3e.has(n)?(e.openElements.hasInTableScope($.TD)||e.openElements.hasInTableScope($.TH))&&(e._closeTableCell(),cB(e,t)):ll(e,t)}function rxt(e,t){const n=t.tagID;switch(n){case $.TD:case $.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_ROW);break}case $.TABLE:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),K3e(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:break;default:uB(e,t)}}function X3e(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case $.OPTGROUP:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case $.INPUT:case $.KEYGEN:case $.TEXTAREA:case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),t.tagID!==$.SELECT&&e._processStartTag(t));break}case $.SCRIPT:case $.TEMPLATE:{Tp(e,t);break}}}function Q3e(e,t){switch(t.tagID){case $.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===$.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===$.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop();break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop();break}case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode());break}case $.TEMPLATE:{V_(e,t);break}}}function ixt(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e._processStartTag(t)):X3e(e,t)}function sxt(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Q3e(e,t)}function oxt(e,t){switch(t.tagID){case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{Tp(e,t);break}case $.CAPTION:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.tmplInsertionModeStack[0]=ye.IN_TABLE,e.insertionMode=ye.IN_TABLE,pT(e,t);break}case $.COL:{e.tmplInsertionModeStack[0]=ye.IN_COLUMN_GROUP,e.insertionMode=ye.IN_COLUMN_GROUP,Ete(e,t);break}case $.TR:{e.tmplInsertionModeStack[0]=ye.IN_TABLE_BODY,e.insertionMode=ye.IN_TABLE_BODY,lB(e,t);break}case $.TD:case $.TH:{e.tmplInsertionModeStack[0]=ye.IN_ROW,e.insertionMode=ye.IN_ROW,cB(e,t);break}default:e.tmplInsertionModeStack[0]=ye.IN_BODY,e.insertionMode=ye.IN_BODY,ll(e,t)}}function axt(e,t){t.tagID===$.TEMPLATE&&V_(e,t)}function J3e(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):_te(e,t)}function uxt(e,t){t.tagID===$.HTML?ll(e,t):K5(e,t)}function Z3e(e,t){var n;if(t.tagID===$.HTML){if(e.fragmentContext||(e.insertionMode=ye.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===$.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else K5(e,t)}function K5(e,t){e.insertionMode=ye.IN_BODY,aB(e,t)}function lxt(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.FRAMESET:{e._insertElement(t,ot.HTML);break}case $.FRAME:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case $.NOFRAMES:{Tp(e,t);break}}}function cxt(e,t){t.tagID===$.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==$.FRAMESET&&(e.insertionMode=ye.AFTER_FRAMESET))}function fxt(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.NOFRAMES:{Tp(e,t);break}}}function dxt(e,t){t.tagID===$.HTML&&(e.insertionMode=ye.AFTER_AFTER_FRAMESET)}function hxt(e,t){t.tagID===$.HTML?ll(e,t):sF(e,t)}function sF(e,t){e.insertionMode=ye.IN_BODY,aB(e,t)}function pxt(e,t){switch(t.tagID){case $.HTML:{ll(e,t);break}case $.NOFRAMES:{Tp(e,t);break}}}function mxt(e,t){t.chars=Ns,e._insertCharacters(t)}function gxt(e,t){e._insertCharacters(t),e.framesetOk=!1}function eRe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ot.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function yxt(e,t){if(Nvt(t))eRe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ot.MATHML?M3e(t):r===ot.SVG&&(Pvt(t),L3e(t)),xte(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function vxt(e,t){if(t.tagID===$.P||t.tagID===$.BR){eRe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ot.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Le.AREA,Le.BASE,Le.BASEFONT,Le.BGSOUND,Le.BR,Le.COL,Le.EMBED,Le.FRAME,Le.HR,Le.IMG,Le.INPUT,Le.KEYGEN,Le.LINK,Le.META,Le.PARAM,Le.SOURCE,Le.TRACK,Le.WBR;const bxt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),qme={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function tRe(e,t){const n=Ixt(e),r=w3e("type",{handlers:{root:xxt,element:wxt,text:_xt,comment:rRe,doctype:Ext,raw:Txt},unknown:Axt}),i={parser:n?new zme(qme):zme.getFragmentParser(void 0,qme),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),GA(i,dm());const s=n?i.parser.document:i.parser.getFragment(),o=N1t(s,{file:i.options.file});return i.stitches&&gte(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function nRe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function xxt(e,t){nRe(e.children,t)}function wxt(e,t){Sxt(e,t),nRe(e.children,t),Dxt(e,t)}function _xt(e,t){const n={type:_r.CHARACTER,chars:e.value,location:xN(e)};GA(t,dm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Ext(e,t){const n={type:_r.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:xN(e)};GA(t,dm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Cxt(e,t){t.stitches=!0;const n=kxt(e);if("children"in e&&"children"in n){const r=tRe({type:"root",children:e.children},t.options);n.children=r.children}rRe({type:"comment",value:{stitch:n}},t)}function rRe(e,t){const n=e.value,r={type:_r.COMMENT,data:n,location:xN(e)};GA(t,dm(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Txt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,iRe(t,dm(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Axt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Cxt(n,t);else{let r="";throw bxt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function GA(e,t){iRe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Ao.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function iRe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Sxt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Ao.PLAINTEXT)return;GA(t,dm(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:cw.html;i===cw.html&&n==="svg"&&(i=cw.svg);const s=$1t({...e,children:[]},{space:i===cw.svg?"svg":"html"}),o={type:_r.START_TAG,tagName:n,tagID:WA(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:xN(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Dxt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&H1t.includes(n)||t.parser.tokenizer.state===Ao.PLAINTEXT)return;GA(t,rB(e));const r={type:_r.END_TAG,tagName:n,tagID:WA(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:xN(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Ao.RCDATA||t.parser.tokenizer.state===Ao.RAWTEXT||t.parser.tokenizer.state===Ao.SCRIPT_DATA)&&(t.parser.tokenizer.state=Ao.DATA)}function Ixt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function xN(e){const t=dm(e)||{line:void 0,column:void 0,offset:void 0},n=rB(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function kxt(e){return"children"in e?hT({...e,children:[]}):hT(e)}function Rxt(e){return function(t,n){return tRe(t,{...e,file:n})}}function tl({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return E.jsx(Eb,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return E.jsx(Ye,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return E.jsx(uo,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return E.jsx(uo,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return E.jsx(uo,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return E.jsx(uo,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return E.jsx(uo,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return E.jsx(uo,{...s,order:6,...s,pb:12})},a({node:i,...s}){return E.jsx(wb,{...s,ref:void 0})},ul({node:i,...s}){return E.jsx(To,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return E.jsx(To,{type:"ordered",withPadding:!0,...o,pb:8})}};return E.jsx(b1t,{components:n,rehypePlugins:[Rxt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function oF({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return E.jsx(tl,{text:n})}const KE=14;function Nxt({completed:e,inProgress:t,rejected:n}){return E.jsxs(Jt,{ml:4,gap:4,children:[E.jsx(ws,{label:"Completed",children:E.jsx(uv,{variant:"light",color:"green",leftSection:E.jsx(Dke,{width:KE,height:KE,style:{paddingTop:1}}),pb:1,children:e})}),E.jsx(ws,{label:"In Progress",children:E.jsx(uv,{variant:"light",color:"orange",leftSection:E.jsx(Ike,{width:KE,height:KE,style:{paddingTop:1}}),pb:1,children:t})}),E.jsx(ws,{label:"Rejected",children:E.jsx(uv,{variant:"light",color:"red",leftSection:E.jsx(ite,{width:KE,height:KE,style:{paddingTop:1}}),pb:1,children:n})})]})}const Pxt="https://github.com/revisit-studies/study/tree/main/public/";function Oxt({configName:e,config:t,url:n}){const{storageEngine:r}=Oo(),[i,s]=N.useState(null);N.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=N.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=N.useState(null);N.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=N.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return E.jsx(OA,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?E.jsxs(E.Fragment,{children:[E.jsx(Ye,{fw:"bold",children:e}),E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(pk,{color:"red"}),E.jsx(Ye,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),E.jsx(oF,{issues:t.errors,type:"error"}),t.warnings.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(pk,{color:"orange"}),E.jsx(Ye,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),E.jsx(oF,{issues:t.warnings,type:"warning"})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(Jt,{direction:"row",justify:"space-between",children:E.jsx(Ye,{fw:"bold",children:t.studyMetadata.title})}),E.jsxs(Ye,{c:"dimmed",children:[E.jsx(Ye,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),E.jsx(Ye,{c:"dimmed",children:t.studyMetadata.description}),E.jsx(Ye,{c:"dimmed",ta:"right",style:{paddingRight:5},children:E.jsxs(wb,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${Pxt}${n}`,children:["View source:"," ",n,E.jsx(Npt,{style:{width:ze(18),height:ze(18),marginLeft:ze(2),marginBottom:ze(-3)}})]})}),t.warnings.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(pk,{color:"orange"}),E.jsx(Ye,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),E.jsx(oF,{issues:t.warnings,type:"warning"})]}),E.jsx(FA,{my:"md"}),E.jsxs(Jt,{direction:"row",gap:"sm",children:[E.jsxs(Ye,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&E.jsx(Nxt,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&E.jsxs(Ye,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),E.jsxs(Jt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[E.jsx(bn,{leftSection:E.jsx(Ske,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${jl}analysis/stats/${n}`,children:"Analyze & Manage Study"}),E.jsx(bn,{leftSection:E.jsx(Fpt,{}),component:"a",href:`${jl}${n}`,children:"Go to Study"})]})]})},e)}function XE({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=Pke(n);return E.jsx(Oxt,{configName:n,config:r,url:i},n)})}function Fxt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=n.filter(l=>l.startsWith("demo-")),i=n.filter(l=>l.startsWith("tutorial-")),s=n.filter(l=>l.startsWith("example-")),o=n.filter(l=>l.startsWith("test-")),a=n.filter(l=>l.startsWith("library-")),u=n.filter(l=>!l.startsWith("demo-")&&!l.startsWith("tutorial-")&&!l.startsWith("example-")&&!l.startsWith("test-")&&!l.startsWith("library-"));return E.jsx(Yi.Main,{children:E.jsxs(Bl,{size:"sm",px:0,children:[E.jsx(Eb,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${jl}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),E.jsxs(qr,{variant:"outline",defaultValue:u.length>0?"Others":"Demos",children:[E.jsxs(qr.List,{children:[u.length>0&&E.jsx(qr.Tab,{value:"Others",children:"Your Studies"}),E.jsx(qr.Tab,{value:"Demos",children:"Demo Studies"}),E.jsx(qr.Tab,{value:"Examples",children:"Example Studies"}),E.jsx(qr.Tab,{value:"Tutorials",children:"Tutorials"}),E.jsx(qr.Tab,{value:"Tests",children:"Tests"}),E.jsx(qr.Tab,{value:"Libraries",children:"Libraries"})]}),u.length>0&&E.jsx(qr.Panel,{value:"Others",children:E.jsx(XE,{configNames:u,studyConfigs:t})}),E.jsxs(qr.Panel,{value:"Demos",children:[E.jsx(Ye,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),E.jsx(XE,{configNames:r,studyConfigs:t})]}),E.jsxs(qr.Panel,{value:"Examples",children:[E.jsx(Ye,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),E.jsx(XE,{configNames:s,studyConfigs:t})]}),E.jsxs(qr.Panel,{value:"Tutorials",children:[E.jsx(Ye,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),E.jsx(XE,{configNames:i,studyConfigs:t})]}),E.jsxs(qr.Panel,{value:"Tests",children:[E.jsx(Ye,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),E.jsx(XE,{configNames:o,studyConfigs:t})]}),E.jsxs(qr.Panel,{value:"Libraries",children:[E.jsx(Ye,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish"}),E.jsx(XE,{configNames:a,studyConfigs:t})]})]})]})})}var sRe={exports:{}},oRe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN=N;function $xt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mxt=typeof Object.is=="function"?Object.is:$xt,Lxt=wN.useSyncExternalStore,Bxt=wN.useRef,jxt=wN.useEffect,Uxt=wN.useMemo,zxt=wN.useDebugValue;oRe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Bxt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Uxt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Mxt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Lxt(e,s[0],s[1]);return jxt(function(){o.hasValue=!0,o.value=a},[a]),zxt(a),a};sRe.exports=oRe;var Vxt=sRe.exports,Tf="default"in u5?vi:u5,Wme=Symbol.for("react-redux-context"),Gme=typeof globalThis<"u"?globalThis:{};function Hxt(){if(!Tf.createContext)return{};const e=Gme[Wme]??(Gme[Wme]=new Map);let t=e.get(Tf.createContext);return t||(t=Tf.createContext(null),e.set(Tf.createContext,t)),t}var Iv=Hxt(),qxt=()=>{throw new Error("uSES not initialized!")};function Cte(e=Iv){return function(){return Tf.useContext(e)}}var aRe=Cte(),uRe=qxt,Wxt=e=>{uRe=e},Gxt=(e,t)=>e===t;function Yxt(e=Iv){const t=e===Iv?aRe:Cte(e),n=(r,i={})=>{const{equalityFn:s=Gxt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Tf.useRef(!0);const d=Tf.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=uRe(u.addNestedSub,a.getState,l||a.getState,d,s);return Tf.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Kxt=Yxt();function Xxt(e){e()}function Qxt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Xxt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Yme={notify(){},get:()=>[]};function Jxt(e,t){let n,r=Yme,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Qxt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Yme)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Zxt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ewt=typeof navigator<"u"&&navigator.product==="ReactNative",twt=Zxt||ewt?Tf.useLayoutEffect:Tf.useEffect;function nwt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Tf.useMemo(()=>{const l=Jxt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Tf.useMemo(()=>e.getState(),[e]);twt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||Iv;return Tf.createElement(u.Provider,{value:o},n)}var rwt=nwt;function lRe(e=Iv){const t=e===Iv?aRe:Cte(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var iwt=lRe();function swt(e=Iv){const t=e===Iv?iwt:lRe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var cRe=swt();Wxt(Vxt.useSyncExternalStoreWithSelector);function Za(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var owt=typeof Symbol=="function"&&Symbol.observable||"@@observable",Kme=owt,zz=()=>Math.random().toString(36).substring(7).split("").join("."),awt={INIT:`@@redux/INIT${zz()}`,REPLACE:`@@redux/REPLACE${zz()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${zz()}`},X5=awt;function Tte(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function fRe(e,t,n){if(typeof e!="function")throw new Error(Za(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Za(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Za(1));return n(fRe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Za(3));return i}function f(g){if(typeof g!="function")throw new Error(Za(4));if(u)throw new Error(Za(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Za(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!Tte(g))throw new Error(Za(7));if(typeof g.type>"u")throw new Error(Za(8));if(typeof g.type!="string")throw new Error(Za(17));if(u)throw new Error(Za(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Za(10));r=g,d({type:X5.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Za(11));function v(){const x=y;x.next&&x.next(c())}return v(),{unsubscribe:g(v)}},[Kme](){return this}}}return d({type:X5.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Kme]:p}}function uwt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:X5.INIT})>"u")throw new Error(Za(12));if(typeof n(void 0,{type:X5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Za(13))})}function lwt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{uwt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Za(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function Q5(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function cwt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Za(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=Q5(...a)(i.dispatch),{...i,dispatch:s}}}function fwt(e){return Tte(e)&&"type"in e&&typeof e.type=="string"}var dRe=Symbol.for("immer-nothing"),Xme=Symbol.for("immer-draftable"),Bf=Symbol.for("immer-state");function Mh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var mT=Object.getPrototypeOf;function kv(e){return!!e&&!!e[Bf]}function ey(e){var t;return e?hRe(e)||Array.isArray(e)||!!e[Xme]||!!((t=e.constructor)!=null&&t[Xme])||dB(e)||hB(e):!1}var dwt=Object.prototype.constructor.toString();function hRe(e){if(!e||typeof e!="object")return!1;const t=mT(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===dwt}function J5(e,t){fB(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function fB(e){const t=e[Bf];return t?t.type_:Array.isArray(e)?1:dB(e)?2:hB(e)?3:0}function VG(e,t){return fB(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pRe(e,t,n){const r=fB(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function hwt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function dB(e){return e instanceof Map}function hB(e){return e instanceof Set}function Rx(e){return e.copy_||e.base_}function HG(e,t){if(dB(e))return new Map(e);if(hB(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=hRe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Bf];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(mT(e),r)}else{const r=mT(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Ate(e,t=!1){return pB(e)||kv(e)||!ey(e)||(fB(e)>1&&(e.set=e.add=e.clear=e.delete=pwt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Ate(r,!0))),e}function pwt(){Mh(2)}function pB(e){return Object.isFrozen(e)}var mwt={};function Ww(e){const t=mwt[e];return t||Mh(0,e),t}var P3;function mRe(){return P3}function gwt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qme(e,t){t&&(Ww("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function qG(e){WG(e),e.drafts_.forEach(ywt),e.drafts_=null}function WG(e){e===P3&&(P3=e.parent_)}function Jme(e){return P3=gwt(P3,e)}function ywt(e){const t=e[Bf];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Zme(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Bf].modified_&&(qG(t),Mh(4)),ey(e)&&(e=Z5(t,e),t.parent_||e8(t,e)),t.patches_&&Ww("Patches").generateReplacementPatches_(n[Bf].base_,e,t.patches_,t.inversePatches_)):e=Z5(t,n,[]),qG(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dRe?e:void 0}function Z5(e,t,n){if(pB(t))return t;const r=t[Bf];if(!r)return J5(t,(i,s)=>ege(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return e8(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),J5(s,(a,u)=>ege(e,r,i,a,u,n,o)),e8(e,i,!1),n&&e.patches_&&Ww("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ege(e,t,n,r,i,s,o){if(kv(i)){const a=s&&t&&t.type_!==3&&!VG(t.assigned_,r)?s.concat(r):void 0,u=Z5(e,i,a);if(pRe(n,r,u),kv(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ey(i)&&!pB(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Z5(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&e8(e,i)}}function e8(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ate(t,n)}function vwt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:mRe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Ste;n&&(i=[r],s=O3);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var Ste={get(e,t){if(t===Bf)return e;const n=Rx(e);if(!VG(n,t))return bwt(e,n,t);const r=n[t];return e.finalized_||!ey(r)?r:r===Vz(e.base_,t)?(Hz(e),e.copy_[t]=YG(r,e)):r},has(e,t){return t in Rx(e)},ownKeys(e){return Reflect.ownKeys(Rx(e))},set(e,t,n){const r=gRe(Rx(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Vz(Rx(e),t),s=i==null?void 0:i[Bf];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(hwt(n,i)&&(n!==void 0||VG(e.base_,t)))return!0;Hz(e),GG(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Vz(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Hz(e),GG(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Rx(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Mh(11)},getPrototypeOf(e){return mT(e.base_)},setPrototypeOf(){Mh(12)}},O3={};J5(Ste,(e,t)=>{O3[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});O3.deleteProperty=function(e,t){return O3.set.call(this,e,t,void 0)};O3.set=function(e,t,n){return Ste.set.call(this,e[0],t,n,e[0])};function Vz(e,t){const n=e[Bf];return(n?Rx(n):e)[t]}function bwt(e,t,n){var i;const r=gRe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function gRe(e,t){if(!(t in e))return;let n=mT(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=mT(n)}}function GG(e){e.modified_||(e.modified_=!0,e.parent_&&GG(e.parent_))}function Hz(e){e.copy_||(e.copy_=HG(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var xwt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Mh(6),r!==void 0&&typeof r!="function"&&Mh(7);let i;if(ey(t)){const s=Jme(this),o=YG(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?qG(s):WG(s)}return Qme(s,r),Zme(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===dRe&&(i=void 0),this.autoFreeze_&&Ate(i,!0),r){const s=[],o=[];Ww("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Mh(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ey(e)||Mh(8),kv(e)&&(e=yRe(e));const t=Jme(this),n=YG(e,void 0);return n[Bf].isManual_=!0,WG(t),n}finishDraft(e,t){const n=e&&e[Bf];(!n||!n.isManual_)&&Mh(9);const{scope_:r}=n;return Qme(r,t),Zme(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ww("Patches").applyPatches_;return kv(e)?r(e,t):this.produce(e,i=>r(i,t))}};function YG(e,t){const n=dB(e)?Ww("MapSet").proxyMap_(e,t):hB(e)?Ww("MapSet").proxySet_(e,t):vwt(e,t);return(t?t.scope_:mRe()).drafts_.push(n),n}function yRe(e){return kv(e)||Mh(10,e),vRe(e)}function vRe(e){if(!ey(e)||pB(e))return e;const t=e[Bf];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=HG(e,t.scope_.immer_.useStrictShallowCopy_)}else n=HG(e,!0);return J5(n,(r,i)=>{pRe(n,r,vRe(i))}),t&&(t.finalized_=!1),n}var jf=new xwt,bRe=jf.produce;jf.produceWithPatches.bind(jf);jf.setAutoFreeze.bind(jf);jf.setUseStrictShallowCopy.bind(jf);jf.applyPatches.bind(jf);jf.createDraft.bind(jf);jf.finishDraft.bind(jf);function wwt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function _wt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ewt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var tge=e=>Array.isArray(e)?e:[e];function Cwt(e){const t=Array.isArray(e[0])?e[0]:e;return Ewt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Twt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Awt=class{constructor(e){this.value=e}deref(){return this.value}},Swt=typeof WeakRef<"u"?WeakRef:Awt,Dwt=0,nge=1;function h6(){return{s:Dwt,v:void 0,o:null,p:null}}function Dte(e,t={}){let n=h6();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=h6(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=h6(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===nge)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Swt(c):c}return l.s=nge,l.v=c,c}return o.clearCache=()=>{n=h6(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function xRe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),wwt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=Dte,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=tge(d),y=tge(p),v=Cwt(i),b=f(function(){return s++,l.apply(null,arguments)},...g),x=h(function(){o++;const C=Twt(v,arguments);return a=b.apply(null,C),a},...y);return Object.assign(x,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var wRe=xRe(Dte),Iwt=Object.assign((e,t=wRe)=>{_wt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Iwt});function _Re(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var kwt=_Re(),Rwt=_Re,Nwt=(...e)=>{const t=xRe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(kv(o)?yRe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Nwt(Dte);var Pwt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Q5:Q5.apply(null,arguments)};function gT(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Mc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>fwt(r)&&r.type===e,n}var ERe=class yI extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,yI.prototype)}static get[Symbol.species](){return yI}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new yI(...t[0].concat(this)):new yI(...t.concat(this))}};function rge(e){return ey(e)?bRe(e,()=>{}):e}function ige(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Mc(10));const r=n.insert(t,e);return e.set(t,r),r}function Owt(e){return typeof e=="boolean"}var Fwt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new ERe;return n&&(Owt(n)?o.push(kwt):o.push(Rwt(n.extraArgument))),o},$wt="RTK_autoBatch",CRe=e=>t=>{setTimeout(t,e)},Mwt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:CRe(10),Lwt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Mwt:e.type==="callback"?e.queueNotification:CRe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[$wt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Bwt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new ERe(e);return r&&i.push(Lwt(typeof r=="object"?r:void 0)),i};function jwt(e){const t=Fwt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(Tte(n))a=lwt(n);else throw new Error(Mc(1));let u;typeof r=="function"?u=r(t):u=t();let l=Q5;i&&(l=Pwt({trace:!1,...typeof i=="object"&&i}));const c=cwt(...u),f=Bwt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return fRe(a,s,h)}function TRe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Mc(28));if(a in t)throw new Error(Mc(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Uwt(e){return typeof e=="function"}function zwt(e,t){let[n,r,i]=TRe(t),s;if(Uwt(e))s=()=>rge(e());else{const a=rge(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(kv(c)){const h=f(c,u);return h===void 0?c:h}else{if(ey(c))return bRe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Mc(9))}return d}}return c},a)}return o.getInitialState=s,o}var Vwt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hwt=(e=21)=>{let t="",n=e;for(;n--;)t+=Vwt[Math.random()*64|0];return t},qwt=Symbol.for("rtk-slice-createasyncthunk");function Wwt(e,t){return`${e}/${t}`}function Gwt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[qwt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Mc(11));const a=(typeof i.reducers=="function"?i.reducers(Xwt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,x){const _=typeof b=="string"?b:b.type;if(!_)throw new Error(Mc(12));if(_ in l.sliceCaseReducersByType)throw new Error(Mc(13));return l.sliceCaseReducersByType[_]=x,c},addMatcher(b,x){return l.sliceMatchers.push({matcher:b,reducer:x}),c},exposeAction(b,x){return l.actionCreators[b]=x,c},exposeCaseReducer(b,x){return l.sliceCaseReducersByName[b]=x,c}};u.forEach(b=>{const x=a[b],_={reducerName:b,type:Wwt(s,b),createNotation:typeof i.reducers=="function"};Jwt(x)?e_t(_,x,c,t):Qwt(_,x,c)});function f(){const[b={},x=[],_=void 0]=typeof i.extraReducers=="function"?TRe(i.extraReducers):[i.extraReducers],C={...b,...l.sliceCaseReducersByType};return zwt(i.initialState,T=>{for(let S in C)T.addCase(S,C[S]);for(let S of l.sliceMatchers)T.addMatcher(S.matcher,S.reducer);for(let S of x)T.addMatcher(S.matcher,S.reducer);_&&T.addDefaultCase(_)})}const d=b=>b,h=new Map;let p;function m(b,x){return p||(p=f()),p(b,x)}function g(){return p||(p=f()),p.getInitialState()}function y(b,x=!1){function _(T){let S=T[b];return typeof S>"u"&&x&&(S=g()),S}function C(T=d){const S=ige(h,x,{insert:()=>new WeakMap});return ige(S,T,{insert:()=>{const k={};for(const[I,R]of Object.entries(i.selectors??{}))k[I]=Ywt(R,T,g,x);return k}})}return{reducerPath:b,getSelectors:C,get selectors(){return C(_)},selectSlice:_}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:x,..._}={}){const C=x??o;return b.inject({reducerPath:C,reducer:m},_),{...v,...y(C,!0)}}};return v}}function Ywt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Kwt=Gwt();function Xwt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Qwt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Zwt(r))throw new Error(Mc(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?gT(e,o):gT(e))}function Jwt(e){return e._reducerDefinitionType==="asyncThunk"}function Zwt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function e_t({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Mc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||p6,pending:a||p6,rejected:u||p6,settled:l||p6})}function p6(){}var t_t=(e,t)=>{if(typeof e!="function")throw new Error(Mc(32))},Ite="listenerMiddleware",n_t=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=gT(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Mc(21));return t_t(s),{predicate:i,type:t,effect:s}},r_t=Object.assign(e=>{const{type:t,predicate:n,effect:r}=n_t(e);return{id:Hwt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Mc(22))}}},{withTypes:()=>r_t}),i_t=Object.assign(gT(`${Ite}/add`),{withTypes:()=>i_t});gT(`${Ite}/removeAll`);var s_t=Object.assign(gT(`${Ite}/remove`),{withTypes:()=>s_t});function Mc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function dp(e){return e.components.flatMap(t=>typeof t=="string"?t:dp(t))}function ARe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:ARe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function SRe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+dp(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+dp(e).length-1}];r+=1}else{const o=SRe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function kte(e,t){const n=SRe(e,t,0);return typeof n=="number"?null:n}function DRe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=DRe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function o_t(e,t){const n=DRe(e,t,0);return n.found?n.distance:-1}function IRe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...IRe(i,`${t}-${s}`))}),n}function Rte(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Rte(n,`${t}-${r}`))}}async function a_t(e,t,n,r,i,s,o){const a=dp(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=Kwt({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:y,val:v}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[y]:v}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:y,questionKey:v,value:b,isChecked:x,choiceOptions:_}=m.payload,C=((g=p.matrixAnswers[y])==null?void 0:g[v])??"";let T="";x?C.length>0?T=[...C.split("|"),b].sort((S,k)=>_.map(I=>I.value).indexOf(S)-_.map(I=>I.value).indexOf(k)).join("|"):T=`${b}`:T=C.split("|").filter(S=>S!==b).join("|"),p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[v]:T}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:b,provenanceGraph:x,windowEvents:_,timedOut:C,incorrectAnswers:T,helpButtonClickedCount:S}=m;p.answers[g]={incorrectAnswers:T,answer:y,startTime:v,endTime:b,provenanceGraph:x,windowEvents:_,timedOut:C,helpButtonClickedCount:S}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:y,question:v}=m;p.answers[v].incorrectAnswers||(p.answers[v].incorrectAnswers={}),p.answers[v].incorrectAnswers[g]||(p.answers[v].incorrectAnswers[g]={id:g,value:[]}),p.answers[v].incorrectAnswers[g].value.push(y)}}});return{store:jwt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const kRe=N.createContext(null);function Ul(){return N.useContext(kRe).actions}const ef=cRe,ni=Kxt;function u_t(e){return ni(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const l_t=wRe(e=>e.sequence,e=>dp(e));function Nte(){return ni(l_t)}var RRe={exports:{}};function vI(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qz={exports:{}};const c_t={},f_t=Object.freeze(Object.defineProperty({__proto__:null,default:c_t},Symbol.toStringTag,{value:"Module"})),NRe=Aet(f_t);var sge;function Qr(){return sge||(sge=1,function(e,t){(function(n,r){e.exports=r()})(on,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof on<"u"&&on.crypto&&(s=on.crypto),!s&&typeof vI=="function")try{s=NRe}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(b){var x;return v.prototype=b,x=new v,v.prototype=null,x}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(v){var b=a(this);return v&&b.mixIn(v),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var b in v)v.hasOwnProperty(b)&&(this[b]=v[b]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(v,b){v=this.words=v||[],b!=i?this.sigBytes=b:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var b=this.words,x=v.words,_=this.sigBytes,C=v.sigBytes;if(this.clamp(),_%4)for(var T=0;T<C;T++){var S=x[T>>>2]>>>24-T%4*8&255;b[_+T>>>2]|=S<<24-(_+T)%4*8}else for(var k=0;k<C;k+=4)b[_+k>>>2]=x[k>>>2];return this.sigBytes+=C,this},clamp:function(){var v=this.words,b=this.sigBytes;v[b>>>2]&=4294967295<<32-b%4*8,v.length=r.ceil(b/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var b=[],x=0;x<v;x+=4)b.push(o());return new f.init(b,v)}}),d=u.enc={},h=d.Hex={stringify:function(v){for(var b=v.words,x=v.sigBytes,_=[],C=0;C<x;C++){var T=b[C>>>2]>>>24-C%4*8&255;_.push((T>>>4).toString(16)),_.push((T&15).toString(16))}return _.join("")},parse:function(v){for(var b=v.length,x=[],_=0;_<b;_+=2)x[_>>>3]|=parseInt(v.substr(_,2),16)<<24-_%8*4;return new f.init(x,b/2)}},p=d.Latin1={stringify:function(v){for(var b=v.words,x=v.sigBytes,_=[],C=0;C<x;C++){var T=b[C>>>2]>>>24-C%4*8&255;_.push(String.fromCharCode(T))}return _.join("")},parse:function(v){for(var b=v.length,x=[],_=0;_<b;_++)x[_>>>2]|=(v.charCodeAt(_)&255)<<24-_%4*8;return new f.init(x,b)}},m=d.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var b,x=this._data,_=x.words,C=x.sigBytes,T=this.blockSize,S=T*4,k=C/S;v?k=r.ceil(k):k=r.max((k|0)-this._minBufferSize,0);var I=k*T,R=r.min(I*4,C);if(I){for(var F=0;F<I;F+=T)this._doProcessBlock(_,F);b=_.splice(0,I),x.sigBytes-=R}return new f.init(b,R)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(v){return function(b,x){return new v.init(x).finalize(b)}},_createHmacHelper:function(v){return function(b,x){return new y.HMAC.init(v,x).finalize(b)}}});var y=u.algo={};return u}(Math);return n})}(qz)),qz.exports}var Wz={exports:{}},oge;function mB(){return oge||(oge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(Wz)),Wz.exports}var Gz={exports:{}},age;function d_t(){return age||(age=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(Gz)),Gz.exports}var Yz={exports:{}},uge;function h_t(){return uge||(uge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(Yz)),Yz.exports}var Kz={exports:{}},lge;function H_(){return lge||(lge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,y=p<<16|m<<8|g,v=0;v<4&&h+v*.75<c;v++)d.push(f.charAt(y>>>6*(3-v)&63));var b=f.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(Kz)),Kz.exports}var Xz={exports:{}},cge;function p_t(){return cge||(cge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,v=m<<16|g<<8|y,b=0;b<4&&p+b*.75<f;b++)h.push(d.charAt(v>>>6*(3-b)&63));var x=d.charAt(64);if(x)for(;h.length%4;)h.push(x);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(Xz)),Xz.exports}var Qz={exports:{}},fge;function q_(){return fge||(fge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var y=0;y<16;y++){var v=g+y,b=m[v];m[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var x=this._hash.words,_=m[g+0],C=m[g+1],T=m[g+2],S=m[g+3],k=m[g+4],I=m[g+5],R=m[g+6],F=m[g+7],O=m[g+8],B=m[g+9],H=m[g+10],U=m[g+11],G=m[g+12],Y=m[g+13],Q=m[g+14],M=m[g+15],j=x[0],W=x[1],L=x[2],q=x[3];j=f(j,W,L,q,_,7,l[0]),q=f(q,j,W,L,C,12,l[1]),L=f(L,q,j,W,T,17,l[2]),W=f(W,L,q,j,S,22,l[3]),j=f(j,W,L,q,k,7,l[4]),q=f(q,j,W,L,I,12,l[5]),L=f(L,q,j,W,R,17,l[6]),W=f(W,L,q,j,F,22,l[7]),j=f(j,W,L,q,O,7,l[8]),q=f(q,j,W,L,B,12,l[9]),L=f(L,q,j,W,H,17,l[10]),W=f(W,L,q,j,U,22,l[11]),j=f(j,W,L,q,G,7,l[12]),q=f(q,j,W,L,Y,12,l[13]),L=f(L,q,j,W,Q,17,l[14]),W=f(W,L,q,j,M,22,l[15]),j=d(j,W,L,q,C,5,l[16]),q=d(q,j,W,L,R,9,l[17]),L=d(L,q,j,W,U,14,l[18]),W=d(W,L,q,j,_,20,l[19]),j=d(j,W,L,q,I,5,l[20]),q=d(q,j,W,L,H,9,l[21]),L=d(L,q,j,W,M,14,l[22]),W=d(W,L,q,j,k,20,l[23]),j=d(j,W,L,q,B,5,l[24]),q=d(q,j,W,L,Q,9,l[25]),L=d(L,q,j,W,S,14,l[26]),W=d(W,L,q,j,O,20,l[27]),j=d(j,W,L,q,Y,5,l[28]),q=d(q,j,W,L,T,9,l[29]),L=d(L,q,j,W,F,14,l[30]),W=d(W,L,q,j,G,20,l[31]),j=h(j,W,L,q,I,4,l[32]),q=h(q,j,W,L,O,11,l[33]),L=h(L,q,j,W,U,16,l[34]),W=h(W,L,q,j,Q,23,l[35]),j=h(j,W,L,q,C,4,l[36]),q=h(q,j,W,L,k,11,l[37]),L=h(L,q,j,W,F,16,l[38]),W=h(W,L,q,j,H,23,l[39]),j=h(j,W,L,q,Y,4,l[40]),q=h(q,j,W,L,_,11,l[41]),L=h(L,q,j,W,S,16,l[42]),W=h(W,L,q,j,R,23,l[43]),j=h(j,W,L,q,B,4,l[44]),q=h(q,j,W,L,G,11,l[45]),L=h(L,q,j,W,M,16,l[46]),W=h(W,L,q,j,T,23,l[47]),j=p(j,W,L,q,_,6,l[48]),q=p(q,j,W,L,F,10,l[49]),L=p(L,q,j,W,Q,15,l[50]),W=p(W,L,q,j,I,21,l[51]),j=p(j,W,L,q,G,6,l[52]),q=p(q,j,W,L,S,10,l[53]),L=p(L,q,j,W,H,15,l[54]),W=p(W,L,q,j,C,21,l[55]),j=p(j,W,L,q,O,6,l[56]),q=p(q,j,W,L,M,10,l[57]),L=p(L,q,j,W,R,15,l[58]),W=p(W,L,q,j,Y,21,l[59]),j=p(j,W,L,q,k,6,l[60]),q=p(q,j,W,L,U,10,l[61]),L=p(L,q,j,W,T,15,l[62]),W=p(W,L,q,j,B,21,l[63]),x[0]=x[0]+j|0,x[1]=x[1]+W|0,x[2]=x[2]+L|0,x[3]=x[3]+q|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,v=m.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=r.floor(y/4294967296),x=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,C=_.words,T=0;T<4;T++){var S=C[T];C[T]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}return _},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,y,v,b,x,_){var C=m+(g&y|~g&v)+b+_;return(C<<x|C>>>32-x)+g}function d(m,g,y,v,b,x,_){var C=m+(g&v|y&~v)+b+_;return(C<<x|C>>>32-x)+g}function h(m,g,y,v,b,x,_){var C=m+(g^y^v)+b+_;return(C<<x|C>>>32-x)+g}function p(m,g,y,v,b,x,_){var C=m+(y^(g|~v))+b+_;return(C<<x|C>>>32-x)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(Qz)),Qz.exports}var Jz={exports:{}},dge;function PRe(){return dge||(dge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)u[v]=c[f+v]|0;else{var b=u[v-3]^u[v-8]^u[v-14]^u[v-16];u[v]=b<<1|b>>>31}var x=(h<<5|h>>>27)+y+u[v];v<20?x+=(p&m|~p&g)+1518500249:v<40?x+=(p^m^g)+1859775393:v<60?x+=(p&m|p&g|m&g)-1894007588:x+=(p^m^g)-899497514,y=g,g=m,m=p<<30|p>>>2,p=h,h=x}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(Jz)),Jz.exports}var Zz={exports:{}},hge;function Pte(){return hge||(hge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(y){for(var v=r.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],y=m[1],v=m[2],b=m[3],x=m[4],_=m[5],C=m[6],T=m[7],S=0;S<64;S++){if(S<16)f[S]=h[p+S]|0;else{var k=f[S-15],I=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,R=f[S-2],F=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;f[S]=I+f[S-7]+F+f[S-16]}var O=x&_^~x&C,B=g&y^g&v^y&v,H=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),U=(x<<26|x>>>6)^(x<<21|x>>>11)^(x<<7|x>>>25),G=T+U+O+c[S]+f[S],Y=H+B;T=C,C=_,_=x,x=b+G|0,b=v,v=y,y=g,g=G+Y|0}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+v|0,m[3]=m[3]+b|0,m[4]=m[4]+x|0,m[5]=m[5]+_|0,m[6]=m[6]+C|0,m[7]=m[7]+T|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(Zz)),Zz.exports}var eV={exports:{}},pge;function m_t(){return pge||(pge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Pte())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(eV)),eV.exports}var tV={exports:{}},mge;function ORe(){return mge||(mge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),mB())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],x=g[3],_=g[4],C=g[5],T=g[6],S=g[7],k=y.high,I=y.low,R=v.high,F=v.low,O=b.high,B=b.low,H=x.high,U=x.low,G=_.high,Y=_.low,Q=C.high,M=C.low,j=T.high,W=T.low,L=S.high,q=S.low,J=k,re=I,ve=R,pe=F,Ae=O,ke=B,it=H,Re=U,ut=G,Xe=Y,Tt=Q,gt=M,Ie=j,Ve=W,ft=L,_t=q,$t=0;$t<80;$t++){var st,X,de=d[$t];if($t<16)X=de.high=p[m+$t*2]|0,st=de.low=p[m+$t*2+1]|0;else{var we=d[$t-15],ae=we.high,he=we.low,Ee=(ae>>>1|he<<31)^(ae>>>8|he<<24)^ae>>>7,Me=(he>>>1|ae<<31)^(he>>>8|ae<<24)^(he>>>7|ae<<25),Be=d[$t-2],lt=Be.high,Ze=Be.low,Xt=(lt>>>19|Ze<<13)^(lt<<3|Ze>>>29)^lt>>>6,fn=(Ze>>>19|lt<<13)^(Ze<<3|lt>>>29)^(Ze>>>6|lt<<26),Wt=d[$t-7],an=Wt.high,Cn=Wt.low,$n=d[$t-16],ki=$n.high,hi=$n.low;st=Me+Cn,X=Ee+an+(st>>>0<Me>>>0?1:0),st=st+fn,X=X+Xt+(st>>>0<fn>>>0?1:0),st=st+hi,X=X+ki+(st>>>0<hi>>>0?1:0),de.high=X,de.low=st}var Li=ut&Tt^~ut&Ie,Ds=Xe&gt^~Xe&Ve,Br=J&ve^J&Ae^ve&Ae,cs=re&pe^re&ke^pe&ke,cl=(J>>>28|re<<4)^(J<<30|re>>>2)^(J<<25|re>>>7),$o=(re>>>28|J<<4)^(re<<30|J>>>2)^(re<<25|J>>>7),Wa=(ut>>>14|Xe<<18)^(ut>>>18|Xe<<14)^(ut<<23|Xe>>>9),Nr=(Xe>>>14|ut<<18)^(Xe>>>18|ut<<14)^(Xe<<23|ut>>>9),Ri=f[$t],pi=Ri.high,Hs=Ri.low,ri=_t+Nr,Ni=ft+Wa+(ri>>>0<_t>>>0?1:0),ri=ri+Ds,Ni=Ni+Li+(ri>>>0<Ds>>>0?1:0),ri=ri+Hs,Ni=Ni+pi+(ri>>>0<Hs>>>0?1:0),ri=ri+st,Ni=Ni+X+(ri>>>0<st>>>0?1:0),be=$o+cs,ce=cl+Br+(be>>>0<$o>>>0?1:0);ft=Ie,_t=Ve,Ie=Tt,Ve=gt,Tt=ut,gt=Xe,Xe=Re+ri|0,ut=it+Ni+(Xe>>>0<Re>>>0?1:0)|0,it=Ae,Re=ke,Ae=ve,ke=pe,ve=J,pe=re,re=ri+be|0,J=Ni+ce+(re>>>0<ri>>>0?1:0)|0}I=y.low=I+re,y.high=k+J+(I>>>0<re>>>0?1:0),F=v.low=F+pe,v.high=R+ve+(F>>>0<pe>>>0?1:0),B=b.low=B+ke,b.high=O+Ae+(B>>>0<ke>>>0?1:0),U=x.low=U+Re,x.high=H+it+(U>>>0<Re>>>0?1:0),Y=_.low=Y+Xe,_.high=G+ut+(Y>>>0<Xe>>>0?1:0),M=C.low=M+gt,C.high=Q+Tt+(M>>>0<gt>>>0?1:0),W=T.low=W+Ve,T.high=j+Ie+(W>>>0<Ve>>>0?1:0),q=S.low=q+_t,S.high=L+ft+(q>>>0<_t>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,y=p.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(y+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(tV)),tV.exports}var nV={exports:{}},gge;function g_t(){return gge||(gge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),mB(),ORe())})(on,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(nV)),nV.exports}var rV={exports:{}},yge;function y_t(){return yge||(yge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),mB())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,y=0,v=0;v<24;v++){f[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,x=(2*g+3*y)%5;g=b,y=x}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,C=0;C<24;C++){for(var T=0,S=0,k=0;k<7;k++){if(_&1){var I=(1<<k)-1;I<32?S^=1<<I:T^=1<<I-32}_&128?_=_<<1^113:_<<=1}h[C]=l.create(T,S)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var v=this._state,b=this.blockSize/2,x=0;x<b;x++){var _=g[y+2*x],C=g[y+2*x+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var T=v[x];T.high^=C,T.low^=_}for(var S=0;S<24;S++){for(var k=0;k<5;k++){for(var I=0,R=0,F=0;F<5;F++){var T=v[k+5*F];I^=T.high,R^=T.low}var O=p[k];O.high=I,O.low=R}for(var k=0;k<5;k++)for(var B=p[(k+4)%5],H=p[(k+1)%5],U=H.high,G=H.low,I=B.high^(U<<1|G>>>31),R=B.low^(G<<1|U>>>31),F=0;F<5;F++){var T=v[k+5*F];T.high^=I,T.low^=R}for(var Y=1;Y<25;Y++){var I,R,T=v[Y],Q=T.high,M=T.low,j=f[Y];j<32?(I=Q<<j|M>>>32-j,R=M<<j|Q>>>32-j):(I=M<<j-32|Q>>>64-j,R=Q<<j-32|M>>>64-j);var W=p[d[Y]];W.high=I,W.low=R}var L=p[0],q=v[0];L.high=q.high,L.low=q.low;for(var k=0;k<5;k++)for(var F=0;F<5;F++){var Y=k+5*F,T=v[Y],J=p[Y],re=p[(k+1)%5+5*F],ve=p[(k+2)%5+5*F];T.high=J.high^~re.high&ve.high,T.low=J.low^~re.low&ve.low}var T=v[0],pe=h[S];T.high^=pe.high,T.low^=pe.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var v=g.sigBytes*8,b=this.blockSize*32;y[v>>>5]|=1<<24-v%32,y[(r.ceil((v+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var x=this._state,_=this.cfg.outputLength/8,C=_/8,T=[],S=0;S<C;S++){var k=x[S],I=k.high,R=k.low;I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,T.push(R),T.push(I)}return new o.init(T,_)},clone:function(){for(var g=a.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(rV)),rV.exports}var iV={exports:{}},vge;function v_t(){return vge||(vge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,T){for(var S=0;S<16;S++){var k=T+S,I=C[k];C[k]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}var R=this._hash.words,F=h.words,O=p.words,B=l.words,H=c.words,U=f.words,G=d.words,Y,Q,M,j,W,L,q,J,re,ve;L=Y=R[0],q=Q=R[1],J=M=R[2],re=j=R[3],ve=W=R[4];for(var pe,S=0;S<80;S+=1)pe=Y+C[T+B[S]]|0,S<16?pe+=g(Q,M,j)+F[0]:S<32?pe+=y(Q,M,j)+F[1]:S<48?pe+=v(Q,M,j)+F[2]:S<64?pe+=b(Q,M,j)+F[3]:pe+=x(Q,M,j)+F[4],pe=pe|0,pe=_(pe,U[S]),pe=pe+W|0,Y=W,W=j,j=_(M,10),M=Q,Q=pe,pe=L+C[T+H[S]]|0,S<16?pe+=x(q,J,re)+O[0]:S<32?pe+=b(q,J,re)+O[1]:S<48?pe+=v(q,J,re)+O[2]:S<64?pe+=y(q,J,re)+O[3]:pe+=g(q,J,re)+O[4],pe=pe|0,pe=_(pe,G[S]),pe=pe+ve|0,L=ve,ve=re,re=_(J,10),J=q,q=pe;pe=R[1]+M+re|0,R[1]=R[2]+j+ve|0,R[2]=R[3]+W+L|0,R[3]=R[4]+Y+q|0,R[4]=R[0]+Q+J|0,R[0]=pe},_doFinalize:function(){var C=this._data,T=C.words,S=this._nDataBytes*8,k=C.sigBytes*8;T[k>>>5]|=128<<24-k%32,T[(k+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,C.sigBytes=(T.length+1)*4,this._process();for(var I=this._hash,R=I.words,F=0;F<5;F++){var O=R[F];R[F]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return I},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});function g(C,T,S){return C^T^S}function y(C,T,S){return C&T|~C&S}function v(C,T,S){return(C|~T)^S}function b(C,T,S){return C&S|T&~S}function x(C,T,S){return C^(T|~S)}function _(C,T){return C<<T|C>>>32-T}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(iV)),iV.exports}var sV={exports:{}},bge;function Ote(){return bge||(bge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,y=0;y<f;y++)m[y]^=1549556828,g[y]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(sV)),sV.exports}var oV={exports:{}},xge;function b_t(){return xge||(xge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Pte(),Ote())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),y=m.words,v=g.words,b=h.keySize,x=h.iterations;y.length<b;){var _=p.update(d).finalize(g);p.reset();for(var C=_.words,T=C.length,S=_,k=1;k<x;k++){S=p.finalize(S),p.reset();for(var I=S.words,R=0;R<T;R++)C[R]^=I[R]}m.concat(_),v[0]++}return m.sigBytes=b*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(oV)),oV.exports}var aV={exports:{}},wge;function Db(){return wge||(wge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),PRe(),Ote())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,y=h.keySize,v=h.iterations;g.length<y;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var b=1;b<v;b++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=y*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(aV)),aV.exports}var uV={exports:{}},_ge;function Va(){return _ge||(_ge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Db())})(on,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(I,R){return this.create(this._ENC_XFORM_MODE,I,R)},createDecryptor:function(I,R){return this.create(this._DEC_XFORM_MODE,I,R)},init:function(I,R,F){this.cfg=this.cfg.extend(F),this._xformMode=I,this._key=R,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){I&&this._append(I);var R=this._doFinalize();return R},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(R){return typeof R=="string"?k:C}return function(R){return{encrypt:function(F,O,B){return I(O).encrypt(R,F,O,B)},decrypt:function(F,O,B){return I(O).decrypt(R,F,O,B)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var I=this._process(!0);return I},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(I,R){return this.Encryptor.create(I,R)},createDecryptor:function(I,R){return this.Decryptor.create(I,R)},init:function(I,R){this._cipher=I,this._iv=R}}),g=p.CBC=function(){var I=m.extend();I.Encryptor=I.extend({processBlock:function(F,O){var B=this._cipher,H=B.blockSize;R.call(this,F,O,H),B.encryptBlock(F,O),this._prevBlock=F.slice(O,O+H)}}),I.Decryptor=I.extend({processBlock:function(F,O){var B=this._cipher,H=B.blockSize,U=F.slice(O,O+H);B.decryptBlock(F,O),R.call(this,F,O,H),this._prevBlock=U}});function R(F,O,B){var H,U=this._iv;U?(H=U,this._iv=r):H=this._prevBlock;for(var G=0;G<B;G++)F[O+G]^=H[G]}return I}(),y=i.pad={},v=y.Pkcs7={pad:function(I,R){for(var F=R*4,O=F-I.sigBytes%F,B=O<<24|O<<16|O<<8|O,H=[],U=0;U<O;U+=4)H.push(B);var G=a.create(H,O);I.concat(G)},unpad:function(I){var R=I.words[I.sigBytes-1>>>2]&255;I.sigBytes-=R}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var I;h.reset.call(this);var R=this.cfg,F=R.iv,O=R.mode;this._xformMode==this._ENC_XFORM_MODE?I=O.createEncryptor:(I=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,F&&F.words):(this._mode=I.call(O,this,F&&F.words),this._mode.__creator=I)},_doProcessBlock:function(I,R){this._mode.processBlock(I,R)},_doFinalize:function(){var I,R=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(R.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),R.unpad(I)),I},blockSize:128/32});var b=s.CipherParams=o.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),x=i.format={},_=x.OpenSSL={stringify:function(I){var R,F=I.ciphertext,O=I.salt;return O?R=a.create([1398893684,1701076831]).concat(O).concat(F):R=F,R.toString(c)},parse:function(I){var R,F=c.parse(I),O=F.words;return O[0]==1398893684&&O[1]==1701076831&&(R=a.create(O.slice(2,4)),O.splice(0,4),F.sigBytes-=16),b.create({ciphertext:F,salt:R})}},C=s.SerializableCipher=o.extend({cfg:o.extend({format:_}),encrypt:function(I,R,F,O){O=this.cfg.extend(O);var B=I.createEncryptor(F,O),H=B.finalize(R),U=B.cfg;return b.create({ciphertext:H,key:F,iv:U.iv,algorithm:I,mode:U.mode,padding:U.padding,blockSize:I.blockSize,formatter:O.format})},decrypt:function(I,R,F,O){O=this.cfg.extend(O),R=this._parse(R,O.format);var B=I.createDecryptor(F,O).finalize(R.ciphertext);return B},_parse:function(I,R){return typeof I=="string"?R.parse(I,this):I}}),T=i.kdf={},S=T.OpenSSL={execute:function(I,R,F,O,B){if(O||(O=a.random(64/8)),B)var H=d.create({keySize:R+F,hasher:B}).compute(I,O);else var H=d.create({keySize:R+F}).compute(I,O);var U=a.create(H.words.slice(R),F*4);return H.sigBytes=R*4,b.create({key:H,iv:U,salt:O})}},k=s.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:S}),encrypt:function(I,R,F,O){O=this.cfg.extend(O);var B=O.kdf.execute(F,I.keySize,I.ivSize,O.salt,O.hasher);O.iv=B.iv;var H=C.encrypt.call(this,I,R,B.key,O);return H.mixIn(B),H},decrypt:function(I,R,F,O){O=this.cfg.extend(O),R=this._parse(R,O.format);var B=O.kdf.execute(F,I.keySize,I.ivSize,R.salt,O.hasher);O.iv=B.iv;var H=C.decrypt.call(this,I,R,B.key,O);return H}})}()})}(uV)),uV.exports}var lV={exports:{}},Ege;function x_t(){return Ege||(Ege=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(lV)),lV.exports}var cV={exports:{}},Cge;function w_t(){return Cge||(Cge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(cV)),cV.exports}var fV={exports:{}},Tge;function __t(){return Tge||(Tge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(fV)),fV.exports}var dV={exports:{}},Age;function E_t(){return Age||(Age=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(dV)),dV.exports}var hV={exports:{}},Sge;function C_t(){return Sge||(Sge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(hV)),hV.exports}var pV={exports:{}},Dge;function T_t(){return Dge||(Dge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(pV)),pV.exports}var mV={exports:{}},Ige;function A_t(){return Ige||(Ige=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(mV)),mV.exports}var gV={exports:{}},kge;function S_t(){return kge||(kge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(gV)),gV.exports}var yV={exports:{}},Rge;function D_t(){return Rge||(Rge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(yV)),yV.exports}var vV={exports:{}},Nge;function I_t(){return Nge||(Nge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(vV)),vV.exports}var bV={exports:{}},Pge;function k_t(){return Pge||(Pge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Va())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(bV)),bV.exports}var xV={exports:{}},Oge;function R_t(){return Oge||(Oge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),H_(),q_(),Db(),Va())})(on,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var b=[],x=0;x<256;x++)x<128?b[x]=x<<1:b[x]=x<<1^283;for(var _=0,C=0,x=0;x<256;x++){var T=C^C<<1^C<<2^C<<3^C<<4;T=T>>>8^T&255^99,a[_]=T,u[T]=_;var S=b[_],k=b[S],I=b[k],R=b[T]*257^T*16843008;l[_]=R<<24|R>>>8,c[_]=R<<16|R>>>16,f[_]=R<<8|R>>>24,d[_]=R;var R=I*16843009^k*65537^S*257^_*16843008;h[T]=R<<24|R>>>8,p[T]=R<<16|R>>>16,m[T]=R<<8|R>>>24,g[T]=R,_?(_=S^b[b[b[I^S]]],C^=b[b[C]]):_=C=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=s.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var x=this._keyPriorReset=this._key,_=x.words,C=x.sigBytes/4,T=this._nRounds=C+6,S=(T+1)*4,k=this._keySchedule=[],I=0;I<S;I++)I<C?k[I]=_[I]:(b=k[I-1],I%C?C>6&&I%C==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=y[I/C|0]<<24),k[I]=k[I-C]^b);for(var R=this._invKeySchedule=[],F=0;F<S;F++){var I=S-F;if(F%4)var b=k[I];else var b=k[I-4];F<4||I<=4?R[F]=b:R[F]=h[a[b>>>24]]^p[a[b>>>16&255]]^m[a[b>>>8&255]]^g[a[b&255]]}}},encryptBlock:function(b,x){this._doCryptBlock(b,x,this._keySchedule,l,c,f,d,a)},decryptBlock:function(b,x){var _=b[x+1];b[x+1]=b[x+3],b[x+3]=_,this._doCryptBlock(b,x,this._invKeySchedule,h,p,m,g,u);var _=b[x+1];b[x+1]=b[x+3],b[x+3]=_},_doCryptBlock:function(b,x,_,C,T,S,k,I){for(var R=this._nRounds,F=b[x]^_[0],O=b[x+1]^_[1],B=b[x+2]^_[2],H=b[x+3]^_[3],U=4,G=1;G<R;G++){var Y=C[F>>>24]^T[O>>>16&255]^S[B>>>8&255]^k[H&255]^_[U++],Q=C[O>>>24]^T[B>>>16&255]^S[H>>>8&255]^k[F&255]^_[U++],M=C[B>>>24]^T[H>>>16&255]^S[F>>>8&255]^k[O&255]^_[U++],j=C[H>>>24]^T[F>>>16&255]^S[O>>>8&255]^k[B&255]^_[U++];F=Y,O=Q,B=M,H=j}var Y=(I[F>>>24]<<24|I[O>>>16&255]<<16|I[B>>>8&255]<<8|I[H&255])^_[U++],Q=(I[O>>>24]<<24|I[B>>>16&255]<<16|I[H>>>8&255]<<8|I[F&255])^_[U++],M=(I[B>>>24]<<24|I[H>>>16&255]<<16|I[F>>>8&255]<<8|I[O&255])^_[U++],j=(I[H>>>24]<<24|I[F>>>16&255]<<16|I[O>>>8&255]<<8|I[B&255])^_[U++];b[x]=Y,b[x+1]=Q,b[x+2]=M,b[x+3]=j},keySize:256/32});r.AES=s._createHelper(v)}(),n.AES})}(xV)),xV.exports}var wV={exports:{}},Fge;function N_t(){return Fge||(Fge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),H_(),q_(),Db(),Va())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var y=this._key,v=y.words,b=[],x=0;x<56;x++){var _=u[x]-1;b[x]=v[_>>>5]>>>31-_%32&1}for(var C=this._subKeys=[],T=0;T<16;T++){for(var S=C[T]=[],k=c[T],x=0;x<24;x++)S[x/6|0]|=b[(l[x]-1+k)%28]<<31-x%6,S[4+(x/6|0)]|=b[28+(l[x+24]-1+k)%28]<<31-x%6;S[0]=S[0]<<1|S[0]>>>31;for(var x=1;x<7;x++)S[x]=S[x]>>>(x-1)*4+3;S[7]=S[7]<<5|S[7]>>>27}for(var I=this._invSubKeys=[],x=0;x<16;x++)I[x]=C[15-x]},encryptBlock:function(y,v){this._doCryptBlock(y,v,this._subKeys)},decryptBlock:function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},_doCryptBlock:function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var x=0;x<16;x++){for(var _=b[x],C=this._lBlock,T=this._rBlock,S=0,k=0;k<8;k++)S|=f[k][((T^_[k])&d[k])>>>0];this._lBlock=T,this._rBlock=C^S}var I=this._lBlock;this._lBlock=this._rBlock,this._rBlock=I,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}function m(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),x=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=h.createEncryptor(s.create(b)),this._des2=h.createEncryptor(s.create(x)),this._des3=h.createEncryptor(s.create(_))},encryptBlock:function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},decryptBlock:function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(wV)),wV.exports}var _V={exports:{}},$ge;function P_t(){return $ge||($ge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),H_(),q_(),Db(),Va())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,y=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+y)%256;var v=h[p];h[p]=h[m],h[m]=v}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(_V)),_V.exports}var EV={exports:{}},Mge;function O_t(){return Mge||(Mge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),H_(),q_(),Db(),Va())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var y=h.words,v=y[0],b=y[1],x=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,C=x>>>16|_&4294901760,T=_<<16|x&65535;g[0]^=x,g[1]^=C,g[2]^=_,g[3]^=T,g[4]^=x,g[5]^=C,g[6]^=_,g[7]^=T;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(EV)),EV.exports}var CV={exports:{}},Lge;function F_t(){return Lge||(Lge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),H_(),q_(),Db(),Va())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var y=h.words,v=y[0],b=y[1],x=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,C=x>>>16|_&4294901760,T=_<<16|x&65535;m[0]^=x,m[1]^=C,m[2]^=_,m[3]^=T,m[4]^=x,m[5]^=C,m[6]^=_,m[7]^=T;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(CV)),CV.exports}var TV={exports:{}},Bge;function $_t(){return Bge||(Bge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),H_(),q_(),Db(),Va())})(on,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,y){let v=y>>24&255,b=y>>16&255,x=y>>8&255,_=y&255,C=g.sbox[0][v]+g.sbox[1][b];return C=C^g.sbox[2][x],C=C+g.sbox[3][_],C}function d(g,y,v){let b=y,x=v,_;for(let C=0;C<a;++C)b=b^g.pbox[C],x=f(g,b)^x,_=b,b=x,x=_;return _=b,b=x,x=_,x=x^g.pbox[a],b=b^g.pbox[a+1],{left:b,right:x}}function h(g,y,v){let b=y,x=v,_;for(let C=a+1;C>1;--C)b=b^g.pbox[C],x=f(g,b)^x,_=b,b=x,x=_;return _=b,b=x,x=_,x=x^g.pbox[1],b=b^g.pbox[0],{left:b,right:x}}function p(g,y,v){for(let T=0;T<4;T++){g.sbox[T]=[];for(let S=0;S<256;S++)g.sbox[T][S]=l[T][S]}let b=0;for(let T=0;T<a+2;T++)g.pbox[T]=u[T]^y[b],b++,b>=v&&(b=0);let x=0,_=0,C=0;for(let T=0;T<a+2;T+=2)C=d(g,x,_),x=C.left,_=C.right,g.pbox[T]=x,g.pbox[T+1]=_;for(let T=0;T<4;T++)for(let S=0;S<256;S+=2)C=d(g,x,_),x=C.left,_=C.right,g.sbox[T][S]=x,g.sbox[T][S+1]=_;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;p(c,y,v)}},encryptBlock:function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},decryptBlock:function(g,y){var v=h(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(TV)),TV.exports}(function(e,t){(function(n,r,i){e.exports=r(Qr(),mB(),d_t(),h_t(),H_(),p_t(),q_(),PRe(),Pte(),m_t(),ORe(),g_t(),y_t(),v_t(),Ote(),b_t(),Db(),Va(),x_t(),w_t(),__t(),E_t(),C_t(),T_t(),A_t(),S_t(),D_t(),I_t(),k_t(),R_t(),N_t(),P_t(),O_t(),F_t(),$_t())})(on,function(n){return n})})(RRe);var KG=RRe.exports;function Lh(e){const t=KG.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function M_t(e){const t=KG.AES.decrypt(atob(e),"notSecret").toString(KG.enc.Utf8);return parseInt(t,10)}function W_(){const{studyId:e}=V0();return`${e}`}function Zd(){const{index:e}=V0();return e===void 0?0:e.startsWith("reviewer-")?e:M_t(e)}function eh(){const e=Zd(),t=Nte();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var t8={exports:{}};t8.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",x="[object RegExp]",_="[object Set]",C="[object String]",T="[object Undefined]",S="[object WeakMap]",k="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",F="[object Float64Array]",O="[object Int8Array]",B="[object Int16Array]",H="[object Int32Array]",U="[object Uint8Array]",G="[object Uint8ClampedArray]",Y="[object Uint16Array]",Q="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,L={};L[R]=L[F]=L[O]=L[B]=L[H]=L[U]=L[G]=L[Y]=L[Q]=!0,L[a]=L[u]=L[k]=L[c]=L[I]=L[f]=L[d]=L[h]=L[m]=L[g]=L[v]=L[x]=L[_]=L[C]=L[S]=!1;var q=typeof on=="object"&&on&&on.Object===Object&&on,J=typeof self=="object"&&self&&self.Object===Object&&self,re=q||J||Function("return this")(),ve=t&&!t.nodeType&&t,pe=ve&&!0&&e&&!e.nodeType&&e,Ae=pe&&pe.exports===ve,ke=Ae&&q.process,it=function(){try{var fe=pe&&pe.require&&pe.require("util").types;return fe||ke&&ke.binding&&ke.binding("util")}catch{}}(),Re=it&&it.isTypedArray;function ut(fe,Ce,He){switch(He.length){case 0:return fe.call(Ce);case 1:return fe.call(Ce,He[0]);case 2:return fe.call(Ce,He[0],He[1]);case 3:return fe.call(Ce,He[0],He[1],He[2])}return fe.apply(Ce,He)}function Xe(fe,Ce){for(var He=-1,Qt=Array(fe);++He<fe;)Qt[He]=Ce(He);return Qt}function Tt(fe){return function(Ce){return fe(Ce)}}function gt(fe,Ce){return fe==null?void 0:fe[Ce]}function Ie(fe,Ce){return function(He){return fe(Ce(He))}}var Ve=Array.prototype,ft=Function.prototype,_t=Object.prototype,$t=re["__core-js_shared__"],st=ft.toString,X=_t.hasOwnProperty,de=function(){var fe=/[^.]+$/.exec($t&&$t.keys&&$t.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""}(),we=_t.toString,ae=st.call(Object),he=RegExp("^"+st.call(X).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=Ae?re.Buffer:void 0,Me=re.Symbol,Be=re.Uint8Array;Ee&&Ee.allocUnsafe;var lt=Ie(Object.getPrototypeOf,Object),Ze=Object.create,Xt=_t.propertyIsEnumerable,fn=Ve.splice,Wt=Me?Me.toStringTag:void 0,an=function(){try{var fe=yt(Object,"defineProperty");return fe({},"",{}),fe}catch{}}(),Cn=Ee?Ee.isBuffer:void 0,$n=Math.max,ki=Date.now,hi=yt(re,"Map"),Li=yt(Object,"create"),Ds=function(){function fe(){}return function(Ce){if(!lh(Ce))return{};if(Ze)return Ze(Ce);fe.prototype=Ce;var He=new fe;return fe.prototype=void 0,He}}();function Br(fe){var Ce=-1,He=fe==null?0:fe.length;for(this.clear();++Ce<He;){var Qt=fe[Ce];this.set(Qt[0],Qt[1])}}function cs(){this.__data__=Li?Li(null):{},this.size=0}function cl(fe){var Ce=this.has(fe)&&delete this.__data__[fe];return this.size-=Ce?1:0,Ce}function $o(fe){var Ce=this.__data__;if(Li){var He=Ce[fe];return He===r?void 0:He}return X.call(Ce,fe)?Ce[fe]:void 0}function Wa(fe){var Ce=this.__data__;return Li?Ce[fe]!==void 0:X.call(Ce,fe)}function Nr(fe,Ce){var He=this.__data__;return this.size+=this.has(fe)?0:1,He[fe]=Li&&Ce===void 0?r:Ce,this}Br.prototype.clear=cs,Br.prototype.delete=cl,Br.prototype.get=$o,Br.prototype.has=Wa,Br.prototype.set=Nr;function Ri(fe){var Ce=-1,He=fe==null?0:fe.length;for(this.clear();++Ce<He;){var Qt=fe[Ce];this.set(Qt[0],Qt[1])}}function pi(){this.__data__=[],this.size=0}function Hs(fe){var Ce=this.__data__,He=ir(Ce,fe);if(He<0)return!1;var Qt=Ce.length-1;return He==Qt?Ce.pop():fn.call(Ce,He,1),--this.size,!0}function ri(fe){var Ce=this.__data__,He=ir(Ce,fe);return He<0?void 0:Ce[He][1]}function Ni(fe){return ir(this.__data__,fe)>-1}function be(fe,Ce){var He=this.__data__,Qt=ir(He,fe);return Qt<0?(++this.size,He.push([fe,Ce])):He[Qt][1]=Ce,this}Ri.prototype.clear=pi,Ri.prototype.delete=Hs,Ri.prototype.get=ri,Ri.prototype.has=Ni,Ri.prototype.set=be;function ce(fe){var Ce=-1,He=fe==null?0:fe.length;for(this.clear();++Ce<He;){var Qt=fe[Ce];this.set(Qt[0],Qt[1])}}function _e(){this.size=0,this.__data__={hash:new Br,map:new(hi||Ri),string:new Br}}function Ue(fe){var Ce=pt(this,fe).delete(fe);return this.size-=Ce?1:0,Ce}function je(fe){return pt(this,fe).get(fe)}function Dt(fe){return pt(this,fe).has(fe)}function Ht(fe,Ce){var He=pt(this,fe),Qt=He.size;return He.set(fe,Ce),this.size+=He.size==Qt?0:1,this}ce.prototype.clear=_e,ce.prototype.delete=Ue,ce.prototype.get=je,ce.prototype.has=Dt,ce.prototype.set=Ht;function xn(fe){var Ce=this.__data__=new Ri(fe);this.size=Ce.size}function rr(){this.__data__=new Ri,this.size=0}function mr(fe){var Ce=this.__data__,He=Ce.delete(fe);return this.size=Ce.size,He}function jn(fe){return this.__data__.get(fe)}function Dr(fe){return this.__data__.has(fe)}function ii(fe,Ce){var He=this.__data__;if(He instanceof Ri){var Qt=He.__data__;if(!hi||Qt.length<n-1)return Qt.push([fe,Ce]),this.size=++He.size,this;He=this.__data__=new ce(Qt)}return He.set(fe,Ce),this.size=He.size,this}xn.prototype.clear=rr,xn.prototype.delete=mr,xn.prototype.get=jn,xn.prototype.has=Dr,xn.prototype.set=ii;function dn(fe,Ce){var He=ah(fe),Qt=!He&&xu(fe),xr=!He&&!Qt&&uh(fe),ai=!He&&!Qt&&!xr&&EE(fe),Bi=He||Qt||xr||ai,wn=Bi?Xe(fe.length,String):[],Ei=wn.length;for(var ji in fe)Bi&&(ji=="length"||xr&&(ji=="offset"||ji=="parent")||ai&&(ji=="buffer"||ji=="byteLength"||ji=="byteOffset")||zt(ji,Ei))||wn.push(ji);return wn}function Ir(fe,Ce,He){(He!==void 0&&!fl(fe[Ce],He)||He===void 0&&!(Ce in fe))&&un(fe,Ce,He)}function Jr(fe,Ce,He){var Qt=fe[Ce];(!(X.call(fe,Ce)&&fl(Qt,He))||He===void 0&&!(Ce in fe))&&un(fe,Ce,He)}function ir(fe,Ce){for(var He=fe.length;He--;)if(fl(fe[He][0],Ce))return He;return-1}function un(fe,Ce,He){Ce=="__proto__"&&an?an(fe,Ce,{configurable:!0,enumerable:!0,value:He,writable:!0}):fe[Ce]=He}var jr=Qe();function Pi(fe){return fe==null?fe===void 0?T:y:Wt&&Wt in Object(fe)?vt(fe):Xo(fe)}function Is(fe){return wa(fe)&&Pi(fe)==a}function _i(fe){if(!lh(fe)||gr(fe))return!1;var Ce=Zb(fe)?he:j;return Ce.test(Qb(fe))}function ns(fe){return wa(fe)&&_E(fe.length)&&!!L[Pi(fe)]}function Ko(fe){if(!lh(fe))return Pr(fe);var Ce=si(fe),He=[];for(var Qt in fe)Qt=="constructor"&&(Ce||!X.call(fe,Qt))||He.push(Qt);return He}function Ga(fe,Ce,He,Qt,xr){fe!==Ce&&jr(Ce,function(ai,Bi){if(xr||(xr=new xn),lh(ai))Mo(fe,Ce,Bi,He,Ga,Qt,xr);else{var wn=Qt?Qt(oh(fe,Bi),ai,Bi+"",fe,Ce,xr):void 0;wn===void 0&&(wn=ai),Ir(fe,Bi,wn)}},km)}function Mo(fe,Ce,He,Qt,xr,ai,Bi){var wn=oh(fe,He),Ei=oh(Ce,He),ji=Bi.get(Ei);if(ji){Ir(fe,He,ji);return}var Qo=ai?ai(wn,Ei,He+"",fe,Ce,Bi):void 0,ch=Qo===void 0;if(ch){var Js=ah(Ei),Rm=!Js&&uh(Ei),Nm=!Js&&!Rm&&EE(Ei);Qo=Ei,Js||Rm||Nm?ah(wn)?Qo=wn:Jb(wn)?Qo=De(wn):Rm?(ch=!1,Qo=te(Ei)):Nm?(ch=!1,Qo=ue(Ei)):Qo=[]:GS(Ei)||xu(Ei)?(Qo=wn,xu(wn)?Qo=Im(wn):(!lh(wn)||Zb(wn))&&(Qo=It(Ei))):ch=!1}ch&&(Bi.set(Ei,Qo),xr(Qo,Ei,Qt,ai,Bi),Bi.delete(Ei)),Ir(fe,He,Qo)}function ec(fe,Ce){return Vy(sf(fe,Ce,Ur),fe+"")}var Zf=an?function(fe,Ce){return an(fe,"toString",{configurable:!0,enumerable:!1,value:oi(Ce),writable:!0})}:Ur;function te(fe,Ce){return fe.slice()}function xe(fe){var Ce=new fe.constructor(fe.byteLength);return new Be(Ce).set(new Be(fe)),Ce}function ue(fe,Ce){var He=xe(fe.buffer);return new fe.constructor(He,fe.byteOffset,fe.length)}function De(fe,Ce){var He=-1,Qt=fe.length;for(Ce||(Ce=Array(Qt));++He<Qt;)Ce[He]=fe[He];return Ce}function Pe(fe,Ce,He,Qt){var xr=!He;He||(He={});for(var ai=-1,Bi=Ce.length;++ai<Bi;){var wn=Ce[ai],Ei=void 0;Ei===void 0&&(Ei=fe[wn]),xr?un(He,wn,Ei):Jr(He,wn,Ei)}return He}function Se(fe){return ec(function(Ce,He){var Qt=-1,xr=He.length,ai=xr>1?He[xr-1]:void 0,Bi=xr>2?He[2]:void 0;for(ai=fe.length>3&&typeof ai=="function"?(xr--,ai):void 0,Bi&&Xn(He[0],He[1],Bi)&&(ai=xr<3?void 0:ai,xr=1),Ce=Object(Ce);++Qt<xr;){var wn=He[Qt];wn&&fe(Ce,wn,Qt,ai)}return Ce})}function Qe(fe){return function(Ce,He,Qt){for(var xr=-1,ai=Object(Ce),Bi=Qt(Ce),wn=Bi.length;wn--;){var Ei=Bi[++xr];if(He(ai[Ei],Ei,ai)===!1)break}return Ce}}function pt(fe,Ce){var He=fe.__data__;return nn(Ce)?He[typeof Ce=="string"?"string":"hash"]:He.map}function yt(fe,Ce){var He=gt(fe,Ce);return _i(He)?He:void 0}function vt(fe){var Ce=X.call(fe,Wt),He=fe[Wt];try{fe[Wt]=void 0;var Qt=!0}catch{}var xr=we.call(fe);return Qt&&(Ce?fe[Wt]=He:delete fe[Wt]),xr}function It(fe){return typeof fe.constructor=="function"&&!si(fe)?Ds(lt(fe)):{}}function zt(fe,Ce){var He=typeof fe;return Ce=Ce??o,!!Ce&&(He=="number"||He!="symbol"&&W.test(fe))&&fe>-1&&fe%1==0&&fe<Ce}function Xn(fe,Ce,He){if(!lh(He))return!1;var Qt=typeof Ce;return(Qt=="number"?Hy(He)&&zt(Ce,He.length):Qt=="string"&&Ce in He)?fl(He[Ce],fe):!1}function nn(fe){var Ce=typeof fe;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?fe!=="__proto__":fe===null}function gr(fe){return!!de&&de in fe}function si(fe){var Ce=fe&&fe.constructor,He=typeof Ce=="function"&&Ce.prototype||_t;return fe===He}function Pr(fe){var Ce=[];if(fe!=null)for(var He in Object(fe))Ce.push(He);return Ce}function Xo(fe){return we.call(fe)}function sf(fe,Ce,He){return Ce=$n(Ce===void 0?fe.length-1:Ce,0),function(){for(var Qt=arguments,xr=-1,ai=$n(Qt.length-Ce,0),Bi=Array(ai);++xr<ai;)Bi[xr]=Qt[Ce+xr];xr=-1;for(var wn=Array(Ce+1);++xr<Ce;)wn[xr]=Qt[xr];return wn[Ce]=He(Bi),ut(fe,this,wn)}}function oh(fe,Ce){if(!(Ce==="constructor"&&typeof fe[Ce]=="function")&&Ce!="__proto__")return fe[Ce]}var Vy=Lp(Zf);function Lp(fe){var Ce=0,He=0;return function(){var Qt=ki(),xr=s-(Qt-He);if(He=Qt,xr>0){if(++Ce>=i)return arguments[0]}else Ce=0;return fe.apply(void 0,arguments)}}function Qb(fe){if(fe!=null){try{return st.call(fe)}catch{}try{return fe+""}catch{}}return""}function fl(fe,Ce){return fe===Ce||fe!==fe&&Ce!==Ce}var xu=Is(function(){return arguments}())?Is:function(fe){return wa(fe)&&X.call(fe,"callee")&&!Xt.call(fe,"callee")},ah=Array.isArray;function Hy(fe){return fe!=null&&_E(fe.length)&&!Zb(fe)}function Jb(fe){return wa(fe)&&Hy(fe)}var uh=Cn||TE;function Zb(fe){if(!lh(fe))return!1;var Ce=Pi(fe);return Ce==h||Ce==p||Ce==l||Ce==b}function _E(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=o}function lh(fe){var Ce=typeof fe;return fe!=null&&(Ce=="object"||Ce=="function")}function wa(fe){return fe!=null&&typeof fe=="object"}function GS(fe){if(!wa(fe)||Pi(fe)!=v)return!1;var Ce=lt(fe);if(Ce===null)return!0;var He=X.call(Ce,"constructor")&&Ce.constructor;return typeof He=="function"&&He instanceof He&&st.call(He)==ae}var EE=Re?Tt(Re):ns;function Im(fe){return Pe(fe,km(fe))}function km(fe){return Hy(fe)?dn(fe):Ko(fe)}var CE=Se(function(fe,Ce,He){Ga(fe,Ce,He)});function oi(fe){return function(){return fe}}function Ur(fe){return fe}function TE(){return!1}e.exports=CE})(t8,t8.exports);var L_t=t8.exports;const Fte=_p(L_t);function Pg(e){return structuredClone(e)}function $te(){const e=Zd(),n=`${eh()}_${e}`;return ni(i=>i.answers[n])}const FRe=N.createContext(null);function B_t(){const e=N.useContext(FRe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function ty(){return ni(e=>e.config)}function YA(){const[e]=Tb();return!!e.get("participantId")}function jge(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function $Re(){const e=Zd(),t=Nte(),r=`${eh()}_${e}`,i=ni(k=>k.trialValidation),s=ni(k=>k.sequence),o=ni(k=>k.answers),a=ni(k=>k.modes),u=ef(),{saveTrialAnswer:l,setIframeAnswers:c,setMatrixAnswersRadio:f,setMatrixAnswersCheckbox:d}=Ul(),{storageEngine:h}=Oo(),p=W_(),m=N.useMemo(()=>a.dataCollectionEnabled,[a]),g=u_t(r),y=YA(),v=typeof e!="number"||y||!g,b=$te(),x=Cp(),_=ty(),C=N.useMemo(()=>Date.now(),[]),T=B_t(),S=N.useCallback((k=!0)=>{if(typeof e!="number")return;const I=Pg(i[r]),R=Object.values(I).reduce((j,W)=>Object.hasOwn(W,"values")?{...j,...W.values}:j,{}),{provenanceGraph:F}=I,O=Date.now(),{incorrectAnswers:B,helpButtonClickedCount:H}=b,U=T&&"current"in T&&T.current?T.current.splice(0,T.current.length):[];if(m&&b.endTime===-1){const j={answer:k?R:{},startTime:C,endTime:O,incorrectAnswers:B,provenanceGraph:F,windowEvents:U,timedOut:!k,helpButtonClickedCount:H};u(l({identifier:r,...j})),h&&h.saveAnswers({...o,[r]:j}),u(c({})),u(d(null)),u(f(null))}let G=e+1;const Y=kte(s,e),Q=Y!==null&&Y.some(j=>Object.hasOwn(j.currentBlock,"skip")&&j.currentBlock.skip!==void 0),M={...o,[r]:{answer:R,startTime:C,endTime:O,provenanceGraph:F,windowEvents:U}};Q&&[...Y.flatMap(W=>W.currentBlock.skip?W.currentBlock.skip.map(L=>({...L,firstIndex:W.firstIndex,lastIndex:W.lastIndex})):[])].some(W=>{let L=!1;const q=Object.fromEntries(Object.entries(M).filter(([re])=>{const ve=parseInt(re.slice(re.lastIndexOf("_")+1),10);return ve>=W.firstIndex&&ve<=e})),J=W.check!=="block"?Object.entries(q).filter(([re])=>re.slice(0,re.lastIndexOf("_"))===W.name):Object.entries(q);if(J.length===0)return!1;if(J.some(([re,ve])=>!ve))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(W,null,2)}`);if(W.check==="response"||W.check==="responses"){const[re,ve]=J[0];W.check==="response"?L=W.comparison==="equal"?W.value===ve.answer[W.responseId]:W.value!==ve.answer[W.responseId]:L=!jge(ve.answer,re,_.components[re.slice(0,re.lastIndexOf("_"))],_)}else if(W.check==="block"||W.check==="repeatedComponent"){if(J.length<W.value)return!1;const re=J.map(([Ae,ke])=>jge(ke.answer,Ae,_.components[Ae.slice(0,Ae.lastIndexOf("_"))],_)),ve=re.filter(Ae=>Ae).length,pe=re.length-ve;L=W.condition==="numCorrect"&&ve===W.value||W.condition==="numIncorrect"&&pe===W.value}if(L){const re=t.indexOf(W.to),ve=re===-1?o_t(s,W.to):-1;return G=re===-1?ve:re,!0}return!1}),x(`/${p}/${Lh(G)}${window.location.search}`)},[e,i,r,T,m,b,s,o,C,x,p,u,l,h,c,d,f,_,t]);return{isNextDisabled:v,goToNextStep:S}}function j_t({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=$Re(),o=ty(),a=Cp(),u=N.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=N.useState(void 0);N.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),N.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=N.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return E.jsxs(E.Fragment,{children:[E.jsx(bn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&E.jsxs(Ng,{mt:"md",title:"Please wait",color:"blue",icon:E.jsx(nte,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?E.jsxs(Ng,{mt:"md",title:"Next button disables soon",color:"yellow",icon:E.jsx(pk,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&E.jsxs(Ng,{mt:"md",title:"Next button disabled",color:"red",icon:E.jsx(pk,{}),children:["The next button has timed out and is now disabled.",E.jsx(Mi,{justify:"right",mt:"sm",children:E.jsx(bn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function U_t(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const z_t=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Ka(e,t){z_t(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function V_t(e,t){e&&U_t(e),Ka(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Ka(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Ka(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Ka(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Ka(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Ka(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Ka(`mantine-form:${e}:clear-errors`,t.clearErrors),Ka(`mantine-form:${e}:reset`,t.reset),Ka(`mantine-form:${e}:validate`,t.validate),Ka(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Ka(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Ka(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Ka(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Ka(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Ka(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Ka(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Ka(`mantine-form:${e}:reset-touched`,t.resetTouched)}function H_t(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function XG(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function q_t(e){const[t,n]=N.useState(XG(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=XG(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function MRe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Uge(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function zge(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=MRe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Uge(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Uge(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function W_t(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Vge(e,t,n){typeof n.value=="object"&&(n.value=K2(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function K2(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(K2(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(K2(a),K2(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(K2(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Vge(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Vge(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function LRe(e){return typeof e!="string"?[]:e.split(".")}function Ac(e,t){const n=LRe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function gB(e,t,n){const r=LRe(e);if(r.length===0)return n;const i=K2(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function G_t(e,{from:t,to:n},r){const i=Ac(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),gB(e,s,r)}function Y_t(e,t,n,r){const i=Ac(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),gB(e,s,r)}function K_t(e,t,n){const r=Ac(e,n);return Array.isArray(r)?gB(e,r.filter((i,s)=>s!==t),n):n}function X_t({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>W_t(o,a,u)),e.setValues({values:G_t(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>zge(o,a,u,-1)),e.setValues({values:K_t(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>zge(o,u,l,1)),e.setValues({values:Y_t(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var Mte=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const aF=_p(Mte);function m6(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Q_t({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(_=>{const C=typeof _=="function"?_(u.current):_;u.current=C,n==="controlled"&&s(C)},[]),f=N.useCallback(_=>{const C=typeof _=="function"?_(l.current):_;l.current=C,n==="controlled"&&a(C)},[]),d=N.useCallback(()=>c({}),[]),h=_=>{const C=_?{..._,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(C),f({})},p=N.useCallback((_,C)=>{c(T=>m6(T,_)===C?T:{...T,[_]:C})},[]),m=N.useCallback((_,C)=>{f(T=>m6(T,_)===C?T:{...T,[_]:C})},[]),g=N.useCallback(_=>m6(u.current,_),[]),y=N.useCallback(_=>f(C=>{if(typeof _!="string")return C;const T=MRe(_,C);return delete T[_],aF(T,C)?C:T}),[]),v=N.useCallback(_=>{if(_){const T=Ac(_,l.current);if(typeof T=="boolean")return T;const S=Ac(_,r.refValues.current),k=Ac(_,r.valuesSnapshot.current);return!aF(S,k)}return Object.keys(l.current).length>0?m6(l.current):!aF(r.refValues.current,r.valuesSnapshot.current)},[]),b=N.useCallback(()=>l.current,[]),x=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:x}}function J_t({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,x=y?{...v,...b}:b;o.current=x,g&&s(x),t==null||t(x,v),m==null||m.filter(Boolean).forEach(_=>_({updatedValues:x,previousValues:v}))},[t]),l=N.useCallback(p=>{var y;const m=Ac(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=gB(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(x=>x({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Z_t({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Ac(i,o.previousValues),value:Ac(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Hge(e,t){return e?`${e}-${t.toString()}`:t.toString()}function qge(e){const t=XG(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function QG(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Ac(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>QG(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||QG(o,t,a,i)),i},r)}function JG(e,t){return qge(typeof e=="function"?e(t):QG(e,t))}function g6(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=JG(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const eEt="__MANTINE_FORM_INDEX__";function Wge(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${eEt}`)):!1:!1}function BRe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=q_t(r),p=J_t({initialValues:n,onValuesChange:l,mode:t}),m=Q_t({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=X_t({$values:p,$errors:h,$status:m}),y=Z_t({$status:m}),[v,b]=N.useState(0),[x,_]=N.useState({}),C=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(M=>M+1)},[]),T=N.useCallback(M=>{p.initialize(M,()=>t==="uncontrolled"&&b(j=>j+1))},[]),S=N.useCallback((M,j,W)=>{const L=Wge(M,a);m.clearFieldDirty(M),m.setFieldTouched(M,!0),!L&&o&&h.clearFieldError(M),p.setFieldValue({path:M,value:j,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(M),L?q=>{const J=g6(M,d,q.updatedValues);J.hasError?h.setFieldError(M,J.error):h.clearFieldError(M)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>_(q=>({...q,[M]:(q[M]||0)+1})):null]})},[l,d]),k=N.useCallback(M=>{const j=p.refValues.current;p.setValues({values:M,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const L=Ac(W,p.refValues.current),q=Ac(W,j);L!==q&&y.getFieldSubscribers(W).forEach(J=>J({previousValues:j,updatedValues:p.refValues.current}))})},[l,o]),I=N.useCallback(()=>{const M=JG(d,p.refValues.current);return h.setErrors(M.errors),M},[d]),R=N.useCallback(M=>{const j=g6(M,d,p.refValues.current);return j.hasError?h.setFieldError(M,j.error):h.clearFieldError(M),j},[d]),F=(M,{type:j="input",withError:W=!0,withFocus:L=!0,...q}={})=>{const re={onChange:H_t(ve=>S(M,ve,{forceUpdate:!1})),"data-path":Hge(e,M)};return W&&(re.error=h.errorsState[M]),j==="checkbox"?re[t==="controlled"?"checked":"defaultChecked"]=Ac(M,p.refValues.current):re[t==="controlled"?"value":"defaultValue"]=Ac(M,p.refValues.current),L&&(re.onFocus=()=>m.setFieldTouched(M,!0),re.onBlur=()=>{if(Wge(M,u)){const ve=g6(M,d,p.refValues.current);ve.hasError?h.setFieldError(M,ve.error):h.clearFieldError(M)}}),Object.assign(re,f==null?void 0:f({inputProps:re,field:M,options:{type:j,withError:W,withFocus:L,...q},form:Q}))},O=(M,j)=>W=>{W==null||W.preventDefault();const L=I();L.hasErrors?j==null||j(L.errors,p.refValues.current,W):M==null||M(c(p.refValues.current),W)},B=M=>c(M||p.refValues.current),H=N.useCallback(M=>{M.preventDefault(),C()},[]),U=N.useCallback(M=>M?!g6(M,d,p.refValues.current).hasError:!JG(d,p.refValues.current).hasErrors,[d]),G=M=>`${v}-${M}-${x[M]||0}`,Y=N.useCallback(M=>document.querySelector(`[data-path="${Hge(e,M)}"]`),[]),Q={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:k,setFieldValue:S,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:C,validate:I,validateField:R,getInputProps:F,onSubmit:O,onReset:H,isValid:U,getTransformedValues:B,key:G,getInputNode:Y};return V_t(e,Q),Q}function tEt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function nEt(e){return tEt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function jRe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const rEt=new URLSearchParams(window.location.search),iEt=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=rEt.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s}}}),{...n}},sEt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(i=>i!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?jRe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function oEt(e,t,n){const[r,i]=N.useState(null),s=BRe({initialValues:iEt(e,n),validate:sEt(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function G_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=jRe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function aEt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return E.jsx(Tc.Group,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:s,required:o})})]}),description:u,...n,error:G_(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsx(Mi,{mt:"xs",children:l.map(c=>E.jsx(Tc,{disabled:t,value:c.value,label:c.label},c.value))})})}function uEt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return E.jsx(BA,{disabled:t,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:G_(e,n,c)})}function lEt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return E.jsx(po.Wrapper,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${n}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&E.jsx(To,{children:Array.isArray(t.value)?t.value.map(a=>E.jsx(To.Item,{children:a},a)):E.jsx(To.Item,{children:t.value})})})}function URe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f}=e,d=u.map(h=>typeof h=="string"?{value:h,label:h}:h);return E.jsx(Jg.Group,{name:`radioInput${e.id}`,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:o,required:a})})]}),description:f,...n,error:G_(e,n,d),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsxs(Mi,{mt:"md",gap:"lg",style:{display:"flex",alignItems:"flex-end",justifyContent:s?"space-around":"inherit"},children:[l?E.jsx(Ye,{children:l}):null,d.map(h=>E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[E.jsx(Ye,{children:h.label}),E.jsx(Jg,{disabled:t,value:h.value,label:h.label,styles:{label:{display:"none"}}})]},h.label)),E.jsx(Ye,{children:c})]})},e.id)}function cEt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return E.jsx(URe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function fEt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return E.jsx(Pee,{disabled:t,placeholder:l,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:G_(e,n)})}function dEt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=N.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=G_(e,n);return E.jsx(po.Wrapper,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsx(M_,{disabled:t,marks:a,min:l,max:c,...n,h:40})})}function hEt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return E.jsx(bg,{disabled:t,placeholder:s,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:G_(e,n)})}function pEt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return E.jsx(xee,{disabled:t,placeholder:s,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:G_(e,n)})}function mEt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return E.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>E.jsx(Tc,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function gEt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return E.jsx(Jg.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:E.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>E.jsx(Jg,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function yEt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Ul(),a=ef(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(b=>({value:b,label:b})):u.map(b=>typeof b=="string"?{value:b,label:b}:b),p=l.map(b=>typeof b=="string"?{value:b,label:b}:b),m=(b,x)=>{const _={type:"radio",questionKey:x,val:b,responseId:e.id};a(s(_))},g=(b,x,_)=>{const C=b.target.checked,T={questionKey:x,responseId:e.id,value:_.value,label:_.label,isChecked:C,choiceOptions:h};a(o(T))},y=h.length,v=p.length;return E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:0,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${n}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(tl,{text:c,required:f})})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[E.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((b,x)=>E.jsx(Ye,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:b.label},`choice-${x}-label`))}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v}, 1fr)`},children:p.map((b,x)=>E.jsx(Ye,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(x+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:b.label},`question-${x}-label`))}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v},1fr)`},children:p.map((b,x)=>E.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(x+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?E.jsx(gEt,{disabled:r,idx:x,question:b,answer:t,_choices:h,_n:y,onChange:m,response:e}):E.jsx(mEt,{disabled:r,idx:x,question:b,answer:t,_choices:h,_n:y,onChange:g})},`question-${x}`))})]})]})}function vEt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=Tb(),u=ty().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return E.jsxs(Fe,{mb:"md",children:[e.type==="numerical"&&E.jsx(fEt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&E.jsx(hEt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&E.jsx(pEt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&E.jsx(cEt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&E.jsx(uEt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&E.jsx(dEt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&E.jsx(URe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&E.jsx(aEt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&E.jsx(lEt,{response:e,answer:i,index:r,enumerateQuestions:u}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&E.jsx(yEt,{disabled:l,response:e,answer:i,index:r,enumerateQuestions:u})]})}function n8({config:e,location:t,status:n,style:r}){var M;const{storageEngine:i}=Oo(),s=ef(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Ul(),c=Zd(),f=eh(),d=n==null?void 0:n.answer,h=W_(),p=Cp(),m=e,g=N.useMemo(()=>{var j;return((j=m==null?void 0:m.response)==null?void 0:j.filter(W=>W.location?W.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),y=N.useMemo(()=>g.map(j=>({...j,required:j.required===void 0?!0:j.required})),[g]),v=oEt(y,c,d||{}),[b,x]=N.useState(void 0),_=ni(j=>j.iframeAnswers),C=ni(j=>j.iframeProvenance),T=ni(j=>j.matrixAnswers),S=(m==null?void 0:m.provideFeedback)&&(((M=m==null?void 0:m.correctAnswer)==null?void 0:M.length)||0)>0,k=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[I,R]=N.useState(0),F=(m==null?void 0:m.trainingAttempts)||2,[O,B]=N.useState(!1),H=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");N.useEffect(()=>{const j=y.find(W=>W.type==="iframe");if(_&&j){const W=j.id;v.setValues({...v.values,[W]:_[W]})}},[_]),N.useEffect(()=>{C&&x(C)},[C]),N.useEffect(()=>{const j=y.filter(W=>W.type==="matrix-radio"||W.type==="matrix-checkbox");if(T&&j.length>0){const W={...v.values};j.forEach(L=>{const{id:q}=L;W[q]={...v.getInputProps(q).value,...T[q]}}),v.setValues(W)}},[T]),N.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:v.isValid(),values:Pg(v.values),provenanceGraph:b}))},[v.values,f,c,t,s,o,b]);const[U,G]=N.useState(Object.fromEntries(y.map(j=>[j.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Y=(j,W,L,q,J)=>{G(re=>({...re,[j]:{visible:W,title:L,message:q,color:J}}))},Q=()=>{const j=I+1;R(j);const W=Object.fromEntries(y.map(L=>{var re,ve;const q=(ve=(re=m.correctAnswer)==null?void 0:re.find(pe=>pe.id===L.id))==null?void 0:ve.answer,J=v.values[L.id];return[L.id,Array.isArray(J)?typeof q=="string"?J.length===1&&q===J[0]:J.length===q.length&&J.every(pe=>q.includes(pe)):q===J]}));S&&(y.forEach(L=>{var q;if(W[L.id]&&!((q=U[L.id])!=null&&q.message.includes("You've failed to answer this question correctly")))Y(L.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:L.id,answer:v.values[L.id]}));let J="";F===-1?J="Please try again.":j>=F?(J=`You didn't answer this question correctly after ${F} attempts. ${k?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!k&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./__trainingFailed")},5e3)})):F-j===1?J="Please try again. You have 1 attempt left.":J=`Please try again. You have ${F-j} attempts left.`,Y(L.id,!0,"Incorrect Answer",J,"red")}}),B(k&&j>=F||Object.values(W).every(L=>L)&&j<=F))};return E.jsxs("div",{style:r,children:[y.map((j,W)=>{var q,J;const L=(J=(q=m.correctAnswer)==null?void 0:q.find(re=>re.id===j.id))==null?void 0:J.answer;return E.jsx(vi.Fragment,{children:j.hidden?"":E.jsxs(E.Fragment,{children:[E.jsx(vEt,{storedAnswer:d?d[j.id]:void 0,answer:{...v.getInputProps(j.id,{type:j.type==="checkbox"?"checkbox":"input"})},response:j,index:W+1}),U[j.id].visible&&E.jsxs(Ng,{mb:"md",title:U[j.id].title,color:U[j.id].color,children:[U[j.id].message," ",U[j.id].message.includes("Please try again")&&E.jsxs(E.Fragment,{children:[E.jsx("br",{}),E.jsx("br",{}),"If you're unsure"," ",E.jsx(wb,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),E.jsx("br",{}),E.jsx("br",{}),I>=F&&F>=0&&L&&` The correct answer was: ${L}.`]})]})},`${j.id}-${c}`)}),E.jsxs(Mi,{justify:"right",gap:"xs",children:[S&&H&&E.jsx(bn,{onClick:()=>Q(),disabled:!v.isValid()||I>=F&&F>=0,children:"Check Answer"}),H&&E.jsx(j_t,{disabled:S&&!O||!v.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const TD="@REVISIT_COMMS",bEt={minHeight:"500px",width:"100%",border:0};function xEt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Ul(),r=ef(),i=cRe(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=eh(),u=Cp(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${TD}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${TD}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${TD}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${TD}/ANSWERS`:r(t(d.message));break;case`${TD}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),E.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${jl}${e.path}?trialid=${a}&id=${o}`,style:bEt})}async function Lte(e){const n=await(await fetch(`${jl}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function wEt(e){const t=await fetch(`${jl}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function Rv({email:e,path:t}){const n=Cb();return E.jsxs(Bl,{fluid:!0,my:50,maw:800,mx:"auto",children:[E.jsx(uo,{order:2,children:E.jsx(Ye,{span:!0,c:"orange",children:"404"})}),E.jsxs(Ye,{children:[E.jsx(Ye,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),E.jsx(Ku,{h:"lg"}),E.jsxs(To,{children:[E.jsx(To.Item,{children:E.jsx(Ye,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),E.jsx(To.Item,{children:E.jsxs(Ye,{children:["If you're a participant, please contact the study administrator"," ",e&&E.jsxs(E.Fragment,{children:["at"," ",E.jsxs(wb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const _Et={maxWidth:"100%"};function EEt({currentConfig:e}){const t={..._Et,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await Lte(e.path);s(!!a),r(!1)}o()},[e]),n||i?E.jsx(Eb,{mx:"auto",src:`${jl}${e.path}`,style:t}):E.jsx(Rv,{path:e.path})}function Og(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function CEt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tp(e){let t,n,r;e.length!==2?(t=Og,n=(a,u)=>Og(e(a),u),r=(a,u)=>e(a)-u):(t=e===Og||e===CEt?e:TEt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function TEt(){return 0}function zRe(e){return e===null?NaN:+e}function*AEt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const VRe=tp(Og),Nv=VRe.right,SEt=VRe.left;tp(zRe).center;function DEt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function IEt(e,t){const n=DEt(e,t);return n&&Math.sqrt(n)}function F3(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Fl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Gge extends Map{constructor(t,n=WRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ZG(this,t))}has(t){return super.has(ZG(this,t))}set(t,n){return super.set(HRe(this,t),n)}delete(t){return super.delete(qRe(this,t))}}class r8 extends Set{constructor(t,n=WRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(ZG(this,t))}add(t){return super.add(HRe(this,t))}delete(t){return super.delete(qRe(this,t))}}function ZG({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function HRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function qRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function WRe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kEt(e,t){return Array.from(t,n=>e[n])}function REt(e=Og){if(e===Og)return GRe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function GRe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const NEt=Math.sqrt(50),PEt=Math.sqrt(10),OEt=Math.sqrt(2);function i8(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=NEt?10:s>=PEt?5:s>=OEt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?i8(e,t,n*2):[a,u,l]}function eY(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?i8(t,e,n):i8(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function tY(e,t,n){return t=+t,e=+e,n=+n,i8(e,t,n)[2]}function Pv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?tY(t,e,n):tY(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Fg(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function nY(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function YRe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?GRe:REt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));YRe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(AD(e,n,t),i(e[r],s)>0&&AD(e,n,r);o<a;){for(AD(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?AD(e,n,a):(++a,AD(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function AD(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function rY(e,t,n){if(e=Float64Array.from(AEt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return nY(e);if(t>=1)return Fg(e);var r,i=(r-1)*t,s=Math.floor(i),o=Fg(YRe(e,s).subarray(0,s+1)),a=nY(e.subarray(s+1));return o+(a-o)*(i-s)}}function KRe(e,t,n=zRe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function FEt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function XRe(e,t){return rY(e,.5,t)}function*$Et(e){for(const t of e)yield*t}function QRe(e){return Array.from($Et(e))}function Sc(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function JRe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function MEt(e,...t){e=new r8(e),t=t.map(LEt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function LEt(e){return e instanceof r8?e:new r8(e)}function BEt(...e){const t=new r8;for(const n of e)for(const r of n)t.add(r);return t}function jEt(e){return e}var AV=1,SV=2,iY=3,bI=4,Yge=1e-6;function UEt(e){return"translate("+e+",0)"}function zEt(e){return"translate(0,"+e+")"}function VEt(e){return t=>+e(t)}function HEt(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function qEt(){return!this.__axis}function ZRe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===AV||e===bI?-1:1,c=e===bI||e===SV?"x":"y",f=e===AV||e===iY?UEt:zEt;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):jEt),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,x=(t.bandwidth?HEt:VEt)(t.copy(),u),_=h.selection?h.selection():h,C=_.selectAll(".domain").data([null]),T=_.selectAll(".tick").data(p,t).order(),S=T.exit(),k=T.enter().append("g").attr("class","tick"),I=T.select("line"),R=T.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(k),I=I.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),R=R.merge(k.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===AV?"0em":e===iY?"0.71em":"0.32em")),h!==_&&(C=C.transition(h),T=T.transition(h),I=I.transition(h),R=R.transition(h),S=S.transition(h).attr("opacity",Yge).attr("transform",function(F){return isFinite(F=x(F))?f(F+u):this.getAttribute("transform")}),k.attr("opacity",Yge).attr("transform",function(F){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(F))?O:x(F))+u)})),S.remove(),C.attr("d",e===bI||e===SV?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),T.attr("opacity",1).attr("transform",function(F){return f(x(F)+u)}),I.attr(c+"2",l*s),R.attr(c,l*g).text(m),_.filter(qEt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===SV?"start":e===bI?"end":"middle"),_.each(function(){this.__axis=x})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function Bte(e){return ZRe(iY,e)}function jte(e){return ZRe(bI,e)}var WEt={value:()=>{}};function yB(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uF(n)}function uF(e){this._=e}function GEt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uF.prototype=yB.prototype={constructor:uF,on:function(e,t){var n=this._,r=GEt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=YEt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Kge(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Kge(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uF(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function YEt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Kge(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=WEt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var sY="http://www.w3.org/1999/xhtml";const Xge={svg:"http://www.w3.org/2000/svg",xhtml:sY,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vB(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Xge.hasOwnProperty(t)?{space:Xge[t],local:e}:e}function KEt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sY&&t.documentElement.namespaceURI===sY?t.createElement(e):t.createElementNS(n,e)}}function XEt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function eNe(e){var t=vB(e);return(t.local?XEt:KEt)(t)}function QEt(){}function Ute(e){return e==null?QEt:function(){return this.querySelector(e)}}function JEt(e){typeof e!="function"&&(e=Ute(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new zl(r,this._parents)}function tNe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ZEt(){return[]}function nNe(e){return e==null?ZEt:function(){return this.querySelectorAll(e)}}function e2t(e){return function(){return tNe(e.apply(this,arguments))}}function t2t(e){typeof e=="function"?e=e2t(e):e=nNe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new zl(r,i)}function rNe(e){return function(){return this.matches(e)}}function iNe(e){return function(t){return t.matches(e)}}var n2t=Array.prototype.find;function r2t(e){return function(){return n2t.call(this.children,e)}}function i2t(){return this.firstElementChild}function s2t(e){return this.select(e==null?i2t:r2t(typeof e=="function"?e:iNe(e)))}var o2t=Array.prototype.filter;function a2t(){return Array.from(this.children)}function u2t(e){return function(){return o2t.call(this.children,e)}}function l2t(e){return this.selectAll(e==null?a2t:u2t(typeof e=="function"?e:iNe(e)))}function c2t(e){typeof e!="function"&&(e=rNe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new zl(r,this._parents)}function sNe(e){return new Array(e.length)}function f2t(){return new zl(this._enter||this._groups.map(sNe),this._parents)}function s8(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}s8.prototype={constructor:s8,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function d2t(e){return function(){return e}}function h2t(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new s8(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function p2t(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new s8(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function m2t(e){return e.__data__}function g2t(e,t){if(!arguments.length)return Array.from(this,m2t);var n=t?p2t:h2t,r=this._parents,i=this._groups;typeof e!="function"&&(e=d2t(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=y2t(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,x,_;v<p;++v)if(x=m[v]){for(v>=b&&(b=v+1);!(_=g[b])&&++b<p;);x._next=_||null}}return o=new zl(o,r),o._enter=a,o._exit=u,o}function y2t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function v2t(){return new zl(this._exit||this._groups.map(sNe),this._parents)}function b2t(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function x2t(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new zl(a,this._parents)}function w2t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function _2t(e){e||(e=E2t);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new zl(i,this._parents).order()}function E2t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function C2t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function T2t(){return Array.from(this)}function A2t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function S2t(){let e=0;for(const t of this)++e;return e}function D2t(){return!this.node()}function I2t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function k2t(e){return function(){this.removeAttribute(e)}}function R2t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function N2t(e,t){return function(){this.setAttribute(e,t)}}function P2t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function O2t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function F2t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $2t(e,t){var n=vB(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?R2t:k2t:typeof t=="function"?n.local?F2t:O2t:n.local?P2t:N2t)(n,t))}function oNe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function M2t(e){return function(){this.style.removeProperty(e)}}function L2t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function B2t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function j2t(e,t,n){return arguments.length>1?this.each((t==null?M2t:typeof t=="function"?B2t:L2t)(e,t,n??"")):yT(this.node(),e)}function yT(e,t){return e.style.getPropertyValue(t)||oNe(e).getComputedStyle(e,null).getPropertyValue(t)}function U2t(e){return function(){delete this[e]}}function z2t(e,t){return function(){this[e]=t}}function V2t(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function H2t(e,t){return arguments.length>1?this.each((t==null?U2t:typeof t=="function"?V2t:z2t)(e,t)):this.node()[e]}function aNe(e){return e.trim().split(/^|\s+/)}function zte(e){return e.classList||new uNe(e)}function uNe(e){this._node=e,this._names=aNe(e.getAttribute("class")||"")}uNe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function lNe(e,t){for(var n=zte(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function cNe(e,t){for(var n=zte(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function q2t(e){return function(){lNe(this,e)}}function W2t(e){return function(){cNe(this,e)}}function G2t(e,t){return function(){(t.apply(this,arguments)?lNe:cNe)(this,e)}}function Y2t(e,t){var n=aNe(e+"");if(arguments.length<2){for(var r=zte(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?G2t:t?q2t:W2t)(n,t))}function K2t(){this.textContent=""}function X2t(e){return function(){this.textContent=e}}function Q2t(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function J2t(e){return arguments.length?this.each(e==null?K2t:(typeof e=="function"?Q2t:X2t)(e)):this.node().textContent}function Z2t(){this.innerHTML=""}function eCt(e){return function(){this.innerHTML=e}}function tCt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function nCt(e){return arguments.length?this.each(e==null?Z2t:(typeof e=="function"?tCt:eCt)(e)):this.node().innerHTML}function rCt(){this.nextSibling&&this.parentNode.appendChild(this)}function iCt(){return this.each(rCt)}function sCt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oCt(){return this.each(sCt)}function aCt(e){var t=typeof e=="function"?e:eNe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function uCt(){return null}function lCt(e,t){var n=typeof e=="function"?e:eNe(e),r=t==null?uCt:typeof t=="function"?t:Ute(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function cCt(){var e=this.parentNode;e&&e.removeChild(this)}function fCt(){return this.each(cCt)}function dCt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hCt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pCt(e){return this.select(e?hCt:dCt)}function mCt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function gCt(e){return function(t){e.call(this,t,this.__data__)}}function yCt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function vCt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function bCt(e,t,n){return function(){var r=this.__on,i,s=gCt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function xCt(e,t,n){var r=yCt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?bCt:vCt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function fNe(e,t,n){var r=oNe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function wCt(e,t){return function(){return fNe(this,e,t)}}function _Ct(e,t){return function(){return fNe(this,e,t.apply(this,arguments))}}function ECt(e,t){return this.each((typeof t=="function"?_Ct:wCt)(e,t))}function*CCt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Vte=[null];function zl(e,t){this._groups=e,this._parents=t}function _N(){return new zl([[document.documentElement]],Vte)}function TCt(){return this}zl.prototype=_N.prototype={constructor:zl,select:JEt,selectAll:t2t,selectChild:s2t,selectChildren:l2t,filter:c2t,data:g2t,enter:f2t,exit:v2t,join:b2t,merge:x2t,selection:TCt,order:w2t,sort:_2t,call:C2t,nodes:T2t,node:A2t,size:S2t,empty:D2t,each:I2t,attr:$2t,style:j2t,property:H2t,classed:Y2t,text:J2t,html:nCt,raise:iCt,lower:oCt,append:aCt,insert:lCt,remove:fCt,clone:pCt,datum:mCt,on:xCt,dispatch:ECt,[Symbol.iterator]:CCt};function Tr(e){return typeof e=="string"?new zl([[document.querySelector(e)]],[document.documentElement]):new zl([[e]],Vte)}function ACt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function o8(e,t){if(e=ACt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function dNe(e){return typeof e=="string"?new zl([document.querySelectorAll(e)],[document.documentElement]):new zl([tNe(e)],Vte)}const oY={capture:!0,passive:!1};function aY(e){e.preventDefault(),e.stopImmediatePropagation()}function SCt(e){var t=e.document.documentElement,n=Tr(e).on("dragstart.drag",aY,oY);"onselectstart"in t?n.on("selectstart.drag",aY,oY):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function DCt(e,t){var n=e.document.documentElement,r=Tr(e).on("dragstart.drag",null);t&&(r.on("click.drag",aY,oY),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function KA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function EN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ib(){}var Gw=.7,vT=1/Gw,wC="\\s*([+-]?\\d+)\\s*",$3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",I0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ICt=/^#([0-9a-f]{3,8})$/,kCt=new RegExp(`^rgb\\(${wC},${wC},${wC}\\)$`),RCt=new RegExp(`^rgb\\(${I0},${I0},${I0}\\)$`),NCt=new RegExp(`^rgba\\(${wC},${wC},${wC},${$3}\\)$`),PCt=new RegExp(`^rgba\\(${I0},${I0},${I0},${$3}\\)$`),OCt=new RegExp(`^hsl\\(${$3},${I0},${I0}\\)$`),FCt=new RegExp(`^hsla\\(${$3},${I0},${I0},${$3}\\)$`),Qge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};KA(Ib,Yw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jge,formatHex:Jge,formatHex8:$Ct,formatHsl:MCt,formatRgb:Zge,toString:Zge});function Jge(){return this.rgb().formatHex()}function $Ct(){return this.rgb().formatHex8()}function MCt(){return hNe(this).formatHsl()}function Zge(){return this.rgb().formatRgb()}function Yw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ICt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?eye(t):n===3?new Pa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?y6(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?y6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kCt.exec(e))?new Pa(t[1],t[2],t[3],1):(t=RCt.exec(e))?new Pa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=NCt.exec(e))?y6(t[1],t[2],t[3],t[4]):(t=PCt.exec(e))?y6(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=OCt.exec(e))?rye(t[1],t[2]/100,t[3]/100,1):(t=FCt.exec(e))?rye(t[1],t[2]/100,t[3]/100,t[4]):Qge.hasOwnProperty(e)?eye(Qge[e]):e==="transparent"?new Pa(NaN,NaN,NaN,0):null}function eye(e){return new Pa(e>>16&255,e>>8&255,e&255,1)}function y6(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pa(e,t,n,r)}function Hte(e){return e instanceof Ib||(e=Yw(e)),e?(e=e.rgb(),new Pa(e.r,e.g,e.b,e.opacity)):new Pa}function Ov(e,t,n,r){return arguments.length===1?Hte(e):new Pa(e,t,n,r??1)}function Pa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}KA(Pa,Ov,EN(Ib,{brighter(e){return e=e==null?vT:Math.pow(vT,e),new Pa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gw:Math.pow(Gw,e),new Pa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pa(Dw(this.r),Dw(this.g),Dw(this.b),a8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tye,formatHex:tye,formatHex8:LCt,formatRgb:nye,toString:nye}));function tye(){return`#${fw(this.r)}${fw(this.g)}${fw(this.b)}`}function LCt(){return`#${fw(this.r)}${fw(this.g)}${fw(this.b)}${fw((isNaN(this.opacity)?1:this.opacity)*255)}`}function nye(){const e=a8(this.opacity);return`${e===1?"rgb(":"rgba("}${Dw(this.r)}, ${Dw(this.g)}, ${Dw(this.b)}${e===1?")":`, ${e})`}`}function a8(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fw(e){return e=Dw(e),(e<16?"0":"")+e.toString(16)}function rye(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Bh(e,t,n,r)}function hNe(e){if(e instanceof Bh)return new Bh(e.h,e.s,e.l,e.opacity);if(e instanceof Ib||(e=Yw(e)),!e)return new Bh;if(e instanceof Bh)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Bh(o,a,u,e.opacity)}function u8(e,t,n,r){return arguments.length===1?hNe(e):new Bh(e,t,n,r??1)}function Bh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}KA(Bh,u8,EN(Ib,{brighter(e){return e=e==null?vT:Math.pow(vT,e),new Bh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gw:Math.pow(Gw,e),new Bh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Pa(DV(e>=240?e-240:e+120,i,r),DV(e,i,r),DV(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Bh(iye(this.h),v6(this.s),v6(this.l),a8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=a8(this.opacity);return`${e===1?"hsl(":"hsla("}${iye(this.h)}, ${v6(this.s)*100}%, ${v6(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iye(e){return e=(e||0)%360,e<0?e+360:e}function v6(e){return Math.max(0,Math.min(1,e||0))}function DV(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const pNe=Math.PI/180,mNe=180/Math.PI,l8=18,gNe=.96422,yNe=1,vNe=.82521,bNe=4/29,_C=6/29,xNe=3*_C*_C,BCt=_C*_C*_C;function wNe(e){if(e instanceof k0)return new k0(e.l,e.a,e.b,e.opacity);if(e instanceof xg)return _Ne(e);e instanceof Pa||(e=Hte(e));var t=NV(e.r),n=NV(e.g),r=NV(e.b),i=IV((.2225045*t+.7168786*n+.0606169*r)/yNe),s,o;return t===n&&n===r?s=o=i:(s=IV((.4360747*t+.3850649*n+.1430804*r)/gNe),o=IV((.0139322*t+.0971045*n+.7141733*r)/vNe)),new k0(116*i-16,500*(s-i),200*(i-o),e.opacity)}function c8(e,t,n,r){return arguments.length===1?wNe(e):new k0(e,t,n,r??1)}function k0(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}KA(k0,c8,EN(Ib,{brighter(e){return new k0(this.l+l8*(e??1),this.a,this.b,this.opacity)},darker(e){return new k0(this.l-l8*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=gNe*kV(t),e=yNe*kV(e),n=vNe*kV(n),new Pa(RV(3.1338561*t-1.6168667*e-.4906146*n),RV(-.9787684*t+1.9161415*e+.033454*n),RV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function IV(e){return e>BCt?Math.pow(e,1/3):e/xNe+bNe}function kV(e){return e>_C?e*e*e:xNe*(e-bNe)}function RV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function NV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jCt(e){if(e instanceof xg)return new xg(e.h,e.c,e.l,e.opacity);if(e instanceof k0||(e=wNe(e)),e.a===0&&e.b===0)return new xg(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*mNe;return new xg(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function f8(e,t,n,r){return arguments.length===1?jCt(e):new xg(e,t,n,r??1)}function xg(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function _Ne(e){if(isNaN(e.h))return new k0(e.l,0,0,e.opacity);var t=e.h*pNe;return new k0(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}KA(xg,f8,EN(Ib,{brighter(e){return new xg(this.h,this.c,this.l+l8*(e??1),this.opacity)},darker(e){return new xg(this.h,this.c,this.l-l8*(e??1),this.opacity)},rgb(){return _Ne(this).rgb()}}));var ENe=-.14861,qte=1.78277,Wte=-.29227,bB=-.90649,M3=1.97294,sye=M3*bB,oye=M3*qte,aye=qte*Wte-bB*ENe;function UCt(e){if(e instanceof Iw)return new Iw(e.h,e.s,e.l,e.opacity);e instanceof Pa||(e=Hte(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(aye*r+sye*t-oye*n)/(aye+sye-oye),s=r-i,o=(M3*(n-i)-Wte*s)/bB,a=Math.sqrt(o*o+s*s)/(M3*i*(1-i)),u=a?Math.atan2(o,s)*mNe-120:NaN;return new Iw(u<0?u+360:u,a,i,e.opacity)}function uY(e,t,n,r){return arguments.length===1?UCt(e):new Iw(e,t,n,r??1)}function Iw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}KA(Iw,uY,EN(Ib,{brighter(e){return e=e==null?vT:Math.pow(vT,e),new Iw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gw:Math.pow(Gw,e),new Iw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*pNe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Pa(255*(t+n*(ENe*r+qte*i)),255*(t+n*(Wte*r+bB*i)),255*(t+n*(M3*r)),this.opacity)}}));function CNe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function TNe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return CNe((n-r/t)*t,o,i,s,a)}}function ANe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return CNe((n-r/t)*t,i,s,o,a)}}const xB=e=>()=>e;function SNe(e,t){return function(n){return e+n*t}}function zCt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wB(e,t){var n=t-e;return n?SNe(e,n>180||n<-180?n-360*Math.round(n/360):n):xB(isNaN(e)?t:e)}function VCt(e){return(e=+e)==1?Oa:function(t,n){return n-t?zCt(t,n,e):xB(isNaN(t)?n:t)}}function Oa(e,t){var n=t-e;return n?SNe(e,n):xB(isNaN(e)?t:e)}const L3=function e(t){var n=VCt(t);function r(i,s){var o=n((i=Ov(i)).r,(s=Ov(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Oa(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function DNe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Ov(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var HCt=DNe(TNe),qCt=DNe(ANe);function Gte(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function INe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function WCt(e,t){return(INe(t)?Gte:kNe)(e,t)}function kNe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Sy(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function RNe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Cd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function NNe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Sy(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var lY=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,PV=new RegExp(lY.source,"g");function GCt(e){return function(){return e}}function YCt(e){return function(t){return e(t)+""}}function Yte(e,t){var n=lY.lastIndex=PV.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=lY.exec(e))&&(i=PV.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Cd(r,i)})),n=PV.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?YCt(u[0].x):GCt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Sy(e,t){var n=typeof t,r;return t==null||n==="boolean"?xB(t):(n==="number"?Cd:n==="string"?(r=Yw(t))?(t=r,L3):Yte:t instanceof Yw?L3:t instanceof Date?RNe:INe(t)?Gte:Array.isArray(t)?kNe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NNe:Cd)(e,t)}function KCt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function XCt(e,t){var n=wB(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function CN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var uye=180/Math.PI,cY={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function PNe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*uye,skewX:Math.atan(u)*uye,scaleX:o,scaleY:a}}var b6;function QCt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cY:PNe(t.a,t.b,t.c,t.d,t.e,t.f)}function JCt(e){return e==null||(b6||(b6=document.createElementNS("http://www.w3.org/2000/svg","g")),b6.setAttribute("transform",e),!(e=b6.transform.baseVal.consolidate()))?cY:(e=e.matrix,PNe(e.a,e.b,e.c,e.d,e.e,e.f))}function ONe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Cd(l,f)},{i:m-2,x:Cd(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Cd(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Cd(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Cd(l,f)},{i:m-2,x:Cd(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var FNe=ONe(QCt,"px, ","px)","deg)"),$Ne=ONe(JCt,", ",")",")"),ZCt=1e-12;function lye(e){return((e=Math.exp(e))+1/e)/2}function eTt(e){return((e=Math.exp(e))-1/e)/2}function tTt(e){return((e=Math.exp(2*e))-1)/(e+1)}const nTt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<ZCt)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),x=(d*d-l*l-r*m)/(2*d*n*v),_=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(x*x+1)-x);y=(C-_)/t,g=function(T){var S=T*y,k=lye(_),I=l/(n*v)*(k*tTt(t*S+_)-eTt(_));return[a+I*h,u+I*p,l*k/lye(t*S+_)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function MNe(e){return function(t,n){var r=e((t=u8(t)).h,(n=u8(n)).h),i=Oa(t.s,n.s),s=Oa(t.l,n.l),o=Oa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const rTt=MNe(wB);var iTt=MNe(Oa);function sTt(e,t){var n=Oa((e=c8(e)).l,(t=c8(t)).l),r=Oa(e.a,t.a),i=Oa(e.b,t.b),s=Oa(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function LNe(e){return function(t,n){var r=e((t=f8(t)).h,(n=f8(n)).h),i=Oa(t.c,n.c),s=Oa(t.l,n.l),o=Oa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const oTt=LNe(wB);var aTt=LNe(Oa);function BNe(e){return function t(n){n=+n;function r(i,s){var o=e((i=uY(i)).h,(s=uY(s)).h),a=Oa(i.s,s.s),u=Oa(i.l,s.l),l=Oa(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const uTt=BNe(wB);var lTt=BNe(Oa);function Kte(e,t){t===void 0&&(t=e,e=Sy);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function cTt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const fTt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Sy,interpolateArray:WCt,interpolateBasis:TNe,interpolateBasisClosed:ANe,interpolateCubehelix:uTt,interpolateCubehelixLong:lTt,interpolateDate:RNe,interpolateDiscrete:KCt,interpolateHcl:oTt,interpolateHclLong:aTt,interpolateHsl:rTt,interpolateHslLong:iTt,interpolateHue:XCt,interpolateLab:sTt,interpolateNumber:Cd,interpolateNumberArray:Gte,interpolateObject:NNe,interpolateRgb:L3,interpolateRgbBasis:HCt,interpolateRgbBasisClosed:qCt,interpolateRound:CN,interpolateString:Yte,interpolateTransformCss:FNe,interpolateTransformSvg:$Ne,interpolateZoom:nTt,piecewise:Kte,quantize:cTt},Symbol.toStringTag,{value:"Module"}));var bT=0,xI=0,SD=0,jNe=1e3,d8,wI,h8=0,Kw=0,_B=0,B3=typeof performance=="object"&&performance.now?performance:Date,UNe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function EB(){return Kw||(UNe(dTt),Kw=B3.now()+_B)}function dTt(){Kw=0}function j3(){this._call=this._time=this._next=null}j3.prototype=Xte.prototype={constructor:j3,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?EB():+n)+(t==null?0:+t),!this._next&&wI!==this&&(wI?wI._next=this:d8=this,wI=this),this._call=e,this._time=n,fY()},stop:function(){this._call&&(this._call=null,this._time=1/0,fY())}};function Xte(e,t,n){var r=new j3;return r.restart(e,t,n),r}function hTt(){EB(),++bT;for(var e=d8,t;e;)(t=Kw-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bT}function cye(){Kw=(h8=B3.now())+_B,bT=xI=0;try{hTt()}finally{bT=0,mTt(),Kw=0}}function pTt(){var e=B3.now(),t=e-h8;t>jNe&&(_B-=t,h8=e)}function mTt(){for(var e,t=d8,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:d8=n);wI=e,fY(r)}function fY(e){if(!bT){xI&&(xI=clearTimeout(xI));var t=e-Kw;t>24?(e<1/0&&(xI=setTimeout(cye,e-B3.now()-_B)),SD&&(SD=clearInterval(SD))):(SD||(h8=B3.now(),SD=setInterval(pTt,jNe)),bT=1,UNe(cye))}}function fye(e,t,n){var r=new j3;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function gTt(e,t,n){var r=new j3,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?EB():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var yTt=yB("start","end","cancel","interrupt"),vTt=[],zNe=0,dye=1,dY=2,lF=3,hye=4,hY=5,cF=6;function CB(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;bTt(e,n,{name:t,index:r,group:i,on:yTt,tween:vTt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:zNe})}function Qte(e,t){var n=Ap(e,t);if(n.state>zNe)throw new Error("too late; already scheduled");return n}function hm(e,t){var n=Ap(e,t);if(n.state>lF)throw new Error("too late; already running");return n}function Ap(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function bTt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Xte(s,0,n.time);function s(l){n.state=dye,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==dye)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===lF)return fye(o);h.state===hye?(h.state=cF,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=cF,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(fye(function(){n.state===lF&&(n.state=hye,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=dY,n.on.call("start",e,e.__data__,n.index,n.group),n.state===dY){for(n.state=lF,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=hY,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===hY&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=cF,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function pY(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>dY&&r.state<hY,r.state=cF,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function xTt(e){return this.each(function(){pY(this,e)})}function wTt(e,t){var n,r;return function(){var i=hm(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function _Tt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=hm(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function ETt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ap(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?wTt:_Tt)(n,e,t))}function Jte(e,t,n){var r=e._id;return e.each(function(){var i=hm(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ap(i,r).value[t]}}function VNe(e,t){var n;return(typeof t=="number"?Cd:t instanceof Yw?L3:(n=Yw(t))?(t=n,L3):Yte)(e,t)}function CTt(e){return function(){this.removeAttribute(e)}}function TTt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ATt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function STt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function DTt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function ITt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function kTt(e,t){var n=vB(e),r=n==="transform"?$Ne:VNe;return this.attrTween(e,typeof t=="function"?(n.local?ITt:DTt)(n,r,Jte(this,"attr."+e,t)):t==null?(n.local?TTt:CTt)(n):(n.local?STt:ATt)(n,r,t))}function RTt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function NTt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function PTt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&NTt(e,s)),n}return i._value=t,i}function OTt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&RTt(e,s)),n}return i._value=t,i}function FTt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=vB(e);return this.tween(n,(r.local?PTt:OTt)(r,t))}function $Tt(e,t){return function(){Qte(this,e).delay=+t.apply(this,arguments)}}function MTt(e,t){return t=+t,function(){Qte(this,e).delay=t}}function LTt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$Tt:MTt)(t,e)):Ap(this.node(),t).delay}function BTt(e,t){return function(){hm(this,e).duration=+t.apply(this,arguments)}}function jTt(e,t){return t=+t,function(){hm(this,e).duration=t}}function UTt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?BTt:jTt)(t,e)):Ap(this.node(),t).duration}function zTt(e,t){if(typeof t!="function")throw new Error;return function(){hm(this,e).ease=t}}function VTt(e){var t=this._id;return arguments.length?this.each(zTt(t,e)):Ap(this.node(),t).ease}function HTt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;hm(this,e).ease=n}}function qTt(e){if(typeof e!="function")throw new Error;return this.each(HTt(this._id,e))}function WTt(e){typeof e!="function"&&(e=rNe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ny(r,this._parents,this._name,this._id)}function GTt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new ny(o,this._parents,this._name,this._id)}function YTt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function KTt(e,t,n){var r,i,s=YTt(t)?Qte:hm;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function XTt(e,t){var n=this._id;return arguments.length<2?Ap(this.node(),n).on.on(e):this.each(KTt(n,e,t))}function QTt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function JTt(){return this.on("end.remove",QTt(this._id))}function ZTt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ute(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,CB(l[d],t,n,d,l,Ap(c,n)));return new ny(s,this._parents,t,n)}function eAt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nNe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Ap(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&CB(h,t,n,m,d,p);s.push(d),o.push(c)}return new ny(s,o,t,n)}var tAt=_N.prototype.constructor;function nAt(){return new tAt(this._groups,this._parents)}function rAt(e,t){var n,r,i;return function(){var s=yT(this,e),o=(this.style.removeProperty(e),yT(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function HNe(e){return function(){this.style.removeProperty(e)}}function iAt(e,t,n){var r,i=n+"",s;return function(){var o=yT(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function sAt(e,t,n){var r,i,s;return function(){var o=yT(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),yT(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function oAt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=hm(this,e),l=u.on,c=u.value[s]==null?a||(a=HNe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function aAt(e,t,n){var r=(e+="")=="transform"?FNe:VNe;return t==null?this.styleTween(e,rAt(e,r)).on("end.style."+e,HNe(e)):typeof t=="function"?this.styleTween(e,sAt(e,r,Jte(this,"style."+e,t))).each(oAt(this._id,e)):this.styleTween(e,iAt(e,r,t),n).on("end.style."+e,null)}function uAt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function lAt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&uAt(e,o,n)),r}return s._value=t,s}function cAt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,lAt(e,t,n??""))}function fAt(e){return function(){this.textContent=e}}function dAt(e){return function(){var t=e(this);this.textContent=t??""}}function hAt(e){return this.tween("text",typeof e=="function"?dAt(Jte(this,"text",e)):fAt(e==null?"":e+""))}function pAt(e){return function(t){this.textContent=e.call(this,t)}}function mAt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&pAt(i)),t}return r._value=e,r}function gAt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,mAt(e))}function yAt(){for(var e=this._name,t=this._id,n=qNe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Ap(u,t);CB(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ny(r,this._parents,e,n)}function vAt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=hm(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var bAt=0;function ny(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function qNe(){return++bAt}var Vm=_N.prototype;ny.prototype={constructor:ny,select:ZTt,selectAll:eAt,selectChild:Vm.selectChild,selectChildren:Vm.selectChildren,filter:WTt,merge:GTt,selection:nAt,transition:yAt,call:Vm.call,nodes:Vm.nodes,node:Vm.node,size:Vm.size,empty:Vm.empty,each:Vm.each,on:XTt,attr:kTt,attrTween:FTt,style:aAt,styleTween:cAt,text:hAt,textTween:gAt,remove:JTt,tween:ETt,delay:LTt,duration:UTt,ease:VTt,easeVarying:qTt,end:vAt,[Symbol.iterator]:Vm[Symbol.iterator]};const xAt=e=>+e;function wAt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _At={time:null,delay:0,duration:250,ease:wAt};function EAt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function CAt(e){var t,n;e instanceof ny?(t=e._id,e=e._name):(t=qNe(),(n=_At).time=EB(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&CB(u,e,t,l,o,n||EAt(u,t));return new ny(r,this._parents,e,t)}_N.prototype.interrupt=xTt;_N.prototype.transition=CAt;const OV=e=>()=>e;function TAt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function AAt(e){e.stopImmediatePropagation()}function FV(e){e.preventDefault(),e.stopImmediatePropagation()}var pye={name:"drag"},$V={name:"space"},QE={name:"handle"},JE={name:"center"};const{abs:mye,max:Su,min:Du}=Math;function gye(e){return[+e[0],+e[1]]}function mY(e){return[gye(e[0]),gye(e[1])]}var fF={name:"x",handles:["w","e"].map(U3),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},dF={name:"y",handles:["n","s"].map(U3),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},SAt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(U3),input:function(e){return e==null?null:mY(e)},output:function(e){return e}},Hm={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yye={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},vye={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},DAt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},IAt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function U3(e){return{type:e}}function kAt(e){return!e.ctrlKey&&!e.button}function RAt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function NAt(){return navigator.maxTouchPoints||"ontouchstart"in this}function MV(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function PAt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function WNe(){return Zte(fF)}function GNe(){return Zte(dF)}function YNe(){return Zte(SAt)}function Zte(e){var t=RAt,n=kAt,r=NAt,i=!0,s=yB("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([U3("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Hm.overlay).merge(y).each(function(){var b=MV(this).extent;Tr(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([U3("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Hm.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Hm[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,x=b.__brush,_=c(b,arguments),C=x.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,x.extent),S=Sy(C,T);function k(I){x.selection=I===1&&T===null?null:S(I),l.call(b),_.brush()}return C!==null&&T!==null?k:k(1)}):g.each(function(){var b=this,x=arguments,_=b.__brush,C=e.input(typeof y=="function"?y.apply(b,x):y,_.extent),T=c(b,x).beforestart();pY(b),_.selection=C===null?null:C,l.call(b),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Tr(this),y=MV(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=Tr(this.that).datum();s.call(g,this.that,new TAt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?pye:i&&g.altKey?JE:QE,x=e===dF?null:DAt[v],_=e===fF?null:IAt[v],C=MV(y),T=C.extent,S=C.selection,k=T[0][0],I,R,F=T[0][1],O,B,H=T[1][0],U,G,Y=T[1][1],Q,M,j=0,W=0,L,q=x&&_&&i&&g.shiftKey,J,re,ve=Array.from(g.touches||[g],Ie=>{const Ve=Ie.identifier;return Ie=o8(Ie,y),Ie.point0=Ie.slice(),Ie.identifier=Ve,Ie});pY(y);var pe=c(y,arguments,!0).beforestart();if(v==="overlay"){S&&(L=!0);const Ie=[ve[0],ve[1]||ve[0]];C.selection=S=[[I=e===dF?k:Du(Ie[0][0],Ie[1][0]),O=e===fF?F:Du(Ie[0][1],Ie[1][1])],[U=e===dF?H:Su(Ie[0][0],Ie[1][0]),Q=e===fF?Y:Su(Ie[0][1],Ie[1][1])]],ve.length>1&&ut(g)}else I=S[0][0],O=S[0][1],U=S[1][0],Q=S[1][1];R=I,B=O,G=U,M=Q;var Ae=Tr(y).attr("pointer-events","none"),ke=Ae.selectAll(".overlay").attr("cursor",Hm[v]);if(g.touches)pe.moved=Re,pe.ended=Xe;else{var it=Tr(g.view).on("mousemove.brush",Re,!0).on("mouseup.brush",Xe,!0);i&&it.on("keydown.brush",Tt,!0).on("keyup.brush",gt,!0),SCt(g.view)}l.call(y),pe.start(g,b.name);function Re(Ie){for(const Ve of Ie.changedTouches||[Ie])for(const ft of ve)ft.identifier===Ve.identifier&&(ft.cur=o8(Ve,y));if(q&&!J&&!re&&ve.length===1){const Ve=ve[0];mye(Ve.cur[0]-Ve[0])>mye(Ve.cur[1]-Ve[1])?re=!0:J=!0}for(const Ve of ve)Ve.cur&&(Ve[0]=Ve.cur[0],Ve[1]=Ve.cur[1]);L=!0,FV(Ie),ut(Ie)}function ut(Ie){const Ve=ve[0],ft=Ve.point0;var _t;switch(j=Ve[0]-ft[0],W=Ve[1]-ft[1],b){case $V:case pye:{x&&(j=Su(k-I,Du(H-U,j)),R=I+j,G=U+j),_&&(W=Su(F-O,Du(Y-Q,W)),B=O+W,M=Q+W);break}case QE:{ve[1]?(x&&(R=Su(k,Du(H,ve[0][0])),G=Su(k,Du(H,ve[1][0])),x=1),_&&(B=Su(F,Du(Y,ve[0][1])),M=Su(F,Du(Y,ve[1][1])),_=1)):(x<0?(j=Su(k-I,Du(H-I,j)),R=I+j,G=U):x>0&&(j=Su(k-U,Du(H-U,j)),R=I,G=U+j),_<0?(W=Su(F-O,Du(Y-O,W)),B=O+W,M=Q):_>0&&(W=Su(F-Q,Du(Y-Q,W)),B=O,M=Q+W));break}case JE:{x&&(R=Su(k,Du(H,I-j*x)),G=Su(k,Du(H,U+j*x))),_&&(B=Su(F,Du(Y,O-W*_)),M=Su(F,Du(Y,Q+W*_)));break}}G<R&&(x*=-1,_t=I,I=U,U=_t,_t=R,R=G,G=_t,v in yye&&ke.attr("cursor",Hm[v=yye[v]])),M<B&&(_*=-1,_t=O,O=Q,Q=_t,_t=B,B=M,M=_t,v in vye&&ke.attr("cursor",Hm[v=vye[v]])),C.selection&&(S=C.selection),J&&(R=S[0][0],G=S[1][0]),re&&(B=S[0][1],M=S[1][1]),(S[0][0]!==R||S[0][1]!==B||S[1][0]!==G||S[1][1]!==M)&&(C.selection=[[R,B],[G,M]],l.call(y),pe.brush(Ie,b.name))}function Xe(Ie){if(AAt(Ie),Ie.touches){if(Ie.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else DCt(Ie.view,L),it.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ae.attr("pointer-events","all"),ke.attr("cursor",Hm.overlay),C.selection&&(S=C.selection),PAt(S)&&(C.selection=null,l.call(y)),pe.end(Ie,b.name)}function Tt(Ie){switch(Ie.keyCode){case 16:{q=x&&_;break}case 18:{b===QE&&(x&&(U=G-j*x,I=R+j*x),_&&(Q=M-W*_,O=B+W*_),b=JE,ut(Ie));break}case 32:{(b===QE||b===JE)&&(x<0?U=G-j:x>0&&(I=R-j),_<0?Q=M-W:_>0&&(O=B-W),b=$V,ke.attr("cursor",Hm.selection),ut(Ie));break}default:return}FV(Ie)}function gt(Ie){switch(Ie.keyCode){case 16:{q&&(J=re=q=!1,ut(Ie));break}case 18:{b===JE&&(x<0?U=G:x>0&&(I=R),_<0?Q=M:_>0&&(O=B),b=QE,ut(Ie));break}case 32:{b===$V&&(Ie.altKey?(x&&(U=G-j*x,I=R+j*x),_&&(Q=M-W*_,O=B+W*_),b=JE):(x<0?U=G:x>0&&(I=R),_<0?Q=M:_>0&&(O=B),b=QE),ke.attr("cursor",Hm[v]),ut(Ie));break}default:return}FV(Ie)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=mY(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:OV(mY(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:OV(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:OV(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const gY=Math.PI,yY=2*gY,Nx=1e-6,OAt=yY-Nx;function KNe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function FAt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return KNe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let ene=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?KNe:FAt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Nx)if(!(Math.abs(f*u-l*c)>Nx)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((gY-Math.acos((m+d-g)/(2*y*v)))/2),x=b/v,_=b/y;Math.abs(x-1)>Nx&&this._append`L${t+x*c},${n+x*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Nx||Math.abs(this._y1-c)>Nx)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%yY+yY),d>OAt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Nx&&this._append`A${r},${r},0,${+(d>=gY)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function TB(){return new ene}TB.prototype=ene.prototype;const $g=11102230246251565e-32,Iu=134217729,$At=(3+8*$g)*$g;function LV(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function MAt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function TN(e){return new Float64Array(e)}const LAt=(3+16*$g)*$g,BAt=(2+12*$g)*$g,jAt=(9+64*$g)*$g*$g,ZE=TN(4),bye=TN(8),xye=TN(12),wye=TN(16),vl=TN(4);function UAt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,x,_,C,T,S;const k=e-i,I=n-i,R=t-s,F=r-s;x=k*F,d=Iu*k,h=d-(d-k),p=k-h,d=Iu*F,m=d-(d-F),g=F-m,_=p*g-(x-h*m-p*m-h*g),C=R*I,d=Iu*R,h=d-(d-R),p=R-h,d=Iu*I,m=d-(d-I),g=I-m,T=p*g-(C-h*m-p*m-h*g),y=_-T,f=_-y,ZE[0]=_-(y+f)+(f-T),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,ZE[1]=b-(y+f)+(f-C),S=v+y,f=S-v,ZE[2]=v-(S-f)+(y-f),ZE[3]=S;let O=MAt(4,ZE),B=BAt*o;if(O>=B||-O>=B||(f=e-k,a=e-(k+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-F,c=r-(F+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(B=jAt*o+$At*Math.abs(O),O+=k*c+F*a-(R*l+I*u),O>=B||-O>=B))return O;x=a*F,d=Iu*a,h=d-(d-a),p=a-h,d=Iu*F,m=d-(d-F),g=F-m,_=p*g-(x-h*m-p*m-h*g),C=u*I,d=Iu*u,h=d-(d-u),p=u-h,d=Iu*I,m=d-(d-I),g=I-m,T=p*g-(C-h*m-p*m-h*g),y=_-T,f=_-y,vl[0]=_-(y+f)+(f-T),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,vl[1]=b-(y+f)+(f-C),S=v+y,f=S-v,vl[2]=v-(S-f)+(y-f),vl[3]=S;const H=LV(4,ZE,4,vl,bye);x=k*c,d=Iu*k,h=d-(d-k),p=k-h,d=Iu*c,m=d-(d-c),g=c-m,_=p*g-(x-h*m-p*m-h*g),C=R*l,d=Iu*R,h=d-(d-R),p=R-h,d=Iu*l,m=d-(d-l),g=l-m,T=p*g-(C-h*m-p*m-h*g),y=_-T,f=_-y,vl[0]=_-(y+f)+(f-T),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,vl[1]=b-(y+f)+(f-C),S=v+y,f=S-v,vl[2]=v-(S-f)+(y-f),vl[3]=S;const U=LV(H,bye,4,vl,xye);x=a*c,d=Iu*a,h=d-(d-a),p=a-h,d=Iu*c,m=d-(d-c),g=c-m,_=p*g-(x-h*m-p*m-h*g),C=u*l,d=Iu*u,h=d-(d-u),p=u-h,d=Iu*l,m=d-(d-l),g=l-m,T=p*g-(C-h*m-p*m-h*g),y=_-T,f=_-y,vl[0]=_-(y+f)+(f-T),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,vl[1]=b-(y+f)+(f-C),S=v+y,f=S-v,vl[2]=v-(S-f)+(y-f),vl[3]=S;const G=LV(U,xye,4,vl,wye);return wye[G-1]}function x6(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=LAt*l?u:-UAt(e,t,n,r,i,s,l)}const _ye=Math.pow(2,-52),w6=new Uint32Array(512);class p8{static from(t,n=WAt,r=GAt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new p8(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let k=0;k<o;k++){const I=t[2*k],R=t[2*k+1];I<a&&(a=I),R<u&&(u=R),I>l&&(l=I),R>c&&(c=R),this._ids[k]=k}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let k=0,I=1/0;k<o;k++){const R=BV(f,d,t[2*k],t[2*k+1]);R<I&&(h=k,I=R)}const g=t[2*h],y=t[2*h+1];for(let k=0,I=1/0;k<o;k++){if(k===h)continue;const R=BV(g,y,t[2*k],t[2*k+1]);R<I&&R>0&&(p=k,I=R)}let v=t[2*p],b=t[2*p+1],x=1/0;for(let k=0;k<o;k++){if(k===h||k===p)continue;const I=HAt(g,y,v,b,t[2*k],t[2*k+1]);I<x&&(m=k,x=I)}let _=t[2*m],C=t[2*m+1];if(x===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];X2(this._ids,this._dists,0,o-1);const k=new Uint32Array(o);let I=0;for(let R=0,F=-1/0;R<o;R++){const O=this._ids[R],B=this._dists[O];B>F&&(k[I++]=O,F=B)}this.hull=k.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(x6(g,y,v,b,_,C)<0){const k=p,I=v,R=b;p=m,v=_,b=C,m=k,_=I,C=R}const T=qAt(g,y,v,b,_,C);this._cx=T.x,this._cy=T.y;for(let k=0;k<o;k++)this._dists[k]=BV(t[2*k],t[2*k+1],T.x,T.y);X2(this._ids,this._dists,0,o-1),this._hullStart=h;let S=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(_,C)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let k=0,I,R;k<this._ids.length;k++){const F=this._ids[k],O=t[2*F],B=t[2*F+1];if(k>0&&Math.abs(O-I)<=_ye&&Math.abs(B-R)<=_ye||(I=O,R=B,F===h||F===p||F===m))continue;let H=0;for(let M=0,j=this._hashKey(O,B);M<this._hashSize&&(H=s[(j+M)%this._hashSize],!(H!==-1&&H!==r[H]));M++);H=n[H];let U=H,G;for(;G=r[U],x6(O,B,t[2*U],t[2*U+1],t[2*G],t[2*G+1])>=0;)if(U=G,U===H){U=-1;break}if(U===-1)continue;let Y=this._addTriangle(U,F,r[U],-1,-1,i[U]);i[F]=this._legalize(Y+2),i[U]=Y,S++;let Q=r[U];for(;G=r[Q],x6(O,B,t[2*Q],t[2*Q+1],t[2*G],t[2*G+1])<0;)Y=this._addTriangle(Q,F,G,i[F],-1,i[Q]),i[F]=this._legalize(Y+2),r[Q]=Q,S--,Q=G;if(U===H)for(;G=n[U],x6(O,B,t[2*G],t[2*G+1],t[2*U],t[2*U+1])<0;)Y=this._addTriangle(G,F,U,-1,i[U],i[G]),this._legalize(Y+2),i[G]=Y,r[U]=U,S--,U=G;this._hullStart=n[F]=U,r[U]=n[Q]=F,r[F]=Q,s[this._hashKey(O,B)]=F,s[this._hashKey(t[2*U],t[2*U+1])]=U}this.hull=new Uint32Array(S);for(let k=0,I=this._hullStart;k<S;k++)this.hull[k]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(zAt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=w6[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(VAt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<w6.length&&(w6[s++]=v)}else{if(s===0)break;t=w6[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function zAt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function BV(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function VAt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function HAt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function qAt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function X2(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;DD(e,i,s),t[e[n]]>t[e[r]]&&DD(e,n,r),t[e[s]]>t[e[r]]&&DD(e,s,r),t[e[n]]>t[e[s]]&&DD(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;DD(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(X2(e,t,s,r),X2(e,t,n,o-1)):(X2(e,t,n,o-1),X2(e,t,s,r))}}function DD(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function WAt(e){return e[0]}function GAt(e){return e[1]}const Eye=1e-6;class dw{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Eye||Math.abs(this._y1-s)>Eye)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class vY{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let YAt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const x=r[m]*2,_=r[m+1]*2,C=r[m+2]*2,T=t[x],S=t[x+1],k=t[_],I=t[_+1],R=t[C],F=t[C+1],O=k-T,B=I-S,H=R-T,U=F-S,G=(O*U-B*H)*2;if(Math.abs(G)<1e-9){if(s===void 0){s=o=0;for(const Q of n)s+=t[Q*2],o+=t[Q*2+1];s/=n.length,o/=n.length}const Y=1e9*Math.sign((s-T)*U-(o-S)*H);v=(T+R)/2-Y*U,b=(S+F)/2+Y*H}else{const Y=1/G,Q=O*O+B*B,M=H*H+U*U;v=T+(U*Q-B*M)*Y,b=S+(O*M-H*Q)*Y}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new dw:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new dw:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new dw:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new vY;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const KAt=2*Math.PI,e2=Math.pow;function XAt(e){return e[0]}function QAt(e){return e[1]}function JAt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function ZAt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class tne{static from(t,n=XAt,r=QAt,i){return new tne("length"in t?eSt(t,n,r,i):Float64Array.from(tSt(t,n,r,i)))}constructor(t){this._delaunator=new p8(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&JAt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=ZAt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new p8(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new YAt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=e2(n-l[t*2],2)+e2(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=e2(n-l[p*2],2)+e2(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&e2(n-l[h*2],2)+e2(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new dw:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new dw:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,KAt)}return r&&r.value()}renderHull(t){const n=t==null?t=new dw:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new vY;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new dw:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new vY;return this.renderTriangle(t,n),n.value()}}function eSt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*tSt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Cye={},jV={},UV=34,ID=10,zV=13;function XNe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function nSt(e,t){var n=XNe(e);return function(r,i){return t(n(r),i,e)}}function Tye(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function cc(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function rSt(e){return e<0?"-"+cc(-e,6):e>9999?"+"+cc(e,6):cc(e,4)}function iSt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":rSt(e.getUTCFullYear())+"-"+cc(e.getUTCMonth()+1,2)+"-"+cc(e.getUTCDate(),2)+(i?"T"+cc(t,2)+":"+cc(n,2)+":"+cc(r,2)+"."+cc(i,3)+"Z":r?"T"+cc(t,2)+":"+cc(n,2)+":"+cc(r,2)+"Z":n||t?"T"+cc(t,2)+":"+cc(n,2)+"Z":"")}function QNe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?nSt(g,d):XNe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===ID&&--p,f.charCodeAt(p-1)===zV&&--p;function x(){if(v)return jV;if(b)return b=!1,Cye;var C,T=m,S;if(f.charCodeAt(T)===UV){for(;m++<p&&f.charCodeAt(m)!==UV||f.charCodeAt(++m)===UV;);return(C=m)>=p?v=!0:(S=f.charCodeAt(m++))===ID?b=!0:S===zV&&(b=!0,f.charCodeAt(m)===ID&&++m),f.slice(T+1,C-1).replace(/""/g,'"')}for(;m<p;){if((S=f.charCodeAt(C=m++))===ID)b=!0;else if(S===zV)b=!0,f.charCodeAt(m)===ID&&++m;else if(S!==n)continue;return f.slice(T,C)}return v=!0,f.slice(T,p)}for(;(y=x())!==jV;){for(var _=[];y!==Cye&&y!==jV;)_.push(y),y=x();d&&(_=d(_,g++))==null||h.push(_)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Tye(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Tye(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?iSt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var sSt=QNe(","),oSt=sSt.parse;function aSt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function uSt(e,t){return fetch(e,t).then(aSt)}function lSt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),uSt(t,n).then(function(i){return e(i,r)})}}var JNe=lSt(oSt);function cSt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function fSt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return ZNe(this.cover(t,n),t,n,e)}function ZNe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function dSt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)ZNe(this,o[n],a[n],e[n]);return this}function hSt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function pSt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function mSt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Il(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function gSt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Il(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Il(h[3],g,y,u,l),new Il(h[2],o,y,g,l),new Il(h[1],g,a,u,y),new Il(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var _=Math.sqrt(n=x);i=e-_,s=t-_,c=e+_,f=t+_,r=h.data}}return r}function ySt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function vSt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function bSt(){return this._root}function xSt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function wSt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Il(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Il(i,l,c,a,u)),(i=r[2])&&t.push(new Il(i,s,c,l,u)),(i=r[1])&&t.push(new Il(i,l,o,a,c)),(i=r[0])&&t.push(new Il(i,s,o,l,c))}return this}function _St(e){var t=[],n=[],r;for(this._root&&t.push(new Il(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Il(s,o,a,c,f)),(s=i[1])&&t.push(new Il(s,c,a,u,f)),(s=i[2])&&t.push(new Il(s,o,f,c,l)),(s=i[3])&&t.push(new Il(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function ESt(e){return e[0]}function CSt(e){return arguments.length?(this._x=e,this):this._x}function TSt(e){return e[1]}function ASt(e){return arguments.length?(this._y=e,this):this._y}function nne(e,t,n){var r=new rne(t??ESt,n??TSt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function rne(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Aye(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Xl=nne.prototype=rne.prototype;Xl.copy=function(){var e=new rne(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Aye(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Aye(r));return e};Xl.add=fSt;Xl.addAll=dSt;Xl.cover=hSt;Xl.data=pSt;Xl.extent=mSt;Xl.find=gSt;Xl.remove=ySt;Xl.removeAll=vSt;Xl.root=bSt;Xl.size=xSt;Xl.visit=wSt;Xl.visitAfter=_St;Xl.x=CSt;Xl.y=ASt;function Rl(e){return function(){return e}}function j1(e){return(e()-.5)*1e-6}function SSt(e){return e.x+e.vx}function DSt(e){return e.y+e.vy}function ISt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Rl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=nne(t,SSt,DSt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,_,C,T){var S=b.data,k=b.r,I=m+k;if(S){if(S.index>d.index){var R=h-S.x-S.vx,F=p-S.y-S.vy,O=R*R+F*F;O<I*I&&(R===0&&(R=j1(r),O+=R*R),F===0&&(F=j1(r),O+=F*F),O=(I-(O=Math.sqrt(O)))/O*i,d.vx+=(R*=O)*(I=(k*=k)/(g+k)),d.vy+=(F*=O)*I,S.vx-=R*(I=1-I),S.vy-=F*I)}return}return x>h+I||C<h-I||_>p+I||T<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Rl(+l),u(),o):e},o}function kSt(e){return e.index}function Sye(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function RSt(e){var t=kSt,n=f,r,i=Rl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,_,C,T,S,k,I;b<v;++b)x=e[b],_=x.source,C=x.target,T=C.x+C.vx-_.x-_.vx||j1(l),S=C.y+C.vy-_.y-_.vy||j1(l),k=Math.sqrt(T*T+S*S),k=(k-s[b])/k*g*r[b],T*=k,S*=k,C.vx-=T*(I=u[b]),C.vy-=S*I,_.vx+=T*(I=1-I),_.vy+=S*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((_,C)=>[t(_,C,o),_])),x;for(g=0,a=new Array(y);g<v;++g)x=e[g],x.index=g,typeof x.source!="object"&&(x.source=Sye(b,x.source)),typeof x.target!="object"&&(x.target=Sye(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)x=e[g],u[g]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Rl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Rl(+g),m(),d):i},d}const NSt=1664525,PSt=1013904223,Dye=4294967296;function OSt(){let e=1;return()=>(e=(NSt*e+PSt)%Dye)/Dye}function FSt(e){return e.x}function $St(e){return e.y}var MSt=10,LSt=Math.PI*(3-Math.sqrt(5));function BSt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=Xte(f),l=yB("tick","end"),c=OSt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(x){x(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=MSt*Math.sqrt(.5+m),b=m*LSt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,x,_,C,T,S;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],x=m-T.x,_=g-T.y,C=x*x+_*_,C<y&&(S=T,y=C);return S},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function jSt(){var e,t,n,r,i=Rl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=nne(e,FSt,$St).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(m=h[x])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,x=y*y+v*v;if(b*b/u<x)return x<a&&(y===0&&(y=j1(n),x+=y*y),v===0&&(v=j1(n),x+=v*v),x<o&&(x=Math.sqrt(o*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=j1(n),x+=y*y),v===0&&(v=j1(n),x+=v*v),x<o&&(x=Math.sqrt(o*x)));do h.data!==t&&(b=s[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Rl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function USt(e){var t=Rl(.1),n,r,i;typeof e!="function"&&(e=Rl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Rl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Rl(+a),o(),s):e},s}function zSt(e){var t=Rl(.1),n,r,i;typeof e!="function"&&(e=Rl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Rl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Rl(+a),o(),s):e},s}function VSt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function m8(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xT(e){return e=m8(Math.abs(e)),e?e[1]:NaN}function HSt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function qSt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var WSt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xw(e){if(!(t=WSt.exec(e)))throw new Error("invalid format: "+e);var t;return new ine({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xw.prototype=ine.prototype;function ine(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ine.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GSt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ePe;function YSt(e,t){var n=m8(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ePe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+m8(e,Math.max(0,t+s-1))[0]}function Iye(e,t){var n=m8(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const kye={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:VSt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Iye(e*100,t),r:Iye,s:YSt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Rye(e){return e}var Nye=Array.prototype.map,Pye=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tPe(e){var t=e.grouping===void 0||e.thousands===void 0?Rye:HSt(Nye.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Rye:qSt(Nye.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Xw(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,_=f.type;_==="n"?(v=!0,_="g"):kye[_]||(b===void 0&&(b=12),x=!0,_="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",T=m==="$"?r:/[%p]/.test(_)?o:"",S=kye[_],k=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(R){var F=C,O=T,B,H,U;if(_==="c")O=S(R)+O,R="";else{R=+R;var G=R<0||1/R<0;if(R=isNaN(R)?u:S(Math.abs(R),b),x&&(R=GSt(R)),G&&+R==0&&p!=="+"&&(G=!1),F=(G?p==="("?p:a:p==="-"||p==="("?"":p)+F,O=(_==="s"?Pye[8+ePe/3]:"")+O+(G&&p==="("?")":""),k){for(B=-1,H=R.length;++B<H;)if(U=R.charCodeAt(B),48>U||U>57){O=(U===46?i+R.slice(B+1):R.slice(B))+O,R=R.slice(0,B);break}}}v&&!g&&(R=t(R,1/0));var Y=F.length+R.length+O.length,Q=Y<y?new Array(y-Y+1).join(d):"";switch(v&&g&&(R=t(Q+R,Q.length?y-O.length:1/0),Q=""),h){case"<":R=F+R+O+Q;break;case"=":R=F+Q+R+O;break;case"^":R=Q.slice(0,Y=Q.length>>1)+F+R+O+Q.slice(Y);break;default:R=Q+F+R+O;break}return s(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=Xw(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(xT(d)/3)))*3,m=Math.pow(10,-p),g=Pye[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var _6,kb,sne;KSt({thousands:",",grouping:[3],currency:["$",""]});function KSt(e){return _6=tPe(e),kb=_6.format,sne=_6.formatPrefix,_6}function nPe(e){return Math.max(0,-xT(Math.abs(e)))}function rPe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xT(t)/3)))*3-xT(Math.abs(e)))}function iPe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xT(t)-xT(e))+1}var An=1e-6,bY=1e-12,Ar=Math.PI,co=Ar/2,g8=Ar/4,Vl=Ar*2,_o=180/Ar,Er=Ar/180,Kr=Math.abs,XA=Math.atan,jd=Math.atan2,Tn=Math.cos,E6=Math.ceil,sPe=Math.exp,xY=Math.hypot,y8=Math.log,VV=Math.pow,gn=Math.sin,kd=Math.sign||function(e){return e>0?1:e<0?-1:0},Hl=Math.sqrt,one=Math.tan;function oPe(e){return e>1?0:e<-1?Ar:Math.acos(e)}function zc(e){return e>1?co:e<-1?-co:Math.asin(e)}function ou(){}function v8(e,t){e&&Fye.hasOwnProperty(e.type)&&Fye[e.type](e,t)}var Oye={Feature:function(e,t){v8(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)v8(n[r].geometry,t)}},Fye={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){wY(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)wY(n[r],t,0)},Polygon:function(e,t){$ye(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$ye(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)v8(n[r],t)}};function wY(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function $ye(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)wY(e[n],t,1);t.polygonEnd()}function lg(e,t){e&&Oye.hasOwnProperty(e.type)?Oye[e.type](e,t):v8(e,t)}var b8=new Fl,x8=new Fl,aPe,uPe,_Y,EY,CY,H0={point:ou,lineStart:ou,lineEnd:ou,polygonStart:function(){b8=new Fl,H0.lineStart=XSt,H0.lineEnd=QSt},polygonEnd:function(){var e=+b8;x8.add(e<0?Vl+e:e),this.lineStart=this.lineEnd=this.point=ou},sphere:function(){x8.add(Vl)}};function XSt(){H0.point=JSt}function QSt(){lPe(aPe,uPe)}function JSt(e,t){H0.point=lPe,aPe=e,uPe=t,e*=Er,t*=Er,_Y=e,EY=Tn(t=t/2+g8),CY=gn(t)}function lPe(e,t){e*=Er,t*=Er,t=t/2+g8;var n=e-_Y,r=n>=0?1:-1,i=r*n,s=Tn(t),o=gn(t),a=CY*o,u=EY*s+a*Tn(i),l=a*r*gn(i);b8.add(jd(l,u)),_Y=e,EY=s,CY=o}function ZSt(e){return x8=new Fl,lg(e,H0),x8*2}function w8(e){return[jd(e[1],e[0]),zc(e[2])]}function Qw(e){var t=e[0],n=e[1],r=Tn(n);return[r*Tn(t),r*gn(t),gn(n)]}function C6(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function wT(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function HV(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function T6(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _8(e){var t=Hl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ws,vc,eo,yf,Px,cPe,fPe,EC,Ek,v1,ry,rg={point:TY,lineStart:Mye,lineEnd:Lye,polygonStart:function(){rg.point=hPe,rg.lineStart=eDt,rg.lineEnd=tDt,Ek=new Fl,H0.polygonStart()},polygonEnd:function(){H0.polygonEnd(),rg.point=TY,rg.lineStart=Mye,rg.lineEnd=Lye,b8<0?(Ws=-(eo=180),vc=-(yf=90)):Ek>An?yf=90:Ek<-1e-6&&(vc=-90),ry[0]=Ws,ry[1]=eo},sphere:function(){Ws=-(eo=180),vc=-(yf=90)}};function TY(e,t){v1.push(ry=[Ws=e,eo=e]),t<vc&&(vc=t),t>yf&&(yf=t)}function dPe(e,t){var n=Qw([e*Er,t*Er]);if(EC){var r=wT(EC,n),i=[r[1],-r[0],0],s=wT(i,r);_8(s),s=w8(s);var o=e-Px,a=o>0?1:-1,u=s[0]*_o*a,l,c=Kr(o)>180;c^(a*Px<u&&u<a*e)?(l=s[1]*_o,l>yf&&(yf=l)):(u=(u+360)%360-180,c^(a*Px<u&&u<a*e)?(l=-s[1]*_o,l<vc&&(vc=l)):(t<vc&&(vc=t),t>yf&&(yf=t))),c?e<Px?mf(Ws,e)>mf(Ws,eo)&&(eo=e):mf(e,eo)>mf(Ws,eo)&&(Ws=e):eo>=Ws?(e<Ws&&(Ws=e),e>eo&&(eo=e)):e>Px?mf(Ws,e)>mf(Ws,eo)&&(eo=e):mf(e,eo)>mf(Ws,eo)&&(Ws=e)}else v1.push(ry=[Ws=e,eo=e]);t<vc&&(vc=t),t>yf&&(yf=t),EC=n,Px=e}function Mye(){rg.point=dPe}function Lye(){ry[0]=Ws,ry[1]=eo,rg.point=TY,EC=null}function hPe(e,t){if(EC){var n=e-Px;Ek.add(Kr(n)>180?n+(n>0?360:-360):n)}else cPe=e,fPe=t;H0.point(e,t),dPe(e,t)}function eDt(){H0.lineStart()}function tDt(){hPe(cPe,fPe),H0.lineEnd(),Kr(Ek)>An&&(Ws=-(eo=180)),ry[0]=Ws,ry[1]=eo,EC=null}function mf(e,t){return(t-=e)<0?t+360:t}function nDt(e,t){return e[0]-t[0]}function Bye(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function rDt(e){var t,n,r,i,s,o,a;if(yf=eo=-(Ws=vc=1/0),v1=[],lg(e,rg),n=v1.length){for(v1.sort(nDt),t=1,r=v1[0],s=[r];t<n;++t)i=v1[t],Bye(r,i[0])||Bye(r,i[1])?(mf(r[0],i[1])>mf(r[0],r[1])&&(r[1]=i[1]),mf(i[0],r[1])>mf(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=mf(r[1],i[0]))>o&&(o=a,Ws=i[0],eo=r[1])}return v1=ry=null,Ws===1/0||vc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ws,vc],[eo,yf]]}var _I,E8,C8,T8,A8,S8,D8,I8,AY,SY,DY,pPe,mPe,Al,Sl,Dl,Wh={sphere:ou,point:ane,lineStart:jye,lineEnd:Uye,polygonStart:function(){Wh.lineStart=oDt,Wh.lineEnd=aDt},polygonEnd:function(){Wh.lineStart=jye,Wh.lineEnd=Uye}};function ane(e,t){e*=Er,t*=Er;var n=Tn(t);AN(n*Tn(e),n*gn(e),gn(t))}function AN(e,t,n){++_I,C8+=(e-C8)/_I,T8+=(t-T8)/_I,A8+=(n-A8)/_I}function jye(){Wh.point=iDt}function iDt(e,t){e*=Er,t*=Er;var n=Tn(t);Al=n*Tn(e),Sl=n*gn(e),Dl=gn(t),Wh.point=sDt,AN(Al,Sl,Dl)}function sDt(e,t){e*=Er,t*=Er;var n=Tn(t),r=n*Tn(e),i=n*gn(e),s=gn(t),o=jd(Hl((o=Sl*s-Dl*i)*o+(o=Dl*r-Al*s)*o+(o=Al*i-Sl*r)*o),Al*r+Sl*i+Dl*s);E8+=o,S8+=o*(Al+(Al=r)),D8+=o*(Sl+(Sl=i)),I8+=o*(Dl+(Dl=s)),AN(Al,Sl,Dl)}function Uye(){Wh.point=ane}function oDt(){Wh.point=uDt}function aDt(){gPe(pPe,mPe),Wh.point=ane}function uDt(e,t){pPe=e,mPe=t,e*=Er,t*=Er,Wh.point=gPe;var n=Tn(t);Al=n*Tn(e),Sl=n*gn(e),Dl=gn(t),AN(Al,Sl,Dl)}function gPe(e,t){e*=Er,t*=Er;var n=Tn(t),r=n*Tn(e),i=n*gn(e),s=gn(t),o=Sl*s-Dl*i,a=Dl*r-Al*s,u=Al*i-Sl*r,l=xY(o,a,u),c=zc(l),f=l&&-c/l;AY.add(f*o),SY.add(f*a),DY.add(f*u),E8+=c,S8+=c*(Al+(Al=r)),D8+=c*(Sl+(Sl=i)),I8+=c*(Dl+(Dl=s)),AN(Al,Sl,Dl)}function lDt(e){_I=E8=C8=T8=A8=S8=D8=I8=0,AY=new Fl,SY=new Fl,DY=new Fl,lg(e,Wh);var t=+AY,n=+SY,r=+DY,i=xY(t,n,r);return i<bY&&(t=S8,n=D8,r=I8,E8<An&&(t=C8,n=T8,r=A8),i=xY(t,n,r),i<bY)?[NaN,NaN]:[jd(n,t)*_o,zc(r/i)*_o]}function IY(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function kY(e,t){return Kr(e)>Ar&&(e-=Math.round(e/Vl)*Vl),[e,t]}kY.invert=kY;function yPe(e,t,n){return(e%=Vl)?t||n?IY(Vye(e),Hye(t,n)):Vye(e):t||n?Hye(t,n):kY}function zye(e){return function(t,n){return t+=e,Kr(t)>Ar&&(t-=Math.round(t/Vl)*Vl),[t,n]}}function Vye(e){var t=zye(e);return t.invert=zye(-e),t}function Hye(e,t){var n=Tn(e),r=gn(e),i=Tn(t),s=gn(t);function o(a,u){var l=Tn(u),c=Tn(a)*l,f=gn(a)*l,d=gn(u),h=d*n+c*r;return[jd(f*i-h*s,c*n-d*r),zc(h*i+f*s)]}return o.invert=function(a,u){var l=Tn(u),c=Tn(a)*l,f=gn(a)*l,d=gn(u),h=d*i-f*s;return[jd(f*i+d*s,c*n+h*r),zc(h*n-c*r)]},o}function cDt(e){e=yPe(e[0]*Er,e[1]*Er,e.length>2?e[2]*Er:0);function t(n){return n=e(n[0]*Er,n[1]*Er),n[0]*=_o,n[1]*=_o,n}return t.invert=function(n){return n=e.invert(n[0]*Er,n[1]*Er),n[0]*=_o,n[1]*=_o,n},t}function fDt(e,t,n,r,i,s){if(n){var o=Tn(t),a=gn(t),u=r*n;i==null?(i=t+r*Vl,s=t-u/2):(i=qye(o,i),s=qye(o,s),(r>0?i<s:i>s)&&(i+=r*Vl));for(var l,c=i;r>0?c>s:c<s;c-=u)l=w8([o,-a*Tn(c),-a*gn(c)]),e.point(l[0],l[1])}}function qye(e,t){t=Qw(t),t[0]-=e,_8(t);var n=oPe(-t[1]);return((-t[2]<0?-n:n)+Vl-An)%Vl}function vPe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ou,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function hF(e,t){return Kr(e[0]-t[0])<An&&Kr(e[1]-t[1])<An}function A6(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function bPe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(hF(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*An}s.push(v=new A6(g,p,null,!0)),o.push(v.o=new A6(g,null,v,!1)),s.push(v=new A6(y,p,null,!1)),o.push(v.o=new A6(y,null,v,!0))}}),!!s.length){for(o.sort(t),Wye(s),Wye(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Wye(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function qV(e){return Kr(e[0])<=Ar?e[0]:kd(e[0])*((Kr(e[0])+Ar)%Vl-Ar)}function dDt(e,t){var n=qV(t),r=t[1],i=gn(r),s=[gn(n),-Tn(n),0],o=0,a=0,u=new Fl;i===1?r=co+An:i===-1&&(r=-co-An);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=qV(h),m=h[1]/2+g8,g=gn(m),y=Tn(m),v=0;v<d;++v,p=x,g=C,y=T,h=b){var b=f[v],x=qV(b),_=b[1]/2+g8,C=gn(_),T=Tn(_),S=x-p,k=S>=0?1:-1,I=k*S,R=I>Ar,F=g*C;if(u.add(jd(F*k*gn(I),y*T+F*Tn(I))),o+=R?S+k*Vl:S,R^p>=n^x>=n){var O=wT(Qw(h),Qw(b));_8(O);var B=wT(s,O);_8(B);var H=(R^S>=0?-1:1)*zc(B[2]);(r>H||r===H&&(O[0]||O[1]))&&(a+=R^S>=0?1:-1)}}return(o<-1e-6||o<An&&u<-1e-12)^a&1}function xPe(e,t,n,r){return function(i){var s=t(i),o=vPe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=QRe(c);var x=dDt(l,r);c.length?(u||(i.polygonStart(),u=!0),bPe(c,pDt,x,n,i)):x&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,_){e(x,_)&&i.point(x,_)}function p(x,_){s.point(x,_)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(x,_){f.push([x,_]),a.point(x,_)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),_=o.result(),C,T=_.length,S,k,I;if(f.pop(),l.push(f),f=null,!!T){if(x&1){if(k=_[0],(S=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<S;++C)i.point((I=k[C])[0],I[1]);i.lineEnd()}return}T>1&&x&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(hDt))}}return d}}function hDt(e){return e.length>1}function pDt(e,t){return((e=e.x)[0]<0?e[1]-co-An:co-e[1])-((t=t.x)[0]<0?t[1]-co-An:co-t[1])}const Gye=xPe(function(){return!0},mDt,yDt,[-Ar,-co]);function mDt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Ar:-Ar,u=Kr(s-t);Kr(u-Ar)<An?(e.point(t,n=(n+o)/2>0?co:-co),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Ar&&(Kr(t-r)<An&&(t-=r*An),Kr(s-a)<An&&(s-=a*An),n=gDt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function gDt(e,t,n,r){var i,s,o=gn(e-n);return Kr(o)>An?XA((gn(t)*(s=Tn(r))*gn(n)-gn(r)*(i=Tn(t))*gn(e))/(i*s*o)):(t+r)/2}function yDt(e,t,n,r){var i;if(e==null)i=n*co,r.point(-Ar,i),r.point(0,i),r.point(Ar,i),r.point(Ar,0),r.point(Ar,-i),r.point(0,-i),r.point(-Ar,-i),r.point(-Ar,0),r.point(-Ar,i);else if(Kr(e[0]-t[0])>An){var s=e[0]<t[0]?Ar:-Ar;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function vDt(e){var t=Tn(e),n=2*Er,r=t>0,i=Kr(t)>An;function s(c,f,d,h){fDt(h,e,n,d,c,f)}function o(c,f){return Tn(c)*Tn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,x=o(g,y),_=r?x?0:l(g,y):x?l(g+(g<0?Ar:-Ar),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=u(f,v),(!b||hF(f,b)||hF(v,b))&&(v[2]=1)),x!==h)m=0,x?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var C;!(_&d)&&(C=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}x&&(!f||!hF(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=_},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Qw(c),p=Qw(f),m=[1,0,0],g=wT(h,p),y=C6(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,_=-t*v/b,C=wT(m,g),T=T6(m,x),S=T6(g,_);HV(T,S);var k=C,I=C6(T,k),R=C6(k,k),F=I*I-R*(C6(T,T)-1);if(!(F<0)){var O=Hl(F),B=T6(k,(-I-O)/R);if(HV(B,T),B=w8(B),!d)return B;var H=c[0],U=f[0],G=c[1],Y=f[1],Q;U<H&&(Q=H,H=U,U=Q);var M=U-H,j=Kr(M-Ar)<An,W=j||M<An;if(!j&&Y<G&&(Q=G,G=Y,Y=Q),W?j?G+Y>0^B[1]<(Kr(B[0]-H)<An?G:Y):G<=B[1]&&B[1]<=Y:M>Ar^(H<=B[0]&&B[0]<=U)){var L=T6(k,(-I+O)/R);return HV(L,T),[B,w8(L)]}}}function l(c,f){var d=r?e:Ar-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return xPe(o,a,s,r?[0,-e]:[-Ar,e-Ar])}function bDt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var S6=1e9,D6=-1e9;function wPe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Kr(l[0]-e)<An?c>0?0:3:Kr(l[0]-n)<An?c>0?2:1:Kr(l[1]-t)<An?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=vPe(),d,h,p,m,g,y,v,b,x,_,C,T={point:S,lineStart:F,lineEnd:O,polygonStart:I,polygonEnd:R};function S(H,U){i(H,U)&&c.point(H,U)}function k(){for(var H=0,U=0,G=h.length;U<G;++U)for(var Y=h[U],Q=1,M=Y.length,j=Y[0],W,L,q=j[0],J=j[1];Q<M;++Q)W=q,L=J,j=Y[Q],q=j[0],J=j[1],L<=r?J>r&&(q-W)*(r-L)>(J-L)*(e-W)&&++H:J<=r&&(q-W)*(r-L)<(J-L)*(e-W)&&--H;return H}function I(){c=f,d=[],h=[],C=!0}function R(){var H=k(),U=C&&H,G=(d=QRe(d)).length;(U||G)&&(l.polygonStart(),U&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),G&&bPe(d,a,H,s,l),l.polygonEnd()),c=l,d=h=p=null}function F(){T.point=B,h&&h.push(p=[]),_=!0,x=!1,v=b=NaN}function O(){d&&(B(m,g),y&&x&&f.rejoin(),d.push(f.result())),T.point=S,x&&c.lineEnd()}function B(H,U){var G=i(H,U);if(h&&p.push([H,U]),_)m=H,g=U,y=G,_=!1,G&&(c.lineStart(),c.point(H,U));else if(G&&x)c.point(H,U);else{var Y=[v=Math.max(D6,Math.min(S6,v)),b=Math.max(D6,Math.min(S6,b))],Q=[H=Math.max(D6,Math.min(S6,H)),U=Math.max(D6,Math.min(S6,U))];bDt(Y,Q,e,t,n,r)?(x||(c.lineStart(),c.point(Y[0],Y[1])),c.point(Q[0],Q[1]),G||c.lineEnd(),C=!1):G&&(c.lineStart(),c.point(H,U),C=!1)}v=H,b=U,x=G}return T}}function Yye(e,t,n){var r=Sc(e,t-An,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Kye(e,t,n){var r=Sc(e,t-An,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function xDt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Sc(E6(r/c)*c,n,c).map(p).concat(Sc(E6(a/f)*f,o,f).map(m)).concat(Sc(E6(t/u)*u,e,u).filter(function(b){return Kr(b%c)>An}).map(d)).concat(Sc(E6(s/l)*l,i,l).filter(function(b){return Kr(b%f)>An}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Yye(s,i,90),h=Kye(t,e,g),p=Yye(a,o,90),m=Kye(r,n,g),y):g},y.extentMajor([[-180,-90+An],[180,90-An]]).extentMinor([[-180,-80-An],[180,80+An]])}const z3=e=>e;var WV=new Fl,RY=new Fl,_Pe,EPe,NY,PY,cg={point:ou,lineStart:ou,lineEnd:ou,polygonStart:function(){cg.lineStart=wDt,cg.lineEnd=EDt},polygonEnd:function(){cg.lineStart=cg.lineEnd=cg.point=ou,WV.add(Kr(RY)),RY=new Fl},result:function(){var e=WV/2;return WV=new Fl,e}};function wDt(){cg.point=_Dt}function _Dt(e,t){cg.point=CPe,_Pe=NY=e,EPe=PY=t}function CPe(e,t){RY.add(PY*e-NY*t),NY=e,PY=t}function EDt(){CPe(_Pe,EPe)}var _T=1/0,k8=_T,V3=-_T,R8=V3,N8={point:CDt,lineStart:ou,lineEnd:ou,polygonStart:ou,polygonEnd:ou,result:function(){var e=[[_T,k8],[V3,R8]];return V3=R8=-(k8=_T=1/0),e}};function CDt(e,t){e<_T&&(_T=e),e>V3&&(V3=e),t<k8&&(k8=t),t>R8&&(R8=t)}var OY=0,FY=0,EI=0,P8=0,O8=0,Q2=0,$Y=0,MY=0,CI=0,TPe,APe,l0,c0,Sd={point:Jw,lineStart:Xye,lineEnd:Qye,polygonStart:function(){Sd.lineStart=SDt,Sd.lineEnd=DDt},polygonEnd:function(){Sd.point=Jw,Sd.lineStart=Xye,Sd.lineEnd=Qye},result:function(){var e=CI?[$Y/CI,MY/CI]:Q2?[P8/Q2,O8/Q2]:EI?[OY/EI,FY/EI]:[NaN,NaN];return OY=FY=EI=P8=O8=Q2=$Y=MY=CI=0,e}};function Jw(e,t){OY+=e,FY+=t,++EI}function Xye(){Sd.point=TDt}function TDt(e,t){Sd.point=ADt,Jw(l0=e,c0=t)}function ADt(e,t){var n=e-l0,r=t-c0,i=Hl(n*n+r*r);P8+=i*(l0+e)/2,O8+=i*(c0+t)/2,Q2+=i,Jw(l0=e,c0=t)}function Qye(){Sd.point=Jw}function SDt(){Sd.point=IDt}function DDt(){SPe(TPe,APe)}function IDt(e,t){Sd.point=SPe,Jw(TPe=l0=e,APe=c0=t)}function SPe(e,t){var n=e-l0,r=t-c0,i=Hl(n*n+r*r);P8+=i*(l0+e)/2,O8+=i*(c0+t)/2,Q2+=i,i=c0*e-l0*t,$Y+=i*(l0+e),MY+=i*(c0+t),CI+=i*3,Jw(l0=e,c0=t)}function DPe(e){this._context=e}DPe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Vl);break}}},result:ou};var LY=new Fl,GV,IPe,kPe,TI,AI,H3={point:ou,lineStart:function(){H3.point=kDt},lineEnd:function(){GV&&RPe(IPe,kPe),H3.point=ou},polygonStart:function(){GV=!0},polygonEnd:function(){GV=null},result:function(){var e=+LY;return LY=new Fl,e}};function kDt(e,t){H3.point=RPe,IPe=TI=e,kPe=AI=t}function RPe(e,t){TI-=e,AI-=t,LY.add(Hl(TI*TI+AI*AI)),TI=e,AI=t}let Jye,F8,Zye,e1e;class t1e{constructor(t){this._append=t==null?NPe:RDt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Zye||this._append!==F8){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Zye=r,F8=this._append,e1e=this._,this._=i}this._+=e1e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function NPe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function RDt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return NPe;if(t!==Jye){const n=10**t;Jye=t,F8=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return F8}function PPe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),lg(a,i(s))),s.result()}return o.area=function(a){return lg(a,i(cg)),cg.result()},o.measure=function(a){return lg(a,i(H3)),H3.result()},o.bounds=function(a){return lg(a,i(N8)),N8.result()},o.centroid=function(a){return lg(a,i(Sd)),Sd.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,z3):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new t1e(n)):new DPe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new t1e(n)),o},o.projection(e).digits(n).context(t)}function AB(e){return function(t){var n=new BY;for(var r in e)n[r]=e[r];return n.stream=t,n}}function BY(){}BY.prototype={constructor:BY,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function une(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),lg(n,e.stream(N8)),t(N8.result()),r!=null&&e.clipExtent(r),e}function SB(e,t,n){return une(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function lne(e,t,n){return SB(e,[[0,0],t],n)}function cne(e,t,n){return une(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function fne(e,t,n){return une(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var n1e=16,NDt=Tn(30*Er);function r1e(e,t){return+t?ODt(e,t):PDt(e)}function PDt(e){return AB({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ODt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var x=o+d,_=a+h,C=u+p,T=Hl(x*x+_*_+C*C),S=zc(C/=T),k=Kr(Kr(C)-1)<An||Kr(s-f)<An?(s+f)/2:jd(_,x),I=e(k,S),R=I[0],F=I[1],O=R-r,B=F-i,H=v*O-y*B;(H*H/b>t||Kr((y*O+v*B)/b-.5)>.3||o*d+a*h+u*p<NDt)&&(n(r,i,s,o,a,u,R,F,k,x/=T,_/=T,C,m,g),g.point(R,F),n(R,F,k,x,_,C,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(S,k){S=e(S,k),r.point(S[0],S[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(S,k){var I=Qw([S,k]),R=e(S,k);n(f,d,c,h,p,m,f=R[0],d=R[1],c=S,h=I[0],p=I[1],m=I[2],n1e,r),r.point(f,d)}function x(){g.point=y,r.lineEnd()}function _(){v(),g.point=C,g.lineEnd=T}function C(S,k){b(i=S,k),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,n1e,r),g.lineEnd=x,x()}return g}}var FDt=AB({point:function(e,t){this.stream.point(e*Er,t*Er)}});function $Dt(e){return AB({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function MDt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function i1e(e,t,n,r,i,s){if(!s)return MDt(e,t,n,r,i);var o=Tn(s),a=gn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function pm(e){return OPe(function(){return e})()}function OPe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Gye,g=null,y,v,b,x=z3,_=.5,C,T,S,k,I;function R(H){return S(H[0]*Er,H[1]*Er)}function F(H){return H=S.invert(H[0],H[1]),H&&[H[0]*_o,H[1]*_o]}R.stream=function(H){return k&&I===H?k:k=FDt($Dt(c)(m(C(x(I=H)))))},R.preclip=function(H){return arguments.length?(m=H,p=void 0,B()):m},R.postclip=function(H){return arguments.length?(x=H,g=y=v=b=null,B()):x},R.clipAngle=function(H){return arguments.length?(m=+H?vDt(p=H*Er):(p=null,Gye),B()):p*_o},R.clipExtent=function(H){return arguments.length?(x=H==null?(g=y=v=b=null,z3):wPe(g=+H[0][0],y=+H[0][1],v=+H[1][0],b=+H[1][1]),B()):g==null?null:[[g,y],[v,b]]},R.scale=function(H){return arguments.length?(n=+H,O()):n},R.translate=function(H){return arguments.length?(r=+H[0],i=+H[1],O()):[r,i]},R.center=function(H){return arguments.length?(s=H[0]%360*Er,o=H[1]%360*Er,O()):[s*_o,o*_o]},R.rotate=function(H){return arguments.length?(a=H[0]%360*Er,u=H[1]%360*Er,l=H.length>2?H[2]%360*Er:0,O()):[a*_o,u*_o,l*_o]},R.angle=function(H){return arguments.length?(f=H%360*Er,O()):f*_o},R.reflectX=function(H){return arguments.length?(d=H?-1:1,O()):d<0},R.reflectY=function(H){return arguments.length?(h=H?-1:1,O()):h<0},R.precision=function(H){return arguments.length?(C=r1e(T,_=H*H),B()):Hl(_)},R.fitExtent=function(H,U){return SB(R,H,U)},R.fitSize=function(H,U){return lne(R,H,U)},R.fitWidth=function(H,U){return cne(R,H,U)},R.fitHeight=function(H,U){return fne(R,H,U)};function O(){var H=i1e(n,0,0,d,h,f).apply(null,t(s,o)),U=i1e(n,r-H[0],i-H[1],d,h,f);return c=yPe(a,u,l),T=IY(t,U),S=IY(c,T),C=r1e(T,_),B()}function B(){return k=I=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&F,O()}}function dne(e){var t=0,n=Ar/3,r=OPe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Er,n=s[1]*Er):[t*_o,n*_o]},i}function LDt(e){var t=Tn(e);function n(r,i){return[r*t,gn(i)/t]}return n.invert=function(r,i){return[r/t,zc(i*t)]},n}function BDt(e,t){var n=gn(e),r=(n+gn(t))/2;if(Kr(r)<An)return LDt(e);var i=1+n*(2*r-n),s=Hl(i)/r;function o(a,u){var l=Hl(i-2*r*gn(u))/r;return[l*gn(a*=r),s-l*Tn(a)]}return o.invert=function(a,u){var l=s-u,c=jd(a,Kr(l))*kd(l);return l*r<0&&(c-=Ar*kd(a)*kd(l)),[c/r,zc((i-(a*a+l*l)*r*r)/(2*r))]},o}function $8(){return dne(BDt).scale(155.424).center([0,33.6442])}function FPe(){return $8().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function jDt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function UDt(){var e,t,n=FPe(),r,i=$8().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=$8().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=jDt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+An,m+.12*h+An],[p-.214*h-An,m+.234*h-An]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+An,m+.166*h+An],[p-.115*h-An,m+.234*h-An]]).stream(l),f()},c.fitExtent=function(d,h){return SB(c,d,h)},c.fitSize=function(d,h){return lne(c,d,h)},c.fitWidth=function(d,h){return cne(c,d,h)},c.fitHeight=function(d,h){return fne(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function $Pe(e){return function(t,n){var r=Tn(t),i=Tn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*gn(t),s*gn(n)]}}function SN(e){return function(t,n){var r=Hl(t*t+n*n),i=e(r),s=gn(i),o=Tn(i);return[jd(t*s,r*o),zc(r&&n*s/r)]}}var MPe=$Pe(function(e){return Hl(2/(1+e))});MPe.invert=SN(function(e){return 2*zc(e/2)});function zDt(){return pm(MPe).scale(124.75).clipAngle(180-.001)}var LPe=$Pe(function(e){return(e=oPe(e))&&e/gn(e)});LPe.invert=SN(function(e){return e});function VDt(){return pm(LPe).scale(79.4188).clipAngle(180-.001)}function DB(e,t){return[e,y8(one((co+t)/2))]}DB.invert=function(e,t){return[e,2*XA(sPe(t))-co]};function HDt(){return BPe(DB).scale(961/Vl)}function BPe(e){var t=pm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Ar*r(),d=t(cDt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===DB?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function I6(e){return one((co+e)/2)}function qDt(e,t){var n=Tn(e),r=e===t?gn(e):y8(n/Tn(t))/y8(I6(t)/I6(e)),i=n*VV(I6(e),r)/r;if(!r)return DB;function s(o,a){i>0?a<-co+An&&(a=-co+An):a>co-An&&(a=co-An);var u=i/VV(I6(a),r);return[u*gn(r*o),i-u*Tn(r*o)]}return s.invert=function(o,a){var u=i-a,l=kd(r)*Hl(o*o+u*u),c=jd(o,Kr(u))*kd(u);return u*r<0&&(c-=Ar*kd(o)*kd(u)),[c/r,2*XA(VV(i/l,1/r))-co]},s}function WDt(){return dne(qDt).scale(109.5).parallels([30,30])}function M8(e,t){return[e,t]}M8.invert=M8;function GDt(){return pm(M8).scale(152.63)}function YDt(e,t){var n=Tn(e),r=e===t?gn(e):(n-Tn(t))/(t-e),i=n/r+e;if(Kr(r)<An)return M8;function s(o,a){var u=i-a,l=r*o;return[u*gn(l),i-u*Tn(l)]}return s.invert=function(o,a){var u=i-a,l=jd(o,Kr(u))*kd(u);return u*r<0&&(l-=Ar*kd(o)*kd(u)),[l/r,i-kd(r)*Hl(o*o+u*u)]},s}function KDt(){return dne(YDt).scale(131.154).center([0,13.9389])}var Ck=1.340264,Tk=-.081106,Ak=893e-6,Sk=.003796,L8=Hl(3)/2,XDt=12;function jPe(e,t){var n=zc(L8*gn(t)),r=n*n,i=r*r*r;return[e*Tn(n)/(L8*(Ck+3*Tk*r+i*(7*Ak+9*Sk*r))),n*(Ck+Tk*r+i*(Ak+Sk*r))]}jPe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<XDt&&(a=n*(Ck+Tk*r+i*(Ak+Sk*r))-t,u=Ck+3*Tk*r+i*(7*Ak+9*Sk*r),n-=o=a/u,r=n*n,i=r*r*r,!(Kr(o)<bY));++s);return[L8*e*(Ck+3*Tk*r+i*(7*Ak+9*Sk*r))/Tn(n),zc(gn(n)/L8)]};function QDt(){return pm(jPe).scale(177.158)}function UPe(e,t){var n=Tn(t),r=Tn(e)*n;return[n*gn(e)/r,gn(t)/r]}UPe.invert=SN(XA);function JDt(){return pm(UPe).scale(144.049).clipAngle(60)}function ZDt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=AB({point:function(x,_){var C=b([x,_]);this.stream.point(C[0],C[1])}}),m=z3,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(x){var _=x[0]*d,C=x[1]*h;if(s){var T=C*o-_*a;_=_*o+C*a,C=T}return[_+t,C+n]}return b.invert=function(x){var _=x[0]-t,C=x[1]-n;if(s){var T=C*o+_*a;_=_*o-C*a,C=T}return[_/d,C/h]},b.stream=function(x){return g&&y===x?g:g=p(m(y=x))},b.postclip=function(x){return arguments.length?(m=x,u=l=c=f=null,v()):m},b.clipExtent=function(x){return arguments.length?(m=x==null?(u=l=c=f=null,z3):wPe(u=+x[0][0],l=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(s=x%360*Er,a=gn(s),o=Tn(s),v()):s*_o},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,_){return SB(b,x,_)},b.fitSize=function(x,_){return lne(b,x,_)},b.fitWidth=function(x,_){return cne(b,x,_)},b.fitHeight=function(x,_){return fne(b,x,_)},b}function zPe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}zPe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Kr(i)>An&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function eIt(){return pm(zPe).scale(175.295)}function VPe(e,t){return[Tn(t)*gn(e),gn(t)]}VPe.invert=SN(zc);function tIt(){return pm(VPe).scale(249.5).clipAngle(90+An)}function HPe(e,t){var n=Tn(t),r=1+Tn(e)*n;return[n*gn(e)/r,gn(t)/r]}HPe.invert=SN(function(e){return 2*XA(e)});function nIt(){return pm(HPe).scale(250).clipAngle(142)}function qPe(e,t){return[y8(one((co+t)/2)),-e]}qPe.invert=function(e,t){return[-t,2*XA(sPe(e))-co]};function rIt(){var e=BPe(qPe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function iIt(e,t){return e.parent===t.parent?1:2}function sIt(e){return e.reduce(oIt,0)/e.length}function oIt(e,t){return e+t.x}function aIt(e){return 1+e.reduce(uIt,0)}function uIt(e,t){return Math.max(e,t.y)}function lIt(e){for(var t;t=e.children;)e=t[0];return e}function cIt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function fIt(){var e=iIt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=sIt(h),d.y=aIt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=lIt(s),l=cIt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function dIt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function hIt(){return this.eachAfter(dIt)}function pIt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function mIt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function gIt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function yIt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function vIt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function bIt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function xIt(e){for(var t=this,n=wIt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function wIt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function _It(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function EIt(){return Array.from(this)}function CIt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function TIt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*AIt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function IB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=IIt)):t===void 0&&(t=DIt);for(var n=new ET(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new ET(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(WPe)}function SIt(){return IB(this).eachBefore(kIt)}function DIt(e){return e.children}function IIt(e){return Array.isArray(e)?e[1]:null}function kIt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function WPe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function ET(e){this.data=e,this.depth=this.height=0,this.parent=null}ET.prototype=IB.prototype={constructor:ET,count:hIt,each:pIt,eachAfter:gIt,eachBefore:mIt,find:yIt,sum:vIt,sort:bIt,path:xIt,ancestors:_It,descendants:EIt,leaves:CIt,links:TIt,copy:SIt,[Symbol.iterator]:AIt};function pF(e){return e==null?null:GPe(e)}function GPe(e){if(typeof e!="function")throw new Error;return e}function Gx(){return 0}function C2(e){return function(){return e}}const RIt=1664525,NIt=1013904223,s1e=4294967296;function PIt(){let e=1;return()=>(e=(RIt*e+NIt)%s1e)/s1e}function OIt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function FIt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function $It(e,t){for(var n=0,r=(e=FIt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&YPe(o,s)?++n:(o=LIt(i=MIt(i,s)),n=0);return o}function MIt(e,t){var n,r;if(YV(t,e))return[t];for(n=0;n<e.length;++n)if(k6(t,e[n])&&YV(SI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(k6(SI(e[n],e[r]),t)&&k6(SI(e[n],t),e[r])&&k6(SI(e[r],t),e[n])&&YV(KPe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function k6(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function YPe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function YV(e,t){for(var n=0;n<t.length;++n)if(!YPe(e,t[n]))return!1;return!0}function LIt(e){switch(e.length){case 1:return BIt(e[0]);case 2:return SI(e[0],e[1]);case 3:return KPe(e[0],e[1],e[2])}}function BIt(e){return{x:e.x,y:e.y,r:e.r}}function SI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function KPe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,x=v-l*l-c*c+f*f,_=h*p-d*m,C=(p*x-m*b)/(_*2)-r,T=(m*g-p*y)/_,S=(h*b-d*x)/(_*2)-i,k=(d*y-h*g)/_,I=T*T+k*k-1,R=2*(s+C*T+S*k),F=C*C+S*S-s*s,O=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*F))/(2*I):F/R);return{x:r+C+T*O,y:i+S+k*O,r:O}}function o1e(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function a1e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function u1e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function R6(e){this._=e,this.next=null,this.previous=null}function jIt(e,t){if(!(s=(e=OIt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;o1e(r,n,i=e[2]),n=new R6(n),r=new R6(r),i=new R6(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){o1e(n._,r._,i=e[u]),i=new R6(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(a1e(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(a1e(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=u1e(n);(i=i.next)!==r;)(a=u1e(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=$It(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function UIt(e){return Math.sqrt(e.value)}function XPe(){var e=null,t=1,n=1,r=Gx;function i(s){const o=PIt();return s.x=t/2,s.y=n/2,e?s.eachBefore(l1e(e)).eachAfter(KV(r,.5,o)).eachBefore(c1e(1)):s.eachBefore(l1e(UIt)).eachAfter(KV(Gx,1,o)).eachAfter(KV(r,s.r/Math.min(t,n),o)).eachBefore(c1e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=pF(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:C2(+s),i):r},i}function l1e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function KV(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=jIt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function c1e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function QPe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function DN(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function zIt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(QPe),o}function s(o,a){return function(u){u.children&&DN(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var VIt={depth:-1},f1e={},XV={};function HIt(e){return e.id}function qIt(e){return e.parentId}function d1e(){var e=HIt,t=qIt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((x,_)=>WIt(n(x,_,i))),v=y.map(h1e),b=new Set(y).add("");for(const x of v)b.has(x)||(b.add(x),y.push(x),v.push(h1e(x)),s.push(XV));o=(x,_)=>y[_],a=(x,_)=>v[_]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new ET(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?f1e:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===f1e)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===XV&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===XV);--y)h.data=null}if(f.parent=VIt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(WPe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=pF(i),r):e},r.parentId=function(i){return arguments.length?(t=pF(i),r):t},r.path=function(i){return arguments.length?(n=pF(i),r):n},r}function WIt(e){e=`${e}`;let t=e.length;return jY(e,t-1)&&!jY(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function h1e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!jY(e,t););return e.slice(0,t)}function jY(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function GIt(e,t){return e.parent===t.parent?1:2}function QV(e){var t=e.children;return t?t[0]:e.t}function JV(e){var t=e.children;return t?t[t.length-1]:e.t}function YIt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function KIt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function XIt(e,t,n){return e.a.parent===t.parent?e.a:n}function mF(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}mF.prototype=Object.create(ET.prototype);function QIt(e){for(var t=new mF(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new mF(s[o],o)),i.parent=n;return(t.parent=new mF(null,0)).children=[t],t}function JIt(){var e=GIt,t=1,n=1,r=null;function i(l){var c=QIt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){KIt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,x;p=JV(p),d=QV(d),p&&d;)m=QV(m),h=JV(h),h.a=l,x=p.z+v-d.z-g+e(p._,d._),x>0&&(YIt(XIt(p,l,f),l,x),g+=x,y+=x),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!JV(h)&&(h.t=p,h.m+=v-y),d&&!QV(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function kB(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var JPe=(1+Math.sqrt(5))/2;function ZPe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,x,_,C;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,_=Math.max(p/h,h/p)/(m*e),C=g*g*_,x=Math.max(v/C,C/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),C=g*g*_,b=Math.max(v/C,C/y),b>x){g-=l;break}x=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?DN(u,n,r,i,m?r+=p*g/m:s):kB(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const e4e=function e(t){function n(r,i,s,o,a){ZPe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(JPe);function ZIt(){var e=e4e,t=!1,n=1,r=1,i=[0],s=Gx,o=Gx,a=Gx,u=Gx,l=Gx;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(QPe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=GPe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:C2(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:C2(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:C2(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:C2(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:C2(+d),c):l},c}function ekt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],x=h/2+b,_=f+1,C=d-1;_<C;){var T=_+C>>>1;l[T]<x?_=T+1:C=T}x-l[_-1]<l[_]-x&&f+1<_&&--_;var S=l[_]-b,k=h-S;if(g-p>y-m){var I=h?(p*k+g*S)/h:g;c(f,_,S,p,m,I,y),c(_,d,k,I,m,g,y)}else{var R=h?(m*k+y*S)/h:y;c(f,_,S,p,m,g,R),c(_,d,k,p,R,g,y)}}}function tkt(e,t,n,r,i){(e.depth&1?kB:DN)(e,t,n,r,i)}const nkt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?DN(l,i,s,o,m?s+=(a-s)*l.value/m:a):kB(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=ZPe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(JPe);function Sp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Rb(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const UY=Symbol("implicit");function Nb(){var e=new Gge,t=[],n=[],r=UY;function i(s){let o=e.get(s);if(o===void 0){if(r!==UY)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Gge;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Nb(t,n).unknown(r)},Sp.apply(i,arguments),i}function QA(){var e=Nb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Sc(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return QA(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Sp.apply(f(),arguments)}function rkt(e){return function(){return e}}function zY(e){return+e}var p1e=[0,1];function Dc(e){return e}function VY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rkt(isNaN(t)?NaN:.5)}function ikt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function skt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=VY(i,r),s=n(o,s)):(r=VY(r,i),s=n(s,o)),function(a){return s(r(a))}}function okt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=VY(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Nv(e,a,1,r)-1;return s[u](i[u](a))}}function IN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function RB(){var e=p1e,t=p1e,n=Sy,r,i,s,o=Dc,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Dc&&(o=ikt(e[0],e[d-1])),a=d>2?okt:skt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Cd)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,zY),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=CN,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Dc,c()):o!==Dc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function t4e(){return RB()(Dc,Dc)}function n4e(e,t,n,r){var i=Pv(e,t,n),s;switch(r=Xw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=rPe(i,o))&&(r.precision=s),sne(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=iPe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=nPe(i))&&(r.precision=s-(r.type==="%")*2);break}}return kb(r)}function Y_(e){var t=e.domain;return e.ticks=function(n){var r=t();return eY(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return n4e(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=tY(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Ua(){var e=t4e();return e.copy=function(){return IN(e,Ua())},Sp.apply(e,arguments),Y_(e)}function r4e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,zY),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return r4e(e).unknown(t)},e=arguments.length?Array.from(e,zY):[0,1],Y_(n)}function i4e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function m1e(e){return Math.log(e)}function g1e(e){return Math.exp(e)}function akt(e){return-Math.log(-e)}function ukt(e){return-Math.exp(-e)}function lkt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ckt(e){return e===10?lkt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function fkt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function y1e(e){return(t,n)=>-e(-t,n)}function hne(e){const t=e(m1e,g1e),n=t.domain;let r=10,i,s;function o(){return i=fkt(r),s=ckt(r),n()[0]<0?(i=y1e(i),s=y1e(s),e(akt,ukt)):e(m1e,g1e),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=eY(l,c,g))}else y=eY(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Xw(u)).precision==null&&(u.trim=!0),u=kb(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(i4e(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function s4e(){const e=hne(RB()).domain([1,10]);return e.copy=()=>IN(e,s4e()).base(e.base()),Sp.apply(e,arguments),e}function v1e(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function b1e(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pne(e){var t=1,n=e(v1e(t),b1e(t));return n.constant=function(r){return arguments.length?e(v1e(t=+r),b1e(t)):t},Y_(n)}function o4e(){var e=pne(RB());return e.copy=function(){return IN(e,o4e()).constant(e.constant())},Sp.apply(e,arguments)}function x1e(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function dkt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hkt(e){return e<0?-e*e:e*e}function mne(e){var t=e(Dc,Dc),n=1;function r(){return n===1?e(Dc,Dc):n===.5?e(dkt,hkt):e(x1e(n),x1e(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Y_(t)}function gne(){var e=mne(RB());return e.copy=function(){return IN(e,gne()).exponent(e.exponent())},Sp.apply(e,arguments),e}function pkt(){return gne.apply(null,arguments).exponent(.5)}function a4e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=KRe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Nv(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Og),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return a4e().domain(e).range(t).unknown(r)},Sp.apply(s,arguments)}function u4e(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Nv(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return u4e().domain([e,t]).range(i).unknown(s)},Sp.apply(Y_(o),arguments)}function l4e(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Nv(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return l4e().domain(e).range(t).unknown(n)},Sp.apply(i,arguments)}const ZV=new Date,eH=new Date;function ba(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>ba(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(ZV.setTime(+s),eH.setTime(+o),e(ZV),e(eH),Math.floor(n(ZV,eH))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const CT=ba(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);CT.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ba(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):CT);CT.range;const wg=1e3,Rd=wg*60,_g=Rd*60,iy=_g*24,yne=iy*7,w1e=iy*30,tH=iy*365,Eg=ba(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wg)},(e,t)=>(t-e)/wg,e=>e.getUTCSeconds());Eg.range;const NB=ba(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wg)},(e,t)=>{e.setTime(+e+t*Rd)},(e,t)=>(t-e)/Rd,e=>e.getMinutes());NB.range;const PB=ba(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Rd)},(e,t)=>(t-e)/Rd,e=>e.getUTCMinutes());PB.range;const OB=ba(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wg-e.getMinutes()*Rd)},(e,t)=>{e.setTime(+e+t*_g)},(e,t)=>(t-e)/_g,e=>e.getHours());OB.range;const FB=ba(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_g)},(e,t)=>(t-e)/_g,e=>e.getUTCHours());FB.range;const Mg=ba(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Rd)/iy,e=>e.getDate()-1);Mg.range;const fv=ba(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/iy,e=>e.getUTCDate()-1);fv.range;const c4e=ba(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/iy,e=>Math.floor(e/iy));c4e.range;function K_(e){return ba(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Rd)/yne)}const JA=K_(0),B8=K_(1),mkt=K_(2),gkt=K_(3),TT=K_(4),ykt=K_(5),vkt=K_(6);JA.range;B8.range;mkt.range;gkt.range;TT.range;ykt.range;vkt.range;function X_(e){return ba(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/yne)}const ZA=X_(0),j8=X_(1),bkt=X_(2),xkt=X_(3),AT=X_(4),wkt=X_(5),_kt=X_(6);ZA.range;j8.range;bkt.range;xkt.range;AT.range;wkt.range;_kt.range;const q3=ba(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());q3.range;const W3=ba(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());W3.range;const q0=ba(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());q0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ba(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});q0.range;const W0=ba(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());W0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ba(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});W0.range;function f4e(e,t,n,r,i,s){const o=[[Eg,1,wg],[Eg,5,5*wg],[Eg,15,15*wg],[Eg,30,30*wg],[s,1,Rd],[s,5,5*Rd],[s,15,15*Rd],[s,30,30*Rd],[i,1,_g],[i,3,3*_g],[i,6,6*_g],[i,12,12*_g],[r,1,iy],[r,2,2*iy],[n,1,yne],[t,1,w1e],[t,3,3*w1e],[e,1,tH]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=tp(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Pv(l/tH,c/tH,f));if(h===0)return CT.every(Math.max(Pv(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Ekt,Ckt]=f4e(W0,W3,ZA,c4e,FB,PB),[Tkt,Akt]=f4e(q0,q3,JA,Mg,OB,NB);function nH(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function rH(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kD(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function d4e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=RD(i),c=ND(i),f=RD(s),d=ND(s),h=RD(o),p=ND(o),m=RD(a),g=ND(a),y=RD(u),v=ND(u),b={a:G,A:Y,b:Q,B:M,c:null,d:S1e,e:S1e,f:Kkt,g:s3t,G:a3t,H:Wkt,I:Gkt,j:Ykt,L:h4e,m:Xkt,M:Qkt,p:j,q:W,Q:k1e,s:R1e,S:Jkt,u:Zkt,U:e3t,V:t3t,w:n3t,W:r3t,x:null,X:null,y:i3t,Y:o3t,Z:u3t,"%":I1e},x={a:L,A:q,b:J,B:re,c:null,d:D1e,e:D1e,f:d3t,g:_3t,G:C3t,H:l3t,I:c3t,j:f3t,L:m4e,m:h3t,M:p3t,p:ve,q:pe,Q:k1e,s:R1e,S:m3t,u:g3t,U:y3t,V:v3t,w:b3t,W:x3t,x:null,X:null,y:w3t,Y:E3t,Z:T3t,"%":I1e},_={a:I,A:R,b:F,B:O,c:B,d:T1e,e:T1e,f:zkt,g:C1e,G:E1e,H:A1e,I:A1e,j:Lkt,L:Ukt,m:Mkt,M:Bkt,p:k,q:$kt,Q:Hkt,s:qkt,S:jkt,u:Rkt,U:Nkt,V:Pkt,w:kkt,W:Okt,x:H,X:U,y:C1e,Y:E1e,Z:Fkt,"%":Vkt};b.x=C(n,b),b.X=C(r,b),b.c=C(t,b),x.x=C(n,x),x.X=C(r,x),x.c=C(t,x);function C(Ae,ke){return function(it){var Re=[],ut=-1,Xe=0,Tt=Ae.length,gt,Ie,Ve;for(it instanceof Date||(it=new Date(+it));++ut<Tt;)Ae.charCodeAt(ut)===37&&(Re.push(Ae.slice(Xe,ut)),(Ie=_1e[gt=Ae.charAt(++ut)])!=null?gt=Ae.charAt(++ut):Ie=gt==="e"?" ":"0",(Ve=ke[gt])&&(gt=Ve(it,Ie)),Re.push(gt),Xe=ut+1);return Re.push(Ae.slice(Xe,ut)),Re.join("")}}function T(Ae,ke){return function(it){var Re=kD(1900,void 0,1),ut=S(Re,Ae,it+="",0),Xe,Tt;if(ut!=it.length)return null;if("Q"in Re)return new Date(Re.Q);if("s"in Re)return new Date(Re.s*1e3+("L"in Re?Re.L:0));if(ke&&!("Z"in Re)&&(Re.Z=0),"p"in Re&&(Re.H=Re.H%12+Re.p*12),Re.m===void 0&&(Re.m="q"in Re?Re.q:0),"V"in Re){if(Re.V<1||Re.V>53)return null;"w"in Re||(Re.w=1),"Z"in Re?(Xe=rH(kD(Re.y,0,1)),Tt=Xe.getUTCDay(),Xe=Tt>4||Tt===0?j8.ceil(Xe):j8(Xe),Xe=fv.offset(Xe,(Re.V-1)*7),Re.y=Xe.getUTCFullYear(),Re.m=Xe.getUTCMonth(),Re.d=Xe.getUTCDate()+(Re.w+6)%7):(Xe=nH(kD(Re.y,0,1)),Tt=Xe.getDay(),Xe=Tt>4||Tt===0?B8.ceil(Xe):B8(Xe),Xe=Mg.offset(Xe,(Re.V-1)*7),Re.y=Xe.getFullYear(),Re.m=Xe.getMonth(),Re.d=Xe.getDate()+(Re.w+6)%7)}else("W"in Re||"U"in Re)&&("w"in Re||(Re.w="u"in Re?Re.u%7:"W"in Re?1:0),Tt="Z"in Re?rH(kD(Re.y,0,1)).getUTCDay():nH(kD(Re.y,0,1)).getDay(),Re.m=0,Re.d="W"in Re?(Re.w+6)%7+Re.W*7-(Tt+5)%7:Re.w+Re.U*7-(Tt+6)%7);return"Z"in Re?(Re.H+=Re.Z/100|0,Re.M+=Re.Z%100,rH(Re)):nH(Re)}}function S(Ae,ke,it,Re){for(var ut=0,Xe=ke.length,Tt=it.length,gt,Ie;ut<Xe;){if(Re>=Tt)return-1;if(gt=ke.charCodeAt(ut++),gt===37){if(gt=ke.charAt(ut++),Ie=_[gt in _1e?ke.charAt(ut++):gt],!Ie||(Re=Ie(Ae,it,Re))<0)return-1}else if(gt!=it.charCodeAt(Re++))return-1}return Re}function k(Ae,ke,it){var Re=l.exec(ke.slice(it));return Re?(Ae.p=c.get(Re[0].toLowerCase()),it+Re[0].length):-1}function I(Ae,ke,it){var Re=h.exec(ke.slice(it));return Re?(Ae.w=p.get(Re[0].toLowerCase()),it+Re[0].length):-1}function R(Ae,ke,it){var Re=f.exec(ke.slice(it));return Re?(Ae.w=d.get(Re[0].toLowerCase()),it+Re[0].length):-1}function F(Ae,ke,it){var Re=y.exec(ke.slice(it));return Re?(Ae.m=v.get(Re[0].toLowerCase()),it+Re[0].length):-1}function O(Ae,ke,it){var Re=m.exec(ke.slice(it));return Re?(Ae.m=g.get(Re[0].toLowerCase()),it+Re[0].length):-1}function B(Ae,ke,it){return S(Ae,t,ke,it)}function H(Ae,ke,it){return S(Ae,n,ke,it)}function U(Ae,ke,it){return S(Ae,r,ke,it)}function G(Ae){return o[Ae.getDay()]}function Y(Ae){return s[Ae.getDay()]}function Q(Ae){return u[Ae.getMonth()]}function M(Ae){return a[Ae.getMonth()]}function j(Ae){return i[+(Ae.getHours()>=12)]}function W(Ae){return 1+~~(Ae.getMonth()/3)}function L(Ae){return o[Ae.getUTCDay()]}function q(Ae){return s[Ae.getUTCDay()]}function J(Ae){return u[Ae.getUTCMonth()]}function re(Ae){return a[Ae.getUTCMonth()]}function ve(Ae){return i[+(Ae.getUTCHours()>=12)]}function pe(Ae){return 1+~~(Ae.getUTCMonth()/3)}return{format:function(Ae){var ke=C(Ae+="",b);return ke.toString=function(){return Ae},ke},parse:function(Ae){var ke=T(Ae+="",!1);return ke.toString=function(){return Ae},ke},utcFormat:function(Ae){var ke=C(Ae+="",x);return ke.toString=function(){return Ae},ke},utcParse:function(Ae){var ke=T(Ae+="",!0);return ke.toString=function(){return Ae},ke}}}var _1e={"-":"",_:" ",0:"0"},Ha=/^\s*\d+/,Skt=/^%/,Dkt=/[\\^$*+?|[\]().{}]/g;function bi(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Ikt(e){return e.replace(Dkt,"\\$&")}function RD(e){return new RegExp("^(?:"+e.map(Ikt).join("|")+")","i")}function ND(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function kkt(e,t,n){var r=Ha.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Rkt(e,t,n){var r=Ha.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Nkt(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Pkt(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Okt(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function E1e(e,t,n){var r=Ha.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function C1e(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Fkt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $kt(e,t,n){var r=Ha.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Mkt(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function T1e(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Lkt(e,t,n){var r=Ha.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function A1e(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Bkt(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function jkt(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Ukt(e,t,n){var r=Ha.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function zkt(e,t,n){var r=Ha.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Vkt(e,t,n){var r=Skt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Hkt(e,t,n){var r=Ha.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function qkt(e,t,n){var r=Ha.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function S1e(e,t){return bi(e.getDate(),t,2)}function Wkt(e,t){return bi(e.getHours(),t,2)}function Gkt(e,t){return bi(e.getHours()%12||12,t,2)}function Ykt(e,t){return bi(1+Mg.count(q0(e),e),t,3)}function h4e(e,t){return bi(e.getMilliseconds(),t,3)}function Kkt(e,t){return h4e(e,t)+"000"}function Xkt(e,t){return bi(e.getMonth()+1,t,2)}function Qkt(e,t){return bi(e.getMinutes(),t,2)}function Jkt(e,t){return bi(e.getSeconds(),t,2)}function Zkt(e){var t=e.getDay();return t===0?7:t}function e3t(e,t){return bi(JA.count(q0(e)-1,e),t,2)}function p4e(e){var t=e.getDay();return t>=4||t===0?TT(e):TT.ceil(e)}function t3t(e,t){return e=p4e(e),bi(TT.count(q0(e),e)+(q0(e).getDay()===4),t,2)}function n3t(e){return e.getDay()}function r3t(e,t){return bi(B8.count(q0(e)-1,e),t,2)}function i3t(e,t){return bi(e.getFullYear()%100,t,2)}function s3t(e,t){return e=p4e(e),bi(e.getFullYear()%100,t,2)}function o3t(e,t){return bi(e.getFullYear()%1e4,t,4)}function a3t(e,t){var n=e.getDay();return e=n>=4||n===0?TT(e):TT.ceil(e),bi(e.getFullYear()%1e4,t,4)}function u3t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+bi(t/60|0,"0",2)+bi(t%60,"0",2)}function D1e(e,t){return bi(e.getUTCDate(),t,2)}function l3t(e,t){return bi(e.getUTCHours(),t,2)}function c3t(e,t){return bi(e.getUTCHours()%12||12,t,2)}function f3t(e,t){return bi(1+fv.count(W0(e),e),t,3)}function m4e(e,t){return bi(e.getUTCMilliseconds(),t,3)}function d3t(e,t){return m4e(e,t)+"000"}function h3t(e,t){return bi(e.getUTCMonth()+1,t,2)}function p3t(e,t){return bi(e.getUTCMinutes(),t,2)}function m3t(e,t){return bi(e.getUTCSeconds(),t,2)}function g3t(e){var t=e.getUTCDay();return t===0?7:t}function y3t(e,t){return bi(ZA.count(W0(e)-1,e),t,2)}function g4e(e){var t=e.getUTCDay();return t>=4||t===0?AT(e):AT.ceil(e)}function v3t(e,t){return e=g4e(e),bi(AT.count(W0(e),e)+(W0(e).getUTCDay()===4),t,2)}function b3t(e){return e.getUTCDay()}function x3t(e,t){return bi(j8.count(W0(e)-1,e),t,2)}function w3t(e,t){return bi(e.getUTCFullYear()%100,t,2)}function _3t(e,t){return e=g4e(e),bi(e.getUTCFullYear()%100,t,2)}function E3t(e,t){return bi(e.getUTCFullYear()%1e4,t,4)}function C3t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?AT(e):AT.ceil(e),bi(e.getUTCFullYear()%1e4,t,4)}function T3t(){return"+0000"}function I1e(){return"%"}function k1e(e){return+e}function R1e(e){return Math.floor(+e/1e3)}var t2,vne,y4e,kN,v4e;A3t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function A3t(e){return t2=d4e(e),vne=t2.format,y4e=t2.parse,kN=t2.utcFormat,v4e=t2.utcParse,t2}function S3t(e){return new Date(e)}function D3t(e){return e instanceof Date?+e:+new Date(+e)}function bne(e,t,n,r,i,s,o,a,u,l){var c=t4e(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function _(C){return(u(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?g:r(C)<C?i(C)<C?y:v:n(C)<C?b:x)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,D3t)):d().map(S3t)},c.ticks=function(C){var T=d();return e(T[0],T[T.length-1],C??10)},c.tickFormat=function(C,T){return T==null?_:l(T)},c.nice=function(C){var T=d();return(!C||typeof C.range!="function")&&(C=t(T[0],T[T.length-1],C??10)),C?d(i4e(T,C)):c},c.copy=function(){return IN(c,bne(e,t,n,r,i,s,o,a,u,l))},c}function xne(){return Sp.apply(bne(Tkt,Akt,q0,q3,JA,Mg,OB,NB,Eg,vne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function I3t(){return Sp.apply(bne(Ekt,Ckt,W0,W3,ZA,fv,FB,PB,Eg,kN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $B(){var e=0,t=1,n,r,i,s,o=Dc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Sy),l.rangeRound=c(CN),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Pb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wne(){var e=Y_($B()(Dc));return e.copy=function(){return Pb(e,wne())},Rb.apply(e,arguments)}function b4e(){var e=hne($B()).domain([1,10]);return e.copy=function(){return Pb(e,b4e()).base(e.base())},Rb.apply(e,arguments)}function x4e(){var e=pne($B());return e.copy=function(){return Pb(e,x4e()).constant(e.constant())},Rb.apply(e,arguments)}function _ne(){var e=mne($B());return e.copy=function(){return Pb(e,_ne()).exponent(e.exponent())},Rb.apply(e,arguments)}function k3t(){return _ne.apply(null,arguments).exponent(.5)}function MB(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Dc,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=Kte(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Sy),h.rangeRound=p(CN),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function w4e(){var e=Y_(MB()(Dc));return e.copy=function(){return Pb(e,w4e())},Rb.apply(e,arguments)}function _4e(){var e=hne(MB()).domain([.1,1,10]);return e.copy=function(){return Pb(e,_4e()).base(e.base())},Rb.apply(e,arguments)}function E4e(){var e=pne(MB());return e.copy=function(){return Pb(e,E4e()).constant(e.constant())},Rb.apply(e,arguments)}function Ene(){var e=mne(MB());return e.copy=function(){return Pb(e,Ene()).exponent(e.exponent())},Rb.apply(e,arguments)}function R3t(){return Ene.apply(null,arguments).exponent(.5)}function Dp(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const N3t=Dp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),P3t=Dp("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),O3t=Dp("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),F3t=Dp("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),$3t=Dp("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),M3t=Dp("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),L3t=Dp("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),B3t=Dp("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),j3t=Dp("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),U3t=Dp("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),LB=Dp("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function hr(e){return function(){return e}}const N1e=Math.abs,ku=Math.atan2,px=Math.cos,z3t=Math.max,iH=Math.min,Vp=Math.sin,hw=Math.sqrt,Fu=1e-12,ST=Math.PI,U8=ST/2,Dk=2*ST;function V3t(e){return e>1?0:e<-1?ST:Math.acos(e)}function P1e(e){return e>=1?U8:e<=-1?-U8:Math.asin(e)}function BB(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new ene(t)}function H3t(e){return e.innerRadius}function q3t(e){return e.outerRadius}function W3t(e){return e.startAngle}function G3t(e){return e.endAngle}function Y3t(e){return e&&e.padAngle}function K3t(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Fu))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function N6(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/hw(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,x=v*v+b*b,_=i-s,C=d*m-p*h,T=(b<0?-1:1)*hw(z3t(0,_*_*x-C*C)),S=(C*b-v*T)/x,k=(-C*v-b*T)/x,I=(C*b+v*T)/x,R=(-C*v+b*T)/x,F=S-g,O=k-y,B=I-g,H=R-y;return F*F+O*O>B*B+H*H&&(S=I,k=R),{cx:S,cy:k,x01:-c,y01:-f,x11:S*(i/_-1),y11:k*(i/_-1)}}function HY(){var e=H3t,t=q3t,n=hr(0),r=null,i=W3t,s=G3t,o=Y3t,a=null,u=BB(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-U8,m=s.apply(this,arguments)-U8,g=N1e(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Fu))a.moveTo(0,0);else if(g>Dk-Fu)a.moveTo(h*px(p),h*Vp(p)),a.arc(0,0,h,p,m,!y),d>Fu&&(a.moveTo(d*px(m),d*Vp(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,x=p,_=m,C=g,T=g,S=o.apply(this,arguments)/2,k=S>Fu&&(r?+r.apply(this,arguments):hw(d*d+h*h)),I=iH(N1e(h-d)/2,+n.apply(this,arguments)),R=I,F=I,O,B;if(k>Fu){var H=P1e(k/d*Vp(S)),U=P1e(k/h*Vp(S));(C-=H*2)>Fu?(H*=y?1:-1,x+=H,_-=H):(C=0,x=_=(p+m)/2),(T-=U*2)>Fu?(U*=y?1:-1,v+=U,b-=U):(T=0,v=b=(p+m)/2)}var G=h*px(v),Y=h*Vp(v),Q=d*px(_),M=d*Vp(_);if(I>Fu){var j=h*px(b),W=h*Vp(b),L=d*px(x),q=d*Vp(x),J;if(g<ST)if(J=K3t(G,Y,L,q,j,W,Q,M)){var re=G-J[0],ve=Y-J[1],pe=j-J[0],Ae=W-J[1],ke=1/Vp(V3t((re*pe+ve*Ae)/(hw(re*re+ve*ve)*hw(pe*pe+Ae*Ae)))/2),it=hw(J[0]*J[0]+J[1]*J[1]);R=iH(I,(d-it)/(ke-1)),F=iH(I,(h-it)/(ke+1))}else R=F=0}T>Fu?F>Fu?(O=N6(L,q,G,Y,h,F,y),B=N6(j,W,Q,M,h,F,y),a.moveTo(O.cx+O.x01,O.cy+O.y01),F<I?a.arc(O.cx,O.cy,F,ku(O.y01,O.x01),ku(B.y01,B.x01),!y):(a.arc(O.cx,O.cy,F,ku(O.y01,O.x01),ku(O.y11,O.x11),!y),a.arc(0,0,h,ku(O.cy+O.y11,O.cx+O.x11),ku(B.cy+B.y11,B.cx+B.x11),!y),a.arc(B.cx,B.cy,F,ku(B.y11,B.x11),ku(B.y01,B.x01),!y))):(a.moveTo(G,Y),a.arc(0,0,h,v,b,!y)):a.moveTo(G,Y),!(d>Fu)||!(C>Fu)?a.lineTo(Q,M):R>Fu?(O=N6(Q,M,j,W,d,-R,y),B=N6(G,Y,L,q,d,-R,y),a.lineTo(O.cx+O.x01,O.cy+O.y01),R<I?a.arc(O.cx,O.cy,R,ku(O.y01,O.x01),ku(B.y01,B.x01),!y):(a.arc(O.cx,O.cy,R,ku(O.y01,O.x01),ku(O.y11,O.x11),!y),a.arc(0,0,d,ku(O.cy+O.y11,O.cx+O.x11),ku(B.cy+B.y11,B.cx+B.x11),y),a.arc(B.cx,B.cy,R,ku(B.y11,B.x11),ku(B.y01,B.x01),!y))):a.arc(0,0,d,_,x,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-ST/2;return[px(f)*c,Vp(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:hr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:hr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:hr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:hr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:hr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:hr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:hr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function jB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function C4e(e){this._context=e}C4e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Cne(e){return new C4e(e)}function T4e(e){return e[0]}function A4e(e){return e[1]}function UB(e,t){var n=hr(!0),r=null,i=Cne,s=null,o=BB(a);e=typeof e=="function"?e:e===void 0?T4e:hr(e),t=typeof t=="function"?t:t===void 0?A4e:hr(t);function a(u){var l,c=(u=jB(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:hr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:hr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:hr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function S4e(e,t,n){var r=null,i=hr(!0),s=null,o=Cne,a=null,u=BB(l);e=typeof e=="function"?e:e===void 0?T4e:hr(+e),t=typeof t=="function"?t:hr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?A4e:hr(+n);function l(f){var d,h,p,m=(f=jB(f)).length,g,y=!1,v,b=new Array(m),x=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),x[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return UB().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:hr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:hr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:hr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:hr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:hr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:hr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:hr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function X3t(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Q3t(e){return e}function J3t(){var e=Q3t,t=X3t,n=null,r=hr(0),i=hr(Dk),s=hr(0);function o(a){var u,l=(a=jB(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(Dk,Math.max(-Dk,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),x;for(u=0;u<l;++u)(x=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=x);for(t!=null?h.sort(function(_,C){return t(p[_],p[C])}):n!=null&&h.sort(function(_,C){return n(a[_],a[C])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],x=p[c],y=m+(x>0?x*f:0)+b,p[c]={data:a[c],index:u,value:x,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:hr(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:hr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:hr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:hr(+a),o):s},o}const Z3t={draw(e,t){const n=hw(t/ST);e.moveTo(n,0),e.arc(0,0,n,0,Dk)}};function eRt(e,t){let n=null,r=BB(i);e=typeof e=="function"?e:hr(e||Z3t),t=typeof t=="function"?t:hr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:hr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Fv(){}function z8(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function zB(e){this._context=e}zB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:z8(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:z8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tRt(e){return new zB(e)}function D4e(e){this._context=e}D4e.prototype={areaStart:Fv,areaEnd:Fv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:z8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nRt(e){return new D4e(e)}function I4e(e){this._context=e}I4e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:z8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rRt(e){return new I4e(e)}function k4e(e,t){this._basis=new zB(e),this._beta=t}k4e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const iRt=function e(t){function n(r){return t===1?new zB(r):new k4e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function V8(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Tne(e,t){this._context=e,this._k=(1-t)/6}Tne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:V8(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:V8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const sRt=function e(t){function n(r){return new Tne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Ane(e,t){this._context=e,this._k=(1-t)/6}Ane.prototype={areaStart:Fv,areaEnd:Fv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:V8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const oRt=function e(t){function n(r){return new Ane(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Sne(e,t){this._context=e,this._k=(1-t)/6}Sne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:V8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const aRt=function e(t){function n(r){return new Sne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Dne(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Fu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Fu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function R4e(e,t){this._context=e,this._alpha=t}R4e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Dne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const uRt=function e(t){function n(r){return t?new R4e(r,t):new Tne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function N4e(e,t){this._context=e,this._alpha=t}N4e.prototype={areaStart:Fv,areaEnd:Fv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Dne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lRt=function e(t){function n(r){return t?new N4e(r,t):new Ane(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function P4e(e,t){this._context=e,this._alpha=t}P4e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Dne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cRt=function e(t){function n(r){return t?new P4e(r,t):new Sne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function O4e(e){this._context=e}O4e.prototype={areaStart:Fv,areaEnd:Fv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function fRt(e){return new O4e(e)}function O1e(e){return e<0?-1:1}function F1e(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(O1e(s)+O1e(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function $1e(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function sH(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function H8(e){this._context=e}H8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sH(this,this._t0,$1e(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sH(this,$1e(this,n=F1e(this,e,t)),n);break;default:sH(this,this._t0,n=F1e(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function F4e(e){this._context=new $4e(e)}(F4e.prototype=Object.create(H8.prototype)).point=function(e,t){H8.prototype.point.call(this,t,e)};function $4e(e){this._context=e}$4e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function dRt(e){return new H8(e)}function hRt(e){return new F4e(e)}function M4e(e){this._context=e}M4e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=M1e(e),i=M1e(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function M1e(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function pRt(e){return new M4e(e)}function VB(e,t){this._context=e,this._t=t}VB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function mRt(e){return new VB(e,.5)}function gRt(e){return new VB(e,0)}function yRt(e){return new VB(e,1)}function L1e(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function B1e(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function vRt(e,t){return e[t]}function bRt(e){const t=[];return t.key=e,t}function xRt(){var e=hr([]),t=B1e,n=L1e,r=vRt;function i(s){var o=Array.from(e.apply(this,arguments),bRt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=jB(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:hr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:hr(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?B1e:typeof s=="function"?s:hr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??L1e,i):n},i}function DI(e,t,n){this.k=e,this.x=t,this.y=n}DI.prototype={constructor:DI,scale:function(e){return e===1?this:new DI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new DI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};DI.prototype;function jh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $v(e){return!!e&&!!e[$s]}function sy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===IRt}(e)||Array.isArray(e)||!!e[W1e]||!!(!((t=e.constructor)===null||t===void 0)&&t[W1e])||Ine(e)||kne(e))}function Zw(e,t,n){n===void 0&&(n=!1),eS(e)===0?(n?Object.keys:TC)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function eS(e){var t=e[$s];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ine(e)?2:kne(e)?3:0}function CC(e,t){return eS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wRt(e,t){return eS(e)===2?e.get(t):e[t]}function L4e(e,t,n){var r=eS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function B4e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ine(e){return SRt&&e instanceof Map}function kne(e){return DRt&&e instanceof Set}function Ox(e){return e.o||e.t}function Rne(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=U4e(e);delete t[$s];for(var n=TC(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Nne(e,t){return t===void 0&&(t=!1),Pne(e)||$v(e)||!sy(e)||(eS(e)>1&&(e.set=e.add=e.clear=e.delete=_Rt),Object.freeze(e),t&&Zw(e,function(n,r){return Nne(r,!0)},!0)),e}function _Rt(){jh(2)}function Pne(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function R0(e){var t=YY[e];return t||jh(18,e),t}function ERt(e,t){YY[e]||(YY[e]=t)}function qY(){return G3}function oH(e,t){t&&(R0("Patches"),e.u=[],e.s=[],e.v=t)}function q8(e){WY(e),e.p.forEach(CRt),e.p=null}function WY(e){e===G3&&(G3=e.l)}function j1e(e){return G3={p:[],l:G3,h:e,m:!0,_:0}}function CRt(e){var t=e[$s];t.i===0||t.i===1?t.j():t.g=!0}function aH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||R0("ES5").S(t,e,r),r?(n[$s].P&&(q8(t),jh(4)),sy(e)&&(e=W8(t,e),t.l||G8(t,e)),t.u&&R0("Patches").M(n[$s].t,e,t.u,t.s)):e=W8(t,n,[]),q8(t),t.u&&t.v(t.u,t.s),e!==j4e?e:void 0}function W8(e,t,n){if(Pne(t))return t;var r=t[$s];if(!r)return Zw(t,function(a,u){return U1e(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return G8(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Rne(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Zw(s,function(a,u){return U1e(e,r,i,a,u,n,o)}),G8(e,i,!1),n&&e.u&&R0("Patches").N(r,n,e.u,e.s)}return r.o}function U1e(e,t,n,r,i,s,o){if($v(i)){var a=W8(e,i,s&&t&&t.i!==3&&!CC(t.R,r)?s.concat(r):void 0);if(L4e(n,r,a),!$v(a))return;e.m=!1}else o&&n.add(i);if(sy(i)&&!Pne(i)){if(!e.h.D&&e._<1)return;W8(e,i),t&&t.A.l||G8(e,i)}}function G8(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Nne(t,n)}function uH(e,t){var n=e[$s];return(n?Ox(n):e)[t]}function z1e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function R1(e){e.P||(e.P=!0,e.l&&R1(e.l))}function lH(e){e.o||(e.o=Rne(e.t))}function GY(e,t,n){var r=Ine(t)?R0("MapSet").F(t,n):kne(t)?R0("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:qY(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Y3;o&&(u=[a],l=II);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):R0("ES5").J(t,n);return(n?n.A:qY()).p.push(r),r}function TRt(e){return $v(e)||jh(22,e),function t(n){if(!sy(n))return n;var r,i=n[$s],s=eS(n);if(i){if(!i.P&&(i.i<4||!R0("ES5").K(i)))return i.t;i.I=!0,r=V1e(n,s),i.I=!1}else r=V1e(n,s);return Zw(r,function(o,a){i&&wRt(i.t,o)===a||L4e(r,o,t(a))}),s===3?new Set(r):r}(e)}function V1e(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Rne(e)}function ARt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[$s];return Y3.get(u,s)},set:function(u){var l=this[$s];Y3.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][$s];if(!a.P)switch(a.i){case 5:r(a)&&R1(a);break;case 4:n(a)&&R1(a)}}}function n(s){for(var o=s.t,a=s.k,u=TC(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==$s){var f=o[c];if(f===void 0&&!CC(o,c))return!0;var d=a[c],h=d&&d[$s];if(h?h.t!==f:!B4e(d,f))return!0}}var p=!!o[$s];return u.length!==TC(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};ERt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=U4e(f);delete p[$s];for(var m=TC(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:qY(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,$s,{value:l,writable:!0}),u},S:function(s,o,a){a?$v(o)&&o[$s].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[$s];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Zw(d,function(b){b!==$s&&(f[b]!==void 0||CC(f,b)?h[b]||u(d[b]):(h[b]=!0,R1(c)))}),Zw(f,function(b){d[b]!==void 0||CC(d,b)||(h[b]=!1,R1(c))});else if(p===5){if(r(c)&&(R1(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var H1e,G3,One=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",SRt=typeof Map<"u",DRt=typeof Set<"u",q1e=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",j4e=One?Symbol.for("immer-nothing"):((H1e={})["immer-nothing"]=!0,H1e),W1e=One?Symbol.for("immer-draftable"):"__$immer_draftable",$s=One?Symbol.for("immer-state"):"__$immer_state",IRt=""+Object.prototype.constructor,TC=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,U4e=Object.getOwnPropertyDescriptors||function(e){var t={};return TC(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},YY={},Y3={get:function(e,t){if(t===$s)return e;var n=Ox(e);if(!CC(n,t))return function(i,s,o){var a,u=z1e(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!sy(r)?r:r===uH(e.t,t)?(lH(e),e.o[t]=GY(e.A.h,r,e)):r},has:function(e,t){return t in Ox(e)},ownKeys:function(e){return Reflect.ownKeys(Ox(e))},set:function(e,t,n){var r=z1e(Ox(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=uH(Ox(e),t),s=i==null?void 0:i[$s];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(B4e(n,i)&&(n!==void 0||CC(e.t,t)))return!0;lH(e),R1(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return uH(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,lH(e),R1(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Ox(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){jh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){jh(12)}},II={};Zw(Y3,function(e,t){II[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),II.deleteProperty=function(e,t){return II.set.call(this,e,t,void 0)},II.set=function(e,t,n){return Y3.set.call(this,e[0],t,n,e[0])};var kRt=function(){function e(n){var r=this;this.O=q1e,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(x){var _;return(_=s).call.apply(_,[g,x].concat(v))})}}var l;if(typeof s!="function"&&jh(6),o!==void 0&&typeof o!="function"&&jh(7),sy(i)){var c=j1e(r),f=GY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?q8(c):WY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return oH(c,o),aH(m,c)},function(m){throw q8(c),m}):(oH(c,o),aH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===j4e&&(l=void 0),r.D&&Nne(l,!0),o){var h=[],p=[];R0("Patches").M(i,l,h,p),o(h,p)}return l}jh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){sy(n)||jh(8),$v(n)&&(n=TRt(n));var r=j1e(this),i=GY(this,n,void 0);return i[$s].C=!0,WY(r),i},t.finishDraft=function(n,r){var i=n&&n[$s],s=i.A;return oH(s,r),aH(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!q1e&&jh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=R0("Patches").$;return $v(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Uf=new kRt,z4e=Uf.produce;Uf.produceWithPatches.bind(Uf);Uf.setAutoFreeze.bind(Uf);Uf.setUseProxies.bind(Uf);Uf.applyPatches.bind(Uf);Uf.createDraft.bind(Uf);Uf.finishDraft.bind(Uf);function K3(e){"@babel/helpers - typeof";return K3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K3(e)}function RRt(e,t){if(K3(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(K3(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NRt(e){var t=RRt(e,"string");return K3(t)=="symbol"?t:t+""}function PRt(e,t,n){return(t=NRt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G1e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y1e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G1e(Object(n),!0).forEach(function(r){PRt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G1e(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var K1e=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),cH=function(){return Math.random().toString(36).substring(7).split("").join(".")},Y8={INIT:"@@redux/INIT"+cH(),REPLACE:"@@redux/REPLACE"+cH(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cH()}};function ORt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function V4e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mu(1));return n(V4e)(e,t)}if(typeof e!="function")throw new Error(Mu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Mu(3));return s}function f(m){if(typeof m!="function")throw new Error(Mu(4));if(u)throw new Error(Mu(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Mu(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!ORt(m))throw new Error(Mu(7));if(typeof m.type>"u")throw new Error(Mu(8));if(u)throw new Error(Mu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Mu(10));i=m,d({type:Y8.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Mu(11));function b(){v.next&&v.next(c())}b();var x=g(b);return{unsubscribe:x}}},m[K1e]=function(){return this},m}return d({type:Y8.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[K1e]=p,r}function FRt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:Y8.INIT});if(typeof r>"u")throw new Error(Mu(12));if(typeof n(void 0,{type:Y8.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mu(13))})}function $Rt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{FRt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Mu(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function K8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function MRt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Mu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=K8.apply(void 0,a)(i.dispatch),Y1e(Y1e({},i),{},{dispatch:s})}}}function H4e(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var KY=H4e();KY.withExtraArgument=H4e;var q4e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RN=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},e_=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},LRt=Object.defineProperty,BRt=Object.defineProperties,jRt=Object.getOwnPropertyDescriptors,X1e=Object.getOwnPropertySymbols,URt=Object.prototype.hasOwnProperty,zRt=Object.prototype.propertyIsEnumerable,Q1e=function(e,t,n){return t in e?LRt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},dv=function(e,t){for(var n in t||(t={}))URt.call(t,n)&&Q1e(e,n,t[n]);if(X1e)for(var r=0,i=X1e(t);r<i.length;r++){var n=i[r];zRt.call(t,n)&&Q1e(e,n,t[n])}return e},fH=function(e,t){return BRt(e,jRt(t))},NN=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},VRt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?K8:K8.apply(null,arguments)};function W4e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var HRt=function(e){return e&&typeof e.match=="function"};function N0(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return dv(dv({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function qRt(e){return W4e(e)&&"type"in e}var WRt=function(e){q4e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,e_([void 0],n[0].concat(this)))):new(t.bind.apply(t,e_([void 0],n.concat(this))))},t}(Array),GRt=function(e){q4e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,e_([void 0],n[0].concat(this)))):new(t.bind.apply(t,e_([void 0],n.concat(this))))},t}(Array);function XY(e){return sy(e)?z4e(e,function(){}):e}function YRt(e){return typeof e=="boolean"}function KRt(){return function(t){return XRt(t)}}function XRt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new WRt;return n&&(YRt(n)?r.push(KY):r.push(KY.withExtraArgument(n.extraArgument))),r}function QRt(e){var t=KRt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(W4e(i))h=$Rt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=MRt.apply(void 0,p),g=K8;u&&(g=VRt(dv({trace:!1},typeof u=="object"&&u)));var y=new GRt(m),v=y;Array.isArray(d)?v=e_([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return V4e(h,c,b)}function G4e(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function JRt(e){return typeof e=="function"}function ZRt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?G4e(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(JRt(e))u=function(){return XY(e())};else{var l=XY(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=e_([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if($v(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(sy(p))return z4e(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function eNt(e,t){return e+"/"+t}function tNt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:XY(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=eNt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?N0(d,p):N0(d)});function u(){var c=typeof e.extraReducers=="function"?G4e(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=dv(dv({},d),o);return ZRt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var x=0,_=p;x<_.length;x++){var C=_[x];v.addMatcher(C.matcher,C.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var nNt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Y4e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=nNt[Math.random()*64|0];return t},rNt=["name","message","stack","code"],dH=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),J1e=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),iNt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=rNt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=N0(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:fH(dv({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=N0(t+"/pending",function(l,c,f){return{payload:void 0,meta:fH(dv({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=N0(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||iNt)(l||"Rejected"),meta:fH(dv({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Y4e(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return NN(this,null,function(){var v,b,x,_,C,T,S;return RN(this,function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),_=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),oNt(_)?[4,_]:[3,2];case 1:_=k.sent(),k.label=2;case 2:if(_===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(I,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,R){return new dH(I,R)},fulfillWithValue:function(I,R){return new J1e(I,R)}})).then(function(I){if(I instanceof dH)throw I;return I instanceof J1e?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return x=k.sent(),[3,5];case 4:return T=k.sent(),x=T instanceof dH?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return S=r&&!r.dispatchConditionRejection&&o.match(x)&&x.meta.condition,S||c(x),[2,x]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(sNt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function sNt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function oNt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var aNt=function(e,t){return HRt(e)?e.match(t):e(t)};function Z1e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return aNt(r,n)})}}var Fne=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},QY=function(){},K4e=function(e,t){return t===void 0&&(t=QY),e.catch(t),e},X4e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},AC=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},uNt="task",Q4e="listener",J4e="completed",$ne="cancelled",lNt="task-"+$ne,cNt="task-"+J4e,Z4e=Q4e+"-"+$ne,fNt=Q4e+"-"+J4e,HB=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=uNt+" "+$ne+" (reason: "+t+")"}return e}(),SC=function(e){if(e.aborted)throw new HB(e.reason)};function e6e(e,t){var n=QY;return new Promise(function(r,i){var s=function(){return i(new HB(e.reason))};if(e.aborted){s();return}n=X4e(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=QY})}var dNt=function(e,t){return NN(void 0,null,function(){var n,r;return RN(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof HB?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},X8=function(e){return function(t){return K4e(e6e(e,t).then(function(n){return SC(e),n}))}},t6e=function(e){var t=X8(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},hNt=Object.assign,eve={},PN="listenerMiddleware",pNt=function(e,t){var n=function(r){return X4e(e,function(){return AC(r,e.reason)})};return function(r,i){Fne(r,"taskExecutor");var s=new AbortController;n(s);var o=dNt(function(){return NN(void 0,null,function(){var a;return RN(this,function(u){switch(u.label){case 0:return SC(e),SC(s.signal),[4,r({pause:X8(s.signal),delay:t6e(s.signal),signal:s.signal})];case 1:return a=u.sent(),SC(s.signal),[2,a]}})})},function(){return AC(s,cNt)});return i!=null&&i.autoJoin&&t.push(o),{result:X8(e)(o),cancel:function(){AC(s,lNt)}}}},mNt=function(e,t){var n=function(r,i){return NN(void 0,null,function(){var s,o,a,u;return RN(this,function(l){switch(l.label){case 0:SC(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,e6e(t,Promise.race(a))];case 2:return u=l.sent(),SC(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return K4e(n(r,i))}},n6e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=N0(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Fne(s,"options.listener"),{predicate:i,type:t,effect:s}},gNt=function(e){var t=n6e(e),n=t.type,r=t.predicate,i=t.effect,s=Y4e(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},JY=function(e){e.pending.forEach(function(t){AC(t,Z4e)})},yNt=function(e){return function(){e.forEach(JY),e.clear()}},tve=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},vNt=N0(PN+"/add"),bNt=N0(PN+"/removeAll"),xNt=N0(PN+"/remove"),wNt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e_([PN+"/error"],e))};function _Nt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?wNt:i;Fne(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&JY(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=gNt(h)),o(p)},l=function(h){var p=n6e(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var x=typeof m=="string"?b.type===m:b.predicate===y;return x&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&JY(v)),!!v},c=function(h,p,m,g){return NN(t,null,function(){var y,v,b,x;return RN(this,function(_){switch(_.label){case 0:y=new AbortController,v=mNt(u,y.signal),b=[],_.label=1;case 1:return _.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,hNt({},m,{getOriginalState:g,condition:function(C,T){return v(C,T).then(Boolean)},take:v,delay:t6e(y.signal),pause:X8(y.signal),extra:r,signal:y.signal,fork:pNt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,T,S){C!==y&&(AC(C,Z4e),S.delete(C))})}})))];case 2:return _.sent(),[3,6];case 3:return x=_.sent(),x instanceof HB||tve(s,x,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return _.sent(),AC(y,fNt),h.pending.delete(y),[7];case 6:return[2]}})})},f=yNt(n),d=function(h){return function(p){return function(m){if(!qRt(m))return p(m);if(vNt.match(m))return u(m.payload);if(bNt.match(m)){f();return}if(xNt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===eve)throw new Error(PN+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),x=Array.from(n.values()),_=0,C=x;_<C.length;_++){var T=C[_],S=!1;try{S=T.predicate(m,b,g)}catch(k){S=!1,tve(s,k,{raisedBy:"predicate"})}S&&c(T,m,h,y)}}finally{g=eve}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var nve;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);ARt();function ENt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let P6;const CNt=new Uint8Array(16);function TNt(){if(!P6&&(P6=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P6))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P6(CNt)}const Xa=[];for(let e=0;e<256;++e)Xa.push((e+256).toString(16).slice(1));function ANt(e,t=0){return(Xa[e[t+0]]+Xa[e[t+1]]+Xa[e[t+2]]+Xa[e[t+3]]+"-"+Xa[e[t+4]]+Xa[e[t+5]]+"-"+Xa[e[t+6]]+Xa[e[t+7]]+"-"+Xa[e[t+8]]+Xa[e[t+9]]+"-"+Xa[e[t+10]]+Xa[e[t+11]]+Xa[e[t+12]]+Xa[e[t+13]]+Xa[e[t+14]]+Xa[e[t+15]]).toLowerCase()}const SNt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rve={randomUUID:SNt};function ive(e,t,n){if(rve.randomUUID&&!e)return rve.randomUUID();e=e||{};const r=e.random||(e.rng||TNt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ANt(r)}class P0{static get(){let t=ive();for(;this.ids.has(t);)t=ive();return this.ids.set(t,!0),t}}P0.ids=new Map;function np(e){return"parent"in e}function DNt(e){return!np(e)}function INt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:P0.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:P0.get(),createdOn:Date.now(),val:r}]:[];return{id:P0.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function kNt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:P0.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:P0.get(),createdOn:Date.now(),val:s}]:[];return{id:P0.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function oo(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=BNt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function t_(e){return!!e&&!!e[zf]}function Mv(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===jNt}(e)||Array.isArray(e)||!!e[Ik]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ik])||qB(e)||WB(e))}function DT(e,t,n){n===void 0&&(n=!1),Lv(e)===0?(n?Object.keys:zne)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Lv(e){var t=e[zf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:qB(e)?2:WB(e)?3:0}function X3(e,t){return Lv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function gF(e,t){return Lv(e)===2?e.get(t):e[t]}function r6e(e,t,n){var r=Lv(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function RNt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function qB(e){return MNt&&e instanceof Map}function WB(e){return LNt&&e instanceof Set}function Fx(e){return e.o||e.t}function Mne(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=UNt(e);delete t[zf];for(var n=zne(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Lne(e,t){return t===void 0&&(t=!1),Bne(e)||t_(e)||!Mv(e)||(Lv(e)>1&&(e.set=e.add=e.clear=e.delete=NNt),Object.freeze(e),t&&DT(e,function(n,r){return Lne(r,!0)},!0)),e}function NNt(){oo(2)}function Bne(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function O0(e){var t=nK[e];return t||oo(18,e),t}function PNt(e,t){nK[e]||(nK[e]=t)}function sve(){return{}.NODE_ENV==="production"||IT||oo(0),IT}function hH(e,t){t&&(O0("Patches"),e.u=[],e.s=[],e.v=t)}function Q8(e){ZY(e),e.p.forEach(ONt),e.p=null}function ZY(e){e===IT&&(IT=e.l)}function ove(e){return IT={p:[],l:IT,h:e,m:!0,_:0}}function ONt(e){var t=e[zf];t.i===0||t.i===1?t.j():t.O=!0}function pH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||O0("ES5").S(t,e,r),r?(n[zf].P&&(Q8(t),oo(4)),Mv(e)&&(e=J8(t,e),t.l||Z8(t,e)),t.u&&O0("Patches").M(n[zf].t,e,t.u,t.s)):e=J8(t,n,[]),Q8(t),t.u&&t.v(t.u,t.s),e!==Une?e:void 0}function J8(e,t,n){if(Bne(t))return t;var r=t[zf];if(!r)return DT(t,function(s,o){return ave(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Z8(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Mne(r.k):r.o;DT(r.i===3?new Set(i):i,function(s,o){return ave(e,r,i,s,o,n)}),Z8(e,i,!1),n&&e.u&&O0("Patches").R(r,n,e.u,e.s)}return r.o}function ave(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&oo(5),t_(i)){var o=J8(e,i,s&&t&&t.i!==3&&!X3(t.D,r)?s.concat(r):void 0);if(r6e(n,r,o),!t_(o))return;e.m=!1}if(Mv(i)&&!Bne(i)){if(!e.h.F&&e._<1)return;J8(e,i),t&&t.A.l||Z8(e,i)}}function Z8(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Lne(t,n)}function mH(e,t){var n=e[zf];return(n?Fx(n):e)[t]}function uve(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function eK(e){e.P||(e.P=!0,e.l&&eK(e.l))}function gH(e){e.o||(e.o=Mne(e.t))}function tK(e,t,n){var r=qB(t)?O0("MapSet").N(t,n):WB(t)?O0("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:sve(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=rK;o&&(u=[a],l=kI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):O0("ES5").J(t,n);return(n?n.A:sve()).p.push(r),r}function FNt(e){return t_(e)||oo(22,e),function t(n){if(!Mv(n))return n;var r,i=n[zf],s=Lv(n);if(i){if(!i.P&&(i.i<4||!O0("ES5").K(i)))return i.t;i.I=!0,r=lve(n,s),i.I=!1}else r=lve(n,s);return DT(r,function(o,a){i&&gF(i.t,o)===a||r6e(r,o,t(a))}),s===3?new Set(r):r}(e)}function lve(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Mne(e)}function $Nt(){function e(r){if(!Mv(r))return r;if(Array.isArray(r))return r.map(e);if(qB(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(WB(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return X3(r,Ik)&&(i[Ik]=r[Ik]),i}function t(r){return t_(r)?e(r):r}var n="add";PNt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Lv(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||oo(24),typeof u=="function"&&f==="prototype"&&oo(24),typeof(u=gF(u,f))!="object"&&oo(15,o.join("/"))}var d=Lv(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:oo(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:oo(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;DT(a.D,function(h,p){var m=gF(f,h),g=gF(d,h),y=p?X3(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Une?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var cve,IT,jne=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",MNt=typeof Map<"u",LNt=typeof Set<"u",fve=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Une=jne?Symbol.for("immer-nothing"):((cve={})["immer-nothing"]=!0,cve),Ik=jne?Symbol.for("immer-draftable"):"__$immer_draftable",zf=jne?Symbol.for("immer-state"):"__$immer_state",BNt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},jNt=""+Object.prototype.constructor,zne=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,UNt=Object.getOwnPropertyDescriptors||function(e){var t={};return zne(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},nK={},rK={get:function(e,t){if(t===zf)return e;var n=Fx(e);if(!X3(n,t))return function(i,s,o){var a,u=uve(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Mv(r)?r:r===mH(e.t,t)?(gH(e),e.o[t]=tK(e.A.h,r,e)):r},has:function(e,t){return t in Fx(e)},ownKeys:function(e){return Reflect.ownKeys(Fx(e))},set:function(e,t,n){var r=uve(Fx(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=mH(Fx(e),t),s=i==null?void 0:i[zf];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(RNt(n,i)&&(n!==void 0||X3(e.t,t)))return!0;gH(e),eK(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return mH(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,gH(e),eK(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Fx(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){oo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){oo(12)}},kI={};DT(rK,function(e,t){kI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),kI.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&oo(13),kI.set.call(this,e,t,void 0)},kI.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&oo(14),rK.set.call(this,e[0],t,n,e[0])};var zNt=function(){function e(n){var r=this;this.g=fve,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(x){var _;return(_=s).call.apply(_,[g,x].concat(v))})}}var l;if(typeof s!="function"&&oo(6),o!==void 0&&typeof o!="function"&&oo(7),Mv(i)){var c=ove(r),f=tK(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?Q8(c):ZY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return hH(c,o),pH(m,c)},function(m){throw Q8(c),m}):(hH(c,o),pH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Une&&(l=void 0),r.F&&Lne(l,!0),o){var h=[],p=[];O0("Patches").M(i,l,h,p),o(h,p)}return l}oo(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Mv(n)||oo(8),t_(n)&&(n=FNt(n));var r=ove(this),i=tK(this,n,void 0);return i[zf].C=!0,ZY(r),i},t.finishDraft=function(n,r){var i=n&&n[zf];({}).NODE_ENV!=="production"&&(i&&i.C||oo(9),i.I&&oo(10));var s=i.A;return hH(s,r),pH(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!fve&&oo(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=O0("Patches").$;return t_(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Vf=new zNt,VNt=Vf.produce;Vf.produceWithPatches.bind(Vf);Vf.setAutoFreeze.bind(Vf);Vf.setUseProxies.bind(Vf);Vf.applyPatches.bind(Vf);Vf.createDraft.bind(Vf);Vf.finishDraft.bind(Vf);function HNt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=INt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return tNt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:P0.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:P0.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function qNt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=HNt(e),s=_Nt();s.startListening({matcher:Z1e(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Z1e(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=QRt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:P0.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var WNt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GNt=Object.prototype.hasOwnProperty;function iK(e,t){return GNt.call(e,t)}function sK(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)iK(e,i)&&r.push(i);return r}function Ic(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function oK(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function $x(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function i6e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function aK(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(aK(e[t]))return!0}else if(typeof e=="object"){for(var r=sK(e),i=r.length,s=0;s<i;s++)if(aK(e[r[s]]))return!0}}return!1}function dve(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var s6e=function(e){WNt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,dve(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=dve(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),no=s6e,YNt=Ic,J2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=e$(n,this.path);r&&(r=Ic(r));var i=kw(n,{op:"remove",path:this.from}).removed;return kw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=e$(n,this.from);return kw(n,{op:"add",path:this.path,value:Ic(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Q3(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},KNt={add:function(e,t,n){return oK(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:J2.move,copy:J2.copy,test:J2.test,_get:J2._get};function e$(e,t){if(t=="")return e;var n={op:"_get",path:t};return kw(e,n),n.value}function kw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):t$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=e$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Q3(e,t.value),o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new no("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ic(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=t$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=i6e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!oK(h))throw new no("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);oK(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new no("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=KNt[t.op].call(t,l,h,e);if(o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=J2[t.op].call(t,l,h,e);if(o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new no("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function GB(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new no("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ic(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=kw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function XNt(e,t,n){var r=kw(e,t);if(r.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function t$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new no("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(J2[e.op]){if(typeof e.path!="string")throw new no("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new no('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new no("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new no("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&aK(e.value))throw new no("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new no("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new no("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=o6e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new no("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new no("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function o6e(e,t,n){try{if(!Array.isArray(e))throw new no("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)GB(Ic(t),Ic(e),n||!0);else{n=n||t$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof no)return i;throw i}}function Q3(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!Q3(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!Q3(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const QNt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:no,_areEquals:Q3,applyOperation:kw,applyPatch:GB,applyReducer:XNt,deepClone:YNt,getValueByPointer:e$,validate:o6e,validator:t$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Vne=new WeakMap,JNt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ZNt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function ePt(e){return Vne.get(e)}function tPt(e,t){return e.observers.get(t)}function nPt(e,t){e.observers.delete(t.callback)}function rPt(e,t){t.unobserve()}function iPt(e,t){var n=[],r,i=ePt(e);if(!i)i=new JNt(e),Vne.set(e,i);else{var s=tPt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ic(e),t){r.callback=t,r.next=null;var o=function(){uK(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){uK(r),clearTimeout(r.next),nPt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new ZNt(t,r)),r}function uK(e,t){t===void 0&&(t=!1);var n=Vne.get(e.object);Hne(n.value,e.object,e.patches,"",t),e.patches.length&&GB(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Hne(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=sK(t),o=sK(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(iK(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Hne(c,f,n,r+"/"+$x(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+$x(l),value:Ic(c)}),n.push({op:"replace",path:r+"/"+$x(l),value:Ic(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+$x(l),value:Ic(c)}),n.push({op:"remove",path:r+"/"+$x(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!iK(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+$x(l),value:Ic(t[l])})}}}function a6e(e,t,n){n===void 0&&(n=!1);var r=[];return Hne(e,t,r,"",n),r}const sPt=Object.freeze(Object.defineProperty({__proto__:null,compare:a6e,generate:uK,observe:iPt,unobserve:rPt},Symbol.toStringTag,{value:"Module"}));Object.assign({},QNt,sPt,{JsonPatchError:s6e,deepClone:Ic,escapePathComponent:$x,unescapePathComponent:i6e});var RI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(RI||{});function yF(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=u6e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=yF(i,t);return GB(a,Ic(o),!0,!1).newDocument}function oPt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function ON({registry:e,initialState:t}){let n=!1;const r=ENt(),i=qNt(t);function s(c){return i.backend.nodes[c]}r.listen(RI.TRAVERSAL_START,()=>{n=!0}),r.listen(RI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return yF(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=yF(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=a6e(y,f);if(oPt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=kNt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=yF(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(RI.TRAVERSAL_START);const f=u6e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);uPt(p,m)?np(p)&&d.push(...p.sideEffects.undo):np(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(RI.TRAVERSAL_END)},undo(){const{current:c}=i;return np(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return l6e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function aPt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;np(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)np(r)&&(r=n[r.parent]),np(i)&&(i=n[i.parent]);return r.id}function u6e(e,t,n){const r=aPt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),np(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),np(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function uPt(e,t){if(np(e)&&e.parent===t.id)return!0;if(np(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function l6e(e,t){return{...e,children:e.children.map(n=>l6e(t[n],t)),name:`${e.label}`}}$Nt();function lPt(e){return e.length===2?VNt(e):e}class Q_{static create(){return new Q_}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:lPt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),N0(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const hve=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},tS=e=>{const t=N.useRef(null),n=hve(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=hve({...n,width:n.width||r,height:n.height||s});return[t,a]},cPt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:tS},Symbol.toStringTag,{value:"Module"})),fPt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function dPt({parameters:e,setAnswer:t}){const[n,r]=tS(fPt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=Q_.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=ON({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=Tr("#movingCircle"),g=Tr("#clickAccuracySvg"),y=o8(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Tr(n.current).select("circle").transition().duration(y).ease(xAt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:E.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[E.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),E.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),E.jsxs(Fe,{children:["Adjust speed (px/s):",E.jsx(M_,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const hPt=Object.freeze(Object.defineProperty({__proto__:null,default:dPt},Symbol.toStringTag,{value:"Module"}));function qne({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?kN("%B"):kb(".2s"))(c),[s]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:E.jsx(ga,{children:E.jsx(Mi,{gap:3,children:E.jsx(Ye,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?E.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>E.jsxs("g",{transform:`translate(${f}, ${n})`,children:[E.jsx("line",{y2:"6",stroke:"currentColor"}),o?E.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,E.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:E.jsx(ga,{children:E.jsx(ws,{withinPortal:!0,label:c,children:E.jsx(Ye,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const pPt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:qne},Symbol.toStringTag,{value:"Module"}));function c6e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ga,{children:E.jsx(Mi,{gap:3,children:E.jsx(Ye,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>E.jsxs("g",{transform:`translate(${n}, ${l})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),s?E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,E.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:E.jsx("foreignObject",{width:a,height:20,children:E.jsx(Mi,{style:{width:"100%",height:"100%"},justify:"right",children:E.jsx(Ye,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const mPt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:c6e},Symbol.toStringTag,{value:"Module"})),ud={top:15,left:100,right:50,bottom:50};function lK({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=kf(),o=N.useMemo(()=>s-ud.left-ud.right,[s]),a=N.useMemo(()=>i-ud.top-ud.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Nb(LB).domain(d)},[n,t.category]),l=N.useMemo(()=>e?Ua([ud.left,o+ud.left]).domain([0,Fg(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?QA([ud.top,a+ud.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:E.jsxs("g",{children:[E.jsx("rect",{x:ud.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-ud.left},h),E.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?E.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E.jsx(qne,{xScale:l,yRange:c.range(),vertPosition:a+ud.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?E.jsx(c6e,{yScale:c,horizontalPosition:ud.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):E.jsx(Zc,{})}const gPt=Object.freeze(Object.defineProperty({__proto__:null,Bar:lK,default:lK},Symbol.toStringTag,{value:"Module"})),mi=Array.isArray;function Vc(e){return e!=null?mi(e)?e:[e]:[]}function yPt(e=0,t=1/0){return`${pve(e)} < row_number() && row_number() <= ${pve(t)}`}function pve(e){return e<0?`count() + ${e}`:e}class f6e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(yPt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Vc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function pr(e){throw Error(e)}function ql(e){return typeof e=="number"}function Ss(e){return typeof e=="function"}function YB(e,t){const n=Array(e);if(Ss(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let vPt=class extends f6e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){pr("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){pr("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){pr("Not implemented")}getter(t){pr("Not implemented")}objects(t){pr("Not implemented")}object(t){pr("Not implemented")}[Symbol.iterator](){pr("Not implemented")}print(t={}){ql(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=YB(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},bPt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},xPt=function(e){return e&&Ss(e.get)?e:new bPt(e)};function oy(e){return e instanceof Date}function nl(e){return e===Object(e)}function n$(e){return e instanceof RegExp}function vu(e){return typeof e=="string"}function wPt(e,t){const n=r=>pr(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?mve(e.entries(),t):oy(e)?n("Date"):n$(e)?n("RegExp"):vu(e)?n():mi(e)?_Pt(e,t):Ss(e[Symbol.iterator])?EPt(e,t):nl(e)?mve(Object.entries(e),t):n()}function mve(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function _Pt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function EPt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:CPt}=Object.prototype;function hp(e,t){return CPt.call(e,t)}function Jf(e){return e?new gve({...e.data()},e.columnNames()):new gve}class gve{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return hp(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const li=void 0,TPt=Object.getPrototypeOf(Int8Array);function FN(e){return e instanceof TPt}function pw(e){return mi(e)||FN(e)}function Gh(e){return e!=null&&e===e}const PD=e=>pw(e)||vu(e),APt={compact:e=>pw(e)?e.filter(t=>Gh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>PD(e)?e.includes(t,n):!1,indexof:(e,t)=>PD(e)?e.indexOf(t):-1,join:(e,t)=>pw(e)?e.join(t):li,lastindexof:(e,t)=>PD(e)?e.lastIndexOf(t):-1,length:e=>PD(e)?e.length:0,pluck:(e,t)=>pw(e)?e.map(n=>Gh(n)?n[t]:li):li,reverse:e=>pw(e)?e.slice().reverse():vu(e)?e.split("").reverse().join(""):li,slice:(e,t,n)=>PD(e)?e.slice(t,n):li};function SPt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function vF(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Hp=e=>(e<10?"0":"")+e,DPt=e=>e<0?"-"+vF(-e,6):e>9999?"+"+vF(e,6):vF(e,4);function d6e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return DPt(e)+"-"+Hp(t+1)+"-"+Hp(n)+(!u||o?"T"+Hp(r)+":"+Hp(i)+":"+Hp(s)+"."+vF(o,3)+l:s?"T"+Hp(r)+":"+Hp(i)+":"+Hp(s)+l:i||r||!a?"T"+Hp(r)+":"+Hp(i)+l:"")}function h6e(e,t){return isNaN(e)?"Invalid Date":d6e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function KB(e,t){return isNaN(e)?"Invalid Date":d6e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const IPt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function kPt(e){return e.match(IPt)&&!isNaN(Date.parse(e))}function RPt(e,t=Date.parse){return kPt(e)?t(e):e}const p6e=6e4,m6e=864e5,g6e=6048e5,so=new Date,ao=new Date,xo=e=>(so.setTime(typeof e=="string"?RPt(e):e),so);function NPt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function PPt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function OPt(e){ao.setTime(+e),ao.setHours(0,0,0,0),so.setTime(+ao),so.setMonth(0),so.setDate(1);const t=(ao.getTimezoneOffset()-so.getTimezoneOffset())*p6e;return Math.floor(1+(ao-so-t)/m6e)}function FPt(e){ao.setTime(+e),ao.setUTCHours(0,0,0,0);const t=Date.UTC(ao.getUTCFullYear(),0,1);return Math.floor(1+(ao-t)/m6e)}function $Pt(e,t){const n=t||0;ao.setTime(+e),ao.setDate(ao.getDate()-(ao.getDay()+7-n)%7),ao.setHours(0,0,0,0),so.setTime(+e),so.setMonth(0),so.setDate(1),so.setDate(1-(so.getDay()+7-n)%7),so.setHours(0,0,0,0);const r=(ao.getTimezoneOffset()-so.getTimezoneOffset())*p6e;return Math.floor((1+(ao-so)-r)/g6e)}function MPt(e,t){const n=t||0;return ao.setTime(+e),ao.setUTCDate(ao.getUTCDate()-(ao.getUTCDay()+7-n)%7),ao.setUTCHours(0,0,0,0),so.setTime(+e),so.setUTCMonth(0),so.setUTCDate(1),so.setUTCDate(1-(so.getUTCDay()+7-n)%7),so.setUTCHours(0,0,0,0),Math.floor((1+(ao-so))/g6e)}const LPt={format_date:(e,t)=>h6e(xo(e),!t),format_utcdate:(e,t)=>KB(xo(e),!t),timestamp:e=>+xo(e),year:e=>xo(e).getFullYear(),quarter:e=>Math.floor(xo(e).getMonth()/3),month:e=>xo(e).getMonth(),date:e=>xo(e).getDate(),dayofweek:e=>xo(e).getDay(),hours:e=>xo(e).getHours(),minutes:e=>xo(e).getMinutes(),seconds:e=>xo(e).getSeconds(),milliseconds:e=>xo(e).getMilliseconds(),utcyear:e=>xo(e).getUTCFullYear(),utcquarter:e=>Math.floor(xo(e).getUTCMonth()/3),utcmonth:e=>xo(e).getUTCMonth(),utcdate:e=>xo(e).getUTCDate(),utcdayofweek:e=>xo(e).getUTCDay(),utchours:e=>xo(e).getUTCHours(),utcminutes:e=>xo(e).getUTCMinutes(),utcseconds:e=>xo(e).getUTCSeconds(),utcmilliseconds:e=>xo(e).getUTCMilliseconds(),datetime:NPt,dayofyear:OPt,week:$Pt,utcdatetime:PPt,utcdayofyear:FPt,utcweek:MPt,now:Date.now};function Wne(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:oy(e)||oy(t)?+e==+t:n$(e)&&n$(t)?e+""==t+"":nl(e)&&nl(t)?BPt(e,t):!1}function BPt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return yve(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!yve(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Wne(e[o],t[o]))return!1}return!0}function yve(e,t,n=Wne){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const jPt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let UPt=Math.random;function nS(){return UPt()}const zPt={random:nS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Gne(e){return e instanceof Map}function VPt(e){return e instanceof Set}function bF(e){return Gne(e)||VPt(e)}function yH(e){return Array.from(e)}const HPt={has:(e,t)=>bF(e)?e.has(t):e!=null?hp(e,t):!1,keys:e=>Gne(e)?yH(e.keys()):e!=null?Object.keys(e):[],values:e=>bF(e)?yH(e.values()):e!=null?Object.values(e):[],entries:e=>bF(e)?yH(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):li};function qPt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(hp(t,e))return t[e];return n!==void 0?n:e}function WPt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const GPt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Z2={bin:SPt,equal:Wne,recode:qPt,sequence:WPt,...APt,...LPt,...jPt,...zPt,...HPt,...GPt};function J3(e){return typeof e=="bigint"}function G0(e){return e===void 0?e+"":J3(e)?e+"n":JSON.stringify(e)}function or(e,t=[],n=[]){return new YPt(e,Vc(t),Vc(n))}let YPt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${G0(n)}]`),...this.params.map(G0)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const y6e=e=>or("any",e),v6e=()=>or("count"),b6e=e=>or("array_agg",e),x6e=e=>or("array_agg_distinct",e),w6e=(e,t)=>or("map_agg",[e,t]),_6e=(e,t)=>or("object_agg",[e,t]),E6e=(e,t)=>or("entries_agg",[e,t]);({...Z2});function KPt(e,t){e=bF(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function XPt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function QPt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function JPt(e,t,n,r){const i=r==="map"||r===!0?w6e:r==="entries"?E6e:r==="object"?_6e:pr('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=KPt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:b6e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const ZPt="ArrayPattern",e4t="ArrowFunctionExpression",t4t="FunctionExpression",hv="Identifier",rS="Literal",C6e="MemberExpression",n4t="ObjectExpression",T6e="ObjectPattern",A6e="Property",$N="Column",r4t="Constant",i4t="Dictionary",s4t="Function",o4t="Parameter",S6e="Op",fs=(e,t)=>{const n=a4t[e.type];return n?n(e,t):pr(`Unsupported expression construct: ${e.type}`)},vH=(e,t)=>"("+fs(e.left,t)+" "+e.operator+" "+fs(e.right,t)+")",bH=(e,t)=>"("+Jp(e.params,t)+")=>"+fs(e.body,t),vve=(e,t)=>fs(e.callee,t)+"("+Jp(e.arguments,t)+")",Jp=(e,t,n=",")=>e.map(r=>fs(r,t)).join(n),D6e=e=>e.computed?`[${G0(e.name)}]`:`.${e.name}`,bve=(e,t,n)=>{const r=e.table||"";return`data${r}${D6e(e)}.${n}(${t.index}${r})`},a4t={Constant:e=>e.raw,Column:(e,t)=>bve(e,t,"get"),Dictionary:(e,t)=>bve(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${D6e(e)}`,Op:(e,t)=>`op(${G0(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+fs(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=fs(e.object,t),i=fs(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:vve,NewExpression:(e,t)=>"new "+vve(e,t),ArrayExpression:(e,t)=>"["+Jp(e.elements,t)+"]",AssignmentExpression:vH,BinaryExpression:vH,LogicalExpression:vH,UnaryExpression:(e,t)=>"("+e.operator+fs(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+fs(e.test,t)+"?"+fs(e.consequent,t)+":"+fs(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Jp(e.properties,t)+"})",Property:(e,t)=>{const n=fs(e.key,t);return(e.computed?`[${n}]`:n)+":"+fs(e.value,t)},ArrowFunctionExpression:bH,FunctionExpression:bH,FunctionDeclaration:bH,ArrayPattern:(e,t)=>"["+Jp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Jp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Jp(e.declarations,t,","),VariableDeclarator:(e,t)=>fs(e.id,t)+"="+fs(e.init,t),SpreadElement:(e,t)=>"..."+fs(e.argument,t),BlockStatement:(e,t)=>"{"+Jp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>fs(e.expression,t),IfStatement:(e,t)=>"if ("+fs(e.test,t)+")"+fs(e.consequent,t)+(e.alternate?" else "+fs(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+fs(e.discriminant,t)+") {"+Jp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+fs(e.test,t):"default")+": "+Jp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+fs(e.argument,t),Program:(e,t)=>fs(e.body[0],t)};function r$(e,t={index:"row"}){return fs(e,t)}function u4t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function kT(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:oy(e)?+e:mi(e)||FN(e)?`[${e.map(kT)}]`:n$(e)?e+"":l4t(e)}function l4t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${kT(e[r])}`;return t+="}",t}function i$(e,t){const n=e.length;return n===1?(r,i)=>kT(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=kT(a)}return s}}function c4t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=kT(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=kT(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function ig(){}function f4t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ta(e){return e.init=e.init||ig,e.add=e.add||ig,e.rem=e.rem||ig,e}function xve(e,t){return e.product_v=!1,e.product=t}const I6e={count:{create:()=>ta({value:e=>e.count}),param:[]},array_agg:{create:()=>ta({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ta({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ta({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ta({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ta({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:li}),param:[1]},valid:{create:()=>ta({value:e=>e.valid}),param:[1]},invalid:{create:()=>ta({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=c4t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ta({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ta({value:e=>{let t=li,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:li,add:(e,t)=>J3(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>xve(e,1),value:e=>e.valid?e.product_v?xve(e,f4t(e.list.values())):e.product:void 0,add:(e,t)=>J3(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:li,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ta({value:e=>e.valid?e.mean:li}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):li,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ta({value:e=>e.valid>1?e.dev/e.valid:li}),param:[1],req:["variance"]},stdev:{create:()=>ta({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):li}),param:[1],req:["variance"]},stdevp:{create:()=>ta({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):li}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=li,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===li)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=li,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===li)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ta({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ta({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):li,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ta({value:e=>e.valid>1?e.cov/e.valid:li}),param:[2],req:["covariance"]},corr:{create:()=>ta({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):li}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ta({value:i=>u4t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},wve={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},_ve={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},k6e={row_number:{create(){return{init:ig,value:e=>e.index+1}},param:[]},rank:wve,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=wve.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:_ve,ntile:{create(e){e=+e,e>0||pr("ntile num must be greater than zero.");const{init:t,value:n}=_ve.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=li){return e=+e||1,{init:ig,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=li){return e=+e||1,{init:ig,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:ig,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:ig,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||pr("nth_value nth must be greater than zero."),{init:ig,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):li}}},param:[1,1]},fill_down:{create(e=li){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Gh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=li){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=d4t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function d4t(e,t,n){for(const r=e.size;n<r;++n)if(Gh(e.value(n,t)))return n;return-1}function Yne(e){return hp(I6e,e)}function Kne(e){return hp(k6e,e)}function R6e(e){return hp(Z2,e)||e==="row_object"}function N6e(e){return Yne(e)&&I6e[e]}function P6e(e){return Kne(e)&&k6e[e]}function OD(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Xne={escape:(e,t,n)=>OD(e,t,n),expr:(e,t)=>OD(`(row,data,op)=>${e}`,Z2,t),expr2:(e,t)=>OD(`(row0,data0,row,data)=>${e}`,Z2,t),join:(e,t)=>OD(`(row1,data1,row2,data2)=>${e}`,Z2,t),param:(e,t)=>OD(e,Z2,t)},h4t={"==":1,"!=":1,"===":1,"!==":1};function O6e(e,t,n=0,r,i){if(e.type=$N,e.name=t,e.table=n,i&&r&&Ss(r.keyFor)){const s=h4t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===rS&&p4t(i,e,s,r.keyFor(s.value))}return e}function p4t(e,t,n,r){return r<0?(e.type=rS,e.value=!1,e.raw="false"):(t.type=i4t,n.value=r,n.raw=r+""),!0}function XB(e){return mi(e)?e:Gne(e)?e.entries():e?Object.entries(e):[]}const F6e="row_object";function $6e(e,t){e.type=n4t;const n=e.properties=[];for(const r of XB(t)){const[i,s]=mi(r)?r:[r,r];n.push({type:A6e,key:{type:rS,raw:G0(s)},value:O6e({computed:!0},i)})}return e}function M6e(e){return r$($6e({},e))}function L6e(e){return Xne.expr(M6e(e))}const m4t=new TextDecoder("utf-8"),cK=e=>m4t.decode(e),g4t=new TextEncoder,Qne=e=>g4t.encode(e),y4t=e=>typeof e=="boolean",pc=e=>typeof e=="function",Ob=e=>e!=null&&Object(e)===e,QB=e=>Ob(e)&&pc(e.then),Jne=e=>Ob(e)&&pc(e[Symbol.iterator]),JB=e=>Ob(e)&&pc(e[Symbol.asyncIterator]),v4t=e=>Ob(e)&&"done"in e&&"value"in e,B6e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,b4t=e=>Ob(e)&&pc(e.abort)&&pc(e.getWriter)&&!B6e(e),x4t=e=>Ob(e)&&pc(e.end)&&pc(e.write)&&y4t(e.writable)&&!B6e(e),w4t=e=>Ob(e)&&pc(e.clear)&&pc(e.bytes)&&pc(e.position)&&pc(e.setPosition)&&pc(e.capacity)&&pc(e.getBufferIdentifier)&&pc(e.createLong),Zne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function _4t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function s$(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Y0(e,t){const n=_4t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?s$(o,s,a):o=s;break}s$(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Aa(e,t){let n=v4t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Qne(n)),n instanceof ArrayBuffer?new e(n):n instanceof Zne?new e(n):w4t(n)?Aa(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const FD=e=>Aa(Int32Array,e),Vi=e=>Aa(Uint8Array,e),fK=e=>(e.next(),e);function*E4t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Zne?n(t):Jne(t)?t:n(t);return yield*fK(function*(i){let s=null;do s=i.next(yield Aa(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const C4t=e=>E4t(Uint8Array,e);function j6e(e,t){return aw(this,arguments,function*(){if(QB(t))return yield Gr(yield Gr(yield*sz(dk(j6e(e,yield Gr(t))))));const r=function(o){return aw(this,arguments,function*(){yield yield Gr(yield Gr(o))})},i=function(o){return aw(this,arguments,function*(){yield Gr(yield*sz(dk(fK(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Zne?r(t):Jne(t)?i(t):JB(t)?t:r(t);return yield Gr(yield*sz(dk(fK(function(o){return aw(this,arguments,function*(){let a=null;do a=yield Gr(o.next(yield yield Gr(Aa(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Gr(new e)})}const T4t=e=>j6e(Uint8Array,e);function U6e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function A4t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Eve={fromIterable(e){return O6(S4t(e))},fromAsyncIterable(e){return O6(D4t(e))},fromDOMStream(e){return O6(I4t(e))},fromNodeStream(e){return O6(R4t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},O6=e=>(e.next(),e);function*S4t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Y0(r,o)[0]:([i,r,a]=Y0(r,o),i)}({cmd:s,size:o}=yield null);const l=C4t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function D4t(e){return aw(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Y0(i,a)[0]:([s,i,u]=Y0(i,a),s)}({cmd:o,size:a}=yield yield Gr(null));const c=T4t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gr(c.next()):yield Gr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Gr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Gr(c.return(new Uint8Array(0))))}return yield Gr(null)})}function I4t(e){return aw(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Y0(i,a)[0]:([s,i,u]=Y0(i,a),s)}({cmd:o,size:a}=yield yield Gr(null));const c=new k4t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gr(c.read()):yield Gr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Vi(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Gr(c.cancel(f)))}finally{r===!1?yield Gr(c.cancel()):e.locked&&c.releaseLock()}return yield Gr(null)})}class k4t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return ug(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return ug(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Vi(n)),n})}}const xH=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function R4t(e){return aw(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Y0(l,a)[0]:([c,l,u]=Y0(l,a),c)}if({cmd:o,size:a}=yield yield Gr(null),e.isTTY)return yield yield Gr(new Uint8Array(0)),yield Gr(null);try{n[0]=xH(e,"end"),n[1]=xH(e,"error");do{if(n[2]=xH(e,"readable"),[r,s]=yield Gr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Vi(e.read(a-u)),c.byteLength<a-u&&(c=Vi(e.read()))):c=Vi(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Gr(f()));while(a<u)}while(!i)}finally{yield Gr(d(n,r==="error"?s:null))}return yield Gr(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var kl;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(kl||(kl={}));var Hc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Hc||(Hc={}));var cu;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(cu||(cu={}));var K0;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(K0||(K0={}));var Rn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Rn||(Rn={}));var X0;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(X0||(X0={}));var Ia;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ia||(Ia={}));var ge;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(ge||(ge={}));var Jm;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Jm||(Jm={}));const N4t=void 0;function n_(e){if(e===null)return"null";if(e===N4t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>n_(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const P4t=Symbol.for("isArrowBigNum");function Ip(e,...t){return t.length===0?Object.setPrototypeOf(Aa(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Ip.prototype[P4t]=!0;Ip.prototype.toJSON=function(){return`"${eR(this)}"`};Ip.prototype.valueOf=function(){return z6e(this)};Ip.prototype.toString=function(){return eR(this)};Ip.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return z6e(this);case"string":return eR(this);case"default":return O4t(this)}return eR(this)};function DC(...e){return Ip.apply(this,e)}function IC(...e){return Ip.apply(this,e)}function Z3(...e){return Ip.apply(this,e)}Object.setPrototypeOf(DC.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(IC.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Z3.prototype,Object.create(Uint32Array.prototype));Object.assign(DC.prototype,Ip.prototype,{constructor:DC,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(IC.prototype,Ip.prototype,{constructor:IC,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Z3.prototype,Ip.prototype,{constructor:Z3,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function z6e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const eR=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return wH(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return wH(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${wH(t)}`},O4t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:eR(e);function wH(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class ere{static new(t,n){switch(n){case!0:return new DC(t);case!1:return new IC(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new DC(t)}return t.byteLength===16?new Z3(t):new IC(t)}static signed(t){return new DC(t)}static unsigned(t){return new IC(t)}static decimal(t){return new Z3(t)}constructor(t,n){return ere.new(t,n)}}function pp(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var V6e,H6e,q6e,W6e,G6e,Y6e,K6e,X6e,Q6e,J6e,Z6e,eOe,tOe,nOe,rOe,iOe,sOe,oOe,aOe,uOe;let vr=class dK{static isNull(t){return(t==null?void 0:t.typeId)===ge.Null}static isInt(t){return(t==null?void 0:t.typeId)===ge.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ge.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ge.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===ge.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===ge.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ge.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ge.Date}static isTime(t){return(t==null?void 0:t.typeId)===ge.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ge.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ge.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===ge.Duration}static isList(t){return(t==null?void 0:t.typeId)===ge.List}static isStruct(t){return(t==null?void 0:t.typeId)===ge.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ge.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ge.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ge.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ge.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ge.Dictionary}static isDenseUnion(t){return dK.isUnion(t)&&t.mode===Hc.Dense}static isSparseUnion(t){return dK.isUnion(t)&&t.mode===Hc.Sparse}get typeId(){return ge.NONE}};V6e=Symbol.toStringTag;vr[V6e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(vr.prototype);let ay=class extends vr{toString(){return"Null"}get typeId(){return ge.Null}};H6e=Symbol.toStringTag;ay[H6e]=(e=>e[Symbol.toStringTag]="Null")(ay.prototype);class Wl extends vr{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return ge.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}q6e=Symbol.toStringTag;Wl[q6e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Wl.prototype);class tre extends Wl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class nre extends Wl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Bv extends Wl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class rre extends Wl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class ire extends Wl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class sre extends Wl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class ore extends Wl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class are extends Wl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(tre.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(nre.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Bv.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(rre.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(ire.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(sre.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ore.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(are.prototype,"ArrayType",{value:BigUint64Array});class jv extends vr{constructor(t){super(),this.precision=t}get typeId(){return ge.Float}get ArrayType(){switch(this.precision){case cu.HALF:return Uint16Array;case cu.SINGLE:return Float32Array;case cu.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}W6e=Symbol.toStringTag;jv[W6e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(jv.prototype);class lOe extends jv{constructor(){super(cu.HALF)}}class ure extends jv{constructor(){super(cu.SINGLE)}}class lre extends jv{constructor(){super(cu.DOUBLE)}}Object.defineProperty(lOe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ure.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(lre.prototype,"ArrayType",{value:Float64Array});let tR=class extends vr{constructor(){super()}get typeId(){return ge.Binary}toString(){return"Binary"}};G6e=Symbol.toStringTag;tR[G6e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(tR.prototype);let RT=class extends vr{constructor(){super()}get typeId(){return ge.Utf8}toString(){return"Utf8"}};Y6e=Symbol.toStringTag;RT[Y6e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(RT.prototype);let nR=class extends vr{constructor(){super()}get typeId(){return ge.Bool}toString(){return"Bool"}};K6e=Symbol.toStringTag;nR[K6e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(nR.prototype);let o$=class extends vr{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return ge.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};X6e=Symbol.toStringTag;o$[X6e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(o$.prototype);class NT extends vr{constructor(t){super(),this.unit=t}get typeId(){return ge.Date}toString(){return`Date${(this.unit+1)*32}<${K0[this.unit]}>`}}Q6e=Symbol.toStringTag;NT[Q6e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(NT.prototype);class F4t extends NT{constructor(){super(K0.DAY)}}class $4t extends NT{constructor(){super(K0.MILLISECOND)}}class uy extends vr{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return ge.Time}toString(){return`Time${this.bitWidth}<${Rn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}J6e=Symbol.toStringTag;uy[J6e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(uy.prototype);class M4t extends uy{constructor(){super(Rn.SECOND,32)}}class L4t extends uy{constructor(){super(Rn.MILLISECOND,32)}}class B4t extends uy{constructor(){super(Rn.MICROSECOND,64)}}class j4t extends uy{constructor(){super(Rn.NANOSECOND,64)}}class a$ extends vr{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return ge.Timestamp}toString(){return`Timestamp<${Rn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Z6e=Symbol.toStringTag;a$[Z6e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(a$.prototype);class PT extends vr{constructor(t){super(),this.unit=t}get typeId(){return ge.Interval}toString(){return`Interval<${X0[this.unit]}>`}}eOe=Symbol.toStringTag;PT[eOe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(PT.prototype);class U4t extends PT{constructor(){super(X0.DAY_TIME)}}class z4t extends PT{constructor(){super(X0.YEAR_MONTH)}}let u$=class extends vr{constructor(t){super(),this.unit=t}get typeId(){return ge.Duration}toString(){return`Duration<${Rn[this.unit]}>`}};tOe=Symbol.toStringTag;u$[tOe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(u$.prototype);let OT=class extends vr{constructor(t){super(),this.children=[t]}get typeId(){return ge.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};nOe=Symbol.toStringTag;OT[nOe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(OT.prototype);class Vu extends vr{constructor(t){super(),this.children=t}get typeId(){return ge.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}rOe=Symbol.toStringTag;Vu[rOe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Vu.prototype);class rR extends vr{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return ge.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}iOe=Symbol.toStringTag;rR[iOe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(rR.prototype);let l$=class extends vr{constructor(t){super(),this.byteWidth=t}get typeId(){return ge.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};sOe=Symbol.toStringTag;l$[sOe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(l$.prototype);let FT=class extends vr{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return ge.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};oOe=Symbol.toStringTag;FT[oOe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(FT.prototype);class iR extends vr{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return ge.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}aOe=Symbol.toStringTag;iR[aOe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(iR.prototype);const V4t=(e=>()=>++e)(-1);class Uv extends vr{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?V4t():pp(r)}get typeId(){return ge.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}uOe=Symbol.toStringTag;Uv[uOe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Uv.prototype);function t0(e){const t=e;switch(e.typeId){case ge.Decimal:return e.bitWidth/32;case ge.Timestamp:return 2;case ge.Date:return 1+t.unit;case ge.Interval:return 1+t.unit;case ge.FixedSizeList:return t.listSize;case ge.FixedSizeBinary:return t.byteWidth;default:return 1}}class br{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return H4t(this,t,n)}getVisitFnByTypeId(t,n=!0){return T2(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function H4t(e,t,n=!0){return typeof t=="number"?T2(e,t,n):typeof t=="string"&&t in ge?T2(e,ge[t],n):t&&t instanceof vr?T2(e,Cve(t),n):t!=null&&t.type&&t.type instanceof vr?T2(e,Cve(t.type),n):T2(e,ge.NONE,n)}function T2(e,t,n=!0){let r=null;switch(t){case ge.Null:r=e.visitNull;break;case ge.Bool:r=e.visitBool;break;case ge.Int:r=e.visitInt;break;case ge.Int8:r=e.visitInt8||e.visitInt;break;case ge.Int16:r=e.visitInt16||e.visitInt;break;case ge.Int32:r=e.visitInt32||e.visitInt;break;case ge.Int64:r=e.visitInt64||e.visitInt;break;case ge.Uint8:r=e.visitUint8||e.visitInt;break;case ge.Uint16:r=e.visitUint16||e.visitInt;break;case ge.Uint32:r=e.visitUint32||e.visitInt;break;case ge.Uint64:r=e.visitUint64||e.visitInt;break;case ge.Float:r=e.visitFloat;break;case ge.Float16:r=e.visitFloat16||e.visitFloat;break;case ge.Float32:r=e.visitFloat32||e.visitFloat;break;case ge.Float64:r=e.visitFloat64||e.visitFloat;break;case ge.Utf8:r=e.visitUtf8;break;case ge.Binary:r=e.visitBinary;break;case ge.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case ge.Date:r=e.visitDate;break;case ge.DateDay:r=e.visitDateDay||e.visitDate;break;case ge.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case ge.Timestamp:r=e.visitTimestamp;break;case ge.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case ge.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case ge.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ge.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case ge.Time:r=e.visitTime;break;case ge.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case ge.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case ge.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case ge.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case ge.Decimal:r=e.visitDecimal;break;case ge.List:r=e.visitList;break;case ge.Struct:r=e.visitStruct;break;case ge.Union:r=e.visitUnion;break;case ge.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case ge.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case ge.Dictionary:r=e.visitDictionary;break;case ge.Interval:r=e.visitInterval;break;case ge.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case ge.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case ge.Duration:r=e.visitDuration;break;case ge.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case ge.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case ge.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case ge.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case ge.FixedSizeList:r=e.visitFixedSizeList;break;case ge.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ge[t]}'`)}function Cve(e){switch(e.typeId){case ge.Null:return ge.Null;case ge.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ge.Int8:ge.Uint8;case 16:return n?ge.Int16:ge.Uint16;case 32:return n?ge.Int32:ge.Uint32;case 64:return n?ge.Int64:ge.Uint64}return ge.Int}case ge.Float:switch(e.precision){case cu.HALF:return ge.Float16;case cu.SINGLE:return ge.Float32;case cu.DOUBLE:return ge.Float64}return ge.Float;case ge.Binary:return ge.Binary;case ge.Utf8:return ge.Utf8;case ge.Bool:return ge.Bool;case ge.Decimal:return ge.Decimal;case ge.Time:switch(e.unit){case Rn.SECOND:return ge.TimeSecond;case Rn.MILLISECOND:return ge.TimeMillisecond;case Rn.MICROSECOND:return ge.TimeMicrosecond;case Rn.NANOSECOND:return ge.TimeNanosecond}return ge.Time;case ge.Timestamp:switch(e.unit){case Rn.SECOND:return ge.TimestampSecond;case Rn.MILLISECOND:return ge.TimestampMillisecond;case Rn.MICROSECOND:return ge.TimestampMicrosecond;case Rn.NANOSECOND:return ge.TimestampNanosecond}return ge.Timestamp;case ge.Date:switch(e.unit){case K0.DAY:return ge.DateDay;case K0.MILLISECOND:return ge.DateMillisecond}return ge.Date;case ge.Interval:switch(e.unit){case X0.DAY_TIME:return ge.IntervalDayTime;case X0.YEAR_MONTH:return ge.IntervalYearMonth}return ge.Interval;case ge.Duration:switch(e.unit){case Rn.SECOND:return ge.DurationSecond;case Rn.MILLISECOND:return ge.DurationMillisecond;case Rn.MICROSECOND:return ge.DurationMicrosecond;case Rn.NANOSECOND:return ge.DurationNanosecond}return ge.Duration;case ge.Map:return ge.Map;case ge.List:return ge.List;case ge.Struct:return ge.Struct;case ge.Union:switch(e.mode){case Hc.Dense:return ge.DenseUnion;case Hc.Sparse:return ge.SparseUnion}return ge.Union;case ge.FixedSizeBinary:return ge.FixedSizeBinary;case ge.FixedSizeList:return ge.FixedSizeList;case ge.Dictionary:return ge.Dictionary}throw new Error(`Unrecognized type '${ge[e.typeId]}'`)}br.prototype.visitInt8=null;br.prototype.visitInt16=null;br.prototype.visitInt32=null;br.prototype.visitInt64=null;br.prototype.visitUint8=null;br.prototype.visitUint16=null;br.prototype.visitUint32=null;br.prototype.visitUint64=null;br.prototype.visitFloat16=null;br.prototype.visitFloat32=null;br.prototype.visitFloat64=null;br.prototype.visitDateDay=null;br.prototype.visitDateMillisecond=null;br.prototype.visitTimestampSecond=null;br.prototype.visitTimestampMillisecond=null;br.prototype.visitTimestampMicrosecond=null;br.prototype.visitTimestampNanosecond=null;br.prototype.visitTimeSecond=null;br.prototype.visitTimeMillisecond=null;br.prototype.visitTimeMicrosecond=null;br.prototype.visitTimeNanosecond=null;br.prototype.visitDenseUnion=null;br.prototype.visitSparseUnion=null;br.prototype.visitIntervalDayTime=null;br.prototype.visitIntervalYearMonth=null;br.prototype.visitDuration=null;br.prototype.visitDurationSecond=null;br.prototype.visitDurationMillisecond=null;br.prototype.visitDurationMicrosecond=null;br.prototype.visitDurationNanosecond=null;const cOe=new Float64Array(1),n2=new Uint32Array(cOe.buffer);function fOe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function dOe(e){if(e!==e)return 32256;cOe[0]=e;const t=(n2[1]&2147483648)>>16&65535;let n=n2[1]&2146435072,r=0;return n>=1089470464?n2[0]>0?n=31744:(n=(n&2080374784)>>16,r=(n2[1]&1048575)>>10):n<=1056964608?(r=1048576+(n2[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(n2[1]&1048575)+512>>10),t|n|r&65535}class Mn extends br{}function Vn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const q4t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},cre=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},W4t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},G4t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},hOe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},Y4t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Dy=({values:e},t,n)=>{e[t]=n},fre=({values:e},t,n)=>{e[t]=n},pOe=({values:e},t,n)=>{e[t]=dOe(n)},K4t=(e,t,n)=>{switch(e.type.precision){case cu.HALF:return pOe(e,t,n);case cu.SINGLE:case cu.DOUBLE:return fre(e,t,n)}},dre=({values:e},t,n)=>{q4t(e,t,n.valueOf())},hre=({values:e},t,n)=>{cre(e,t*2,n.valueOf())},mOe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},X4t=({values:e,valueOffsets:t},n,r)=>hOe(e,t,n,r),Q4t=({values:e,valueOffsets:t},n,r)=>{hOe(e,t,n,Qne(r))},gOe=(e,t,n)=>{e.type.unit===K0.DAY?dre(e,t,n):hre(e,t,n)},pre=({values:e},t,n)=>cre(e,t*2,n/1e3),mre=({values:e},t,n)=>cre(e,t*2,n),gre=({values:e},t,n)=>W4t(e,t*2,n),yre=({values:e},t,n)=>G4t(e,t*2,n),yOe=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return pre(e,t,n);case Rn.MILLISECOND:return mre(e,t,n);case Rn.MICROSECOND:return gre(e,t,n);case Rn.NANOSECOND:return yre(e,t,n)}},vre=({values:e},t,n)=>{e[t]=n},bre=({values:e},t,n)=>{e[t]=n},xre=({values:e},t,n)=>{e[t]=n},wre=({values:e},t,n)=>{e[t]=n},vOe=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return vre(e,t,n);case Rn.MILLISECOND:return bre(e,t,n);case Rn.MICROSECOND:return xre(e,t,n);case Rn.NANOSECOND:return wre(e,t,n)}},bOe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},J4t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Ud.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},Z4t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Ud.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},e6t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),t6t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),n6t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),r6t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),i6t=(e,t,n)=>{const r=e.type.children.map(s=>Ud.getVisitFn(s.type)),i=n instanceof Map?n6t(t,n):n instanceof gi?t6t(t,n):Array.isArray(n)?e6t(t,n):r6t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},s6t=(e,t,n)=>{e.type.mode===Hc.Dense?xOe(e,t,n):wOe(e,t,n)},xOe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Ud.visit(i,e.valueOffsets[t],n)},wOe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Ud.visit(i,t,n)},o6t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},_Oe=(e,t,n)=>{e.type.unit===X0.DAY_TIME?_re(e,t,n):Ere(e,t,n)},_re=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},Ere=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},Cre=({values:e},t,n)=>{e[t]=n},Tre=({values:e},t,n)=>{e[t]=n},Are=({values:e},t,n)=>{e[t]=n},Sre=({values:e},t,n)=>{e[t]=n},EOe=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return Cre(e,t,n);case Rn.MILLISECOND:return Tre(e,t,n);case Rn.MICROSECOND:return Are(e,t,n);case Rn.NANOSECOND:return Sre(e,t,n)}},a6t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Ud.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Mn.prototype.visitBool=Vn(Y4t);Mn.prototype.visitInt=Vn(Dy);Mn.prototype.visitInt8=Vn(Dy);Mn.prototype.visitInt16=Vn(Dy);Mn.prototype.visitInt32=Vn(Dy);Mn.prototype.visitInt64=Vn(Dy);Mn.prototype.visitUint8=Vn(Dy);Mn.prototype.visitUint16=Vn(Dy);Mn.prototype.visitUint32=Vn(Dy);Mn.prototype.visitUint64=Vn(Dy);Mn.prototype.visitFloat=Vn(K4t);Mn.prototype.visitFloat16=Vn(pOe);Mn.prototype.visitFloat32=Vn(fre);Mn.prototype.visitFloat64=Vn(fre);Mn.prototype.visitUtf8=Vn(Q4t);Mn.prototype.visitBinary=Vn(X4t);Mn.prototype.visitFixedSizeBinary=Vn(mOe);Mn.prototype.visitDate=Vn(gOe);Mn.prototype.visitDateDay=Vn(dre);Mn.prototype.visitDateMillisecond=Vn(hre);Mn.prototype.visitTimestamp=Vn(yOe);Mn.prototype.visitTimestampSecond=Vn(pre);Mn.prototype.visitTimestampMillisecond=Vn(mre);Mn.prototype.visitTimestampMicrosecond=Vn(gre);Mn.prototype.visitTimestampNanosecond=Vn(yre);Mn.prototype.visitTime=Vn(vOe);Mn.prototype.visitTimeSecond=Vn(vre);Mn.prototype.visitTimeMillisecond=Vn(bre);Mn.prototype.visitTimeMicrosecond=Vn(xre);Mn.prototype.visitTimeNanosecond=Vn(wre);Mn.prototype.visitDecimal=Vn(bOe);Mn.prototype.visitList=Vn(J4t);Mn.prototype.visitStruct=Vn(i6t);Mn.prototype.visitUnion=Vn(s6t);Mn.prototype.visitDenseUnion=Vn(xOe);Mn.prototype.visitSparseUnion=Vn(wOe);Mn.prototype.visitDictionary=Vn(o6t);Mn.prototype.visitInterval=Vn(_Oe);Mn.prototype.visitIntervalDayTime=Vn(_re);Mn.prototype.visitIntervalYearMonth=Vn(Ere);Mn.prototype.visitDuration=Vn(EOe);Mn.prototype.visitDurationSecond=Vn(Cre);Mn.prototype.visitDurationMillisecond=Vn(Tre);Mn.prototype.visitDurationMicrosecond=Vn(Are);Mn.prototype.visitDurationNanosecond=Vn(Sre);Mn.prototype.visitFixedSizeList=Vn(a6t);Mn.prototype.visitMap=Vn(Z4t);const Ud=new Mn,Rh=Symbol.for("parent"),kC=Symbol.for("rowIndex");class Dre{constructor(t,n){return this[Rh]=t,this[kC]=n,new Proxy(this,new l6t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[kC],n=this[Rh],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=qc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${n_(t)}: ${n_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new u6t(this[Rh],this[kC])}}class u6t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,qc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Dre.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Rh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kC]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class l6t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Rh].type.children.map(n=>n.name)}has(t,n){return t[Rh].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Rh].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Rh].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=qc.visit(t[Rh].children[r],t[kC]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Rh].type.children.findIndex(s=>s.name===n);return i!==-1?(Ud.visit(t[Rh].children[i],t[kC],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Nn extends br{}function Ln(e){return(t,n)=>t.getValid(n)?e(t,n):null}const c6t=(e,t)=>864e5*e[t],Ire=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),f6t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,d6t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,COe=e=>new Date(e),h6t=(e,t)=>COe(c6t(e,t)),p6t=(e,t)=>COe(Ire(e,t)),m6t=(e,t)=>null,TOe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},g6t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},AOe=({values:e},t)=>h6t(e,t),SOe=({values:e},t)=>p6t(e,t*2),Fb=({stride:e,values:t},n)=>t[e*n],y6t=({stride:e,values:t},n)=>fOe(t[e*n]),DOe=({values:e},t)=>e[t],v6t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),b6t=({values:e,valueOffsets:t},n)=>TOe(e,t,n),x6t=({values:e,valueOffsets:t},n)=>{const r=TOe(e,t,n);return r!==null?cK(r):null},w6t=({values:e},t)=>e[t],_6t=({type:e,values:t},n)=>e.precision!==cu.HALF?t[n]:fOe(t[n]),E6t=(e,t)=>e.type.unit===K0.DAY?AOe(e,t):SOe(e,t),IOe=({values:e},t)=>1e3*Ire(e,t*2),kOe=({values:e},t)=>Ire(e,t*2),ROe=({values:e},t)=>f6t(e,t*2),NOe=({values:e},t)=>d6t(e,t*2),C6t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return IOe(e,t);case Rn.MILLISECOND:return kOe(e,t);case Rn.MICROSECOND:return ROe(e,t);case Rn.NANOSECOND:return NOe(e,t)}},POe=({values:e},t)=>e[t],OOe=({values:e},t)=>e[t],FOe=({values:e},t)=>e[t],$Oe=({values:e},t)=>e[t],T6t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return POe(e,t);case Rn.MILLISECOND:return OOe(e,t);case Rn.MICROSECOND:return FOe(e,t);case Rn.NANOSECOND:return $Oe(e,t)}},A6t=({values:e,stride:t},n)=>ere.decimal(e.subarray(t*n,t*(n+1))),S6t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new gi([u])},D6t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new ZB(o.slice(i,s-i))},I6t=(e,t)=>new Dre(e,t),k6t=(e,t)=>e.type.mode===Hc.Dense?MOe(e,t):LOe(e,t),MOe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return qc.visit(r,e.valueOffsets[t])},LOe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return qc.visit(r,t)},R6t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},N6t=(e,t)=>e.type.unit===X0.DAY_TIME?BOe(e,t):jOe(e,t),BOe=({values:e},t)=>e.subarray(2*t,2*(t+1)),jOe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},UOe=({values:e},t)=>e[t],zOe=({values:e},t)=>e[t],VOe=({values:e},t)=>e[t],HOe=({values:e},t)=>e[t],P6t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return UOe(e,t);case Rn.MILLISECOND:return zOe(e,t);case Rn.MICROSECOND:return VOe(e,t);case Rn.NANOSECOND:return HOe(e,t)}},O6t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new gi([s])};Nn.prototype.visitNull=Ln(m6t);Nn.prototype.visitBool=Ln(g6t);Nn.prototype.visitInt=Ln(w6t);Nn.prototype.visitInt8=Ln(Fb);Nn.prototype.visitInt16=Ln(Fb);Nn.prototype.visitInt32=Ln(Fb);Nn.prototype.visitInt64=Ln(DOe);Nn.prototype.visitUint8=Ln(Fb);Nn.prototype.visitUint16=Ln(Fb);Nn.prototype.visitUint32=Ln(Fb);Nn.prototype.visitUint64=Ln(DOe);Nn.prototype.visitFloat=Ln(_6t);Nn.prototype.visitFloat16=Ln(y6t);Nn.prototype.visitFloat32=Ln(Fb);Nn.prototype.visitFloat64=Ln(Fb);Nn.prototype.visitUtf8=Ln(x6t);Nn.prototype.visitBinary=Ln(b6t);Nn.prototype.visitFixedSizeBinary=Ln(v6t);Nn.prototype.visitDate=Ln(E6t);Nn.prototype.visitDateDay=Ln(AOe);Nn.prototype.visitDateMillisecond=Ln(SOe);Nn.prototype.visitTimestamp=Ln(C6t);Nn.prototype.visitTimestampSecond=Ln(IOe);Nn.prototype.visitTimestampMillisecond=Ln(kOe);Nn.prototype.visitTimestampMicrosecond=Ln(ROe);Nn.prototype.visitTimestampNanosecond=Ln(NOe);Nn.prototype.visitTime=Ln(T6t);Nn.prototype.visitTimeSecond=Ln(POe);Nn.prototype.visitTimeMillisecond=Ln(OOe);Nn.prototype.visitTimeMicrosecond=Ln(FOe);Nn.prototype.visitTimeNanosecond=Ln($Oe);Nn.prototype.visitDecimal=Ln(A6t);Nn.prototype.visitList=Ln(S6t);Nn.prototype.visitStruct=Ln(I6t);Nn.prototype.visitUnion=Ln(k6t);Nn.prototype.visitDenseUnion=Ln(MOe);Nn.prototype.visitSparseUnion=Ln(LOe);Nn.prototype.visitDictionary=Ln(R6t);Nn.prototype.visitInterval=Ln(N6t);Nn.prototype.visitIntervalDayTime=Ln(BOe);Nn.prototype.visitIntervalYearMonth=Ln(jOe);Nn.prototype.visitDuration=Ln(P6t);Nn.prototype.visitDurationSecond=Ln(UOe);Nn.prototype.visitDurationMillisecond=Ln(zOe);Nn.prototype.visitDurationMicrosecond=Ln(VOe);Nn.prototype.visitDurationNanosecond=Ln(HOe);Nn.prototype.visitFixedSizeList=Ln(O6t);Nn.prototype.visitMap=Ln(D6t);const qc=new Nn,Uh=Symbol.for("keys"),RC=Symbol.for("vals");class ZB{constructor(t){return this[Uh]=new gi([t.children[0]]).memoize(),this[RC]=t.children[1],new Proxy(this,new $6t)}[Symbol.iterator](){return new F6t(this[Uh],this[RC])}get size(){return this[Uh].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Uh],n=this[RC],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=qc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${n_(t)}: ${n_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class F6t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),qc.visit(this.vals,t)]})}}class $6t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Uh].toArray().map(String)}has(t,n){return t[Uh].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Uh].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Uh].indexOf(n);if(r!==-1){const i=qc.visit(Reflect.get(t,RC),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Uh].indexOf(n);return i!==-1?(Ud.visit(Reflect.get(t,RC),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(ZB.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Uh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[RC]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Tve;function qOe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Tve=s,s=o,o=Tve),o>i&&(o=i),r?r(e,s,o):[s,o]}const Ave=e=>e!==e;function iS(e){if(typeof e!=="object"||e===null)return Ave(e)?Ave:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?A4t(e,n):!1:e instanceof Map?L6t(e):Array.isArray(e)?M6t(e):e instanceof gi?B6t(e):j6t(e,!0)}function M6t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=iS(e[n]);return e9(t)}function L6t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=iS(r);return e9(n)}function B6t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=iS(e.get(n));return e9(t)}function j6t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=iS(e[n[i]]);return e9(r,n)}function e9(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return U6t(e,n);case Map:return Sve(e,n,n.keys());case ZB:case Dre:case Object:case void 0:return Sve(e,n,t||Object.keys(n))}return n instanceof gi?z6t(e,n):!1}}function U6t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function z6t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Sve(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function WOe(e,t,n,r){return(n&1<<r)!==0}function V6t(e,t,n,r){return(n&1<<r)>>r}function c$(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):GOe(new kre(n,e,t,null,WOe)).subarray(0,r)),i}return n}function GOe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class kre{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function hK(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new kre(e,t,n-t,e,V6t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return hK(e,t,i)+hK(e,r,n)+H6t(e,i>>3,r-i>>3)}function H6t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=_H(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=_H(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=_H(s.getUint8(i)),i+=1;return r}function _H(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const q6t=-1;class zi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return vr.isSparseUnion(t)?this.children.some(n=>n.nullable):vr.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(vr.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=q6t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-hK(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof zi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=t0(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(vr.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Hc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(vr.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Hc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(c$(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new zi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ge.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(c$(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Jm.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Jm.TYPE])&&(o[Jm.TYPE]=s.subarray(t,t+n)),(s=o[Jm.OFFSET])&&(o[Jm.OFFSET]=s.subarray(t,t+n+1))||(s=o[Jm.DATA])&&(o[Jm.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}zi.prototype.children=Object.freeze([]);class kk extends br{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new zi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.data),s=Vi(t.nullBitmap),o=FD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.data),s=Vi(t.nullBitmap),o=FD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length/t0(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length/t0(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length/t0(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length/t0(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length/t0(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Vi(t.nullBitmap),o=FD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Vi(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Aa(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(vr.isSparseUnion(n))return new zi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=FD(t.valueOffsets);return new zi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.indices.ArrayType,t.data),{["dictionary"]:o=new gi([new kk().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length/t0(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Aa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new kk().visit({type:n.valueType})}=t,s=Vi(t.nullBitmap),{["length"]:o=i.length/t0(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new kk().visit({type:n.childType})}=t,s=Vi(t.nullBitmap),o=FD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,void 0,s],[i])}}const W6t=new kk;function Bu(e){return W6t.visit(e)}class Dve{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function YOe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function KOe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function XOe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function Rre(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function Nre(e,t){return e.getValid(t)}function NC(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return Rre(r,this._offsets,n,t)}}function QOe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=Rre(s,this._offsets,r,n);return t=void 0,o}}function JOe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):Rre(s,this._offsets,i,n);return t=void 0,o}}class Pn extends br{}function G6t(e,t){return t===null&&e.length>0?0:-1}function Y6t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new kre(n,e.offset+(t||0),e.length,n,WOe)){if(!i)return r;++r}return-1}function Jn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case ge.Union:break;case ge.Dictionary:break;default:return Y6t(e,n)}const r=qc.getVisitFn(e),i=iS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function ZOe(e,t,n){const r=qc.getVisitFn(e),i=iS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Pn.prototype.visitNull=G6t;Pn.prototype.visitBool=Jn;Pn.prototype.visitInt=Jn;Pn.prototype.visitInt8=Jn;Pn.prototype.visitInt16=Jn;Pn.prototype.visitInt32=Jn;Pn.prototype.visitInt64=Jn;Pn.prototype.visitUint8=Jn;Pn.prototype.visitUint16=Jn;Pn.prototype.visitUint32=Jn;Pn.prototype.visitUint64=Jn;Pn.prototype.visitFloat=Jn;Pn.prototype.visitFloat16=Jn;Pn.prototype.visitFloat32=Jn;Pn.prototype.visitFloat64=Jn;Pn.prototype.visitUtf8=Jn;Pn.prototype.visitBinary=Jn;Pn.prototype.visitFixedSizeBinary=Jn;Pn.prototype.visitDate=Jn;Pn.prototype.visitDateDay=Jn;Pn.prototype.visitDateMillisecond=Jn;Pn.prototype.visitTimestamp=Jn;Pn.prototype.visitTimestampSecond=Jn;Pn.prototype.visitTimestampMillisecond=Jn;Pn.prototype.visitTimestampMicrosecond=Jn;Pn.prototype.visitTimestampNanosecond=Jn;Pn.prototype.visitTime=Jn;Pn.prototype.visitTimeSecond=Jn;Pn.prototype.visitTimeMillisecond=Jn;Pn.prototype.visitTimeMicrosecond=Jn;Pn.prototype.visitTimeNanosecond=Jn;Pn.prototype.visitDecimal=Jn;Pn.prototype.visitList=Jn;Pn.prototype.visitStruct=Jn;Pn.prototype.visitUnion=Jn;Pn.prototype.visitDenseUnion=ZOe;Pn.prototype.visitSparseUnion=ZOe;Pn.prototype.visitDictionary=Jn;Pn.prototype.visitInterval=Jn;Pn.prototype.visitIntervalDayTime=Jn;Pn.prototype.visitIntervalYearMonth=Jn;Pn.prototype.visitDuration=Jn;Pn.prototype.visitDurationSecond=Jn;Pn.prototype.visitDurationMillisecond=Jn;Pn.prototype.visitDurationMicrosecond=Jn;Pn.prototype.visitDurationNanosecond=Jn;Pn.prototype.visitFixedSizeList=Jn;Pn.prototype.visitMap=Jn;const f$=new Pn;class On extends br{}function Bn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===ge.Timestamp||t instanceof Wl&&t.bitWidth!==64||t instanceof uy&&t.bitWidth!==64||t instanceof jv&&t.precision!==cu.HALF))return new Dve(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Dve(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new K6t(o)})}class K6t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}On.prototype.visitNull=Bn;On.prototype.visitBool=Bn;On.prototype.visitInt=Bn;On.prototype.visitInt8=Bn;On.prototype.visitInt16=Bn;On.prototype.visitInt32=Bn;On.prototype.visitInt64=Bn;On.prototype.visitUint8=Bn;On.prototype.visitUint16=Bn;On.prototype.visitUint32=Bn;On.prototype.visitUint64=Bn;On.prototype.visitFloat=Bn;On.prototype.visitFloat16=Bn;On.prototype.visitFloat32=Bn;On.prototype.visitFloat64=Bn;On.prototype.visitUtf8=Bn;On.prototype.visitBinary=Bn;On.prototype.visitFixedSizeBinary=Bn;On.prototype.visitDate=Bn;On.prototype.visitDateDay=Bn;On.prototype.visitDateMillisecond=Bn;On.prototype.visitTimestamp=Bn;On.prototype.visitTimestampSecond=Bn;On.prototype.visitTimestampMillisecond=Bn;On.prototype.visitTimestampMicrosecond=Bn;On.prototype.visitTimestampNanosecond=Bn;On.prototype.visitTime=Bn;On.prototype.visitTimeSecond=Bn;On.prototype.visitTimeMillisecond=Bn;On.prototype.visitTimeMicrosecond=Bn;On.prototype.visitTimeNanosecond=Bn;On.prototype.visitDecimal=Bn;On.prototype.visitList=Bn;On.prototype.visitStruct=Bn;On.prototype.visitUnion=Bn;On.prototype.visitDenseUnion=Bn;On.prototype.visitSparseUnion=Bn;On.prototype.visitDictionary=Bn;On.prototype.visitInterval=Bn;On.prototype.visitIntervalDayTime=Bn;On.prototype.visitIntervalYearMonth=Bn;On.prototype.visitDuration=Bn;On.prototype.visitDurationSecond=Bn;On.prototype.visitDurationMillisecond=Bn;On.prototype.visitDurationMicrosecond=Bn;On.prototype.visitDurationNanosecond=Bn;On.prototype.visitFixedSizeList=Bn;On.prototype.visitMap=Bn;const Pre=new On,X6t=(e,t)=>e+t;class $b extends br{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Rn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Q0.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Q0.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Q6t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),J6t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Z6t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Q0.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},eOt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Q0.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},tOt=(e,t)=>e.type.mode===Hc.Dense?eFe(e,t):tFe(e,t),eFe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Q0.visit(t[s],r[i])},tFe=({children:e},t)=>4+Q0.visitMany(e,e.map(()=>t)).reduce(X6t,0);$b.prototype.visitUtf8=Q6t;$b.prototype.visitBinary=J6t;$b.prototype.visitList=Z6t;$b.prototype.visitFixedSizeList=eOt;$b.prototype.visitUnion=tOt;$b.prototype.visitDenseUnion=eFe;$b.prototype.visitSparseUnion=tFe;const Q0=new $b;var nFe;const rFe={},iFe={};class gi{constructor(t){var n,r,i;const s=t[0]instanceof gi?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof zi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=rFe[o.typeId],f=s[0];this.isValid=d=>Nre(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,iFe[o.typeId]),this._offsets=KOe(s);break}this.data=s,this.type=o,this.stride=t0(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return YOe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ge[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Pre.visit(this)}concat(...t){return new gi(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new gi(qOe(this,t,n,({data:r,_offsets:i},s,o)=>XOe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case ge.Int:case ge.Float:case ge.Decimal:case ge.Time:case ge.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new gi(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return vr.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(vr.isDictionary(this.type)){const t=new d$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new gi(n)}return new d$(this)}unmemoize(){if(vr.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new gi(n)}return this}}nFe=Symbol.toStringTag;gi[nFe]=(e=>{e.type=vr.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ge).map(n=>ge[n]).filter(n=>typeof n=="number"&&n!==ge.NONE);for(const n of t){const r=qc.getVisitFnByTypeId(n),i=Ud.getVisitFnByTypeId(n),s=f$.getVisitFnByTypeId(n),o=Q0.getVisitFnByTypeId(n);rFe[n]={get:r,set:i,indexOf:s,byteLength:o},iFe[n]=Object.create(e,{isValid:{value:NC(Nre)},get:{value:NC(qc.getVisitFnByTypeId(n))},set:{value:QOe(Ud.getVisitFnByTypeId(n))},indexOf:{value:JOe(f$.getVisitFnByTypeId(n))},getByteLength:{value:NC(Q0.getVisitFnByTypeId(n))}})}return"Vector"})(gi.prototype);class d$ extends gi{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new d$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new gi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function nOt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${rOt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function rOt(e){return typeof e!="bigint"?n_(e):`${n_(e)}n`}const EH=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,iOt=(e,t=0)=>e.length>=t?e.subarray(0,t):s$(new e.constructor(t),e,0);class t9{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?EH(r*1,this.BYTES_PER_ELEMENT):EH(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=EH(t*this.stride,this.BYTES_PER_ELEMENT);const n=iOt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=s$(new this.ArrayType(t),this.buffer)}}t9.prototype.offset=0;class MN extends t9{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class sFe extends MN{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class oFe extends MN{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let tf=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=t0(t),this._nulls=new sFe,n&&n.length>0&&(this._isValid=nOt(n))}toVector(){return new gi([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Bu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};tf.prototype.length=1;tf.prototype.stride=1;tf.prototype.children=null;tf.prototype.finished=!1;tf.prototype.nullValues=null;tf.prototype._isValid=()=>!0;class Iy extends tf{constructor(t){super(t),this._values=new MN(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class n9 extends tf{constructor(t){super(t),this._pendingLength=0,this._offsets=new oFe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof ZB?n[Uh].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class pK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const CH=2,f0=4,fg=4,es=4,b1=new Int32Array(2),Ive=new Float32Array(b1.buffer),kve=new Float64Array(b1.buffer),F6=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var mK;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(mK||(mK={}));let h$=class aFe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new aFe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return b1[0]=this.readInt32(t),Ive[0]}readFloat64(t){return b1[F6?0:1]=this.readInt32(t),b1[F6?1:0]=this.readInt32(t+4),kve[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Ive[0]=n,this.writeInt32(t,b1[0])}writeFloat64(t,n){kve[0]=n,this.writeInt32(t,b1[F6?0:1]),this.writeInt32(t+4,b1[F6?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+f0+fg)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<fg;n++)t+=String.fromCharCode(this.readInt8(this.position_+f0+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=f0;const i=this.bytes_.subarray(t,t+r);return n===mK.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+f0}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=fg)throw new Error("FlatBuffers: file identifier must be length "+fg);for(let n=0;n<fg;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+f0+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},uFe=class lFe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=h$.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=lFe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=h$.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(f0,0),this.writeInt32(this.offset()-t+f0)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*CH;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=CH;l<s;l+=CH)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?es:0;if(n){const s=n;if(this.prep(this.minalign,f0+fg+i),s.length!=fg)throw new TypeError("FlatBuffers: file identifier must be length "+fg);for(let o=fg-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,f0+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(f0,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class sa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new sa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+es),(n||new sa).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return sa.startKeyValue(t),sa.addKey(t,n),sa.addValue(t,r),sa.endKeyValue(t)}}var $T;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})($T||($T={}));var MT;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(MT||(MT={}));var p$;(function(e){e[e.DenseArray=0]="DenseArray"})(p$||(p$={}));class vf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new vf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+es),(n||new vf).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return vf.startInt(t),vf.addBitWidth(t,n),vf.addIsSigned(t,r),vf.endInt(t)}}class dg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new dg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+es),(n||new dg).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new vf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):p$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,p$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class mw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new mw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+es),(n||new mw).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return mw.startBinary(t),mw.endBinary(t)}}class gw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new gw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+es),(n||new gw).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return gw.startBool(t),gw.endBool(t)}}var m$;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(m$||(m$={}));let xF=class A2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new A2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+es),(n||new A2).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):m$.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,m$.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return A2.startDate(t),A2.addUnit(t,n),A2.endDate(t)}},S2=class l1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new l1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+es),(n||new l1).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return l1.startDecimal(t),l1.addPrecision(t,n),l1.addScale(t,r),l1.addBitWidth(t,i),l1.endDecimal(t)}};var zv;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(zv||(zv={}));class d0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new d0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+es),(n||new d0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zv.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,zv.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return d0.startDuration(t),d0.addUnit(t,n),d0.endDuration(t)}}class h0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new h0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+es),(n||new h0).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return h0.startFixedSizeBinary(t),h0.addByteWidth(t,n),h0.endFixedSizeBinary(t)}}class p0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new p0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+es),(n||new p0).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return p0.startFixedSizeList(t),p0.addListSize(t,n),p0.endFixedSizeList(t)}}var g$;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(g$||(g$={}));class m0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new m0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+es),(n||new m0).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):g$.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,g$.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return m0.startFloatingPoint(t),m0.addPrecision(t,n),m0.endFloatingPoint(t)}}var y$;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(y$||(y$={}));class g0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new g0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+es),(n||new g0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):y$.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,y$.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return g0.startInterval(t),g0.addUnit(t,n),g0.endInterval(t)}}class yw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+es),(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return yw.startList(t),yw.endList(t)}}let wF=class D2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new D2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+es),(n||new D2).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return D2.startMap(t),D2.addKeysSorted(t,n),D2.endMap(t)}};class vw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new vw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+es),(n||new vw).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return vw.startNull(t),vw.endNull(t)}}class bw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new bw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+es),(n||new bw).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return bw.startStruct_(t),bw.endStruct_(t)}}let NI=class Mx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Mx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+es),(n||new Mx).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zv.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,zv.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Mx.startTime(t),Mx.addUnit(t,n),Mx.addBitWidth(t,r),Mx.endTime(t)}},PI=class Lx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Lx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+es),(n||new Lx).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zv.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,zv.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Lx.startTimestamp(t),Lx.addUnit(t,n),Lx.addTimezone(t,r),Lx.endTimestamp(t)}};var v$;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(v$||(v$={}));let Bx=class jx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new jx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+es),(n||new jx).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):v$.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,v$.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return jx.startUnion(t),jx.addMode(t,n),jx.addTypeIds(t,r),jx.endUnion(t)}};class xw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new xw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+es),(n||new xw).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return xw.startUtf8(t),xw.endUtf8(t)}}var Os;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Os||(Os={}));let gd=class _F{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new _F).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+es),(n||new _F).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Os.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new dg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new _F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Os.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Zp=class Xm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Xm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+es),(n||new Xm).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):MT.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new gd).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,MT.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Xm.startSchema(t),Xm.addEndianness(t,n),Xm.addFields(t,r),Xm.addCustomMetadata(t,i),Xm.addFeatures(t,s),Xm.endSchema(t)}};class hf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new hf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+es),(n||new hf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$T.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Zp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new pK).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new pK).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,$T.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class $i{constructor(t=[],n,r,i=kl.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=yK(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new $i(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new $i(n,this.metadata)}assign(...t){const n=t[0]instanceof $i?t[0]:Array.isArray(t[0])?new $i(t[0]):new $i(t),r=[...this.fields],i=$6($6(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:$6($6(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=yK(s,new Map);return new $i([...r,...s],i,new Map([...this.dictionaries,...o]))}}$i.prototype.fields=null;$i.prototype.metadata=null;$i.prototype.dictionaries=null;let Xi=class gK{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new gK(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],gK.new(n,r,i,s)}};Xi.prototype.type=null;Xi.prototype.name=null;Xi.prototype.nullable=null;Xi.prototype.metadata=null;function $6(e,t){return new Map([...e||new Map,...t||new Map])}function yK(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(vr.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&yK(s.children,t)}return t}var sOt=uFe,oOt=h$;class vK{static decode(t){t=new oOt(Vi(t));const n=hf.getRootAsFooter(t),r=$i.decode(n.schema(),new Map,n.version());return new aOt(r,n)}static encode(t){const n=new sOt,r=$i.encode(n,t.schema);hf.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Vv.encode(n,o);const i=n.endVector();hf.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Vv.encode(n,o);const s=n.endVector();return hf.startFooter(n),hf.addSchema(n,r),hf.addVersion(n,kl.V5),hf.addRecordBatches(n,i),hf.addDictionaries(n,s),hf.finishFooterBuffer(n,hf.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=kl.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class aOt extends vK{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Vv.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Vv.decode(n)}return null}}class Vv{static decode(t){return new Vv(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return pK.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=pp(r),this.bodyLength=pp(n)}}const M6=Object.freeze({done:!0,value:void 0});class cFe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class uOt extends cFe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return ug(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(M6);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Eve.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Eve.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return ug(this,void 0,void 0,function*(){return yield this.abort(t),M6})}return(t){return ug(this,void 0,void 0,function*(){return yield this.close(),M6})}read(t){return ug(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return ug(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(M6)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class TH extends uOt{write(t){if((t=Vi(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?cK(this.toUint8Array(!0)):this.toUint8Array(!1).then(cK)}toUint8Array(t=!1){return t?Y0(this._values)[0]:ug(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=dk(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Y0(o,a)[0]})}}class fFe extends n9{constructor(t){super(t),this._values=new t9(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Vi(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class lOt extends tf{constructor(t){super(t),this._values=new sFe}setValue(t,n){this._values.set(t,+n)}}class r9 extends Iy{}r9.prototype._setValue=gOe;class dFe extends r9{}dFe.prototype._setValue=dre;class hFe extends r9{}hFe.prototype._setValue=hre;class pFe extends Iy{}pFe.prototype._setValue=bOe;class cOt extends tf{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Uv(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=b$({type:this.type.indices,nullValues:n}),this.dictionary=b$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class mFe extends Iy{}mFe.prototype._setValue=mOe;class fOt extends tf{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new FT(this.type.listSize,new Xi(n,t.type,!0)),r}}class i9 extends Iy{setValue(t,n){this._values.set(t,n)}}class dOt extends i9{setValue(t,n){super.setValue(t,dOe(n))}}class hOt extends i9{}class pOt extends i9{}class s9 extends Iy{}s9.prototype._setValue=_Oe;class gFe extends s9{}gFe.prototype._setValue=_re;class yFe extends s9{}yFe.prototype._setValue=Ere;class sS extends Iy{}sS.prototype._setValue=EOe;class vFe extends sS{}vFe.prototype._setValue=Cre;class bFe extends sS{}bFe.prototype._setValue=Tre;class xFe extends sS{}xFe.prototype._setValue=Are;class wFe extends sS{}wFe.prototype._setValue=Sre;class ky extends Iy{setValue(t,n){this._values.set(t,n)}}class mOt extends ky{}class gOt extends ky{}class yOt extends ky{}class vOt extends ky{}class bOt extends ky{}class xOt extends ky{}class wOt extends ky{}class _Ot extends ky{}class EOt extends n9{constructor(t){super(t),this._offsets=new oFe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new OT(new Xi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class COt extends n9{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new iR(new Xi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class TOt extends tf{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class AOt extends tf{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Vu([...this.type.children,new Xi(n,t.type,!0)]),r}}class oS extends Iy{}oS.prototype._setValue=yOe;class _Fe extends oS{}_Fe.prototype._setValue=pre;class EFe extends oS{}EFe.prototype._setValue=mre;class CFe extends oS{}CFe.prototype._setValue=gre;class TFe extends oS{}TFe.prototype._setValue=yre;class aS extends Iy{}aS.prototype._setValue=vOe;class AFe extends aS{}AFe.prototype._setValue=vre;class SFe extends aS{}SFe.prototype._setValue=bre;class DFe extends aS{}DFe.prototype._setValue=xre;class IFe extends aS{}IFe.prototype._setValue=wre;class Ore extends tf{constructor(t){super(t),this._typeIds=new MN(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Xi(n,t.type)];return this.type=new rR(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class SOt extends Ore{}class DOt extends Ore{constructor(t){super(t),this._offsets=new MN(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class kFe extends n9{constructor(t){super(t),this._values=new t9(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Qne(n))}_flushPending(t,n){}}kFe.prototype._flushPending=fFe.prototype._flushPending;class IOt extends br{visitNull(){return TOt}visitBool(){return lOt}visitInt(){return ky}visitInt8(){return mOt}visitInt16(){return gOt}visitInt32(){return yOt}visitInt64(){return vOt}visitUint8(){return bOt}visitUint16(){return xOt}visitUint32(){return wOt}visitUint64(){return _Ot}visitFloat(){return i9}visitFloat16(){return dOt}visitFloat32(){return hOt}visitFloat64(){return pOt}visitUtf8(){return kFe}visitBinary(){return fFe}visitFixedSizeBinary(){return mFe}visitDate(){return r9}visitDateDay(){return dFe}visitDateMillisecond(){return hFe}visitTimestamp(){return oS}visitTimestampSecond(){return _Fe}visitTimestampMillisecond(){return EFe}visitTimestampMicrosecond(){return CFe}visitTimestampNanosecond(){return TFe}visitTime(){return aS}visitTimeSecond(){return AFe}visitTimeMillisecond(){return SFe}visitTimeMicrosecond(){return DFe}visitTimeNanosecond(){return IFe}visitDecimal(){return pFe}visitList(){return EOt}visitStruct(){return AOt}visitUnion(){return Ore}visitDenseUnion(){return DOt}visitSparseUnion(){return SOt}visitDictionary(){return cOt}visitInterval(){return s9}visitIntervalDayTime(){return gFe}visitIntervalYearMonth(){return yFe}visitDuration(){return sS}visitDurationSecond(){return vFe}visitDurationMillisecond(){return bFe}visitDurationMicrosecond(){return xFe}visistDurationNanosecond(){return wFe}visitFixedSizeList(){return fOt}visitMap(){return COt}}const kOt=new IOt;class Fn extends br{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Ql(e,t){return t instanceof e.constructor}function LN(e,t){return e===t||Ql(e,t)}function Ry(e,t){return e===t||Ql(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function o9(e,t){return e===t||Ql(e,t)&&e.precision===t.precision}function ROt(e,t){return e===t||Ql(e,t)&&e.byteWidth===t.byteWidth}function Fre(e,t){return e===t||Ql(e,t)&&e.unit===t.unit}function BN(e,t){return e===t||Ql(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function jN(e,t){return e===t||Ql(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function NOt(e,t){return e===t||Ql(e,t)&&e.children.length===t.children.length&&Hv.compareManyFields(e.children,t.children)}function POt(e,t){return e===t||Ql(e,t)&&e.children.length===t.children.length&&Hv.compareManyFields(e.children,t.children)}function $re(e,t){return e===t||Ql(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Hv.compareManyFields(e.children,t.children)}function OOt(e,t){return e===t||Ql(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Hv.visit(e.indices,t.indices)&&Hv.visit(e.dictionary,t.dictionary)}function Mre(e,t){return e===t||Ql(e,t)&&e.unit===t.unit}function UN(e,t){return e===t||Ql(e,t)&&e.unit===t.unit}function FOt(e,t){return e===t||Ql(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Hv.compareManyFields(e.children,t.children)}function $Ot(e,t){return e===t||Ql(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Hv.compareManyFields(e.children,t.children)}Fn.prototype.visitNull=LN;Fn.prototype.visitBool=LN;Fn.prototype.visitInt=Ry;Fn.prototype.visitInt8=Ry;Fn.prototype.visitInt16=Ry;Fn.prototype.visitInt32=Ry;Fn.prototype.visitInt64=Ry;Fn.prototype.visitUint8=Ry;Fn.prototype.visitUint16=Ry;Fn.prototype.visitUint32=Ry;Fn.prototype.visitUint64=Ry;Fn.prototype.visitFloat=o9;Fn.prototype.visitFloat16=o9;Fn.prototype.visitFloat32=o9;Fn.prototype.visitFloat64=o9;Fn.prototype.visitUtf8=LN;Fn.prototype.visitBinary=LN;Fn.prototype.visitFixedSizeBinary=ROt;Fn.prototype.visitDate=Fre;Fn.prototype.visitDateDay=Fre;Fn.prototype.visitDateMillisecond=Fre;Fn.prototype.visitTimestamp=BN;Fn.prototype.visitTimestampSecond=BN;Fn.prototype.visitTimestampMillisecond=BN;Fn.prototype.visitTimestampMicrosecond=BN;Fn.prototype.visitTimestampNanosecond=BN;Fn.prototype.visitTime=jN;Fn.prototype.visitTimeSecond=jN;Fn.prototype.visitTimeMillisecond=jN;Fn.prototype.visitTimeMicrosecond=jN;Fn.prototype.visitTimeNanosecond=jN;Fn.prototype.visitDecimal=LN;Fn.prototype.visitList=NOt;Fn.prototype.visitStruct=POt;Fn.prototype.visitUnion=$re;Fn.prototype.visitDenseUnion=$re;Fn.prototype.visitSparseUnion=$re;Fn.prototype.visitDictionary=OOt;Fn.prototype.visitInterval=Mre;Fn.prototype.visitIntervalDayTime=Mre;Fn.prototype.visitIntervalYearMonth=Mre;Fn.prototype.visitDuration=UN;Fn.prototype.visitDurationSecond=UN;Fn.prototype.visitDurationMillisecond=UN;Fn.prototype.visitDurationMicrosecond=UN;Fn.prototype.visitDurationNanosecond=UN;Fn.prototype.visitFixedSizeList=FOt;Fn.prototype.visitMap=$Ot;const Hv=new Fn;function bK(e,t){return Hv.compareSchemas(e,t)}function b$(e){const t=e.type,n=new(kOt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(b$(Object.assign(Object.assign({},l),{type:u})))}}return n}function AH(e,t){return MOt(e,t.map(n=>n.data.concat()))}function MOt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=LOt(n,o,c,t,i),o>0&&(r[s++]=Bu({type:new Vu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new bf(e,f))]}function LOt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Bu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var RFe;class bc{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new $i([]),this._offsets=[0],this;let i,s;t[0]instanceof $i&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof bf)return[u];if(u instanceof bc)return u.batches;if(u instanceof zi){if(u.type instanceof Vu)return[new bf(new $i(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new gi([u[h]])),f=new $i(l.map((h,p)=>new Xi(String(h),c[p].type))),[,d]=AH(f,c);return d.length===0?[new bf(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new $i([]),!(i instanceof $i))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof bf))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!bK(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??KOe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=YOe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Pre.visit(new gi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new bc(n,r.map(i=>new bf(n,i)))}slice(t,n){const r=this.schema;[t,n]=qOe({length:this.numRows},t,n);const i=XOe(this.data,this._offsets,t,n);return new bc(r,i.map(s=>new bf(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Bu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new gi(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new gi([Bu({type:new ay,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=AH(r,a)}return new bc(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new bc(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new bc(...AH(s,o))}}RFe=Symbol.toStringTag;bc[RFe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=NC(Nre),e.get=NC(qc.getVisitFn(ge.Struct)),e.set=QOe(Ud.getVisitFn(ge.Struct)),e.indexOf=JOe(f$.getVisitFn(ge.Struct)),e.getByteLength=NC(Q0.getVisitFn(ge.Struct)),"Table"))(bc.prototype);var NFe;let bf=class OI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof $i))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Bu({nullCount:0,type:new Vu(this.schema.fields),children:this.schema.fields.map(n=>Bu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof zi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Rve(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Xi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new $i(r),a=Bu({type:new Vu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Rve(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=PFe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return qc.visit(this.data,t)}set(t,n){return Ud.visit(this.data,t,n)}indexOf(t,n){return f$.visit(this.data,t,n)}getByteLength(t){return Q0.visit(this.data,t)}[Symbol.iterator](){return Pre.visit(new gi([this.data]))}toArray(){return[...this]}concat(...t){return new bc(this.schema,[this,...t])}slice(t,n){const[r]=new gi([this.data]).slice(t,n).data;return new OI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new gi([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new gi([Bu({type:new ay,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new $i(s,new Map(this.schema.metadata)),i=Bu({type:new Vu(s),children:o})}return new OI(r,i)}select(t){const n=this.schema.select(t),r=new Vu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new OI(n,Bu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Bu({type:new Vu(n.fields),length:this.numRows,children:r});return new OI(n,i)}};NFe=Symbol.toStringTag;bf[NFe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(bf.prototype);function Rve(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Bu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Bu({type:new Vu(i),length:n,children:s})]}function PFe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])PFe(a.children,l==null?void 0:l.children,n);if(vr.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class BOt extends bf{constructor(t){const n=t.fields.map(i=>Bu({type:i.type})),r=Bu({type:new Vu(t.fields),nullCount:0,children:n});super(t,r)}}var x$;(function(e){e[e.BUFFER=0]="BUFFER"})(x$||(x$={}));var w$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(w$||(w$={}));class x1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new x1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+es),(n||new x1).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):w$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):x$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,w$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,x$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return x1.startBodyCompression(t),x1.addCodec(t,n),x1.addMethod(t,r),x1.endBodyCompression(t)}}let OFe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},FFe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Zm=class xK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new xK).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+es),(n||new xK).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new FFe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new OFe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new x1).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},I2=class wK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new wK).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+es),(n||new wK).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Zm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var _$;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(_$||(_$={}));let n1=class Wp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Wp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+es),(n||new Wp).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$T.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):_$.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,$T.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,_$.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Wp.startMessage(t),Wp.addVersion(t,n),Wp.addHeaderType(t,r),Wp.addHeader(t,i),Wp.addBodyLength(t,s),Wp.addCustomMetadata(t,o),Wp.endMessage(t)}};class jOt extends br{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return vw.startNull(n),vw.endNull(n)}visitInt(t,n){return vf.startInt(n),vf.addBitWidth(n,t.bitWidth),vf.addIsSigned(n,t.isSigned),vf.endInt(n)}visitFloat(t,n){return m0.startFloatingPoint(n),m0.addPrecision(n,t.precision),m0.endFloatingPoint(n)}visitBinary(t,n){return mw.startBinary(n),mw.endBinary(n)}visitBool(t,n){return gw.startBool(n),gw.endBool(n)}visitUtf8(t,n){return xw.startUtf8(n),xw.endUtf8(n)}visitDecimal(t,n){return S2.startDecimal(n),S2.addScale(n,t.scale),S2.addPrecision(n,t.precision),S2.addBitWidth(n,t.bitWidth),S2.endDecimal(n)}visitDate(t,n){return xF.startDate(n),xF.addUnit(n,t.unit),xF.endDate(n)}visitTime(t,n){return NI.startTime(n),NI.addUnit(n,t.unit),NI.addBitWidth(n,t.bitWidth),NI.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return PI.startTimestamp(n),PI.addUnit(n,t.unit),r!==void 0&&PI.addTimezone(n,r),PI.endTimestamp(n)}visitInterval(t,n){return g0.startInterval(n),g0.addUnit(n,t.unit),g0.endInterval(n)}visitDuration(t,n){return d0.startDuration(n),d0.addUnit(n,t.unit),d0.endDuration(n)}visitList(t,n){return yw.startList(n),yw.endList(n)}visitStruct(t,n){return bw.startStruct_(n),bw.endStruct_(n)}visitUnion(t,n){Bx.startTypeIdsVector(n,t.typeIds.length);const r=Bx.createTypeIdsVector(n,t.typeIds);return Bx.startUnion(n),Bx.addMode(n,t.mode),Bx.addTypeIds(n,r),Bx.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return dg.startDictionaryEncoding(n),dg.addId(n,BigInt(t.id)),dg.addIsOrdered(n,t.isOrdered),r!==void 0&&dg.addIndexType(n,r),dg.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return h0.startFixedSizeBinary(n),h0.addByteWidth(n,t.byteWidth),h0.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return p0.startFixedSizeList(n),p0.addListSize(n,t.listSize),p0.endFixedSizeList(n)}visitMap(t,n){return wF.startMap(n),wF.addKeysSorted(n,t.keysSorted),wF.endMap(n)}}const SH=new jOt;function UOt(e,t=new Map){return new $i(VOt(e,t),EF(e.metadata),t)}function $Fe(e){return new Hf(e.count,MFe(e.columns),LFe(e.columns))}function zOt(e){return new J0($Fe(e.data),e.id,e.isDelta)}function VOt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Xi.fromJSON(n,t))}function Nve(e,t){return(e.children||[]).filter(Boolean).map(n=>Xi.fromJSON(n,t))}function MFe(e){return(e||[]).reduce((t,n)=>[...t,new qv(n.count,HOt(n.VALIDITY)),...MFe(n.children)],[])}function LFe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new w0(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new w0(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new w0(t.length,i.OFFSET.length)),i.DATA&&t.push(new w0(t.length,i.DATA.length)),t=LFe(i.children,t)}return t}function HOt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function qOt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Ove(e,Nve(e,t)),i=new Xi(e.name,o,e.nullable,EF(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Pve(r):new Bv,a=new Uv(t.get(n),r,n,s.isOrdered),i=new Xi(e.name,a,e.nullable,EF(e.metadata))):(r=(r=s.indexType)?Pve(r):new Bv,t.set(n,o=Ove(e,Nve(e,t))),a=new Uv(o,r,n,s.isOrdered),i=new Xi(e.name,a,e.nullable,EF(e.metadata))),i||null}function EF(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Pve(e){return new Wl(e.isSigned,e.bitWidth)}function Ove(e,t){const n=e.type.name;switch(n){case"NONE":return new ay;case"null":return new ay;case"binary":return new tR;case"utf8":return new RT;case"bool":return new nR;case"list":return new OT((t||[])[0]);case"struct":return new Vu(t||[]);case"struct_":return new Vu(t||[])}switch(n){case"int":{const r=e.type;return new Wl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new jv(cu[r.precision])}case"decimal":{const r=e.type;return new o$(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new NT(K0[r.unit])}case"time":{const r=e.type;return new uy(Rn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new a$(Rn[r.unit],r.timezone)}case"interval":{const r=e.type;return new PT(X0[r.unit])}case"duration":{const r=e.type;return new u$(Rn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new rR(Hc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new l$(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new FT(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new iR((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var WOt=uFe,GOt=h$;class y0{static fromJSON(t,n){const r=new y0(0,kl.V5,n);return r._createHeader=YOt(t,n),r}static decode(t){t=new GOt(Vi(t));const n=n1.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new y0(r,i,s);return o._createHeader=KOt(n,s),o}static encode(t){const n=new WOt;let r=-1;return t.isSchema()?r=$i.encode(n,t.header()):t.isRecordBatch()?r=Hf.encode(n,t.header()):t.isDictionaryBatch()&&(r=J0.encode(n,t.header())),n1.startMessage(n),n1.addVersion(n,kl.V5),n1.addHeader(n,r),n1.addHeaderType(n,t.headerType),n1.addBodyLength(n,BigInt(t.bodyLength)),n1.finishMessageBuffer(n,n1.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof $i)return new y0(0,kl.V5,Ia.Schema,t);if(t instanceof Hf)return new y0(n,kl.V5,Ia.RecordBatch,t);if(t instanceof J0)return new y0(n,kl.V5,Ia.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ia.Schema}isRecordBatch(){return this.headerType===Ia.RecordBatch}isDictionaryBatch(){return this.headerType===Ia.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=pp(t)}}class Hf{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=pp(t)}}class J0{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=pp(n)}}class w0{constructor(t,n){this.offset=pp(t),this.length=pp(n)}}class qv{constructor(t,n){this.length=pp(t),this.nullCount=pp(n)}}function YOt(e,t){return()=>{switch(t){case Ia.Schema:return $i.fromJSON(e);case Ia.RecordBatch:return Hf.fromJSON(e);case Ia.DictionaryBatch:return J0.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ia[t]}, type: ${t} }`)}}function KOt(e,t){return()=>{switch(t){case Ia.Schema:return $i.decode(e.header(new Zp),new Map,e.version());case Ia.RecordBatch:return Hf.decode(e.header(new Zm),e.version());case Ia.DictionaryBatch:return J0.decode(e.header(new I2),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ia[t]}, type: ${t} }`)}}Xi.encode=oFt;Xi.decode=iFt;Xi.fromJSON=qOt;$i.encode=sFt;$i.decode=XOt;$i.fromJSON=UOt;Hf.encode=aFt;Hf.decode=QOt;Hf.fromJSON=$Fe;J0.encode=uFt;J0.decode=JOt;J0.fromJSON=zOt;qv.encode=lFt;qv.decode=eFt;w0.encode=cFt;w0.decode=ZOt;function XOt(e,t=new Map,n=kl.V5){const r=rFt(e,t);return new $i(r,CF(e),t,n)}function QOt(e,t=kl.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Hf(e.length(),tFt(e),nFt(e,t))}function JOt(e,t=kl.V5){return new J0(Hf.decode(e.data(),t),e.id(),e.isDelta())}function ZOt(e){return new w0(e.offset(),e.length())}function eFt(e){return new qv(e.length(),e.nullCount())}function tFt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=qv.decode(n));return t}function nFt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<kl.V4&&(r.bb_pos+=8*(i+1)),n[++s]=w0.decode(r));return n}function rFt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Xi.decode(r,t));return n}function Fve(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Xi.decode(r,t));return n}function iFt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Mve(e,Fve(e,t)),r=new Xi(e.name(),i,e.nullable(),CF(e))):t.has(n=pp(a.id()))?(s=(s=a.indexType())?$ve(s):new Bv,o=new Uv(t.get(n),s,n,a.isOrdered()),r=new Xi(e.name(),o,e.nullable(),CF(e))):(s=(s=a.indexType())?$ve(s):new Bv,t.set(n,i=Mve(e,Fve(e,t))),o=new Uv(i,s,n,a.isOrdered()),r=new Xi(e.name(),o,e.nullable(),CF(e))),r||null}function CF(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function $ve(e){return new Wl(e.isSigned(),e.bitWidth())}function Mve(e,t){const n=e.typeType();switch(n){case Os.NONE:return new ay;case Os.Null:return new ay;case Os.Binary:return new tR;case Os.Utf8:return new RT;case Os.Bool:return new nR;case Os.List:return new OT((t||[])[0]);case Os.Struct_:return new Vu(t||[])}switch(n){case Os.Int:{const r=e.type(new vf);return new Wl(r.isSigned(),r.bitWidth())}case Os.FloatingPoint:{const r=e.type(new m0);return new jv(r.precision())}case Os.Decimal:{const r=e.type(new S2);return new o$(r.scale(),r.precision(),r.bitWidth())}case Os.Date:{const r=e.type(new xF);return new NT(r.unit())}case Os.Time:{const r=e.type(new NI);return new uy(r.unit(),r.bitWidth())}case Os.Timestamp:{const r=e.type(new PI);return new a$(r.unit(),r.timezone())}case Os.Interval:{const r=e.type(new g0);return new PT(r.unit())}case Os.Duration:{const r=e.type(new d0);return new u$(r.unit())}case Os.Union:{const r=e.type(new Bx);return new rR(r.mode(),r.typeIdsArray()||[],t||[])}case Os.FixedSizeBinary:{const r=e.type(new h0);return new l$(r.byteWidth())}case Os.FixedSizeList:{const r=e.type(new p0);return new FT(r.listSize(),(t||[])[0])}case Os.Map:{const r=e.type(new wF);return new iR((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Os[n]}" (${n})`)}function sFt(e,t){const n=t.fields.map(s=>Xi.encode(e,s));Zp.startFieldsVector(e,n.length);const r=Zp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Zp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return sa.startKeyValue(e),sa.addKey(e,a),sa.addValue(e,u),sa.endKeyValue(e)})):-1;return Zp.startSchema(e),Zp.addFields(e,r),Zp.addEndianness(e,fFt?MT.Little:MT.Big),i!==-1&&Zp.addCustomMetadata(e,i),Zp.endSchema(e)}function oFt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;vr.isDictionary(s)?(o=s.dictionary.typeId,i=SH.visit(s,e),r=SH.visit(s.dictionary,e)):r=SH.visit(s,e);const a=(s.children||[]).map(c=>Xi.encode(e,c)),u=gd.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?gd.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return sa.startKeyValue(e),sa.addKey(e,d),sa.addValue(e,h),sa.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),gd.startField(e),gd.addType(e,r),gd.addTypeType(e,o),gd.addChildren(e,u),gd.addNullable(e,!!t.nullable),n!==-1&&gd.addName(e,n),i!==-1&&gd.addDictionary(e,i),l!==-1&&gd.addCustomMetadata(e,l),gd.endField(e)}function aFt(e,t){const n=t.nodes||[],r=t.buffers||[];Zm.startNodesVector(e,n.length);for(const o of n.slice().reverse())qv.encode(e,o);const i=e.endVector();Zm.startBuffersVector(e,r.length);for(const o of r.slice().reverse())w0.encode(e,o);const s=e.endVector();return Zm.startRecordBatch(e),Zm.addLength(e,BigInt(t.length)),Zm.addNodes(e,i),Zm.addBuffers(e,s),Zm.endRecordBatch(e)}function uFt(e,t){const n=Hf.encode(e,t.data);return I2.startDictionaryBatch(e),I2.addId(e,BigInt(t.id)),I2.addIsDelta(e,t.isDelta),I2.addData(e,n),I2.endDictionaryBatch(e)}function lFt(e,t){return FFe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function cFt(e,t){return OFe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const fFt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),_K="ARROW1",Lre=new Uint8Array(_K.length);for(let e=0;e<_K.length;e+=1)Lre[e]=_K.codePointAt(e);Lre.length;class Io extends br{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof bf?s.data.children:s.data),r=new Io;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof gi)return this.visitMany(t.data),this;const{type:n}=t;if(!vr.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(vr.isUnion(n))this.nodes.push(new qv(r,0));else{const{nullCount:i}=t;vr.isNull(n)||rp.call(this,i<=0?new Uint8Array(0):c$(t.offset,r,t.nullBitmap)),this.nodes.push(new qv(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function rp(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new w0(this._byteLength,t)),this._byteLength+=t,this}function dFt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(rp.call(this,i),n.mode===Hc.Sparse)return EK.call(this,e);if(n.mode===Hc.Dense){if(e.offset<=0)return rp.call(this,s),EK.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);rp.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function hFt(e){let t;return e.nullCount>=e.length?rp.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?rp.call(this,c$(e.offset,e.length,t)):rp.call(this,GOe(e.values))}function Ny(e){return rp.call(this,e.values.subarray(0,e.length*e.stride))}function BFe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return rp.call(this,U6e(-i,t+1,r)),rp.call(this,n.subarray(i,i+o)),this}function Bre(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return rp.call(this,U6e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function EK(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Io.prototype.visitBool=hFt;Io.prototype.visitInt=Ny;Io.prototype.visitFloat=Ny;Io.prototype.visitUtf8=BFe;Io.prototype.visitBinary=BFe;Io.prototype.visitFixedSizeBinary=Ny;Io.prototype.visitDate=Ny;Io.prototype.visitTimestamp=Ny;Io.prototype.visitTime=Ny;Io.prototype.visitDecimal=Ny;Io.prototype.visitList=Bre;Io.prototype.visitStruct=EK;Io.prototype.visitUnion=dFt;Io.prototype.visitInterval=Ny;Io.prototype.visitDuration=Ny;Io.prototype.visitFixedSizeList=Bre;Io.prototype.visitMap=Bre;class jFe extends cFe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new TH,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ob(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return QB(t)?t.then(n=>this.writeAll(n)):JB(t)?Vre(this,t):zre(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof TH?this._sink=t:(this._sink=new TH,t&&b4t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&x4t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!bK(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof bc&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof bf&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!bK(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof bf?t instanceof BOt||this._writeRecordBatch(t):t instanceof bc?this.writeAll(t.batches):Jne(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=y0.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ia.RecordBatch?this._recordBatchBlocks.push(new Vv(a,t.bodyLength,this._position)):t.headerType===Ia.DictionaryBatch&&this._dictionaryBlocks.push(new Vv(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Vi(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(y0.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Lre)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Io.assemble(t),o=new Hf(t.numRows,r,i),a=y0.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Io.assemble(new gi([t])),u=new Hf(t.length,s,o),l=new J0(u,n,r),c=y0.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class jre extends jFe{static writeAll(t,n){const r=new jre(n);return QB(t)?t.then(i=>r.writeAll(i)):JB(t)?Vre(r,t):zre(r,t)}}class Ure extends jFe{static writeAll(t){const n=new Ure;return QB(t)?t.then(r=>n.writeAll(r)):JB(t)?Vre(n,t):zre(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=vK.encode(new vK(t,kl.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function zre(e,t){let n=t;t instanceof bc&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Vre(e,t){var n,r,i,s,o,a,u;return ug(this,void 0,void 0,function*(){try{for(n=!0,r=dk(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function pFt(e,t="stream"){return(t==="stream"?jre:Ure).writeAll(e).toUint8Array(!0)}function Hre(e,t=1){return(e*t+63&-64||64)/t}function Wv(e,t,n=e.BYTES_PER_ELEMENT){return new e(Hre(t,n))}function qre(e){return e instanceof zi?e:new zi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function mFt(e){return new gi([qre(e)])}const Wre=new TextEncoder;function gFt(e,t,n){const r=Wre.encode(n);return e.set(r,t),r.length}function yFt(e,t,n){return Wre.encodeInto(n,e.subarray(t)).written}const vFt=Wre.encodeInto?yFt:gFt;function Lve(e,t){const n=Wv(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function bFt(e,t){const n=Wv(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function xFt(e,t){const n=Wv(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function wFt(e,t){const n=Wv(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function _Ft(e){const t=b$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function EFt(e,t,n){const r=Wv(Int32Array,t+1),i=Wv(Uint8Array,3*n);let s=0;return{set(o,a){s+=vFt(i,s,o),r[a+1]=s},data:()=>{const o=Hre(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function CFt(e,t){const n=[],r=Wv(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:TFt(e.dictionary,n,o)})}}function TFt(e,t,n){const r=EFt(e,t.length,n);return t.forEach(r.set),mFt(r.data())}function AFt(e,t){const n=Wv(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function SFt(e,t,n=!0){let r;switch(e.typeId){case ge.Int:r=e.bitWidth<64?Lve:null;break;case ge.Float:r=e.precision>0?Lve:null;break;case ge.Dictionary:r=e.dictionary.typeId===ge.Utf8&&e.indices.typeId===ge.Int&&e.indices.bitWidth<64?CFt:null;break;case ge.Bool:r=bFt;break;case ge.Date:r=e.unit?wFt:xFt;break}return r==null?_Ft(e):n?AFt(r(e,t),t):r(e,t)}function DFt(e,t){const n=e.length,r=Hre(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),qre({type:t,length:n,buffers:[null,i]})}function UFe(e,t,n,r,i=!0){const s=SFt(r,e,i);return t(n,s.set),qre(s.data())}function Gre(e){if(e instanceof vr||e==null)return e;switch(e){case ge.Binary:return new tR;case ge.Bool:return new nR;case ge.DateDay:return new F4t;case ge.DateMillisecond:case ge.Date:return new $4t;case ge.Dictionary:return new Uv(new RT,new Bv);case ge.Float16:return new lOe;case ge.Float32:return new ure;case ge.Float64:case ge.Float:return new lre;case ge.Int8:return new tre;case ge.Int16:return new nre;case ge.Int32:case ge.Int:return new Bv;case ge.Int64:return new rre;case ge.IntervalDayTime:return new U4t;case ge.Interval:case ge.IntervalYearMonth:return new z4t;case ge.Null:return new ay;case ge.TimeMicrosecond:return new B4t;case ge.TimeMillisecond:case ge.Time:return new L4t;case ge.TimeNanosecond:return new j4t;case ge.TimeSecond:return new M4t;case ge.Uint8:return new ire;case ge.Uint16:return new sre;case ge.Uint32:return new ore;case ge.Uint64:return new are;case ge.Utf8:return new RT;default:pr(`Unsupported type code: ${G0(e)}. Use a data type constructor instead?`)}}function IFt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function zFe(e,t){const n=CK();return e(t,n.add),n}function CK(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(oy(t))++e.dates,IFt(t)&&++e.utcdays;else if(pw(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=CK());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=CK())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Gre(kFt(e))}};return e}function kFt(e){const t=e.count-e.nulls;if(t===0)return ge.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?ge.Float64:n<128?ge.Int8:n<32768?ge.Int16:ge.Int32:n>=2**32?ge.Float64:n<256?ge.Uint8:n<65536?ge.Uint16:ge.Uint32}else{if(e.nums===t)return ge.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?ge.Int64:pr(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?ge.Uint64:pr(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return ge.Bool;if(e.utcdays===t)return ge.DateDay;if(e.dates===t)return ge.DateMillisecond;if(e.arrays===t){const n=Xi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new FT(e.minlen,n):new OT(n)}else if(e.structs===t){const n=e.struct_prof;return new Vu(Object.keys(n).map(r=>Xi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return ge.Dictionary;pr("Type inference failure")}}}}function RFt(e,t,n,r,i,s=!0){if(i=Gre(i),!i){const o=zFe(r,t);s=o.nulls>0,i=o.type()}return UFe(n,r,t,i,s)}function NFt(e,t,n,r,i,s=!0){i=Gre(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=PFt(o);if(u&&a&&Bve(u.type,i))return u;const l=o.data;if(FN(l)){const c=OFt(l);if(a&&c&&Bve(c,i))return DFt(l,c);i=i||c,s=!1}if(!i){const c=zFe(r,o);s=c.nulls>0,i=c.type()}return UFe(n,r,o,i,s)}function PFt(e){return e instanceof gi?e:e.vector instanceof gi?e.vector:null}function OFt(e){const n={Float32Array:ure,Float64Array:lre,Int8Array:tre,Int16Array:nre,Int32Array:Bv,Uint8Array:ire,Uint16Array:sre,Uint32Array:ore,BigInt64Array:rre,BigUint64Array:are}[e.constructor.name];return n?new n:null}function Bve(e,t){return!e||!t?!0:e.compareTo(t)}function FFt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function $Ft(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&pw(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const MFt=()=>pr("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function LFt(){try{return bc}catch{MFt()}}function VFe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=BFt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&pr("Column length mismatch"),a[l]=c});const u=LFt();return new u(a)}function BFt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Ss(n)?n(e):mi(n)?n:null;if(mi(e))return{dataFrom:RFt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:FFt(e,r,i)};if(jFt(e))return{dataFrom:NFt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:$Ft(e,r,i)};pr("Unsupported input data type")}function jFt(e){return e&&Ss(e.reify)}function UFt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return pFt(VFe(e,r),n)}function zFt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function VFt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&oy(u))++i,zFt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function a9(e,t){return Ss(t)?t(e):t||e.columnNames()}function HFe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=VFt(HFt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function HFt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function Yre(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function qFt(e,t={}){const n=a9(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":oy(l)?KB(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return Yre(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function qFe(e,t={}){if(Ss(t))return t(e)+"";const n=typeof e;if(n==="object"){if(oy(e))return t.utc?KB(e):h6e(e);{const r=JSON.stringify(e,(s,o)=>FN(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function u9(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function WFt(e,t={}){const n=a9(e,t.columns),{align:r,format:i}=HFe(e,n,t),s=GFt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(qFe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",x=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${x?` style="${x}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Yre(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function GFt(e){return u9(e.style,t=>Ss(t)?t:()=>t)}function YFt(e,t=!0,n=!1){return e===void 0||e?t:n}const KFt=e=>oy(e)?KB(e,!0):e;function XFt(e,t={}){const n=YFt(t.schema),r=t.format||{},i=a9(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||KFt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function QFt(e,t={}){const n=a9(e,t.columns),{align:r,format:i}=HFe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return Yre(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(qFe(u,i[l]))+"|"}}),a+`
`}function WFe(e,t){for(const[n,r]of XB(t))e.set(n,r);return e}function JFt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function ly(e,t,n=new Map){return t=ql(t)?e.columnName(t):t,vu(t)?n.set(t,t):mi(t)?t.forEach(r=>ly(e,r,n)):Ss(t)?ly(e,t(e),n):nl(t)?WFe(n,t):pr(`Invalid column selection: ${G0(t)}`),n}function l9(e,t){return e.toObject=t,e}function GFe(e){return mi(e)?e.map(GFe):e&&e.toObject?e.toObject():e}function LT(){return l9(e=>e.columnNames(),()=>({all:[]}))}function YFe(...e){return e=e.flat(),l9(t=>{const n=ly(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:GFe(e)}))}function ZFt(e,t){return l9(n=>{let r=ql(e)?e:n.columnIndex(e),i=ql(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function e5t(e){return vu(e)&&(e=RegExp(JFt(e))),l9(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function t5t(e){return FN(e.data)?e.data.constructor:Array}class hg extends vPt{static from(t,n){return new hg(wPt(t,n),n)}static new(t,n){if(t instanceof hg)return t;const r={},i=[];for(const[s,o]of XB(t))r[s]=o,i.push(s);return new hg(r,n||i)}constructor(t,n,r,i,s,o){u9(t,xPt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new hg(t||this._data,n||(t?null:this._names),o,i!==void 0?i:XPt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Jf(r).groupby(r.groups());return t.forEach(s=>{s=hg.new(s),s.numRows()!==n&&pr("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):pr(`Unrecognized column: ${t}`)}object(t=0){return jve(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=ly(this,t.columns||LT()),o=L6e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),JPt(this,u,a,n)}return a}*[Symbol.iterator](){const t=jve(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(t5t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=QPt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return VFe(this,t)}toArrowBuffer(t){return UFt(this,t)}toCSV(t){return qFt(this,t)}toHTML(t){return WFt(this,t)}toJSON(t){return XFt(this,t)}toMarkdown(t){return QFt(this,t)}}function jve(e){let t=e._builder;if(!t){const n=L6e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class n5t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function ei(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=r5t[e.type];s&&s(e,t,n)}const L6=(e,t,n)=>{ei(e.argument,t,n,e)},DH=(e,t,n)=>{ei(e.left,t,n,e),ei(e.right,t,n,e)},Uve=(e,t,n)=>{ei(e.test,t,n,e),ei(e.consequent,t,n,e),e.alternate&&ei(e.alternate,t,n,e)},IH=(e,t,n)=>{e0(e.params,t,n,e),ei(e.body,t,n,e)},zve=(e,t,n)=>{ei(e.callee,t,n,e),e0(e.arguments,t,n,e)},e0=(e,t,n,r)=>{e.forEach(i=>ei(i,t,n,r))},r5t={TemplateLiteral:(e,t,n)=>{e0(e.expressions,t,n,e),e0(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{ei(e.object,t,n,e),ei(e.property,t,n,e)},CallExpression:zve,NewExpression:zve,ArrayExpression:(e,t,n)=>{e0(e.elements,t,n,e)},AssignmentExpression:DH,AwaitExpression:L6,BinaryExpression:DH,LogicalExpression:DH,UnaryExpression:L6,UpdateExpression:L6,ConditionalExpression:Uve,ObjectExpression:(e,t,n)=>{e0(e.properties,t,n,e)},Property:(e,t,n)=>{ei(e.key,t,n,e),ei(e.value,t,n,e)},ArrowFunctionExpression:IH,FunctionExpression:IH,FunctionDeclaration:IH,VariableDeclaration:(e,t,n)=>{e0(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{ei(e.id,t,n,e),ei(e.init,t,n,e)},SpreadElement:(e,t,n)=>{ei(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{e0(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{ei(e.expression,t,n,e)},IfStatement:Uve,ForStatement:(e,t,n)=>{ei(e.init,t,n,e),ei(e.test,t,n,e),ei(e.update,t,n,e),ei(e.body,t,n,e)},WhileStatement:(e,t,n)=>{ei(e.test,t,n,e),ei(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{ei(e.body,t,n,e),ei(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{ei(e.discriminant,t,n,e),e0(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&ei(e.test,t,n,e),e0(e.consequent,t,n,e)},ReturnStatement:L6,Program:(e,t,n)=>{ei(e.body[0],t,n,e)}};function KFe(e){delete e.start,delete e.end,delete e.optional}function Vve(e){KFe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function i5t(e){return ei(e,null,{Column:Vve,Constant:Vve,Default:KFe}),e}function aa(e,t){return t&&t.type===e}function s5t(e){return aa(t4t,e)||aa(e4t,e)}function o5t(e){return Ss(e)?e:()=>e}const a5t="Escaped functions are not valid as rollup or pivot values.";function u5t(e,t,n){e.aggronly&&pr(a5t);const r="(row,data)=>fn("+M6e(e.table.columnNames())+",$)";return{escape:Xne.escape(r,o5t(t.expr),n)}}var l5t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],XFe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],c5t="-----------------------------------------------------------------------------------------------------------------------------------------------------",QFe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",kH={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},RH="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",f5t={5:RH,"5module":RH+" export import",6:RH+" const class extends export import super"},d5t=/^in(stanceof)?$/,h5t=new RegExp("["+QFe+"]"),p5t=new RegExp("["+QFe+c5t+"]");function TK(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function cy(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&h5t.test(String.fromCharCode(e)):t===!1?!1:TK(e,XFe)}function BT(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&p5t.test(String.fromCharCode(e)):t===!1?!1:TK(e,XFe)||TK(e,l5t)}var ui=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ld(e,t){return new ui(e,{beforeExpr:!0,binop:t})}var cd={beforeExpr:!0},ac={startsExpr:!0},Kre={};function Hr(e,t){return t===void 0&&(t={}),t.keyword=e,Kre[e]=new ui(e,t)}var ne={num:new ui("num",ac),regexp:new ui("regexp",ac),string:new ui("string",ac),name:new ui("name",ac),privateId:new ui("privateId",ac),eof:new ui("eof"),bracketL:new ui("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ui("]"),braceL:new ui("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ui("}"),parenL:new ui("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ui(")"),comma:new ui(",",cd),semi:new ui(";",cd),colon:new ui(":",cd),dot:new ui("."),question:new ui("?",cd),questionDot:new ui("?."),arrow:new ui("=>",cd),template:new ui("template"),invalidTemplate:new ui("invalidTemplate"),ellipsis:new ui("...",cd),backQuote:new ui("`",ac),dollarBraceL:new ui("${",{beforeExpr:!0,startsExpr:!0}),eq:new ui("=",{beforeExpr:!0,isAssign:!0}),assign:new ui("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ui("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ui("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ld("||",1),logicalAND:ld("&&",2),bitwiseOR:ld("|",3),bitwiseXOR:ld("^",4),bitwiseAND:ld("&",5),equality:ld("==/!=/===/!==",6),relational:ld("</>/<=/>=",7),bitShift:ld("<</>>/>>>",8),plusMin:new ui("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ld("%",10),star:ld("*",10),slash:ld("/",10),starstar:new ui("**",{beforeExpr:!0}),coalesce:ld("??",1),_break:Hr("break"),_case:Hr("case",cd),_catch:Hr("catch"),_continue:Hr("continue"),_debugger:Hr("debugger"),_default:Hr("default",cd),_do:Hr("do",{isLoop:!0,beforeExpr:!0}),_else:Hr("else",cd),_finally:Hr("finally"),_for:Hr("for",{isLoop:!0}),_function:Hr("function",ac),_if:Hr("if"),_return:Hr("return",cd),_switch:Hr("switch"),_throw:Hr("throw",cd),_try:Hr("try"),_var:Hr("var"),_const:Hr("const"),_while:Hr("while",{isLoop:!0}),_with:Hr("with"),_new:Hr("new",{beforeExpr:!0,startsExpr:!0}),_this:Hr("this",ac),_super:Hr("super",ac),_class:Hr("class",ac),_extends:Hr("extends",cd),_export:Hr("export"),_import:Hr("import",ac),_null:Hr("null",ac),_true:Hr("true",ac),_false:Hr("false",ac),_in:Hr("in",{beforeExpr:!0,binop:7}),_instanceof:Hr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Hr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Hr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Hr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},th=/\r\n?|\n|\u2028|\u2029/,m5t=new RegExp(th.source,"g");function uS(e){return e===10||e===13||e===8232||e===8233}function JFe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(uS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var ZFe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Td=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,e5e=Object.prototype,g5t=e5e.hasOwnProperty,y5t=e5e.toString,zN=Object.hasOwn||function(e,t){return g5t.call(e,t)},Hve=Array.isArray||function(e){return y5t.call(e)==="[object Array]"},qve=Object.create(null);function U1(e){return qve[e]||(qve[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Gv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var v5t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,sR=function(t,n){this.line=t,this.column=n};sR.prototype.offset=function(t){return new sR(this.line,this.column+t)};var c9=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function t5e(e,t){for(var n=1,r=0;;){var i=JFe(e,r,t);if(i<0)return new sR(n,t-r);++n,r=i}}var AK={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Wve=!1;function b5t(e){var t={};for(var n in AK)t[n]=e&&zN(e,n)?e[n]:AK[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Wve&&typeof console=="object"&&console.warn&&(Wve=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Hve(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Hve(t.onComment)&&(t.onComment=x5t(t,t.onComment)),t}function x5t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new c9(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var oR=1,lS=2,Xre=4,n5e=8,r5e=16,i5e=32,Qre=64,s5e=128,VN=256,Jre=oR|lS|VN;function Zre(e,t){return lS|(e?Xre:0)|(t?n5e:0)}var E$=0,eie=1,Py=2,o5e=3,a5e=4,u5e=5,ya=function(t,n,r){this.options=t=b5t(t),this.sourceFile=t.sourceFile,this.keywords=U1(f5t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=kH[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=U1(i);var s=(i?i+" ":"")+kH.strict;this.reservedWordsStrict=U1(s),this.reservedWordsStrictBind=U1(s+" "+kH.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(th).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ne.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(oR),this.regexpState=null,this.privateNameStack=[]},mm={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ya.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};mm.inFunction.get=function(){return(this.currentVarScope().flags&lS)>0};mm.inGenerator.get=function(){return(this.currentVarScope().flags&n5e)>0&&!this.currentVarScope().inClassFieldInit};mm.inAsync.get=function(){return(this.currentVarScope().flags&Xre)>0&&!this.currentVarScope().inClassFieldInit};mm.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&VN)return!1;if(t.flags&lS)return(t.flags&Xre)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};mm.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Qre)>0||n||this.options.allowSuperOutsideMethod};mm.allowDirectSuper.get=function(){return(this.currentThisScope().flags&s5e)>0};mm.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};mm.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(lS|VN))>0||n};mm.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&VN)>0};ya.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};ya.parse=function(t,n){return new this(n,t).parse()};ya.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};ya.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ya.prototype,mm);var Jl=ya.prototype,w5t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Jl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Td.lastIndex=e,e+=Td.exec(this.input)[0].length;var t=w5t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Td.lastIndex=e+t[0].length;var n=Td.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||th.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Td.lastIndex=e,e+=Td.exec(this.input)[0].length,this.input[e]===";"&&e++}};Jl.eat=function(e){return this.type===e?(this.next(),!0):!1};Jl.isContextual=function(e){return this.type===ne.name&&this.value===e&&!this.containsEsc};Jl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Jl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Jl.canInsertSemicolon=function(){return this.type===ne.eof||this.type===ne.braceR||th.test(this.input.slice(this.lastTokEnd,this.start))};Jl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Jl.semicolon=function(){!this.eat(ne.semi)&&!this.insertSemicolon()&&this.unexpected()};Jl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Jl.expect=function(e){this.eat(e)||this.unexpected()};Jl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var f9=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Jl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Jl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Jl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Jl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var cn=ya.prototype;cn.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==ne.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var tie={kind:"loop"},_5t={kind:"switch"};cn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Td.lastIndex=this.pos;var t=Td.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(cy(r,!0)){for(var i=n+1;BT(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!d5t.test(s))return!0}return!1};cn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Td.lastIndex=this.pos;var e=Td.exec(this.input),t=this.pos+e[0].length,n;return!th.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(BT(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};cn.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=ne._var,s="let"),r){case ne._break:case ne._continue:return this.parseBreakContinueStatement(i,r.keyword);case ne._debugger:return this.parseDebuggerStatement(i);case ne._do:return this.parseDoStatement(i);case ne._for:return this.parseForStatement(i);case ne._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case ne._class:return e&&this.unexpected(),this.parseClass(i,!0);case ne._if:return this.parseIfStatement(i);case ne._return:return this.parseReturnStatement(i);case ne._switch:return this.parseSwitchStatement(i);case ne._throw:return this.parseThrowStatement(i);case ne._try:return this.parseTryStatement(i);case ne._const:case ne._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case ne._while:return this.parseWhileStatement(i);case ne._with:return this.parseWithStatement(i);case ne.braceL:return this.parseBlock(!0,i);case ne.semi:return this.parseEmptyStatement(i);case ne._export:case ne._import:if(this.options.ecmaVersion>10&&r===ne._import){Td.lastIndex=this.pos;var o=Td.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===ne._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===ne.name&&c.type==="Identifier"&&this.eat(ne.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};cn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.label=null:this.type!==ne.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};cn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};cn.parseDoStatement=function(e){return this.next(),this.labels.push(tie),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(ne._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ne.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};cn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(tie),this.enterScope(0),this.expect(ne.parenL),this.type===ne.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===ne._var||this.type===ne._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new f9,u=this.parseExpression(t>-1?"await":!0,a);return this.type===ne._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};cn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Rk|(n?0:SK),!1,t)};cn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(ne._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};cn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};cn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(ne.braceL),this.labels.push(_5t),this.enterScope(0);for(var t,n=!1;this.type!==ne.braceR;)if(this.type===ne._case||this.type===ne._default){var r=this.type===ne._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(ne.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};cn.parseThrowStatement=function(e){return this.next(),th.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var E5t=[];cn.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?i5e:0),this.checkLValPattern(e,t?a5e:Py),this.expect(ne.parenR),e};cn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===ne._catch){var t=this.startNode();this.next(),this.eat(ne.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(ne._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};cn.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};cn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(tie),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};cn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};cn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};cn.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===ne._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};cn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};cn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(ne.braceL),e&&this.enterScope(0);this.type!==ne.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};cn.parseFor=function(e,t){return e.init=t,this.expect(ne.semi),e.test=this.type===ne.semi?null:this.parseExpression(),this.expect(ne.semi),e.update=this.type===ne.parenR?null:this.parseExpression(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};cn.parseForIn=function(e,t){var n=this.type===ne._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};cn.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(ne.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===ne._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(ne.comma))break}return e};cn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?eie:Py,!1)};var Rk=1,SK=2,l5e=4;cn.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===ne.star&&t&SK&&this.unexpected(),e.generator=this.eat(ne.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Rk&&(e.id=t&l5e&&this.type!==ne.name?null:this.parseIdent(),e.id&&!(t&SK)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?eie:Py:o5e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Zre(e.async,e.generator)),t&Rk||(e.id=this.type===ne.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&Rk?"FunctionDeclaration":"FunctionExpression")};cn.parseFunctionParams=function(e){this.expect(ne.parenL),e.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};cn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(ne.braceL);this.type!==ne.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&C5t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};cn.parseClassElement=function(e){if(this.eat(ne.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(ne.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===ne.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===ne.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(ne.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===ne.parenL||o!=="method"||i||s){var l=!n.static&&C$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};cn.isClassElementNameStart=function(){return this.type===ne.name||this.type===ne.privateId||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword};cn.parseClassElementName=function(e){this.type===ne.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};cn.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&C$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};cn.parseClassField=function(e){if(C$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&C$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ne.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};cn.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(VN|Qre);this.type!==ne.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};cn.parseClassId=function(e,t){this.type===ne.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Py,!1)):(t===!0&&this.unexpected(),e.id=null)};cn.parseClassSuper=function(e){e.superClass=this.eat(ne._extends)?this.parseExprSubscripts(null,!1):null};cn.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};cn.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];zN(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function C5t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function C$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}cn.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};cn.parseExport=function(e,t){if(this.next(),this.eat(ne.star))return this.parseExportAllDeclaration(e,t);if(this.eat(ne._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};cn.parseExportDeclaration=function(e){return this.parseStatement(null)};cn.parseExportDefaultDeclaration=function(){var e;if(this.type===ne._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,Rk|l5e,!1,e)}else if(this.type===ne._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};cn.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),zN(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};cn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};cn.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};cn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};cn.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};cn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(n)n=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;t.push(this.parseExportSpecifier(e))}return t};cn.parseImport=function(e){return this.next(),this.type===ne.string?(e.specifiers=E5t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===ne.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};cn.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Py),this.finishNode(e,"ImportSpecifier")};cn.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Py),this.finishNode(e,"ImportDefaultSpecifier")};cn.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Py),this.finishNode(e,"ImportNamespaceSpecifier")};cn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===ne.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(ne.comma)))return e;if(this.type===ne.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(t)t=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;e.push(this.parseImportSpecifier())}return e};cn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ne.string){var e=this.parseLiteral(this.value);return v5t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};cn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};cn.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var nh=ya.prototype;nh.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};nh.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};nh.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};nh.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==ne.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};nh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ne.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(ne.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case ne.braceL:return this.parseObj(!0)}return this.parseIdent()};nh.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(ne.comma),t&&this.type===ne.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===ne.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};nh.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};nh.parseBindingListItem=function(e){return e};nh.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ne.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};nh.checkLValSimple=function(e,t,n){t===void 0&&(t=E$);var r=t!==E$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Py&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(zN(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==u5e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};nh.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=E$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};nh.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=E$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var wh=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},js={b_stat:new wh("{",!1),b_expr:new wh("{",!0),b_tmpl:new wh("${",!1),p_stat:new wh("(",!1),p_expr:new wh("(",!0),q_tmpl:new wh("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new wh("function",!1),f_expr:new wh("function",!0),f_expr_gen:new wh("function",!0,!1,null,!0),f_gen:new wh("function",!1,!1,null,!0)},cS=ya.prototype;cS.initialContext=function(){return[js.b_stat]};cS.curContext=function(){return this.context[this.context.length-1]};cS.braceIsBlock=function(e){var t=this.curContext();return t===js.f_expr||t===js.f_stat?!0:e===ne.colon&&(t===js.b_stat||t===js.b_expr)?!t.isExpr:e===ne._return||e===ne.name&&this.exprAllowed?th.test(this.input.slice(this.lastTokEnd,this.start)):e===ne._else||e===ne.semi||e===ne.eof||e===ne.parenR||e===ne.arrow?!0:e===ne.braceL?t===js.b_stat:e===ne._var||e===ne._const||e===ne.name?!1:!this.exprAllowed};cS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};cS.updateContext=function(e){var t,n=this.type;n.keyword&&e===ne.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};cS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};ne.parenR.updateContext=ne.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===js.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};ne.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?js.b_stat:js.b_expr),this.exprAllowed=!0};ne.dollarBraceL.updateContext=function(){this.context.push(js.b_tmpl),this.exprAllowed=!0};ne.parenL.updateContext=function(e){var t=e===ne._if||e===ne._for||e===ne._with||e===ne._while;this.context.push(t?js.p_stat:js.p_expr),this.exprAllowed=!0};ne.incDec.updateContext=function(){};ne._function.updateContext=ne._class.updateContext=function(e){e.beforeExpr&&e!==ne._else&&!(e===ne.semi&&this.curContext()!==js.p_stat)&&!(e===ne._return&&th.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===ne.colon||e===ne.braceL)&&this.curContext()===js.b_stat)?this.context.push(js.f_expr):this.context.push(js.f_stat),this.exprAllowed=!1};ne.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};ne.backQuote.updateContext=function(){this.curContext()===js.q_tmpl?this.context.pop():this.context.push(js.q_tmpl),this.exprAllowed=!1};ne.star.updateContext=function(e){if(e===ne._function){var t=this.context.length-1;this.context[t]===js.f_expr?this.context[t]=js.f_expr_gen:this.context[t]=js.f_gen}this.exprAllowed=!0};ne.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==ne.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Kn=ya.prototype;Kn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Kn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===ne.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(ne.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Kn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new f9,r=!0);var a=this.start,u=this.startLoc;(this.type===ne.parenL||this.type===ne.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===ne.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===ne.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Kn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(ne.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(ne.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Kn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Kn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==ne._in)&&s>r){var o=this.type===ne.logicalOR||this.type===ne.logicalAND,a=this.type===ne.coalesce;a&&(s=ne.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===ne.coalesce||a&&(this.type===ne.logicalOR||this.type===ne.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Kn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Kn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===ne.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&c5e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===ne.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==ne._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(ne.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function c5e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&c5e(e.expression)}Kn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Kn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Kn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(ne.arrow)};Kn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Kn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(ne.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(ne.bracketL);if(l||u&&this.type!==ne.parenL&&this.type!==ne.backQuote||this.eat(ne.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(ne.bracketR)):this.type===ne.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(ne.parenL)){var f=new f9,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===ne.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Kn.parseExprAtom=function(e,t,n){this.type===ne.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case ne._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===ne.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==ne.dot&&this.type!==ne.bracketL&&this.type!==ne.parenL&&this.unexpected(),this.finishNode(r,"Super");case ne._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case ne.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(ne._function))return this.overrideContext(js.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(ne.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===ne.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(ne.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case ne.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case ne.num:case ne.string:return this.parseLiteral(this.value);case ne._null:case ne._true:case ne._false:return r=this.startNode(),r.value=this.type===ne._null?null:this.type===ne._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case ne.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case ne.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(ne.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case ne.braceL:return this.overrideContext(js.b_expr),this.parseObj(!1,e);case ne._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case ne._class:return this.parseClass(this.startNode(),!1);case ne._new:return this.parseNew();case ne.backQuote:return this.parseTemplate();case ne._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Kn.parseExprAtomDefault=function(){this.unexpected()};Kn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===ne.parenL&&!e)return this.parseDynamicImport(t);if(this.type===ne.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Kn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(ne.parenR)){var t=this.start;this.eat(ne.comma)&&this.eat(ne.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Kn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Kn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Kn.parseParenExpression=function(){this.expect(ne.parenL);var e=this.parseExpression();return this.expect(ne.parenR),e};Kn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Kn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new f9,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==ne.parenR;)if(l?l=!1:this.expect(ne.comma),s&&this.afterTrailingComma(ne.parenR,!0)){c=!0;break}else if(this.type===ne.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(ne.parenR),e&&this.shouldParseArrow(u)&&this.eat(ne.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Kn.parseParenItem=function(e){return e};Kn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var T5t=[];Kn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===ne.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(ne.parenL)?e.arguments=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1):e.arguments=T5t,this.finishNode(e,"NewExpression")};Kn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===ne.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===ne.backQuote,this.finishNode(n,"TemplateElement")};Kn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===ne.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ne.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(ne.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Kn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===ne.name||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ne.star)&&!th.test(this.input.slice(this.lastTokEnd,this.start))};Kn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(ne.braceR);){if(r)r=!1;else if(this.expect(ne.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ne.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Kn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(ne.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===ne.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(ne.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(ne.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Kn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Kn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===ne.colon&&this.unexpected(),this.eat(ne.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===ne.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==ne.comma&&this.type!==ne.braceR&&this.type!==ne.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===ne.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Kn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(ne.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(ne.bracketR),e.key;e.computed=!1}return e.key=this.type===ne.num||this.type===ne.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Kn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Kn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Zre(t,r.generator)|Qre|(n?s5e:0)),this.expect(ne.parenL),r.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Kn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(Zre(n,!1)|r5e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Kn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==ne.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,u5e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Kn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Kn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,eie,t?null:n)}};Kn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(ne.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===ne.comma?o=null:this.type===ne.ellipsis?(o=this.parseSpread(r),r&&this.type===ne.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Kn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Kn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Kn.parseIdentNode=function(){var e=this.startNode();return this.type===ne.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=ne.name):this.unexpected(),e};Kn.parsePrivateIdent=function(){var e=this.startNode();return this.type===ne.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Kn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===ne.semi||this.canInsertSemicolon()||this.type!==ne.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(ne.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Kn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var T$=ya.prototype;T$.raise=function(e,t){var n=t5e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};T$.raiseRecoverable=T$.raise;T$.curPosition=function(){if(this.options.locations)return new sR(this.curLine,this.pos-this.lineStart)};var Mb=ya.prototype,A5t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Mb.enterScope=function(e){this.scopeStack.push(new A5t(e))};Mb.exitScope=function(){this.scopeStack.pop()};Mb.treatFunctionsAsVarInScope=function(e){return e.flags&lS||!this.inModule&&e.flags&oR};Mb.declareName=function(e,t,n){var r=!1;if(t===Py){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&oR&&delete this.undefinedExports[e]}else if(t===a5e){var s=this.currentScope();s.lexical.push(e)}else if(t===o5e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&i5e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&oR&&delete this.undefinedExports[e],u.flags&Jre)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Mb.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Mb.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Mb.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Jre)return t}};Mb.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Jre&&!(t.flags&r5e))return t}};var d9=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new c9(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},HN=ya.prototype;HN.startNode=function(){return new d9(this,this.start,this.startLoc)};HN.startNodeAt=function(e,t){return new d9(this,e,t)};function f5e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}HN.finishNode=function(e,t){return f5e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};HN.finishNodeAt=function(e,t,n,r){return f5e.call(this,e,t,n,r)};HN.copyNode=function(e){var t=new d9(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var d5e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",h5e=d5e+" Extended_Pictographic",p5e=h5e,m5e=p5e+" EBase EComp EMod EPres ExtPict",g5e=m5e,S5t=g5e,D5t={9:d5e,10:h5e,11:p5e,12:m5e,13:g5e,14:S5t},I5t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",k5t={9:"",10:"",11:"",12:"",13:"",14:I5t},Gve="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",y5e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",v5e=y5e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",b5e=v5e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",x5e=b5e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",w5e=x5e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",R5t=w5e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",N5t={9:y5e,10:v5e,11:b5e,12:x5e,13:w5e,14:R5t},_5e={};function P5t(e){var t=_5e[e]={binary:U1(D5t[e]+" "+Gve),binaryOfStrings:U1(k5t[e]),nonBinary:{General_Category:U1(Gve),Script:U1(N5t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var NH=0,Yve=[9,10,11,12,13,14];NH<Yve.length;NH+=1){var O5t=Yve[NH];P5t(O5t)}var Zt=ya.prototype,gm=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=_5e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};gm.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};gm.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};gm.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};gm.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};gm.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};gm.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};gm.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};gm.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};gm.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Zt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Zt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Zt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Zt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Zt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Zt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Zt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Zt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Zt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Zt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Zt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Zt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Zt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Zt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Zt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Zt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Zt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return E5e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function E5e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Zt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!E5e(n);)e.advance();return e.pos!==t};Zt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Zt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Zt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Zt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Gv(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Gv(e.lastIntValue);return!0}return!1};Zt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),F5t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function F5t(e){return cy(e,!0)||e===36||e===95}Zt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),$5t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function $5t(e){return BT(e,!0)||e===36||e===95||e===8204||e===8205}Zt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Zt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Zt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Zt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Zt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Zt.regexp_eatZero=function(e){return e.current()===48&&!h9(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Zt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Zt.regexp_eatControlLetter=function(e){var t=e.current();return C5e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function C5e(e){return e>=65&&e<=90||e>=97&&e<=122}Zt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&M5t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function M5t(e){return e>=0&&e<=1114111}Zt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Zt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var T5e=0,fy=1,Dd=2;Zt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(L5t(t))return e.lastIntValue=-1,e.advance(),fy;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Dd&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return T5e};function L5t(e){return e===100||e===68||e===115||e===83||e===119||e===87}Zt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),fy}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return T5e};Zt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){zN(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Zt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return fy;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Dd;e.raise("Invalid property name")};Zt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";A5e(t=e.current());)e.lastStringValue+=Gv(t),e.advance();return e.lastStringValue!==""};function A5e(e){return C5e(e)||e===95}Zt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";B5t(t=e.current());)e.lastStringValue+=Gv(t),e.advance();return e.lastStringValue!==""};function B5t(e){return A5e(e)||h9(e)}Zt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Zt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Dd&&e.raise("Negated character class may contain strings"),!0}return!1};Zt.regexp_classContents=function(e){return e.current()===93?fy:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),fy)};Zt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Zt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||I5e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Zt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Zt.regexp_classSetExpression=function(e){var t=fy,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Dd&&(t=Dd);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Dd&&(t=fy);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Dd&&(t=Dd)}};Zt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Zt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?fy:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Zt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Dd&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Zt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Zt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Dd&&(t=Dd);return t};Zt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?fy:Dd};Zt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&j5t(n)||U5t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function j5t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function U5t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Zt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return z5t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function z5t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Zt.regexp_eatClassControlLetter=function(e){var t=e.current();return h9(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Zt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Zt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;h9(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function h9(e){return e>=48&&e<=57}Zt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;S5e(n=e.current());)e.lastIntValue=16*e.lastIntValue+D5e(n),e.advance();return e.pos!==t};function S5e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function D5e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Zt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Zt.regexp_eatOctalDigit=function(e){var t=e.current();return I5e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function I5e(e){return e>=48&&e<=55}Zt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!S5e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+D5e(i),e.advance()}return!0};var nie=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new c9(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Lr=ya.prototype;Lr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new nie(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Lr.getToken=function(){return this.next(),new nie(this)};typeof Symbol<"u"&&(Lr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===ne.eof,value:t}}}});Lr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(ne.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Lr.readToken=function(e){return cy(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Lr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Lr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=JFe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Lr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!uS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Lr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&ZFe.test(String.fromCharCode(e)))++this.pos;else break e}}};Lr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Lr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(ne.ellipsis)):(++this.pos,this.finishToken(ne.dot))};Lr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(ne.assign,2):this.finishOp(ne.slash,1)};Lr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?ne.star:ne.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=ne.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(ne.assign,n+1):this.finishOp(r,n)};Lr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(ne.assign,3)}return this.finishOp(e===124?ne.logicalOR:ne.logicalAND,2)}return t===61?this.finishOp(ne.assign,2):this.finishOp(e===124?ne.bitwiseOR:ne.bitwiseAND,1)};Lr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(ne.assign,2):this.finishOp(ne.bitwiseXOR,1)};Lr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||th.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(ne.incDec,2):t===61?this.finishOp(ne.assign,2):this.finishOp(ne.plusMin,1)};Lr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(ne.assign,n+1):this.finishOp(ne.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(ne.relational,n))};Lr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(ne.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ne.arrow)):this.finishOp(e===61?ne.eq:ne.prefix,1)};Lr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(ne.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(ne.assign,3)}return this.finishOp(ne.coalesce,2)}}return this.finishOp(ne.question,1)};Lr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),cy(t,!0)||t===92))return this.finishToken(ne.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Gv(t)+"'")};Lr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ne.parenL);case 41:return++this.pos,this.finishToken(ne.parenR);case 59:return++this.pos,this.finishToken(ne.semi);case 44:return++this.pos,this.finishToken(ne.comma);case 91:return++this.pos,this.finishToken(ne.bracketL);case 93:return++this.pos,this.finishToken(ne.bracketR);case 123:return++this.pos,this.finishToken(ne.braceL);case 125:return++this.pos,this.finishToken(ne.braceR);case 58:return++this.pos,this.finishToken(ne.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ne.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(ne.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Gv(e)+"'")};Lr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Lr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(th.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new gm(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(ne.regexp,{pattern:i,flags:o,value:u})};Lr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function V5t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function k5e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Lr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=k5e(this.input.slice(t,this.pos)),++this.pos):cy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,n)};Lr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=k5e(this.input.slice(t,this.pos));return++this.pos,cy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),cy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=V5t(this.input.slice(t,this.pos),n);return this.finishToken(ne.num,s)};Lr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Lr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(uS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(ne.string,t)};var R5e={};Lr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===R5e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Lr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw R5e;this.raise(e,t)};Lr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===ne.template||this.type===ne.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(ne.dollarBraceL)):(++this.pos,this.finishToken(ne.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(ne.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(uS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Lr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(ne.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Lr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Gv(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return uS(t)?"":String.fromCharCode(t)}};Lr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Lr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(BT(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?cy:BT)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Gv(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Lr.readWord=function(){var e=this.readWord1(),t=ne.name;return this.keywords.test(e)&&(t=Kre[e]),this.finishToken(t,e)};var H5t="8.11.3";ya.acorn={Parser:ya,version:H5t,defaultOptions:AK,Position:sR,SourceLocation:c9,getLineInfo:t5e,Node:d9,TokenType:ui,tokTypes:ne,keywordTypes:Kre,TokContext:wh,tokContexts:js,isIdentifierChar:BT,isIdentifierStart:cy,Token:nie,isNewLine:uS,lineBreak:th,lineBreakG:m5t,nonASCIIwhitespace:ZFe};function q5t(e,t){return ya.parse(e,t)}const rie={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},W5t={ecmaVersion:11},Kve="$",G5t="d",Y5t="d1",K5t="d2",tu=e=>(t,n)=>n.error(t,e+" not allowed"),X5t=tu("Aggregate function"),Q5t=tu("Window function"),J5t="Invalid argument",iie="Invalid column reference",Z5t=iie+" (must be input to an aggregate function)",N5e="Invalid function call",e8t="Invalid member expression",t8t="Invalid operator parameter",n8t="Invalid param reference",r8t="Invalid variable reference",i8t="Variable not accessible in operator call",s8t="Unsupported variable declaration",o8t="Unsupported destructuring pattern",P5e="Table expressions do not support closures",O5e="Use aq.escape(fn) to use a function as-is (including closures)",a8t="use table.params({ name: value }) to define dynamic parameters",u8t="use aq.addFunction(name, fn) to add new op functions",l8t=`
Note: ${P5e}. ${O5e}, or ${a8t}.`,F5e=`
Note: ${P5e}. ${O5e}, or ${u8t}.`,c8t=`The ${F6e} method is not valid in multi-table expressions.`;function f8t(e,t){const n=d8t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,s5t(r)?(p8t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Y5t),e.scope.add(e.tuple2=K5t),e.scope.add(e.$param=Kve)):(e.scope.add(e.tuple=G5t),e.scope.add(e.$param=Kve)),ei(r,e,sie),e.root}function d8t(e){try{const t=e.field?h8t(e):mi(e)?G0(e):e;return q5t(`expr=(${t})`,W5t).body[0].expression.right}catch{pr(`Expression parse error: ${e+""}`)}}function h8t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const sie={FunctionDeclaration:tu("Function definitions"),ForStatement:tu("For loops"),ForOfStatement:tu("For-of loops"),ForInStatement:tu("For-in loops"),WhileStatement:tu("While loops"),DoWhileStatement:tu("Do-while loops"),AwaitExpression:tu("Await expressions"),ArrowFunctionExpression:tu("Function definitions"),AssignmentExpression:tu("Assignments"),FunctionExpression:tu("Function definitions"),NewExpression:tu('Use of "new"'),UpdateExpression:tu("Update expressions"),VariableDeclarator(e,t){kK(e.id,t)},Identifier(e,t,n){L5e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,r8t,l8t)},CallExpression(e,t){const n=$5e(e.callee),r=N6e(n)||P6e(n);if(r){if((t.join||t.aggregate===!1)&&Yne(n)&&X5t(e,t),(t.join||t.window===!1)&&Kne(n)&&Q5t(e,t),t.$op=1,t.ast)IK(e,n,t),e.arguments.forEach(i=>ei(i,t,DK));else{const i=t.op(m8t(t,r,n,e.arguments));Object.assign(e,{type:S6e,name:i.id})}return t.$op=0,!1}else R6e(n)?IK(e,n,t):t.error(e,N5e,F5e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!aa(hv,r))return;const{name:s}=r;if(M5e(e)&&aa(hv,i)&&hp(rie,i.name)){U5e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Xve(e,o,t,B5e,n);if(s===t.$param)return Xve(e,o,t,y8t);t.paramsRef.has(s)?aR(e,t.paramsRef.get(s)):t.columnRef.has(s)?j5e(r,s,t,e):hp(t.params,s)&&aR(r,s)}};function Xve(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(aa(rS,s))a=s.value;else try{ei(s,n,sie,e),a=n.param(s)}catch{n.error(e,e8t)}return r(e,a,t,n,i),!1}const DK={...sie,VariableDeclarator:tu("Variable declaration in operator call"),Identifier(e,t,n){L5e(e,t,n)&&t.error(e,i8t)},CallExpression(e,t){const n=$5e(e.callee);R6e(n)?IK(e,n,t):t.error(e,N5e,F5e)}};function p8t(e,t){e.generator&&tu("Generator functions")(e,t),e.async&&tu("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?($D(t,n[0],"tuple1",i(1)),r>1&&$D(t,n[1],"tuple2",i(2)),r>2&&$D(t,n[2],"$param",s)):($D(t,n[0],"tuple",i(0)),r>1&&$D(t,n[1],"$param",s))),t.root=e.body}function $D(e,t,n,r){aa(hv,t)?(e.scope.add(t.name),e[n]=t.name):aa(T6e,t)&&t.properties.forEach(i=>{const s=aa(hv,i.key)?i.key.name:aa(rS,i.key)?i.key.value:e.error(i,J5t);aa(hv,i.value)||e.error(i.value,o8t),r(i.value.name,s)})}function m8t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(ei(u,e,DK),i.push(e.field(u))):l<a?(ei(u,e,DK),s.push(e.param(u))):e.error(u,t8t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function $5e(e){return aa(hv,e)?e.name:aa(C6e,e)?M5e(e)?g8t(e.property.name):e.property.name:null}function M5e(e){return aa(hv,e.object)&&e.object.name==="Math"}function g8t(e){return e==="max"?"greatest":e==="min"?"least":e}function L5e(e,t,n){const{name:r}=e;if(!(aa(C6e,n)&&n.property===e)){if(!(aa(A6e,n)&&n.key===e))if(t.paramsRef.has(r))aR(e,t.paramsRef.get(r));else if(t.columnRef.has(r))j5e(e,r,t,n);else if(hp(t.params,r))aR(e,r);else if(hp(rie,r))U5e(e,r);else return!0}}function B5e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,iie),r.aggronly&&!r.$op&&r.error(e,Z5t),O6e(e,t,n,o,i)}function j5e(e,t,n,r){const[i,s]=n.columnRef.get(t);B5e(e,i,s,n,r)}function y8t(e,t,n,r){r.params&&!hp(r.params,t)&&r.error(e,n8t),aR(e,t)}function aR(e,t){e.type=o4t,e.name=t}function U5e(e,t){e.type=r4t,e.name=t,e.raw=rie[t]}function IK(e,t,n){if(t===F6e){const r=n.table;r||n.error(e,c8t),$6e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=ql(s)?r.columnName(s):s;return r.column(o)||n.error(i,iie),o}):r.columnNames())}else e.callee={type:s4t,name:t}}function kK(e,t){aa(hv,e)?t.scope.add(e.name):aa(ZPt,e)?e.elements.forEach(n=>kK(n,t)):aa(T6e,e)?e.properties.forEach(n=>kK(n.value,t)):t.error(e.id,s8t)}const v8t={[$N]:1,[S6e]:1};function Wc(e,t={}){const n=t.generate||r$,r=t.compiler||Xne,i=x8t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=b8t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return aa(rS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?i5t(g):f(n(g),i));u.push(y),v8t[g.type]&&y!==g&&nl(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,x=String(d.spec).slice(v,b);pr(`${g}: "${x}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of XB(e))d.value(m+"",g.escape?u5t(d,g,i):f8t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function b8t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function x8t(e){return(e.table?PH(e.table):e.join?{...PH(e.join[1]),...PH(e.join[0])}:{})||{}}function PH(e){return e&&Ss(e.params)?e.params():{}}const z5e="Expr",_h="ExprList",V5e="ExprNumber",FI="ExprObject",eC="JoinKeys",A$="JoinValues",yd="Options",oie="OrderKeys",c1="SelectionList",Yx="TableRef",tC="TableRefList",w8t="Descending",_8t="Query",E8t="Selection",C8t="Verb",T8t="Window";function p9(e,t){return e&&e.expr?new Qve({...e,...t}):new Qve(t,e)}class Qve{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Ss(this.expr)?{func:!0}:{}}}}function A8t(e){return p9(e,{desc:!0})}function r_(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return p9(e,t?{expr:t,...r}:r)}function S8t(e,t,n){return p9(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function D8t(e){const t=n=>n;return t.toString=()=>e,t}function Jve(e,t){return t=t&&Ss(t.query)?t.query():t,t&&Ss(t.evaluate)?t.evaluate(null,e):e(t)}function H5e(e){return nl(e)&&(mi(e.all)||mi(e.matches)||mi(e.not)||mi(e.range))}function uR(e){return e&&Ss(e.toObject)?e.toObject():Ss(e)?{expr:String(e),func:!0}:mi(e)?e.map(uR):nl(e)?u9(e,t=>uR(t)):e}function aie(e){return mi(e)?e.map(aie):nl(e)?mi(e.verbs)?lie.from(e):mi(e.all)?LT():mi(e.range)?ZFt(...e.range):mi(e.match)?e5t(RegExp(...e.match)):mi(e.not)?YFe(e.not.map(uR)):I8t(e):e}function I8t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=r_(n):e.func===!0&&(t=n=D8t(n)),nl(e.window)){const{frame:r,peers:i}=e.window;t=n=S8t(n,r,i)}e.desc===!0&&(t=A8t(n))}return e===t?u9(e,r=>aie(r)):t}function k8t(e){return mi(e)?e.map(R8t):e}function R8t(e){const t=[];return Vc(e).forEach(n=>{ql(n)?t.push(n):vu(n)?t.push(r_(n,null)):nl(n)&&n.expr||Ss(n)?t.push(n):pr(`Invalid key value: ${n+""}`)}),t}function N8t(e){return mi(e)?e.map(P8t):e}function P8t(e,t){return t<2?Vc(e):e}function O8t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(nl(r)&&!Ss(r))for(const i in r)t.push(r[i]);else n=ql(r)?r:vu(r)?r_(n):Ss(r)?n:pr(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const F8t={[z5e]:Y5e,[_h]:jT,[V5e]:U8t,[FI]:Yv,[eC]:z8t,[A$]:V8t,[oie]:jT,[c1]:B8t};function $8t(e,t,n){return t===Yx?Zve(e):t===tC?e.map(Zve):q5e(uR(e),t,n)}function q5e(e,t,n){return t===yd?e&&M8t(e,n):F8t[t](e)}function M8t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?q5e(i,t[r]):i}return n}function L8t(e,t){return Wc({expr:e},{...t,ast:!0}).exprs[0]}function uie(e){return{type:$N,name:e}}function W5e(e){return{type:$N,index:e}}function Yv(e,t){if(vu(e))return L8t(e,t);if(e.expr){let n;if(e.field===!0?n=uie(e.expr):e.func===!0&&(n=Yv(e.expr,t)),n)return e.desc&&(n={type:w8t,expr:n}),e.window&&(n={type:T8t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Yv(e[n],t),as:n}))}function G5e(e){const t=E8t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:jT(e.not)}:e.range?{type:t,operator:"range",arguments:jT(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:pr("Invalid input")}function B8t(e){return Vc(e).map(j8t).flat()}function j8t(e){return H5e(e)?G5e(e):ql(e)?W5e(e):vu(e)?uie(e):nl(e)?Object.keys(e).map(t=>({type:$N,name:t,as:e[t]})):pr("Invalid input")}function Y5e(e){return H5e(e)?G5e(e):ql(e)?W5e(e):vu(e)?uie(e):nl(e)?Yv(e):pr("Invalid input")}function jT(e){return Vc(e).map(Y5e).flat()}function U8t(e){return ql(e)?e:Yv(e)}function z8t(e){return mi(e)?e.map(jT):Yv(e,{join:!0})}function V8t(e){return mi(e)?e.map((t,n)=>n<2?jT(t):Yv(t,{join:!0})):Yv(e,{join:!0})}function Zve(e){return e&&Ss(e.toAST)?e.toAST():e}class K5e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===eC?k8t(a):o===A$?N8t(a):o===oie?O8t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=RK[t.verb],r=(n.schema||[]).map(({name:i})=>aie(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Yx?Jve(n,o):s===tC?o.map(a=>Jve(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=uR(this[n])}),t}toAST(){const t={type:C8t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=$8t(this[n],r,i)}),t}}function Gi(e,t){return Object.assign((...n)=>new K5e(e,t,n),{schema:t})}const RK={count:Gi("count",[{name:"options",type:yd}]),derive:Gi("derive",[{name:"values",type:FI},{name:"options",type:yd,props:{before:c1,after:c1}}]),filter:Gi("filter",[{name:"criteria",type:FI}]),groupby:Gi("groupby",[{name:"keys",type:_h}]),orderby:Gi("orderby",[{name:"keys",type:oie}]),relocate:Gi("relocate",[{name:"columns",type:c1},{name:"options",type:yd,props:{before:c1,after:c1}}]),rename:Gi("rename",[{name:"columns",type:c1}]),rollup:Gi("rollup",[{name:"values",type:FI}]),sample:Gi("sample",[{name:"size",type:V5e},{name:"options",type:yd,props:{weight:z5e}}]),select:Gi("select",[{name:"columns",type:c1}]),ungroup:Gi("ungroup"),unorder:Gi("unorder"),reify:Gi("reify"),dedupe:Gi("dedupe",[{name:"keys",type:_h,default:[]}]),impute:Gi("impute",[{name:"values",type:FI},{name:"options",type:yd,props:{expand:_h}}]),fold:Gi("fold",[{name:"values",type:_h},{name:"options",type:yd}]),pivot:Gi("pivot",[{name:"keys",type:_h},{name:"values",type:_h},{name:"options",type:yd}]),spread:Gi("spread",[{name:"values",type:_h},{name:"options",type:yd}]),unroll:Gi("unroll",[{name:"values",type:_h},{name:"options",type:yd,props:{drop:_h}}]),lookup:Gi("lookup",[{name:"table",type:Yx},{name:"on",type:eC},{name:"values",type:_h}]),join:Gi("join",[{name:"table",type:Yx},{name:"on",type:eC},{name:"values",type:A$},{name:"options",type:yd}]),cross:Gi("cross",[{name:"table",type:Yx},{name:"values",type:A$},{name:"options",type:yd}]),semijoin:Gi("semijoin",[{name:"table",type:Yx},{name:"on",type:eC}]),antijoin:Gi("antijoin",[{name:"table",type:Yx},{name:"on",type:eC}]),concat:Gi("concat",[{name:"tables",type:tC}]),union:Gi("union",[{name:"tables",type:tC}]),intersect:Gi("intersect",[{name:"tables",type:tC}]),except:Gi("except",[{name:"tables",type:tC}])};let lie=class X5e extends f6e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new X5e(t.map(K5e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return ebe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return ebe(this,"toAST",{type:_8t})}};function ebe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function H8t(e,t){return new lie(e._verbs.concat(t),e._params,e._table)}for(const e in RK){const t=RK[e];lie.prototype["__"+e]=function(n,...r){return H8t(n,t(...r))}}function fS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function q8t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function cie(e,t){const n=Jf();return t.forEach((r,i)=>{const s=vu(r)?r:i;if(s){const o=e.column(i)||pr(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function Q5e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||pr("relocate requires a before or after option."),i&&s&&pr("relocate accepts only one of the before or after options."),t=ly(e,t);const o=[...ly(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),cie(e,u)}function qN(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function fie(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function W8t(e,t=0,n=e.length){let r=n?e[t++]:li;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function G8t(e,t=0,n=e.length){let r=n?e[t++]:li;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function B6(e){return J3(e)?e:+e}function Y8t(e,t){const n=e.length;if(!n)return li;if((t=+t)<=0||n<2)return B6(e[0]);if(t>=1)return B6(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=B6(e[i]);return J3(s)?s:s+(B6(e[i+1])-s)*(r-i)}class K8t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:W8t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:G8t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(fie)),Y8t(this._sorted,t)}}const S$=(e,t,n)=>fS(t,"{"+qN(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function X8t(e,t){const{ops:n,output:r}=Q8t(e,t),i=e[0].fields,s=i.length,o=s===0?die:s===1?J8t:s===2?Z8t:pr("Unsupported field count: "+s);return new o(i,n,r,t)}function Q8t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=N6e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class die extends n5t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new K8t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class J8t extends die{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=S$(n,s,"add"),this._rem=S$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Gh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Gh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class Z8t extends die{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=S$(n,s,"add"),this._rem=S$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Gh(i)&&Gh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Gh(i)&&Gh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function J_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=dS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function dS(e,t,n){if(!t.length)return n;const r=J5e(t),i=e.groups(),s=i?i.size:1;return n=n||YB(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=e8e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=Z5e(e,o);o.write(a,n,0)}),n}function J5e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(X8t(r[i],t));return n}function Z5e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function e8e(e,t,n){const{keys:r,size:i}=n,s=YB(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function t8e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function n8e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const tbe=n8e(fie);function e$t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?fS(["w","r","k"],"{"+qN(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i.map(b=>b.init());for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,x=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=tbe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=tbe.right(o,o[p.i1-1])));for(let _=0;_<d;++_){const C=i[_],T=a[_];for(let S=b;S<p.i0;++S)C.rem(T,s[S],e);for(let S=x;S<p.i1;++S)C.add(T,s[S],e);C.write(T,u,l)}return h(p,u,l),u}};return p}const t$t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),n$t=e=>!!e.peers;function r$t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=P6e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function i$t(e,t,n,r={},i){const s=e.data(),o=s$t(i,s),a=o.length,u=fS(["r","d","op"],"{"+qN(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=o$t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function s$t(e,t){const n={};return e.forEach(r=>{const i=t$t(r),s=n$t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Yne(r.name)?a.push(r):u.push(r$t(r))}),Object.values(n).map(r=>e$t(t,r.frame,r.peers,r.winOps,J5e(r.aggOps,r.frame[0]!=null?-1:1)))}function o$t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function a$t(e){return Kne(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function hie(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Jf(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=u$t(r),c=e.isGrouped()?e.groups().size:1,f=dS(e,u,YB(r.length,()=>Array(c)));return l.length?i$t(e,a,n,f,l):l$t(e,a,n,f),e.create(o)}function u$t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(a$t(s)?n:t).push(s)}return[t,n]}function l$t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function c$t(e,t,n={}){const r=hie(e,Wc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:Q5e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function f$t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const j6=2147483648,d$t=4294967295;class r8e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&j6>>>t}set(t){this._bits[t>>5]|=j6>>>t}clear(t){this._bits[t>>5]&=~(j6>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&d$t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=j6>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function h$t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new r8e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function p$t(e,t){const n=Wc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=hie(e,n,{drop:!0}).column("p");r=s=>i[s]}return h$t(e,r)}function i8e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=J_(e,r,n),l=Jf(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(x=>{if(!a.has(x)){const _=l.add(x,[]);c.has(x)||(f.push(e.column(x)),d.push(_))}}),t.forEach(x=>{a.has(x)||(l.has(x)||l.add(x,[]),h.push(l.data[x]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(x,_)=>{for(let C=0;C<g;++C)d[C].length=m+_,d[C].fill(f[C].get(x),m,m+_)},b=p?(x,_)=>{for(let C=0;C<_;++C)p[x+C]=C}:()=>{};if(y===1){const x=u[0],_=h[0];e.scan((C,T)=>{const S=Vc(x(C,T)),k=Math.min(S.length,s);v(C,k);for(let I=0;I<k;++I)_[m+I]=S[I];b(m,k),m+=k})}else e.scan((x,_)=>{let C=0;const T=u.map(S=>{const k=Vc(S(x,_));return C=Math.min(Math.max(C,k.length),s),k});v(x,C);for(let S=0;S<y;++S){const k=h[S],I=T[S];for(let R=0;R<C;++R)k[m+R]=I[R]}b(m,C),m+=C});return e.create(l.new())}function m$t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=J_(e,r,n);return i8e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function mp(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=ql(o)?t.columnName(o):o,vu(o)?i.set(o,r_(o)):Ss(o)?ly(t,o).forEach(s):nl(o)?WFe(i,o):pr(`Invalid ${e} value: ${o+""}`)};return Vc(n).forEach(s),r.preparse&&r.preparse(i),Wc(i,{table:t,...r})}function g$t(e,t,n){return m$t(e,mp("fold",e,t),n)}function nbe(e,t,n,r){const i=n&&n.length;return y$t(i?v$t(e,n,r):e,t,i)}function y$t(e,{names:t,exprs:n,ops:r},i){const s=J_(e,r,n),o=i?null:Jf(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Gh(p)?p:d(h)})}),i?e:e.create(o)}function v$t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=i$(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Jf(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=i$(o.map((p,m)=>g=>g[m])),h=fS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),rbe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else rbe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function rbe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function pie(e,{names:t,exprs:n,ops:r}){const i=Jf(),s=e.groups();return s&&t8e(i,s),b$t(t,n,s,dS(e,r),i),e.create(i.new())}function b$t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function x$t(e,t,n={}){if(t=Wc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:pr(`Invalid impute column ${G0(r)}`)),n.expand){const r={preparse:w$t,aggronly:!0},i=mp("impute",e,n.expand,r),s=pie(e.ungroup(),i);return nbe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return nbe(e,t)}function w$t(e){e.forEach((t,n)=>t.field?e.set(n,x6e(t+"")):0)}function _$t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function s8e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function E$t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function C$t(e,t){const n=["i","a","j","b"];return fS(n,"{"+qN(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function T$t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Jf(),g=Array(p),y=Array(p);for(let x=0;x<r.length;++x)g[x]=m.add(r[x],[]),y[x]=i[x];const v=C$t(g,y);if((mi(n)?S$t:A$t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let x=0;x<u;++x)l[x]||v(a[x],o,-1,c);if(s.right)for(let x=0;x<d;++x)h[x]||v(-1,o,f[x],c);return e.create(m.new())}function A$t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function S$t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(C,T,S,k)=>e(S,k,C,T));const x=E$t(v,m,g),_=p.length;for(let C=0;C<_;++C){const T=p[C],S=x.get(d(T,f));if(S){const k=S.length;for(let I=0;I<k;++I){const R=S[I];b(T,f,v[R],m),y[R]=1}h[C]=1}}}function D$(e,t,n){const r=new Map;Vc(n).forEach((s,o)=>{s=ql(s)?t.columnName(s):s,vu(s)?r.set(o,r_(s)):Ss(s)||nl(s)&&s.expr?r.set(o,s):pr(`Invalid ${e} key value: ${s+""}`)});const i=Wc(r,{table:t,aggregate:!1,window:!1});return i$(i.exprs,!0)}function D$t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function mie(e,t,n){if(n)vu(n)?n=[n,n]:mi(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=D$t(e.columnNames(),t.columnNames());r.length||pr("Natural join requires shared column names."),n=[r,r]}return n}function o8e(e,t,n,r){return n.length!==r.length&&pr("Mismatched number of join keys"),[D$("join",e,n),D$("join",t,r)]}const I$t={aggregate:!1,window:!1},k$t={...I$t,index:1};function ibe(e,t,n,r,i={}){n=mie(e,t,n);const s={join:[e,t]};let o;if(mi(n)){const[a,u]=n.map(Vc);o=o8e(e,t,a,u),r||(r=R$t(e,a,u,i))}else o=Wc({on:n},s).exprs[0],r||(r=[LT(),LT()]);return T$t(e,t,o,N$t(e,t,r,s,i&&i.suffix),i)}function R$t(e,t,n,r){const i=[];t.forEach((o,a)=>vu(o)&&o===n[a]?i.push(o):0);const s=YFe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${G0(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,LT()]:[LT(),s]}function N$t(e,t,n,r,i=[]){if(mi(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=mp("join",e,n[0],r)),u--&&(o=mp("join",t,n[1],k$t)),u--&&(a=Wc(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&sbe(s.names,l,i[0]||"_1"),i[1]!==""&&sbe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Wc(n,r)}function sbe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function P$t(e,t,n,r={}){const i=new r8e(e.totalRows());return(mi(n)?O$t:F$t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function O$t(e,t,n,[r,i]){const s=s8e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function F$t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function obe(e,t,n,r){n=mie(e,t,n);const i=mi(n)?o8e(e,t,...n.map(Vc)):Wc({on:n},{join:[e,t]}).exprs[0];return P$t(e,t,i,r)}function $$t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Jf(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(li)));const l=s8e(t,r),c=fS(["lr","rr","data"],"{"+qN(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),J_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function M$t(e,t,n,r){return n=mie(e,t,n),$$t(e,t,[D$("lookup",e,n[0]),D$("lookup",t,n[1])],mp("lookup",t,r))}const NK=(e,t)=>e??t;function L$t(e,t,n,r={}){const{keys:i,keyColumn:s}=B$t(e,t,r),o=NK(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>dS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(j$t(n,a,e.groups(),u))}function B$t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=NK(n.sort,!0),s=NK(n.keySeparator,"_"),o=J_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=dS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function j$t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Jf(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&t8e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function U$t(e,t,n,r){return L$t(e,mp("fold",e,t),mp("fold",e,n,{preparse:z$t,aggronly:!0}),r)}function z$t(e){e.forEach((t,n)=>t.field?e.set(n,y6e(t+"")):0)}function V$t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),cie(e,ly(e,t,n))}function abe(e,t){return pie(e,Wc(t,{table:e,aggronly:!0,window:!1}))}function H$t(e,t,n,r){return(t?r?W$t:q$t:r?Y$t:G$t)(e.length,e,n,r)}function q$t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*nS()|0];return t}function W$t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=n8e(fie).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*nS())];return t}function G$t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*nS();s<e&&(t[s|0]=n[i])}return t}function Y$t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(nS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function K$t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=nS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function X$t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):H$t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&K$t(u),e.reify(u)}function Q$t(e,t,n={}){return X$t(e,J$t(e,t),Z$t(e,n.weight),n)}const a8e=e=>t=>e.get(t)||0;function J$t(e,t){return ql(t)?()=>t:a8e(pie(e,Wc({size:t},{table:e,window:!1})).column("size"))}function Z$t(e,t){return t==null?null:(t=ql(t)?e.columnName(t):t,a8e(vu(t)?e.column(t):hie(e,Wc({w:t},{table:e}),{drop:!0}).column("w")))}function eMt(e,t){return cie(e,ly(e,t))}function tMt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=J_(e,r,n),l=Jf(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=nMt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function nMt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Vc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(li));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function rMt(e,t,n){return tMt(e,mp("spread",e,t),n)}function iMt(e,t){return e.concat(t).dedupe()}function sMt(e,t,n){return i8e(e,mp("unroll",e,t),n&&n.drop?{...n,drop:mp("unroll",e,n.drop).names}:n)}function oMt(e,t){return e.create({groups:aMt(e,t)})}function aMt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=J_(e,r,n);const o=i$(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function uMt(e,t){return oMt(e,mp("groupby",e,t))}function lMt(e,t){return e.create({order:t})}const cMt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function fMt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Wc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([r$(p,{index:"a",op:o}),r$(p,{index:"b",op:a})])},window:!1}),l=dS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=cMt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function dMt(e,t){return lMt(e,hMt(e,t))}function hMt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(nl(o)&&!Ss(o))for(const a in o)i(o[a]);else i(ql(o)?r_(s,e.columnName(o)):vu(o)?r_(s):Ss(o)?s:pr(`Invalid orderby field: ${s+""}`))}),fMt(e,r)}function pMt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Jf();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>li};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function mMt(e,t){const n=Jf(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?e8e(e,t,r):[Z5e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function gMt(e){return e.isGrouped()?e.create({groups:null}):e}function yMt(e){return e.isOrdered()?e.create({order:null}):e}const vMt={__antijoin:(e,t,n)=>obe(e,t,n,{anti:!0}),__count:(e,t={})=>abe(e,{[t.as||"count"]:v6e()}),__cross:(e,t,n,r)=>ibe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:pMt,__dedupe:q8t,__derive:c$t,__except:f$t,__filter:p$t,__fold:g$t,__impute:x$t,__intersect:_$t,__join:ibe,__lookup:M$t,__pivot:U$t,__relocate:Q5e,__rename:V$t,__rollup:abe,__sample:Q$t,__select:eMt,__semijoin:obe,__spread:rMt,__union:iMt,__unroll:sMt,__groupby:uMt,__orderby:dMt,__ungroup:gMt,__unorder:yMt,__reduce:mMt};Object.assign(hg.prototype,vMt);function u8e(e,t){return hg.from(e,t)}function PC(e){return p9(e,{escape:!0,toString(){pr("Escaped values can not be serialized.")}})}hg.prototype;var bMt="Expected a function",ube=NaN,xMt="[object Symbol]",wMt=/^\s+|\s+$/g,_Mt=/^[-+]0x[0-9a-f]+$/i,EMt=/^0b[01]+$/i,CMt=/^0o[0-7]+$/i,TMt=parseInt,AMt=typeof on=="object"&&on&&on.Object===Object&&on,SMt=typeof self=="object"&&self&&self.Object===Object&&self,DMt=AMt||SMt||Function("return this")(),IMt=Object.prototype,kMt=IMt.toString,RMt=Math.max,NMt=Math.min,OH=function(){return DMt.Date.now()};function PMt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(bMt);t=lbe(t)||0,PK(n)&&(c=!!n.leading,f="maxWait"in n,s=f?RMt(lbe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(C){var T=r,S=i;return r=i=void 0,l=C,o=e.apply(S,T),o}function p(C){return l=C,a=setTimeout(y,t),c?h(C):o}function m(C){var T=C-u,S=C-l,k=t-T;return f?NMt(k,s-S):k}function g(C){var T=C-u,S=C-l;return u===void 0||T>=t||T<0||f&&S>=s}function y(){var C=OH();if(g(C))return v(C);a=setTimeout(y,m(C))}function v(C){return a=void 0,d&&r?h(C):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function x(){return a===void 0?o:v(OH())}function _(){var C=OH(),T=g(C);if(r=arguments,i=this,u=C,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return _.cancel=b,_.flush=x,_}function PK(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function OMt(e){return!!e&&typeof e=="object"}function FMt(e){return typeof e=="symbol"||OMt(e)&&kMt.call(e)==xMt}function lbe(e){if(typeof e=="number")return e;if(FMt(e))return ube;if(PK(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=PK(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(wMt,"");var n=EMt.test(e);return n||CMt.test(e)?TMt(e.slice(2),n?2:8):_Mt.test(e)?ube:+e}var $Mt=PMt;const Ah=_p($Mt);function l8e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>kb(".2s"),[]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ga,{children:E.jsx(Mi,{gap:3,children:E.jsx(Ye,{size:"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>E.jsxs("g",{transform:`translate(${n}, ${a})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),E.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const MMt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:l8e},Symbol.toStringTag,{value:"Module"})),FH=15;function c8e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=Tr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<FH&&Math.abs(t(g[r.y])-p[1])<FH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),E.jsx("circle",{style:{cursor:l?"pointer":"default"},r:FH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const LMt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:c8e},Symbol.toStringTag,{value:"Module"})),ks={top:15,left:100,right:15,bottom:70};function OK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=kf(),[c]=kf(),[f]=kf(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-ks.left-ks.right,[l]),m=N.useMemo(()=>u-ks.top-ks.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Nb(LB).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:x}=N.useMemo(()=>{const I=s.map(U=>+U[i.x]).filter(U=>U!==null),[R,F]=F3(I),O=s.map(U=>+U[i.y]).filter(U=>U!==null),[B,H]=F3(O);return{xMin:R,xMax:F,yMin:B,yMax:H}},[s,i.x,i.y]),_=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?xne([ks.left,p+ks.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Ua([ks.left,p+ks.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),C=N.useMemo(()=>{const I=x-v;return m<=0?null:Ua([m+ks.top,ks.top]).domain([v-I/10,x+I/10]).nice()},[m,x,v]),T=N.useMemo(()=>{if(!_||!C)return()=>null;if(r==="Axis Selection"){const I=WNe().extent([[ks.left,ks.top+m-5],[ks.left+p,ks.top+m+5]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[F.selection[0],null],[F.selection[1],null]],_,C,F.mode)}),R=GNe().extent([[ks.left-5,ks.top],[ks.left+5,ks.top+m]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[null,F.selection[0]],[null,F.selection[1]]],_,C,F.mode)});return c.current&&f.current&&(Tr(f.current).call(R),Tr(c.current).call(I),t.hasBrush||(Tr(f.current).call(R.move,[C(x),C(v)]),Tr(c.current).call(I.move,[_(new Date("2015-01-02")),_(new Date("2015-12-31"))]),n([[_(new Date("2015-01-02")),C(x)],[_(new Date("2015-12-31")),C(v)]],_,C,"drag"))),()=>{Tr(f.current).call(R.move,[C(x),C(v)]),Tr(c.current).call(I.move,[_(new Date("2015-01-02")),_(new Date("2015-12-31"))]),n([[_(new Date("2015-01-02")),C(x)],[_(new Date("2015-12-31")),C(v)]],_,C,"clear")}}if(r==="Rectangular Selection"){const I=YNe().extent([[ks.left,ks.top],[ks.left+p,ks.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],_,C,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(Tr(a.current).call(I.move,null),e(null))});return Tr(a.current).call(I),()=>{Tr(a.current).call(I.move,null),n([[null,null],[null,null]],_,C,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[_(y),C(x)],[_(b),C(v)]],_,C,null),()=>n([[_(y),C(x)],[_(b),C(v)]],_,C,"clear")):r==="Paintbrush Selection"?()=>n([[_(y),C(x)],[_(b),C(v)]],_,C,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,_,x,v,C]),S=N.useMemo(()=>o.length===0?null:new Set(o),[o]),k=N.useMemo(()=>!_||!C?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const F=i.dataType==="date"?_(new Date(I[i.x])):_(I[i.x]);return E.jsx("circle",{opacity:S&&!S.has(I[i.ids])?.3:1,r:3,fill:S&&!S.has(I[i.ids])?"lightgray":g(I[i.category]),cx:F,cy:C(I[i.y])},R)}),[S,g,s,i.category,i.dataType,i.ids,i.x,i.y,_,C]);return N.useEffect(()=>{r==="Axis Selection"&&dNe(".handle").style("fill","darkgrey")},[t,r]),E.jsxs(os,{children:[E.jsxs(Mi,{children:[E.jsx(bn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?E.jsx(QL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),E.jsxs(Mi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[E.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_&&C?E.jsxs("g",{children:[E.jsx(l8e,{yScale:C,label:i.y,horizontalPosition:ks.left,xRange:_.range()}),E.jsx(qne,{xScale:_,yRange:C.range(),isDate:i.dataType==="date",vertPosition:m+ks.top,label:i.x,ticks:_.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:_(I)}))})]}):null,k,E.jsx("g",{id:"brushXRef",ref:c}),E.jsx("g",{id:"brushYRef",ref:f}),_&&C&&r==="Paintbrush Selection"?E.jsx(c8e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:_,yScale:C}):null]}),r==="Slider Selection"&&_&&C?E.jsxs(os,{style:{flexGrow:1},gap:50,children:[E.jsxs(os,{gap:0,children:[E.jsx(Ye,{children:i.x}),E.jsx(dT,{minRange:1,label:null,min:_.domain()[0],max:_.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[_(I[0]),t.y1],[_(I[1]),t.y2]],_,C,"drag")},style:{width:"300px"},marks:_.ticks(5).map(I=>({value:I,label:I})),value:[_.invert(t.x1),_.invert(t.x2)]})]}),E.jsxs(os,{gap:0,children:[E.jsx(Ye,{children:i.y}),E.jsx(dT,{minRange:1,label:null,min:C.domain()[0],max:C.domain()[1],onChange:I=>{n([[t.x1,C(I[1])],[t.x2,C(I[0])]],_,C,"drag")},style:{width:"300px"},marks:C.ticks(5).map(I=>({value:I,label:I})),value:[C.invert(t.y2),C.invert(t.y1)]})]})]}):null]})]})}const BMt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:OK,default:OK},Symbol.toStringTag,{value:"Module"}));function cbe({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=N.useState(null),[s,o]=N.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});N.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=N.useState(null);N.useEffect(()=>{JNe(`./data/${e.dataset}.csv`).then(y=>{u(y)})},[e]);const l=N.useMemo(()=>a?u8e(a):null,[a]),{actions:c,trrack:f}=N.useMemo(()=>{const y=Q_.create(),v=y.register("brush",(T,S)=>(T.all={brush:S},T)),b=y.register("brushMove",(T,S)=>(T.all={brush:S},T)),x=y.register("brushResize",(T,S)=>(T.all={brush:S},T)),_=y.register("brushClear",(T,S)=>(T.all={brush:S},T)),C=ON({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:v,brushMove:b,brushResize:x,clearBrush:_},trrack:C}},[]),d=N.useCallback((y,v)=>{y==="drag"?f.apply("Move Brush",c.brushMove(v)):y==="handle"&&f.apply("Brush",c.brush(v))},[c,f]),h=N.useMemo(()=>Ah(d,100,{maxWait:100}),[d]),p=N.useCallback((y,v,b,x,_)=>{if(!v||!b)return;const C=v.invert(y[0][0]||s.x1),T=v.invert(y[1][0]||s.x2),S=b.invert(y[1][1]||s.y2),k=b.invert(y[0][1]||s.y1);let I=null;if(x==="clear")I=l;else if(_){const F=new Set(_);I=l.filter(PC(O=>F.has(O[e.ids])))}else e.brushType==="Axis Selection"?I=l.filter(PC(F=>new Date(F[e.x])>=new Date(C)&&new Date(F[e.x])<=new Date(T)&&F[e.y]>=S&&F[e.y]<=k)):I=l.filter(PC(F=>F[e.x]>=C&&F[e.x]<=T&&F[e.y]>=S&&F[e.y]<=k));const R={x1:y[0][0]||(s==null?void 0:s.x1)||0,x2:y[1][0]||(s==null?void 0:s.x2)||0,y1:y[0][1]||(s==null?void 0:s.y1)||0,y2:y[1][1]||(s==null?void 0:s.y2)||0,hasBrush:x!=="clear",ids:x!=="clear"?I==null?void 0:I.array("id"):[]};o(R),x==="drag"||x==="handle"?h(x,R):x==="clear"&&f.apply("Clear Brush",c.clearBrush(R)),i(I),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=N.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=N.useCallback(y=>{i(y)},[]);return a?E.jsxs(os,{gap:"xs",children:[E.jsx(OK,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),E.jsx(lK,{data:a,parameters:e,barsTable:m})]}):E.jsx(Zc,{})}const jMt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:cbe,default:cbe},Symbol.toStringTag,{value:"Module"})),UMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function f8e({data:e,xScale:t,yScale:n,height:r}){return E.jsx("g",{children:e.map((i,s)=>E.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const zMt=Object.freeze(Object.defineProperty({__proto__:null,Bars:f8e},Symbol.toStringTag,{value:"Module"}));function gie({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=Ua().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsxs("g",{transform:`translate(0,${a})`,children:[E.jsx("line",{x2:`${r}`,stroke:"currentColor"}),E.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const VMt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:gie},Symbol.toStringTag,{value:"Module"}));function d8e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=QA().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsx("g",{transform:`translate(${a}, 10)`,children:E.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const HMt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:d8e},Symbol.toStringTag,{value:"Module"})),qMt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function WMt({parameters:e}){const[n,r]=tS(qMt),i=QA().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Ua().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return E.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:E.jsx("svg",{width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[E.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:E.jsx(d8e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),E.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:E.jsx(gie,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),E.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:E.jsx(f8e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const GMt=Object.freeze(Object.defineProperty({__proto__:null,default:WMt},Symbol.toStringTag,{value:"Module"}));function h8e({data:e}){return E.jsx("g",{children:e.map(({bubble:t},n)=>E.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const YMt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:h8e},Symbol.toStringTag,{value:"Module"}));function yie({positions:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const KMt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:yie},Symbol.toStringTag,{value:"Module"})),XMt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},QMt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=XPe().size([t-10,n-10]).padding(1.5),o=IB(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},JMt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function ZMt({parameters:e}){const[t,n]=tS(XMt),r=QMt(e,n.width,n.height),i=JMt(r,e.selectedIndices);return E.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:E.jsx("svg",{width:n.width,height:n.height,children:E.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[E.jsx(h8e,{data:r}),E.jsx(yie,{positions:i})]})})})}const eLt=Object.freeze(Object.defineProperty({__proto__:null,default:ZMt},Symbol.toStringTag,{value:"Module"}));function p8e({arcs:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const tLt=Object.freeze(Object.defineProperty({__proto__:null,Slices:p8e},Symbol.toStringTag,{value:"Module"}));function m8e({positions:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("g",{transform:`translate(${t.centroid()})`,children:E.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const nLt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:m8e},Symbol.toStringTag,{value:"Module"})),rLt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},iLt=J3t().value(e=>e.value),MD=150;function sLt({parameters:e}){const[t,n]=tS(rLt),r=iLt(e.data),i=r.map(o=>HY().innerRadius(0).outerRadius(MD).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>HY().outerRadius(MD+10).innerRadius(MD+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return E.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:E.jsx("svg",{width:n.width,height:n.height,children:E.jsxs("g",{transform:`translate(${[n.marginLeft+MD,n.marginTop+MD].join(",")})`,children:[E.jsx(p8e,{arcs:i}),E.jsx(m8e,{positions:s})]})})})}const oLt=Object.freeze(Object.defineProperty({__proto__:null,default:sLt},Symbol.toStringTag,{value:"Module"}));function g8e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=Ua().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsxs("g",{transform:`translate(${a}, 0)`,children:[E.jsx("line",{y2:`${r}`,stroke:"currentColor"}),E.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const aLt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:g8e},Symbol.toStringTag,{value:"Module"}));function y8e({data:e,barWidth:t,yScale:n}){return E.jsx("g",{children:e.map((r,i)=>E.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const uLt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:y8e},Symbol.toStringTag,{value:"Module"})),lLt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function cLt({parameters:e}){const[n,r]=tS(lLt),i=QA().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Ua().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,x)=>Number(b)+Number(x))/100,y={};p.forEach((b,x)=>{y[String.fromCharCode(x+65)]=b/g});const v=[y];return xRt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return E.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:E.jsx("svg",{width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[E.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:E.jsx(g8e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),E.jsx("g",{transform:"translate(0, 0)",children:E.jsx(gie,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),E.jsxs("g",{transform:"translate(0, 0)",children:[E.jsx(y8e,{data:c,barWidth:f,yScale:s}),E.jsx(yie,{positions:d})]})]})})})}const fLt=Object.freeze(Object.defineProperty({__proto__:null,default:cLt},Symbol.toStringTag,{value:"Module"}));function fbe({rankings:e}){return E.jsx("div",{style:{fontFamily:"sans-serif"},children:E.jsx("div",{children:e.map((t,n)=>E.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function dLt({parameters:e,setAnswer:t}){const n=eh(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=$Re(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=cit([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),E.jsxs("div",{children:[E.jsxs(Ef,{children:[E.jsxs(Ef.Col,{span:2,children:[E.jsx(fbe,{rankings:a==="r1"?e.data.r1:e.data.r2}),E.jsx(bn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?E.jsx(M0e,{}):"Select this ranking"}),l&&r&&E.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),E.jsxs(Ef.Col,{span:2,children:[E.jsx(fbe,{rankings:a==="r1"?e.data.r2:e.data.r1}),E.jsx(bn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?E.jsx(M0e,{}):"Select this ranking"}),l&&r&&E.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&E.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const hLt=Object.freeze(Object.defineProperty({__proto__:null,default:dLt},Symbol.toStringTag,{value:"Module"})),pLt=N.createContext(null);function Hu(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let WN=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const U6={decode:function(e,t){return Hu(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function v8e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(v8e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function dbe(e,t,n){const r=v8e(e,t||{});return n==null||n.appendChild(r),r}var mLt=Object.freeze({__proto__:null,createElement:dbe,default:dbe});const gLt={fetchBlob:function(e,t,n){return Hu(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){Hu(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>Hu(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>Hu(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class yLt extends WN{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Hu(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let FK=class $K extends WN{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=_=>{if(_.preventDefault(),_.stopPropagation(),u&&Date.now()-m<a)return;const C=_.clientX,T=_.clientY,S=C-d,k=T-h;if(p||Math.abs(S)>s||Math.abs(k)>s){const I=t.getBoundingClientRect(),{left:R,top:F}=I;p||(r==null||r(d-R,h-F),p=!0),n(S,k,C-R,T-F),d=C,h=T}},y=_=>{if(p){const C=_.clientX,T=_.clientY,S=t.getBoundingClientRect(),{left:k,top:I}=S;i==null||i(C-k,T-I)}l()},v=_=>{_.relatedTarget&&_.relatedTarget!==document.documentElement||y(_)},b=_=>{p&&(_.stopPropagation(),_.preventDefault())},x=_=>{p&&_.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("click",b,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",x),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let x=0;x<=a;x++){const _=Math.round(x*m);if(_>y){const S=Math.round(v*c*i),k=S+Math.round(b*c*i)||1;let I=c-S;n.barAlign==="top"?I=0:n.barAlign==="bottom"&&(I=l-k),r[g](y*(d+h),I,d,k,p),y=_,v=0,b=0}const C=Math.abs(s[x]||0),T=Math.abs(o[x]||0);C>v&&(v=C),T>b&&(b=T)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min($K.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,v=Math.min(l-y,c);if(v<=0)return;const b=t.map(x=>{const _=Math.floor(y/l*x.length),C=Math.floor((y+v)/l*x.length);return x.slice(_,C)});this.renderSingleCanvas(b,n,v,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,v=Math.floor(y/l*h);Object.keys(f).length>$K.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(v-1),d(v),d(v+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return Hu(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return Hu(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};FK.MAX_CANVAS_WIDTH=8e3,FK.MAX_NODES=10;class vLt extends WN{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class hbe extends WN{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Hu(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Hu(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Hu(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const bLt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class lR extends yLt{static create(t){return new lR(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new hbe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},bLt,t),this.timer=new vLt;const r=n?void 0:this.getMediaElement();this.renderer=new FK(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=U6.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=U6.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return Hu(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield gLt.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof hbe&&(a.duration=o)}if(r)this.decodedData=U6.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield U6.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return Hu(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return Hu(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return Hu(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Hu(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}lR.BasePlugin=class extends WN{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},lR.dom=mLt;function xLt(e){return lR.create(e)}function wLt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const pbe=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),_Lt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:pbe(i),enabled:pbe(s)}};function mbe(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=wLt(i)}return n}function ELt({container:e,plugins:t=[],onMount:n,...r}){const i=N.useRef(!1),[s,o]=N.useState({}),a=N.useRef([]),[u,l]=N.useState(null);return N.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=mbe(s,t);a.current=Object.keys(f);const d=xLt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),N.useEffect(()=>{if(u){const c=mbe(s,t),{disabled:f,enabled:d}=_Lt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function b8e({children:e,plugins:t=[],onMount:n,...r}){const i=ELt({plugins:t,onMount:n,...r});return vi.createElement(pLt.Provider,{value:i},e)}const x8e=({id:e="waveform",children:t})=>vi.createElement("div",{id:e},t);function $H(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let w8e=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},CLt=class extends w8e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class TLt extends w8e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const ALt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class vie extends CLt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new TLt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new vie(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return $H(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return $H(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||ALt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return $H(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function _8e({width:e=70,height:t=36}){const n=N.useRef(null),r=N.useRef(null),[i,s]=N.useState(!1);N.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(vie.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=N.useCallback(a=>{n.current=a,s(!0)},[]);return E.jsx(Fe,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:E.jsx(b8e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:E.jsx(x8e,{id:"waveform",height:t})})})}function gbe({setAnswer:e}){return N.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),E.jsx(ga,{style:{height:"70%",width:"100%"},children:E.jsxs(os,{children:[E.jsx(Ye,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),E.jsx(Ye,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),E.jsx(Ye,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),E.jsx(ga,{children:E.jsx(_8e,{height:200,width:400})})]})})}const SLt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:gbe,default:gbe},Symbol.toStringTag,{value:"Module"}));function DLt(){return E.jsx("div",{children:"test react file"})}const ILt=Object.freeze(Object.defineProperty({__proto__:null,default:DLt},Symbol.toStringTag,{value:"Module"}));function kLt({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=N.useRef(null),o=10,a=N.useCallback(u=>{const l=Tr("#Circle"),c=Tr("#click_svg"),f=o8(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return E.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:E.jsx("svg",{id:"click_svg",width:400,height:400,children:E.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const RLt=Object.freeze(Object.defineProperty({__proto__:null,default:kLt},Symbol.toStringTag,{value:"Module"}));function bie({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?kN("%B"):kb(".2s"))(c),[s]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:E.jsx(ga,{children:E.jsx(Mi,{gap:3,children:E.jsx(Ye,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?E.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>E.jsxs("g",{transform:`translate(${f}, ${n})`,children:[E.jsx("line",{y2:"6",stroke:"currentColor"}),o?E.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,E.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:E.jsx(ga,{children:E.jsx(ws,{withinPortal:!0,label:c,children:E.jsx(Ye,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const NLt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:bie},Symbol.toStringTag,{value:"Module"}));function E8e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ga,{children:E.jsx(Mi,{gap:3,children:E.jsx(Ye,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>E.jsxs("g",{transform:`translate(${n}, ${l})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),s?E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,E.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:E.jsx("foreignObject",{width:a,height:20,children:E.jsx(Mi,{style:{width:"100%",height:"100%"},justify:"right",children:E.jsx(Ye,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const PLt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:E8e},Symbol.toStringTag,{value:"Module"})),fd={top:15,left:100,right:50,bottom:50};function MK({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=kf(),o=N.useMemo(()=>s-fd.left-fd.right,[s]),a=N.useMemo(()=>i-fd.top-fd.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Nb(LB).domain(d)},[n,t.category]),l=N.useMemo(()=>e?Ua([fd.left,o+fd.left]).domain([0,Fg(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?QA([fd.top,a+fd.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:E.jsxs("g",{children:[E.jsx("rect",{x:fd.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-fd.left},h),E.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?E.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E.jsx(bie,{xScale:l,yRange:c.range(),vertPosition:a+fd.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?E.jsx(E8e,{yScale:c,horizontalPosition:fd.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):E.jsx(Zc,{})}const OLt=Object.freeze(Object.defineProperty({__proto__:null,Bar:MK,default:MK},Symbol.toStringTag,{value:"Module"}));function C8e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>kb(".2s"),[]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ga,{children:E.jsx(Mi,{gap:3,children:E.jsx(Ye,{size:"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>E.jsxs("g",{transform:`translate(${n}, ${a})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),E.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const FLt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:C8e},Symbol.toStringTag,{value:"Module"})),MH=15;function T8e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=Tr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<MH&&Math.abs(t(g[r.y])-p[1])<MH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),E.jsx("circle",{style:{cursor:l?"pointer":"default"},r:MH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const $Lt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:T8e},Symbol.toStringTag,{value:"Module"})),Rs={top:15,left:100,right:15,bottom:70};function LK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=kf(),[c]=kf(),[f]=kf(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-Rs.left-Rs.right,[l]),m=N.useMemo(()=>u-Rs.top-Rs.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Nb(LB).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:x}=N.useMemo(()=>{const I=s.map(U=>+U[i.x]).filter(U=>U!==null),[R,F]=F3(I),O=s.map(U=>+U[i.y]).filter(U=>U!==null),[B,H]=F3(O);return{xMin:R,xMax:F,yMin:B,yMax:H}},[s,i.x,i.y]),_=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?xne([Rs.left,p+Rs.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Ua([Rs.left,p+Rs.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),C=N.useMemo(()=>{const I=x-v;return m<=0?null:Ua([m+Rs.top,Rs.top]).domain([v-I/10,x+I/10]).nice()},[m,x,v]),T=N.useMemo(()=>{if(!_||!C)return()=>null;if(r==="Axis Selection"){const I=WNe().extent([[Rs.left,Rs.top+m-5],[Rs.left+p,Rs.top+m+5]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[F.selection[0],null],[F.selection[1],null]],_,C,F.mode)}),R=GNe().extent([[Rs.left-5,Rs.top],[Rs.left+5,Rs.top+m]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[null,F.selection[0]],[null,F.selection[1]]],_,C,F.mode)});return c.current&&f.current&&(Tr(f.current).call(R),Tr(c.current).call(I),t.hasBrush||(Tr(f.current).call(R.move,[C(x),C(v)]),Tr(c.current).call(I.move,[_(new Date("2015-01-02")),_(new Date("2015-12-31"))]),n([[_(new Date("2015-01-02")),C(x)],[_(new Date("2015-12-31")),C(v)]],_,C,"drag"))),()=>{Tr(f.current).call(R.move,[C(x),C(v)]),Tr(c.current).call(I.move,[_(new Date("2015-01-02")),_(new Date("2015-12-31"))]),n([[_(new Date("2015-01-02")),C(x)],[_(new Date("2015-12-31")),C(v)]],_,C,"clear")}}if(r==="Rectangular Selection"){const I=YNe().extent([[Rs.left,Rs.top],[Rs.left+p,Rs.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],_,C,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(Tr(a.current).call(I.move,null),e(null))});return Tr(a.current).call(I),()=>{Tr(a.current).call(I.move,null),n([[null,null],[null,null]],_,C,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[_(y),C(x)],[_(b),C(v)]],_,C,null),()=>n([[_(y),C(x)],[_(b),C(v)]],_,C,"clear")):r==="Paintbrush Selection"?()=>n([[_(y),C(x)],[_(b),C(v)]],_,C,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,_,x,v,C]),S=N.useMemo(()=>o.length===0?null:new Set(o),[o]),k=N.useMemo(()=>!_||!C?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const F=i.dataType==="date"?_(new Date(I[i.x])):_(I[i.x]);return E.jsx("circle",{opacity:S&&!S.has(I[i.ids])?.3:1,r:3,fill:S&&!S.has(I[i.ids])?"lightgray":g(I[i.category]),cx:F,cy:C(I[i.y])},R)}),[S,g,s,i.category,i.dataType,i.ids,i.x,i.y,_,C]);return N.useEffect(()=>{r==="Axis Selection"&&dNe(".handle").style("fill","darkgrey")},[t,r]),E.jsxs(os,{children:[E.jsxs(Mi,{children:[E.jsx(bn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?E.jsx(QL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),E.jsxs(Mi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[E.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_&&C?E.jsxs("g",{children:[E.jsx(C8e,{yScale:C,label:i.y,horizontalPosition:Rs.left,xRange:_.range()}),E.jsx(bie,{xScale:_,yRange:C.range(),isDate:i.dataType==="date",vertPosition:m+Rs.top,label:i.x,ticks:_.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:_(I)}))})]}):null,k,E.jsx("g",{id:"brushXRef",ref:c}),E.jsx("g",{id:"brushYRef",ref:f}),_&&C&&r==="Paintbrush Selection"?E.jsx(T8e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:_,yScale:C}):null]}),r==="Slider Selection"&&_&&C?E.jsxs(os,{style:{flexGrow:1},gap:50,children:[E.jsxs(os,{gap:0,children:[E.jsx(Ye,{children:i.x}),E.jsx(dT,{minRange:1,label:null,min:_.domain()[0],max:_.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[_(I[0]),t.y1],[_(I[1]),t.y2]],_,C,"drag")},style:{width:"300px"},marks:_.ticks(5).map(I=>({value:I,label:I})),value:[_.invert(t.x1),_.invert(t.x2)]})]}),E.jsxs(os,{gap:0,children:[E.jsx(Ye,{children:i.y}),E.jsx(dT,{minRange:1,label:null,min:C.domain()[0],max:C.domain()[1],onChange:I=>{n([[t.x1,C(I[1])],[t.x2,C(I[0])]],_,C,"drag")},style:{width:"300px"},marks:C.ticks(5).map(I=>({value:I,label:I})),value:[C.invert(t.y2),C.invert(t.y1)]})]})]}):null]})]})}const MLt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:LK,default:LK},Symbol.toStringTag,{value:"Module"}));function ybe({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{JNe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?u8e(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=Q_.create(),y=g.register("brush",(C,T)=>(C.all={brush:T},C)),v=g.register("brushMove",(C,T)=>(C.all={brush:T},C)),b=g.register("brushResize",(C,T)=>(C.all={brush:T},C)),x=g.register("brushClear",(C,T)=>(C.all={brush:T},C)),_=ON({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:x},trrack:_}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>Ah(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,v,b,x)=>{if(!y||!v)return;const _=y.invert(g[0][0]||i.x1),C=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),S=v.invert(g[0][1]||i.y1);let k=null;if(b==="clear")k=u;else if(x){const R=new Set(x);k=u.filter(PC(F=>R.has(F[e.ids])))}else e.brushType==="Axis Selection"?k=u.filter(PC(R=>new Date(R[e.x])>=new Date(_)&&new Date(R[e.x])<=new Date(C)&&R[e.y]>=T&&R[e.y]<=S)):k=u.filter(PC(R=>R[e.x]>=_&&R[e.x]<=C&&R[e.y]>=T&&R[e.y]<=S));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?k==null?void 0:k.array("id"):[]};s(I),b==="drag"||b==="handle"?d(b,I):b==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(k),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?E.jsxs(os,{gap:"xs",children:[E.jsx(LK,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),E.jsx(MK,{data:o,parameters:e,barsTable:p})]}):E.jsx(Zc,{})}const LLt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:ybe,default:ybe},Symbol.toStringTag,{value:"Module"})),BLt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),jLt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),A8e=N.createContext(null);function S8e({width:e,height:t,margin:n,xDomain:r,yDomain:i,children:s}){const o=N.useMemo(()=>{const a=Ua().domain(r).range([n.left,e-n.right]),u=Ua().domain(i).range([t-n.bottom,n.top]);return{xScale:a,yScale:u,width:e,height:t,margin:n}},[e,t,n,r,i]);return E.jsx(A8e.Provider,{value:o,children:s})}function Z_(){const e=N.useContext(A8e);if(!e)throw new Error("useScales must be used within a ScalesProvider");return e}const ULt=Object.freeze(Object.defineProperty({__proto__:null,ScalesProvider:S8e,useScales:Z_},Symbol.toStringTag,{value:"Module"}));function D8e({data:e,strokeColor:t="currentColor",strokeWidth:n=2}){const{xScale:r,yScale:i}=Z_();if(!(e!=null&&e.length)||!r||!i)return null;const s=UB().x(o=>r(o.x)).y(o=>i(o.y)).defined(o=>!Number.isNaN(o.x)&&!Number.isNaN(o.y));return E.jsx("path",{d:s(e)||"",fill:"none",stroke:t,strokeWidth:n,"data-source":"Line"})}const zLt=Object.freeze(Object.defineProperty({__proto__:null,Line:D8e},Symbol.toStringTag,{value:"Module"}));function I8e({position:e}){return e?E.jsx("circle",{cx:e.x,cy:e.y,r:10,fill:"#666",stroke:"none",opacity:.8,pointerEvents:"none"}):null}const VLt=Object.freeze(Object.defineProperty({__proto__:null,default:I8e},Symbol.toStringTag,{value:"Module"}));function k8e({point:e}){const{xScale:t,yScale:n}=Z_();return e?E.jsx("circle",{cx:t(e.x),cy:n(e.y),r:4,fill:"#ff0000",pointerEvents:"none","data-source":"ClickMarker"}):null}const HLt=Object.freeze(Object.defineProperty({__proto__:null,default:k8e},Symbol.toStringTag,{value:"Module"}));function R8e({point:e}){const{xScale:t,yScale:n}=Z_();if(!e)return null;const r=e.pixelX!==void 0?e.pixelX:t(e.x),i=e.pixelY!==void 0?e.pixelY:n(e.y);return E.jsx("circle",{cx:r,cy:i,r:5,fill:"#2563eb",stroke:"#ffffff",strokeWidth:1.5,opacity:.8,pointerEvents:"none","data-source":"NearestPointMarker"})}const qLt=Object.freeze(Object.defineProperty({__proto__:null,default:R8e},Symbol.toStringTag,{value:"Module"}));function N8e({xValue:e,yValue:t,tangentLine:n}){const{xScale:r,yScale:i,width:s,height:o,margin:a}=Z_(),u=()=>e==null?null:E.jsx("line",{x1:r(e),x2:r(e),y1:a.top,y2:o-a.bottom,stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-vertical"}),l=()=>t==null?null:E.jsx("line",{x1:a.left,x2:s-a.right,y1:i(t),y2:i(t),stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-horizontal"}),c=()=>{if(!n)return null;const f=(r.domain()[1]-r.domain()[0])*.2,d=n.point.x-f,h=n.point.y-f*n.slope,p=n.point.x+f,m=n.point.y+f*n.slope;return E.jsx("line",{x1:r(d),y1:i(h),x2:r(p),y2:i(m),stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-tangent"})};return E.jsxs("g",{children:[u(),l(),c()]})}const WLt=Object.freeze(Object.defineProperty({__proto__:null,default:N8e},Symbol.toStringTag,{value:"Module"}));function P8e({distributionData:e,showPDF:t=!0,isTraining:n=!1,strokeColor:r="#2563eb",strokeWidth:i=2,axisLabels:s,selectedPoint:o,nearestPoint:a,guidelines:u,cursor:l,children:c,onClick:f,onMouseMove:d,onMouseLeave:h}){const{xScale:p,yScale:m,width:g,height:y,margin:v}=Z_(),b=N.useRef(null),x=N.useRef(null),_=N.useMemo(()=>{if(!(e!=null&&e.xVals)||!(e!=null&&e.pdfVals)||!(e!=null&&e.cdfVals))return[];const T=t?e.pdfVals:e.cdfVals;return e.xVals.map((S,k)=>({x:S,y:T[k]}))},[e,t]);N.useEffect(()=>{!p||!m||!b.current||!x.current||(b.current&&Tr(b.current).call(Bte(p)).attr("transform",`translate(0,${y-v.bottom})`).selectAll("text").style("font-size","12px"),x.current&&Tr(x.current).call(jte(m)).attr("transform",`translate(${v.left},0)`).selectAll("text").style("font-size","12px"))},[p,m,v,y]);const C=N.useMemo(()=>s?E.jsxs(E.Fragment,{children:[s.x&&E.jsx("text",{x:g/2,y:y-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:s.x}),s.y&&E.jsx("text",{x:-y/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:s.y})]}):null,[s,g,y]);return E.jsx("svg",{width:g,height:y,style:{cursor:"none"},onClick:f,onMouseMove:d,onMouseLeave:h,children:E.jsxs("g",{children:[E.jsx(D8e,{data:_,strokeColor:r,strokeWidth:i}),E.jsx("g",{ref:b}),E.jsx("g",{ref:x}),C,l&&E.jsx(I8e,{position:{x:l.x,y:l.y}}),(l==null?void 0:l.isNearCurve)&&a&&E.jsx(R8e,{point:a}),o&&E.jsx(k8e,{point:o}),n&&u&&E.jsx(N8e,{xValue:u.x,yValue:u.y,tangentLine:u.tangentLine}),c]})})}const GLt=Object.freeze(Object.defineProperty({__proto__:null,default:P8e},Symbol.toStringTag,{value:"Module"}));var O8e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(on,function(){var n=function(r,i){var s=Array.prototype.concat,o=Array.prototype.slice,a=Object.prototype.toString;function u(v,b){var x=v>b?v:b;return r.pow(10,17-~~(r.log(x>0?x:-x)*r.LOG10E))}var l=Array.isArray||function(b){return a.call(b)==="[object Array]"};function c(v){return a.call(v)==="[object Function]"}function f(v){return typeof v=="number"?v-v===0:!1}function d(v){return s.apply([],v)}function h(){return new h._init(arguments)}h.fn=h.prototype,h._init=function(b){if(l(b[0]))if(l(b[0][0])){c(b[1])&&(b[0]=h.map(b[0],b[1]));for(var x=0;x<b[0].length;x++)this[x]=b[0][x];this.length=b[0].length}else this[0]=c(b[1])?h.map(b[0],b[1]):b[0],this.length=1;else if(f(b[0]))this[0]=h.seq.apply(null,b),this.length=1;else{if(b[0]instanceof h)return h(b[0].toArray());this[0]=[],this.length=1}return this},h._init.prototype=h.prototype,h._init.constructor=h,h.utils={calcRdx:u,isArray:l,isFunction:c,isNumber:f,toVector:d},h._random_fn=r.random,h.setRandom=function(b){if(typeof b!="function")throw new TypeError("fn is not a function");h._random_fn=b},h.extend=function(b){var x,_;if(arguments.length===1){for(_ in b)h[_]=b[_];return this}for(x=1;x<arguments.length;x++)for(_ in arguments[x])b[_]=arguments[x][_];return b},h.rows=function(b){return b.length||1},h.cols=function(b){return b[0].length||1},h.dimensions=function(b){return{rows:h.rows(b),cols:h.cols(b)}},h.row=function(b,x){return l(x)?x.map(function(_){return h.row(b,_)}):b[x]},h.rowa=function(b,x){return h.row(b,x)},h.col=function(b,x){if(l(x)){var _=h.arange(b.length).map(function(){return new Array(x.length)});return x.forEach(function(S,k){h.arange(b.length).forEach(function(I){_[I][k]=b[I][S]})}),_}for(var C=new Array(b.length),T=0;T<b.length;T++)C[T]=[b[T][x]];return C},h.cola=function(b,x){return h.col(b,x).map(function(_){return _[0]})},h.diag=function(b){for(var x=h.rows(b),_=new Array(x),C=0;C<x;C++)_[C]=[b[C][C]];return _},h.antidiag=function(b){for(var x=h.rows(b)-1,_=new Array(x),C=0;x>=0;x--,C++)_[C]=[b[C][x]];return _},h.transpose=function(b){var x=[],_,C,T,S,k;for(l(b[0])||(b=[b]),C=b.length,T=b[0].length,k=0;k<T;k++){for(_=new Array(C),S=0;S<C;S++)_[S]=b[S][k];x.push(_)}return x.length===1?x[0]:x},h.map=function(b,x,_){var C,T,S,k,I;for(l(b[0])||(b=[b]),T=b.length,S=b[0].length,k=_?b:new Array(T),C=0;C<T;C++)for(k[C]||(k[C]=new Array(S)),I=0;I<S;I++)k[C][I]=x(b[C][I],C,I);return k.length===1?k[0]:k},h.cumreduce=function(b,x,_){var C,T,S,k,I;for(l(b[0])||(b=[b]),T=b.length,S=b[0].length,k=_?b:new Array(T),C=0;C<T;C++)for(k[C]||(k[C]=new Array(S)),S>0&&(k[C][0]=b[C][0]),I=1;I<S;I++)k[C][I]=x(k[C][I-1],b[C][I]);return k.length===1?k[0]:k},h.alter=function(b,x){return h.map(b,x,!0)},h.create=function(b,x,_){var C=new Array(b),T,S;for(c(x)&&(_=x,x=b),T=0;T<b;T++)for(C[T]=new Array(x),S=0;S<x;S++)C[T][S]=_(T,S);return C};function p(){return 0}h.zeros=function(b,x){return f(x)||(x=b),h.create(b,x,p)};function m(){return 1}h.ones=function(b,x){return f(x)||(x=b),h.create(b,x,m)},h.rand=function(b,x){return f(x)||(x=b),h.create(b,x,h._random_fn)};function g(v,b){return v===b?1:0}h.identity=function(b,x){return f(x)||(x=b),h.create(b,x,g)},h.symmetric=function(b){var x=b.length,_,C;if(b.length!==b[0].length)return!1;for(_=0;_<x;_++)for(C=0;C<x;C++)if(b[C][_]!==b[_][C])return!1;return!0},h.clear=function(b){return h.alter(b,p)},h.seq=function(b,x,_,C){c(C)||(C=!1);var T=[],S=u(b,x),k=(x*S-b*S)/((_-1)*S),I=b,R;for(R=0;I<=x&&R<_;R++,I=(b*S+k*S*R)/S)T.push(C?C(I,R):I);return T},h.arange=function(b,x,_){var C=[],T;if(_=_||1,x===i&&(x=b,b=0),b===x||_===0)return[];if(b<x&&_<0)return[];if(b>x&&_>0)return[];if(_>0)for(T=b;T<x;T+=_)C.push(T);else for(T=b;T>x;T+=_)C.push(T);return C},h.slice=function(){function v(x,_,C,T){var S,k=[],I=x.length;if(_===i&&C===i&&T===i)return h.copy(x);if(_=_||0,C=C||x.length,_=_>=0?_:I+_,C=C>=0?C:I+C,T=T||1,_===C||T===0)return[];if(_<C&&T<0)return[];if(_>C&&T>0)return[];if(T>0)for(S=_;S<C;S+=T)k.push(x[S]);else for(S=_;S>C;S+=T)k.push(x[S]);return k}function b(x,_){var C,T;if(_=_||{},f(_.row)){if(f(_.col))return x[_.row][_.col];var S=h.rowa(x,_.row);return C=_.col||{},v(S,C.start,C.end,C.step)}if(f(_.col)){var k=h.cola(x,_.col);return T=_.row||{},v(k,T.start,T.end,T.step)}T=_.row||{},C=_.col||{};var I=v(x,T.start,T.end,T.step);return I.map(function(R){return v(R,C.start,C.end,C.step)})}return b}(),h.sliceAssign=function(b,x,_){var C,T;if(f(x.row)){if(f(x.col))return b[x.row][x.col]=_;x.col=x.col||{},x.col.start=x.col.start||0,x.col.end=x.col.end||b[0].length,x.col.step=x.col.step||1,C=h.arange(x.col.start,r.min(b.length,x.col.end),x.col.step);var S=x.row;return C.forEach(function(I,R){b[S][I]=_[R]}),b}if(f(x.col)){x.row=x.row||{},x.row.start=x.row.start||0,x.row.end=x.row.end||b.length,x.row.step=x.row.step||1,T=h.arange(x.row.start,r.min(b[0].length,x.row.end),x.row.step);var k=x.col;return T.forEach(function(I,R){b[I][k]=_[R]}),b}return _[0].length===i&&(_=[_]),x.row.start=x.row.start||0,x.row.end=x.row.end||b.length,x.row.step=x.row.step||1,x.col.start=x.col.start||0,x.col.end=x.col.end||b[0].length,x.col.step=x.col.step||1,T=h.arange(x.row.start,r.min(b.length,x.row.end),x.row.step),C=h.arange(x.col.start,r.min(b[0].length,x.col.end),x.col.step),T.forEach(function(I,R){C.forEach(function(F,O){b[I][F]=_[R][O]})}),b},h.diagonal=function(b){var x=h.zeros(b.length,b.length);return b.forEach(function(_,C){x[C][C]=_}),x},h.copy=function(b){return b.map(function(x){return f(x)?x:x.map(function(_){return _})})};var y=h.prototype;return y.length=0,y.push=Array.prototype.push,y.sort=Array.prototype.sort,y.splice=Array.prototype.splice,y.slice=Array.prototype.slice,y.toArray=function(){return this.length>1?o.call(this):o.call(this)[0]},y.map=function(b,x){return h(h.map(this,b,x))},y.cumreduce=function(b,x){return h(h.cumreduce(this,b,x))},y.alter=function(b){return h.alter(this,b),this},function(v){for(var b=0;b<v.length;b++)(function(x){y[x]=function(_){var C=this,T;return _?(setTimeout(function(){_.call(C,y[x].call(C))}),this):(T=h[x](this),l(T)?h(T):T)}})(v[b])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(v){for(var b=0;b<v.length;b++)(function(x){y[x]=function(_,C){var T=this;return C?(setTimeout(function(){C.call(T,y[x].call(T,_))}),this):h(h[x](this,_))}})(v[b])}("row col".split(" ")),function(v){for(var b=0;b<v.length;b++)(function(x){y[x]=function(){return h(h[x].apply(null,arguments))}})(v[b])}("create zeros ones rand identity".split(" ")),h}(Math);return function(r,i){var s=r.utils.isFunction;function o(l,c){return l-c}function a(l,c,f){return i.max(c,i.min(l,f))}r.sum=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d];return f},r.sumsqrd=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d]*c[d];return f},r.sumsqerr=function(c){for(var f=r.mean(c),d=0,h=c.length,p;--h>=0;)p=c[h]-f,d+=p*p;return d},r.sumrow=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d];return f},r.product=function(c){for(var f=1,d=c.length;--d>=0;)f*=c[d];return f},r.min=function(c){for(var f=c[0],d=0;++d<c.length;)c[d]<f&&(f=c[d]);return f},r.max=function(c){for(var f=c[0],d=0;++d<c.length;)c[d]>f&&(f=c[d]);return f},r.unique=function(c){for(var f={},d=[],h=0;h<c.length;h++)f[c[h]]||(f[c[h]]=!0,d.push(c[h]));return d},r.mean=function(c){return r.sum(c)/c.length},r.meansqerr=function(c){return r.sumsqerr(c)/c.length},r.geomean=function(c){var f=c.map(i.log),d=r.mean(f);return i.exp(d)},r.median=function(c){var f=c.length,d=c.slice().sort(o);return f&1?d[f/2|0]:(d[f/2-1]+d[f/2])/2},r.cumsum=function(c){return r.cumreduce(c,function(f,d){return f+d})},r.cumprod=function(c){return r.cumreduce(c,function(f,d){return f*d})},r.diff=function(c){var f=[],d=c.length,h;for(h=1;h<d;h++)f.push(c[h]-c[h-1]);return f},r.rank=function(l){var c,f=[],d={};for(c=0;c<l.length;c++){var h=l[c];d[h]?d[h]++:(d[h]=1,f.push(h))}var p=f.sort(o),m={},g=1;for(c=0;c<p.length;c++){var h=p[c],y=d[h],v=g,b=g+y-1,x=(v+b)/2;m[h]=x,g+=y}return l.map(function(_){return m[_]})},r.mode=function(c){var f=c.length,d=c.slice().sort(o),h=1,p=0,m=0,g=[],y;for(y=0;y<f;y++)d[y]===d[y+1]?h++:(h>p?(g=[d[y]],p=h,m=0):h===p&&(g.push(d[y]),m++),h=1);return m===0?g[0]:g},r.range=function(c){return r.max(c)-r.min(c)},r.variance=function(c,f){return r.sumsqerr(c)/(c.length-(f?1:0))},r.pooledvariance=function(c){var f=c.reduce(function(h,p){return h+r.sumsqerr(p)},0),d=c.reduce(function(h,p){return h+p.length},0);return f/(d-c.length)},r.deviation=function(l){for(var c=r.mean(l),f=l.length,d=new Array(f),h=0;h<f;h++)d[h]=l[h]-c;return d},r.stdev=function(c,f){return i.sqrt(r.variance(c,f))},r.pooledstdev=function(c){return i.sqrt(r.pooledvariance(c))},r.meandev=function(c){for(var f=r.mean(c),d=[],h=c.length-1;h>=0;h--)d.push(i.abs(c[h]-f));return r.mean(d)},r.meddev=function(c){for(var f=r.median(c),d=[],h=c.length-1;h>=0;h--)d.push(i.abs(c[h]-f));return r.median(d)},r.coeffvar=function(c){return r.stdev(c)/r.mean(c)},r.quartiles=function(c){var f=c.length,d=c.slice().sort(o);return[d[i.round(f/4)-1],d[i.round(f/2)-1],d[i.round(f*3/4)-1]]},r.quantiles=function(c,f,d,h){var p=c.slice().sort(o),m=[f.length],g=c.length,y,v,b,x,_,C;for(typeof d>"u"&&(d=3/8),typeof h>"u"&&(h=3/8),y=0;y<f.length;y++)v=f[y],b=d+v*(1-d-h),x=g*v+b,_=i.floor(a(x,1,g-1)),C=a(x-_,0,1),m[y]=(1-C)*p[_-1]+C*p[_];return m},r.percentile=function(c,f,d){var h=c.slice().sort(o),p=f*(h.length+(d?1:-1))+(d?0:1),m=parseInt(p),g=p-m;return m+1<h.length?h[m-1]+g*(h[m]-h[m-1]):h[m-1]},r.percentileOfScore=function(c,f,d){var h=0,p=c.length,m=!1,g,y;for(d==="strict"&&(m=!0),y=0;y<p;y++)g=c[y],(m&&g<f||!m&&g<=f)&&h++;return h/p},r.histogram=function(c,f){f=f||4;var d=r.min(c),h=(r.max(c)-d)/f,p=c.length,m=[],g;for(g=0;g<f;g++)m[g]=0;for(g=0;g<p;g++)m[i.min(i.floor((c[g]-d)/h),f-1)]+=1;return m},r.covariance=function(c,f){var d=r.mean(c),h=r.mean(f),p=c.length,m=new Array(p),g;for(g=0;g<p;g++)m[g]=(c[g]-d)*(f[g]-h);return r.sum(m)/(p-1)},r.corrcoeff=function(c,f){return r.covariance(c,f)/r.stdev(c,1)/r.stdev(f,1)},r.spearmancoeff=function(l,c){return l=r.rank(l),c=r.rank(c),r.corrcoeff(l,c)},r.stanMoment=function(c,f){for(var d=r.mean(c),h=r.stdev(c),p=c.length,m=0,g=0;g<p;g++)m+=i.pow((c[g]-d)/h,f);return m/c.length},r.skewness=function(c){return r.stanMoment(c,3)},r.kurtosis=function(c){return r.stanMoment(c,4)-3};var u=r.prototype;(function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(d,h){var p=[],m=0,g=this;if(s(d)&&(h=d,d=!1),h)return setTimeout(function(){h.call(g,u[f].call(g,d))}),this;if(this.length>1){for(g=d===!0?this:this.transpose();m<g.length;m++)p[m]=r[f](g[m]);return p}return r[f](this[0],d)}})(l[c])})("cumsum cumprod".split(" ")),function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(d,h){var p=[],m=0,g=this;if(s(d)&&(h=d,d=!1),h)return setTimeout(function(){h.call(g,u[f].call(g,d))}),this;if(this.length>1){for(f!=="sumrow"&&(g=d===!0?this:this.transpose());m<g.length;m++)p[m]=r[f](g[m]);return d===!0?r[f](r.utils.toVector(p)):p}return r[f](this[0],d)}})(l[c])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(){var d=[],h=0,p=this,m=Array.prototype.slice.call(arguments),g;if(s(m[m.length-1])){g=m[m.length-1];var y=m.slice(0,m.length-1);return setTimeout(function(){g.call(p,u[f].apply(p,y))}),this}else{g=void 0;var v=function(x){return r[f].apply(p,[x].concat(m))}}if(this.length>1){for(p=p.transpose();h<p.length;h++)d[h]=v(p[h]);return d}return v(this[0])}})(l[c])}("quantiles percentileOfScore".split(" "))}(n,Math),function(r,i){r.gammaln=function(o){var a=0,u=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],l=1.000000000190015,c,f,d;for(d=(f=c=o)+5.5,d-=(c+.5)*i.log(d);a<6;a++)l+=u[a]/++f;return i.log(2.5066282746310007*l/c)-d},r.loggam=function(o){var a,u,l,c,f,d,h,p=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(a=o,h=0,o==1||o==2)return 0;for(o<=7&&(h=i.floor(7-o),a=o+h),u=1/(a*a),l=2*i.PI,f=p[9],d=8;d>=0;d--)f*=u,f+=p[d];if(c=f/a+.5*i.log(l)+(a-.5)*i.log(a)-a,o<=7)for(d=1;d<=h;d++)c-=i.log(a-1),a-=1;return c},r.gammafn=function(o){var a=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],u=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],l=!1,c=0,f=0,d=0,h=o,p,m,g,y;if(o>171.6243769536076)return 1/0;if(h<=0)if(y=h%1+36e-17,y)l=(h&1?-1:1)*i.PI/i.sin(i.PI*y),h=1-h;else return 1/0;for(g=h,h<1?m=h++:m=(h-=c=(h|0)-1)-1,p=0;p<8;++p)d=(d+a[p])*m,f=f*m+u[p];if(y=d/f+1,g<h)y/=g;else if(g>h)for(p=0;p<c;++p)y*=h,h++;return l&&(y=l/y),y},r.gammap=function(o,a){return r.lowRegGamma(o,a)*r.gammafn(o)},r.lowRegGamma=function(o,a){var u=r.gammaln(o),l=o,c=1/o,f=c,d=a+1-o,h=1/1e-30,p=1/d,m=p,g=1,y=-~(i.log(o>=1?o:1/o)*8.5+o*.4+17),v;if(a<0||o<=0)return NaN;if(a<o+1){for(;g<=y;g++)c+=f*=a/++l;return c*i.exp(-a+o*i.log(a)-u)}for(;g<=y;g++)v=-g*(g-o),d+=2,p=v*p+d,h=d+v/h,p=1/p,m*=p*h;return 1-m*i.exp(-a+o*i.log(a)-u)},r.factorialln=function(o){return o<0?NaN:r.gammaln(o+1)},r.factorial=function(o){return o<0?NaN:r.gammafn(o+1)},r.combination=function(o,a){return o>170||a>170?i.exp(r.combinationln(o,a)):r.factorial(o)/r.factorial(a)/r.factorial(o-a)},r.combinationln=function(o,a){return r.factorialln(o)-r.factorialln(a)-r.factorialln(o-a)},r.permutation=function(o,a){return r.factorial(o)/r.factorial(o-a)},r.betafn=function(o,a){if(!(o<=0||a<=0))return o+a>170?i.exp(r.betaln(o,a)):r.gammafn(o)*r.gammafn(a)/r.gammafn(o+a)},r.betaln=function(o,a){return r.gammaln(o)+r.gammaln(a)-r.gammaln(o+a)},r.betacf=function(o,a,u){var l=1e-30,c=1,f=a+u,d=a+1,h=a-1,p=1,m=1-f*o/d,g,y,v,b;for(i.abs(m)<l&&(m=l),m=1/m,b=m;c<=100&&(g=2*c,y=c*(u-c)*o/((h+g)*(a+g)),m=1+y*m,i.abs(m)<l&&(m=l),p=1+y/p,i.abs(p)<l&&(p=l),m=1/m,b*=m*p,y=-(a+c)*(f+c)*o/((a+g)*(d+g)),m=1+y*m,i.abs(m)<l&&(m=l),p=1+y/p,i.abs(p)<l&&(p=l),m=1/m,v=m*p,b*=v,!(i.abs(v-1)<3e-7));c++);return b},r.gammapinv=function(o,a){var u=0,l=a-1,c=1e-8,f=r.gammaln(a),d,h,p,m,g,y,v;if(o>=1)return i.max(100,a+100*i.sqrt(a));if(o<=0)return 0;for(a>1?(y=i.log(l),v=i.exp(l*(y-1)-f),g=o<.5?o:1-o,p=i.sqrt(-2*i.log(g)),d=(2.30753+p*.27061)/(1+p*(.99229+p*.04481))-p,o<.5&&(d=-d),d=i.max(.001,a*i.pow(1-1/(9*a)-d/(3*i.sqrt(a)),3))):(p=1-a*(.253+a*.12),o<p?d=i.pow(o/p,1/a):d=1-i.log(1-(o-p)/(1-p)));u<12;u++){if(d<=0)return 0;if(h=r.lowRegGamma(a,d)-o,a>1?p=v*i.exp(-(d-l)+l*(i.log(d)-y)):p=i.exp(-d+l*i.log(d)-f),m=h/p,d-=p=m/(1-.5*i.min(1,m*((a-1)/d-1))),d<=0&&(d=.5*(d+p)),i.abs(p)<c*d)break}return d},r.erf=function(o){var a=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],u=a.length-1,l=!1,c=0,f=0,d,h,p,m;for(o<0&&(o=-o,l=!0),d=2/(2+o),h=4*d-2;u>0;u--)p=c,c=h*c-f+a[u],f=p;return m=d*i.exp(-o*o+.5*(a[0]+h*c)-f),l?m-1:1-m},r.erfc=function(o){return 1-r.erf(o)},r.erfcinv=function(o){var a=0,u,l,c,f;if(o>=2)return-100;if(o<=0)return 100;for(f=o<1?o:2-o,c=i.sqrt(-2*i.log(f/2)),u=-.70711*((2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c);a<2;a++)l=r.erfc(u)-f,u+=l/(1.1283791670955126*i.exp(-u*u)-u*l);return o<1?u:-u},r.ibetainv=function(o,a,u){var l=1e-8,c=a-1,f=u-1,d=0,h,p,m,g,y,v,b,x,_,C,T;if(o<=0)return 0;if(o>=1)return 1;for(a>=1&&u>=1?(m=o<.5?o:1-o,g=i.sqrt(-2*i.log(m)),b=(2.30753+g*.27061)/(1+g*(.99229+g*.04481))-g,o<.5&&(b=-b),x=(b*b-3)/6,_=2/(1/(2*a-1)+1/(2*u-1)),C=b*i.sqrt(x+_)/_-(1/(2*u-1)-1/(2*a-1))*(x+5/6-2/(3*_)),b=a/(a+u*i.exp(2*C))):(h=i.log(a/(a+u)),p=i.log(u/(a+u)),g=i.exp(a*h)/a,y=i.exp(u*p)/u,C=g+y,o<g/C?b=i.pow(a*C*o,1/a):b=1-i.pow(u*C*(1-o),1/u)),T=-r.gammaln(a)-r.gammaln(u)+r.gammaln(a+u);d<10;d++){if(b===0||b===1)return b;if(v=r.ibeta(b,a,u)-o,g=i.exp(c*i.log(b)+f*i.log(1-b)+T),y=v/g,b-=g=y/(1-.5*i.min(1,y*(c/b-f/(1-b)))),b<=0&&(b=.5*(b+g)),b>=1&&(b=.5*(b+g+1)),i.abs(g)<l*b&&d>0)break}return b},r.ibeta=function(o,a,u){var l=o===0||o===1?0:i.exp(r.gammaln(a+u)-r.gammaln(a)-r.gammaln(u)+a*i.log(o)+u*i.log(1-o));return o<0||o>1?!1:o<(a+1)/(a+u+2)?l*r.betacf(o,a,u)/a:1-l*r.betacf(1-o,u,a)/u},r.randn=function(o,a){var u,l,c,f,d;if(a||(a=o),o)return r.create(o,a,function(){return r.randn()});do u=r._random_fn(),l=1.7156*(r._random_fn()-.5),c=u-.449871,f=i.abs(l)+.386595,d=c*c+f*(.196*f-.25472*c);while(d>.27597&&(d>.27846||l*l>-4*i.log(u)*u*u));return l/u},r.randg=function(o,a,u){var l=o,c,f,d,h,p,m;if(u||(u=a),o||(o=1),a)return m=r.zeros(a,u),m.alter(function(){return r.randg(o)}),m;o<1&&(o+=1),c=o-1/3,f=1/i.sqrt(9*c);do{do p=r.randn(),h=1+f*p;while(h<=0);h=h*h*h,d=r._random_fn()}while(d>1-.331*i.pow(p,4)&&i.log(d)>.5*p*p+c*(1-h+i.log(h)));if(o==l)return c*h;do d=r._random_fn();while(d===0);return i.pow(d,1/l)*c*h},function(s){for(var o=0;o<s.length;o++)(function(a){r.fn[a]=function(){return r(r.map(this,function(u){return r[a](u)}))}})(s[o])}("gammaln gammafn factorial factorialln".split(" ")),function(s){for(var o=0;o<s.length;o++)(function(a){r.fn[a]=function(){return r(r[a].apply(null,arguments))}})(s[o])}("randn".split(" "))}(n,Math),function(r,i){(function(l){for(var c=0;c<l.length;c++)(function(f){r[f]=function d(h,p,m){return this instanceof d?(this._a=h,this._b=p,this._c=m,this):new d(h,p,m)},r.fn[f]=function(d,h,p){var m=r[f](d,h,p);return m.data=this,m},r[f].prototype.sample=function(d){var h=this._a,p=this._b,m=this._c;return d?r.alter(d,function(){return r[f].sample(h,p,m)}):r[f].sample(h,p,m)},function(d){for(var h=0;h<d.length;h++)(function(p){r[f].prototype[p]=function(m){var g=this._a,y=this._b,v=this._c;return!m&&m!==0&&(m=this.data),typeof m!="number"?r.fn.map.call(m,function(b){return r[f][p](b,g,y,v)}):r[f][p](m,g,y,v)}})(d[h])}("pdf cdf inv".split(" ")),function(d){for(var h=0;h<d.length;h++)(function(p){r[f].prototype[p]=function(){return r[f][p](this._a,this._b,this._c)}})(d[h])}("mean median mode variance".split(" "))})(l[c])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),r.extend(r.beta,{pdf:function(c,f,d){return c>1||c<0?0:f==1&&d==1?1:f<512&&d<512?i.pow(c,f-1)*i.pow(1-c,d-1)/r.betafn(f,d):i.exp((f-1)*i.log(c)+(d-1)*i.log(1-c)-r.betaln(f,d))},cdf:function(c,f,d){return c>1||c<0?(c>1)*1:r.ibeta(c,f,d)},inv:function(c,f,d){return r.ibetainv(c,f,d)},mean:function(c,f){return c/(c+f)},median:function(c,f){return r.ibetainv(.5,c,f)},mode:function(c,f){return(c-1)/(c+f-2)},sample:function(c,f){var d=r.randg(c);return d/(d+r.randg(f))},variance:function(c,f){return c*f/(i.pow(c+f,2)*(c+f+1))}}),r.extend(r.centralF,{pdf:function(c,f,d){var h,p,m;return c<0?0:f<=2?c===0&&f<2?1/0:c===0&&f===2?1:1/r.betafn(f/2,d/2)*i.pow(f/d,f/2)*i.pow(c,f/2-1)*i.pow(1+f/d*c,-(f+d)/2):(h=f*c/(d+c*f),p=d/(d+c*f),m=f*p/2,m*r.binomial.pdf((f-2)/2,(f+d-2)/2,h))},cdf:function(c,f,d){return c<0?0:r.ibeta(f*c/(f*c+d),f/2,d/2)},inv:function(c,f,d){return d/(f*(1/r.ibetainv(c,f/2,d/2)-1))},mean:function(c,f){return f>2?f/(f-2):void 0},mode:function(c,f){return c>2?f*(c-2)/(c*(f+2)):void 0},sample:function(c,f){var d=r.randg(c/2)*2,h=r.randg(f/2)*2;return d/c/(h/f)},variance:function(c,f){if(!(f<=4))return 2*f*f*(c+f-2)/(c*(f-2)*(f-2)*(f-4))}}),r.extend(r.cauchy,{pdf:function(c,f,d){return d<0?0:d/(i.pow(c-f,2)+i.pow(d,2))/i.PI},cdf:function(c,f,d){return i.atan((c-f)/d)/i.PI+.5},inv:function(l,c,f){return c+f*i.tan(i.PI*(l-.5))},median:function(c){return c},mode:function(c){return c},sample:function(c,f){return r.randn()*i.sqrt(1/(2*r.randg(.5)))*f+c}}),r.extend(r.chisquare,{pdf:function(c,f){return c<0?0:c===0&&f===2?.5:i.exp((f/2-1)*i.log(c)-c/2-f/2*i.log(2)-r.gammaln(f/2))},cdf:function(c,f){return c<0?0:r.lowRegGamma(f/2,c/2)},inv:function(l,c){return 2*r.gammapinv(l,.5*c)},mean:function(l){return l},median:function(c){return c*i.pow(1-2/(9*c),3)},mode:function(c){return c-2>0?c-2:0},sample:function(c){return r.randg(c/2)*2},variance:function(c){return 2*c}}),r.extend(r.exponential,{pdf:function(c,f){return c<0?0:f*i.exp(-f*c)},cdf:function(c,f){return c<0?0:1-i.exp(-f*c)},inv:function(l,c){return-i.log(1-l)/c},mean:function(l){return 1/l},median:function(l){return 1/l*i.log(2)},mode:function(){return 0},sample:function(c){return-1/c*i.log(r._random_fn())},variance:function(l){return i.pow(l,-2)}}),r.extend(r.gamma,{pdf:function(c,f,d){return c<0?0:c===0&&f===1?1/d:i.exp((f-1)*i.log(c)-c/d-r.gammaln(f)-f*i.log(d))},cdf:function(c,f,d){return c<0?0:r.lowRegGamma(f,c/d)},inv:function(l,c,f){return r.gammapinv(l,c)*f},mean:function(l,c){return l*c},mode:function(c,f){if(c>1)return(c-1)*f},sample:function(c,f){return r.randg(c)*f},variance:function(c,f){return c*f*f}}),r.extend(r.invgamma,{pdf:function(c,f,d){return c<=0?0:i.exp(-(f+1)*i.log(c)-d/c-r.gammaln(f)+f*i.log(d))},cdf:function(c,f,d){return c<=0?0:1-r.lowRegGamma(f,d/c)},inv:function(l,c,f){return f/r.gammapinv(1-l,c)},mean:function(l,c){return l>1?c/(l-1):void 0},mode:function(c,f){return f/(c+1)},sample:function(c,f){return f/r.randg(c)},variance:function(c,f){if(!(c<=2))return f*f/((c-1)*(c-1)*(c-2))}}),r.extend(r.kumaraswamy,{pdf:function(c,f,d){return c===0&&f===1?d:c===1&&d===1?f:i.exp(i.log(f)+i.log(d)+(f-1)*i.log(c)+(d-1)*i.log(1-i.pow(c,f)))},cdf:function(c,f,d){return c<0?0:c>1?1:1-i.pow(1-i.pow(c,f),d)},inv:function(c,f,d){return i.pow(1-i.pow(1-c,1/d),1/f)},mean:function(l,c){return c*r.gammafn(1+1/l)*r.gammafn(c)/r.gammafn(1+1/l+c)},median:function(c,f){return i.pow(1-i.pow(2,-1/f),1/c)},mode:function(c,f){if(c>=1&&f>=1&&c!==1&&f!==1)return i.pow((c-1)/(c*f-1),1/c)},variance:function(){throw new Error("variance not yet implemented")}}),r.extend(r.lognormal,{pdf:function(c,f,d){return c<=0?0:i.exp(-i.log(c)-.5*i.log(2*i.PI)-i.log(d)-i.pow(i.log(c)-f,2)/(2*d*d))},cdf:function(c,f,d){return c<0?0:.5+.5*r.erf((i.log(c)-f)/i.sqrt(2*d*d))},inv:function(l,c,f){return i.exp(-1.4142135623730951*f*r.erfcinv(2*l)+c)},mean:function(c,f){return i.exp(c+f*f/2)},median:function(c){return i.exp(c)},mode:function(c,f){return i.exp(c-f*f)},sample:function(c,f){return i.exp(r.randn()*f+c)},variance:function(c,f){return(i.exp(f*f)-1)*i.exp(2*c+f*f)}}),r.extend(r.noncentralt,{pdf:function(c,f,d){var h=1e-14;return i.abs(d)<h?r.studentt.pdf(c,f):i.abs(c)<h?i.exp(r.gammaln((f+1)/2)-d*d/2-.5*i.log(i.PI*f)-r.gammaln(f/2)):f/c*(r.noncentralt.cdf(c*i.sqrt(1+2/f),f+2,d)-r.noncentralt.cdf(c,f,d))},cdf:function(c,f,d){var h=1e-14,p=200;if(i.abs(d)<h)return r.studentt.cdf(c,f);var m=!1;c<0&&(m=!0,d=-d);for(var g=r.normal.cdf(-d,0,1),y=h+1,v=y,b=c*c/(c*c+f),x=0,_=i.exp(-d*d/2),C=i.exp(-d*d/2-.5*i.log(2)-r.gammaln(3/2))*d;x<p||v>h||y>h;)v=y,x>0&&(_*=d*d/(2*x),C*=d*d/(2*(x+1/2))),y=_*r.beta.cdf(b,x+.5,f/2)+C*r.beta.cdf(b,x+1,f/2),g+=.5*y,x++;return m?1-g:g}}),r.extend(r.normal,{pdf:function(c,f,d){return i.exp(-.5*i.log(2*i.PI)-i.log(d)-i.pow(c-f,2)/(2*d*d))},cdf:function(c,f,d){return .5*(1+r.erf((c-f)/i.sqrt(2*d*d)))},inv:function(l,c,f){return-1.4142135623730951*f*r.erfcinv(2*l)+c},mean:function(l){return l},median:function(c){return c},mode:function(l){return l},sample:function(c,f){return r.randn()*f+c},variance:function(l,c){return c*c}}),r.extend(r.pareto,{pdf:function(c,f,d){return c<f?0:d*i.pow(f,d)/i.pow(c,d+1)},cdf:function(c,f,d){return c<f?0:1-i.pow(f/c,d)},inv:function(c,f,d){return f/i.pow(1-c,1/d)},mean:function(c,f){if(!(f<=1))return f*i.pow(c,f)/(f-1)},median:function(c,f){return c*(f*i.SQRT2)},mode:function(c){return c},variance:function(l,c){if(!(c<=2))return l*l*c/(i.pow(c-1,2)*(c-2))}}),r.extend(r.studentt,{pdf:function(c,f){return f=f>1e100?1e100:f,1/(i.sqrt(f)*r.betafn(.5,f/2))*i.pow(1+c*c/f,-((f+1)/2))},cdf:function(c,f){var d=f/2;return r.ibeta((c+i.sqrt(c*c+f))/(2*i.sqrt(c*c+f)),d,d)},inv:function(l,c){var f=r.ibetainv(2*i.min(l,1-l),.5*c,.5);return f=i.sqrt(c*(1-f)/f),l>.5?f:-f},mean:function(c){return c>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(c){return r.randn()*i.sqrt(c/(2*r.randg(c/2)))},variance:function(c){return c>2?c/(c-2):c>1?1/0:void 0}}),r.extend(r.weibull,{pdf:function(c,f,d){return c<0||f<0||d<0?0:d/f*i.pow(c/f,d-1)*i.exp(-i.pow(c/f,d))},cdf:function(c,f,d){return c<0?0:1-i.exp(-i.pow(c/f,d))},inv:function(l,c,f){return c*i.pow(-i.log(1-l),1/f)},mean:function(l,c){return l*r.gammafn(1+1/c)},median:function(c,f){return c*i.pow(i.log(2),1/f)},mode:function(c,f){return f<=1?0:c*i.pow((f-1)/f,1/f)},sample:function(c,f){return c*i.pow(-i.log(r._random_fn()),1/f)},variance:function(c,f){return c*c*r.gammafn(1+2/f)-i.pow(r.weibull.mean(c,f),2)}}),r.extend(r.uniform,{pdf:function(c,f,d){return c<f||c>d?0:1/(d-f)},cdf:function(c,f,d){return c<f?0:c<d?(c-f)/(d-f):1},inv:function(l,c,f){return c+l*(f-c)},mean:function(c,f){return .5*(c+f)},median:function(c,f){return r.mean(c,f)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(c,f){return c/2+f/2+(f/2-c/2)*(2*r._random_fn()-1)},variance:function(c,f){return i.pow(f-c,2)/12}});function s(l,c,f,d){for(var h=0,p=1,m=1,g=1,y=0,v=0,b;i.abs((m-v)/m)>d;)v=m,b=-(c+y)*(c+f+y)*l/(c+2*y)/(c+2*y+1),h=m+b*h,p=g+b*p,y=y+1,b=y*(f-y)*l/(c+2*y-1)/(c+2*y),m=h+b*m,g=p+b*g,h=h/g,p=p/g,m=m/g,g=1;return m/c}r.extend(r.binomial,{pdf:function(c,f,d){return d===0||d===1?f*d===c?1:0:r.combination(f,c)*i.pow(d,c)*i.pow(1-d,f-c)},cdf:function(c,f,d){var h,p=1e-10;if(c<0)return 0;if(c>=f)return 1;if(d<0||d>1||f<=0)return NaN;c=i.floor(c);var m=d,g=c+1,y=f-c,v=g+y,b=i.exp(r.gammaln(v)-r.gammaln(y)-r.gammaln(g)+g*i.log(m)+y*i.log(1-m));return m<(g+1)/(v+2)?h=b*s(m,g,y,p):h=1-b*s(1-m,y,g,p),i.round((1-h)*(1/p))/(1/p)}}),r.extend(r.negbin,{pdf:function(c,f,d){return c!==c>>>0?!1:c<0?0:r.combination(c+f-1,f-1)*i.pow(1-d,c)*i.pow(d,f)},cdf:function(c,f,d){var h=0,p=0;if(c<0)return 0;for(;p<=c;p++)h+=r.negbin.pdf(p,f,d);return h}}),r.extend(r.hypgeom,{pdf:function(c,f,d,h){if(c!==c|0)return!1;if(c<0||c<d-(f-h))return 0;if(c>h||c>d)return 0;if(d*2>f)return h*2>f?r.hypgeom.pdf(f-d-h+c,f,f-d,f-h):r.hypgeom.pdf(h-c,f,f-d,h);if(h*2>f)return r.hypgeom.pdf(d-c,f,d,f-h);if(d<h)return r.hypgeom.pdf(c,f,h,d);for(var p=1,m=0,g=0;g<c;g++){for(;p>1&&m<h;)p*=1-d/(f-m),m++;p*=(h-g)*(d-g)/((g+1)*(f-d-h+g+1))}for(;m<h;m++)p*=1-d/(f-m);return i.min(1,i.max(0,p))},cdf:function(c,f,d,h){if(c<0||c<d-(f-h))return 0;if(c>=h||c>=d)return 1;if(d*2>f)return h*2>f?r.hypgeom.cdf(f-d-h+c,f,f-d,f-h):1-r.hypgeom.cdf(h-c-1,f,f-d,h);if(h*2>f)return 1-r.hypgeom.cdf(d-c-1,f,d,f-h);if(d<h)return r.hypgeom.cdf(c,f,h,d);for(var p=1,m=1,g=0,y=0;y<c;y++){for(;p>1&&g<h;){var v=1-d/(f-g);m*=v,p*=v,g++}m*=(h-y)*(d-y)/((y+1)*(f-d-h+y+1)),p+=m}for(;g<h;g++)p*=1-d/(f-g);return i.min(1,i.max(0,p))}}),r.extend(r.poisson,{pdf:function(c,f){return f<0||c%1!==0||c<0?0:i.pow(f,c)*i.exp(-f)/r.factorial(c)},cdf:function(c,f){var d=[],h=0;if(c<0)return 0;for(;h<=c;h++)d.push(r.poisson.pdf(h,f));return r.sum(d)},mean:function(l){return l},variance:function(l){return l},sampleSmall:function(c){var f=1,d=0,h=i.exp(-c);do d++,f*=r._random_fn();while(f>h);return d-1},sampleLarge:function(c){var f=c,d,h,p,m,g,y,v,b,x,_;for(m=i.sqrt(f),g=i.log(f),v=.931+2.53*m,y=-.059+.02483*v,b=1.1239+1.1328/(v-3.4),x=.9277-3.6224/(v-2);;){if(h=i.random()-.5,p=i.random(),_=.5-i.abs(h),d=i.floor((2*y/_+v)*h+f+.43),_>=.07&&p<=x)return d;if(!(d<0||_<.013&&p>_)&&i.log(p)+i.log(b)-i.log(y/(_*_)+v)<=-f+d*g-r.loggam(d+1))return d}},sample:function(c){return c<10?this.sampleSmall(c):this.sampleLarge(c)}}),r.extend(r.triangular,{pdf:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<f||c>d?0:c<h?2*(c-f)/((d-f)*(h-f)):c===h?2/(d-f):2*(d-c)/((d-f)*(d-h))},cdf:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<=f?0:c>=d?1:c<=h?i.pow(c-f,2)/((d-f)*(h-f)):1-i.pow(d-c,2)/((d-f)*(d-h))},inv:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<=(h-f)/(d-f)?f+(d-f)*i.sqrt(c*((h-f)/(d-f))):f+(d-f)*(1-i.sqrt((1-c)*(1-(h-f)/(d-f))))},mean:function(c,f,d){return(c+f+d)/3},median:function(c,f,d){if(d<=(c+f)/2)return f-i.sqrt((f-c)*(f-d))/i.sqrt(2);if(d>(c+f)/2)return c+i.sqrt((f-c)*(d-c))/i.sqrt(2)},mode:function(c,f,d){return d},sample:function(c,f,d){var h=r._random_fn();return h<(d-c)/(f-c)?c+i.sqrt(h*(f-c)*(d-c)):f-i.sqrt((1-h)*(f-c)*(f-d))},variance:function(c,f,d){return(c*c+f*f+d*d-c*f-c*d-f*d)/18}}),r.extend(r.arcsine,{pdf:function(c,f,d){return d<=f?NaN:c<=f||c>=d?0:2/i.PI*i.pow(i.pow(d-f,2)-i.pow(2*c-f-d,2),-.5)},cdf:function(c,f,d){return c<f?0:c<d?2/i.PI*i.asin(i.sqrt((c-f)/(d-f))):1},inv:function(l,c,f){return c+(.5-.5*i.cos(i.PI*l))*(f-c)},mean:function(c,f){return f<=c?NaN:(c+f)/2},median:function(c,f){return f<=c?NaN:(c+f)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(c,f){return(c+f)/2+(f-c)/2*i.sin(2*i.PI*r.uniform.sample(0,1))},variance:function(c,f){return f<=c?NaN:i.pow(f-c,2)/8}});function o(l){return l/i.abs(l)}r.extend(r.laplace,{pdf:function(c,f,d){return d<=0?0:i.exp(-i.abs(c-f)/d)/(2*d)},cdf:function(c,f,d){return d<=0?0:c<f?.5*i.exp((c-f)/d):1-.5*i.exp(-(c-f)/d)},mean:function(l){return l},median:function(l){return l},mode:function(l){return l},variance:function(l,c){return 2*c*c},sample:function(c,f){var d=r._random_fn()-.5;return c-f*o(d)*i.log(1-2*i.abs(d))}});function a(l,c,f){var d=12,h=6,p=-30,m=-50,g=60,y=8,v=3,b=2,x=3,_=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],C=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],T=l*.5;if(T>=y)return 1;var S=2*r.normal.cdf(T,0,1,1,0)-1;S>=i.exp(m/f)?S=i.pow(S,f):S=0;var k;l>v?k=b:k=x;for(var I=T,R=(y-T)/k,F=I+R,O=0,B=f-1,H=1;H<=k;H++){for(var U=0,G=.5*(F+I),Y=.5*(F-I),Q=1;Q<=d;Q++){var M,j;h<Q?(M=d-Q+1,j=_[M-1]):(M=Q,j=-_[M-1]);var W=Y*j,L=G+W,q=L*L;if(q>g)break;var J=2*r.normal.cdf(L,0,1,1,0),re=2*r.normal.cdf(L,l,1,1,0),ve=J*.5-re*.5;ve>=i.exp(p/B)&&(ve=C[M-1]*i.exp(-(.5*q))*i.pow(ve,B),U+=ve)}U*=2*Y*f/i.sqrt(2*i.PI),O+=U,I=F,F+=R}return S+=O,S<=i.exp(p/c)?0:(S=i.pow(S,c),S>=1?1:S)}function u(l,c,f){var d=.322232421088,h=.099348462606,p=-1,m=.588581570495,g=-.342242088547,y=.531103462366,v=-.204231210125,b=.10353775285,x=-453642210148e-16,_=.0038560700634,C=.8832,T=.2368,S=1.208,k=1.4142,I=120,R=.5-.5*l,F=i.sqrt(i.log(1/(R*R))),O=F+((((F*x+v)*F+g)*F+p)*F+d)/((((F*_+b)*F+y)*F+m)*F+h);f<I&&(O+=(O*O*O+O)/f/4);var B=C-T*O;return f<I&&(B+=-1.214/f+S*O/f),O*(B*i.log(c-1)+k)}r.extend(r.tukey,{cdf:function(c,f,d){var h=1,p=f,m=16,g=8,y=-30,v=1e-14,b=100,x=800,_=5e3,C=25e3,T=1,S=.5,k=.25,I=.125,R=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],F=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(c<=0)return 0;if(d<2||h<1||p<2)return NaN;if(!Number.isFinite(c))return 1;if(d>C)return a(c,h,p);var O=d*.5,B=O*i.log(d)-d*i.log(2)-r.gammaln(O),H=O-1,U=d*.25,G;d<=b?G=T:d<=x?G=S:d<=_?G=k:G=I,B+=i.log(G);for(var Y=0,Q=1;Q<=50;Q++){for(var M=0,j=(2*Q-1)*G,W=1;W<=m;W++){var L,q;g<W?(L=W-g-1,q=B+H*i.log(j+R[L]*G)-(R[L]*G+j)*U):(L=W-1,q=B+H*i.log(j-R[L]*G)+(R[L]*G-j)*U);var J;if(q>=y){g<W?J=c*i.sqrt((R[L]*G+j)*.5):J=c*i.sqrt((-(R[L]*G)+j)*.5);var re=a(J,h,p),ve=re*F[L]*i.exp(q);M+=ve}}if(Q*G>=1&&M<=v)break;Y+=M}if(M>v)throw new Error("tukey.cdf failed to converge");return Y>1&&(Y=1),Y},inv:function(l,c,f){var d=1,h=c,p=1e-4,m=50;if(f<2||d<1||h<2)return NaN;if(l<0||l>1)return NaN;if(l===0)return 0;if(l===1)return 1/0;var g=u(l,h,f),y=r.tukey.cdf(g,c,f)-l,v;y>0?v=i.max(0,g-1):v=g+1;for(var b=r.tukey.cdf(v,c,f)-l,x,_=1;_<m;_++){x=v-b*(v-g)/(b-y),y=b,g=v,x<0&&(x=0,b=-l),b=r.tukey.cdf(x,c,f)-l,v=x;var C=i.abs(v-g);if(C<p)return x}throw new Error("tukey.inv failed to converge")}})}(n,Math),function(r,i){var s=Array.prototype.push,o=r.utils.isArray;function a(u){return o(u)||u instanceof r}r.extend({add:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.map(l,function(f,d,h){return f+c[d][h]})):r.map(l,function(f){return f+c})},subtract:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.map(l,function(f,d,h){return f-c[d][h]||0})):r.map(l,function(f){return f-c})},divide:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.multiply(l,r.inv(c))):r.map(l,function(f){return f/c})},multiply:function(l,c){var f,d,h,p,m,g,y,v;if(l.length===void 0&&c.length===void 0)return l*c;if(m=l.length,g=l[0].length,y=r.zeros(m,h=a(c)?c[0].length:g),v=0,a(c)){for(;v<h;v++)for(f=0;f<m;f++){for(p=0,d=0;d<g;d++)p+=l[f][d]*c[d][v];y[f][v]=p}return m===1&&v===1?y[0][0]:y}return r.map(l,function(b){return b*c})},outer:function(l,c){return r.multiply(l.map(function(f){return[f]}),[c])},dot:function(l,c){a(l[0])||(l=[l]),a(c[0])||(c=[c]);for(var f=l[0].length===1&&l.length!==1?r.transpose(l):l,d=c[0].length===1&&c.length!==1?r.transpose(c):c,h=[],p=0,m=f.length,g=f[0].length,y,v;p<m;p++){for(h[p]=[],y=0,v=0;v<g;v++)y+=f[p][v]*d[p][v];h[p]=y}return h.length===1?h[0]:h},pow:function(l,c){return r.map(l,function(f){return i.pow(f,c)})},exp:function(l){return r.map(l,function(c){return i.exp(c)})},log:function(l){return r.map(l,function(c){return i.log(c)})},abs:function(l){return r.map(l,function(c){return i.abs(c)})},norm:function(l,c){var f=0,d=0;for(isNaN(c)&&(c=2),a(l[0])&&(l=l[0]);d<l.length;d++)f+=i.pow(i.abs(l[d]),c);return i.pow(f,1/c)},angle:function(l,c){return i.acos(r.dot(l,c)/(r.norm(l)*r.norm(c)))},aug:function(l,c){var f=[],d;for(d=0;d<l.length;d++)f.push(l[d].slice());for(d=0;d<f.length;d++)s.apply(f[d],c[d]);return f},inv:function(l){for(var c=l.length,f=l[0].length,d=r.identity(c,f),h=r.gauss_jordan(l,d),p=[],m=0,g;m<c;m++)for(p[m]=[],g=f;g<h[0].length;g++)p[m][g-f]=h[m][g];return p},det:function u(l){if(l.length===2)return l[0][0]*l[1][1]-l[0][1]*l[1][0];for(var c=0,f=0;f<l.length;f++){for(var d=[],h=1;h<l.length;h++){d[h-1]=[];for(var p=0;p<l.length;p++)p<f?d[h-1][p]=l[h][p]:p>f&&(d[h-1][p-1]=l[h][p])}var m=f%2?-1:1;c+=u(d)*l[0][f]*m}return c},gauss_elimination:function(l,c){var f=0,d=0,h=l.length,p=l[0].length,m=1,g=0,y=[],v,b,x,_;for(l=r.aug(l,c),v=l[0].length,f=0;f<h;f++){for(b=l[f][f],d=f,_=f+1;_<p;_++)b<i.abs(l[_][f])&&(b=l[_][f],d=_);if(d!=f)for(_=0;_<v;_++)x=l[f][_],l[f][_]=l[d][_],l[d][_]=x;for(d=f+1;d<h;d++)for(m=l[d][f]/l[f][f],_=f;_<v;_++)l[d][_]=l[d][_]-m*l[f][_]}for(f=h-1;f>=0;f--){for(g=0,d=f+1;d<=h-1;d++)g=g+y[d]*l[f][d];y[f]=(l[f][v-1]-g)/l[f][f]}return y},gauss_jordan:function(l,c){var f=r.aug(l,c),d=f.length,h=f[0].length,p=0,m,g,y;for(g=0;g<d;g++){var v=g;for(y=g+1;y<d;y++)i.abs(f[y][g])>i.abs(f[v][g])&&(v=y);var b=f[g];for(f[g]=f[v],f[v]=b,y=g+1;y<d;y++)for(p=f[y][g]/f[g][g],m=g;m<h;m++)f[y][m]-=f[g][m]*p}for(g=d-1;g>=0;g--){for(p=f[g][g],y=0;y<g;y++)for(m=h-1;m>g-1;m--)f[y][m]-=f[g][m]*f[y][g]/p;for(f[g][g]/=p,m=d;m<h;m++)f[g][m]/=p}return f},triaUpSolve:function(l,c){var f=l[0].length,d=r.zeros(1,f)[0],h,p=!1;return c[0].length!=null&&(c=c.map(function(m){return m[0]}),p=!0),r.arange(f-1,-1,-1).forEach(function(m){h=r.arange(m+1,f).map(function(g){return d[g]*l[m][g]}),d[m]=(c[m]-r.sum(h))/l[m][m]}),p?d.map(function(m){return[m]}):d},triaLowSolve:function(l,c){var f=l[0].length,d=r.zeros(1,f)[0],h,p=!1;return c[0].length!=null&&(c=c.map(function(m){return m[0]}),p=!0),r.arange(f).forEach(function(m){h=r.arange(m).map(function(g){return l[m][g]*d[g]}),d[m]=(c[m]-r.sum(h))/l[m][m]}),p?d.map(function(m){return[m]}):d},lu:function(l){var c=l.length,f=r.identity(c),d=r.zeros(l.length,l[0].length),h;return r.arange(c).forEach(function(p){d[0][p]=l[0][p]}),r.arange(1,c).forEach(function(p){r.arange(p).forEach(function(m){h=r.arange(m).map(function(g){return f[p][g]*d[g][m]}),f[p][m]=(l[p][m]-r.sum(h))/d[m][m]}),r.arange(p,c).forEach(function(m){h=r.arange(p).map(function(g){return f[p][g]*d[g][m]}),d[p][m]=l[h.length][m]-r.sum(h)})}),[f,d]},cholesky:function(l){var c=l.length,f=r.zeros(l.length,l[0].length),d;return r.arange(c).forEach(function(h){d=r.arange(h).map(function(p){return i.pow(f[h][p],2)}),f[h][h]=i.sqrt(l[h][h]-r.sum(d)),r.arange(h+1,c).forEach(function(p){d=r.arange(h).map(function(m){return f[h][m]*f[p][m]}),f[p][h]=(l[h][p]-r.sum(d))/f[h][h]})}),f},gauss_jacobi:function(l,c,f,d){for(var h=0,p=0,m=l.length,g=[],y=[],v=[],b,x,_,C;h<m;h++)for(g[h]=[],y[h]=[],v[h]=[],p=0;p<m;p++)h>p?(g[h][p]=l[h][p],y[h][p]=v[h][p]=0):h<p?(y[h][p]=l[h][p],g[h][p]=v[h][p]=0):(v[h][p]=l[h][p],g[h][p]=y[h][p]=0);for(_=r.multiply(r.multiply(r.inv(v),r.add(g,y)),-1),x=r.multiply(r.inv(v),c),b=f,C=r.add(r.multiply(_,f),x),h=2;i.abs(r.norm(r.subtract(C,b)))>d;)b=C,C=r.add(r.multiply(_,b),x),h++;return C},gauss_seidel:function(l,c,f,d){for(var h=0,p=l.length,m=[],g=[],y=[],v,b,x,_,C;h<p;h++)for(m[h]=[],g[h]=[],y[h]=[],v=0;v<p;v++)h>v?(m[h][v]=l[h][v],g[h][v]=y[h][v]=0):h<v?(g[h][v]=l[h][v],m[h][v]=y[h][v]=0):(y[h][v]=l[h][v],m[h][v]=g[h][v]=0);for(_=r.multiply(r.multiply(r.inv(r.add(y,m)),g),-1),x=r.multiply(r.inv(r.add(y,m)),c),b=f,C=r.add(r.multiply(_,f),x),h=2;i.abs(r.norm(r.subtract(C,b)))>d;)b=C,C=r.add(r.multiply(_,b),x),h=h+1;return C},SOR:function(l,c,f,d,h){for(var p=0,m=l.length,g=[],y=[],v=[],b,x,_,C,T;p<m;p++)for(g[p]=[],y[p]=[],v[p]=[],b=0;b<m;b++)p>b?(g[p][b]=l[p][b],y[p][b]=v[p][b]=0):p<b?(y[p][b]=l[p][b],g[p][b]=v[p][b]=0):(v[p][b]=l[p][b],g[p][b]=y[p][b]=0);for(C=r.multiply(r.inv(r.add(v,r.multiply(g,h))),r.subtract(r.multiply(v,1-h),r.multiply(y,h))),_=r.multiply(r.multiply(r.inv(r.add(v,r.multiply(g,h))),c),h),x=f,T=r.add(r.multiply(C,f),_),p=2;i.abs(r.norm(r.subtract(T,x)))>d;)x=T,T=r.add(r.multiply(C,x),_),p++;return T},householder:function(l){for(var c=l.length,f=l[0].length,d=0,h=[],p=[],m,g,y,v,b;d<c-1;d++){for(m=0,v=d+1;v<f;v++)m+=l[v][d]*l[v][d];for(b=l[d+1][d]>0?-1:1,m=b*i.sqrt(m),g=i.sqrt((m*m-l[d+1][d]*m)/2),h=r.zeros(c,1),h[d+1][0]=(l[d+1][d]-m)/(2*g),y=d+2;y<c;y++)h[y][0]=l[y][d]/(2*g);p=r.subtract(r.identity(c,f),r.multiply(r.multiply(h,r.transpose(h)),2)),l=r.multiply(p,r.multiply(l,p))}return l},QR:function(){var u=r.sum,l=r.arange;function c(f){var d=f.length,h=f[0].length,p=r.zeros(h,h);f=r.copy(f);var m,g,y;for(g=0;g<h;g++){for(p[g][g]=i.sqrt(u(l(d).map(function(v){return f[v][g]*f[v][g]}))),m=0;m<d;m++)f[m][g]=f[m][g]/p[g][g];for(y=g+1;y<h;y++)for(p[g][y]=u(l(d).map(function(v){return f[v][g]*f[v][y]})),m=0;m<d;m++)f[m][y]=f[m][y]-f[m][g]*p[g][y]}return[f,p]}return c}(),lstsq:function(){function u(c){c=r.copy(c);var f=c.length,d=r.identity(f);return r.arange(f-1,-1,-1).forEach(function(h){r.sliceAssign(d,{row:h},r.divide(r.slice(d,{row:h}),c[h][h])),r.sliceAssign(c,{row:h},r.divide(r.slice(c,{row:h}),c[h][h])),r.arange(h).forEach(function(p){var m=r.multiply(c[p][h],-1),g=r.slice(c,{row:p}),y=r.multiply(r.slice(c,{row:h}),m);r.sliceAssign(c,{row:p},r.add(g,y));var v=r.slice(d,{row:p}),b=r.multiply(r.slice(d,{row:h}),m);r.sliceAssign(d,{row:p},r.add(v,b))})}),d}function l(c,f){var d=!1;f[0].length===void 0&&(f=f.map(function(C){return[C]}),d=!0);var h=r.QR(c),p=h[0],m=h[1],g=c[0].length,y=r.slice(p,{col:{end:g}}),v=r.slice(m,{row:{end:g}}),b=u(v),x=r.transpose(y);x[0].length===void 0&&(x=[x]);var _=r.multiply(r.multiply(b,x),f);return _.length===void 0&&(_=[[_]]),d?_.map(function(C){return C[0]}):_}return l}(),jacobi:function(l){for(var c=1,f=l.length,d=r.identity(f,f),h=[],p,m,g,y,v,b,x,_;c===1;){for(b=l[0][1],y=0,v=1,m=0;m<f;m++)for(g=0;g<f;g++)m!=g&&b<i.abs(l[m][g])&&(b=i.abs(l[m][g]),y=m,v=g);for(l[y][y]===l[v][v]?x=l[y][v]>0?i.PI/4:-i.PI/4:x=i.atan(2*l[y][v]/(l[y][y]-l[v][v]))/2,_=r.identity(f,f),_[y][y]=i.cos(x),_[y][v]=-i.sin(x),_[v][y]=i.sin(x),_[v][v]=i.cos(x),d=r.multiply(d,_),p=r.multiply(r.multiply(r.inv(_),l),_),l=p,c=0,m=1;m<f;m++)for(g=1;g<f;g++)m!=g&&i.abs(l[m][g])>.001&&(c=1)}for(m=0;m<f;m++)h.push(l[m][m]);return[d,h]},rungekutta:function(l,c,f,d,h,p){var m,g,y,v,b;if(p===2)for(;d<=f;)m=c*l(d,h),g=c*l(d+c,h+m),y=h+(m+g)/2,h=y,d=d+c;if(p===4)for(;d<=f;)m=c*l(d,h),g=c*l(d+c/2,h+m/2),v=c*l(d+c/2,h+g/2),b=c*l(d+c,h+v),y=h+(m+2*g+2*v+b)/6,h=y,d=d+c;return h},romberg:function(l,c,f,d){for(var h=0,p=(f-c)/2,m=[],g=[],y=[],v,b,x,_,C;h<d/2;){for(C=l(c),x=c,_=0;x<=f;x=x+p,_++)m[_]=x;for(v=m.length,x=1;x<v-1;x++)C+=(x%2!==0?4:2)*l(m[x]);C=p/3*(C+l(f)),y[h]=C,p/=2,h++}for(b=y.length,v=1;b!==1;){for(x=0;x<b-1;x++)g[x]=(i.pow(4,v)*y[x+1]-y[x])/(i.pow(4,v)-1);b=g.length,y=g,g=[],v++}return y},richardson:function(l,c,f,d){function h(T,S){for(var k=0,I=T.length,R;k<I;k++)T[k]===S&&(R=k);return R}for(var p=i.abs(f-l[h(l,f)+1]),m=0,g=[],y=[],v,b,x,_,C;d>=p;)v=h(l,f+d),b=h(l,f),g[m]=(c[v]-2*c[b]+c[2*b-v])/(d*d),d/=2,m++;for(_=g.length,x=1;_!=1;){for(C=0;C<_-1;C++)y[C]=(i.pow(4,x)*g[C+1]-g[C])/(i.pow(4,x)-1);_=y.length,g=y,y=[],x++}return g},simpson:function(l,c,f,d){for(var h=(f-c)/d,p=l(c),m=[],g=c,y=0,v=1,b;g<=f;g=g+h,y++)m[y]=g;for(b=m.length;v<b-1;v++)p+=(v%2!==0?4:2)*l(m[v]);return h/3*(p+l(f))},hermite:function(l,c,f,d){for(var h=l.length,p=0,m=0,g=[],y=[],v=[],b=[],x;m<h;m++){for(g[m]=1,x=0;x<h;x++)m!=x&&(g[m]*=(d-l[x])/(l[m]-l[x]));for(y[m]=0,x=0;x<h;x++)m!=x&&(y[m]+=1/(l[m]-l[x]));v[m]=(1-2*(d-l[m])*y[m])*(g[m]*g[m]),b[m]=(d-l[m])*(g[m]*g[m]),p+=v[m]*c[m]+b[m]*f[m]}return p},lagrange:function(l,c,f){for(var d=0,h=0,p,m,g=l.length;h<g;h++){for(m=c[h],p=0;p<g;p++)h!=p&&(m*=(f-l[p])/(l[h]-l[p]));d+=m}return d},cubic_spline:function(l,c,f){for(var d=l.length,h=0,p,m=[],g=[],y=[],v=[],b=[],x=[],_=[];h<d-1;h++)b[h]=l[h+1]-l[h];for(y[0]=0,h=1;h<d-1;h++)y[h]=3/b[h]*(c[h+1]-c[h])-3/b[h-1]*(c[h]-c[h-1]);for(h=1;h<d-1;h++)m[h]=[],g[h]=[],m[h][h-1]=b[h-1],m[h][h]=2*(b[h-1]+b[h]),m[h][h+1]=b[h],g[h][0]=y[h];for(v=r.multiply(r.inv(m),g),p=0;p<d-1;p++)x[p]=(c[p+1]-c[p])/b[p]-b[p]*(v[p+1][0]+2*v[p][0])/3,_[p]=(v[p+1][0]-v[p][0])/(3*b[p]);for(p=0;p<d&&!(l[p]>f);p++);return p-=1,c[p]+(f-l[p])*x[p]+r.sq(f-l[p])*v[p]+(f-l[p])*r.sq(f-l[p])*_[p]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(l){var c=l.length,f=l[0].length,d=0,h,p,m=[],g=[],y=[],v=[],b=[],x=[],_=[],C=[],T=[],S=[];for(d=0;d<c;d++)m[d]=r.sum(l[d])/f;for(d=0;d<f;d++)for(_[d]=[],h=0;h<c;h++)_[d][h]=l[h][d]-m[h];for(_=r.transpose(_),d=0;d<c;d++)for(C[d]=[],h=0;h<c;h++)C[d][h]=r.dot([_[d]],[_[h]])/(f-1);for(y=r.jacobi(C),T=y[0],g=y[1],S=r.transpose(T),d=0;d<g.length;d++)for(h=d;h<g.length;h++)g[d]<g[h]&&(p=g[d],g[d]=g[h],g[h]=p,v=S[d],S[d]=S[h],S[h]=v);for(x=r.transpose(_),d=0;d<c;d++)for(b[d]=[],h=0;h<x.length;h++)b[d][h]=r.dot([S[d]],[x[h]]);return[l,g,S,b]}}),function(u){for(var l=0;l<u.length;l++)(function(c){r.fn[c]=function(f,d){var h=this;return d?(setTimeout(function(){d.call(h,r.fn[c].call(h,f))},15),this):typeof r[c](this,f)=="number"?r[c](this,f):r(r[c](this,f))}})(u[l])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(n,Math),function(r,i){var s=[].slice,o=r.utils.isNumber,a=r.utils.isArray;r.extend({zscore:function(){var c=s.call(arguments);return o(c[1])?(c[0]-c[1])/c[2]:(c[0]-r.mean(c[1]))/r.stdev(c[1],c[2])},ztest:function(){var c=s.call(arguments),f;return a(c[1])?(f=r.zscore(c[0],c[1],c[3]),c[2]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2):c.length>2?(f=r.zscore(c[0],c[1],c[2]),c[3]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2):(f=c[0],c[1]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2)}}),r.extend(r.fn,{zscore:function(c,f){return(c-this.mean())/this.stdev(f)},ztest:function(c,f,d){var h=i.abs(this.zscore(c,d));return f===1?r.normal.cdf(-h,0,1):r.normal.cdf(-h,0,1)*2}}),r.extend({tscore:function(){var c=s.call(arguments);return c.length===4?(c[0]-c[1])/(c[2]/i.sqrt(c[3])):(c[0]-r.mean(c[1]))/(r.stdev(c[1],!0)/i.sqrt(c[1].length))},ttest:function(){var c=s.call(arguments),f;return c.length===5?(f=i.abs(r.tscore(c[0],c[1],c[2],c[3])),c[4]===1?r.studentt.cdf(-f,c[3]-1):r.studentt.cdf(-f,c[3]-1)*2):o(c[1])?(f=i.abs(c[0]),c[2]==1?r.studentt.cdf(-f,c[1]-1):r.studentt.cdf(-f,c[1]-1)*2):(f=i.abs(r.tscore(c[0],c[1])),c[2]==1?r.studentt.cdf(-f,c[1].length-1):r.studentt.cdf(-f,c[1].length-1)*2)}}),r.extend(r.fn,{tscore:function(c){return(c-this.mean())/(this.stdev(!0)/i.sqrt(this.cols()))},ttest:function(c,f){return f===1?1-r.studentt.cdf(i.abs(this.tscore(c)),this.cols()-1):r.studentt.cdf(-i.abs(this.tscore(c)),this.cols()-1)*2}}),r.extend({anovafscore:function(){var c=s.call(arguments),f,d,h,p,m,g,y,v;if(c.length===1){for(m=new Array(c[0].length),y=0;y<c[0].length;y++)m[y]=c[0][y];c=m}for(d=new Array,y=0;y<c.length;y++)d=d.concat(c[y]);for(h=r.mean(d),f=0,y=0;y<c.length;y++)f=f+c[y].length*i.pow(r.mean(c[y])-h,2);for(f/=c.length-1,g=0,y=0;y<c.length;y++)for(p=r.mean(c[y]),v=0;v<c[y].length;v++)g+=i.pow(c[y][v]-p,2);return g/=d.length-c.length,f/g},anovaftest:function(){var c=s.call(arguments),f,d,h,p;if(o(c[0]))return 1-r.centralF.cdf(c[0],c[1],c[2]);var m=r.anovafscore(c);for(f=c.length-1,h=0,p=0;p<c.length;p++)h=h+c[p].length;return d=h-f-1,1-r.centralF.cdf(m,f,d)},ftest:function(c,f,d){return 1-r.centralF.cdf(c,f,d)}}),r.extend(r.fn,{anovafscore:function(){return r.anovafscore(this.toArray())},anovaftes:function(){var c=0,f;for(f=0;f<this.length;f++)c=c+this[f].length;return r.ftest(this.anovafscore(),this.length-1,c-this.length)}}),r.extend({qscore:function(){var c=s.call(arguments),f,d,h,p,m;return o(c[0])?(f=c[0],d=c[1],h=c[2],p=c[3],m=c[4]):(f=r.mean(c[0]),d=r.mean(c[1]),h=c[0].length,p=c[1].length,m=c[2]),i.abs(f-d)/(m*i.sqrt((1/h+1/p)/2))},qtest:function(){var c=s.call(arguments),f;c.length===3?(f=c[0],c=c.slice(1)):c.length===7?(f=r.qscore(c[0],c[1],c[2],c[3],c[4]),c=c.slice(5)):(f=r.qscore(c[0],c[1],c[2]),c=c.slice(3));var d=c[0],h=c[1];return 1-r.tukey.cdf(f,h,d-h)},tukeyhsd:function(c){for(var f=r.pooledstdev(c),d=c.map(function(v){return r.mean(v)}),h=c.reduce(function(v,b){return v+b.length},0),p=[],m=0;m<c.length;++m)for(var g=m+1;g<c.length;++g){var y=r.qtest(d[m],d[g],c[m].length,c[g].length,f,h,c.length);p.push([[m,g],y])}return p}}),r.extend({normalci:function(){var c=s.call(arguments),f=new Array(2),d;return c.length===4?d=i.abs(r.normal.inv(c[1]/2,0,1)*c[2]/i.sqrt(c[3])):d=i.abs(r.normal.inv(c[1]/2,0,1)*r.stdev(c[2])/i.sqrt(c[2].length)),f[0]=c[0]-d,f[1]=c[0]+d,f},tci:function(){var c=s.call(arguments),f=new Array(2),d;return c.length===4?d=i.abs(r.studentt.inv(c[1]/2,c[3]-1)*c[2]/i.sqrt(c[3])):d=i.abs(r.studentt.inv(c[1]/2,c[2].length-1)*r.stdev(c[2],!0)/i.sqrt(c[2].length)),f[0]=c[0]-d,f[1]=c[0]+d,f},significant:function(c,f){return c<f}}),r.extend(r.fn,{normalci:function(c,f){return r.normalci(c,f,this.toArray())},tci:function(c,f){return r.tci(c,f,this.toArray())}});function u(l,c,f,d){if(l>1||f>1||l<=0||f<=0)throw new Error("Proportions should be greater than 0 and less than 1");var h=(l*c+f*d)/(c+d),p=i.sqrt(h*(1-h)*(1/c+1/d));return(l-f)/p}r.extend(r.fn,{oneSidedDifferenceOfProportions:function(c,f,d,h){var p=u(c,f,d,h);return r.ztest(p,1)},twoSidedDifferenceOfProportions:function(c,f,d,h){var p=u(c,f,d,h);return r.ztest(p,2)}})}(n,Math),n.models=function(){function r(u){var l=u[0].length,c=n.arange(l).map(function(f){var d=n.arange(l).filter(function(h){return h!==f});return i(n.col(u,f).map(function(h){return h[0]}),n.col(u,d))});return c}function i(u,l){var c=u.length,f=l[0].length-1,d=c-f-1,h=n.lstsq(l,u),p=n.multiply(l,h.map(function(_){return[_]})).map(function(_){return _[0]}),m=n.subtract(u,p),g=n.mean(u),y=n.sum(p.map(function(_){return Math.pow(_-g,2)})),v=n.sum(u.map(function(_,C){return Math.pow(_-p[C],2)})),b=y+v,x=y/b;return{exog:l,endog:u,nobs:c,df_model:f,df_resid:d,coef:h,predict:p,resid:m,ybar:g,SST:b,SSE:y,SSR:v,R2:x}}function s(u){var l=r(u.exog),c=Math.sqrt(u.SSR/u.df_resid),f=l.map(function(g){var y=g.SST,v=g.R2;return c/Math.sqrt(y*(1-v))}),d=u.coef.map(function(g,y){return(g-0)/f[y]}),h=d.map(function(g){var y=n.studentt.cdf(g,u.df_resid);return(y>.5?1-y:y)*2}),p=n.studentt.inv(.975,u.df_resid),m=u.coef.map(function(g,y){var v=p*f[y];return[g-v,g+v]});return{se:f,t:d,p:h,sigmaHat:c,interval95:m}}function o(u){var l=u.R2/u.df_model/((1-u.R2)/u.df_resid),c=function(d,h,p){return n.beta.cdf(d/(p/h+d),h/2,p/2)},f=1-c(l,u.df_model,u.df_resid);return{F_statistic:l,pvalue:f}}function a(u,l){var c=i(u,l),f=s(c),d=o(c),h=1-(1-c.R2)*((c.nobs-1)/c.df_resid);return c.t=f,c.f=d,c.adjust_R2=h,c}return{ols:a}}(),n.extend({buildxmatrix:function(){for(var i=new Array(arguments.length),s=0;s<arguments.length;s++){var o=[1];i[s]=o.concat(arguments[s])}return n(i)},builddxmatrix:function(){for(var i=new Array(arguments[0].length),s=0;s<arguments[0].length;s++){var o=[1];i[s]=o.concat(arguments[0][s])}return n(i)},buildjxmatrix:function(i){for(var s=new Array(i.length),o=0;o<i.length;o++)s[o]=i[o];return n.builddxmatrix(s)},buildymatrix:function(i){return n(i).transpose()},buildjymatrix:function(i){return i.transpose()},matrixmult:function(i,s){var o,a,u,l,c;if(i.cols()==s.rows()){if(s.rows()>1){for(l=[],o=0;o<i.rows();o++)for(l[o]=[],a=0;a<s.cols();a++){for(c=0,u=0;u<i.cols();u++)c+=i.toArray()[o][u]*s.toArray()[u][a];l[o][a]=c}return n(l)}for(l=[],o=0;o<i.rows();o++)for(l[o]=[],a=0;a<s.cols();a++){for(c=0,u=0;u<i.cols();u++)c+=i.toArray()[o][u]*s.toArray()[a];l[o][a]=c}return n(l)}},regress:function(i,s){var o=n.xtranspxinv(i),a=i.transpose(),u=n.matrixmult(n(o),a);return n.matrixmult(u,s)},regresst:function(i,s,o){var a=n.regress(i,s),u={};u.anova={};var l=n.jMatYBar(i,a);u.yBar=l;var c=s.mean();u.anova.residuals=n.residuals(s,l),u.anova.ssr=n.ssr(l,c),u.anova.msr=u.anova.ssr/(i[0].length-1),u.anova.sse=n.sse(s,l),u.anova.mse=u.anova.sse/(s.length-(i[0].length-1)-1),u.anova.sst=n.sst(s,c),u.anova.mst=u.anova.sst/(s.length-1),u.anova.r2=1-u.anova.sse/u.anova.sst,u.anova.r2<0&&(u.anova.r2=0),u.anova.fratio=u.anova.msr/u.anova.mse,u.anova.pvalue=n.anovaftest(u.anova.fratio,i[0].length-1,s.length-(i[0].length-1)-1),u.anova.rmse=Math.sqrt(u.anova.mse),u.anova.r2adj=1-u.anova.mse/u.anova.mst,u.anova.r2adj<0&&(u.anova.r2adj=0),u.stats=new Array(i[0].length);for(var f=n.xtranspxinv(i),d,h,p,m=0;m<a.length;m++)d=Math.sqrt(u.anova.mse*Math.abs(f[m][m])),h=Math.abs(a[m]/d),p=n.ttest(h,s.length-i[0].length-1,o),u.stats[m]=[a[m],d,h,p];return u.regress=a,u},xtranspx:function(i){return n.matrixmult(i.transpose(),i)},xtranspxinv:function(i){var s=n.matrixmult(i.transpose(),i),o=n.inv(s);return o},jMatYBar:function(i,s){var o=n.matrixmult(i,s);return new n(o)},residuals:function(i,s){return n.matrixsubtract(i,s)},ssr:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s,2);return o},sse:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s[a],2);return o},sst:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s,2);return o},matrixsubtract:function(i,s){for(var o=new Array(i.length),a=0;a<i.length;a++){o[a]=new Array(i[a].length);for(var u=0;u<i[a].length;u++)o[a][u]=i[a][u]-s[a][u]}return n(o)}}),n.jStat=n,n})})(O8e);var YLt=O8e.exports;const UT=_p(YLt);function I$(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");const o=(e-n)/r,a=UT.studentt.pdf(o,i),u=s*o*Math.sqrt((i+1)/(i+o*o)),l=UT.studentt.cdf(u,i+1);return 2/r*a*l}function F8e(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");if(!Number.isFinite(e))return e>0?1:0;if(Math.abs(s)<1e-10){const d=(e-n)/r;return UT.studentt.cdf(d,i)}if(Math.abs(e-n)<1e-10)return .5;const o=(e-n)/r;if(o<-100)return 0;if(o>100)return 1;const a=Math.min(n-10*r,e-.1),u=1e3,l=(e-a)/u;let c=0,f=I$(a,t);for(let d=1;d<=u;d+=1){const h=a+d*l,p=I$(h,t);c+=(f+p)*.5*l,f=p}return Math.max(0,Math.min(1,c))}function $8e(e,t=[-5,5],n=.01){const{xi:r,omega:i,nu:s,alpha:o}=e;if(i<=0||s<=0)throw new Error("Scale parameter omega and degrees of freedom nu must be positive");const a=[],u=Math.floor(t[0]/n)*n,l=Math.ceil(t[1]/n)*n;for(let d=u;d<=l;d+=n){const h=Number(d.toFixed(10));a.push(h)}const c=a.map(d=>{try{return I$(d,e)}catch(h){return console.warn(`Error calculating PDF at x=${d}:`,h),0}}),f=a.map(d=>{try{return F8e(d,e)}catch(h){console.warn(`Error calculating CDF at x=${d}:`,h);const p=(d-r)/i;return p<0?.5*(1+Math.tanh(p)):.5+.5*(1-Math.exp(-p))}});return{xVals:a,pdfVals:c,cdfVals:f}}function KLt(e,t){let n=0,r=e.xVals.length-1;const i=e.xVals.findIndex(u=>Math.abs(u-t)<1e-10);if(i>=0)return{pdf:e.pdfVals[i],cdf:e.cdfVals[i]};for(;n<=r;){const u=Math.floor((n+r)/2);e.xVals[u]<t?n=u+1:r=u-1}if(r=Math.max(0,r),n=Math.min(e.xVals.length-1,n),r>=n)return{pdf:e.pdfVals[n],cdf:e.cdfVals[n]};const s=(t-e.xVals[r])/(e.xVals[n]-e.xVals[r]),o=e.pdfVals[r]*(1-s)+e.pdfVals[n]*s,a=e.cdfVals[r]*(1-s)+e.cdfVals[n]*s;return{pdf:o,cdf:a}}const XLt=Object.freeze(Object.defineProperty({__proto__:null,findDistributionValue:KLt,generateDistributionData:$8e,skewTCDF:F8e,skewTPDF:I$},Symbol.toStringTag,{value:"Module"}));function M8e({distributionData:e,showPDF:t,xScale:n,yScale:r,setSelectedPoint:i,setNearestPoint:s,setCursor:o,setAnswer:a,curveProximityThreshold:u=50}){const l=N.useCallback((p,m)=>{if(!e)return null;const g=t?e.pdfVals:e.cdfVals,y=n.invert(p);r.invert(m);const v=tp(I=>I).left,b=v(e.xVals,y);if(b<=0)return{x:e.xVals[0],y:g[0]};if(b>=e.xVals.length){const I=e.xVals.length-1;return{x:e.xVals[I],y:g[I]}}const x=e.xVals[b-1],_=e.xVals[b],C=g[b-1],T=g[b];return Math.abs(y-x)>Math.abs(y-_)?{x:_,y:T}:{x,y:C}},[e,t,n,r]),c=N.useCallback((p,m)=>{const g=l(p,m);if(!g)return!1;const y=n(g.x),v=r(g.y);return Math.sqrt((p-y)**2+(m-v)**2)<u},[u,l,n,r]),f=N.useCallback(p=>{if(!e)return;const g=p.currentTarget.getBoundingClientRect(),y=p.clientX-g.left,v=p.clientY-g.top,b=c(y,v);if(o({x:y,y:v,isNearCurve:b}),b){const x=l(y,v);s(x)}else s(null)},[e,o,c,l,s]),d=N.useCallback(p=>{if(!e)return;const g=p.currentTarget.getBoundingClientRect(),y=p.clientX-g.left,v=p.clientY-g.top;if(c(y,v)){const x=l(y,v);x?(i(x),a({status:!0,answers:{"location-x":x.x,"location-y":x.y}})):a({status:!1,answers:{"location-x":null,"location-y":null}})}},[e,l,i,a,c]);return{handleMouseLeave:N.useCallback(()=>{o(null),s(null)},[o,s]),handleClick:d,handleMouseMove:f,findClosestPoint:l,isCursorNearCurve:c}}const QLt=Object.freeze(Object.defineProperty({__proto__:null,useChartInteractions:M8e},Symbol.toStringTag,{value:"Module"})),LH={height:450,width:600,margin:{top:15,right:15,left:50,bottom:40}};function JLt(){return{xi:Number((Math.random()*8-4).toFixed(3)),omega:Number((.3+Math.random()*1.2).toFixed(3)),nu:3+Math.floor(Math.random()*27),alpha:Number((Math.random()*10-5).toFixed(3))}}function ZLt({distributionData:e,showPDF:t,training:n,taskType:r,cursor:i,setCursor:s,selectedPoint:o,setSelectedPoint:a,setAnswer:u,currentParams:l}){const{xScale:c,yScale:f}=Z_(),[d,h]=N.useState(null),{handleMouseMove:p,handleClick:m,handleMouseLeave:g,findClosestPoint:y}=M8e({distributionData:e,showPDF:t,xScale:c,yScale:f,setSelectedPoint:a,setCursor:s,setNearestPoint:h,setAnswer:b=>{u({status:b.status,answers:{...b.answers,currentParams:l}})}}),v=N.useMemo(()=>{if(!n)return{x:null,y:null,tangentLine:null};if(!o&&(!i||!i.isNearCurve))return{x:null,y:null,tangentLine:null};const b=i!=null&&i.isNearCurve?d:o;if(!b)return{x:null,y:null,tangentLine:null};const x=tp(_=>_).left(e.xVals,b.x);switch(r){case"pdf_median":return b?(x>0&&x<e.pdfVals.length-1&&(e.pdfVals[x+1]-e.pdfVals[x-1])/(e.xVals[x+1]-e.xVals[x-1]),{x:b.x,y:null,tangentLine:null}):{x:null,y:null,tangentLine:null};case"pdf_mode":return{x:null,y:b.y,tangentLine:null};case"cdf_median":return{x:null,y:.5,tangentLine:null};case"cdf_mode":return{x:null,y:null,tangentLine:{point:b,slope:(e.cdfVals[x+1]-e.cdfVals[x-1])/(e.xVals[x+1]-e.xVals[x-1])}};default:return{x:null,y:null,tangentLine:null}}},[i,o,n,r,e,d]);return E.jsx(P8e,{distributionData:e,isTraining:n,showPDF:t,onClick:m,onMouseMove:p,onMouseLeave:g,cursor:i,selectedPoint:o,nearestPoint:d,guidelines:v,axisLabels:{x:"Value",y:t?"Density":"Cumulative Probability"}})}function eBt({parameters:e,setAnswer:t}){const{params:n,showPDF:r,training:i,taskType:s}=e,[o,a]=N.useState(()=>n||JLt()),[u,l]=N.useState(null),[c,f]=N.useState(null),[d,h]=N.useState(null),p=N.useMemo(()=>$8e(o),[o]);N.useMemo(()=>[p.xVals[0],p.xVals[p.xVals.length-1]],[p]);const m=N.useCallback(()=>{f(null),t({status:!1,answers:{"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha}})},[t,o]),g=N.useCallback(y=>{h(y.answers);const v={...y.answers,"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha};t({status:y.status,answers:v})},[t,o]);return N.useEffect(()=>{t({status:!1,answers:{"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha}})},[o,t]),E.jsx(Bl,{p:"md",children:E.jsxs("div",{className:"mt-4",children:[E.jsx(S8e,{width:LH.width,height:LH.height,margin:LH.margin,xDomain:[-5,5],yDomain:[0,1],children:E.jsx(ZLt,{distributionData:p,showPDF:r,training:i,taskType:s,cursor:u,setCursor:l,selectedPoint:c,setSelectedPoint:f,setAnswer:g,currentParams:o})}),E.jsx(bn,{onClick:m,mt:"md",children:"Clear Point"}),E.jsx(Ku,{h:"xl"}),E.jsxs(Ye,{size:"md",c:"dimmed",children:["Debug - Random Parameters: xi=",o.xi.toFixed(2),", omega=",o.omega.toFixed(2),", nu=",o.nu,", alpha=",o.alpha.toFixed(2)]})]})})}const tBt=Object.freeze(Object.defineProperty({__proto__:null,default:eBt},Symbol.toStringTag,{value:"Module"}));var L8e=(e=>(e.PDF_MEDIAN="pdf_median",e.PDF_MODE="pdf_mode",e.CDF_MEDIAN="cdf_median",e.CDF_MODE="cdf_mode",e))(L8e||{});const nBt=Object.freeze(Object.defineProperty({__proto__:null,TaskType:L8e},Symbol.toStringTag,{value:"Module"})),rBt=e=>e*Math.PI/180;function iBt({parameters:e,setAnswer:t}){var x;const n=N.useRef(null),r=N.useRef(null),i=N.useRef(null),{blindspotAngle:s}=e,o=ni(_=>_.answers),a=Number((x=o.calibration_3.answer)==null?void 0:x.pixelsPerMM),[u,l]=N.useState([]),[c,f]=N.useState(!1),[d,h]=N.useState(null),[p,m]=N.useState(5),g=N.useCallback(_=>{if(!_.length||!a||!r.current)return;const C=_.reduce((R,F)=>R+F,0)/_.length,S=r.current.getBoundingClientRect().left,I=Math.abs(C-S)/a/Math.tan(rBt(s));h(I),f(!1)},[s,a]),y=()=>{n.current&&(n.current.style.left="740px")},v=N.useCallback(()=>{if(!n.current||!r.current||!a||u.length>=5)return;f(!0);let _=!1,C=0;const T=1e3,S=k=>{if(!n.current)return;if(_){k-C>=T&&(_=!1,n.current.style.left="740px"),i.current=requestAnimationFrame(S);return}const R=parseInt(n.current.style.left||"740",10)-2;R<=0?(_=!0,C=k):n.current.style.left=`${R}px`,i.current=requestAnimationFrame(S)};i.current=requestAnimationFrame(S)},[u,a]),b=()=>{i.current&&cancelAnimationFrame(i.current),f(!1)};return N.useEffect(()=>{d!==null&&u.length===5&&t({status:!0,answers:{"dist-calibration-MM":d,"dist-calibration-CM":d/10,"ball-positions":JSON.stringify(u)}})},[d,u,t]),N.useEffect(()=>{const _=C=>{if(C.code==="Space"){if(C.preventDefault(),!c)v();else if(n.current){b();const S=n.current.getBoundingClientRect().left;l(k=>{const I=[...k,S];return I.length>=5&&g(I),I}),m(k=>k-1),y()}}};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[c,v,g]),N.useEffect(()=>(h(null),f(!1),l([]),m(5),y(),()=>{h(null),f(!1),l([]),m(5)}),[]),N.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),a?E.jsx(Bl,{size:"md",children:E.jsxs(os,{gap:"md",children:[E.jsx(Ye,{children:"Now we will quickly measure how far away you are sitting. "}),E.jsxs(os,{gap:"xs",children:[E.jsxs(To,{children:[E.jsxs(To.Item,{children:["Put your left hand on the ",E.jsx("b",{children:"space bar"}),"."]}),E.jsx(To.Item,{children:"Cover your right eye with your right hand."}),E.jsx(To.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),E.jsxs(To.Item,{children:["The ",E.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),E.jsx(Ye,{ta:"center",children:u.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),E.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[E.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),E.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),E.jsxs(Ye,{ta:"center",children:["Remaining measurements: ",5-u.length]}),d&&E.jsxs(os,{gap:"xs",children:[E.jsx(Ye,{fw:700,size:"lg",children:"Viewing Distance Results"}),E.jsxs(Ye,{children:["Estimated Viewing Distance: ",(d/10).toFixed(1)," cm"]}),E.jsxs(Ye,{children:["Number of measurements: ",u.length]})]})]})}):E.jsx("div",{children:"Please complete card calibration first."})}const sBt=Object.freeze(Object.defineProperty({__proto__:null,default:iBt},Symbol.toStringTag,{value:"Module"})),oBt="/vis-decode/assets/costco_card-B3j7PHjO.png";function aBt({parameters:e,setAnswer:t,itemWidthMM:n=85.6,itemHeightMM:r=53.98,fixedCorner:i="top-left"}){const[s,o]=N.useState(300),[a,u]=N.useState(null),[l,c]=N.useState(!1),[f,d]=N.useState({min:100,max:500}),{taskid:h}=e,p=N.useRef(null),m=N.useRef(null),g=r/n;N.useEffect(()=>{const C=()=>{const T=window.innerWidth;d({min:Math.round(T*.1),max:Math.round(T*.8)})};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const y=C=>Math.round(C*g),v=C=>C/n,b=C=>{o(C)},x=()=>{if(!p.current)return;const C=v(s);u(C),t({status:!0,answers:{[h]:C}}),c(!0)},_=()=>({position:"relative",width:"100%",height:`${y(f.max)}px`,display:"flex",justifyContent:i.includes("right")?"flex-end":"flex-start",alignItems:i.includes("bottom")?"flex-end":"flex-start"});return E.jsx(Bl,{size:"md",children:E.jsxs(os,{gap:"lg",children:[E.jsx(Ye,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),E.jsx(Ye,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),E.jsx(Ye,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),E.jsx(Ye,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),E.jsx(bn,{onClick:x,size:"lg",variant:"transparent",children:"Confirm Size"}),E.jsx(M_,{min:f.min,max:f.max,value:s,label:null,onChange:b,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),E.jsx("div",{ref:m,style:_(),children:E.jsx("div",{ref:p,style:{width:`${s}px`,height:`${y(s)}px`,overflow:"hidden"},children:E.jsx("img",{src:oBt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})})}),l&&E.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",a==null?void 0:a.toFixed(2)]})]})})}const uBt=Object.freeze(Object.defineProperty({__proto__:null,default:aBt},Symbol.toStringTag,{value:"Module"})),lBt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function cBt(e){const t=ni(r=>r.answers);return N.useMemo(()=>{const r=e.map(s=>Object.keys(t).filter(o=>{const a=o.split("_");return a.slice(0,a.length-1).join("_")===s})).flat(),i={};return r.forEach(s=>{s&&(Object.keys(t[s].answer).length>0?i[s]=t[s].answer:i[s]=null)}),i},[t,e])}const B8e=N.createContext(null);function j8e({width:e,height:t,margin:n,xDomain:r,yDomain:i,children:s}){const o=N.useMemo(()=>{const a=Ua().domain(r).range([n.left,e-n.right]),u=Ua().domain(i).range([t-n.bottom,n.top]);return{xScale:a,yScale:u,width:e,height:t,margin:n}},[e,t,n,r,i]);return E.jsx(B8e.Provider,{value:o,children:s})}function eE(){const e=N.useContext(B8e);if(!e)throw new Error("useScales must be used within a ScalesProvider");return e}const fBt=Object.freeze(Object.defineProperty({__proto__:null,ScalesProvider:j8e,useScales:eE},Symbol.toStringTag,{value:"Module"}));function xie({point:e}){const{xScale:t,yScale:n}=eE();return e?E.jsx("circle",{cx:t(e.x),cy:n(e.y),r:4,fill:"#ff0000",pointerEvents:"none","data-source":"ClickMarker"}):null}const dBt=Object.freeze(Object.defineProperty({__proto__:null,default:xie},Symbol.toStringTag,{value:"Module"}));function hBt({xSliderValue:e,ySliderValue:t,axisLabels:n,selectedPoint:r,children:i,setXSliderValue:s,setYSliderValue:o,setAnswer:a}){const{xScale:u,yScale:l,width:c,height:f,margin:d}=eE(),h=cBt(["task1_test_1","task1_test_2","task1_test_3"]);console.log(h);const p=N.useRef(null),m=N.useRef(null);N.useEffect(()=>{p.current&&Tr(p.current).call(Bte(u)).attr("transform",`translate(0,${f-d.bottom})`).selectAll("text").style("font-size","12px").style("stroke-width","2px"),m.current&&Tr(m.current).call(jte(l)).attr("transform",`translate(${d.left},0)`).selectAll("text").style("font-size","12px").style("stroke-width","2px")},[u,l,d,f]);const g=N.useMemo(()=>n?E.jsxs(E.Fragment,{children:[n.x&&E.jsx("text",{x:c/2,y:f-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:n.x}),n.y&&E.jsx("text",{x:-f/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:n.y})]}):null,[n,c,f]);return E.jsxs("svg",{width:c,height:f,children:[E.jsx("g",{ref:p}),E.jsx("g",{ref:m}),g,r&&E.jsx(xie,{point:r}),i]})}const pBt=Object.freeze(Object.defineProperty({__proto__:null,default:hBt},Symbol.toStringTag,{value:"Module"}));function U8e({data:e,strokeColor:t="currentColor",strokeWidth:n=2}){const{xScale:r,yScale:i}=eE(),s=UB().x(o=>r(o.x)).y(o=>i(o.y));return E.jsx("path",{d:s(e)||"",fill:"none",stroke:t,strokeWidth:n,"data-source":"Line"})}const mBt=Object.freeze(Object.defineProperty({__proto__:null,default:U8e},Symbol.toStringTag,{value:"Module"}));function z8e({xValue:e,yValue:t,tangentLine:n}){const{xScale:r,yScale:i,width:s,height:o,margin:a}=eE(),u=()=>e==null?null:E.jsx("line",{x1:r(e),x2:r(e),y1:a.top,y2:o-a.bottom,stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-vertical"}),l=()=>t==null?null:E.jsx("line",{x1:a.left,x2:s-a.right,y1:i(t),y2:i(t),stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-horizontal"}),c=()=>{if(!n)return null;const f=(r.domain()[1]-r.domain()[0])*.2,d=n.point.x-f,h=n.point.y-f*n.slope,p=n.point.x+f,m=n.point.y+f*n.slope;return E.jsx("line",{x1:r(d),y1:i(h),x2:r(p),y2:i(m),stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-tangent"})};return E.jsxs("g",{children:[u(),l(),c()]})}const gBt=Object.freeze(Object.defineProperty({__proto__:null,default:z8e},Symbol.toStringTag,{value:"Module"}));function V8e({distributionData:e,showPDF:t=!0,strokeColor:n="#2563eb",strokeWidth:r=2,isTraining:i=!1,axisLabels:s,selectedPoint:o,guidelines:a,children:u}){const{xScale:l,yScale:c,width:f,height:d,margin:h}=eE(),p=N.useRef(null),m=N.useRef(null),g=N.useMemo(()=>{const v=t?e.pdfVals:e.cdfVals;return e.xVals.map((b,x)=>({x:b,y:v[x]}))},[e,t]);N.useEffect(()=>{p.current&&Tr(p.current).call(Bte(l)).attr("transform",`translate(0,${d-h.bottom})`).selectAll("text").style("font-size","12px").style("stroke-width","2px"),m.current&&Tr(m.current).call(jte(c)).attr("transform",`translate(${h.left},0)`).selectAll("text").style("font-size","12px").style("stroke-width","2px")},[l,c,h,d]);const y=N.useMemo(()=>s?E.jsxs(E.Fragment,{children:[s.x&&E.jsx("text",{x:f/2,y:d-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:s.x}),s.y&&E.jsx("text",{x:-d/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:s.y})]}):null,[s,f,d]);return E.jsxs("svg",{width:f,height:d,children:[E.jsx(U8e,{data:g,strokeColor:n,strokeWidth:r}),E.jsx("g",{ref:p}),E.jsx("g",{ref:m}),y,o&&E.jsx(xie,{point:o}),i&&a&&E.jsx(z8e,{xValue:a.x,yValue:a.y,tangentLine:a.tangentLine}),u]})}const yBt=Object.freeze(Object.defineProperty({__proto__:null,default:V8e},Symbol.toStringTag,{value:"Module"}));var H8e={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function vBt(e,t){if(k$(e,t))return e[t];throw typeof e[t]=="function"&&xBt(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function bBt(e,t,n){if(k$(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function k$(e,t){return!wBt(e)&&!Array.isArray(e)?!1:N$(_Bt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function xBt(e,t){return e==null||typeof e[t]!="function"||N$(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:N$(EBt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function wBt(e){return typeof e=="object"&&e&&e.constructor===Object}var _Bt={length:!0,name:!0},EBt={toString:!0,valueOf:!0,toLocaleString:!0};class CBt{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return vBt(this.wrappedObject,t)}set(t,n){return bBt(this.wrappedObject,t,n),this}has(t){return k$(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return TBt(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){k$(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function TBt(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function xs(e){return typeof e=="number"}function Go(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function ABt(e){return typeof e=="bigint"}function q8e(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function W8e(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function G8e(e){return e&&e.constructor.prototype.isUnit===!0||!1}function sg(e){return typeof e=="string"}var Uo=Array.isArray;function ua(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function R$(e){return Array.isArray(e)||ua(e)}function SBt(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function DBt(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function IBt(e){return e&&e.constructor.prototype.isRange===!0||!1}function wie(e){return e&&e.constructor.prototype.isIndex===!0||!1}function kBt(e){return typeof e=="boolean"}function RBt(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function NBt(e){return e&&e.constructor.prototype.isHelp===!0||!1}function PBt(e){return typeof e=="function"}function OBt(e){return e instanceof Date}function FBt(e){return e instanceof RegExp}function _ie(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!q8e(e)&&!W8e(e))}function $Bt(e){return e?e instanceof Map||e instanceof CBt||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function MBt(e){return e===null}function LBt(e){return e===void 0}function BBt(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function jBt(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function UBt(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function zBt(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function VBt(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function HBt(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function qBt(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function WBt(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function GBt(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function YBt(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function KBt(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function XBt(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function QBt(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function JBt(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function ZBt(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function e9t(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function t9t(e){return e&&e.constructor.prototype.isChain===!0||!1}function pv(e){var t=typeof e;return t==="object"?e===null?"null":Go(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Eo(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return Eo(n)});if(e instanceof Date)return new Date(e.valueOf());if(Go(e))return e;if(_ie(e))return n9t(e,Eo);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function n9t(e,t){var n={};for(var r in e)N$(e,r)&&(n[r]=t(e[r]));return n}function zT(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!zT(e[r],t[r]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!zT(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function N$(e,t){return e&&Object.hasOwnProperty.call(e,t)}function r9t(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];s!==void 0&&(n[i]=s)}return n}var i9t=["Matrix","Array"],s9t=["number","BigNumber","Fraction"],tE=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(H8e)};fT(tE,H8e,{MATRIX_OPTIONS:i9t,NUMBER_OPTIONS:s9t});function vbe(){return!0}function dd(){return!1}function r2(){}const bbe="Argument is not a typed-function.";function Y8e(){function e(X){return typeof X=="object"&&X!==null&&X.constructor===Object}const t=[{name:"number",test:function(X){return typeof X=="number"}},{name:"string",test:function(X){return typeof X=="string"}},{name:"boolean",test:function(X){return typeof X=="boolean"}},{name:"Function",test:function(X){return typeof X=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(X){return X instanceof Date}},{name:"RegExp",test:function(X){return X instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(X){return X===null}},{name:"undefined",test:function(X){return X===void 0}}],n={name:"any",test:vbe,isAny:!0};let r,i,s=0,o={createCount:0};function a(X){const de=r.get(X);if(de)return de;let we='Unknown type "'+X+'"';const ae=X.toLowerCase();let he;for(he of i)if(he.toLowerCase()===ae){we+='. Did you mean "'+he+'" ?';break}throw new TypeError(we)}function u(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const we=de?a(de).index:i.length,ae=[];for(let Ee=0;Ee<X.length;++Ee){if(!X[Ee]||typeof X[Ee].name!="string"||typeof X[Ee].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Me=X[Ee].name;if(r.has(Me))throw new TypeError('Duplicate type name "'+Me+'"');ae.push(Me),r.set(Me,{name:Me,test:X[Ee].test,isAny:X[Ee].isAny,index:we+Ee,conversionsTo:[]})}const he=i.slice(we);i=i.slice(0,we).concat(ae).concat(he);for(let Ee=we+ae.length;Ee<i.length;++Ee)r.get(i[Ee]).index=Ee}function l(){r=new Map,i=[],s=0,u([n],!1)}l(),u(t);function c(){let X;for(X of i)r.get(X).conversionsTo=[];s=0}function f(X){const de=i.filter(we=>{const ae=r.get(we);return!ae.isAny&&ae.test(X)});return de.length?de:["any"]}function d(X){return X&&typeof X=="function"&&"_typedFunctionData"in X}function h(X,de,we){if(!d(X))throw new TypeError(bbe);const ae=we&&we.exact,he=Array.isArray(de)?de.join(","):de,Ee=x(he),Me=g(Ee);if(!ae||Me in X.signatures){const Xt=X._typedFunctionData.signatureMap.get(Me);if(Xt)return Xt}const Be=Ee.length;let lt;if(ae){lt=[];let Xt;for(Xt in X.signatures)lt.push(X._typedFunctionData.signatureMap.get(Xt))}else lt=X._typedFunctionData.signatures;for(let Xt=0;Xt<Be;++Xt){const fn=Ee[Xt],Wt=[];let an;for(an of lt){const Cn=S(an.params,Xt);if(!(!Cn||fn.restParam&&!Cn.restParam)){if(!Cn.hasAny){const $n=b(Cn);if(fn.types.some(ki=>!$n.has(ki.name)))continue}Wt.push(an)}}if(lt=Wt,lt.length===0)break}let Ze;for(Ze of lt)if(Ze.params.length<=Be)return Ze;throw new TypeError("Signature not found (signature: "+(X.name||"unnamed")+"("+g(Ee,", ")+"))")}function p(X,de,we){return h(X,de,we).implementation}function m(X,de){const we=a(de);if(we.test(X))return X;const ae=we.conversionsTo;if(ae.length===0)throw new Error("There are no conversions to "+de+" defined.");for(let he=0;he<ae.length;he++)if(a(ae[he].from).test(X))return ae[he].convert(X);throw new Error("Cannot convert "+X+" to "+de)}function g(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return X.map(we=>we.name).join(de)}function y(X){const de=X.indexOf("...")===0,ae=(de?X.length>3?X.slice(3):"any":X).split("|").map(Be=>a(Be.trim()));let he=!1,Ee=de?"...":"";return{types:ae.map(function(Be){return he=Be.isAny||he,Ee+=Be.name+"|",{name:Be.name,typeIndex:Be.index,test:Be.test,isAny:Be.isAny,conversion:null,conversionIndex:-1}}),name:Ee.slice(0,-1),hasAny:he,hasConversion:!1,restParam:de}}function v(X){const de=X.types.map(Me=>Me.name),we=G(de);let ae=X.hasAny,he=X.name;const Ee=we.map(function(Me){const Be=a(Me.from);return ae=Be.isAny||ae,he+="|"+Me.from,{name:Me.from,typeIndex:Be.index,test:Be.test,isAny:Be.isAny,conversion:Me,conversionIndex:Me.index}});return{types:X.types.concat(Ee),name:he,hasAny:ae,hasConversion:Ee.length>0,restParam:X.restParam}}function b(X){return X.typeSet||(X.typeSet=new Set,X.types.forEach(de=>X.typeSet.add(de.name))),X.typeSet}function x(X){const de=[];if(typeof X!="string")throw new TypeError("Signatures must be strings");const we=X.trim();if(we==="")return de;const ae=we.split(",");for(let he=0;he<ae.length;++he){const Ee=y(ae[he].trim());if(Ee.restParam&&he!==ae.length-1)throw new SyntaxError('Unexpected rest parameter "'+ae[he]+'": only allowed for the last parameter');if(Ee.types.length===0)return null;de.push(Ee)}return de}function _(X){const de=Ae(X);return de?de.restParam:!1}function C(X){if(!X||X.types.length===0)return vbe;if(X.types.length===1)return a(X.types[0].name).test;if(X.types.length===2){const de=a(X.types[0].name).test,we=a(X.types[1].name).test;return function(he){return de(he)||we(he)}}else{const de=X.types.map(function(we){return a(we.name).test});return function(ae){for(let he=0;he<de.length;he++)if(de[he](ae))return!0;return!1}}}function T(X){let de,we,ae;if(_(X)){de=pe(X).map(C);const he=de.length,Ee=C(Ae(X)),Me=function(Be){for(let lt=he;lt<Be.length;lt++)if(!Ee(Be[lt]))return!1;return!0};return function(lt){for(let Ze=0;Ze<de.length;Ze++)if(!de[Ze](lt[Ze]))return!1;return Me(lt)&&lt.length>=he+1}}else return X.length===0?function(Ee){return Ee.length===0}:X.length===1?(we=C(X[0]),function(Ee){return we(Ee[0])&&Ee.length===1}):X.length===2?(we=C(X[0]),ae=C(X[1]),function(Ee){return we(Ee[0])&&ae(Ee[1])&&Ee.length===2}):(de=X.map(C),function(Ee){for(let Me=0;Me<de.length;Me++)if(!de[Me](Ee[Me]))return!1;return Ee.length===de.length})}function S(X,de){return de<X.length?X[de]:_(X)?Ae(X):null}function k(X,de){const we=S(X,de);return we?b(we):new Set}function I(X){return X.conversion===null||X.conversion===void 0}function R(X,de){const we=new Set;return X.forEach(ae=>{const he=k(ae.params,de);let Ee;for(Ee of he)we.add(Ee)}),we.has("any")?["any"]:Array.from(we)}function F(X,de,we){let ae,he;const Ee=X||"unnamed";let Me=we,Be;for(Be=0;Be<de.length;Be++){const fn=[];if(Me.forEach(Wt=>{const an=S(Wt.params,Be),Cn=C(an);(Be<Wt.params.length||_(Wt.params))&&Cn(de[Be])&&fn.push(Wt)}),fn.length===0){if(he=R(Me,Be),he.length>0){const Wt=f(de[Be]);return ae=new TypeError("Unexpected type of argument in function "+Ee+" (expected: "+he.join(" or ")+", actual: "+Wt.join(" | ")+", index: "+Be+")"),ae.data={category:"wrongType",fn:Ee,index:Be,actual:Wt,expected:he},ae}}else Me=fn}const lt=Me.map(function(fn){return _(fn.params)?1/0:fn.params.length});if(de.length<Math.min.apply(null,lt))return he=R(Me,Be),ae=new TypeError("Too few arguments in function "+Ee+" (expected: "+he.join(" or ")+", index: "+de.length+")"),ae.data={category:"tooFewArgs",fn:Ee,index:de.length,expected:he},ae;const Ze=Math.max.apply(null,lt);if(de.length>Ze)return ae=new TypeError("Too many arguments in function "+Ee+" (expected: "+Ze+", actual: "+de.length+")"),ae.data={category:"tooManyArgs",fn:Ee,index:de.length,expectedLength:Ze},ae;const Xt=[];for(let fn=0;fn<de.length;++fn)Xt.push(f(de[fn]).join("|"));return ae=new TypeError('Arguments of type "'+Xt.join(", ")+'" do not match any of the defined signatures of function '+Ee+"."),ae.data={category:"mismatch",actual:Xt},ae}function O(X){let de=i.length+1;for(let we=0;we<X.types.length;we++)I(X.types[we])&&(de=Math.min(de,X.types[we].typeIndex));return de}function B(X){let de=s+1;for(let we=0;we<X.types.length;we++)I(X.types[we])||(de=Math.min(de,X.types[we].conversionIndex));return de}function H(X,de){if(X.hasAny){if(!de.hasAny)return 1}else if(de.hasAny)return-1;if(X.restParam){if(!de.restParam)return 1}else if(de.restParam)return-1;if(X.hasConversion){if(!de.hasConversion)return 1}else if(de.hasConversion)return-1;const we=O(X)-O(de);if(we<0)return-1;if(we>0)return 1;const ae=B(X)-B(de);return ae<0?-1:ae>0?1:0}function U(X,de){const we=X.params,ae=de.params,he=Ae(we),Ee=Ae(ae),Me=_(we),Be=_(ae);if(Me&&he.hasAny){if(!Be||!Ee.hasAny)return 1}else if(Be&&Ee.hasAny)return-1;let lt=0,Ze=0,Xt;for(Xt of we)Xt.hasAny&&++lt,Xt.hasConversion&&++Ze;let fn=0,Wt=0;for(Xt of ae)Xt.hasAny&&++fn,Xt.hasConversion&&++Wt;if(lt!==fn)return lt-fn;if(Me&&he.hasConversion){if(!Be||!Ee.hasConversion)return 1}else if(Be&&Ee.hasConversion)return-1;if(Ze!==Wt)return Ze-Wt;if(Me){if(!Be)return 1}else if(Be)return-1;const an=(we.length-ae.length)*(Me?-1:1);if(an!==0)return an;const Cn=[];let $n=0;for(let hi=0;hi<we.length;++hi){const Li=H(we[hi],ae[hi]);Cn.push(Li),$n+=Li}if($n!==0)return $n;let ki;for(ki of Cn)if(ki!==0)return ki;return 0}function G(X){if(X.length===0)return[];const de=X.map(a);X.length>1&&de.sort((he,Ee)=>he.index-Ee.index);let we=de[0].conversionsTo;if(X.length===1)return we;we=we.concat([]);const ae=new Set(X);for(let he=1;he<de.length;++he){let Ee;for(Ee of de[he].conversionsTo)ae.has(Ee.from)||(we.push(Ee),ae.add(Ee.from))}return we}function Y(X,de){let we=de;if(X.some(he=>he.hasConversion)){const he=_(X),Ee=X.map(Q);we=function(){const Be=[],lt=he?arguments.length-1:arguments.length;for(let Ze=0;Ze<lt;Ze++)Be[Ze]=Ee[Ze](arguments[Ze]);return he&&(Be[lt]=arguments[lt].map(Ee[lt])),de.apply(this,Be)}}let ae=we;if(_(X)){const he=X.length-1;ae=function(){return we.apply(this,ke(arguments,0,he).concat([ke(arguments,he)]))}}return ae}function Q(X){let de,we,ae,he;const Ee=[],Me=[];switch(X.types.forEach(function(Be){Be.conversion&&(Ee.push(a(Be.conversion.from).test),Me.push(Be.conversion.convert))}),Me.length){case 0:return function(lt){return lt};case 1:return de=Ee[0],ae=Me[0],function(lt){return de(lt)?ae(lt):lt};case 2:return de=Ee[0],we=Ee[1],ae=Me[0],he=Me[1],function(lt){return de(lt)?ae(lt):we(lt)?he(lt):lt};default:return function(lt){for(let Ze=0;Ze<Me.length;Ze++)if(Ee[Ze](lt))return Me[Ze](lt);return lt}}}function M(X){function de(we,ae,he){if(ae<we.length){const Ee=we[ae];let Me=[];if(Ee.restParam){const Be=Ee.types.filter(I);Be.length<Ee.types.length&&Me.push({types:Be,name:"..."+Be.map(lt=>lt.name).join("|"),hasAny:Be.some(lt=>lt.isAny),hasConversion:!1,restParam:!0}),Me.push(Ee)}else Me=Ee.types.map(function(Be){return{types:[Be],name:Be.name,hasAny:Be.isAny,hasConversion:Be.conversion,restParam:!1}});return Re(Me,function(Be){return de(we,ae+1,he.concat([Be]))})}else return[he]}return de(X,0,[])}function j(X,de){const we=Math.max(X.length,de.length);for(let Be=0;Be<we;Be++){const lt=k(X,Be),Ze=k(de,Be);let Xt=!1,fn;for(fn of Ze)if(lt.has(fn)){Xt=!0;break}if(!Xt)return!1}const ae=X.length,he=de.length,Ee=_(X),Me=_(de);return Ee?Me?ae===he:he>=ae:Me?ae>=he:ae===he}function W(X){return X.map(de=>Ie(de)?Tt(de.referToSelf.callback):gt(de)?Xe(de.referTo.references,de.referTo.callback):de)}function L(X,de,we){const ae=[];let he;for(he of X){let Ee=we[he];if(typeof Ee!="number")throw new TypeError('No definition for referenced signature "'+he+'"');if(Ee=de[Ee],typeof Ee!="function")return!1;ae.push(Ee)}return ae}function q(X,de,we){const ae=W(X),he=new Array(ae.length).fill(!1);let Ee=!0;for(;Ee;){Ee=!1;let Me=!0;for(let Be=0;Be<ae.length;++Be){if(he[Be])continue;const lt=ae[Be];if(Ie(lt))ae[Be]=lt.referToSelf.callback(we),ae[Be].referToSelf=lt.referToSelf,he[Be]=!0,Me=!1;else if(gt(lt)){const Ze=L(lt.referTo.references,ae,de);Ze?(ae[Be]=lt.referTo.callback.apply(this,Ze),ae[Be].referTo=lt.referTo,he[Be]=!0,Me=!1):Ee=!0}}if(Me&&Ee)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ae}function J(X){const de=/\bthis(\(|\.signatures\b)/;Object.keys(X).forEach(we=>{const ae=X[we];if(de.test(ae.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function re(X,de){if(o.createCount++,Object.keys(de).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&J(de);const we=[],ae=[],he={},Ee=[];let Me;for(Me in de){if(!Object.prototype.hasOwnProperty.call(de,Me))continue;const un=x(Me);if(!un)continue;we.forEach(function(_i){if(j(_i,un))throw new TypeError('Conflicting signatures "'+g(_i)+'" and "'+g(un)+'".')}),we.push(un);const jr=ae.length;ae.push(de[Me]);const Pi=un.map(v);let Is;for(Is of M(Pi)){const _i=g(Is);Ee.push({params:Is,name:_i,fn:jr}),Is.every(ns=>!ns.hasConversion)&&(he[_i]=jr)}}Ee.sort(U);const Be=q(ae,he,ir);let lt;for(lt in he)Object.prototype.hasOwnProperty.call(he,lt)&&(he[lt]=Be[he[lt]]);const Ze=[],Xt=new Map;for(lt of Ee)Xt.has(lt.name)||(lt.fn=Be[lt.fn],Ze.push(lt),Xt.set(lt.name,lt));const fn=Ze[0]&&Ze[0].params.length<=2&&!_(Ze[0].params),Wt=Ze[1]&&Ze[1].params.length<=2&&!_(Ze[1].params),an=Ze[2]&&Ze[2].params.length<=2&&!_(Ze[2].params),Cn=Ze[3]&&Ze[3].params.length<=2&&!_(Ze[3].params),$n=Ze[4]&&Ze[4].params.length<=2&&!_(Ze[4].params),ki=Ze[5]&&Ze[5].params.length<=2&&!_(Ze[5].params),hi=fn&&Wt&&an&&Cn&&$n&&ki;for(let un=0;un<Ze.length;++un)Ze[un].test=T(Ze[un].params);const Li=fn?C(Ze[0].params[0]):dd,Ds=Wt?C(Ze[1].params[0]):dd,Br=an?C(Ze[2].params[0]):dd,cs=Cn?C(Ze[3].params[0]):dd,cl=$n?C(Ze[4].params[0]):dd,$o=ki?C(Ze[5].params[0]):dd,Wa=fn?C(Ze[0].params[1]):dd,Nr=Wt?C(Ze[1].params[1]):dd,Ri=an?C(Ze[2].params[1]):dd,pi=Cn?C(Ze[3].params[1]):dd,Hs=$n?C(Ze[4].params[1]):dd,ri=ki?C(Ze[5].params[1]):dd;for(let un=0;un<Ze.length;++un)Ze[un].implementation=Y(Ze[un].params,Ze[un].fn);const Ni=fn?Ze[0].implementation:r2,be=Wt?Ze[1].implementation:r2,ce=an?Ze[2].implementation:r2,_e=Cn?Ze[3].implementation:r2,Ue=$n?Ze[4].implementation:r2,je=ki?Ze[5].implementation:r2,Dt=fn?Ze[0].params.length:-1,Ht=Wt?Ze[1].params.length:-1,xn=an?Ze[2].params.length:-1,rr=Cn?Ze[3].params.length:-1,mr=$n?Ze[4].params.length:-1,jn=ki?Ze[5].params.length:-1,Dr=hi?6:0,ii=Ze.length,dn=Ze.map(un=>un.test),Ir=Ze.map(un=>un.implementation),Jr=function(){for(let jr=Dr;jr<ii;jr++)if(dn[jr](arguments))return Ir[jr].apply(this,arguments);return o.onMismatch(X,arguments,Ze)};function ir(un,jr){return arguments.length===Dt&&Li(un)&&Wa(jr)?Ni.apply(this,arguments):arguments.length===Ht&&Ds(un)&&Nr(jr)?be.apply(this,arguments):arguments.length===xn&&Br(un)&&Ri(jr)?ce.apply(this,arguments):arguments.length===rr&&cs(un)&&pi(jr)?_e.apply(this,arguments):arguments.length===mr&&cl(un)&&Hs(jr)?Ue.apply(this,arguments):arguments.length===jn&&$o(un)&&ri(jr)?je.apply(this,arguments):Jr.apply(this,arguments)}try{Object.defineProperty(ir,"name",{value:X})}catch{}return ir.signatures=he,ir._typedFunctionData={signatures:Ze,signatureMap:Xt},ir}function ve(X,de,we){throw F(X,de,we)}function pe(X){return ke(X,0,X.length-1)}function Ae(X){return X[X.length-1]}function ke(X,de,we){return Array.prototype.slice.call(X,de,we)}function it(X,de){for(let we=0;we<X.length;we++)if(de(X[we]))return X[we]}function Re(X,de){return Array.prototype.concat.apply([],X.map(de))}function ut(){const X=pe(arguments).map(we=>g(x(we))),de=Ae(arguments);if(typeof de!="function")throw new TypeError("Callback function expected as last argument");return Xe(X,de)}function Xe(X,de){return{referTo:{references:X,callback:de}}}function Tt(X){if(typeof X!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:X}}}function gt(X){return X&&typeof X.referTo=="object"&&Array.isArray(X.referTo.references)&&typeof X.referTo.callback=="function"}function Ie(X){return X&&typeof X.referToSelf=="object"&&typeof X.referToSelf.callback=="function"}function Ve(X,de){if(!X)return de;if(de&&de!==X){const we=new Error("Function names do not match (expected: "+X+", actual: "+de+")");throw we.data={actual:de,expected:X},we}return X}function ft(X){let de;for(const we in X)Object.prototype.hasOwnProperty.call(X,we)&&(d(X[we])||typeof X[we].signature=="string")&&(de=Ve(de,X[we].name));return de}function _t(X,de){let we;for(we in de)if(Object.prototype.hasOwnProperty.call(de,we)){if(we in X&&de[we]!==X[we]){const ae=new Error('Signature "'+we+'" is defined twice');throw ae.data={signature:we,sourceFunction:de[we],destFunction:X[we]},ae}X[we]=de[we]}}const $t=o;o=function(X){const de=typeof X=="string",we=de?1:0;let ae=de?X:"";const he={};for(let Ee=we;Ee<arguments.length;++Ee){const Me=arguments[Ee];let Be={},lt;if(typeof Me=="function"?(lt=Me.name,typeof Me.signature=="string"?Be[Me.signature]=Me:d(Me)&&(Be=Me.signatures)):e(Me)&&(Be=Me,de||(lt=ft(Me))),Object.keys(Be).length===0){const Ze=new TypeError("Argument to 'typed' at index "+Ee+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ze.data={index:Ee,argument:Me},Ze}de||(ae=Ve(ae,lt)),_t(he,Be)}return re(ae||"",he)},o.create=Y8e,o.createCount=$t.createCount,o.onMismatch=ve,o.throwMismatchError=ve,o.createError=F,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=a,o.referTo=ut,o.referToSelf=Tt,o.convert=m,o.findSignature=h,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(X,de){let we="any";de!==!1&&r.has("Object")&&(we="Object"),o.addTypes([X],we)};function st(X){if(!X||typeof X.from!="string"||typeof X.to!="string"||typeof X.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(X.to===X.from)throw new SyntaxError('Illegal to define conversion from "'+X.from+'" to itself.')}return o.addConversion=function(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};st(X);const we=a(X.to),ae=we.conversionsTo.find(he=>he.from===X.from);if(ae)if(de&&de.override)o.removeConversion({from:ae.from,to:X.to,convert:ae.convert});else throw new Error('There is already a conversion from "'+X.from+'" to "'+we.name+'"');we.conversionsTo.push({from:X.from,convert:X.convert,index:s++})},o.addConversions=function(X,de){X.forEach(we=>o.addConversion(we,de))},o.removeConversion=function(X){st(X);const de=a(X.to),we=it(de.conversionsTo,he=>he.from===X.from);if(!we)throw new Error("Attempt to remove nonexistent conversion from "+X.from+" to "+X.to);if(we.convert!==X.convert)throw new Error("Conversion to remove does not match existing conversion");const ae=de.conversionsTo.indexOf(we);de.conversionsTo.splice(ae,1)},o.resolve=function(X,de){if(!d(X))throw new TypeError(bbe);const we=X._typedFunctionData.signatures;for(let ae=0;ae<we.length;++ae)if(we[ae].test(de))return we[ae];return null},o}const P$=Y8e();function di(e,t,n,r){function i(s){var o=r9t(s,t.map(u9t));return o9t(e,t,s),n(o)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function o9t(e,t,n){var r=t.filter(s=>!a9t(s)).every(s=>n[s]!==void 0);if(!r){var i=t.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function a9t(e){return e&&e[0]==="?"}function u9t(e){return e&&e[0]==="?"?e.slice(1):e}function Ys(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function BH(e,t,n){var r={2:"0b",8:"0o",16:"0x"},i=r[t],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Ys(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Ys(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),s="i".concat(n)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(i).concat(e.toString(t)).concat(s)}function BK(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=K8e(t);switch(n){case"fixed":return c9t(e,r);case"exponential":return X8e(e,r);case"engineering":return l9t(e,r);case"bin":return BH(e,2,i);case"oct":return BH(e,8,i);case"hex":return BH(e,16,i);case"auto":return f9t(e,r,t).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function K8e(e){var t="auto",n,r;if(e!==void 0)if(xs(e))n=e;else if(Go(e))n=e.toNumber();else if(_ie(e))e.precision!==void 0&&(n=xbe(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(r=xbe(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:r}}function m9(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function l9t(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=m9(e),r=g9(n,t),i=r.exponent,s=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(xs(t))for(;t>s.length||i-o+1>s.length;)s.push(0);else for(var a=Math.abs(i-o)-(s.length-1),u=0;u<a;u++)s.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),d=xs(t)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function c9t(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=m9(e),r=typeof t=="number"?g9(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,o=s+(t||0);return i.length<o&&(i=i.concat(OC(o-i.length))),s<0&&(i=OC(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function X8e(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=m9(e),r=t?g9(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(OC(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function f9t(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=wbe(n==null?void 0:n.lowerExp,-3),i=wbe(n==null?void 0:n.upperExp,5),s=m9(e),o=t?g9(s,t):s;if(o.exponent<r||o.exponent>=i)return X8e(e,t);var a=o.coefficients,u=o.exponent;a.length<t&&(a=a.concat(OC(t-a.length))),a=a.concat(OC(u-a.length+1+(a.length<t?t-a.length:0))),a=OC(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),o.sign+a.join("")}function g9(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t){var i=r.splice(t,r.length-t);if(i[0]>=5){var s=t-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function OC(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function d9t(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function O$(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)}function xbe(e,t){if(xs(e))return e;if(Go(e))return e.toNumber();t()}function wbe(e,t){return xs(e)?e:Go(e)?e.toNumber():t}var Q8e=function(){return Q8e=P$.create,P$},h9t=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],p9t=di("typed",h9t,function(t){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=t,o=Q8e();return o.clear(),o.addTypes([{name:"number",test:xs},{name:"Complex",test:q8e},{name:"BigNumber",test:Go},{name:"bigint",test:ABt},{name:"Fraction",test:W8e},{name:"Unit",test:G8e},{name:"identifier",test:a=>/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:sg},{name:"Chain",test:t9t},{name:"Array",test:Uo},{name:"Matrix",test:ua},{name:"DenseMatrix",test:SBt},{name:"SparseMatrix",test:DBt},{name:"Range",test:IBt},{name:"Index",test:wie},{name:"boolean",test:kBt},{name:"ResultSet",test:RBt},{name:"Help",test:NBt},{name:"function",test:PBt},{name:"Date",test:OBt},{name:"RegExp",test:FBt},{name:"null",test:MBt},{name:"undefined",test:LBt},{name:"AccessorNode",test:BBt},{name:"ArrayNode",test:jBt},{name:"AssignmentNode",test:UBt},{name:"BlockNode",test:zBt},{name:"ConditionalNode",test:VBt},{name:"ConstantNode",test:HBt},{name:"FunctionNode",test:WBt},{name:"FunctionAssignmentNode",test:qBt},{name:"IndexNode",test:GBt},{name:"Node",test:YBt},{name:"ObjectNode",test:KBt},{name:"OperatorNode",test:XBt},{name:"ParenthesisNode",test:QBt},{name:"RangeNode",test:JBt},{name:"RelationalNode",test:ZBt},{name:"SymbolNode",test:e9t},{name:"Map",test:$Bt},{name:"Object",test:_ie}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||z6(u),d9t(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||V6(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||V6(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||z6(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return s||H6(u),new s(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||V6(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){s||H6(u);var l=new s(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||z6(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){s||H6(u);try{return new s(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||V6(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||z6(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return s||H6(u),new s(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||m9t(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&R$(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&R$(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function z6(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function V6(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function m9t(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function H6(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var jK=9e15,Lb=1e9,UK="0123456789abcdef",F$="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",$$="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",zK={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:jK,crypto:!1},J8e,Cg,Gn=!0,y9="[DecimalError] ",Kv=y9+"Invalid argument: ",Z8e=y9+"Precision limit exceeded",e$e=y9+"crypto unavailable",t$e="[object Decimal]",rl=Math.floor,ra=Math.pow,g9t=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,y9t=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,v9t=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,n$e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ip=1e7,Dn=7,b9t=9007199254740991,x9t=F$.length-1,VK=$$.length-1,mt={toStringTag:t$e};mt.absoluteValue=mt.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),yn(e)};mt.ceil=function(){return yn(new this.constructor(this),this.e+1,2)};mt.clampedTo=mt.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(Kv+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};mt.comparedTo=mt.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,u=s.s,l=e.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(r=o.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};mt.cosine=mt.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Dn,r.rounding=1,n=w9t(r,a$e(r,n)),r.precision=e,r.rounding=t,yn(Cg==2||Cg==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};mt.cubeRoot=mt.cbrt=function(){var e,t,n,r,i,s,o,a,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Gn=!1,s=c.s*ra(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=au(c.d),e=c.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=ra(n,1/3),e=rl((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=c.s):r=new f(s.toString()),o=(e=f.precision)+3;;)if(a=r,u=a.times(a).times(a),l=u.plus(c),r=as(l.plus(c).times(a),l.plus(u),o+2,1),au(a.d).slice(0,o)===(n=au(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(yn(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(yn(r,e+1,1),t=!r.times(r).times(r).eq(c));break}return Gn=!0,yn(r,e,f.rounding,t)};mt.decimalPlaces=mt.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-rl(this.e/Dn))*Dn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};mt.dividedBy=mt.div=function(e){return as(this,new this.constructor(e))};mt.dividedToIntegerBy=mt.divToInt=function(e){var t=this,n=t.constructor;return yn(as(t,new n(e),0,1,1),n.precision,n.rounding)};mt.equals=mt.eq=function(e){return this.cmp(e)===0};mt.floor=function(){return yn(new this.constructor(this),this.e+1,3)};mt.greaterThan=mt.gt=function(e){return this.cmp(e)>0};mt.greaterThanOrEqualTo=mt.gte=function(e){var t=this.cmp(e);return t==1||t===0};mt.hyperbolicCosine=mt.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(e=Math.ceil(i/3),t=(1/b9(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=VT(o,1,s.times(t),new o(1),!0);for(var u,l=e,c=new o(8);l--;)u=s.times(s),s=a.minus(u.times(c.minus(u.times(c))));return yn(s,o.precision=n,o.rounding=r,!0)};mt.hyperbolicSine=mt.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=VT(s,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/b9(5,e)),i=VT(s,2,i,i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=t,s.rounding=n,yn(i,t,n,!0)};mt.hyperbolicTangent=mt.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,as(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};mt.inverseCosine=mt.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return r!==-1?r===0?t.isNeg()?Yh(n,i,s):new n(0):new n(NaN):t.isZero()?Yh(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=Yh(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))};mt.inverseHyperbolicCosine=mt.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Gn=!1,n=n.times(n).minus(1).sqrt().plus(n),Gn=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};mt.inverseHyperbolicSine=mt.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Gn=!1,n=n.times(n).plus(1).sqrt().plus(n),Gn=!0,r.precision=e,r.rounding=t,n.ln())};mt.inverseHyperbolicTangent=mt.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?yn(new s(i),e,t,!0):(s.precision=n=r-i.e,i=as(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)};mt.inverseSine=mt.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,t!==-1?t===0?(e=Yh(s,n+4,r).times(.5),e.s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};mt.inverseTangent=mt.atan=function(){var e,t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=VK)return o=Yh(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=VK)return o=Yh(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/Dn+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Gn=!1,t=Math.ceil(a/Dn),r=1,u=l.times(l),o=new c(l),i=l;e!==-1;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),o=s.plus(i.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Gn=!0,yn(o,c.precision=f,c.rounding=d,!0)};mt.isFinite=function(){return!!this.d};mt.isInteger=mt.isInt=function(){return!!this.d&&rl(this.e/Dn)>this.d.length-2};mt.isNaN=function(){return!this.s};mt.isNegative=mt.isNeg=function(){return this.s<0};mt.isPositive=mt.isPos=function(){return this.s>0};mt.isZero=function(){return!!this.d&&this.d[0]===0};mt.lessThan=mt.lt=function(e){return this.cmp(e)<0};mt.lessThanOrEqualTo=mt.lte=function(e){return this.cmp(e)<1};mt.logarithm=mt.log=function(e){var t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Gn=!1,a=f+h,o=z1(l,a),r=t?M$(c,a+10):z1(e,a),u=as(o,r,a,1),cR(u.d,i=f,d))do if(a+=10,o=z1(l,a),r=t?M$(c,a+10):z1(e,a),u=as(o,r,a,1),!s){+au(u.d).slice(i+1,i+15)+1==1e14&&(u=yn(u,f+1,0));break}while(cR(u.d,i+=10,d));return Gn=!0,yn(u,f,d)};mt.minus=mt.sub=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d?e.s=-e.s:e=new p(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,d=e.d,a=p.precision,u=p.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new p(h);else return new p(u===3?-0:0);return Gn?yn(e,a,u):e}if(n=rl(e.e/Dn),c=rl(h.e/Dn),l=l.slice(),s=c-n,s){for(f=s<0,f?(t=l,s=-s,o=d.length):(t=d,n=c,o=l.length),r=Math.max(Math.ceil(a/Dn),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=l.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}s=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>s;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=ip-1;--l[i],l[r]+=ip}l[r]-=d[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=v9(l,n),Gn?yn(e,a,u):e):new p(u===3?-0:0)};mt.modulo=mt.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?yn(new r(n),r.precision,r.rounding):(Gn=!1,r.modulo==9?(t=as(n,e.abs(),0,3,1),t.s*=e.s):t=as(n,e,0,r.modulo,1),t=t.times(e),Gn=!0,n.minus(t))};mt.naturalExponential=mt.exp=function(){return HK(this)};mt.naturalLogarithm=mt.ln=function(){return z1(this)};mt.negated=mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,yn(e)};mt.plus=mt.add=function(e){var t,n,r,i,s,o,a,u,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return!f.s||!e.s?e=new d(NaN):f.d||(e=new d(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),Gn?yn(e,a,u):e;if(s=rl(f.e/Dn),r=rl(e.e/Dn),l=l.slice(),i=s-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=s,o=l.length),s=Math.ceil(a/Dn),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/ip|0,l[i]%=ip;for(t&&(l.unshift(t),++r),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=v9(l,r),Gn?yn(e,a,u):e};mt.precision=mt.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Kv+e);return n.d?(t=r$e(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};mt.round=function(){var e=this,t=e.constructor;return yn(new t(e),e.e+1,t.rounding)};mt.sine=mt.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Dn,r.rounding=1,n=E9t(r,a$e(r,n)),r.precision=e,r.rounding=t,yn(Cg>2?n.neg():n,e,t,!0)):new r(NaN)};mt.squareRoot=mt.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(Gn=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=au(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=rl((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new c(t)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(s=r,r=s.plus(as(o,s,n+2,1)).times(.5),au(s.d).slice(0,n)===(t=au(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(yn(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(yn(r,u+1,1),e=!r.times(r).eq(o));break}return Gn=!0,yn(r,u,c.rounding,e)};mt.tangent=mt.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=as(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,yn(Cg==2||Cg==4?n.neg():n,e,t,!0)):new r(NaN)};mt.times=mt.mul=function(e){var t,n,r,i,s,o,a,u,l,c=this,f=c.constructor,d=c.d,h=(e=new f(e)).d;if(e.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?e.s/0:e.s*0);for(n=rl(c.e/Dn)+rl(e.e/Dn),u=d.length,l=h.length,u<l&&(s=d,d=h,h=s,o=u,u=l,l=o),s=[],o=u+l,r=o;r--;)s.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)a=s[i]+h[r]*d[i-r-1]+t,s[i--]=a%ip|0,t=a/ip|0;s[i]=(s[i]+t)%ip|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=v9(s,n),Gn?yn(e,f.precision,f.rounding):e};mt.toBinary=function(e,t){return Eie(this,2,e,t)};mt.toDecimalPlaces=mt.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Gc(e,0,Lb),t===void 0?t=r.rounding:Gc(t,0,8),yn(n,e+n.e+1,t))};mt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Z0(r,!0):(Gc(e,0,Lb),t===void 0?t=i.rounding:Gc(t,0,8),r=yn(new i(r),e+1,t),n=Z0(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};mt.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?n=Z0(i):(Gc(e,0,Lb),t===void 0?t=s.rounding:Gc(t,0,8),r=yn(new s(i),e+i.e+1,t),n=Z0(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};mt.toFraction=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.d,m=h.constructor;if(!p)return new m(h);if(l=n=new m(1),r=u=new m(0),t=new m(r),s=t.e=r$e(p)-h.e-1,o=s%Dn,t.d[0]=ra(10,o<0?Dn+o:o),e==null)e=s>0?t:l;else{if(a=new m(e),!a.isInt()||a.lt(l))throw Error(Kv+a);e=a.gt(t)?s>0?t:l:a}for(Gn=!1,a=new m(au(p)),c=m.precision,m.precision=s=p.length*Dn*2;f=as(a,t,0,1,1),i=n.plus(f.times(r)),i.cmp(e)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=as(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=as(l,r,s,1).minus(h).abs().cmp(as(u,n,s,1).minus(h).abs())<1?[l,r]:[u,n],m.precision=c,Gn=!0,d};mt.toHexadecimal=mt.toHex=function(e,t){return Eie(this,16,e,t)};mt.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:Gc(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Gn=!1,n=as(n,e,0,t,1).times(e),Gn=!0,yn(n)):(e.s=n.s,n=e),n};mt.toNumber=function(){return+this};mt.toOctal=function(e,t){return Eie(this,8,e,t)};mt.toPower=mt.pow=function(e){var t,n,r,i,s,o,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(ra(+a,l));if(a=new u(a),a.eq(1))return a;if(r=u.precision,s=u.rounding,e.eq(1))return yn(a,r,s);if(t=rl(e.e/Dn),t>=e.d.length-1&&(n=l<0?-l:l)<=b9t)return i=i$e(u,a,n,r),e.s<0?new u(1).div(i):yn(i,r,s);if(o=a.s,o<0){if(t<e.d.length-1)return new u(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return n=ra(+a,l),t=n==0||!isFinite(n)?rl(l*(Math.log("0."+au(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(Gn=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),i=HK(e.times(z1(a,r+n)),r),i.d&&(i=yn(i,r+5,1),cR(i.d,r,s)&&(t=r+10,i=yn(HK(e.times(z1(a,t+n)),t),t+5,1),+au(i.d).slice(r+1,r+15)+1==1e14&&(i=yn(i,r+1,0)))),i.s=o,Gn=!0,u.rounding=s,yn(i,r,s))};mt.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Z0(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Gc(e,1,Lb),t===void 0?t=i.rounding:Gc(t,0,8),r=yn(new i(r),e,t),n=Z0(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};mt.toSignificantDigits=mt.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Gc(e,1,Lb),t===void 0?t=r.rounding:Gc(t,0,8)),yn(new r(n),e,t)};mt.toString=function(){var e=this,t=e.constructor,n=Z0(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};mt.truncated=mt.trunc=function(){return yn(new this.constructor(this),this.e+1,1)};mt.valueOf=mt.toJSON=function(){var e=this,t=e.constructor,n=Z0(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function au(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)r=e[t]+"",n=Dn-r.length,n&&(s+=w1(n)),s+=r;o=e[t],r=o+"",n=Dn-r.length,n&&(s+=w1(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Gc(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Kv+e)}function cR(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Dn,i=0):(i=Math.ceil((t+1)/Dn),t%=Dn),s=ra(10,Dn-t),a=e[i]%s|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==ra(10,t-2)-1||(a==s/2||a==0)&&(e[i+1]/s/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(r||n<4)&&a==9999||!r&&n>3&&a==4999):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==ra(10,t-3)-1,o}function TF(e,t,n){for(var r,i=[0],s,o=0,a=e.length;o<a;){for(s=i.length;s--;)i[s]*=t;for(i[0]+=UK.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function w9t(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/b9(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=VT(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var as=function(){function e(r,i,s){var o,a=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+a,r[u]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function t(r,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,u){var l,c,f,d,h,p,m,g,y,v,b,x,_,C,T,S,k,I,R,F,O=r.constructor,B=r.s==i.s?1:-1,H=r.d,U=i.d;if(!H||!H[0]||!U||!U[0])return new O(!r.s||!i.s||(H?U&&H[0]==U[0]:!U)?NaN:H&&H[0]==0||!U?B*0:B/0);for(u?(h=1,c=r.e-i.e):(u=ip,h=Dn,c=rl(r.e/h)-rl(i.e/h)),R=U.length,k=H.length,y=new O(B),v=y.d=[],f=0;U[f]==(H[f]||0);f++);if(U[f]>(H[f]||0)&&c--,s==null?(C=s=O.precision,o=O.rounding):a?C=s+(r.e-i.e)+1:C=s,C<0)v.push(1),p=!0;else{if(C=C/h+2|0,f=0,R==1){for(d=0,U=U[0],C++;(f<k||d)&&C--;f++)T=d*u+(H[f]||0),v[f]=T/U|0,d=T%U|0;p=d||f<k}else{for(d=u/(U[0]+1)|0,d>1&&(U=e(U,d,u),H=e(H,d,u),R=U.length,k=H.length),S=R,b=H.slice(0,R),x=b.length;x<R;)b[x++]=0;F=U.slice(),F.unshift(0),I=U[0],U[1]>=u/2&&++I;do d=0,l=t(U,b,R,x),l<0?(_=b[0],R!=x&&(_=_*u+(b[1]||0)),d=_/I|0,d>1?(d>=u&&(d=u-1),m=e(U,d,u),g=m.length,x=b.length,l=t(m,b,g,x),l==1&&(d--,n(m,R<g?F:U,g,u))):(d==0&&(l=d=1),m=U.slice()),g=m.length,g<x&&m.unshift(0),n(b,m,x,u),l==-1&&(x=b.length,l=t(U,b,R,x),l<1&&(d++,n(b,R<x?F:U,x,u))),x=b.length):l===0&&(d++,b=[0]),v[f++]=d,l&&b[0]?b[x++]=H[S]||0:(b=[H[S]],x=1);while((S++<k||b[0]!==void 0)&&C--);p=b[0]!==void 0}v[0]||v.shift()}if(h==1)y.e=c,J8e=p;else{for(f=1,d=v[0];d>=10;d/=10)f++;y.e=f+c*h-1,yn(y,a?s+y.e+1:s,o,p)}return y}}();function yn(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(i=1,a=f[0];a>=10;a/=10)i++;if(s=t-i,s<0)s+=Dn,o=t,c=f[d=0],u=c/ra(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Dn),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=u=0,i=1,s%=Dn,o=s-Dn+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;s%=Dn,o=s-Dn+i,u=o<0?0:c/ra(10,i-o-1)%10|0}if(r=r||t<0||f[d+1]!==void 0||(o<0?c:c%ra(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(s>0?o>0?c/ra(10,i-o):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=ra(10,(Dn-t%Dn)%Dn),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=d,a=1,d--):(f.length=d+1,a=ra(10,Dn-s),f[d]=o>0?(c/ra(10,i-o)%ra(10,o)|0)*a:0),l)for(;;)if(d==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,f[0]==ip&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=ip)break;f[d--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return Gn&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function Z0(e,t,n){if(!e.isFinite())return o$e(e);var r,i=e.e,s=au(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+w1(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+w1(-i-1)+s,n&&(r=n-o)>0&&(s+=w1(r))):i>=o?(s+=w1(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+w1(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=w1(r))),s}function v9(e,t){var n=e[0];for(t*=Dn;n>=10;n/=10)t++;return t}function M$(e,t,n){if(t>x9t)throw Gn=!0,n&&(e.precision=n),Error(Z8e);return yn(new e(F$),t,1,!0)}function Yh(e,t,n){if(t>VK)throw Error(Z8e);return yn(new e($$),t,n,!0)}function r$e(e){var t=e.length-1,n=t*Dn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function w1(e){for(var t="";e--;)t+="0";return t}function i$e(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/Dn+4);for(Gn=!1;;){if(n%2&&(s=s.times(t),Ebe(s.d,o)&&(i=!0)),n=rl(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}t=t.times(t),Ebe(t.d,o)}return Gn=!0,s}function _be(e){return e.d[e.d.length-1]&1}function s$e(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;)if(r=new e(t[s]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function HK(e,t){var n,r,i,s,o,a,u,l=0,c=0,f=0,d=e.constructor,h=d.rounding,p=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Gn=!1,u=p):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(r=Math.log(ra(2,f))/Math.LN10*2+5|0,u+=r,n=s=o=new d(1),d.precision=u;;){if(s=yn(s.times(e),u,1),n=n.times(++c),a=o.plus(as(s,n,u,1)),au(a.d).slice(0,u)===au(o.d).slice(0,u)){for(i=f;i--;)o=yn(o.times(o),u,1);if(t==null)if(l<3&&cR(o.d,u-r,h,l))d.precision=u+=10,n=s=a=new d(1),c=0,l++;else return yn(o,d.precision=p,h,Gn=!0);else return d.precision=p,o}o=a}}function z1(e,t){var n,r,i,s,o,a,u,l,c,f,d,h=1,p=10,m=e,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:m.s!=1?NaN:g?0:m);if(t==null?(Gn=!1,c=b):c=t,y.precision=c+=p,n=au(g),r=n.charAt(0),Math.abs(s=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=au(m.d),r=n.charAt(0),h++;s=m.e,r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1))}else return l=M$(y,c+2,b).times(s+""),m=z1(new y(r+"."+n.slice(1)),c-p).plus(l),y.precision=b,t==null?yn(m,b,v,Gn=!0):m;for(f=m,u=o=m=as(m.minus(1),m.plus(1),c,1),d=yn(m.times(m),c,1),i=3;;){if(o=yn(o.times(d),c,1),l=u.plus(as(o,new y(i),c,1)),au(l.d).slice(0,c)===au(u.d).slice(0,c))if(u=u.times(2),s!==0&&(u=u.plus(M$(y,c+2,b).times(s+""))),u=as(u,new y(h),c,1),t==null)if(cR(u.d,c-p,v,a))y.precision=c+=p,l=o=m=as(f.minus(1),f.plus(1),c,1),d=yn(m.times(m),c,1),i=a=1;else return yn(u,y.precision=b,v,Gn=!0);else return y.precision=b,u;u=l,i+=2}}function o$e(e){return String(e.s*e.s/0)}function qK(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Dn,n<0&&(r+=Dn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Dn;r<i;)e.d.push(+t.slice(r,r+=Dn));t=t.slice(r),r=Dn-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Gn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function _9t(e,t){var n,r,i,s,o,a,u,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),n$e.test(t))return qK(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(y9t.test(t))n=16,t=t.toLowerCase();else if(g9t.test(t))n=2;else if(v9t.test(t))n=8;else throw Error(Kv+t);for(s=t.search(/p/i),s>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=e.constructor,o&&(t=t.replace(".",""),a=t.length,s=a-s,i=i$e(r,new r(n),s,s*2)),l=TF(t,n,ip),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(e.s*0):(e.e=v9(l,c),e.d=l,Gn=!1,o&&(e=as(e,i,a*4)),u&&(e=e.times(Math.abs(u)<54?ra(2,u):HT.pow(2,u))),Gn=!0,e)}function E9t(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:VT(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/b9(5,n)),t=VT(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}function VT(e,t,n,r,i){var s,o,a,u,l=e.precision,c=Math.ceil(l/Dn);for(Gn=!1,u=n.times(n),a=new e(r);;){if(o=as(a.times(u),new e(t++*t++),l,1),a=i?r.plus(o):r.minus(o),r=as(o.times(u),new e(t++*t++),l,1),o=a.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return Gn=!0,o.d.length=c+1,o}function b9(e,t){for(var n=e;--t;)n*=e;return n}function a$e(e,t){var n,r=t.s<0,i=Yh(e,e.precision,1),s=i.times(.5);if(t=t.abs(),t.lte(s))return Cg=r?4:1,t;if(n=t.divToInt(i),n.isZero())Cg=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(s))return Cg=_be(n)?r?2:3:r?4:1,t;Cg=_be(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Eie(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor,p=n!==void 0;if(p?(Gc(n,1,Lb),r===void 0?r=h.rounding:Gc(r,0,8)):(n=h.precision,r=h.rounding),!e.isFinite())c=o$e(e);else{for(c=Z0(e),o=c.indexOf("."),p?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=TF(Z0(d),10,i),d.e=d.d.length),f=TF(c,10,i),s=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?s--:(e=new h(e),e.d=f,e.e=s,e=as(e,d,n,r,0,i),f=e.d,s=e.e,l=J8e),o=f[n],a=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(e.s<0?3:2)):o>a||o===a&&(r===4||l||r===6&&f[n-1]&1||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=UK.charAt(f[o]);if(p){if(u>1)if(t==16||t==8){for(o=t==16?4:3,--u;u%o;u++)c+="0";for(f=TF(c,i,t),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=UK.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>u)for(s-=u;s--;)c+="0";else s<u&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function Ebe(e,t){if(e.length>t)return e.length=t,!0}function C9t(e){return new this(e).abs()}function T9t(e){return new this(e).acos()}function A9t(e){return new this(e).acosh()}function S9t(e,t){return new this(e).plus(t)}function D9t(e){return new this(e).asin()}function I9t(e){return new this(e).asinh()}function k9t(e){return new this(e).atan()}function R9t(e){return new this(e).atanh()}function N9t(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Yh(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Yh(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Yh(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(as(e,t,s,1)),t=Yh(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(as(e,t,s,1)),n}function P9t(e){return new this(e).cbrt()}function O9t(e){return yn(e=new this(e),e.e+1,2)}function F9t(e,t,n){return new this(e).clamp(t,n)}function $9t(e){if(!e||typeof e!="object")throw Error(y9+"Object expected");var t,n,r,i=e.defaults===!0,s=["precision",1,Lb,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,jK,"maxE",0,jK,"minE",-9e15,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=zK[n]),(r=e[n])!==void 0)if(rl(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(Kv+n+": "+r);if(n="crypto",i&&(this[n]=zK[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(e$e);else this[n]=!1;else throw Error(Kv+n+": "+r);return this}function M9t(e){return new this(e).cos()}function L9t(e){return new this(e).cosh()}function u$e(e){var t,n,r;function i(s){var o,a,u,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,Cbe(s)){l.s=s.s,Gn?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Gn?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return qK(l,s.toString())}else if(u!=="string")throw Error(Kv+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),n$e.test(s)?qK(l,s):_9t(l,s)}if(i.prototype=mt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=$9t,i.clone=u$e,i.isDecimal=Cbe,i.abs=C9t,i.acos=T9t,i.acosh=A9t,i.add=S9t,i.asin=D9t,i.asinh=I9t,i.atan=k9t,i.atanh=R9t,i.atan2=N9t,i.cbrt=P9t,i.ceil=O9t,i.clamp=F9t,i.cos=M9t,i.cosh=L9t,i.div=B9t,i.exp=j9t,i.floor=U9t,i.hypot=z9t,i.ln=V9t,i.log=H9t,i.log10=W9t,i.log2=q9t,i.max=G9t,i.min=Y9t,i.mod=K9t,i.mul=X9t,i.pow=Q9t,i.random=J9t,i.round=Z9t,i.sign=e7t,i.sin=t7t,i.sinh=n7t,i.sqrt=r7t,i.sub=i7t,i.sum=s7t,i.tan=o7t,i.tanh=a7t,i.trunc=u7t,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function B9t(e,t){return new this(e).div(t)}function j9t(e){return new this(e).exp()}function U9t(e){return yn(e=new this(e),e.e+1,3)}function z9t(){var e,t,n=new this(0);for(Gn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Gn=!0,new this(1/0);n=t}return Gn=!0,n.sqrt()}function Cbe(e){return e instanceof HT||e&&e.toStringTag===t$e||!1}function V9t(e){return new this(e).ln()}function H9t(e,t){return new this(e).log(t)}function q9t(e){return new this(e).log(2)}function W9t(e){return new this(e).log(10)}function G9t(){return s$e(this,arguments,"lt")}function Y9t(){return s$e(this,arguments,"gt")}function K9t(e,t){return new this(e).mod(t)}function X9t(e,t){return new this(e).mul(t)}function Q9t(e,t){return new this(e).pow(t)}function J9t(e){var t,n,r,i,s=0,o=new this(1),a=[];if(e===void 0?e=this.precision:Gc(e,1,Lb),r=Math.ceil(e/Dn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)i=t[s],i>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(e$e);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],e%=Dn,r&&e&&(i=ra(10,Dn-e),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=Dn)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Dn&&(n-=Dn-r)}return o.e=n,o.d=a,o}function Z9t(e){return yn(e=new this(e),e.e+1,this.rounding)}function e7t(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function t7t(e){return new this(e).sin()}function n7t(e){return new this(e).sinh()}function r7t(e){return new this(e).sqrt()}function i7t(e,t){return new this(e).sub(t)}function s7t(){var e=0,t=arguments,n=new this(t[e]);for(Gn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Gn=!0,yn(n,this.precision,this.rounding)}function o7t(e){return new this(e).tan()}function a7t(e){return new this(e).tanh()}function u7t(e){return yn(e=new this(e),e.e+1,1)}mt[Symbol.for("nodejs.util.inspect.custom")]=mt.toString;mt[Symbol.toStringTag]="Decimal";var HT=mt.constructor=u$e(zK);F$=new HT(F$);$$=new HT($$);var l7t="BigNumber",c7t=["?on","config"],f7t=di(l7t,c7t,e=>{var{on:t,config:n}=e,r=HT.clone({precision:n.precision,modulo:HT.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},t&&t("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const Ru=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},hd=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},d7t=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},jH=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},i2=function(){throw SyntaxError("Invalid Param")};function UH(e,t){const n=Math.abs(e),r=Math.abs(t);return e===0?Math.log(r):t===0?Math.log(n):n<3e3&&r<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const h7t={re:0,im:0},Ux=function(e,t){const n=h7t;if(e==null)n.re=n.im=0;else if(t!==void 0)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return et.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return et.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else e.length===2?(n.re=e[0],n.im=e[1]):i2();break;case"string":n.im=n.re=0;const r=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;r===null&&i2();for(let o=0;o<r.length;o++){const a=r[o];a===" "||a==="	"||a===`
`||(a==="+"?i++:a==="-"?s++:a==="i"||a==="I"?(i+s===0&&i2(),r[o+1]!==" "&&!isNaN(r[o+1])?(n.im+=parseFloat((s%2?"-":"")+r[o+1]),o++):n.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(a))&&i2(),r[o+1]==="i"||r[o+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+a),o++):n.re+=parseFloat((s%2?"-":"")+a),i=s=0))}i+s>0&&i2();break;case"number":n.im=0,n.re=e;break;default:i2()}return isNaN(n.re)||isNaN(n.im),n};function et(e,t){if(!(this instanceof et))return new et(e,t);const n=Ux(e,t);this.re=n.re,this.im=n.im}et.prototype={re:0,im:0,sign:function(){const e=jH(this.re,this.im);return new et(this.re/e,this.im/e)},add:function(e,t){const n=Ux(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?et.NAN:et.INFINITY:new et(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=Ux(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?et.NAN:et.INFINITY:new et(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=Ux(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,o=n.re===0&&n.im===0;return r&&o||i&&s?et.NAN:r||i?et.INFINITY:n.im===0&&this.im===0?new et(this.re*n.re,0):new et(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=Ux(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,o=n.re===0&&n.im===0;if(s&&o||r&&i)return et.NAN;if(o||r)return et.INFINITY;if(s||i)return et.ZERO;if(n.im===0)return new et(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const a=n.re/n.im,u=n.re*a+n.im;return new et((this.re*a+this.im)/u,(this.im*a-this.re)/u)}else{const a=n.im/n.re,u=n.im*a+n.re;return new et((this.re+this.im*a)/u,(this.im-this.re*a)/u)}},pow:function(e,t){const n=Ux(e,t),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return et.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new et(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new et(Math.pow(this.im,n.re),0);case 1:return new et(0,Math.pow(this.im,n.re));case 2:return new et(-Math.pow(this.im,n.re),0);case 3:return new et(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return et.ZERO;const s=Math.atan2(this.im,this.re),o=UH(this.re,this.im);let a=Math.exp(n.re*o-n.im*s),u=n.im*o+n.re*s;return new et(a*Math.cos(u),a*Math.sin(u))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new et(Math.sqrt(e),0):new et(0,Math.sqrt(-e));const n=jH(e,t);let r=Math.sqrt(.5*(n+Math.abs(e))),i=Math.abs(t)/(2*r);return e>=0?new et(r,t<0?-i:i):new et(i,t<0?-r:r)},exp:function(){const e=Math.exp(this.re);return this.im===0?new et(e,0):new et(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new et(Math.expm1(e)*Math.cos(t)+d7t(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new et(Math.log(e),0):new et(UH(e,t),Math.atan2(t,e))},abs:function(){return jH(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new et(Math.sin(e)*Ru(t),Math.cos(e)*hd(t))},cos:function(){const e=this.re,t=this.im;return new et(Math.cos(e)*Ru(t),-Math.sin(e)*hd(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+Ru(t);return new et(Math.sin(e)/n,hd(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-Ru(t);return new et(-Math.sin(e)/n,hd(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*Ru(2*t)+.5*Math.cos(2*e);return new et(Math.cos(e)*Ru(t)/n,Math.sin(e)*hd(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*Ru(2*t)-.5*Math.cos(2*e);return new et(Math.sin(e)*Ru(t)/n,-Math.cos(e)*hd(t)/n)},asin:function(){const e=this.re,t=this.im,n=new et(t*t-e*e+1,-2*e*t).sqrt(),r=new et(n.re-t,n.im+e).log();return new et(r.im,-r.re)},acos:function(){const e=this.re,t=this.im,n=new et(t*t-e*e+1,-2*e*t).sqrt(),r=new et(n.re-t,n.im+e).log();return new et(Math.PI/2-r.im,r.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new et(0,1/0);if(t===-1)return new et(0,-1/0)}const n=e*e+(1-t)*(1-t),r=new et((1-t*t-e*e)/n,-2*e/n).log();return new et(-.5*r.im,.5*r.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new et(Math.atan2(1,e),0);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).atan():new et(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new et(0,1/0);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).acos():new et(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new et(Math.PI/2,1/0);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).asin():new et(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new et(hd(e)*Math.cos(t),Ru(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new et(Ru(e)*Math.cos(t),hd(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=Ru(e)+Math.cos(t);return new et(hd(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=Ru(e)-Math.cos(t);return new et(hd(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-Ru(2*e);return new et(-2*hd(e)*Math.cos(t)/n,2*Ru(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+Ru(2*e);return new et(2*Ru(e)*Math.cos(t)/n,-2*hd(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&t===0,r=1-e,i=1+e,s=r*r+t*t,o=s!==0?new et((i*r-t*t)/s,(t*r+i*t)/s):new et(e!==-1?e/0:0,t!==0?t/0:0),a=o.re;return o.re=UH(o.re,o.im)/2,o.im=Math.atan2(o.im,a)/2,n&&(o.im=-o.im),o},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new et(0,Math.PI/2);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).atanh():new et(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new et(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).asinh():new et(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return et.INFINITY;const n=e*e+t*t;return n!==0?new et(e/n,-t/n).acosh():new et(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return et.INFINITY;if(this.isInfinite())return et.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new et(e/n,-t/n)},conjugate:function(){return new et(this.re,-this.im)},neg:function(){return new et(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new et(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new et(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new et(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=Ux(e,t);return Math.abs(n.re-this.re)<=et.EPSILON&&Math.abs(n.im-this.im)<=et.EPSILON},clone:function(){return new et(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<et.EPSILON&&(e=0),Math.abs(t)<et.EPSILON&&(t=0),t===0?n+e:(e!==0?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),t!==1&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};et.ZERO=new et(0,0);et.ONE=new et(1,0);et.I=new et(0,1);et.PI=new et(Math.PI,0);et.E=new et(Math.E,0);et.INFINITY=new et(1/0,1/0);et.NAN=new et(NaN,NaN);et.EPSILON=1e-15;var p7t="Complex",m7t=[],g7t=di(p7t,m7t,()=>(Object.defineProperty(et,"name",{value:"Complex"}),et.prototype.constructor=et,et.prototype.type="Complex",et.prototype.isComplex=!0,et.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},et.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},et.prototype.format=function(e){var t="",n=this.im,r=this.re,i=BK(this.re,e),s=BK(this.im,e),o=xs(e)?e:e?e.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?t=i:r===0?n===1?t="i":n===-1?t="-i":t=s+"i":n<0?n===-1?t=i+" - i":t=i+" - "+s.substring(1)+"i":n===1?t=i+" + i":t=i+" + "+s+"i",t},et.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return et(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(xs(n)){if(G8e(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),xs(r))return new et({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},et.prototype.valueOf=et.prototype.toString,et.fromJSON=function(e){return new et(e)},et.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},et),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const hn=BigInt(0),ar=BigInt(1),fR=BigInt(2),WK=BigInt(5),mc=BigInt(10),y7t=2e3,Mt={s:ar,n:hn,d:ar};function qm(e,t){try{e=BigInt(e)}catch{throw f1()}return e*t}function vh(e){return typeof e=="bigint"?e:Math.floor(e)}function Ps(e,t){if(t===hn)throw Cie();const n=Object.create(vd.prototype);n.s=e<hn?-ar:ar,e=e<hn?-e:e;const r=Kx(e,t);return n.n=e/r,n.d=t/r,n}function s2(e){const t={};let n=e,r=fR,i=WK-ar;for(;i<=n;){for(;n%r===hn;)n/=r,t[r]=(t[r]||hn)+ar;i+=ar+fR*r++}return n!==e?n>1&&(t[n]=(t[n]||hn)+ar):t[e]=(t[e]||hn)+ar,t}const Ea=function(e,t){let n=hn,r=ar,i=ar;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw f1();if(e%1!==0)throw Tbe();n=BigInt(e)}if(typeof t=="bigint")r=t;else{if(isNaN(t))throw f1();if(t%1!==0)throw Tbe();r=BigInt(t)}i=n*r}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),r=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(r=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw f1();i=n*r}else if(typeof e=="number"){if(isNaN(e))throw f1();if(e<0&&(i=-ar,e=-e),e%1===0)n=BigInt(e);else if(e>0){let s=1,o=0,a=1,u=1,l=1,c=1e7;for(e>=1&&(s=10**Math.floor(1+Math.log10(e)),e/=s);a<=c&&l<=c;){let f=(o+u)/(a+l);if(e===f){a+l<=c?(n=o+u,r=a+l):l>a?(n=u,r=l):(n=o,r=a);break}else e>f?(o+=u,a+=l):(u+=o,l+=a),a>c?(n=u,r=l):(n=o,r=a)}n=BigInt(n)*BigInt(s),r=BigInt(r)}}else if(typeof e=="string"){let s=0,o=hn,a=hn,u=hn,l=ar,c=ar,f=e.replace(/_/g,"").match(/\d+|./g);if(f===null)throw f1();if(f[s]==="-"?(i=-ar,s++):f[s]==="+"&&s++,f.length===s+1?a=qm(f[s++],i):f[s+1]==="."||f[s]==="."?(f[s]!=="."&&(o=qm(f[s++],i)),s++,(s+1===f.length||f[s+1]==="("&&f[s+3]===")"||f[s+1]==="'"&&f[s+3]==="'")&&(a=qm(f[s],i),l=mc**BigInt(f[s].length),s++),(f[s]==="("&&f[s+2]===")"||f[s]==="'"&&f[s+2]==="'")&&(u=qm(f[s+1],i),c=mc**BigInt(f[s+1].length)-ar,s+=3)):f[s+1]==="/"||f[s+1]===":"?(a=qm(f[s],i),l=qm(f[s+2],ar),s+=3):f[s+3]==="/"&&f[s+1]===" "&&(o=qm(f[s],i),a=qm(f[s+2],i),l=qm(f[s+4],ar),s+=5),f.length<=s)r=l*c,i=n=u+r*o+c*a;else throw f1()}else if(typeof e=="bigint")n=e,i=e,r=ar;else throw f1();if(r===hn)throw Cie();Mt.s=i<hn?-ar:ar,Mt.n=n<hn?-n:n,Mt.d=r<hn?-r:r};function v7t(e,t,n){let r=ar;for(;t>hn;e=e*e%n,t>>=ar)t&ar&&(r=r*e%n);return r}function b7t(e,t){for(;t%fR===hn;t/=fR);for(;t%WK===hn;t/=WK);if(t===ar)return hn;let n=mc%t,r=1;for(;n!==ar;r++)if(n=n*mc%t,r>y7t)return hn;return BigInt(r)}function x7t(e,t,n){let r=ar,i=v7t(mc,n,t);for(let s=0;s<300;s++){if(r===i)return BigInt(s);r=r*mc%t,i=i*mc%t}return 0}function Kx(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function vd(e,t){if(Ea(e,t),this instanceof vd)e=Kx(Mt.d,Mt.n),this.s=Mt.s,this.n=Mt.n/e,this.d=Mt.d/e;else return Ps(Mt.s*Mt.n,Mt.d)}var Cie=function(){return new Error("Division by Zero")},f1=function(){return new Error("Invalid argument")},Tbe=function(){return new Error("Parameters must be integer")};vd.prototype={s:ar,n:hn,d:ar,abs:function(){return Ps(this.n,this.d)},neg:function(){return Ps(-this.s*this.n,this.d)},add:function(e,t){return Ea(e,t),Ps(this.s*this.n*Mt.d+Mt.s*this.d*Mt.n,this.d*Mt.d)},sub:function(e,t){return Ea(e,t),Ps(this.s*this.n*Mt.d-Mt.s*this.d*Mt.n,this.d*Mt.d)},mul:function(e,t){return Ea(e,t),Ps(this.s*Mt.s*this.n*Mt.n,this.d*Mt.d)},div:function(e,t){return Ea(e,t),Ps(this.s*Mt.s*this.n*Mt.d,this.d*Mt.n)},clone:function(){return Ps(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return Ps(this.s*this.n%this.d,ar);if(Ea(e,t),hn===Mt.n*this.d)throw Cie();return Ps(this.s*(Mt.d*this.n)%(Mt.n*this.d),Mt.d*this.d)},gcd:function(e,t){return Ea(e,t),Ps(Kx(Mt.n,this.n)*Kx(Mt.d,this.d),Mt.d*this.d)},lcm:function(e,t){return Ea(e,t),Mt.n===hn&&this.n===hn?Ps(hn,ar):Ps(Mt.n*this.n,Kx(Mt.n,this.n)*Kx(Mt.d,this.d))},inverse:function(){return Ps(this.s*this.d,this.n)},pow:function(e,t){if(Ea(e,t),Mt.d===ar)return Mt.s<hn?Ps((this.s*this.d)**Mt.n,this.n**Mt.n):Ps((this.s*this.n)**Mt.n,this.d**Mt.n);if(this.s<hn)return null;let n=s2(this.n),r=s2(this.d),i=ar,s=ar;for(let o in n)if(o!=="1"){if(o==="0"){i=hn;break}if(n[o]*=Mt.n,n[o]%Mt.d===hn)n[o]/=Mt.d;else return null;i*=BigInt(o)**n[o]}for(let o in r)if(o!=="1"){if(r[o]*=Mt.n,r[o]%Mt.d===hn)r[o]/=Mt.d;else return null;s*=BigInt(o)**r[o]}return Mt.s<hn?Ps(s,i):Ps(i,s)},log:function(e,t){if(Ea(e,t),this.s<=hn||Mt.s<=hn)return null;const n={},r=s2(Mt.n),i=s2(Mt.d),s=s2(this.n),o=s2(this.d);for(const l in i)r[l]=(r[l]||hn)-i[l];for(const l in o)s[l]=(s[l]||hn)-o[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in s)l!=="1"&&(n[l]=!0);let a=null,u=null;for(const l in n){const c=r[l]||hn,f=s[l]||hn;if(c===hn){if(f!==hn)return null;continue}let d=f,h=c;const p=Kx(d,h);if(d/=p,h/=p,a===null&&u===null)a=d,u=h;else if(d*u!==a*h)return null}return a!==null&&u!==null?Ps(a,u):null},equals:function(e,t){return Ea(e,t),this.s*this.n*Mt.d===Mt.s*Mt.n*this.d},lt:function(e,t){return Ea(e,t),this.s*this.n*Mt.d<Mt.s*Mt.n*this.d},lte:function(e,t){return Ea(e,t),this.s*this.n*Mt.d<=Mt.s*Mt.n*this.d},gt:function(e,t){return Ea(e,t),this.s*this.n*Mt.d>Mt.s*Mt.n*this.d},gte:function(e,t){return Ea(e,t),this.s*this.n*Mt.d>=Mt.s*Mt.n*this.d},compare:function(e,t){Ea(e,t);let n=this.s*this.n*Mt.d-Mt.s*Mt.n*this.d;return(hn<n)-(n<hn)},ceil:function(e){return e=mc**BigInt(e||0),Ps(vh(this.s*e*this.n/this.d)+(e*this.n%this.d>hn&&this.s>=hn?ar:hn),e)},floor:function(e){return e=mc**BigInt(e||0),Ps(vh(this.s*e*this.n/this.d)-(e*this.n%this.d>hn&&this.s<hn?ar:hn),e)},round:function(e){return e=mc**BigInt(e||0),Ps(vh(this.s*e*this.n/this.d)+this.s*((this.s>=hn?ar:hn)+fR*(e*this.n%this.d)>this.d?ar:hn),e)},roundTo:function(e,t){Ea(e,t);const n=this.n*Mt.d,r=this.d*Mt.n,i=n%r;let s=vh(n/r);return i+i>=r&&s++,Ps(this.s*s*Mt.n,Mt.d)},divisible:function(e,t){return Ea(e,t),!(!(Mt.n*this.d)||this.n*Mt.d%(Mt.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,n=this.d;e=e||15;let r=b7t(t,n),i=x7t(t,n,r),s=this.s<hn?"-":"";if(s+=vh(t/n),t%=n,t*=mc,t&&(s+="."),r){for(let o=i;o--;)s+=vh(t/n),t%=n,t*=mc;s+="(";for(let o=r;o--;)s+=vh(t/n),t%=n,t*=mc;s+=")"}else for(let o=e;t&&o--;)s+=vh(t/n),t%=n,t*=mc;return s},toFraction:function(e){let t=this.n,n=this.d,r=this.s<hn?"-":"";if(n===ar)r+=t;else{let i=vh(t/n);e&&i>hn&&(r+=i,r+=" ",t%=n),r+=t,r+="/",r+=n}return r},toLatex:function(e){let t=this.n,n=this.d,r=this.s<hn?"-":"";if(n===ar)r+=t;else{let i=vh(t/n);e&&i>hn&&(r+=i,t%=n),r+="\\frac{",r+=t,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let e=this.n,t=this.d,n=[];do{n.push(vh(e/t));let r=e%t;e=t,t=r}while(e!==ar);return n},simplify:function(e){const t=BigInt(1/(e||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let s=Ps(r[i-1],ar);for(let a=i-2;a>=0;a--)s=s.inverse().add(r[a]);let o=s.sub(n);if(o.n*t<o.d)return s.mul(this.s)}return this}};var w7t="Fraction",_7t=[],E7t=di(w7t,_7t,()=>(Object.defineProperty(vd,"name",{value:"Fraction"}),vd.prototype.constructor=vd,vd.prototype.type="Fraction",vd.prototype.isFraction=!0,vd.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},vd.fromJSON=function(e){return new vd(e)},vd),{isClass:!0}),C7t="Matrix",T7t=[],A7t=di(C7t,T7t,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function zH(e,t,n){var r=e.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Ys(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),s="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(s);case 8:return"".concat(e.toOctal()).concat(s);case 16:return"".concat(e.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(t," not supported "))}}function S7t(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=K8e(t);switch(n){case"fixed":return I7t(e,r);case"exponential":return Abe(e,r);case"engineering":return D7t(e,r);case"bin":return zH(e,2,i);case"oct":return zH(e,8,i);case"hex":return zH(e,16,i);case"auto":{var s=Sbe(t==null?void 0:t.lowerExp,-3),o=Sbe(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,u=e.toSignificantDigits(r),l=u.e;return l>=s&&l<o?a=u.toFixed():a=Abe(e,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function D7t(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),s=i.toPrecision(t);if(s.includes("e")){var o=e.constructor;s=new o(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function Abe(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function I7t(e,t){return e.toFixed(t)}function Sbe(e,t){return xs(e)?e:Go(e)?e.toNumber():t}function zo(e,t){var n=k7t(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function k7t(e,t){if(typeof e=="number")return BK(e,t);if(Go(e))return S7t(e,t);if(R7t(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return l$e(e,t);if(sg(e))return Dbe(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(r=>Dbe(r)+": "+zo(e[r],t));return"{"+n.join(", ")+"}"}return String(e)}function Dbe(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in Ibe?Ibe[i]:i,r++}return'"'+n+'"'}var Ibe={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function l$e(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=l$e(e[i],t);return n+="]",n}else return zo(e,t)}function R7t(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function Us(e,t,n){if(!(this instanceof Us))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}Us.prototype=new RangeError;Us.prototype.constructor=RangeError;Us.prototype.name="DimensionError";Us.prototype.isDimensionError=!0;function hS(e,t,n){if(!(this instanceof hS))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}hS.prototype=new RangeError;hS.prototype.constructor=RangeError;hS.prototype.name="IndexError";hS.prototype.isIndexError=!0;function $l(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function c$e(e,t,n){var r,i=e.length;if(i!==t[n])throw new Us(i,t[n]);if(n<t.length-1){var s=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new Us(t.length-1,t.length,"<");c$e(e[r],t,s)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new Us(t.length+1,t.length,">")}function kbe(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new Us(e.length,0)}else c$e(e,t,0)}function to(e,t){if(e!==void 0){if(!xs(e)||!Ys(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new hS(e,t)}}function GK(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!xs(i)||!Ys(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+zo(t)+")")}),(xs(e)||Go(e))&&(e=[e]);var r=n!==void 0?n:0;return YK(e,t,0,r),e}function YK(e,t,n,r){var i,s,o=e.length,a=t[n],u=Math.min(o,a);if(e.length=a,n<t.length-1){var l=n+1;for(i=0;i<u;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),YK(s,t,l,r);for(i=u;i<a;i++)s=[],e[i]=s,YK(s,t,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function f$e(e,t){var n=P7t(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Us(0,r,"!=");t=Tie(t,r);var i=d$e(t);if(r!==i)throw new Us(i,r,"!=");try{return N7t(n,t)}catch(s){throw s instanceof Us?new Us(i,r,"!="):s}}function Tie(e,t){var n=d$e(e),r=e.slice(),i=-1,s=e.indexOf(i),o=e.indexOf(i,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,u=t%n===0;if(a)if(u)r[s]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return r}function d$e(e){return e.reduce((t,n)=>t*n,1)}function N7t(e,t){for(var n=e,r,i=t.length-1;i>0;i--){var s=t[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}function h$e(e,t,n,r){var i=r||$l(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=p$e(e,t,0);i.length<t;)i.push(1);return e}function p$e(e,t,n){var r,i;if(Array.isArray(e)){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=p$e(e[r],t,s)}else for(var o=n;o<t;o++)e=[e];return e}function P7t(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function n(r){Array.isArray(r)?r.forEach(n):t.push(r)}),t}function Aie(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],o=Array.isArray(s);if(i===0&&o&&(r=s.length),o&&s.length!==r)return;var a=o?Aie(s,t):t(s);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function m$e(e,t,n,r){if(r<n){if(e.length!==t.length)throw new Us(e.length,t.length);for(var i=[],s=0;s<e.length;s++)i[s]=m$e(e[s],t[s],n,r+1);return i}else return e.concat(t)}function O7t(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,r){return m$e(n,r,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function F7t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map(d=>d.length),i=Math.max(...r),s=new Array(i).fill(null),o=0;o<t.length;o++)for(var a=t[o],u=r[o],l=0;l<u;l++){var c=i-u+l;a[l]>s[c]&&(s[c]=a[l])}for(var f=0;f<t.length;f++)g$e(t[f],s);return s}function g$e(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var s=n-r+i;if(e[i]<t[s]&&e[i]>1||e[i]>t[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[s]))}}function Rbe(e,t){var n=$l(e);if(zT(n,t))return e;g$e(n,t);var r=F7t(n,t),i=r.length,s=[...Array(i-n.length).fill(1),...n],o=M7t(e);n.length<i&&(o=f$e(o,s),n=$l(o));for(var a=0;a<i;a++)n[a]<r[a]&&(o=$7t(o,r[a],a),n=$l(o));return o}function $7t(e,t,n){return O7t(...Array(t).fill(e),n)}function y$e(e,t){if(!Array.isArray(e))throw new Error("Array expected");var n=$l(e);if(t.length!==n.length)throw new Us(t.length,n.length);for(var r=0;r<t.length;r++)to(t[r],n[r]);return t.reduce((i,s)=>i[s],e)}function M7t(e){return fT([],e)}function L$(e,t,n){if(P$.isTypedFunction(e)){var r=(t.isMatrix?t.size():$l(t)).map(()=>0),i=t.isMatrix?t.get(r):y$e(t,r),s=Object.keys(e.signatures).length===1,o=L7t(e,i,r,t),a=s?Object.values(e.signatures)[0]:e;return o>=1&&o<=3?function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return Nbe(a,l.slice(0,o),n,e.name)}:function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return Nbe(a,l,n,e.name)}}return e}function L7t(e,t,n,r){for(var i=[t,n,r],s=3;s>0;s--){var o=i.slice(0,s);if(P$.resolve(e,o)!==null)return s}}function Nbe(e,t,n,r){try{return e(...t)}catch(i){B7t(i,t,n,r)}}function B7t(e,t,n,r){var i;if(e instanceof TypeError&&((i=e.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(pv(t[0]))),t.length>=2&&s.push("index: ".concat(pv(t[1]))),t.length>=3&&s.push("array: ".concat(pv(t[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(e.message))}var j7t="DenseMatrix",U7t=["Matrix"],z7t=di(j7t,U7t,e=>{var{Matrix:t}=e;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!sg(f))throw new Error("Invalid datatype: "+f);if(ua(c))c.type==="DenseMatrix"?(this._data=Eo(c._data),this._size=Eo(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Uo(c.data)&&Uo(c.size))this._data=c.data,this._size=c.size,kbe(this._data,this._size),this._datatype=f||c.datatype;else if(Uo(c))this._data=l(c),this._size=$l(this._data),kbe(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+pv(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new t,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Aie(this._data,pv)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return y$e(this._data,c)},n.prototype.set=function(c,f,d){if(!Uo(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Us(c.length,this._size.length,"<");var h,p,m,g=c.map(function(v){return v+1});u(this,g,d);var y=this._data;for(h=0,p=c.length-1;h<p;h++)m=c[h],to(m,y.length),y=y[m];return m=c[c.length-1],to(m,y.length),y[m]=f,this};function r(c,f){if(!wie(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new Us(h.length,c._size.length);for(var p=f.min(),m=f.max(),g=0,y=c._size.length;g<y;g++)to(p[g],c._size[g]),to(m[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,m=f.dimension(h);return p?m.map(function(g){return to(g,c.length),c[g]}).valueOf():m.map(function(g){to(g,c.length);var y=c[g];return i(y,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),m=f.isScalar(),g;if(ua(d)?(g=d.size(),d=d.valueOf()):g=$l(d),m){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!zT(g,p))try{g.length===0?d=Rbe([d],p):d=Rbe(d,p),g=$l(d)}catch{}if(p.length<c._size.length)throw new Us(p.length,c._size.length,"<");if(g.length<p.length){for(var y=0,v=0;p[y]===1&&g[y]===1;)y++;for(;p[y]===1;)v++,y++;d=h$e(d,p.length,v,g)}if(!zT(p,g))throw new Us(p,g,">");var b=f.max().map(function(C){return C+1});u(c,b,h);var x=p.length,_=0;o(c._data,f,d,x,_)}return c}function o(c,f,d,h,p){var m=p===h-1,g=f.dimension(p);m?g.forEach(function(y,v){to(y),c[y]=d[v[0]]}):g.forEach(function(y,v){to(y),o(c[y],f,d[v[0]],h,p+1)})}n.prototype.resize=function(c,f,d){if(!R$(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),p=d?this.clone():this;return a(p,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;Uo(h);)h=h[0];return h}return c._size=f.slice(0),c._data=GK(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=f$e(d._data,c);var h=d._size.reduce((p,m)=>p*m);return d._size=Tie(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var m=0,g=f.length;m<g;m++)f[m]>h[m]&&(h[m]=f[m],p=!0);p&&a(c,h,d)}n.prototype.clone=function(){var c=new n({data:Eo(this._data),size:Eo(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=this,d=f.size();if(d.length===1){for(var h=0;h<d[0];h++)c(f._data,h,[h]);return}var p=Array(d.length).fill(0),m=Array(d.length-1),g=m.length-1;m[0]=f._data[0];for(var y=0;y<g;y++)m[y+1]=m[y][0];for(p[g]=-1;;){var v=void 0;for(v=g;v>=0;v--){if(p[v]++,p[v]===d[v]){p[v]=0;continue}m[v]=v===0?f._data[p[v]]:m[v-1][p[v]];for(var b=v;b<g;b++)m[b+1]=m[b][0];for(var x=0;x<d[m.length];x++)p[m.length]=x,c(m[g],x,p.slice(0));break}if(v===-1)break}},n.prototype.map=function(c){var f=this,d=new n(f),h=L$(c,f._data,"map");return d._forEach(function(p,m,g){p[m]=h(p[m],g,f)}),d},n.prototype.forEach=function(c){var f=this,d=L$(c,f._data,"map");f._forEach(function(h,p,m){d(h[p],m,f)})},n.prototype[Symbol.iterator]=function*(){var c=function*(d,h){if(Uo(d))for(var p=0;p<d.length;p++)yield*c(d[p],h.concat(p));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(y){var v=h.map(b=>[b[y]]);f.push(new n(v,c._datatype))},m=0;m<d[1];m++)p(m);return f},n.prototype.toArray=function(){return Eo(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return zo(this._data,c)},n.prototype.toString=function(){return zo(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Go(c)&&(c=c.toNumber()),!xs(c)||!Ys(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],m=Math.min(h-d,p-f),g=[],y=0;y<m;y++)g[y]=this._data[y+d][y+f];return new n({data:g,size:[m],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!Uo(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(T){if(Go(T)&&(T=T.toNumber()),!xs(T)||!Ys(T)||T<1)throw new Error("Size values must be positive integers");return T}),d){if(Go(d)&&(d=d.toNumber()),!xs(d)||!Ys(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,m=d<0?-d:0,g=c[0],y=c[1],v=Math.min(g-m,y-p),b;if(Uo(f)){if(f.length!==v)throw new Error("Invalid value array length");b=function(S){return f[S]}}else if(ua(f)){var x=f.size();if(x.length!==1||x[0]!==v)throw new Error("Invalid matrix length");b=function(S){return f.get([S])}}else b=function(){return f};h||(h=Go(b(0))?b(0).mul(0):0);var _=[];if(c.length>0){_=GK(_,c,h);for(var C=0;C<v;C++)_[C+m][C+p]=b(C)}return new n({data:_,size:[g,y]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!xs(c)||!Ys(c)||!xs(f)||!Ys(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return to(c,this._size[0]),to(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return ua(c)?l(c.valueOf()):Uo(c)?c.map(l):c}return n},{isClass:!0});function Bb(e,t,n){return e&&typeof e.map=="function"?e.map(function(r){return Bb(r,t)}):t(e)}var v$e="number",x9="number, number";function b$e(e){return Math.abs(e)}b$e.signature=v$e;function x$e(e,t){return e+t}x$e.signature=x9;function w$e(e,t){return e-t}w$e.signature=x9;function _$e(e,t){return e*t}_$e.signature=x9;function E$e(e){return-e}E$e.signature=v$e;function C$e(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}C$e.signature=x9;function KK(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return KK(e,n)*KK(n+1,t)}function B$(e){var t;if(Ys(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:KK(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*B$(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,s=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*e))}--e,t=FC[0];for(var o=1;o<FC.length;++o)t+=FC[o]/(e+o);var a=e+T$e+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*t}B$.signature="number";var T$e=4.7421875,FC=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function V7t(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r))}var Pbe="isZero",H7t=["typed","equalScalar"],q7t=di(Pbe,H7t,e=>{var{typed:t,equalScalar:n}=e;return t(Pbe,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>Bb(i,r))})});function W7t(e,t,n,r){return O$(e.re,t.re,n,r)&&O$(e.im,t.im,n,r)}var G7t=di("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),j$="equalScalar",Y7t=["typed","config"],K7t=di(j$,Y7t,e=>{var{typed:t,config:n}=e,r=G7t({typed:t});return t(j$,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return O$(s,o,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||V7t(s,o,n.relTol,n.absTol)},"bigint, bigint":function(s,o){return s===o},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return W7t(s,o,n.relTol,n.absTol)}},r)});di(j$,["typed","config"],e=>{var{typed:t,config:n}=e;return t(j$,{"number, number":function(i,s){return O$(i,s,n.relTol,n.absTol)}})});var X7t="SparseMatrix",Q7t=["typed","equalScalar","Matrix"],J7t=di(X7t,Q7t,e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!sg(g))throw new Error("Invalid datatype: "+g);if(ua(m))s(this,m,g);else if(m&&Uo(m.index)&&Uo(m.ptr)&&Uo(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=g||m.datatype;else if(Uo(m))o(this,m,g);else{if(m)throw new TypeError("Unsupported type of data ("+pv(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(m,g,y){g.type==="SparseMatrix"?(m._values=g._values?Eo(g._values):void 0,m._index=Eo(g._index),m._ptr=Eo(g._ptr),m._size=Eo(g._size),m._datatype=y||g._datatype):o(m,g.valueOf(),y||g._datatype)}function o(m,g,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var v=g.length,b=0,x=n,_=0;if(sg(y)&&(x=t.find(n,[y,y])||n,_=t.convert(0,y)),v>0){var C=0;do{m._ptr.push(m._index.length);for(var T=0;T<v;T++){var S=g[T];if(Uo(S)){if(C===0&&b<S.length&&(b=S.length),C<S.length){var k=S[C];x(k,_)||(m._values.push(k),m._index.push(T))}}else C===0&&b<1&&(b=1),x(S,_)||(m._values.push(S),m._index.push(T))}C++}while(C<b)}m._ptr.push(m._index.length),m._size=[v,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(m,g){return new i(m,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Aie(this._values,pv)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.density=function(){var m=this._size[0],g=this._size[1];return m!==0&&g!==0?this._index.length/(m*g):0},i.prototype.subset=function(m,g,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,m);case 2:case 3:return u(this,m,g,y);default:throw new SyntaxError("Wrong number of arguments")}};function a(m,g){if(!wie(g))throw new TypeError("Invalid index");var y=g.isScalar();if(y)return m.get(g.min());var v=g.size();if(v.length!==m._size.length)throw new Us(v.length,m._size.length);var b,x,_,C,T=g.min(),S=g.max();for(b=0,x=m._size.length;b<x;b++)to(T[b],m._size[b]),to(S[b],m._size[b]);var k=m._values,I=m._index,R=m._ptr,F=g.dimension(0),O=g.dimension(1),B=[],H=[];F.forEach(function(Q,M){H[Q]=M[0],B[Q]=!0});var U=k?[]:void 0,G=[],Y=[];return O.forEach(function(Q){for(Y.push(G.length),_=R[Q],C=R[Q+1];_<C;_++)b=I[_],B[b]===!0&&(G.push(H[b]),U&&U.push(k[_]))}),Y.push(G.length),new i({values:U,index:G,ptr:Y,size:v,datatype:m._datatype})}function u(m,g,y,v){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var b=g.size(),x=g.isScalar(),_;if(ua(y)?(_=y.size(),y=y.toArray()):_=$l(y),x){if(_.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),y,v)}else{if(b.length!==1&&b.length!==2)throw new Us(b.length,m._size.length,"<");if(_.length<b.length){for(var C=0,T=0;b[C]===1&&_[C]===1;)C++;for(;b[C]===1;)T++,C++;y=h$e(y,b.length,T,_)}if(!zT(b,_))throw new Us(b,_,">");if(b.length===1){var S=g.dimension(0);S.forEach(function(R,F){to(R),m.set([R,0],y[F[0]],v)})}else{var k=g.dimension(0),I=g.dimension(1);k.forEach(function(R,F){to(R),I.forEach(function(O,B){to(O),m.set([R,O],y[F[0]][B[0]],v)})})}}return m}i.prototype.get=function(m){if(!Uo(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Us(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=m[0],y=m[1];to(g,this._size[0]),to(y,this._size[1]);var v=l(g,this._ptr[y],this._ptr[y+1],this._index);return v<this._ptr[y+1]&&this._index[v]===g?this._values[v]:0},i.prototype.set=function(m,g,y){if(!Uo(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Us(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var v=m[0],b=m[1],x=this._size[0],_=this._size[1],C=n,T=0;sg(this._datatype)&&(C=t.find(n,[this._datatype,this._datatype])||n,T=t.convert(0,this._datatype)),(v>x-1||b>_-1)&&(d(this,Math.max(v+1,x),Math.max(b+1,_),y),x=this._size[0],_=this._size[1]),to(v,x),to(b,_);var S=l(v,this._ptr[b],this._ptr[b+1],this._index);return S<this._ptr[b+1]&&this._index[S]===v?C(g,T)?c(S,b,this._values,this._index,this._ptr):this._values[S]=g:C(g,T)||f(S,v,b,g,this._values,this._index,this._ptr),this};function l(m,g,y,v){if(y-g===0)return y;for(var b=g;b<y;b++)if(v[b]===m)return b;return g}function c(m,g,y,v,b){y.splice(m,1),v.splice(m,1);for(var x=g+1;x<b.length;x++)b[x]--}function f(m,g,y,v,b,x,_){b.splice(m,0,v),x.splice(m,0,g);for(var C=y+1;C<_.length;C++)_[C]++}i.prototype.resize=function(m,g,y){if(!R$(m))throw new TypeError("Array or Matrix expected");var v=m.valueOf().map(x=>Array.isArray(x)&&x.length===1?x[0]:x);if(v.length!==2)throw new Error("Only two dimensions matrix are supported");v.forEach(function(x){if(!xs(x)||!Ys(x)||x<0)throw new TypeError("Invalid size, must contain positive integers (size: "+zo(v)+")")});var b=y?this.clone():this;return d(b,v[0],v[1],g)};function d(m,g,y,v){var b=v||0,x=n,_=0;sg(m._datatype)&&(x=t.find(n,[m._datatype,m._datatype])||n,_=t.convert(0,m._datatype),b=t.convert(b,m._datatype));var C=!x(b,_),T=m._size[0],S=m._size[1],k,I,R;if(y>S){for(I=S;I<y;I++)if(m._ptr[I]=m._values.length,C)for(k=0;k<T;k++)m._values.push(b),m._index.push(k);m._ptr[y]=m._values.length}else y<S&&(m._ptr.splice(y+1,S-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(S=y,g>T){if(C){var F=0;for(I=0;I<S;I++){m._ptr[I]=m._ptr[I]+F,R=m._ptr[I+1]+F;var O=0;for(k=T;k<g;k++,O++)m._values.splice(R+O,0,b),m._index.splice(R+O,0,k),F++}m._ptr[S]=m._values.length}}else if(g<T){var B=0;for(I=0;I<S;I++){m._ptr[I]=m._ptr[I]-B;var H=m._ptr[I],U=m._ptr[I+1]-B;for(R=H;R<U;R++)k=m._index[R],k>g-1&&(m._values.splice(R,1),m._index.splice(R,1),B++)}m._ptr[I]=m._values.length}return m._size[0]=g,m._size[1]=y,m}i.prototype.reshape=function(m,g){if(!Uo(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(Q){if(!xs(Q)||!Ys(Q)||Q<=-2||Q===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+zo(m)+")")});var y=this._size[0]*this._size[1];m=Tie(m,y);var v=m[0]*m[1];if(y!==v)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=g?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return b;for(var x=[],_=0;_<b._ptr.length;_++)for(var C=0;C<b._ptr[_+1]-b._ptr[_];C++)x.push(_);for(var T=b._values.slice(),S=b._index.slice(),k=0;k<b._index.length;k++){var I=S[k],R=x[k],F=I*b._size[1]+R;x[k]=F%m[1],S[k]=Math.floor(F/m[1])}b._values.length=0,b._index.length=0,b._ptr.length=m[1]+1,b._size=m.slice();for(var O=0;O<b._ptr.length;O++)b._ptr[O]=0;for(var B=0;B<T.length;B++){var H=S[B],U=x[B],G=T[B],Y=l(H,b._ptr[U],b._ptr[U+1],b._index);f(Y,H,U,G,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var m=new i({values:this._values?Eo(this._values):void 0,index:Eo(this._index),ptr:Eo(this._ptr),size:Eo(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,v=this._size[0],b=this._size[1],x=L$(m,y,"map"),_=function(T,S,k){return x(T,[S,k],y)};return h(this,0,v-1,0,b-1,_,g)};function h(m,g,y,v,b,x,_){var C=[],T=[],S=[],k=n,I=0;sg(m._datatype)&&(k=t.find(n,[m._datatype,m._datatype])||n,I=t.convert(0,m._datatype));for(var R=function(L,q,J){var re=x(L,q,J);k(re,I)||(C.push(re),T.push(q))},F=v;F<=b;F++){S.push(C.length);var O=m._ptr[F],B=m._ptr[F+1];if(_)for(var H=O;H<B;H++){var U=m._index[H];U>=g&&U<=y&&R(m._values[H],U-g,F-v)}else{for(var G={},Y=O;Y<B;Y++){var Q=m._index[Y];G[Q]=m._values[Y]}for(var M=g;M<=y;M++){var j=M in G?G[M]:0;R(j,M-g,F-v)}}}return S.push(C.length),new i({values:C,index:T,ptr:S,size:[y-g+1,b-v+1]})}i.prototype.forEach=function(m,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,v=this._size[0],b=this._size[1],x=L$(m,y,"forEach"),_=0;_<b;_++){var C=this._ptr[_],T=this._ptr[_+1];if(g)for(var S=C;S<T;S++){var k=this._index[S];x(this._values[S],[k,_],y)}else{for(var I={},R=C;R<T;R++){var F=this._index[R];I[F]=this._values[R]}for(var O=0;O<v;O++){var B=O in I?I[O]:0;x(B,[O,_],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],g=0;g<m;g++)for(var y=this._ptr[g],v=this._ptr[g+1],b=y;b<v;b++){var x=this._index[b];yield{value:this._values[b],index:[x,g]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,g,y,v,b){var x=v[0],_=v[1],C=[],T,S;for(T=0;T<x;T++)for(C[T]=[],S=0;S<_;S++)C[T][S]=0;for(S=0;S<_;S++)for(var k=y[S],I=y[S+1],R=k;R<I;R++)T=g[R],C[T][S]=m?b?Eo(m[R]):m[R]:1;return C}return i.prototype.format=function(m){for(var g=this._size[0],y=this._size[1],v=this.density(),b="Sparse Matrix ["+zo(g,m)+" x "+zo(y,m)+"] density: "+zo(v,m)+`
`,x=0;x<y;x++)for(var _=this._ptr[x],C=this._ptr[x+1],T=_;T<C;T++){var S=this._index[T];b+=`
    (`+zo(S,m)+", "+zo(x,m)+") ==> "+(this._values?zo(this._values[T],m):"X")}return b},i.prototype.toString=function(){return zo(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(Go(m)&&(m=m.toNumber()),!xs(m)||!Ys(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=m>0?m:0,y=m<0?-m:0,v=this._size[0],b=this._size[1],x=Math.min(v-y,b-g),_=[],C=[],T=[];T[0]=0;for(var S=g;S<b&&_.length<x;S++)for(var k=this._ptr[S],I=this._ptr[S+1],R=k;R<I;R++){var F=this._index[R];if(F===S-g+y){_.push(this._values[R]),C[_.length-1]=F-y;break}}return T.push(_.length),new i({values:_,index:C,ptr:T,size:[x,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,g,y,v,b){if(!Uo(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(Q){if(Go(Q)&&(Q=Q.toNumber()),!xs(Q)||!Ys(Q)||Q<1)throw new Error("Size values must be positive integers");return Q}),y){if(Go(y)&&(y=y.toNumber()),!xs(y)||!Ys(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var x=n,_=0;sg(b)&&(x=t.find(n,[b,b])||n,_=t.convert(0,b));var C=y>0?y:0,T=y<0?-y:0,S=m[0],k=m[1],I=Math.min(S-T,k-C),R;if(Uo(g)){if(g.length!==I)throw new Error("Invalid value array length");R=function(M){return g[M]}}else if(ua(g)){var F=g.size();if(F.length!==1||F[0]!==I)throw new Error("Invalid matrix length");R=function(M){return g.get([M])}}else R=function(){return g};for(var O=[],B=[],H=[],U=0;U<k;U++){H.push(O.length);var G=U-C;if(G>=0&&G<I){var Y=R(G);x(Y,_)||(B.push(G+T),O.push(Y))}}return H.push(O.length),new i({values:O,index:B,ptr:H,size:[S,k]})},i.prototype.swapRows=function(m,g){if(!xs(m)||!Ys(m)||!xs(g)||!Ys(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return to(m,this._size[0]),to(g,this._size[0]),i._swapRows(m,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,g,y,v,b){for(var x=v[m],_=v[m+1],C=x;C<_;C++)b(y[C],g[C])},i._swapRows=function(m,g,y,v,b,x){for(var _=0;_<y;_++){var C=x[_],T=x[_+1],S=l(m,C,T,b),k=l(g,C,T,b);if(S<T&&k<T&&b[S]===m&&b[k]===g){if(v){var I=v[S];v[S]=v[k],v[k]=I}continue}if(S<T&&b[S]===m&&(k>=T||b[k]!==g)){var R=v?v[S]:void 0;b.splice(k,0,g),v&&v.splice(k,0,R),b.splice(k<=S?S+1:S,1),v&&v.splice(k<=S?S+1:S,1);continue}if(k<T&&b[k]===g&&(S>=T||b[S]!==m)){var F=v?v[k]:void 0;b.splice(S,0,m),v&&v.splice(S,0,F),b.splice(S<=k?k+1:k,1),v&&v.splice(S<=k?k+1:k,1)}}},i},{isClass:!0}),Z7t="number",ejt=["typed"];function tjt(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],r=t[2],i=t[3];return{input:e,radix:n,integerPart:r,fractionalPart:i}}else return null}function njt(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++){var i=parseInt(e.fractionalPart[r],e.radix);n+=i/Math.pow(e.radix,r+1)}var s=t+n;if(isNaN(s))throw new SyntaxError('String "'+e.input+'" is not a valid number');return s}var rjt=di(Z7t,ejt,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=tjt(i);if(s)return njt(s);var o=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),i=a[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":t.referToSelf(r=>i=>Bb(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),ijt="bignumber",sjt=["typed","BigNumber"],ojt=di(ijt,sjt,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=n(s[1]),u=new n(2).pow(Number(o));if(a.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return a.gte(l)?a.sub(u):a}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Fraction:function(i){return new n(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new n(0)},"Array | Matrix":t.referToSelf(r=>i=>Bb(i,r))})}),ajt="fraction",ujt=["typed","Fraction"],ljt=di(ajt,ujt,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,s){return new n(i,s)},"bigint, bigint":function(i,s){return new n(i,s)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Object:function(i){return new n(i)},"Array | Matrix":t.referToSelf(r=>i=>Bb(i,r))})}),Obe="matrix",cjt=["typed","Matrix","DenseMatrix","SparseMatrix"],fjt=di(Obe,cjt,e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(Obe,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,u){return s([],a,u)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,u){if(a==="dense"||a==="default"||a===void 0)return new r(o,u);if(a==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),Fbe="unaryMinus",djt=["typed"],hjt=di(Fbe,djt,e=>{var{typed:t}=e;return t(Fbe,{number:E$e,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>r=>{var i=r.clone();return i.value=t.find(n,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(n=>r=>Bb(r,n))})}),$be="abs",pjt=["typed"],mjt=di($be,pjt,e=>{var{typed:t}=e;return t($be,{number:b$e,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>r=>Bb(r,n))})}),Mbe="addScalar",gjt=["typed"],yjt=di(Mbe,gjt,e=>{var{typed:t}=e;return t(Mbe,{"number, number":x$e,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),Lbe="subtractScalar",vjt=["typed"],bjt=di(Lbe,vjt,e=>{var{typed:t}=e;return t(Lbe,{"number, number":w$e,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),xjt="matAlgo11xS0s",wjt=["typed","equalScalar"],_jt=di(xjt,wjt,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=n,y=0,v=o;typeof d=="string"&&(m=d,g=t.find(n,[m,m]),y=t.convert(0,m),s=t.convert(s,m),v=t.find(o,[m,m]));for(var b=[],x=[],_=[],C=0;C<p;C++){_[C]=x.length;for(var T=c[C],S=c[C+1],k=T;k<S;k++){var I=l[k],R=a?v(s,u[k]):v(u[k],s);g(R,y)||(x.push(I),b.push(R))}}return _[p]=x.length,i.createSparseMatrix({values:b,index:x,ptr:_,size:[h,p],datatype:m})}}),Ejt="matAlgo14xDs",Cjt=["typed"],Tjt=di(Ejt,Cjt,e=>{var{typed:t}=e;return function(i,s,o,a){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,s=t.convert(s,f),d=t.find(o,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,s,a):[];return i.createDenseMatrix({data:h,size:Eo(l),datatype:f})};function n(r,i,s,o,a,u,l){var c=[];if(i===s.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,a[f]):r(a[f],u);else for(var d=0;d<o;d++)c[d]=n(r,i+1,s,s[i+1],a[d],u,l);return c}}),Ajt="multiplyScalar",Sjt=["typed"],Djt=di(Ajt,Sjt,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":_$e,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),Bbe="multiply",Ijt=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],kjt=di(Bbe,Ijt,e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=e,a=_jt({typed:t,equalScalar:s}),u=Tjt({typed:t});function l(_,C){switch(_.length){case 1:switch(C.length){case 1:if(_[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(_[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+C[0]+")");break;case 2:if(_[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function c(_,C,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return o(_,C)}function f(_,C){if(C.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(_,C)}function d(_,C){var T=_._data,S=_._size,k=_._datatype||_.getDataType(),I=C._data,R=C._size,F=C._datatype||C.getDataType(),O=S[0],B=R[1],H,U=r,G=i;k&&F&&k===F&&typeof k=="string"&&k!=="mixed"&&(H=k,U=t.find(r,[H,H]),G=t.find(i,[H,H]));for(var Y=[],Q=0;Q<B;Q++){for(var M=G(T[0],I[0][Q]),j=1;j<O;j++)M=U(M,G(T[j],I[j][Q]));Y[Q]=M}return _.createDenseMatrix({data:Y,size:[B],datatype:k===_._datatype&&F===C._datatype?H:void 0})}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":v}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":x});function m(_,C){var T=_._data,S=_._size,k=_._datatype||_.getDataType(),I=C._data,R=C._datatype||C.getDataType(),F=S[0],O=S[1],B,H=r,U=i;k&&R&&k===R&&typeof k=="string"&&k!=="mixed"&&(B=k,H=t.find(r,[B,B]),U=t.find(i,[B,B]));for(var G=[],Y=0;Y<F;Y++){for(var Q=T[Y],M=U(Q[0],I[0]),j=1;j<O;j++)M=H(M,U(Q[j],I[j]));G[Y]=M}return _.createDenseMatrix({data:G,size:[F],datatype:k===_._datatype&&R===C._datatype?B:void 0})}function g(_,C){var T=_._data,S=_._size,k=_._datatype||_.getDataType(),I=C._data,R=C._size,F=C._datatype||C.getDataType(),O=S[0],B=S[1],H=R[1],U,G=r,Y=i;k&&F&&k===F&&typeof k=="string"&&k!=="mixed"&&k!=="mixed"&&(U=k,G=t.find(r,[U,U]),Y=t.find(i,[U,U]));for(var Q=[],M=0;M<O;M++){var j=T[M];Q[M]=[];for(var W=0;W<H;W++){for(var L=Y(j[0],I[0][W]),q=1;q<B;q++)L=G(L,Y(j[q],I[q][W]));Q[M][W]=L}}return _.createDenseMatrix({data:Q,size:[O,H],datatype:k===_._datatype&&F===C._datatype?U:void 0})}function y(_,C){var T=_._data,S=_._size,k=_._datatype||_.getDataType(),I=C._values,R=C._index,F=C._ptr,O=C._size,B=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!I)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var H=S[0],U=O[1],G,Y=r,Q=i,M=s,j=0;k&&B&&k===B&&typeof k=="string"&&k!=="mixed"&&(G=k,Y=t.find(r,[G,G]),Q=t.find(i,[G,G]),M=t.find(s,[G,G]),j=t.convert(0,G));for(var W=[],L=[],q=[],J=C.createSparseMatrix({values:W,index:L,ptr:q,size:[H,U],datatype:k===_._datatype&&B===C._datatype?G:void 0}),re=0;re<U;re++){q[re]=L.length;var ve=F[re],pe=F[re+1];if(pe>ve)for(var Ae=0,ke=0;ke<H;ke++){for(var it=ke+1,Re=void 0,ut=ve;ut<pe;ut++){var Xe=R[ut];Ae!==it?(Re=Q(T[ke][Xe],I[ut]),Ae=it):Re=Y(Re,Q(T[ke][Xe],I[ut]))}Ae===it&&!M(Re,j)&&(L.push(ke),W.push(Re))}}return q[U]=L.length,J}function v(_,C){var T=_._values,S=_._index,k=_._ptr,I=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var R=C._data,F=C._datatype||C.getDataType(),O=_._size[0],B=C._size[0],H=[],U=[],G=[],Y,Q=r,M=i,j=s,W=0;I&&F&&I===F&&typeof I=="string"&&I!=="mixed"&&(Y=I,Q=t.find(r,[Y,Y]),M=t.find(i,[Y,Y]),j=t.find(s,[Y,Y]),W=t.convert(0,Y));var L=[],q=[];G[0]=0;for(var J=0;J<B;J++){var re=R[J];if(!j(re,W))for(var ve=k[J],pe=k[J+1],Ae=ve;Ae<pe;Ae++){var ke=S[Ae];q[ke]?L[ke]=Q(L[ke],M(re,T[Ae])):(q[ke]=!0,U.push(ke),L[ke]=M(re,T[Ae]))}}for(var it=U.length,Re=0;Re<it;Re++){var ut=U[Re];H[Re]=L[ut]}return G[1]=U.length,_.createSparseMatrix({values:H,index:U,ptr:G,size:[O,1],datatype:I===_._datatype&&F===C._datatype?Y:void 0})}function b(_,C){var T=_._values,S=_._index,k=_._ptr,I=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var R=C._data,F=C._datatype||C.getDataType(),O=_._size[0],B=C._size[0],H=C._size[1],U,G=r,Y=i,Q=s,M=0;I&&F&&I===F&&typeof I=="string"&&I!=="mixed"&&(U=I,G=t.find(r,[U,U]),Y=t.find(i,[U,U]),Q=t.find(s,[U,U]),M=t.convert(0,U));for(var j=[],W=[],L=[],q=_.createSparseMatrix({values:j,index:W,ptr:L,size:[O,H],datatype:I===_._datatype&&F===C._datatype?U:void 0}),J=[],re=[],ve=0;ve<H;ve++){L[ve]=W.length;for(var pe=ve+1,Ae=0;Ae<B;Ae++){var ke=R[Ae][ve];if(!Q(ke,M))for(var it=k[Ae],Re=k[Ae+1],ut=it;ut<Re;ut++){var Xe=S[ut];re[Xe]!==pe?(re[Xe]=pe,W.push(Xe),J[Xe]=Y(ke,T[ut])):J[Xe]=G(J[Xe],Y(ke,T[ut]))}}for(var Tt=L[ve],gt=W.length,Ie=Tt;Ie<gt;Ie++){var Ve=W[Ie];j[Ie]=J[Ve]}}return L[H]=W.length,q}function x(_,C){var T=_._values,S=_._index,k=_._ptr,I=_._datatype||_._data===void 0?_._datatype:_.getDataType(),R=C._values,F=C._index,O=C._ptr,B=C._datatype||C._data===void 0?C._datatype:C.getDataType(),H=_._size[0],U=C._size[1],G=T&&R,Y,Q=r,M=i;I&&B&&I===B&&typeof I=="string"&&I!=="mixed"&&(Y=I,Q=t.find(r,[Y,Y]),M=t.find(i,[Y,Y]));for(var j=G?[]:void 0,W=[],L=[],q=_.createSparseMatrix({values:j,index:W,ptr:L,size:[H,U],datatype:I===_._datatype&&B===C._datatype?Y:void 0}),J=G?[]:void 0,re=[],ve,pe,Ae,ke,it,Re,ut,Xe,Tt=0;Tt<U;Tt++){L[Tt]=W.length;var gt=Tt+1;for(it=O[Tt],Re=O[Tt+1],ke=it;ke<Re;ke++)if(Xe=F[ke],G)for(pe=k[Xe],Ae=k[Xe+1],ve=pe;ve<Ae;ve++)ut=S[ve],re[ut]!==gt?(re[ut]=gt,W.push(ut),J[ut]=M(R[ke],T[ve])):J[ut]=Q(J[ut],M(R[ke],T[ve]));else for(pe=k[Xe],Ae=k[Xe+1],ve=pe;ve<Ae;ve++)ut=S[ve],re[ut]!==gt&&(re[ut]=gt,W.push(ut));if(G)for(var Ie=L[Tt],Ve=W.length,ft=Ie;ft<Ve;ft++){var _t=W[ft];j[ft]=J[_t]}}return L[U]=W.length,q}return t(Bbe,i,{"Array, Array":t.referTo("Matrix, Matrix",_=>(C,T)=>{l($l(C),$l(T));var S=_(n(C),n(T));return ua(S)?S.valueOf():S}),"Matrix, Matrix":function(C,T){var S=C.size(),k=T.size();return l(S,k),S.length===1?k.length===1?c(C,T,S[0]):f(C,T):k.length===1?h(C,T):p(C,T)},"Matrix, Array":t.referTo("Matrix,Matrix",_=>(C,T)=>_(C,n(T))),"Array, Matrix":t.referToSelf(_=>(C,T)=>_(n(C,T.storage()),T)),"SparseMatrix, any":function(C,T){return a(C,T,i,!1)},"DenseMatrix, any":function(C,T){return u(C,T,i,!1)},"any, SparseMatrix":function(C,T){return a(T,C,i,!0)},"any, DenseMatrix":function(C,T){return u(T,C,i,!0)},"Array, any":function(C,T){return u(n(C),T,i,!1).valueOf()},"any, Array":function(C,T){return u(n(T),C,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(_=>(C,T,S)=>{for(var k=_(C,T),I=0;I<S.length;I++)k=_(k,S[I]);return k})})}),jbe="conj",Rjt=["typed"],Njt=di(jbe,Rjt,e=>{var{typed:t}=e;return t(jbe,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":t.referToSelf(n=>r=>Bb(r,n))})}),Ube="identity",Pjt=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Ojt=di(Ube,Pjt,e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=e;return t(Ube,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Go(l)||Go(c)?i:null;if(Go(l)&&(l=l.toNumber()),Go(c)&&(c=c.toNumber()),!Ys(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Ys(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,h,0,p);if(f==="dense")return s.diagonal(m,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=GK([],m,p),y=l<c?l:c,v=0;v<y;v++)g[v][v]=h;return g}});function Fjt(){throw new Error('No "bignumber" implementation available')}function $jt(){throw new Error('No "fraction" implementation available')}function Mjt(){throw new Error('No "matrix" implementation available')}var zbe="size",Ljt=["typed","config","?matrix"],Bjt=di(zbe,Ljt,e=>{var{typed:t,config:n,matrix:r}=e;return t(zbe,{Matrix:function(s){return s.create(s.size(),"number")},Array:$l,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([],"dense","number"):Mjt()}})}),jjt="numeric",Ujt=["number","?bignumber","?fraction"],zjt=di(jjt,Ujt,e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>t(o),BigNumber:n?o=>n(o):Fjt,bigint:o=>BigInt(o),Fraction:r?o=>r(o):$jt};return function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=pv(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in s))throw new TypeError("Cannot convert "+a+' to type "'+u+'"; valid output types are '+Object.keys(s).join(", "));return u===c?a:s[u](a)}}),Vbe="divideScalar",Vjt=["typed","numeric"],Hjt=di(Vbe,Vjt,e=>{var{typed:t,numeric:n}=e;return t(Vbe,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),Hbe="pow",qjt=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Wjt=di(Hbe,qjt,e=>{var{typed:t,config:n,identity:r,multiply:i,matrix:s,inv:o,number:a,fraction:u,Complex:l}=e;return t(Hbe,{"number, number":c,"Complex, Complex":function(p,m){return p.pow(m)},"BigNumber, BigNumber":function(p,m){return m.isInteger()||p>=0||n.predictable?p.pow(m):new l(p.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(h,p)=>h**p,"Fraction, Fraction":function(p,m){var g=p.pow(m);if(g!=null)return g;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(p,m){return f(p,m.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,m){return d(p,m.toNumber())},"Unit, number | BigNumber":function(p,m){return p.pow(m)}});function c(h,p){if(n.predictable&&!Ys(p)&&h<0)try{var m=u(p),g=a(m);if((p===g||Math.abs((p-g)/p)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-h,p)}catch{}return n.predictable&&(h<-1&&p===1/0||h>-1&&h<0&&p===-1/0)?NaN:Ys(p)||h>=0||n.predictable?C$e(h,p):h*h<1&&p===1/0||h*h>1&&p===-1/0?0:new l(h,0).pow(p,0)}function f(h,p){if(!Ys(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var m=$l(h);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(p<0)try{return f(o(h),-p)}catch(v){throw v.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):v}for(var g=r(m[0]).valueOf(),y=h;p>=1;)(p&1)===1&&(g=i(y,g)),p>>=1,y=i(y,y);return g}function d(h,p){return s(f(h.valueOf(),p))}}),qbe="dot",Gjt=["typed","addScalar","multiplyScalar","conj","size"],Yjt=di(qbe,Gjt,e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:s}=e;return t(qbe,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),h=l(f),p,m;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==m)throw new RangeError("Vectors must have equal length ("+p+" != "+m+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function a(c,f){var d=o(c,f),h=ua(c)?c._data:c,p=ua(c)?c._datatype||c.getDataType():void 0,m=ua(f)?f._data:f,g=ua(f)?f._datatype||f.getDataType():void 0,y=l(c).length===2,v=l(f).length===2,b=n,x=r;if(p&&g&&p===g&&typeof p=="string"&&p!=="mixed"){var _=p;b=t.find(n,[_,_]),x=t.find(r,[_,_])}if(!y&&!v){for(var C=x(i(h[0]),m[0]),T=1;T<d;T++)C=b(C,x(i(h[T]),m[T]));return C}if(!y&&v){for(var S=x(i(h[0]),m[0][0]),k=1;k<d;k++)S=b(S,x(i(h[k]),m[k][0]));return S}if(y&&!v){for(var I=x(i(h[0][0]),m[0]),R=1;R<d;R++)I=b(I,x(i(h[R][0]),m[R]));return I}if(y&&v){for(var F=x(i(h[0][0]),m[0][0]),O=1;O<d;O++)F=b(F,x(i(h[O][0]),m[O][0]));return F}}function u(c,f){o(c,f);for(var d=c._index,h=c._values,p=f._index,m=f._values,g=0,y=n,v=r,b=0,x=0;b<d.length&&x<p.length;){var _=d[b],C=p[x];if(_<C){b++;continue}if(_>C){x++;continue}_===C&&(g=y(g,v(h[b],m[x])),b++,x++)}return g}function l(c){return ua(c)?c.size():s(c)}}),Wbe="det",Kjt=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Xjt=di(Wbe,Kjt,e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:s,isZero:o,unaryMinus:a}=e;return t(Wbe,{any:function(c){return Eo(c)},"Array | Matrix":function(c){var f;switch(ua(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Eo(c);case 1:if(f[0]===1)return Eo(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+zo(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+zo(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+zo(f)+")")}}});function u(l,c,f){if(c===1)return Eo(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((T,S)=>S),p=0;p<c;p++){var m=h[p];if(o(l[m][p])){var g=void 0;for(g=p+1;g<c;g++)if(!o(l[h[g]][p])){m=h[g],h[g]=h[p],h[p]=m,d=!d;break}if(g===c)return l[m][p]}for(var y=l[m][p],v=p===0?1:l[h[p-1]][p-1],b=p+1;b<c;b++)for(var x=h[b],_=p+1;_<c;_++)l[x][_]=s(r(i(l[x][_],y),i(l[x][p],l[m][_])),v)}var C=l[h[c-1]][c-1];return d?a(C):C}}),Gbe="inv",Qjt=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Jjt=di(Gbe,Qjt,e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:u,abs:l}=e;return t(Gbe,{"Array | Matrix":function(d){var h=ua(d)?d.size():$l(d);switch(h.length){case 1:if(h[0]===1)return ua(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+zo(h)+")");case 2:{var p=h[0],m=h[1];if(p===m)return ua(d)?n(c(d.valueOf(),p,m),d.storage()):c(d,p,m);throw new RangeError("Matrix must be square (size: "+zo(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+zo(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,m,g,y,v;if(d===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,y)]]}else if(d===2){var b=a(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],b),r(o(f[0][1]),b)],[r(o(f[1][0]),b),r(f[0][0],b)]]}else{var x=f.concat();for(p=0;p<d;p++)x[p]=x[p].concat();for(var _=u(d).valueOf(),C=0;C<h;C++){var T=l(x[C][C]),S=C;for(p=C+1;p<d;)l(x[p][C])>T&&(T=l(x[p][C]),S=p),p++;if(T===0)throw Error("Cannot calculate inverse, determinant is zero");p=S,p!==C&&(v=x[C],x[C]=x[p],x[p]=v,v=_[C],_[C]=_[p],_[p]=v);var k=x[C],I=_[C];for(p=0;p<d;p++){var R=x[p],F=_[p];if(p!==C){if(R[C]!==0){for(g=r(o(R[C]),k[C]),m=C;m<h;m++)R[m]=i(R[m],s(g,k[m]));for(m=0;m<h;m++)F[m]=i(F[m],s(g,I[m]))}}else{for(g=k[C],m=C;m<h;m++)R[m]=r(R[m],g);for(m=0;m<h;m++)F[m]=r(F[m],g)}}}return _}}}),Ybe="gamma",Zjt=["typed","config","multiplyScalar","pow","BigNumber","Complex"],eUt=di(Ybe,Zjt,e=>{var{typed:t,config:n,multiplyScalar:r,pow:i,BigNumber:s,Complex:o}=e;function a(l){if(l.im===0)return B$(l.re);if(l.re<.5){var c=new o(1-l.re,-l.im),f=new o(Math.PI*l.re,Math.PI*l.im);return new o(Math.PI).div(f.sin()).div(a(c))}l=new o(l.re-1,l.im);for(var d=new o(FC[0],0),h=1;h<FC.length;++h){var p=new o(FC[h],0);d=d.add(p.div(l.add(h)))}var m=new o(l.re+T$e+.5,l.im),g=Math.sqrt(2*Math.PI),y=m.pow(l.add(.5)),v=m.neg().exp();return d.mul(g).mul(y).mul(v)}return t(Ybe,{number:B$,Complex:a,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):u(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new s([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=s.clone({precision:c});if(l%2===1)return l.times(u(new s(l-1)));for(var d=l,h=new f(l),p=l.toNumber();d>2;)d-=2,p+=d,h=h.times(p);return new s(h.toPrecision(s.precision))}}),w9=f7t({config:tE}),Sie=g7t({}),A$e=E7t({}),Die=A7t({}),Iie=z7t({Matrix:Die}),go=p9t({BigNumber:w9,Complex:Sie,DenseMatrix:Iie,Fraction:A$e}),tUt=mjt({typed:go}),kie=yjt({typed:go}),nUt=Njt({typed:go}),Rie=K7t({config:tE,typed:go}),rUt=q7t({equalScalar:Rie,typed:go}),Nie=Djt({typed:go}),S$e=rjt({typed:go}),D$e=J7t({Matrix:Die,equalScalar:Rie,typed:go}),iUt=bjt({typed:go}),sUt=ojt({BigNumber:w9,typed:go}),pS=fjt({DenseMatrix:Iie,Matrix:Die,SparseMatrix:D$e,typed:go}),I$e=ljt({Fraction:A$e,typed:go}),k$e=Ojt({BigNumber:w9,DenseMatrix:Iie,SparseMatrix:D$e,config:tE,matrix:pS,typed:go}),oUt=zjt({bignumber:sUt,fraction:I$e,number:S$e}),aUt=Bjt({matrix:pS,config:tE,typed:go}),R$e=hjt({typed:go}),N$e=Hjt({numeric:oUt,typed:go}),uUt=Yjt({addScalar:kie,conj:nUt,multiplyScalar:Nie,size:aUt,typed:go}),Pie=kjt({addScalar:kie,dot:uUt,equalScalar:Rie,matrix:pS,multiplyScalar:Nie,typed:go}),lUt=Xjt({divideScalar:N$e,isZero:rUt,matrix:pS,multiply:Pie,subtractScalar:iUt,typed:go,unaryMinus:R$e}),cUt=Jjt({abs:tUt,addScalar:kie,det:lUt,divideScalar:N$e,identity:k$e,matrix:pS,multiply:Pie,typed:go,unaryMinus:R$e}),fUt=Wjt({Complex:Sie,config:tE,fraction:I$e,identity:k$e,inv:cUt,matrix:pS,multiply:Pie,number:S$e,typed:go}),$C=eUt({BigNumber:w9,Complex:Sie,config:tE,multiplyScalar:Nie,pow:fUt,typed:go});function q6(e,t){return $C(e)*$C(t)/$C(e+t)}function dUt(e){return e>=0?1:-1}function XK(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");const o=(e-n)/r,a=UT.studentt.pdf(o,i),u=s*o*Math.sqrt((i+1)/(i+o*o)),l=UT.studentt.cdf(u,i+1);return 2/r*a*l}function P$e(e,t){const{mu:n,sigma:r,lambda:i,p:s,q:o}=t;if(i<-1||i>1)throw new Error("lambda should be bewteen -1 and 1");if(s<0||o<0)throw new Error("p and/or q should be positive values");if(r<0)throw new Error("sigma should be positive");const a=q6(1/s,o),u=o**(-1/s)*((3*i**2+1)*(q6(3/s,o-2/s)/a)-4*i**2*(q6(2/s,o-1/s)/a)**2)**(-1/2),l=2*u*r*i*o**(1/s)*q6(2/s,o-1/s)/a,c=2*u*r*o**(1/s)*a,f=(1+Math.abs(e-n+l)**s/(o*(u*r)**s*(1+i*dUt(e-n+l))**s))**(o+1/s);return s/(c*f)}function hUt(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");if(!Number.isFinite(e))return e>0?1:0;if(Math.abs(s)<1e-10){const d=(e-n)/r;return UT.studentt.cdf(d,i)}if(Math.abs(e-n)<1e-10)return .5;const o=(e-n)/r;if(o<-100)return 0;if(o>100)return 1;const a=Math.min(n-10*r,e-.1),u=1e3,l=(e-a)/u;let c=0,f=XK(a,t);for(let d=1;d<=u;d+=1){const h=a+d*l,p=XK(h,t);c+=(f+p)*.5*l,f=p}return Math.max(0,Math.min(1,c))}function O$e(e,t=[-5,5],n=.01){const r=[],i=Math.floor(t[0]/n)*n,s=Math.ceil(t[1]/n)*n;for(let u=i;u<=s;u+=n){const l=Number(u.toFixed(10));r.push(l)}const o=r.map(u=>{try{return P$e(u,e)}catch(l){return console.warn(`Error calculating PDF at x=${u}:`,l),0}});return{xVals:r,pdfVals:o,cdfVals:[1,1,1]}}function pUt(e,t){let n=0,r=e.xVals.length-1;const i=e.xVals.findIndex(u=>Math.abs(u-t)<1e-10);if(i>=0)return{pdf:e.pdfVals[i],cdf:e.cdfVals[i]};for(;n<=r;){const u=Math.floor((n+r)/2);e.xVals[u]<t?n=u+1:r=u-1}if(r=Math.max(0,r),n=Math.min(e.xVals.length-1,n),r>=n)return{pdf:e.pdfVals[n],cdf:e.cdfVals[n]};const s=(t-e.xVals[r])/(e.xVals[n]-e.xVals[r]),o=e.pdfVals[r]*(1-s)+e.pdfVals[n]*s,a=e.cdfVals[r]*(1-s)+e.cdfVals[n]*s;return{pdf:o,cdf:a}}function mUt(e,t){let n=0;for(let r=0;r<t.length;r+=1)t[r]>t[n]&&(n=r);return e[n]}function gUt(e,t){let n=0,r=Math.abs(t[0]-.5);for(let a=0;a<t.length;a+=1){const u=Math.abs(t[a]-.5);u<r&&(r=u,n=a)}if(Math.abs(t[n]-.5)<1e-6)return e[n];let i=0,s=t.length-1;for(let a=0;a<t.length-1;a+=1)if(t[a]<=.5&&t[a+1]>=.5){i=a,s=a+1;break}const o=(.5-t[i])/(t[s]-t[i]);return e[i]+o*(e[s]-e[i])}const yUt=Object.freeze(Object.defineProperty({__proto__:null,findDistributionValue:pUt,findMedianFromCDF:gUt,findModeFromPDF:mUt,generateDistributionData:O$e,skewGeneralizedTPDF:P$e,skewTCDF:hUt,skewTPDF:XK},Symbol.toStringTag,{value:"Module"}));function F$e({value:e,onChange:t,onChangeEnd:n,distributionData:r,width:i="100%"}){var u;if(!((u=r==null?void 0:r.xVals)!=null&&u.length))return null;const[s,o]=N.useState(!1),a=l=>{o(!0),n(l)};return E.jsx("div",{style:{width:i},children:E.jsx(M_,{value:s?e:-5,onChange:t,onChangeEnd:a,min:r.xVals[0],max:r.xVals[r.xVals.length-1],step:.01,label:l=>l.toFixed(2),styles:{root:{width:"100%"},track:{width:"100%",backgroundColor:"#e9ecef"},bar:{backgroundColor:"#e9ecef"},thumb:{display:s?"block":"none"}},"data-source":"slider-check"})})}const vUt=Object.freeze(Object.defineProperty({__proto__:null,default:F$e},Symbol.toStringTag,{value:"Module"})),MC={margin:{top:15,right:15,bottom:40,left:50},height:450,width:600};function bUt(){return{xi:Number((Math.random()*8-4).toFixed(3)),omega:Number((.3+Math.random()*1.2).toFixed(3)),nu:3+Math.floor(Math.random()*27),alpha:Number((Math.random()*10-5).toFixed(3))}}function xUt({sliderValue:e,setSliderValue:t,distributionData:n,showPDF:r,training:i,taskType:s,currentParams:o,setAnswer:a}){const u=eE(),l=N.useMemo(()=>{if(e===void 0||i===!1)return null;const h=tp(p=>p).left(n.xVals,e);switch(s){case"pdf_median":return{x:e,y:null,tangentLine:null};case"pdf_mode":return{x:null,y:Math.max(...n.pdfVals),tangentLine:null};case"cdf_median":return{x:null,y:.5,tangentLine:null};case"cdf_mode":{const p={x:e,y:n.cdfVals[h]},m=n.pdfVals[h];return{x:null,y:null,tangentLine:{point:p,slope:m}}}default:return null}},[e,i,s,n]),c=N.useMemo(()=>{if(e===void 0||!n)return null;const h=tp(m=>m).left(n.xVals,e),p=r?n.pdfVals:n.cdfVals;return{x:n.xVals[h],y:p[h]}},[e,n,r]),f=N.useCallback(h=>{t(h)},[t]),d=N.useCallback(h=>{const p=tp(b=>b).left(n.xVals,h),m=r?n.pdfVals:n.cdfVals,g={x:n.xVals[p],y:m[p]},y=u.xScale(g.x),v=u.yScale(g.y);a({status:!0,answers:{"location-x":g.x,"location-y":g.y,"pixel-x":y,"pixel-y":v}})},[n,r,a,o,u]);return E.jsxs(E.Fragment,{children:[E.jsx(F$e,{value:e??0,onChange:f,onChangeEnd:d,distributionData:n,width:MC.width-MC.margin.left-MC.margin.right}),E.jsx(Ku,{h:"lg"}),E.jsx(V8e,{distributionData:n,showPDF:r,isTraining:i,selectedPoint:c,guidelines:l,axisLabels:{x:"Value",y:r?"Density":"Cumulative Probability"}})]})}function wUt({parameters:e,setAnswer:t}){const{params:n,showPDF:r,training:i,taskType:s}=e,[o,a]=N.useState(),[u,l]=N.useState(()=>n||bUt()),c=N.useMemo(()=>O$e(u),[u]);return N.useEffect(()=>{(!n||Object.keys(n).length===0)&&t({status:!0,answers:{"location-x":null,"location-y":null,"pixel-x":null,"pixel-y":null}})},[n,t,u]),c?E.jsx(Bl,{p:"md",children:E.jsxs("div",{className:"mt-4",children:[E.jsx(j8e,{width:MC.width,height:MC.height,margin:MC.margin,xDomain:[-5,5],yDomain:[0,1],children:E.jsx(xUt,{sliderValue:o,setSliderValue:a,distributionData:c,showPDF:r||!1,training:i||!1,taskType:s||"pdf_median",currentParams:u,setAnswer:t})}),E.jsx(Ku,{h:"xl"})]})}):null}const _Ut=Object.freeze(Object.defineProperty({__proto__:null,default:wUt},Symbol.toStringTag,{value:"Module"}));var $$e=(e=>(e.PDF_MEDIAN="pdf_median",e.PDF_MODE="pdf_mode",e.CDF_MEDIAN="cdf_median",e.CDF_MODE="cdf_mode",e))($$e||{});const EUt=Object.freeze(Object.defineProperty({__proto__:null,TaskType:$$e},Symbol.toStringTag,{value:"Module"})),CUt=e=>e*Math.PI/180;function TUt({parameters:e,setAnswer:t}){var x;const n=N.useRef(null),r=N.useRef(null),i=N.useRef(null),{blindspotAngle:s}=e,o=ni(_=>_.answers),a=Number((x=o.calibration_3.answer)==null?void 0:x.pixelsPerMM),[u,l]=N.useState([]),[c,f]=N.useState(!1),[d,h]=N.useState(null),[p,m]=N.useState(5),g=N.useCallback(_=>{if(!_.length||!a||!r.current)return;const C=_.reduce((R,F)=>R+F,0)/_.length,S=r.current.getBoundingClientRect().left,I=Math.abs(C-S)/a/Math.tan(CUt(s));h(I),f(!1)},[s,a]),y=N.useCallback(()=>{n.current&&(n.current.style.left="740px")},[]),v=N.useCallback(()=>{if(!n.current||!r.current||!a||u.length>=5)return;f(!0);let _=!1,C=0;const T=1e3,S=k=>{if(!n.current)return;if(_){k-C>=T&&(_=!1,n.current.style.left="740px"),i.current=requestAnimationFrame(S);return}const R=parseInt(n.current.style.left||"740",10)-2;R<=0?(_=!0,C=k):n.current.style.left=`${R}px`,i.current=requestAnimationFrame(S)};i.current=requestAnimationFrame(S)},[u,a]),b=()=>{i.current&&cancelAnimationFrame(i.current),f(!1)};return N.useEffect(()=>{d!==null&&u.length===5&&t({status:!0,answers:{"dist-calibration-MM":d,"dist-calibration-CM":d/10,"ball-positions":JSON.stringify(u)}})},[d,u,t]),N.useEffect(()=>{const _=C=>{if(C.code==="Space"){if(C.preventDefault(),!c)v();else if(n.current){b();const S=n.current.getBoundingClientRect().left;l(k=>{const I=[...k,S];return I.length>=5&&g(I),I}),m(k=>k-1),y()}}};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[c,g,v,y]),N.useEffect(()=>(h(null),f(!1),l([]),m(5),y(),()=>{h(null),f(!1),l([]),m(5)}),[y]),N.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),a?E.jsx(Bl,{size:"md",children:E.jsxs(os,{gap:"md",children:[E.jsx(Ye,{children:"Now we will quickly measure how far away you are sitting. "}),E.jsxs(os,{gap:"xs",children:[E.jsxs(To,{children:[E.jsxs(To.Item,{children:["Put your left hand on the ",E.jsx("b",{children:"space bar"}),"."]}),E.jsx(To.Item,{children:"Cover your right eye with your right hand."}),E.jsx(To.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),E.jsxs(To.Item,{children:["The ",E.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),E.jsx(Ye,{ta:"center",children:u.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),E.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[E.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),E.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),E.jsxs(Ye,{ta:"center",children:["Remaining measurements: ",5-u.length]}),d&&E.jsxs(os,{gap:"xs",children:[E.jsx(Ye,{fw:700,size:"lg",children:"Viewing Distance Results"}),E.jsxs(Ye,{children:["Estimated Viewing Distance: ",(d/10).toFixed(1)," cm"]}),E.jsxs(Ye,{children:["Number of measurements: ",u.length]})]})]})}):E.jsx("div",{children:"Please complete card calibration first."})}const AUt=Object.freeze(Object.defineProperty({__proto__:null,default:TUt},Symbol.toStringTag,{value:"Module"})),SUt="/vis-decode/assets/costco_card-B3j7PHjO.png";function DUt({parameters:e,setAnswer:t,itemWidthMM:n=85,itemHeightMM:r=54}){const[i,s]=N.useState(300),[o,a]=N.useState(null),[u,l]=N.useState(!1),[c,f]=N.useState({min:100,max:500}),{taskid:d}=e,h=N.useRef(null),p=r/n;N.useEffect(()=>{const b=()=>{const x=window.innerWidth;f({min:Math.round(x*.1),max:Math.round(x*.8)})};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const m=b=>Math.round(b*p),g=b=>b/n,y=b=>{s(b)},v=()=>{if(!h.current)return;const b=g(i);a(b),t({status:!0,answers:{[d]:b}}),l(!0)};return E.jsx(Bl,{size:"md",children:E.jsxs(os,{gap:"lg",children:[E.jsx(Ye,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),E.jsx(Ye,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),E.jsx(Ye,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),E.jsx(Ye,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),E.jsx(bn,{onClick:v,size:"lg",variant:"transparent",children:"Confirm Size"}),E.jsx(M_,{min:c.min,max:c.max,value:i,label:null,onChange:y,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),E.jsx("div",{ref:h,style:{width:`${i}px`,height:`${m(i)}px`,margin:"20px auto",overflow:"hidden"},children:E.jsx("img",{src:SUt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})}),u&&E.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",o==null?void 0:o.toFixed(2)]})]})})}const IUt=Object.freeze(Object.defineProperty({__proto__:null,default:DUt},Symbol.toStringTag,{value:"Module"}));function kUt({position:e,isNearCurve:t}){return e?E.jsx("circle",{cx:e.x,cy:e.y,r:t?5:20,fill:t?"#2563eb":"#666",stroke:t?"#2563eb":"#666",strokeWidth:1,opacity:.8,pointerEvents:"none","data-source":"Cursor"}):null}const RUt=Object.freeze(Object.defineProperty({__proto__:null,default:kUt},Symbol.toStringTag,{value:"Module"}));function AF(e){return e>0?1:e<0?-1:0}function V1(e,t){return $C(e)*$C(t)/$C(e+t)}function M$e(e,t){const{mu:n,sigma:r,lambda:i,p:s,q:o}=t;if(i<-1||i>1)throw new Error("lambda should be bewteen -1 and 1");if(s<0||o<0)throw new Error("p and/or q should be positive values");if(r<0)throw new Error("sigma should be positive");const a=V1(1/s,o),u=o**(-1/s)*((3*i**2+1)*(V1(3/s,o-2/s)/a)-4*i**2*(V1(2/s,o-1/s)/a)**2)**(-1/2),l=2*u*r*i*o**(1/s)*V1(2/s,o-1/s)/a,c=2*u*r*o**(1/s)*a,f=(1+Math.abs(e-n+l)**s/(o*(u*r)**s*(1+i*AF(e-n+l))**s))**(o+1/s);return s/(c*f)}function NUt(){const e=[{x:0,params:{mu:0,sigma:1,lambda:0,p:2,q:10}},{x:1,params:{mu:0,sigma:1,lambda:.5,p:2,q:5}},{x:-1,params:{mu:0,sigma:1,lambda:-.5,p:2,q:5}},{x:2,params:{mu:1,sigma:2,lambda:.3,p:3,q:7}},{x:5,params:{mu:0,sigma:1,lambda:.9,p:1.5,q:3}},{x:-3,params:{mu:-1,sigma:.5,lambda:-.7,p:1,q:2}}];console.log("JavaScript SGT PDF values:"),console.log("==========================="),console.log("| x | mu | sigma | lambda | p | q | JS result |"),console.log("|---|----|----|----|----|----|----|"),e.forEach(t=>{try{const{x:n,params:r}=t,{mu:i,sigma:s,lambda:o,p:a,q:u}=r,l=M$e(n,r);console.log(`| ${n} | ${i} | ${s} | ${o} | ${a} | ${u} | ${l.toExponential(6)} |`)}catch(n){console.log(`Error for case ${JSON.stringify(t)}: ${n.message}`)}}),console.log(`
To compare with R dsgt package, run this R code:`),console.log("================================================"),console.log("```r"),console.log("library(sgt)"),console.log("# Test cases"),e.forEach(t=>{const{x:n,params:r}=t,{mu:i,sigma:s,lambda:o,p:a,q:u}=r;console.log(`r_result <- dsgt(${n}, mu=${i}, sigma=${s}, lambda=${o}, p=${a}, q=${u})`),console.log(`cat("| ${n} | ${i} | ${s} | ${o} | ${a} | ${u} | ", formatC(r_result, format="e", digits=6), " |\\n", sep="")`)}),console.log("```"),console.log(`
Check for consistency between R and JavaScript results. Small differences may be due to:`),console.log("1. Different implementations of gamma/beta functions"),console.log("2. Floating point precision differences"),console.log("3. Potential differences in the exact algorithm implementation")}NUt();function PUt(e,t){const{mu:n,sigma:r,lambda:i,p:s,q:o}=t;console.log("DEBUG CALCULATION:"),console.log("=================="),console.log(`Input: x=${e}, mu=${n}, sigma=${r}, lambda=${i}, p=${s}, q=${o}`);const a=V1(1/s,o);console.log(`denomBeta = beta(${1/s}, ${o}) = ${a}`);const u=V1(3/s,o-2/s)/a;console.log(`betaRatio1 = beta(${3/s}, ${o-2/s}) / denomBeta = ${u}`);const l=V1(2/s,o-1/s)/a;console.log(`betaRatio2 = beta(${2/s}, ${o-1/s}) / denomBeta = ${l}`);const c=o**(-1/s),f=(3*i**2+1)*u,d=4*i**2*l**2,h=c*(f-d)**(-1/2);console.log(`v_term1 = ${o}^(-1/${s}) = ${c}`),console.log(`v_term2 = (3*${i}^2 + 1) * ${u} = ${f}`),console.log(`v_term3 = 4*${i}^2 * ${l}^2 = ${d}`),console.log(`v = ${c} * ((${f} - ${d})^(-1/2)) = ${h}`);const p=2*h*r*i*o**(1/s)*V1(2/s,o-1/s)/a;console.log(`m = ${p}`);const m=2*h*r*o**(1/s)*a;console.log(`denomPart1 = ${m}`);const g=e-n+p;console.log(`x_term = ${e} - ${n} + ${p} = ${g}`),console.log(`sgn(x_term) = ${AF(g)}`);const y=Math.abs(g)**s,v=o*(h*r)**s,b=(i*AF(g)+1)**s,x=v*b+1,_=(y/x)**(1/s+o);console.log(`denomPart2_num = |${g}|^${s} = ${y}`),console.log(`denomPart2_denom1 = ${o} * ((${h} * ${r})^${s}) = ${v}`),console.log(`denomPart2_denom2 = ((${i} * ${AF(g)} + 1)^${s}) = ${b}`),console.log(`denomPart2_denom = ${v} * ${b} + 1 = ${x}`),console.log(`denomPart2 = (${y} / ${x})^(1/${s} + ${o}) = ${_}`);const C=s/(m*_);return console.log(`Final density = ${s} / (${m} * ${_}) = ${C}`),C}const Kbe={x:1,params:{mu:0,sigma:1,lambda:.5,p:2,q:5}};PUt(Kbe.x,Kbe.params);const OUt=Object.freeze(Object.defineProperty({__proto__:null,skewGeneralizedTPDF:M$e},Symbol.toStringTag,{value:"Module"})),FUt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class $Ut extends vi.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?E.jsx(Ye,{children:this.state.error.toString()}):this.props.children}}const Xbe=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":hPt,"../public/example-brush-interactions/assets/Bar.tsx":gPt,"../public/example-brush-interactions/assets/BrushPlot.tsx":jMt,"../public/example-brush-interactions/assets/Paintbrush.tsx":LMt,"../public/example-brush-interactions/assets/Scatter.tsx":BMt,"../public/example-brush-interactions/assets/XAxisBar.tsx":pPt,"../public/example-brush-interactions/assets/YAxis.tsx":MMt,"../public/example-brush-interactions/assets/YAxisBar.tsx":mPt,"../public/example-brush-interactions/assets/types.ts":UMt,"../public/example-cleveland/assets/BarChart.tsx":GMt,"../public/example-cleveland/assets/BubbleChart.tsx":eLt,"../public/example-cleveland/assets/PieChart.tsx":oLt,"../public/example-cleveland/assets/StackedBarChart.tsx":fLt,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":zMt,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":YMt,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":KMt,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":aLt,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":VMt,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":HMt,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":tLt,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":nLt,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":uLt,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":cPt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":hLt,"../public/libraries/mic-check/assets/AudioTest.tsx":SLt,"../public/libraries/test/assets/test.tsx":ILt,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":RLt,"../public/tutorial/react-and-randomization/assets/Bar.tsx":OLt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":LLt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":$Lt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":MLt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":NLt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":FLt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":PLt,"../public/tutorial/react-and-randomization/assets/some.tsx":BLt,"../public/tutorial/react-and-randomization/assets/types.ts":jLt,"../public/vis-decode-click/assets/Plot.tsx":GLt,"../public/vis-decode-click/assets/Stimuli.tsx":tBt,"../public/vis-decode-click/assets/TaskTypes.ts":nBt,"../public/vis-decode-click/assets/ViewingDistanceCalibration.tsx":sBt,"../public/vis-decode-click/assets/VirtualChinrestCalibration.tsx":uBt,"../public/vis-decode-click/assets/chartComponents/ClickMarker.tsx":HLt,"../public/vis-decode-click/assets/chartComponents/Cursor.tsx":VLt,"../public/vis-decode-click/assets/chartComponents/Guidelines.tsx":WLt,"../public/vis-decode-click/assets/chartComponents/Line.tsx":zLt,"../public/vis-decode-click/assets/chartComponents/NearestPointMarker.tsx":qLt,"../public/vis-decode-click/assets/chartComponents/ScalesContext.tsx":ULt,"../public/vis-decode-click/assets/dataGeneration/jstat.d.ts":lBt,"../public/vis-decode-click/assets/dataGeneration/jstatDistributionCalculations.ts":XLt,"../public/vis-decode-click/assets/hooks/useChartInteractions.tsx":QLt,"../public/vis-decode-slider/assets/Block5.tsx":pBt,"../public/vis-decode-slider/assets/Plot.tsx":yBt,"../public/vis-decode-slider/assets/Stimuli.tsx":_Ut,"../public/vis-decode-slider/assets/TaskTypes.ts":EUt,"../public/vis-decode-slider/assets/ViewingDistanceCalibration.tsx":AUt,"../public/vis-decode-slider/assets/VirtualChinrestCalibration.tsx":IUt,"../public/vis-decode-slider/assets/chartComponents/ClickMarker.tsx":dBt,"../public/vis-decode-slider/assets/chartComponents/Cursor.tsx":RUt,"../public/vis-decode-slider/assets/chartComponents/DistributionSlider.tsx":vUt,"../public/vis-decode-slider/assets/chartComponents/Guidelines.tsx":gBt,"../public/vis-decode-slider/assets/chartComponents/Line.tsx":mBt,"../public/vis-decode-slider/assets/chartComponents/ScalesContext.tsx":fBt,"../public/vis-decode-slider/assets/dataGeneration/debug.js":OUt,"../public/vis-decode-slider/assets/dataGeneration/jstat.d.ts":FUt,"../public/vis-decode-slider/assets/dataGeneration/jstatDistributionCalculations.tsx":yUt});function MUt({currentConfig:e,provState:t}){const n=Zd(),r=eh(),i=`../public/${e.path}`,s=i in Xbe?Xbe[i].default:null,o=ef(),{updateResponseBlockValidation:a,setIframeAnswers:u}=Ul(),l=N.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return E.jsx(N.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:s?E.jsx($Ut,{children:E.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):E.jsx(Rv,{path:e.path})})}function LUt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await Lte(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?E.jsx(tl,{text:t}):E.jsx(Rv,{path:e.path})}function mS(e){return e.baseComponent!==void 0}function L$e(){const e=Zd(),{setAlertModal:t}=Ul(),n=ef();N.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Qbe=Object.prototype.hasOwnProperty;function Jbe(e,t,n){for(n of e.keys())if(Nk(n,t))return n}function Nk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Nk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Jbe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Jbe(t,i),!i)||!Nk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Qbe.call(e,n)&&++r&&!Qbe.call(t,n)||!(n in t)||!Nk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function BUt(e){var t=N.useRef(e),n=N.useRef(0);return Nk(e,t.current)||(t.current=e,n.current+=1),N.useMemo(function(){return t.current},[n.current])}function jUt(e,t){return N.useEffect(e,BUt(t))}const U$=(e,t=null)=>{const[n,r]=N.useState("idle"),[i,s]=N.useState(null),[o,a]=N.useState(null),u=N.useRef(),l=N.useRef(!1);N.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=N.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return jUt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function B$e(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const UUt="_root_1spq0_1",zUt="_description_1spq0_9",VUt="_title_1spq0_10",HUt="_closeButton_1spq0_14",qUt={root:UUt,description:zUt,title:VUt,closeButton:HUt},dR=e=>{const{title:t,message:n,color:r}=e;j_.show({title:t,message:n,position:"top-center",classNames:qUt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},Zbe=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],j$e=["participantId","trialId","trialOrder","responseId"];function Oie(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function WUt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(dp(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=mS(u)&&u.baseComponent&&n.baseComponents?Fte({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=B$e(s);return Object.entries(s.answer).map(([h,p])=>{var y,v;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(b=>b.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const b=(v=(y=l.correctAnswer)==null?void 0:y.find(x=>x.id===h))==null?void 0:v.answer;m.correctAnswer=typeof b=="object"?JSON.stringify(b):b}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function GUt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...j$e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await WUt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function YUt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=N.useState([...Zbe].filter(p=>p!=="meta")),a=Oo(),{value:u,status:l,error:c}=U$(GUt,[s,r,a.storageEngine,i]),f=N.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);Oie(p,n)},[n,u]),d=N.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),dR({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=N.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return E.jsxs(fo,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[E.jsx(kee,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Zbe],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:E.jsx(Opt,{}),variant:"filled"}),E.jsx(Ku,{h:"md"}),E.jsxs(Fe,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?E.jsxs(_n,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[E.jsx(_n.Thead,{children:E.jsx(_n.Tr,{children:u.header.map(p=>E.jsx(_n.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:E.jsxs(Jt,{direction:"row",justify:"space-between",align:"center",children:[p,!j$e.includes(p)&&E.jsx($_,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:E.jsx(ite,{size:16})})]})},p))})}),E.jsx(_n.Tbody,{children:u.rows.slice(0,5).map((p,m)=>E.jsx(_n.Tr,{children:u.header.map(g=>E.jsx(_n.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?E.jsx(Ng,{variant:"light",children:c.message}):null,E.jsx(Lf,{visible:l==="pending"||l==="idle"})]}),E.jsx(Ku,{h:"sm"}),E.jsx(Jt,{justify:"center",fz:"sm",c:"dimmed",children:E.jsx(Ye,{children:h})}),E.jsx(Ku,{h:"md"}),E.jsxs(Mi,{justify:"right",children:[E.jsx(bn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),E.jsx(bn,{leftSection:E.jsx(Rke,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&E.jsx(bn,{onClick:d,children:E.jsx(Cpt,{})})]})]})}function KUt(){const e=ty(),{storageEngine:t}=Oo(),n=ni(b=>b.answers),r=YA(),[i,s]=N.useState(!1);N.useEffect(()=>{if(r){s(!0);return}const b=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(b))},1e3)},[]),L$e();const[o,a]=N.useState(),[u,l]=N.useState(""),c=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function b(){if(t){const x=await t.getCurrentParticipantId(),_=await t.getParticipantData();l(x),a(_)}}b()},[t]);const f=N.useCallback(async()=>{Oie(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=N.useState(Math.floor(h/1e3));N.useEffect(()=>{if(i){const b=setInterval(()=>{m(x=>x-1)},1e3);return p<=0?(d&&f(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[d,i,p,f]);const g=W_(),[y,v]=N.useState(!1);return N.useEffect(()=>{(async()=>{if(t){const x=await t.getModes(g);v(x.dataCollectionEnabled)}})()},[t,g]),E.jsx(ga,{style:{height:"100%"},children:E.jsx(Jt,{direction:"column",children:i||!y?E.jsx(Ye,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?E.jsx(tl,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):E.jsxs(E.Fragment,{children:[E.jsx(Ye,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),E.jsx(Ku,{h:"lg"}),E.jsx(ga,{children:E.jsx(Zc,{color:"blue"})})]})})})}function XUt(){return E.jsx(Ye,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function QUt(){return E.jsx(Ye,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const exe={};function QK(e,t){e===void 0&&(e=exe),t===void 0&&(t=exe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var JUt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZUt=Object.prototype.hasOwnProperty;function JK(e,t){return ZUt.call(e,t)}function ZK(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)JK(e,i)&&r.push(i);return r}function Af(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function eX(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function zx(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function U$e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function tX(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(tX(e[t]))return!0}else if(typeof e=="object"){for(var r=ZK(e),i=r.length,s=0;s<i;s++)if(tX(e[r[s]]))return!0}}return!1}function txe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var z$e=function(e){JUt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,txe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=txe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ro=z$e,ezt=Af,nC={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=z$(n,this.path);r&&(r=Af(r));var i=Rw(n,{op:"remove",path:this.from}).removed;return Rw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=z$(n,this.from);return Rw(n,{op:"add",path:this.path,value:Af(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:hR(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},tzt={add:function(e,t,n){return eX(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:nC.move,copy:nC.copy,test:nC.test,_get:nC._get};function z$(e,t){if(t=="")return e;var n={op:"_get",path:t};return Rw(e,n),n.value}function Rw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):V$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=z$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=hR(e,t.value),o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ro("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Af(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=V$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=U$e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!eX(h))throw new ro("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);eX(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ro("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=tzt[t.op].call(t,l,h,e);if(o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=nC[t.op].call(t,l,h,e);if(o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ro("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function _9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ro("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Af(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Rw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function nzt(e,t,n){var r=Rw(e,t);if(r.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function V$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ro("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(nC[e.op]){if(typeof e.path!="string")throw new ro("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ro('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ro("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ro("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&tX(e.value))throw new ro("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ro("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ro("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=V$e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ro("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ro("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function V$e(e,t,n){try{if(!Array.isArray(e))throw new ro("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)_9(Af(t),Af(e),n||!0);else{n=n||V$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ro)return i;throw i}}function hR(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!hR(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!hR(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const rzt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ro,_areEquals:hR,applyOperation:Rw,applyPatch:_9,applyReducer:nzt,deepClone:ezt,getValueByPointer:z$,validate:V$e,validator:V$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Fie=new WeakMap,izt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),szt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function ozt(e){return Fie.get(e)}function azt(e,t){return e.observers.get(t)}function uzt(e,t){e.observers.delete(t.callback)}function lzt(e,t){t.unobserve()}function czt(e,t){var n=[],r,i=ozt(e);if(!i)i=new izt(e),Fie.set(e,i);else{var s=azt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Af(e),t){r.callback=t,r.next=null;var o=function(){nX(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){nX(r),clearTimeout(r.next),uzt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new szt(t,r)),r}function nX(e,t){t===void 0&&(t=!1);var n=Fie.get(e.object);$ie(n.value,e.object,e.patches,"",t),e.patches.length&&_9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function $ie(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=ZK(t),o=ZK(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(JK(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?$ie(c,f,n,r+"/"+zx(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+zx(l),value:Af(c)}),n.push({op:"replace",path:r+"/"+zx(l),value:Af(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+zx(l),value:Af(c)}),n.push({op:"remove",path:r+"/"+zx(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!JK(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+zx(l),value:Af(t[l])})}}}function fzt(e,t,n){n===void 0&&(n=!1);var r=[];return $ie(e,t,r,"",n),r}const dzt=Object.freeze(Object.defineProperty({__proto__:null,compare:fzt,generate:nX,observe:czt,unobserve:lzt},Symbol.toStringTag,{value:"Module"}));Object.assign({},rzt,dzt,{JsonPatchError:z$e,deepClone:Af,escapePathComponent:zx,unescapePathComponent:U$e});var hzt=/("(?:[^\\"]|\\.)*")|[:,]/g,pzt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,x,_;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,s),x===void 0)return x;if(g=i-u.length-l,x.length<=g&&(v=x.replace(hzt,function(C,T){return T||C+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(x),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",_=o(a[h],y,p.length+(f===g-1?0:1)),_!==void 0&&d.push(p+_);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return x}(t,"",0)};const VH=_p(pzt);function nf(e,t,n){return e.fields=t||[],e.fname=n,e}function ho(e){return e==null?null:e.fname}function Xu(e){return e==null?null:e.fields}function H$e(e){return e.length===1?mzt(e[0]):gzt(e)}const mzt=e=>function(t){return t[e]},gzt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function rt(e){throw Error(e)}function ym(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||rt("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&rt("Access path missing closing bracket: "+e),r&&rt("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function zd(e,t,n){const r=ym(e);return e=r.length===1?r[0]:e,nf((n&&n.get||H$e)(r),[e],t||e)}const GN=zd("id"),il=nf(e=>e,[],"identity"),N1=nf(()=>0,[],"zero"),gS=nf(()=>1,[],"one"),Vd=nf(()=>!0,[],"true"),d1=nf(()=>!1,[],"false");function yzt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const q$e=0,Mie=1,Lie=2,W$e=3,G$e=4;function Bie(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yzt,r=e||q$e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Mie&&n(t||"error","ERROR",arguments),this},warn(){return r>=Lie&&n(t||"warn","WARN",arguments),this},info(){return r>=W$e&&n(t||"log","INFO",arguments),this},debug(){return r>=G$e&&n(t||"log","DEBUG",arguments),this}}}var at=Array.isArray;function jt(e){return e===Object(e)}const nxe=e=>e!=="__proto__";function yS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=vzt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;vS(r,s,i[s],o)}return r},{})}function vS(e,t,n,r){if(!nxe(t))return;let i,s;if(jt(n)&&!at(n)){s=jt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?vS(s,i,n[i]):nxe(i)&&(s[i]=n[i])}else e[t]=n}function vzt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Xr(e){return e[e.length-1]}function Wu(e){return e==null||e===""?null:+e}const Y$e=e=>t=>e*Math.exp(t),K$e=e=>t=>Math.log(e*t),X$e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Q$e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,H$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function E9(e,t,n,r){const i=n(e[0]),s=n(Xr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function J$e(e,t){return E9(e,t,Wu,il)}function Z$e(e,t){var n=Math.sign(e[0]);return E9(e,t,K$e(n),Y$e(n))}function eMe(e,t,n){return E9(e,t,H$(n),H$(1/n))}function tMe(e,t,n){return E9(e,t,X$e(n),Q$e(n))}function C9(e,t,n,r,i){const s=r(e[0]),o=r(Xr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function jie(e,t,n){return C9(e,t,n,Wu,il)}function Uie(e,t,n){const r=Math.sign(e[0]);return C9(e,t,n,K$e(r),Y$e(r))}function q$(e,t,n,r){return C9(e,t,n,H$(r),H$(1/r))}function zie(e,t,n,r){return C9(e,t,n,X$e(r),Q$e(r))}function nMe(e){return 1+~~(new Date(e).getMonth()/3)}function rMe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Lt(e){return e!=null?at(e)?e:[e]:[]}function iMe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function cr(e){return typeof e=="function"}const bzt="descending";function Vie(e,t,n){n=n||{},t=Lt(t)||[];const r=[],i=[],s={},o=n.comparator||xzt;return Lt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===bzt?-1:1),i.push(a=cr(a)?a:zd(a,null,n)),(Xu(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:nf(o(i,r),Object.keys(s))}const T9=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),xzt=(e,t)=>e.length===1?wzt(e[0],t[0]):_zt(e,t,e.length),wzt=(e,t)=>function(n,r){return T9(e(n),e(r))*t},_zt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=T9(s(r),s(i));return o*t[a]});function sl(e){return cr(e)?e:()=>e}function Hie(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function lr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function em(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function sMe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const Ezt=Object.prototype.hasOwnProperty;function vn(e,t){return Ezt.call(e,t)}const W6={};function bS(e){let t={},n;function r(s){return vn(t,s)&&t[s]!==W6}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===W6&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=W6),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==W6&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function oMe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Xr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ot(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),lr(r,n)}function rC(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function jb(e){return typeof e=="boolean"}function mv(e){return Object.prototype.toString.call(e)==="[object Date]"}function aMe(e){return e&&cr(e[Symbol.iterator])}function fi(e){return typeof e=="number"}function uMe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Bt(e){return typeof e=="string"}function qie(e,t,n){e&&(e=t?Lt(e).map(a=>a.replace(/\\(.)/g,"$1")):Lt(e));const r=e&&e.length,i=n&&n.get||H$e,s=a=>i(t?[a]:ym(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return nf(o,e,"key")}function lMe(e,t){const n=e[0],r=Xr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Czt=1e4;function cMe(e){e=+e||Czt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>vn(t,o)||vn(n,o),get:o=>vn(t,o)?t[o]:vn(n,o)?s(o,n[o]):void 0,set:(o,a)=>vn(t,o)?t[o]=a:s(o,a)}}function fMe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function $I(e,t){let n="";for(;--t>=0;)n+=e;return n}function dMe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?$I(i,o)+s:r==="center"?$I(i,~~(o/2))+s+$I(i,Math.ceil(o/2)):s+$I(i,o)}function YN(e){return e&&Xr(e)-e[0]||0}function Nt(e){return at(e)?"["+e.map(Nt)+"]":jt(e)||Bt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Wie(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Tzt=e=>fi(e)||mv(e)?e:Date.parse(e);function Gie(e,t){return t=t||Tzt,e==null||e===""?null:t(e)}function Yie(e){return e==null||e===""?null:e+""}function gp(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function hMe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function _1(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Azt(e){return e}function Szt(e){if(e==null)return Azt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Dzt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Izt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return rxe(e,n)})}:rxe(e,t)}function rxe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=pMe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function pMe(e,t){var n=Szt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Dzt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function kzt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Rzt(e){return pMe(e,Nzt.apply(this,arguments))}function Nzt(e,t,n){var r,i,s;if(arguments.length>1)r=Pzt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:kzt(e,r)}}function Pzt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const fu="year",Yc="quarter",Qu="month",fa="week",Kc="date",qu="day",tm="dayofyear",qf="hours",Wf="minutes",Hd="seconds",yp="milliseconds",Kie=[fu,Yc,Qu,fa,Kc,qu,tm,qf,Wf,Hd,yp],HH=Kie.reduce((e,t,n)=>(e[t]=1+n,e),{});function Xie(e){const t=Lt(e).slice(),n={};return t.length||rt("Missing time unit."),t.forEach(i=>{vn(HH,i)?n[i]=1:rt(`Invalid time unit: ${i}.`)}),(n[fa]||n[qu]?1:0)+(n[Yc]||n[Qu]||n[Kc]?1:0)+(n[tm]?1:0)>1&&rt(`Incompatible time units: ${e}`),t.sort((i,s)=>HH[i]-HH[s]),t}const Ozt={[fu]:"%Y ",[Yc]:"Q%q ",[Qu]:"%b ",[Kc]:"%d ",[fa]:"W%U ",[qu]:"%a ",[tm]:"%j ",[qf]:"%H:00",[Wf]:"00:%M",[Hd]:":%S",[yp]:".%L",[`${fu}-${Qu}`]:"%Y-%m ",[`${fu}-${Qu}-${Kc}`]:"%Y-%m-%d ",[`${qf}-${Wf}`]:"%H:%M"};function mMe(e,t){const n=lr({},Ozt,t),r=Xie(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Xx=new Date;function Qie(e){return Xx.setFullYear(e),Xx.setMonth(0),Xx.setDate(1),Xx.setHours(0,0,0,0),Xx}function gMe(e){return vMe(new Date(e))}function yMe(e){return rX(new Date(e))}function vMe(e){return Mg.count(Qie(e.getFullYear())-1,e)}function rX(e){return JA.count(Qie(e.getFullYear())-1,e)}function iX(e){return Qie(e).getDay()}function Fzt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function bMe(e){return wMe(new Date(e))}function xMe(e){return sX(new Date(e))}function wMe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return fv.count(t-1,e)}function sX(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ZA.count(t-1,e)}function oX(e){return Xx.setTime(Date.UTC(e,0,1)),Xx.getUTCDay()}function $zt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function _Me(e,t,n,r,i){const s=t||1,o=Xr(e),a=(y,v,b)=>(b=b||y,Mzt(n[b],r[b],y===o&&s,v)),u=new Date,l=gp(e),c=l[fu]?a(fu):sl(2012),f=l[Qu]?a(Qu):l[Yc]?a(Yc):N1,d=l[fa]&&l[qu]?a(qu,1,fa+qu):l[fa]?a(fa,1):l[qu]?a(qu,1):l[Kc]?a(Kc,1):l[tm]?a(tm,1):gS,h=l[qf]?a(qf):N1,p=l[Wf]?a(Wf):N1,m=l[Hd]?a(Hd):N1,g=l[yp]?a(yp):N1;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function Mzt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function qT(e,t,n){return t+e*7-(n+6)%7}const Lzt={[fu]:e=>e.getFullYear(),[Yc]:e=>Math.floor(e.getMonth()/3),[Qu]:e=>e.getMonth(),[Kc]:e=>e.getDate(),[qf]:e=>e.getHours(),[Wf]:e=>e.getMinutes(),[Hd]:e=>e.getSeconds(),[yp]:e=>e.getMilliseconds(),[tm]:e=>vMe(e),[fa]:e=>rX(e),[fa+qu]:(e,t)=>qT(rX(e),e.getDay(),iX(t)),[qu]:(e,t)=>qT(1,e.getDay(),iX(t))},Bzt={[Yc]:e=>3*e,[fa]:(e,t)=>qT(e,0,iX(t))};function EMe(e,t){return _Me(e,t||1,Lzt,Bzt,Fzt)}const jzt={[fu]:e=>e.getUTCFullYear(),[Yc]:e=>Math.floor(e.getUTCMonth()/3),[Qu]:e=>e.getUTCMonth(),[Kc]:e=>e.getUTCDate(),[qf]:e=>e.getUTCHours(),[Wf]:e=>e.getUTCMinutes(),[Hd]:e=>e.getUTCSeconds(),[yp]:e=>e.getUTCMilliseconds(),[tm]:e=>wMe(e),[fa]:e=>sX(e),[qu]:(e,t)=>qT(1,e.getUTCDay(),oX(t)),[fa+qu]:(e,t)=>qT(sX(e),e.getUTCDay(),oX(t))},Uzt={[Yc]:e=>3*e,[fa]:(e,t)=>qT(e,0,oX(t))};function CMe(e,t){return _Me(e,t||1,jzt,Uzt,$zt)}const zzt={[fu]:q0,[Yc]:q3.every(3),[Qu]:q3,[fa]:JA,[Kc]:Mg,[qu]:Mg,[tm]:Mg,[qf]:OB,[Wf]:NB,[Hd]:Eg,[yp]:CT},Vzt={[fu]:W0,[Yc]:W3.every(3),[Qu]:W3,[fa]:ZA,[Kc]:fv,[qu]:fv,[tm]:fv,[qf]:FB,[Wf]:PB,[Hd]:Eg,[yp]:CT};function xS(e){return zzt[e]}function wS(e){return Vzt[e]}function TMe(e,t,n){return e?e.offset(t,n):void 0}function AMe(e,t,n){return TMe(xS(e),t,n)}function SMe(e,t,n){return TMe(wS(e),t,n)}function DMe(e,t,n,r){return e?e.range(t,n,r):void 0}function IMe(e,t,n,r){return DMe(xS(e),t,n,r)}function kMe(e,t,n,r){return DMe(wS(e),t,n,r)}const MI=1e3,LI=MI*60,BI=LI*60,A9=BI*24,Hzt=A9*7,ixe=A9*30,aX=A9*365,RMe=[fu,Qu,Kc,qf,Wf,Hd,yp],jI=RMe.slice(0,-1),UI=jI.slice(0,-1),zI=UI.slice(0,-1),qzt=zI.slice(0,-1),Wzt=[fu,fa],sxe=[fu,Qu],NMe=[fu],LD=[[jI,1,MI],[jI,5,5*MI],[jI,15,15*MI],[jI,30,30*MI],[UI,1,LI],[UI,5,5*LI],[UI,15,15*LI],[UI,30,30*LI],[zI,1,BI],[zI,3,3*BI],[zI,6,6*BI],[zI,12,12*BI],[qzt,1,A9],[Wzt,1,Hzt],[sxe,1,ixe],[sxe,3,3*ixe],[NMe,1,aX]];function PMe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(YN(t))/n;let i=tp(a=>a[2]).right(LD,r),s,o;return i===LD.length?(s=NMe,o=Pv(t[0]/aX,t[1]/aX,n)):i?(i=LD[r/LD[i-1][2]<LD[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=RMe,o=Math.max(Pv(t[0],t[1],n),1)),{units:s,step:o}}function VI(e){const t={};return n=>t[n]||(t[n]=e(n))}function Gzt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Yzt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Yzt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function OMe(e){const t=VI(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Xw(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Gzt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Xw(o??",f");const a=Pv(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=rPe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=iPe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=nPe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let uX;FMe();function FMe(){return uX=OMe({format:kb,formatPrefix:sne})}function $Me(e){return OMe(tPe(e))}function W$(e){return arguments.length?uX=$Me(e):uX}function oxe(e,t,n){n=n||{},jt(n)||rt(`Invalid time multi-format specifier: ${n}`);const r=t(Hd),i=t(Wf),s=t(qf),o=t(Kc),a=t(fa),u=t(Qu),l=t(Yc),c=t(fu),f=e(n[yp]||".%L"),d=e(n[Hd]||":%S"),h=e(n[Wf]||"%I:%M"),p=e(n[qf]||"%I %p"),m=e(n[Kc]||n[qu]||"%a %d"),g=e(n[fa]||"%b %d"),y=e(n[Qu]||"%B"),v=e(n[Yc]||"%B"),b=e(n[fu]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:s(x)<x?h:o(x)<x?p:u(x)<x?a(x)<x?m:g:c(x)<x?l(x)<x?y:v:b)(x)}function MMe(e){const t=VI(e.format),n=VI(e.utcFormat);return{timeFormat:r=>Bt(r)?t(r):oxe(t,xS,r),utcFormat:r=>Bt(r)?n(r):oxe(n,wS,r),timeParse:VI(e.parse),utcParse:VI(e.utcParse)}}let lX;LMe();function LMe(){return lX=MMe({format:vne,parse:y4e,utcFormat:kN,utcParse:v4e})}function BMe(e){return MMe(d4e(e))}function pR(e){return arguments.length?lX=BMe(e):lX}const cX=(e,t)=>lr({},e,t);function jMe(e,t){const n=e?$Me(e):W$(),r=t?BMe(t):pR();return cX(n,r)}function Jie(e,t){const n=arguments.length;return n&&n!==2&&rt("defaultLocale expects either zero or two arguments."),n?cX(W$(e),pR(t)):cX(W$(),pR())}function Kzt(){return FMe(),LMe(),Jie()}const Xzt=/^(data:|([A-Za-z]+:)?\/\/)/,Qzt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Jzt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,axe="file://";function Zzt(e,t){return n=>({options:n||{},sanitize:tVt,load:eVt,fileAccess:!1,file:nVt(t),http:iVt(e)})}async function eVt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function tVt(e,t){t=lr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Qzt.test(e.replace(Jzt,""));(e==null||typeof e!="string"||!a)&&rt("Sanitize failure, invalid URI: "+Nt(e));const u=Xzt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(axe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(axe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function nVt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):rVt}async function rVt(){rt("No file system access.")}function iVt(e){return e?async function(t,n){const r=lr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?cr(s[i])?s[i]():s.text():rt(s.status+""+s.statusText)}:sVt}async function sVt(){rt("No HTTP fetch method available.")}const oVt=e=>e!=null&&e===e,aVt=e=>e==="true"||e==="false"||e===!0||e===!1,uVt=e=>!Number.isNaN(Date.parse(e)),UMe=e=>!Number.isNaN(+e)&&!(e instanceof Date),lVt=e=>UMe(e)&&Number.isInteger(+e),fX={boolean:Wie,integer:Wu,number:Wu,date:Gie,string:Yie,unknown:il},G6=[aVt,lVt,UMe,uVt],cVt=["boolean","integer","number","date"];function zMe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=G6.length,i=G6.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&oVt(u)&&!G6[a](u)&&(i[a]=0,++o,o===G6.length))return"string";return cVt[i.reduce((s,o)=>s===0?o:s,0)-1]}function VMe(e,t){return t.reduce((n,r)=>(n[r]=zMe(e,r),n),{})}function uxe(e){const t=function(n,r){const i={delimiter:e};return Zie(n,r?lr(r,i):i)};return t.responseType="text",t}function Zie(e,t){return t.header&&(e=t.header.map(Nt).join(t.delimiter)+`
`+e),QNe(t.delimiter).parse(e+"")}Zie.responseType="text";function fVt(e){return typeof Buffer=="function"&&cr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function ese(e,t){const n=t&&t.property?zd(t.property):il;return jt(e)&&!fVt(e)?dVt(n(e),t):n(JSON.parse(e))}ese.responseType="json";function dVt(e,t){return!at(e)&&aMe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const hVt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function HMe(e,t){let n,r,i,s;return e=ese(e,t),t&&t.feature?(n=Izt,i=t.feature):t&&t.mesh?(n=Rzt,i=t.mesh,s=hVt[t.filter]):rt("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):rt("Invalid TopoJSON object: "+i),r&&r.features||[r]}HMe.responseType="json";const SF={dsv:Zie,csv:uxe(","),tsv:uxe("	"),json:ese,topojson:HMe};function tse(e,t){return arguments.length>1?(SF[e]=t,this):vn(SF,e)?SF[e]:null}function qMe(e){const t=tse(e);return t&&t.responseType||"text"}function WMe(e,t,n,r){t=t||{};const i=tse(t.type||"json");return i||rt("Unknown data format type: "+t.type),e=i(e,t),t.parse&&pVt(e,t.parse,n,r),vn(e,"columns")&&delete e.columns,e}function pVt(e,t,n,r){if(!e.length)return;const i=pR();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=VMe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!fX[p])throw Error("Illegal format pattern: "+h+":"+p);return fX[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const S9=Zzt(typeof fetch<"u"&&fetch,null);function D9(e){const t=e||il,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function DF(e,t){try{await t(e)}catch(n){e.error(n)}}const GMe=Symbol("vega_id");let mVt=1;function I9(e){return!!(e&&mn(e))}function mn(e){return e[GMe]}function YMe(e,t){return e[GMe]=t,e}function Ii(e){const t=e===Object(e)?e:{data:e};return mn(t)?t:YMe(t,mVt++)}function nse(e){return k9(e,Ii({}))}function k9(e,t){for(const n in e)t[n]=e[n];return t}function KMe(e,t){return YMe(t,mn(e))}function nE(e,t){return e?t?(n,r)=>e(n,r)||mn(t(n))-mn(t(r)):(n,r)=>e(n,r)||mn(n)-mn(r):null}function XMe(e){return e&&e.constructor===rE}function rE(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:rE,insert(a){const u=Lt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=cr(a)?r:t,l=Lt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:sl(l)};return cr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return cr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[mn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[mn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[mn(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=mn(m),l[g]?l[g]=1:a.add.push(Ii(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[mn(m)]<0&&a.rem.push(m);function y(v,b,x){x?v[b]=x(v):a.encode=b,o||(c[mn(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[mn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[mn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[mn(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const IF="_:mod:_";function R9(){Object.defineProperty(this,IF,{writable:!0,value:{}})}R9.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[IF];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=at(n)?1+n.length:-1),i},modified(e,t){const n=this[IF];if(arguments.length){if(at(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[IF]={},this}};let gVt=0;const yVt="pulse",vVt=new R9,bVt=1,xVt=2;function us(e,t,n,r){this.id=++gVt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function lxe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}us.prototype={targets(){return this._targets||(this._targets=D9(GN))},set(e){return this.value!==e?(this.value=e,1):0},skip:lxe(bVt),modified:lxe(xVt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new R9,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof us?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===yVt)Lt(a).forEach(f=>{f instanceof us?f!==this&&(f.targets().add(this),s.push(f)):rt("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||vVt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function wVt(e,t,n,r){let i=1,s;return e instanceof us?s=e:e&&e.prototype instanceof us?s=new e:cr(e)?s=new us(null,e):(i=0,s=new us(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function _Vt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let EVt=0;function N9(e,t,n){this.id=++EVt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function h1(e,t,n){return new N9(e,t,n)}N9.prototype={_filter:Vd,_apply:il,targets(){return this._targets||(this._targets=D9(GN))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=h1(e);return this.targets().add(t),t},apply(e){const t=h1(null,e);return this.targets().add(t),t},merge(){const e=h1();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=h1();return this.targets().add(h1(null,null,Hie(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(h1(null,null,()=>n=!0)),t.targets().add(h1(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Vd,this._targets=null}};function CVt(e,t,n,r){const i=this,s=h1(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Lt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function TVt(e,t){const n=this.locale();return WMe(e,t,n.timeParse,n.utcParse)}function AVt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function SVt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:qMe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function DVt(e,t,n){const r=this,i=r._pending||IVt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Vd).insert(s.data||[])),i.done(),s}function IVt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const kVt={skip:!0};function RVt(e,t,n,r,i){return(e instanceof us?PVt:NVt)(this,e,t,n,r,i),this}function NVt(e,t,n,r,i,s){const o=lr({},s,kVt);let a,u;cr(n)||(n=sl(n)),r===void 0?a=l=>e.touch(n(l)):cr(r)?(u=new us(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;XMe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function PVt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new us(null,OVt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function OVt(e,t){return t=cr(t)?t:sl(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function FVt(e){e.rank=++this._rank}function $Vt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&rt("Cycle detected in dataflow graph.")}const G$={},n0=1,E1=2,eg=4,MVt=n0|E1,cxe=n0|eg,o2=n0|E1|eg,fxe=8,BD=16,dxe=32,hxe=64;function gv(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function qH(e,t){const n=[];return _1(e,t,r=>n.push(r)),n}function pxe(e,t){const n={};return e.visit(t,r=>{n[mn(r)]=1}),r=>n[mn(r)]?null:r}function Y6(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}gv.prototype={StopPropagation:G$,ADD:n0,REM:E1,MOD:eg,ADD_REM:MVt,ADD_MOD:cxe,ALL:o2,REFLOW:fxe,SOURCE:BD,NO_SOURCE:dxe,NO_FIELDS:hxe,fork(e){return new gv(this.dataflow).init(this,e)},clone(){const e=this.fork(o2);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(o2|BD)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new gv(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&hxe)&&(n.fields=e.fields),t&n0?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&E1?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&eg?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&dxe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||o2;return t&n0&&this.add.length||t&E1&&this.rem.length||t&eg&&this.mod.length},reflow(e){if(e)return this.fork(o2).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(eg,pxe(this,n0))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return at(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?at(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&n0&&(n.addF=Y6(n.addF,t)),e&E1&&(n.remF=Y6(n.remF,t)),e&eg&&(n.modF=Y6(n.modF,t)),e&BD&&(n.srcF=Y6(n.srcF,t)),n},materialize(e){e=e||o2;const t=this;return e&n0&&t.addF&&(t.add=qH(t.add,t.addF),t.addF=null),e&E1&&t.remF&&(t.rem=qH(t.rem,t.remF),t.remF=null),e&eg&&t.modF&&(t.mod=qH(t.mod,t.modF),t.modF=null),e&BD&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&BD)return _1(n.source,n.srcF,r),n;e&n0&&_1(n.add,n.addF,r),e&E1&&_1(n.rem,n.remF,r),e&eg&&_1(n.mod,n.modF,r);const i=n.source;if(e&fxe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?_1(i,pxe(n,cxe),r):_1(i,n.srcF,r))}return n}};function rse(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ot(rse,gv,{fork(e){const t=new gv(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?at(e)?e.some(r=>n[r]):n[e]:0},filter(){rt("MultiPulse does not support filtering.")},materialize(){rt("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function LVt(e,t,n){const r=this,i=[];if(r._pulse)return QMe(r);if(r._pending&&await r._pending,t&&await DF(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new gv(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=D9(GN);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=G$),u!==G$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await DF(r,c[f].callback)}return n&&await DF(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function BVt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function jVt(e,t,n){return this._pulse?QMe(this):(this.evaluate(e,t,n),this)}function UVt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function QMe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function zVt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function VVt(e,t){const n=e.source,r=this._clock;return n&&at(n)?new rse(this,r,n.map(i=>i.pulse),t):this._input[e.id]||HVt(this._pulse,n&&n.pulse)}function HVt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==G$&&(e.source=t.source),e)}const ise={skip:!1,force:!1};function qVt(e,t){const n=t||ise;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function WVt(e,t,n){const r=n||ise;return(e.set(t)||r.force)&&this.touch(e,r),this}function GVt(e,t,n){this.touch(e,n||ise);const r=new gv(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function YVt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),JMe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,KVt(t,0,e)):r=n,r}}}function JMe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function KVt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,JMe(e,r,t,n)}function LC(){this.logger(Bie()),this.logLevel(Mie),this._clock=0,this._rank=0,this._locale=Jie();try{this._loader=S9()}catch{}this._touched=D9(GN),this._input={},this._pulse=null,this._heap=YVt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function jD(e){return function(){return this._log[e].apply(this,arguments)}}LC.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:jD("error"),warn:jD("warn"),info:jD("info"),debug:jD("debug"),logLevel:jD("level"),cleanThreshold:1e4,add:wVt,connect:_Vt,rank:FVt,rerank:$Vt,pulse:GVt,touch:qVt,update:WVt,changeset:rE,ingest:AVt,parse:TVt,preload:DVt,request:SVt,events:CVt,on:RVt,evaluate:LVt,run:jVt,runAsync:BVt,runAfter:UVt,_enqueue:zVt,_getPulse:VVt};function Ke(e,t){us.call(this,e,null,t)}Ot(Ke,us,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const WT={};function ZMe(e){const t=eLe(e);return t&&t.Definition||null}function eLe(e){return e=e&&e.toLowerCase(),vn(WT,e)?WT[e]:null}function*tLe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function sse(e,t,n){const r=Float64Array.from(tLe(e,n));return r.sort(Og),t.map(i=>KRe(r,i))}function ose(e,t){return sse(e,[.25,.5,.75],t)}function ase(e,t){const n=e.length,r=IEt(e,t),i=ose(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function nLe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var qd=Math.random;function XVt(e){qd=e}function rLe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(tLe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(qd()*s)];c[l]=a/s}return c.sort(Og),[rY(c,n/2),rY(c,1-n/2)]}function iLe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?QVt(s,t+t/4):s}function QVt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function JVt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function ZVt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*qd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const sLe=Math.sqrt(2*Math.PI),eHt=Math.SQRT2;let UD=NaN;function P9(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(UD===UD)n=UD,UD=NaN;else{do n=qd()*2-1,r=qd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,UD=r*s}return e+n*t}function use(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*sLe)}function O9(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function F9(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*eHt*tHt(2*e-1)}function tHt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function lse(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>P9(n,r),pdf:s=>use(s,n,r),cdf:s=>O9(s,n,r),icdf:s=>F9(s,n,r)};return i.mean(e).stdev(t)}function cse(e,t){const n=lse();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=ase(e)),i):t},sample(){return e[~~(qd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function fse(e,t){return e=e||0,t=t??1,Math.exp(e+P9()*t)}function dse(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*sLe*e)}function hse(e,t,n){return O9(Math.log(e),t,n)}function pse(e,t,n){return Math.exp(F9(e,t,n))}function oLe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>fse(n,r),pdf:s=>dse(s,n,r),cdf:s=>hse(s,n,r),icdf:s=>pse(s,n,r)};return i.mean(e).stdev(t)}function aLe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=qd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function mse(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*qd()}function gse(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function yse(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function vse(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function uLe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>mse(n,r),pdf:s=>gse(s,n,r),cdf:s=>yse(s,n,r),icdf:s=>vse(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function bse(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function KN(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function $9(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function XN(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function _S(e,t,n,r,i){let s=0,o=0;return XN(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function xse(e,t,n){let r=0,i=0,s=0,o=0,a=0;XN(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=KN(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:_S(e,t,n,i,l)}}function lLe(e,t,n){let r=0,i=0,s=0,o=0,a=0;XN(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=KN(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:_S(e,t,n,i,l)}}function cLe(e,t,n){const[r,i,s,o]=$9(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;XN(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=KN(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:_S(e,t,n,o,y)}}function fLe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;XN(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=KN(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:_S(e,t,n,a,c)}}function wse(e,t,n){const[r,i,s,o]=$9(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,x=(f*y-d*l)/v,_=-b*u,C=T=>(T=T-s,b*T*T+x*T+_+o);return{coef:[_-x*s+b*s*s+o,x-2*b*s,b],predict:C,rSquared:_S(e,t,n,o,C)}}function dLe(e,t,n,r){if(r===0)return bse(e,t,n);if(r===1)return xse(e,t,n);if(r===2)return wse(e,t,n);const[i,s,o,a]=$9(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=rHt(c),v=b=>{b-=o;let x=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:nHt(f,y,-o,a),predict:v,rSquared:_S(e,t,n,a,v)}}function nHt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function rHt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const mxe=2,gxe=1e-12;function hLe(e,t,n,r){const[i,s,o,a]=$9(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=mxe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],x=y-i[v]>i[b]-y?v:b;let _=0,C=0,T=0,S=0,k=0;const I=1/Math.abs(i[x]-y||1);for(let O=v;O<=b;++O){const B=i[O],H=s[O],U=iHt(Math.abs(y-B)*I)*d[O],G=B*U;_+=U,C+=G,T+=H*U,S+=H*G,k+=B*G}const[R,F]=KN(C/_,T/_,S/_,k/_);c[g]=R+F*y,f[g]=Math.abs(s[g]-c[g]),sHt(i,g+1,p)}if(h===mxe)break;const m=XRe(f);if(Math.abs(m)<gxe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?gxe:(v=1-y*y)*v}return oHt(i,c,o,a)}function iHt(e){return(e=1-e*e*e)*e*e}function sHt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function oHt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const aHt=.5*Math.PI/180;function M9(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=uHt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&lHt(f,m,d,h,p)>aHt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function uHt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function lHt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function cHt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function dX(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:cHt(e)}function pLe(e,t,n){return n||e+(t?"_"+t:"")}const WH=()=>{},fHt={init:WH,add:WH,rem:WH,idx:0},mR={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},QN=Object.keys(mR).filter(e=>e!=="__count__");function dHt(e,t){return(n,r)=>lr({name:e,aggregate_param:r,out:n||e},fHt,t)}[...QN,"__count__"].forEach(e=>{mR[e]=dHt(e,mR[e])});function mLe(e,t,n){return mR[e](n,t)}function gLe(e,t){return e.idx-t.idx}function hHt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=mR[i]())})};return e.forEach(n),Object.values(t).sort(gLe)}function pHt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function mHt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function gHt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function yHt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function yLe(e,t){const n=t||il,r=hHt(e),i=e.slice().sort(gLe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=pHt,s.prototype.add=mHt,s.prototype.rem=gHt,s.prototype.set=yHt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function _se(e){this._key=e?zd(e):mn,this.reset()}const bu=_se.prototype;bu.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};bu.add=function(e){this._add.push(e)};bu.rem=function(e){this._rem.push(e)};bu.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};bu.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",vn(n,s)||(n[s]=1,++i);return i};bu.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=sMe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};bu.argmin=function(e){return this.extent(e)[0]||{}};bu.argmax=function(e){return this.extent(e)[1]||{}};bu.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};bu.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};bu.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=ose(this.values(),e),this._get=e),this._q};bu.q1=function(e){return this.quartile(e)[0]};bu.q2=function(e){return this.quartile(e)[1]};bu.q3=function(e){return this.quartile(e)[2]};bu.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=rLe(this.values(),1e3,.05,e),this._get=e),this._ci};bu.ci0=function(e){return this.ci(e)[0]};bu.ci1=function(e){return this.ci(e)[1]};function Xv(e){Ke.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Xv.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:QN},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ot(Xv,Ke,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=Lt(Xu(v)),x=b.length;let _=0,C;for(;_<x;++_)r[C=b[_]]||(r[C]=1,t.push(C))}this._dims=Lt(e.groupby),this._dnames=this._dims.map(v=>{const b=ho(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:dX(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&rt("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&rt("Null aggregate field specified."),m=ho(f),g=pLe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(mLe(d,h,g))}return this._measures=this._measures.map(v=>yLe(v,v.field)),Object.create(null)},cellkey:dX(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new _se),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?KMe(t.tuple,s):Ii(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const vHt=1e-14;function Ese(e){Ke.call(this,null,e)}Ese.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ot(Ese,Ke,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Xu(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=nLe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Wu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(vHt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=nf(u,Xu(t),e.name||"bin_"+ho(t))}});function vLe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?fMe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Cse(e){Ke.call(this,[],e)}Cse.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ot(Cse,Ke,{transform(e,t){const n=t.fork(t.ALL),r=vLe(mn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(nE(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function bLe(e){us.call(this,null,bHt,e)}Ot(bLe,us);function bHt(e){return this.value&&!e.modified()?this.value:Vie(e.fields,e.orders)}function Tse(e){Ke.call(this,null,e)}Tse.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function xHt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ot(Tse,Ke,{transform(e,t){const n=f=>d=>{for(var h=xHt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ii({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Ase(e){Ke.call(this,null,e)}Ase.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ot(Ase,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=wHt(a,i,s,e.filter||Vd)):n.mod=a,n.source=this.value,n.modifies(r)}});function wHt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Ii(s)),s={},s[t]=l);return i}const yxe={kde:cse,mixture:aLe,normal:lse,lognormal:oLe,uniform:uLe},_Ht="distributions",vxe="function",EHt="field";function xLe(e,t){const n=e[vxe];vn(yxe,n)||rt("Unknown distribution function: "+n);const r=yxe[n]();for(const i in e)i===EHt?r.data((e.from||t()).map(e[i])):i===_Ht?r[i](e[i].map(s=>xLe(s,t))):typeof r[i]===vxe&&r[i](e[i]);return r}function Sse(e){Ke.call(this,null,e)}const wLe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],CHt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:wLe},{name:"weights",type:"number",array:!0}]};Sse.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:wLe.concat(CHt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ot(Sse,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=xLe(e.distribution,THt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&rt("Invalid density method: "+o),!e.extent&&!r.data&&rt("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||em(r.data()),l=M9(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ii(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function THt(e){return()=>e.materialize(e.SOURCE).source}function _Le(e,t){return e?e.map((n,r)=>t[r]||ho(n)):null}function Dse(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const ELe="bin";function Ise(e){Ke.call(this,null,e)}Ise.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:ELe}]};const AHt=(e,t)=>YN(em(e,t))/30;Ot(Ise,Ke,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Dse(t.source,e.groupby,il),i=e.smooth||!1,s=e.field,o=e.step||AHt(n,s),a=nE((p,m)=>s(p)-s(m)),u=e.as||ELe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of iLe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function CLe(e){us.call(this,null,SHt,e),this.modified(!0)}Ot(CLe,us);function SHt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:nf(n=>t(n,e),Xu(t),ho(t))}function kse(e){Ke.call(this,[void 0,void 0],e)}kse.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ot(kse,Ke,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Wu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=ho(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Rse(e,t){us.call(this,e),this.parent=t,this.count=0}Ot(Rse,us,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function L9(e){Ke.call(this,{},e),this._keys=bS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ot(L9,Ke,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=vn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Rse(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=mn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(mn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=mn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(mn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=mn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function TLe(e){us.call(this,null,DHt,e)}Ot(TLe,us);function DHt(e){return this.value&&!e.modified()?this.value:at(e.name)?Lt(e.name).map(t=>zd(t)):zd(e.name,e.as)}function Nse(e){Ke.call(this,bS(),e)}Nse.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ot(Nse,Ke,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=mn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(mn(f),1)});function c(f){const d=mn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Pse(e){Ke.call(this,[],e)}Pse.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ot(Pse,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=_Le(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=nse(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Ose(e){Ke.call(this,[],e)}Ose.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ot(Ose,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(ho),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=nse(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Fse(e){Ke.call(this,null,e)}Fse.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ot(Fse,Ke,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function ALe(e){Ke.call(this,[],e)}Ot(ALe,Ke,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Ii(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const K6={value:"value",median:XRe,mean:FEt,min:nY,max:Fg},IHt=[];function $se(e){Ke.call(this,[],e)}$se.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function kHt(e){var t=e.method||K6.value,n;if(K6[t]==null)rt("Unrecognized imputation method: "+t);else return t===K6.value?(n=e.value!==void 0?e.value:0,()=>n):K6[t]}function RHt(e){const t=e.field;return n=>n?t(n):NaN}Ot($se,Ke,{transform(e,t){var n=t.fork(t.ALL),r=kHt(e),i=RHt(e),s=ho(e.field),o=ho(e.key),a=(e.groupby||[]).map(ho),u=NHt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,x,_;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],_={_impute:!0},y=0,x=p.length;y<x;++y)_[a[y]]=p[y];_[o]=m,_[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Ii(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function NHt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):IHt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Mse(e){Xv.call(this,e)}Mse.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:QN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ot(Mse,Xv,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{lr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Lse(e){Ke.call(this,null,e)}Lse.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ot(Lse,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Dse(r,e.groupby,e.field),s=(e.groupby||[]).map(ho),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&rt("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=em(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=cse(h,o)[a],m=e.counts?h.length:1,g=c||em(h);M9(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Ii(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function SLe(e){us.call(this,null,PHt,e)}Ot(SLe,us);function PHt(e){return this.value&&!e.modified()?this.value:qie(e.fields,e.flat)}function DLe(e){Ke.call(this,[],e),this._pending=null}Ot(DLe,Ke,{transform(e,t){const n=t.dataflow;return this._pending?GH(this,t,this._pending):OHt(e)?t.StopPropagation:e.values?GH(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Lt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>GH(this,t,Lt(r.data)))}});function OHt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function GH(e,t,n){n.forEach(Ii);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Bse(e){Ke.call(this,{},e)}Bse.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ot(Bse,Ke,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&rt('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&rt('The "as" parameter has too few output field names.'),c=c||i.map(ho),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||rt("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function ILe(e){us.call(this,null,FHt,e)}Ot(ILe,us);function FHt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function kLe(e){us.call(this,null,$Ht,e)}Ot(kLe,us);function $Ht(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function RLe(e){Ke.call(this,null,e)}Ot(RLe,Ke,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function jse(e){Xv.call(this,e)}jse.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:QN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ot(jse,Xv,{_transform:Xv.prototype.transform,transform(e,t){return this._transform(MHt(e,t),t)}});function MHt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Xu(n).concat(Xu(r)),o=BHt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>LHt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function LHt(e,t,n,r){return nf(i=>t(i)===e?n(i):NaN,r,e+"")}function BHt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(T9),t?i.slice(0,t):i}function NLe(e){L9.call(this,e)}Ot(NLe,L9,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(mn(s),n,t,s);return(e.modified("field")||r&&t.modified(Xu(r)))&&rt("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Ii(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Use(e){Ke.call(this,null,e)}Use.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ot(Use,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=_Le(e.fields,e.as||[]),s=r?(a,u)=>jHt(a,u,r,i):k9;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=mn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Ii({}));o[mn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[mn(a)]))}),n}});function jHt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function PLe(e){Ke.call(this,null,e)}Ot(PLe,Ke,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function zse(e){Ke.call(this,null,e)}zse.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const UHt=1e-14;Ot(zse,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Dse(i,e.groupby,e.field),o=(e.groupby||[]).map(ho),a=[],u=e.step||.01,l=e.probs||Sc(u/2,1-UHt,u),c=l.length;return s.forEach(f=>{const d=sse(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Ii(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function OLe(e){Ke.call(this,null,e)}Ot(OLe,Ke,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=mn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=nse(i);r[mn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[mn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Vse(e){Ke.call(this,[],e),this.count=0}Vse.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ot(Vse,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[mn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*qd()),d<o.length&&d>=u&&(f=o[d],s[mn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=mn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[mn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[mn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[mn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[mn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[mn(c)])),this.count=a,this.value=n.source=o,n}});function Hse(e){Ke.call(this,null,e)}Hse.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ot(Hse,Ke,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Sc(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Ii(s)}),n.add=t.add.concat(this.value),n}});function FLe(e){Ke.call(this,null,e),this.modified(!0)}Ot(FLe,Ke,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function qse(e){Ke.call(this,null,e)}const $Le=["unit0","unit1"];qse.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Kie,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:$Le}]};Ot(qse,Ke,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?wS:xS)(s.unit).offset,a=e.as||$Le,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Xu(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:PMe({extent:e.extent||em(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Xie(r),o=this.value||{},a=(n?CMe:EMe)(s,i);return a.unit=Xr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function MLe(e){Ke.call(this,bS(),e)}Ot(MLe,Ke,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function LLe(e){Ke.call(this,null,e)}Ot(LLe,Ke,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(nE(e.sort)):t.source).map(e.field))}});function zHt(e,t,n,r){const i=gR[e](t,n);return{init:i.init||N1,update:function(s,o){o[r]=i.next(s)}}}const gR={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=gR.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||rt("ntile num must be greater than zero.");const n=gR.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||rt("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=VHt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function VHt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const HHt=Object.keys(gR);function BLe(e){const t=Lt(e.ops),n=Lt(e.fields),r=Lt(e.params),i=Lt(e.aggregate_params),s=Lt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Lt(Xu(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=ho(g),x=pLe(p,b,s[m]);if(h(g),o.push(x),vn(gR,p))a.push(zHt(p,g,y,x));else{if(g==null&&p!=="count"&&rt("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let _=l[b];_||(_=l[b]=[],_.field=g,f.push(_)),_.push(mLe(p,v,x))}}),(c.length||f.length)&&(this.cell=qHt(f,c,d)),this.inputs=Object.keys(u)}const jLe=BLe.prototype;jLe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};jLe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function qHt(e,t,n){e=e.map(u=>yLe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new _se;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Wse(e){Ke.call(this,{},e),this._mlen=0,this._mods=[]}Wse.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:HHt.concat(QN)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ot(Wse,Ke,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=nE(e.sort),i=dX(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new BLe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)WHt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=vLe(mn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function WHt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?tp(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||sl(-1)};t.init();for(let f=0;f<u;++f)GHt(c,o,f,u),s&&YHt(c,l),t.update(c,a[f])}function GHt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function YHt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const KHt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Xv,bin:Ese,collect:Cse,compare:bLe,countpattern:Tse,cross:Ase,density:Sse,dotbin:Ise,expression:CLe,extent:kse,facet:L9,field:TLe,filter:Nse,flatten:Pse,fold:Ose,formula:Fse,generate:ALe,impute:$se,joinaggregate:Mse,kde:Lse,key:SLe,load:DLe,lookup:Bse,multiextent:ILe,multivalues:kLe,params:RLe,pivot:jse,prefacet:NLe,project:Use,proxy:PLe,quantile:zse,relay:OLe,sample:Vse,sequence:Hse,sieve:FLe,subflow:Rse,timeunit:qse,tupleindex:MLe,values:LLe,window:Wse},Symbol.toStringTag,{value:"Module"}));function yv(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const XHt=()=>typeof Image<"u"?Image:null;function Gse(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const QHt="identity",GT="linear",dy="log",JN="pow",ZN="sqrt",B9="symlog",i_="time",s_="utc",F0="sequential",ES="diverging",YT="quantile",j9="quantize",U9="threshold",Yse="ordinal",hX="point",ULe="band",Kse="bin-ordinal",xa="continuous",eP="discrete",tP="discretizing",rh="interpolating",Xse="temporal";function JHt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function ZHt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Qse(){const e=Nb().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Gse(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Sc(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,Nv(h,m)-1),v=m===g?y:Nv(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Qse().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function zLe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return zLe(t())},e}function eqt(){return zLe(Qse().paddingInner(1))}var tqt=Array.prototype.map;function nqt(e){return tqt.call(e,Wu)}const rqt=Array.prototype.slice;function VLe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Nv(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=nqt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=rqt.call(r),n):t.slice()},n.tickFormat=function(r,i){return n4e(e[0],Xr(e),r??10,i)},n.copy=function(){return VLe().domain(n.domain()).range(n.range())},n}const Y$=new Map,HLe=Symbol("vega_scale");function qLe(e){return e[HLe]=!0,e}function iqt(e){return e&&e[HLe]===!0}function sqt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?JHt(s):s.invertExtent?ZHt(s):void 0),s.type=e,qLe(s)};return r.metadata=gp(Lt(n)),r}function xi(e,t,n){return arguments.length>1?(Y$.set(e,sqt(e,t,n)),this):WLe(e)?Y$.get(e):void 0}xi(QHt,r4e);xi(GT,Ua,xa);xi(dy,s4e,[xa,dy]);xi(JN,gne,xa);xi(ZN,pkt,xa);xi(B9,o4e,xa);xi(i_,xne,[xa,Xse]);xi(s_,I3t,[xa,Xse]);xi(F0,wne,[xa,rh]);xi(`${F0}-${GT}`,wne,[xa,rh]);xi(`${F0}-${dy}`,b4e,[xa,rh,dy]);xi(`${F0}-${JN}`,_ne,[xa,rh]);xi(`${F0}-${ZN}`,k3t,[xa,rh]);xi(`${F0}-${B9}`,x4e,[xa,rh]);xi(`${ES}-${GT}`,w4e,[xa,rh]);xi(`${ES}-${dy}`,_4e,[xa,rh,dy]);xi(`${ES}-${JN}`,Ene,[xa,rh]);xi(`${ES}-${ZN}`,R3t,[xa,rh]);xi(`${ES}-${B9}`,E4e,[xa,rh]);xi(YT,a4e,[tP,YT]);xi(j9,u4e,tP);xi(U9,l4e,tP);xi(Kse,VLe,[eP,tP]);xi(Yse,Nb,eP);xi(ULe,Qse,eP);xi(hX,eqt,eP);function WLe(e){return Y$.has(e)}function iE(e,t){const n=Y$.get(e);return n&&n.metadata[t]}function Jse(e){return iE(e,xa)}function KT(e){return iE(e,eP)}function pX(e){return iE(e,tP)}function GLe(e){return iE(e,dy)}function oqt(e){return iE(e,Xse)}function YLe(e){return iE(e,rh)}function KLe(e){return iE(e,YT)}const aqt=["clamp","base","constant","exponent"];function XLe(e,t){const n=t[0],r=Xr(t)-n;return function(i){return e(n+i*r)}}function z9(e,t,n){return Kte(Zse(t||"rgb",n),e)}function QLe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function JLe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?sl(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=xi(s)().domain([t,n]).range([0,1]),aqt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Zse(e,t){const n=fTt[uqt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function uqt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const lqt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},cqt={accent:P3t,category10:N3t,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:O3t,observable10:F3t,paired:$3t,pastel1:M3t,pastel2:L3t,set1:B3t,set2:j3t,set3:U3t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function ZLe(e){if(at(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function eBe(e,t){for(const n in e)eoe(n,t(e[n]))}const bxe={};eBe(cqt,ZLe);eBe(lqt,e=>z9(ZLe(e)));function eoe(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(bxe[e]=t,this):bxe[e]}const kF="symbol",fqt="discrete",dqt="gradient",hqt=e=>at(e)?e.map(t=>String(t)):String(e),pqt=(e,t)=>e[1]-t[1],mqt=(e,t)=>t[1]-e[1];function toe(e,t,n){let r;return fi(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(YN(e.domain())/n||1)+1))),jt(t)&&(r=t.step,t=t.interval),Bt(t)&&(t=e.type===i_?xS(t):e.type==s_?wS(t):rt("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function tBe(e,t,n){let r=e.range(),i=r[0],s=Xr(r),o=pqt;if(i>s&&(r=s,s=i,i=r,o=mqt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Xr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function noe(e,t){return e.bins?tBe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function nBe(e,t,n,r,i,s){const o=t.type;let a=hqt;if(o===i_||i===i_)a=e.timeFormat(r);else if(o===s_||i===s_)a=e.utcFormat(r);else if(GLe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=rBe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function rBe(e,t,n){const r=noe(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const mX={[YT]:"quantiles",[j9]:"thresholds",[U9]:"domain"},iBe={[YT]:"quantiles",[j9]:"domain"};function sBe(e,t){return e.bins?vqt(e.bins):e.type===dy?rBe(e,t,!0):mX[e.type]?yqt(e[mX[e.type]]()):noe(e,t)}function gqt(e,t,n){const r=t[iBe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function yqt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function vqt(e){const t=e.slice(0,-1);return t.max=Xr(e),t}const bqt=e=>mX[e.type]||e.bins;function oBe(e,t,n,r,i,s,o){const a=iBe[t.type]&&s!==i_&&s!==s_?gqt(e,t,i):nBe(e,t,n,i,s,o);return r===kF&&bqt(t)?xqt(a):r===fqt?wqt(a):_qt(a)}const xqt=e=>(t,n,r)=>{const i=xxe(r[n+1],xxe(r.max,1/0)),s=wxe(t,e),o=wxe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},xxe=(e,t)=>e??t,wqt=e=>(t,n)=>n?e(t):null,_qt=e=>t=>e(t),wxe=(e,t)=>Number.isFinite(e)?t(e):null;function Eqt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Xr(t),s=i-r;if(e.type===U9){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Cqt(e,t,n,r){const i=r||t.type;return Bt(n)&&oqt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===i_?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===s_?e.utcFormat("%A, %d %B %Y, %X UTC"):oBe(e,t,5,null,n,r,!0)}function aBe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Cqt(e,t,n.format,n.formatType);if(pX(t.type)){const s=sBe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(KT(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Xr(s))}`}}let uBe=0;function Tqt(){uBe=0}const K$="p_";function roe(e){return e&&e.gradient}function lBe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?K$:"";return i||(i=e.id="gradient_"+uBe++,r==="radial"?(e.x1=qp(e.x1,.5),e.y1=qp(e.y1,.5),e.r1=qp(e.r1,0),e.x2=qp(e.x2,.5),e.y2=qp(e.y2,.5),e.r2=qp(e.r2,.5),s=K$):(e.x1=qp(e.x1,0),e.y1=qp(e.y1,0),e.x2=qp(e.x2,1),e.y2=qp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function qp(e,t){return e??t}function cBe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const _xe={basis:{curve:tRt},"basis-closed":{curve:nRt},"basis-open":{curve:rRt},bundle:{curve:iRt,tension:"beta",value:.85},cardinal:{curve:sRt,tension:"tension",value:0},"cardinal-open":{curve:aRt,tension:"tension",value:0},"cardinal-closed":{curve:oRt,tension:"tension",value:0},"catmull-rom":{curve:uRt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:lRt,tension:"alpha",value:.5},"catmull-rom-open":{curve:cRt,tension:"alpha",value:.5},linear:{curve:Cne},"linear-closed":{curve:fRt},monotone:{horizontal:hRt,vertical:dRt},natural:{curve:pRt},step:{curve:mRt},"step-after":{curve:yRt},"step-before":{curve:gRt}};function ioe(e,t,n){var r=vn(_xe,e)&&_xe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Aqt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Sqt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Dqt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Iqt=/^((\s+,?\s*)|(,\s*))/,kqt=/^[01]/;function XT(e){const t=[];return(e.match(Sqt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Aqt[s],a=Rqt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Rqt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?kqt:Dqt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Iqt);u!==null&&(i+=u[0].length)}return r}const Qv=Math.PI/180,Nqt=1e-14,Qx=Math.PI/2,v0=Math.PI*2,a2=Math.sqrt(3)/2;var YH={},KH={},fBe=[].join;function Pqt(e,t,n,r,i,s,o,a,u){const l=fBe.call(arguments);if(YH[l])return YH[l];const c=o*Qv,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,x=g*a+y*u,_=v*a+b*u,C=g*e+y*t,T=v*e+b*t;let k=1/((C-x)*(C-x)+(T-_)*(T-_))-.25;k<0&&(k=0);let I=Math.sqrt(k);s==i&&(I=-I);const R=.5*(x+C)-I*(T-_),F=.5*(_+T)+I*(C-x),O=Math.atan2(_-F,x-R);let H=Math.atan2(T-F,C-R)-O;H<0&&s===1?H+=v0:H>0&&s===0&&(H-=v0);const U=Math.ceil(Math.abs(H/(Qx+.001))),G=[];for(let Y=0;Y<U;++Y){const Q=O+Y*H/U,M=O+(Y+1)*H/U;G[Y]=[R,F,Q,M,n,r,f,d]}return YH[l]=G}function Oqt(e){const t=fBe.call(e);if(KH[t])return KH[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),_=n+p-x*m,C=r+m+x*p,T=n+g,S=r+y,k=T+x*y,I=S-x*g;return KH[t]=[c*_+f*C,d*_+h*C,c*k+f*I,d*k+h*I,c*T+f*S,d*T+h*S]}const pd=["l",0,0,0,0,0,0,0];function Fqt(e,t,n){const r=pd[0]=e[0];if(r==="a"||r==="A")pd[1]=t*e[1],pd[2]=n*e[2],pd[3]=e[3],pd[4]=e[4],pd[5]=e[5],pd[6]=t*e[6],pd[7]=n*e[7];else if(r==="h"||r==="H")pd[1]=t*e[1];else if(r==="v"||r==="V")pd[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)pd[i]=(i%2==1?t:n)*e[i];return pd}function yR(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=Fqt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Exe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Exe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Exe(e,t,n,r){const i=Pqt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Oqt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Cxe=.5773502691896257,Txe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,v0)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=a2*n,i=r-n*Cxe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=a2*n,i=r-n*Cxe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=a2*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=a2*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=a2*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=a2*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function dBe(e){return vn(Txe,e)?Txe[e]:$qt(e)}var XH={};function $qt(e){if(!vn(XH,e)){const t=XT(e);XH[e]={draw:function(n,r){yR(n,t,0,0,Math.sqrt(r)/2)}}}return XH[e]}const r1=.448084975506;function Mqt(e){return e.x}function Lqt(e){return e.y}function Bqt(e){return e.width}function jqt(e){return e.height}function Wm(e){return typeof e=="function"?e:()=>+e}function X6(e,t,n){return Math.max(t,Math.min(e,n))}function hBe(){var e=Mqt,t=Lqt,n=Bqt,r=jqt,i=Wm(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=X6(+i.call(this,c),0,v),x=X6(+s.call(this,c),0,v),_=X6(+o.call(this,c),0,v),C=X6(+a.call(this,c),0,v);if(u||(u=h=TB()),b<=0&&x<=0&&_<=0&&C<=0)u.rect(p,m,g,y);else{var T=p+g,S=m+y;u.moveTo(p+b,m),u.lineTo(T-x,m),u.bezierCurveTo(T-r1*x,m,T,m+r1*x,T,m+x),u.lineTo(T,S-C),u.bezierCurveTo(T,S-r1*C,T-r1*C,S,T-C,S),u.lineTo(p+_,S),u.bezierCurveTo(p+r1*_,S,p,S-r1*_,p,S-_),u.lineTo(p,m+b),u.bezierCurveTo(p,m+r1*b,p+r1*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Wm(c),l):e},l.y=function(c){return arguments.length?(t=Wm(c),l):t},l.width=function(c){return arguments.length?(n=Wm(c),l):n},l.height=function(c){return arguments.length?(r=Wm(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Wm(c),s=f!=null?Wm(f):i,a=d!=null?Wm(d):i,o=h!=null?Wm(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function pBe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,x=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(o+v,a+b),i.arc(o,a,u,x,x+Math.PI)}else i.arc(f,d,p,0,v0);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=TB()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function nP(e,t){return e??t}const rP=e=>e.x||0,iP=e=>e.y||0,Uqt=e=>e.width||0,zqt=e=>e.height||0,Vqt=e=>(e.x||0)+(e.width||0),Hqt=e=>(e.y||0)+(e.height||0),qqt=e=>e.startAngle||0,Wqt=e=>e.endAngle||0,Gqt=e=>e.padAngle||0,Yqt=e=>e.innerRadius||0,Kqt=e=>e.outerRadius||0,Xqt=e=>e.cornerRadius||0,Qqt=e=>nP(e.cornerRadiusTopLeft,e.cornerRadius)||0,Jqt=e=>nP(e.cornerRadiusTopRight,e.cornerRadius)||0,Zqt=e=>nP(e.cornerRadiusBottomRight,e.cornerRadius)||0,eWt=e=>nP(e.cornerRadiusBottomLeft,e.cornerRadius)||0,tWt=e=>nP(e.size,64),nWt=e=>e.size||1,V9=e=>e.defined!==!1,rWt=e=>dBe(e.shape||"circle"),iWt=HY().startAngle(qqt).endAngle(Wqt).padAngle(Gqt).innerRadius(Yqt).outerRadius(Kqt).cornerRadius(Xqt),sWt=S4e().x(rP).y1(iP).y0(Hqt).defined(V9),oWt=S4e().y(iP).x1(rP).x0(Vqt).defined(V9),aWt=UB().x(rP).y(iP).defined(V9),uWt=hBe().x(rP).y(iP).width(Uqt).height(zqt).cornerRadius(Qqt,Jqt,Zqt,eWt),lWt=eRt().type(rWt).size(tWt),cWt=pBe().x(rP).y(iP).defined(V9).size(nWt);function soe(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function fWt(e,t){return iWt.context(e)(t)}function dWt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?oWt:sWt).curve(ioe(r,n.orient,n.tension)).context(e)(t)}function hWt(e,t){const n=t[0],r=n.interpolate||"linear";return aWt.curve(ioe(r,n.orient,n.tension)).context(e)(t)}function CS(e,t,n,r){return uWt.context(e)(t,n,r)}function pWt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function mWt(e,t){return lWt.context(e)(t)}function gWt(e,t){return cWt.context(e)(t)}var mBe=1;function gBe(){mBe=1}function ooe(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+mBe++),o=i.clipping[s]||(i.clipping[s]={id:s});return cr(r)?o.path=r(null):soe(n)?o.path=CS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Yo(e){this.clear(),e&&this.union(e)}Yo.prototype={clone(){return new Yo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function H9(e){this.mark=e,this.bounds=this.bounds||new Yo}function q9(e){H9.call(this,e),this.items=this.items||[]}Ot(q9,H9);class yBe{constructor(t){this._pending=0,this._loader=t||S9()}pending(){return this._pending}sanitizeURL(t){const n=this;return Axe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(zD(n),r)).catch(()=>(zD(n),null))}loadImage(t){const n=this,r=XHt();return Axe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=vn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>zD(n),o.onerror=()=>zD(n),o.src=s,o}).catch(i=>(zD(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Axe(e){e._pending+=1}function zD(e){e._pending-=1}function Oy(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?yWt(t,r):0))}return e}function yWt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const vWt=v0-1e-8;let W9,RF,NF,ww,gX,PF,yX,vX;const H1=(e,t)=>W9.add(e,t),OF=(e,t)=>H1(RF=e,NF=t),Sxe=e=>H1(e,W9.y1),Dxe=e=>H1(W9.x1,e),Jx=(e,t)=>gX*e+yX*t,Zx=(e,t)=>PF*e+vX*t,QH=(e,t)=>H1(Jx(e,t),Zx(e,t)),JH=(e,t)=>OF(Jx(e,t),Zx(e,t));function sP(e,t){return W9=e,t?(ww=t*Qv,gX=vX=Math.cos(ww),PF=Math.sin(ww),yX=-PF):(gX=vX=1,ww=PF=yX=0),bWt}const bWt={beginPath(){},closePath(){},moveTo:JH,lineTo:JH,rect(e,t,n,r){ww?(QH(e+n,t),QH(e+n,t+r),QH(e,t+r),JH(e,t)):(H1(e+n,t+r),OF(e,t))},quadraticCurveTo(e,t,n,r){const i=Jx(e,t),s=Zx(e,t),o=Jx(n,r),a=Zx(n,r);Ixe(RF,i,o,Sxe),Ixe(NF,s,a,Dxe),OF(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Jx(e,t),a=Zx(e,t),u=Jx(n,r),l=Zx(n,r),c=Jx(i,s),f=Zx(i,s);kxe(RF,o,u,c,Sxe),kxe(NF,a,l,f,Dxe),OF(c,f)},arc(e,t,n,r,i,s){if(r+=ww,i+=ww,RF=n*Math.cos(i)+e,NF=n*Math.sin(i)+t,Math.abs(i-r)>vWt)H1(e-n,t-n),H1(e+n,t+n);else{const o=l=>H1(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%v0,r<0&&(r+=v0),i=i%v0,i<0&&(i+=v0),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=v0,a=r-r%Qx,u=0;u<4&&a>i;++u,a-=Qx)o(a);else for(a=r-r%Qx+Qx,u=0;u<4&&a<i;++u,a=a+Qx)o(a)}}};function Ixe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function kxe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>Nqt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Rxe(u,e,t,n,r)),0<l&&l<1&&i(Rxe(l,e,t,n,r))}function Rxe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var vv=(vv=yv(1,1))?vv.getContext("2d"):null;const bX=new Yo;function aoe(e){return function(t,n){if(!vv)return!0;e(vv,t),bX.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=bX;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(vv.isPointInPath(u,a))return!0;return!1}}function uoe(e,t){return t.contains(e.x||0,e.y||0)}function vBe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(bX.set(n,r,n+i,r+s))}function bBe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return iC(t,n,r,i,s)}function iC(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function QT(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Eh(e,t){return e??t}function Nxe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function xWt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Eh(t.x1,.5)*r,n.y1+Eh(t.y1,.5)*i,Math.max(r,i)*Eh(t.r1,0),n.x1+Eh(t.x2,.5)*r,n.y1+Eh(t.y2,.5)*i,Math.max(r,i)*Eh(t.r2,.5));else{const o=Eh(t.x1,0),a=Eh(t.y1,0),u=Eh(t.x2,1),l=Eh(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=yv(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Nxe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Nxe(s,t.stops)}function xBe(e,t,n){return roe(n)?xWt(e,n,t.bounds):n}function X$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=xBe(e,t,t.fill),!0):!1}var wWt=[];function JT(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=xBe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||wWt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function _Wt(e,t){return e.zindex-t.zindex||e.index-t.index}function loe(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(_Wt)}function vp(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=loe(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function Q$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=loe(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function coe(e){return function(t,n,r){vp(n,i=>{(!r||r.intersects(i.bounds))&&wBe(e,t,i,i)})}}function EWt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&wBe(e,t,n.items[0],n.items)}}function wBe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(QT(t,n),n.fill&&X$(t,n,i)&&t.fill(),n.stroke&&JT(t,n,i)&&t.stroke()))}function G9(e){return e=e||Vd,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,Q$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function oP(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function foe(e){return G9(oP(e))}function Nw(e,t){return"translate("+e+","+t+")"}function doe(e){return"rotate("+e+")"}function CWt(e,t){return"scale("+e+","+t+")"}function _Be(e){return Nw(e.x||0,e.y||0)}function TWt(e){return Nw(e.x||0,e.y||0)+(e.angle?" "+doe(e.angle):"")}function AWt(e){return Nw(e.x||0,e.y||0)+(e.angle?" "+doe(e.angle):"")+(e.scaleX||e.scaleY?" "+CWt(e.scaleX||1,e.scaleY||1):"")}function hoe(e,t,n){function r(o,a){o("transform",TWt(a)),o("d",t(null,a))}function i(o,a){return t(sP(o,a.angle),a),Oy(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Qv),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:coe(s),pick:foe(s),isect:n||aoe(s)}}var SWt=hoe("arc",fWt);function DWt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function IWt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function kWt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function poe(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(sP(u),c),Oy(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=oP(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:EWt(s),pick:a,isect:uoe,tip:n}}var RWt=poe("area",dWt,DWt);function NWt(e,t){var n=t.clip;e.save(),cr(n)?(e.beginPath(),n(e),e.clip()):EBe(e,t.group)}function EBe(e,t){e.beginPath(),soe(t)?CS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function CBe(e){const t=Eh(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function PWt(e,t){e("transform",_Be(t))}function TBe(e,t){const n=CBe(t);e("d",CS(null,t,n,n))}function OWt(e,t){e("class","background"),e("aria-hidden",!0),TBe(e,t)}function FWt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?TBe(e,t):e("d","")}function $Wt(e,t,n){const r=t.clip?ooe(n,t,t):null;e("clip-path",r)}function MWt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Oy(e,t),e.translate(t.x||0,t.y||0)}function vR(e,t,n,r){const i=CBe(t);e.beginPath(),CS(e,t,(n||0)+i,(r||0)+i)}const LWt=oP(vR),BWt=oP(vR,!1),jWt=oP(vR,!0);function UWt(e,t,n,r){vp(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(vR(e,i,s,o),QT(e,i),i.fill&&X$(e,i,u)&&e.fill(),i.stroke&&!a&&JT(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&EBe(e,i),n&&n.translate(-s,-o),vp(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(vR(e,i,s,o),QT(e,i),JT(e,i,u)&&e.stroke())})}function zWt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return Q$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&soe(u)&&!jWt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&BWt(e,u,o,a)?(e.restore(),u):(l=Q$(u,v=>VWt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&LWt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function VWt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var HWt={type:"group",tag:"g",nested:!1,attr:PWt,bound:MWt,draw:UWt,pick:zWt,isect:vBe,content:$Wt,background:OWt,foreground:FWt},bR={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function moe(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function goe(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function yoe(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Y9(e,t){return e==="center"?t/2:e==="right"?t:0}function K9(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function qWt(e,t,n){const r=moe(t,n),i=goe(t,r),s=yoe(t,r),o=(t.x||0)-Y9(t.align,i),a=(t.y||0)-K9(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,bR["xmlns:xlink"],"xlink:href"),e("transform",Nw(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function WWt(e,t){const n=t.image,r=goe(t,n),i=yoe(t,n),s=(t.x||0)-Y9(t.align,r),o=(t.y||0)-K9(t.baseline,i);return e.set(s,o,s+r,o+i)}function GWt(e,t,n){vp(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=moe(r,this);let s=goe(r,i),o=yoe(r,i);if(s===0||o===0)return;let a=(r.x||0)-Y9(r.align,s),u=(r.y||0)-K9(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(QT(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var YWt={type:"image",tag:"image",nested:!1,attr:qWt,bound:WWt,draw:GWt,pick:G9(),isect:Vd,get:moe,xOffset:Y9,yOffset:K9},KWt=poe("line",hWt,IWt);function XWt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",AWt(t)),e("d",t.path)}function FF(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Qv,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=XT(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),yR(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):yR(e,u,r,i,s,o)}function QWt(e,t){return FF(sP(e,t.angle),t)?e.set(0,0,0,0):Oy(e,t,!0)}var JWt={type:"path",tag:"path",nested:!1,attr:XWt,bound:QWt,draw:coe(FF),pick:foe(FF),isect:aoe(FF)};function ZWt(e,t){e("d",CS(null,t))}function eGt(e,t){var n,r;return Oy(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Pxe(e,t){e.beginPath(),CS(e,t)}var tGt={type:"rect",tag:"path",nested:!1,attr:ZWt,bound:eGt,draw:coe(Pxe),pick:foe(Pxe),isect:vBe};function nGt(e,t){e("transform",_Be(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function rGt(e,t){var n,r;return Oy(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function ABe(e,t,n){var r,i,s,o;return t.stroke&&JT(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function iGt(e,t,n){vp(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&ABe(e,r,i)&&(QT(e,r),e.stroke())}})}function sGt(e,t,n,r){return e.isPointInStroke?ABe(e,t,1)&&e.isPointInStroke(n,r):!1}var oGt={type:"rule",tag:"line",nested:!1,attr:nGt,bound:rGt,draw:iGt,pick:G9(sGt),isect:bBe},aGt=hoe("shape",pWt),uGt=hoe("symbol",mWt,uoe);const Oxe=cMe();var Rf={height:vm,measureWidth:voe,estimateWidth:J$,width:J$,canvas:SBe};SBe(!0);function SBe(e){Rf.width=e&&vv?voe:J$}function J$(e,t){return DBe(Zv(e,t),vm(e))}function DBe(e,t){return~~(.8*e.length*t)}function voe(e,t){return vm(e)<=0||!(t=Zv(e,t))?0:IBe(t,X9(e))}function IBe(e,t){const n=`(${t}) ${e}`;let r=Oxe.get(n);return r===void 0&&(vv.font=t,r=vv.measureText(e).width,Oxe.set(n,r)),r}function vm(e){return e.fontSize!=null?+e.fontSize||0:11}function Jv(e){return e.lineHeight!=null?e.lineHeight:vm(e)+2}function lGt(e){return at(e)?e.length>1?e:e[0]:e}function aP(e){return lGt(e.lineBreak&&e.text&&!at(e.text)?e.text.split(e.lineBreak):e.text)}function boe(e){const t=aP(e);return(at(t)?t.length-1:0)*Jv(e)}function Zv(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?fGt(e,n):n}function cGt(e){if(Rf.width===voe){const t=X9(e);return n=>IBe(n,t)}else if(Rf.width===J$){const t=vm(e);return n=>DBe(n,t)}else return t=>Rf.width(e,t)}function fGt(e,t){var n=+e.limit,r=cGt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function uP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function X9(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+vm(e)+"px "+uP(e,t)}function xoe(e){var t=e.baseline,n=vm(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Jv(e):t==="line-bottom"?.29*n-.5*Jv(e):0)}const dGt={left:"start",center:"middle",right:"end"},Pk=new Yo;function Q9(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Qx,t+=r*Math.cos(i),n+=r*Math.sin(i)),Pk.x1=t,Pk.y1=n,Pk}function hGt(e,t){var n=t.dx||0,r=(t.dy||0)+xoe(t),i=Q9(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",dGt[t.align]||"start"),a?(u=Nw(s,o)+" "+doe(a),(n||r)&&(u+=" "+Nw(n,r))):u=Nw(s+n,o+r),e("transform",u)}function woe(e,t,n){var r=Rf.height(t),i=t.align,s=Q9(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+xoe(t)-Math.round(.8*r),c=aP(t),f;if(at(c)?(r+=Jv(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Rf.width(t,h)),0)):f=Rf.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Qv,o,a);else if(n===2)return e.rotatedPoints(t.angle*Qv,o,a);return e}function pGt(e,t,n){vp(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=X9(r),e.textAlign=r.align||"left",s=Q9(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Qv),o=a=0),o+=r.dx||0,a+=(r.dy||0)+xoe(r),c=aP(r),QT(e,r),at(c))for(l=Jv(r),u=0;u<c.length;++u)f=Zv(r,c[u]),r.fill&&X$(e,r,i)&&e.fillText(f,o,a),r.stroke&&JT(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Zv(r,c),r.fill&&X$(e,r,i)&&e.fillText(f,o,a),r.stroke&&JT(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function mGt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Q9(t),a=o.x1,u=o.y1,l=woe(Pk,t,1),c=-t.angle*Qv,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function gGt(e,t){const n=woe(Pk,e,2);return iC(t,n[0],n[1],n[2],n[3])||iC(t,n[0],n[1],n[4],n[5])||iC(t,n[4],n[5],n[6],n[7])||iC(t,n[2],n[3],n[6],n[7])}var yGt={type:"text",tag:"text",nested:!1,attr:hGt,bound:woe,draw:pGt,pick:G9(mGt),isect:gGt},vGt=poe("trail",gWt,kWt),Gf={arc:SWt,area:RWt,group:HWt,image:YWt,line:KWt,path:JWt,rect:tGt,rule:oGt,shape:aGt,symbol:uGt,text:yGt,trail:vGt};function xX(e,t,n){var r=Gf[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Yo),e,n)}var Fxe={mark:null};function kBe(e,t,n){var r=Gf[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Fxe.mark=e,l=Fxe),c=xX(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Yo,o)for(a=0,u=s.length;a<u;++a)t.union(xX(s[a],i,n));return e.bounds=t}const bGt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function RBe(e,t){return JSON.stringify(e,bGt,t)}function NBe(e){const t=typeof e=="string"?JSON.parse(e):e;return PBe(t)}function PBe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&PBe(n[i]);return t&&kBe(e),e}class OBe{constructor(t){arguments.length?this.root=NBe(t):(this.root=$xe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new q9(this.root)])}toJSON(t){return RBe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=$xe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function $xe(e,t){const n={bounds:new Yo,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function q1(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function _oe(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function la(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=q1(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Ad(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function FBe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function J9(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function xGt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Gf[i.marktype]).tip){for(o=J9(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Eoe=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||S9(),this._tooltip=n||wGt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=q1(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=xGt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function wGt(e,t,n,r){e.element().setAttribute("title",r||"")}class lP{constructor(t){this._el=null,this._bgcolor=null,this._loader=new yBe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const _Gt="keydown",EGt="keypress",CGt="keyup",$Be="dragenter",$F="dragleave",MBe="dragover",wX="pointerdown",TGt="pointerup",Z$="pointermove",MF="pointerout",LBe="pointerover",_X="mousedown",AGt="mouseup",BBe="mousemove",eM="mouseout",jBe="mouseover",tM="click",SGt="dblclick",DGt="wheel",UBe="mousewheel",nM="touchstart",rM="touchmove",iM="touchend",IGt=[_Gt,EGt,CGt,$Be,$F,MBe,wX,TGt,Z$,MF,LBe,_X,AGt,BBe,eM,jBe,tM,SGt,DGt,UBe,nM,rM,iM],EX=Z$,Ok=eM,CX=tM;class cP extends Eoe{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=IGt,this.pointermove=Lxe([Z$,BBe],[LBe,jBe],[MF,eM]),this.dragover=Lxe([MBe],[$Be],[$F]),this.pointerout=Bxe([MF,eM]),this.dragleave=Bxe([$F])}initialize(t,n,r){return this._canvas=t&&_oe(t,"canvas"),[tM,_X,wX,Z$,MF,$F].forEach(i=>Mxe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(UBe,t)}pointerdown(t){this._down=this._active,this.fire(wX,t)}mousedown(t){this._down=this._active,this.fire(_X,t)}click(t){this._down===this._active&&(this.fire(tM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(nM,t,!0)}touchmove(t){this.fire(rM,t,!0)}touchend(t){this.fire(iM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===CX&&i&&i.href?this.handleHref(n,i,i.href):(t===EX||t===Ok)&&this.handleTooltip(n,i,t!==Ok),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Mxe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=J9(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Gf[t.marktype].pick.call(this,o,t,n,r,i,s)}}const kGt=e=>e===nM||e===rM||e===iM?[nM,rM,iM]:[e];function Mxe(e,t){kGt(t).forEach(n=>RGt(e,n))}function RGt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function HI(e,t,n){t.forEach(r=>e.fire(r,n))}function Lxe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?HI(this,e,r):((!i||!i.exit)&&HI(this,n,r),this._active=s,HI(this,t,r),HI(this,e,r))}}function Bxe(e){return function(t){HI(this,e,t),this._active=null}}function NGt(){return typeof window<"u"&&window.devicePixelRatio||1}function PGt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?NGt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class sM extends lP{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Yo,this._tempb=new Yo}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:yv(1,1,this._options.type),t&&this._canvas&&(Ad(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)PGt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||rt("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=OGt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):FGt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Gf[n.marktype];n.clip&&NWt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const OGt=(e,t,n)=>new Yo().set(0,0,t,n).translate(-e[0],-e[1]);function FGt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class zBe extends Eoe{constructor(t,n){super(t,n);const r=this;r._hrefHandler=ZH(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=ZH(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Ok)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(CX,this._hrefHandler),i.removeEventListener(EX,this._tooltipHandler),i.removeEventListener(Ok,this._tooltipHandler)),this._svg=i=t&&_oe(t,"svg"),i&&(i.addEventListener(CX,this._hrefHandler),i.addEventListener(EX,this._tooltipHandler),i.addEventListener(Ok,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:ZH(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const ZH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},VBe="aria-hidden",Coe="aria-label",Toe="role",Aoe="aria-roledescription",HBe="graphics-object",Soe="graphics-symbol",qBe=(e,t,n)=>({[Toe]:e,[Aoe]:t,[Coe]:n||void 0}),$Gt=gp(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),jxe={axis:{desc:"axis",caption:BGt},legend:{desc:"legend",caption:jGt},"title-text":{desc:"title",caption:e=>`Title text '${zxe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${zxe(e)}'`}},Uxe={ariaRole:Toe,ariaRoleDescription:Aoe,description:Coe};function WBe(e,t){const n=t.aria===!1;if(e(VBe,n||void 0),n||t.description==null)for(const r in Uxe)e(Uxe[r],void 0);else{const r=t.mark.marktype;e(Coe,t.description),e(Toe,t.ariaRole||(r==="group"?HBe:Soe)),e(Aoe,t.ariaRoleDescription||`${r} mark`)}}function GBe(e){return e.aria===!1?{[VBe]:!0}:$Gt[e.role]?null:jxe[e.role]?LGt(e,jxe[e.role]):MGt(e)}function MGt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return qBe(n?HBe:Soe,`${t} mark container`,e.description)}function LGt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return qBe(t.role||Soe,t.desc,n.description||r(n))}catch{return null}}function zxe(e){return Lt(e.text).join(" ")}function BGt(e){const t=e.datum,n=e.orient,r=t.title?YBe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${KT(a)?"discrete":a} scale with ${aBe(o,s,e)}`}function jGt(e){const t=e.datum,n=t.title?YBe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return zGt(r)+(n?` titled '${n}'`:"")+` for ${UGt(s)} with ${aBe(u,a,e)}`}function YBe(e){try{return Lt(Xr(e.items).items[0].text).join(" ")}catch{return null}}function UGt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Xr(e)}function zGt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const KBe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),VGt=e=>KBe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Doe(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${VGt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=KBe(u),a),toString:()=>e};return a}const XBe=e=>QBe(Doe(),e)+"";function QBe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):QBe(e,r)}return e.close()}const oM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},aM={blend:"mix-blend-mode"},JBe={fill:"none","stroke-miterlimit":10},VD=0,Vxe="http://www.w3.org/2000/xmlns/",oa=bR.xmlns;class Ioe extends lP{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=la(t,0,"svg",oa),this._svg.setAttributeNS(Vxe,"xmlns",oa),this._svg.setAttributeNS(Vxe,"xmlns:xlink",bR["xmlns:xlink"]),this._svg.setAttribute("version",bR.version),this._svg.setAttribute("class","marks"),Ad(t,1),this._root=la(this._svg,VD,"g",oa),W1(this._root,JBe),Ad(this._svg,VD+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(W1(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=la(t,VD,"rect",oa),W1(r,{width:this._width,height:this._height,fill:n}));const i=XBe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Ad(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Gf[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Hxe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Hxe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Gf[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=qxe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Ad(c,0),n._svg;c.setAttribute("class",FBe(n));const f=GBe(n);for(const m in f)wl(c,m,f[m]);l||wl(c,"pointer-events",u),wl(c,"clip-path",n.clip?ooe(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=qxe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&WGt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):vp(n,p),Ad(c,h),c}_update(t,n,r){Tg=n,Lu=n.__values__,WBe(Fk,r),t.attr(Fk,r,this);const i=YGt[t.type];i&&i.call(this,t,n,r),Tg&&this.style(Tg,r)}style(t,n){if(n!=null){for(const r in oM){let i=r==="font"?uP(n):n[r];if(i===Lu[r])continue;const s=oM[r];i==null?t.removeAttribute(s):(roe(i)&&(i=lBe(i,this._defs.gradient,ZBe())),t.setAttribute(s,i+"")),Lu[r]=i}for(const r in aM)LF(t,aM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=la(t,VD+1,"defs",oa)),i=HGt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=la(t,VD+1,"defs",oa)),i=qGt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Ad(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Hxe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function HGt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=la(e,n++,"pattern",oa);W1(o,{id:K$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=la(o,0,"rect",oa),W1(o,{width:1,height:1,fill:`url(${ZBe()}#${t.id})`}),e=la(e,n++,"radialGradient",oa),W1(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=la(e,n++,"linearGradient",oa),W1(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=la(e,r,"stop",oa),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Ad(e,r),n}function qGt(e,t,n){let r;return e=la(e,n,"clipPath",oa),e.setAttribute("id",t.id),t.path?(r=la(e,0,"path",oa),r.setAttribute("d",t.path)):(r=la(e,0,"rect",oa),W1(r,{x:0,y:0,width:t.width,height:t.height})),Ad(e,1),n+1}function WGt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;vp(n,o=>{i=e.mark(t,o,i,r),++s}),Ad(t,1+s)}function qxe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=q1(o,r,oa),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=q1(o,"path",oa);s.appendChild(a),a.__data__=e;const u=q1(o,"g",oa);s.appendChild(u),u.__data__=e;const l=q1(o,"path",oa);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||GGt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function GGt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Tg=null,Lu=null;const YGt={group(e,t,n){const r=Tg=t.childNodes[2];Lu=r.__values__,e.foreground(Fk,n,this),Lu=t.__values__,Tg=t.childNodes[1],e.content(Fk,n,this);const i=Tg=t.childNodes[0];e.background(Fk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Lu.events&&(wl(r,"pointer-events",s),wl(i,"pointer-events",s),Lu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;wl(r,"display",null),this.style(i,n),wl(i,"stroke",null),o&&(n.fill=null),Lu=r.__values__,this.style(r,n),o&&(n.fill=o),Tg=null}else wl(r,"display","none")},image(e,t,n){n.smooth===!1?(LF(t,"image-rendering","optimizeSpeed"),LF(t,"image-rendering","pixelated")):LF(t,"image-rendering",null)},text(e,t,n){const r=aP(n);let i,s,o,a;at(r)?(s=r.map(u=>Zv(n,u)),i=s.join(`
`),i!==Lu.text&&(Ad(t,0),o=t.ownerDocument,a=Jv(n),s.forEach((u,l)=>{const c=q1(o,"tspan",oa);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Lu.text=i)):(s=Zv(n,r),s!==Lu.text&&(t.textContent=s,Lu.text=s)),wl(t,"font-family",uP(n)),wl(t,"font-size",vm(n)+"px"),wl(t,"font-style",n.fontStyle),wl(t,"font-variant",n.fontVariant),wl(t,"font-weight",n.fontWeight)}};function Fk(e,t,n){t!==Lu[e]&&(n?KGt(Tg,e,t,n):wl(Tg,e,t),Lu[e]=t)}function LF(e,t,n){n!==Lu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Lu[t]=n)}function W1(e,t){for(const n in t)wl(e,n,t[n])}function wl(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function KGt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function ZBe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class e9e extends lP{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Doe();n.open("svg",lr({},bR,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",JBe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Gf[n.marktype],i=r.tag,s=[WBe,r.attr];t.open("g",{class:FBe(n),"clip-path":n.clip?ooe(this,n,n.group):null},GBe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=aP(a);if(at(l)){const c={x:0,dy:Jv(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Zv(a,l[f])).close()}else t.text(Zv(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),vp(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):vp(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&XGt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:K$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function XGt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=uP(t),e["font-size"]=vm(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in oM){let a=t[o];const u=oM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(roe(a)&&(a=lBe(a,i.gradient,"")),e[u]=a)}for(const o in aM){const a=t[o];a!=null&&(s=s||[],s.push(`${aM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Nh={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function QGt(e){Nh.svgMarkTypes=e.svgMarkTypes??["text"],Nh.svgOnTop=e.svgOnTop??!0,Nh.debug=e.debug??!1}class TX extends lP{constructor(t){super(t),this._svgRenderer=new Ioe(t),this._canvasRenderer=new sM(t)}initialize(t,n,r,i,s){this._root_el=la(t,0,"div");const o=la(this._root_el,0,"div"),a=la(this._root_el,1,"div");return this._root_el.style.position="relative",Nh.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Nh.svgOnTop?a:o,this._canvasEl=Nh.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Nh.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Nh.svgMarkTypes.includes(s));this._svgRenderer.render(t,Nh.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Nh.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class t9e extends cP{constructor(t,n){super(t,n)}initialize(t,n,r){const i=la(la(t,0,"div"),Nh.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const n9e="canvas",r9e="hybrid",i9e="png",s9e="svg",o9e="none",G1={Canvas:n9e,PNG:i9e,SVG:s9e,Hybrid:r9e,None:o9e},o_={};o_[n9e]=o_[i9e]={renderer:sM,headless:sM,handler:cP};o_[s9e]={renderer:Ioe,headless:e9e,handler:zBe};o_[r9e]={renderer:TX,headless:TX,handler:t9e};o_[o9e]={};function Z9(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(o_[e]=t,this):o_[e]}function a9e(e,t,n){const r=[],i=new Yo().union(t),s=e.marktype;return s?u9e(e,i,n,r):s==="group"?l9e(e,i,n,r):rt("Intersect scene must be mark node or group item.")}function u9e(e,t,n,r){if(JGt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)l9e(i[a],t,n,r);else for(const u=Gf[s].isect;a<o;++a){const l=i[a];c9e(l,t,u)&&r.push(l)}}return r}function JGt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function l9e(e,t,n,r){n&&n(e.mark)&&c9e(e,t,Gf.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)u9e(i[u],t,n,r);t.translate(o,a)}return r}function c9e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const eq=new Yo;function f9e(e){const t=e.clip;if(cr(t))t(sP(eq.clear()));else if(t)eq.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(eq)}const ZGt=1e-9;function koe(e,t,n){return e===t?!0:n==="path"?d9e(e,t):e instanceof Date&&t instanceof Date?+e==+t:fi(e)&&fi(t)?Math.abs(e-t)<=ZGt:!e||!t||!jt(e)&&!jt(t)?e==t:eYt(e,t)}function d9e(e,t){return koe(XT(e),XT(t))}function eYt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!koe(e[i],t[i],i))return!1;return typeof e==typeof t}function tYt(){gBe(),Tqt()}const ZT="top",zh="left",Kh="right",eb="bottom",nYt="top-left",rYt="top-right",iYt="bottom-left",sYt="bottom-right",Roe="start",AX="middle",Tl="end",oYt="x",aYt="y",e7="group",Noe="axis",Poe="title",uYt="frame",lYt="scope",Ooe="legend",h9e="row-header",p9e="row-footer",m9e="row-title",g9e="column-header",y9e="column-footer",v9e="column-title",cYt="padding",fYt="symbol",b9e="fit",x9e="fit-x",w9e="fit-y",dYt="pad",Foe="none",Q6="all",SX="each",$oe="flush",Y1="column",K1="row";function _9e(e){Ke.call(this,null,e)}Ot(_9e,Ke,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Gf[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=J6(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===e7||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(J6(l,o))),r.role){case Noe:case Ooe:case Poe:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(J6(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(J6(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return f9e(r),t.modifies("bounds")}});function J6(e,t,n){return t(e.bounds.clear(),e,n)}const Wxe=":vega_identifier:";function Moe(e){Ke.call(this,0,e)}Moe.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ot(Moe,Ke,{transform(e,t){const n=hYt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function hYt(e){return e._signals[Wxe]||(e._signals[Wxe]=e.add(0))}function E9e(e){Ke.call(this,null,e)}Ot(E9e,Ke,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,pYt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===e7?q9:H9;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function pYt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function C9e(e){Ke.call(this,null,e)}const Gxe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!T9e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},T9e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Yxe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(T9e(i,s=e[n].bounds,t))return!0},mYt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},gYt=(e,t,n)=>{var r=e.range(),i=new Yo;return t===ZT||t===eb?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Kxe=e=>(e.forEach(t=>t.opacity=1),e),Xxe=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ot(C9e,Ke,{transform(e,t){const n=Gxe[e.method]||Gxe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Kxe(i),t=Xxe(t,e)),t;if(i=i.filter(mYt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Kxe(i),t=Xxe(t,e),s.length>=3&&Yxe(s,r)){do s=n(s,r);while(s.length>=3&&Yxe(s,r));s.length<3&&!Xr(i).opacity&&(s.length>1&&(Xr(s).opacity=0),Xr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=gYt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function A9e(e){Ke.call(this,null,e)}Ot(A9e,Ke,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const $u=new Yo;function sC(e,t,n){return e[t]===n?0:(e[t]=n,1)}function yYt(e){var t=e.items[0].orient;return t===zh||t===Kh}function vYt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function bYt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=vYt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&boe(p),v=0,b=0,x,_;switch($u.clear().union(g),g.clear(),(x=u[0])>-1&&g.union(i.items[x].bounds),(x=u[1])>-1&&g.union(i.items[x].bounds),a){case ZT:v=f||0,b=-c,_=Math.max(d,Math.min(h,-g.y1)),g.add(0,-_).add(l,0),p&&Z6(e,p,_,m,y,0,-1,g);break;case zh:v=-c,b=f||0,_=Math.max(d,Math.min(h,-g.x1)),g.add(-_,0).add(0,l),p&&Z6(e,p,_,m,y,1,-1,g);break;case Kh:v=n+c,b=f||0,_=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(_,l),p&&Z6(e,p,_,m,y,1,1,g);break;case eb:v=f||0,b=r+c,_=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,_),p&&Z6(e,p,_,m,0,0,1,g);break;default:v=i.x,b=i.y}return Oy(g.translate(v,b),i),sC(i,"x",v+o)|sC(i,"y",b+o)&&(i.bounds=$u,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Z6(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Qxe=(e,t)=>Math.floor(Math.min(e,t)),Jxe=(e,t)=>Math.ceil(Math.max(e,t));function xYt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===e7)switch(i.role){case Noe:case Ooe:case Poe:break;case h9e:o.rowheaders.push(...s);break;case p9e:o.rowfooters.push(...s);break;case g9e:o.colheaders.push(...s);break;case y9e:o.colfooters.push(...s);break;case m9e:o.rowtitle=s[0];break;case v9e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function wYt(e){return new Yo().set(0,0,e.width||0,e.height||0)}function _Yt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Fs(e,t,n){const r=jt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Zxe(e){return e<0?Math.ceil(-e):0}function S9e(e,t,n){var r=!n.nodirty,i=n.bounds===$oe?wYt:_Yt,s=$u.set(0,0,0,0),o=Fs(n.align,Y1),a=Fs(n.align,K1),u=Fs(n.padding,Y1),l=Fs(n.padding,K1),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),_=Array(d),C,T,S,k,I,R,F,O,B,H,U;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)R=t[T],I=_[T]=i(R),R.x=R.x||0,b[T]=0,R.y=R.y||0,x[T]=0,S=T%c,k=~~(T/c),m=Math.max(m,F=Math.ceil(I.x2)),v=Math.max(v,O=Math.ceil(I.y2)),p[S]=Math.max(p[S],F),y[k]=Math.max(y[k],O),h[T]=u+Zxe(I.x1),g[T]=l+Zxe(I.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===SX)for(S=1;S<c;++S){for(U=0,T=S;T<d;T+=c)U<h[T]&&(U=h[T]);for(T=S;T<d;T+=c)h[T]=U+p[S-1]}else if(o===Q6){for(U=0,T=0;T<d;++T)T%c&&U<h[T]&&(U=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=U+m)}else for(o=!1,S=1;S<c;++S)for(T=S;T<d;T+=c)h[T]+=p[S-1];if(a===SX)for(k=1;k<f;++k){for(U=0,T=k*c,C=T+c;T<C;++T)U<g[T]&&(U=g[T]);for(T=k*c;T<C;++T)g[T]=U+y[k-1]}else if(a===Q6){for(U=0,T=c;T<d;++T)U<g[T]&&(U=g[T]);for(T=c;T<d;++T)g[T]=U+v}else for(a=!1,k=1;k<f;++k)for(T=k*c,C=T+c;T<C;++T)g[T]+=y[k-1];for(B=0,T=0;T<d;++T)B=h[T]+(T%c?B:0),b[T]+=B-t[T].x;for(S=0;S<c;++S)for(H=0,T=S;T<d;T+=c)H+=g[T],x[T]+=H-t[T].y;if(o&&Fs(n.center,Y1)&&f>1)for(T=0;T<d;++T)I=o===Q6?m:p[T%c],B=I-_[T].x2-t[T].x-b[T],B>0&&(b[T]+=B/2);if(a&&Fs(n.center,K1)&&c!==1)for(T=0;T<d;++T)I=a===Q6?v:y[~~(T/c)],H=I-_[T].y2-t[T].y-x[T],H>0&&(x[T]+=H/2);for(T=0;T<d;++T)s.union(_[T].translate(b[T],x[T]));switch(B=Fs(n.anchor,oYt),H=Fs(n.anchor,aYt),Fs(n.anchor,Y1)){case Tl:B-=s.width();break;case AX:B-=s.width()/2}switch(Fs(n.anchor,K1)){case Tl:H-=s.height();break;case AX:H-=s.height()/2}for(B=Math.round(B),H=Math.round(H),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)R=t[T],R.x+=b[T]+=B,R.y+=x[T]+=H,s.union(R.mark.bounds.union(R.bounds.translate(b[T],x[T]))),r&&e.dirty(R);return s}function EYt(e,t,n){var r=xYt(t),i=r.marks,s=n.bounds===$oe?CYt:TYt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=S9e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Fs(n.headerBand,K1,null),c=eO(e,r.rowheaders,i,a,u,-Fs(o,"rowHeader"),Qxe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Fs(n.headerBand,Y1,null),f=eO(e,r.colheaders,i,a,a,-Fs(o,"columnHeader"),Qxe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Fs(n.footerBand,K1,null),d=eO(e,r.rowfooters,i,a,u,Fs(o,"rowFooter"),Jxe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Fs(n.footerBand,Y1,null),h=eO(e,r.colfooters,i,a,a,Fs(o,"columnFooter"),Jxe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Fs(n.titleAnchor,K1),g=Fs(o,"rowTitle"),g=p===Tl?d+g:c-g,m=Fs(n.titleBand,K1,.5),ewe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Fs(n.titleAnchor,Y1),g=Fs(o,"columnTitle"),g=p===Tl?h+g:f-g,m=Fs(n.titleBand,Y1,.5),ewe(e,r.coltitle,g,1,y,m))}function CYt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function TYt(e,t){return e.bounds[t]}function eO(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,x,_,C,T,S,k;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(C=t[v],_=C.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(S=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),k=m):(S=m,k=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),_.union(C.bounds.translate(S-(C.x||0),k-(C.y||0))),C.x=S,C.y=k,e.dirty(C),g=o(g,_[l])}return g}function ewe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function AYt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function SYt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function DYt(e,t,n,r,i,s,o){const a=AYt(n,t),u=SYt(e,a("offset",0)),l=a("anchor",Roe),c=l===Tl?1:l===AX?.5:0,f={align:SX,bounds:a("bounds",$oe),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case zh:f.anchor={x:Math.floor(r.x1)-u,column:Tl,y:c*(o||r.height()+2*r.y1),row:l};break;case Kh:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case ZT:f.anchor={y:Math.floor(i.y1)-u,row:Tl,x:c*(s||i.width()+2*i.x1),column:l};break;case eb:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case nYt:f.anchor={x:u,y:u};break;case rYt:f.anchor={x:s-u,y:u,column:Tl};break;case iYt:f.anchor={x:u,y:o-u,row:Tl};break;case sYt:f.anchor={x:s-u,y:o-u,column:Tl,row:Tl};break}return f}function IYt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),RYt(e,n,n.items[0].items[0]),s=kYt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===fYt&&NYt(n.items[0].items[0].items[0].items),i!==Foe&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Oy(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function kYt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function RYt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&HD(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case zh:i+=Math.ceil(o.bounds.width())+u;break;case Kh:case eb:break;default:s+=o.bounds.height()+u}switch((i||s)&&HD(e,n,i,s),o.orient){case zh:c+=u2(t,n,o,a,1,1);break;case Kh:l+=u2(t,n,o,Tl,0,0)+u,c+=u2(t,n,o,a,1,1);break;case eb:l+=u2(t,n,o,a,0,0),c+=u2(t,n,o,Tl,-1,0,1)+u;break;default:l+=u2(t,n,o,a,0,0)}(l||c)&&HD(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(HD(e,n,-l,0),HD(e,o,-l,0))}}function u2(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:boe(n);return Math.round(r===Roe?f:r===Tl?d-h:.5*(c-h))}function HD(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function NYt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function PYt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===zh||a===Kh?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==e7?a===zh?(p=i.y2,h=i.y1):a===Kh?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===zh&&(p=r,h=0),b=u===Roe?p:u===Tl?h:(p+h)/2,d&&d.text){switch(a){case ZT:case eb:v=f.bounds.height()+c;break;case zh:y=f.bounds.width()+c;break;case Kh:y=-f.bounds.width()-c;break}$u.clear().union(d.bounds),$u.translate(y-(d.x||0),v-(d.y||0)),sC(d,"x",y)|sC(d,"y",v)&&(e.dirty(d),d.bounds.clear().union($u),d.mark.bounds.clear().union($u),e.dirty(d)),$u.clear().union(d.bounds)}else $u.clear();switch($u.union(f.bounds),a){case ZT:m=b,g=i.y1-$u.height()-l;break;case zh:m=i.x1-$u.width()-l,g=b;break;case Kh:m=i.x2+$u.width()+l,g=b;break;case eb:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return sC(s,"x",m)|sC(s,"y",g)&&($u.translate(m,g),e.dirty(s),s.bounds.clear().union($u),t.bounds.clear().union($u),e.dirty(s)),s.bounds}function D9e(e){Ke.call(this,null,e)}Ot(D9e,Ke,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&EYt(n,r,e.layout),FYt(n,r,e)}),OYt(e.mark.group)?t.reflow():t}});function OYt(e){return e&&e.mark.role!=="legend-entry"}function FYt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Yo().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Noe:h=yYt(f)?a:u,h.union(bYt(e,f,i,s));break;case Poe:c=f;break;case Ooe:l.push(IYt(e,f));break;case uYt:case lYt:case h9e:case p9e:case m9e:case g9e:case y9e:case v9e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Kh,d!==Foe&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];S9e(e,v,DYt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===b9e||n.autosize.type===x9e||n.autosize.type===w9e))switch(y.orient){case zh:case Kh:o.add(v.x1,0).add(v.x2,0);break;case ZT:case eb:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(PYt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),$Yt(e,t,o,n)}function $Yt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===cYt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Foe?(l=0,f=0,u=o,c=a):s===b9e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===x9e?(u=Math.max(0,o-l-d),a=c+f+h):s===w9e?(o=u+l+d,c=Math.max(0,a-f-h)):s===dYt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const MYt=Object.freeze(Object.defineProperty({__proto__:null,bound:_9e,identifier:Moe,mark:E9e,overlap:C9e,render:A9e,viewlayout:D9e},Symbol.toStringTag,{value:"Module"}));function I9e(e){Ke.call(this,null,e)}Ot(I9e,Ke,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=toe(s,o,e.minstep),u=e.format||nBe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?tBe(s,e.values,a):noe(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Ii({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ii({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function k9e(e){Ke.call(this,null,e)}function LYt(){return Ii({})}function BYt(e){const t=bS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ot(k9e,Ke,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||LYt,s=e.key||mn,o=this.value;return at(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&rt("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=BYt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function R9e(e){Ke.call(this,null,e)}Ot(R9e,Ke,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(at(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||d1,u=i.enter||d1,l=i.exit||d1,c=(s&&!o?i[s]:a)||d1;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==d1&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==d1&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==d1){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function N9e(e){Ke.call(this,[],e)}Ot(N9e,Ke,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||kF,o=e.scale,a=+e.limit,u=toe(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===kF,c=e.format||oBe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||sBe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===kF?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,cr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=sl(m=p||8),i=i.map((y,v)=>Ii({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Ii({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===dqt?(d=o.domain(),h=JLe(o,d[0],Xr(d)),f.length<3&&!e.values&&d[0]!==Xr(d)&&(f=[d[0],Xr(d)]),i=f.map((y,v)=>Ii({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=Eqt(o),i=f.map((y,v)=>Ii({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const jYt=e=>e.source.x,UYt=e=>e.source.y,zYt=e=>e.target.x,VYt=e=>e.target.y;function Loe(e){Ke.call(this,{},e)}Loe.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ot(Loe,Ke,{transform(e,t){var n=e.sourceX||jYt,r=e.sourceY||UYt,i=e.targetX||zYt,s=e.targetY||VYt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=twe.get(u+"-"+a)||twe.get(u);return l||rt("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const P9e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,HYt=(e,t,n,r)=>P9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),O9e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},qYt=(e,t,n,r)=>O9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),F9e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},WYt=(e,t,n,r)=>F9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),GYt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,YYt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,KYt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},XYt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},QYt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},JYt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},twe=bS({line:P9e,"line-radial":HYt,arc:O9e,"arc-radial":qYt,curve:F9e,"curve-radial":WYt,"orthogonal-horizontal":GYt,"orthogonal-vertical":YYt,"orthogonal-radial":KYt,"diagonal-horizontal":XYt,"diagonal-vertical":QYt,"diagonal-radial":JYt});function Boe(e){Ke.call(this,null,e)}Boe.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ot(Boe,Ke,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||gS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/JRe(l),h=Sc(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const ZYt=5;function eKt(e){const t=e.type;return!e.bins&&(t===GT||t===JN||t===ZN)}function $9e(e){return Jse(e)&&e!==F0}const tKt=gp(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function M9e(e){Ke.call(this,null,e),this.modified(!0)}Ot(M9e,Ke,{transform(e,t){var n=t.dataflow,r=this.value,i=nKt(e);(!r||i!==r.type)&&(this.value=r=xi(i)());for(i in e)if(!tKt[i]){if(i==="padding"&&$9e(r.type))continue;cr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return uKt(r,e,aKt(r,e,iKt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function nKt(e){var t=e.type,n="",r;return t===F0?F0+"-"+GT:(rKt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?F0+"-":r===3?ES+"-":""),(n+t||GT).toLowerCase())}function rKt(e){const t=e.type;return Jse(t)&&t!==i_&&t!==s_&&(e.scheme||e.range&&e.range.length&&e.range.every(Bt))}function iKt(e,t,n){const r=sKt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&eKt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return $9e(s)&&t.padding&&i[0]!==Xr(i)&&(i=oKt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(L9e(s,i,n)),s===Yse&&e.unknown(t.domainImplicit?UY:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&toe(e,t.nice)||null),i.length}function sKt(e,t,n){return t?(e.domain(L9e(e.type,t,n)),t.length):-1}function oKt(e,t,n,r,i,s){var o=Math.abs(Xr(n)-n[0]),a=o/(o-2*r),u=e===dy?Uie(t,null,a):e===ZN?q$(t,null,a,.5):e===JN?q$(t,null,a,i||1):e===B9?zie(t,null,a,s||1):jie(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function L9e(e,t,n){if(GLe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Nt(t))}return t}function aKt(e,t,n){let r=t.bins;if(r&&!at(r)){const i=e.domain(),s=i[0],o=Xr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||rt("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Sc(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Kse&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function uKt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=lKt(r,t,n);else if(t.scheme&&(s=cKt(r,t,n),cr(s))){if(e.interpolator)return e.interpolator(s);rt(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&YLe(r))return e.interpolator(z9(DX(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Zse(t.interpolate,t.interpolateGamma)):cr(e.round)?e.round(i):cr(e.rangeRound)&&e.interpolate(i?CN:Sy),s&&e.range(DX(s,t.reverse))}function lKt(e,t,n){e!==ULe&&e!==hX&&rt("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===hX?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Gse(n,i,r)]}function cKt(e,t,n){var r=t.schemeExtent,i,s;return at(t.scheme)?s=z9(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=eoe(i),s||rt(`Unrecognized scheme name: ${t.scheme}`)),n=e===U9?n+1:e===Kse?n-1:e===YT||e===j9?+t.schemeCount||ZYt:n,YLe(e)?nwe(s,r,t.reverse):cr(s)?QLe(nwe(s,r),n):e===Yse?s:s.slice(0,n)}function nwe(e,t,n){return cr(e)&&(t||n)?XLe(e,DX(t||[0,1],n)):e}function DX(e,t){return t?e.slice().reverse():e}function B9e(e){Ke.call(this,null,e)}Ot(B9e,Ke,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(nE(e.sort)),this.modified(n),t}});const rwe="zero",j9e="center",U9e="normalize",z9e=["y0","y1"];function joe(e){Ke.call(this,null,e)}joe.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:rwe,values:[rwe,j9e,U9e]},{name:"as",type:"string",array:!0,length:2,default:z9e}]};Ot(joe,Ke,{transform(e,t){var n=e.as||z9e,r=n[0],i=n[1],s=nE(e.sort),o=e.field||gS,a=e.offset===j9e?fKt:e.offset===U9e?dKt:hKt,u,l,c,f;for(u=pKt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function fKt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function dKt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function hKt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function pKt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const mKt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:I9e,datajoin:k9e,encode:R9e,legendentries:N9e,linkpath:Loe,pie:Boe,scale:M9e,sortitems:B9e,stack:joe},Symbol.toStringTag,{value:"Module"}));var gKt=Math.abs,IX=Math.cos,uM=Math.sin,yKt=1e-6,V9e=Math.PI,kX=V9e/2,iwe=vKt(2);function swe(e){return e>1?kX:e<-1?-kX:Math.asin(e)}function vKt(e){return e>0?Math.sqrt(e):0}function bKt(e,t){var n=e*uM(t),r=30,i;do t-=i=(t+uM(t)-n)/(1+IX(t));while(gKt(i)>yKt&&--r>0);return t/2}function xKt(e,t,n){function r(i,s){return[e*i*IX(s=bKt(n,s)),t*uM(s)]}return r.invert=function(i,s){return s=swe(s/t),[i/(e*IX(s)),swe((2*s+uM(2*s))/n)]},r}var wKt=xKt(iwe/kX,iwe,V9e);function _Kt(){return pm(wKt).scale(169.529)}const EKt=PPe(),RX=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function CKt(e,t){return function n(){const r=t();return r.type=e,r.path=PPe().projection(r),r.copy=r.copy||function(){const i=n();return RX.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},qLe(r)}}function Uoe(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(lM[e]=CKt(e,t),this):lM[e]||null}function H9e(e){return e&&e.path||EKt}const lM={albers:FPe,albersusa:UDt,azimuthalequalarea:zDt,azimuthalequidistant:VDt,conicconformal:WDt,conicequalarea:$8,conicequidistant:KDt,equalEarth:QDt,equirectangular:GDt,gnomonic:JDt,identity:ZDt,mercator:HDt,mollweide:_Kt,naturalEarth1:eIt,orthographic:tIt,stereographic:nIt,transversemercator:rIt};for(const e in lM)Uoe(e,lM[e]);function TKt(){}const Gm=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function q9e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),AKt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(SKt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Gm[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Gm[m|g<<1].forEach(b);for(Gm[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Gm[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Gm[m|g<<1|y<<2|v<<3].forEach(b);Gm[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Gm[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Gm[y<<2|v<<3].forEach(b);Gm[y<<3].forEach(b);function b(x){var _=[x[0][0]+h,x[0][1]+p],C=[x[1][0]+h,x[1][1]+p],T=o(_),S=o(C),k,I;(k=d[T])?(I=f[S])?(delete d[k.end],delete f[I.start],k===I?(k.ring.push(C),c(k.ring)):f[k.start]=d[I.end]={start:k.start,end:I.end,ring:k.ring.concat(I.ring)}):(delete d[k.end],k.ring.push(C),d[k.end=S]=k):(k=f[S])?(I=d[T])?(delete f[k.start],delete d[I.end],k===I?(k.ring.push(C),c(k.ring)):f[I.start]=d[k.end]={start:I.start,end:k.end,ring:I.ring.concat(k.ring)}):(delete f[k.start],k.ring.unshift(_),f[k.start=T]=k):f[T]=d[S]={start:T,end:S,ring:[_,C]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||rt("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:TKt,r):n===a},r}function AKt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function SKt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=DKt(e,t[n]))return i;return 0}function DKt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(IKt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function IKt(e,t,n){var r;return kKt(e,t,n)&&RKt(e[r=+(e[0]===t[0])],n[r],t[r])}function kKt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function RKt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function W9e(e,t,n){return function(r){var i=em(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Pv(s,o,e):a/(e+1);return Sc(s+u,o,u)}}function zoe(e){Ke.call(this,null,e)}zoe.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ot(zoe,Ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||il,s=q9e().smooth(e.smooth!==!1),o=e.thresholds||NKt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,at(o)?o:o(c.values));PKt(f,c,l,e),f.forEach(d=>{u.push(k9(l,Ii(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function NKt(e,t,n){const r=W9e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Fg(t(i).values)))}function PKt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(cr(i)&&(i=i(n,r)),cr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(fi(i)?i:i[0])||1,a=(fi(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(G9e(t,o,a,u,l))}function G9e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function owe(e,t,n){const r=e>=0?e:ase(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function tq(e){return cr(e)?e:sl(+e)}function Y9e(){var e=u=>u[0],t=u=>u[1],n=gS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=owe(r[0],u,e)>>o,f=owe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(x=>{const _=d+(+e(x)>>o),C=h+(+t(x)>>o);_>=0&&_<p&&C>=0&&C<m&&(g[_+C*p]+=+n(x))}),c>0&&f>0?(l2(p,m,g,y,c),c2(p,m,y,g,f),l2(p,m,g,y,c),c2(p,m,y,g,f),l2(p,m,g,y,c),c2(p,m,y,g,f)):c>0?(l2(p,m,g,y,c),l2(p,m,y,g,c),l2(p,m,g,y,c),v=y):f>0&&(c2(p,m,g,y,f),c2(p,m,y,g,f),c2(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/JRe(v);for(let x=0,_=p*m;x<_;++x)v[x]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=tq(u),a):e},a.y=function(u){return arguments.length?(t=tq(u),a):t},a.weight=function(u){return arguments.length?(n=tq(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||rt("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||rt("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Lt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&rt("invalid bandwidth"),r=u,a):r},a}function l2(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function c2(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Voe(e){Ke.call(this,null,e)}Voe.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const OKt=["x","y","weight","size","cellSize","bandwidth"];function K9e(e,t){return OKt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ot(Voe,Ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=FKt(r,e.groupby),s=(e.groupby||[]).map(ho),o=K9e(Y9e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Ii(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function FKt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Hoe(e){Ke.call(this,null,e)}Hoe.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ot(Hoe,Ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=q9e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||W9e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=K9e(Y9e(),e)(i,!0),u=G9e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=at(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ii),n}});const NX="Feature",qoe="FeatureCollection",$Kt="MultiPoint";function Woe(e){Ke.call(this,null,e)}Woe.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ot(Woe,Ke,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&il,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Xu(a))||s&&t.modified(Xu(s))||o&&t.modified(Xu(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:NX,geometry:{type:$Kt,coordinates:r}})),this.value={type:qoe,features:n}}});function Goe(e){Ke.call(this,null,e)}Goe.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ot(Goe,Ke,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||il,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=H9e(e.projection),n.materialize().reflow()):o=i===il||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=MKt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function MKt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Yoe(e){Ke.call(this,null,e)}Yoe.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ot(Yoe,Ke,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Koe(e){Ke.call(this,null,e)}Koe.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ot(Koe,Ke,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=LKt(H9e(e.projection),e.field||zd("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function LKt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Xoe(e){Ke.call(this,[],e),this.generator=xDt()}Xoe.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ot(Xoe,Ke,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)cr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(KMe(n[0],i)):t.add.push(Ii(i)),n[0]=i,t}});function Qoe(e){Ke.call(this,null,e)}Qoe.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ot(Qoe,Ke,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||il,s=jKt(e.opacity,e),o=BKt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Fg(n.map(l=>Fg(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=lr({},l,u);r||(f.$max=Fg(c.values||[])),l[a]=UKt(c,f,o.dep?o:sl(o(f)),s.dep?s:sl(s(f)))}),t.reflow(!0).modifies(a)}});function BKt(e,t){let n;return cr(e)?(n=r=>Ov(e(r,t)),n.dep=X9e(e)):n=sl(Ov(e||"#888")),n}function jKt(e,t){let n;return cr(e)?(n=r=>e(r,t),n.dep=X9e(e)):e?n=sl(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function X9e(e){if(!cr(e))return!1;const t=gp(Xu(e));return t.$x||t.$y||t.$value||t.$max}function UKt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:N1,d=yv(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const x=n(t);m[y+0]=x.r,m[y+1]=x.g,m[y+2]=x.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function Q9e(e){Ke.call(this,null,e),this.modified(!0)}Ot(Q9e,Ke,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=VKt(e.type),RX.forEach(r=>{e[r]!=null&&awe(n,r,e[r])})):RX.forEach(r=>{e.modified(r)&&awe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&zKt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function zKt(e,t){const n=HKt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function VKt(e){const t=Uoe((e||"mercator").toLowerCase());return t||rt("Unrecognized projection type: "+e),t()}function awe(e,t,n){cr(e[t])&&e[t](n)}function HKt(e){return e=Lt(e),e.length===1?e[0]:{type:qoe,features:e.reduce((t,n)=>t.concat(qKt(n)),[])}}function qKt(e){return e.type===qoe?e.features:Lt(e).filter(t=>t!=null).map(t=>t.type===NX?t:{type:NX,geometry:t})}const WKt=Object.freeze(Object.defineProperty({__proto__:null,contour:Hoe,geojson:Woe,geopath:Goe,geopoint:Yoe,geoshape:Koe,graticule:Xoe,heatmap:Qoe,isocontour:zoe,kde2d:Voe,projection:Q9e},Symbol.toStringTag,{value:"Module"})),uwe={center:cSt,collide:ISt,nbody:jSt,link:RSt,x:USt,y:zSt},qI="forces",PX=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],GKt=["static","iterations"],J9e=["x","y","vx","vy"];function Joe(e){Ke.call(this,null,e)}Joe.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:J9e}]};Ot(Joe,Ke,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(PX),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Z9e(n,e,0,t)):(this.value=n=KKt(t.source,e),n.on("tick",YKt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(GKt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==qI||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(J9e)}});function YKt(e,t){return()=>e.touch(t).run()}function KKt(e,t){const n=BSt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),Z9e(n,t,!0).on("end",()=>s=!0)}function Z9e(e,t,n,r){var i=Lt(t.forces),s,o,a,u;for(s=0,o=PX.length;s<o;++s)a=PX[s],a!==qI&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=qI+s,a=n||t.modified(qI,s)?QKt(i[s]):r&&XKt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(qI+s,null);return e.numForces=i.length,e}function XKt(e,t){var n,r;for(n in e)if(cr(r=e[n])&&t.modified(Xu(r)))return 1;return 0}function QKt(e){var t,n;vn(uwe,e.force)||rt("Unrecognized force: "+e.force),t=uwe[e.force]();for(n in e)cr(t[n])&&JKt(t[n],e[n],e);return t}function JKt(e,t,n){e(cr(t)?r=>t(r,n):t)}const ZKt=Object.freeze(Object.defineProperty({__proto__:null,force:Joe},Symbol.toStringTag,{value:"Module"}));function OX(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Zoe(e){Ke.call(this,null,e)}Zoe.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const eXt=e=>e.values;Ot(Zoe,Ke,{transform(e,t){t.source||rt("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&I9(o.data)&&i.rem.push(o.data)}),this.value=s=IB({values:Lt(e.keys).reduce((o,a)=>(o.key(a),o),tXt()).entries(i.source)},eXt),n&&s.each(o=>{o.children&&(o=Ii(o.data),i.add.push(o),i.source.push(o))}),OX(s,mn,mn)),i.source.root=s,i}});function tXt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Fy(e){Ke.call(this,null,e)}const nXt=(e,t)=>e.parent===t.parent?1:2;Ot(Fy,Ke,{transform(e,t){(!t.source||!t.source.root)&&rt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(nE(e.sort,o=>o.data)),rXt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?nXt:gS);try{this.value=n(i)}catch(o){rt(o)}return i.each(o=>iXt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function rXt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function iXt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const FX=["x","y","r","depth","children"];function eae(e){Fy.call(this,e)}eae.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:FX.length,default:FX}]};Ot(eae,Fy,{layout:XPe,params:["radius","size","padding"],fields:FX});const $X=["x0","y0","x1","y1","depth","children"];function tae(e){Fy.call(this,e)}tae.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$X.length,default:$X}]};Ot(tae,Fy,{layout:zIt,params:["size","round","padding"],fields:$X});function nae(e){Ke.call(this,null,e)}nae.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ot(nae,Ke,{transform(e,t){t.source||rt("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?OX(d1e().id(e.key).parentId(e.parentKey)(i.source),e.key,Vd):OX(d1e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const lwe={tidy:JIt,cluster:fIt},MX=["x","y","depth","children"];function rae(e){Fy.call(this,e)}rae.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:MX.length,default:MX}]};Ot(rae,Fy,{layout(e){const t=e||"tidy";if(vn(lwe,t))return lwe[t]();rt("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:MX});function iae(e){Ke.call(this,[],e)}iae.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ot(iae,Ke,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||rt("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[mn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[mn(a)]&&s[mn(u)]&&i.add.push(Ii({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[mn(o)]=1),n.forEach(o=>{(s[mn(o.source)]||s[mn(o.target)])&&i.mod.push(o)})),i}});const cwe={binary:ekt,dice:DN,slice:kB,slicedice:tkt,squarify:e4e,resquarify:nkt},LX=["x0","y0","x1","y1","depth","children"];function sae(e){Fy.call(this,e)}sae.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:LX.length,default:LX}]};Ot(sae,Fy,{layout(){const e=ZIt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{vn(cwe,t)?e.tile(cwe[t]):rt("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:LX});const sXt=Object.freeze(Object.defineProperty({__proto__:null,nest:Zoe,pack:eae,partition:tae,stratify:nae,tree:rae,treelinks:iae,treemap:sae},Symbol.toStringTag,{value:"Module"})),nq=4278190080;function oXt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function aXt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=yv(s,o).getContext("2d"),l=yv(s,o).getContext("2d"),c=a&&yv(s,o).getContext("2d");n.forEach(S=>BF(u,S,!1)),BF(l,t,!1),a&&BF(c,t,!0);const f=rq(u,s,o),d=rq(l,s,o),h=a&&rq(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,x,_,C,T;for(y=0;y<o;++y)for(g=0;g<s;++g)x=y*s+g,_=f[x]&nq,T=d[x]&nq,C=a&&h[x]&nq,(_||C||T)&&(v=e(g),b=e(y),!i&&(_||T)&&p.set(v,b),a&&(_||C)&&m.set(v,b));return[p,m]}function rq(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function BF(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>BF(e,s.items,n))}):Gf[r].draw(e,{items:n?t.map(uXt):t})}function uXt(e){const t=k9(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ym=5,bl=31,xR=32,C1=new Uint32Array(xR+1),$h=new Uint32Array(xR+1);$h[0]=0;C1[0]=~$h[0];for(let e=1;e<=xR;++e)$h[e]=$h[e-1]<<1|1,C1[e]=~$h[e];function lXt(e,t){const n=new Uint32Array(~~((e*t+xR)/xR));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Ym]&1<<(a&bl)},set:(s,o)=>{const a=o*e+s;r(a>>>Ym,1<<(a&bl))},clear:(s,o)=>{const a=o*e+s;i(a>>>Ym,~(1<<(a&bl)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Ym,h=f>>>Ym,d===h){if(n[d]&C1[c&bl]&$h[(f&bl)+1])return!0}else{if(n[d]&C1[c&bl]||n[h]&$h[(f&bl)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ym,d=c>>>Ym,f===d)r(f,C1[l&bl]&$h[(c&bl)+1]);else for(r(f,C1[l&bl]),r(d,$h[(c&bl)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ym,d=c>>>Ym,f===d)i(f,$h[l&bl]|C1[(c&bl)+1]);else for(i(f,$h[l&bl]),i(d,C1[(c&bl)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function cXt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>lXt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function fXt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Rf.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function cM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function X1(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function dXt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!cM(p,m,d,h,i,s)&&!X1(e,p,m,h,d,g,o,a)&&!X1(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,X1(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Rf.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,x,_,C,T,S,k,I,R,F,O,B,H,U,G,Y;for(let Q=0;Q<f;++Q){for(v=c[Q].x,x=c[Q].y,b=c[Q].x2===void 0?v:c[Q].x2,_=c[Q].y2===void 0?x:c[Q].y2,v>b&&(Y=v,v=b,b=Y),x>_&&(Y=x,x=_,_=Y),I=e(v),F=e(b),R=~~((I+F)/2),O=e(x),H=e(_),B=~~((O+H)/2),S=R;S>=I;--S)for(k=B;k>=O;--k)G=u(S,k,p,h,d),G&&([l.x,l.y,p,m]=G);for(S=R;S<=F;++S)for(k=B;k<=H;++k)G=u(S,k,p,h,d),G&&([l.x,l.y,p,m]=G);!m&&!n&&(U=Math.abs(b-v+_-x),C=(v+b)/2,T=(x+_)/2,U>=y&&!cM(C,T,h,d,i,s)&&!X1(e,C,T,d,h,d,o,null)&&(y=U,l.x=C,l.y=T,g=!0))}return m||g?(C=h/2,T=d/2,o.setRange(e(l.x-C),e(l.y-T),e(l.x+C),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const hXt=[-1,-1,1,1],pXt=[-1,1,-1,1];function mXt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Rf.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,x,_,C,T,S,k,I,R,F,O,B;for(let H=0;H<f;++H){for(b=c[H].x,_=c[H].y,x=c[H].x2===void 0?b:c[H].x2,C=c[H].y2===void 0?_:c[H].y2,p.push([e((b+x)/2),e((_+C)/2)]);p.length;)if([k,I]=p.pop(),!(o.get(k,I)||a.get(k,I)||u.get(k,I))){u.set(k,I);for(let U=0;U<4;++U)T=k+hXt[U],S=I+pXt[U],u.outOfBounds(T,S,T,S)||p.push([T,S]);if(T=e.invert(k),S=e.invert(I),R=m,F=s,!cM(T,S,h,d,i,s)&&!X1(e,T,S,d,h,R,o,a)&&!X1(e,T,S,d,h,d,o,null)){for(;F-R>=1;)O=(R+F)/2,X1(e,T,S,d,h,O,o,a)?F=O:R=O;R>m&&(l.x=T,l.y=S,m=R,g=!0)}}!g&&!n&&(B=Math.abs(x-b+C-_),T=(b+x)/2,S=(_+C)/2,B>=v&&!cM(T,S,h,d,i,s)&&!X1(e,T,S,d,h,d,o,null)&&(v=B,l.x=T,l.y=S,y=!0))}return g||y?(T=h/2,S=d/2,o.setRange(e(l.x-T),e(l.y-S),e(l.x+T),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const gXt=["right","center","left"],yXt=["bottom","middle","top"];function vXt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,x,_,C,T,S,k,I,R;for(let F=0;F<u;++F){if(h=(n[F]&3)-1,p=(n[F]>>>2&3)-1,m=h===0&&p===0||r[F]<0,g=h&&p?Math.SQRT1_2:1,y=r[F]<0?-1:1,v=c[1+h]+r[F]*h*g,T=c[4+p]+y*f*p/2+r[F]*p*g,x=T-f/2,_=T+f/2,S=e(v),I=e(x),R=e(_),!d)if(fwe(S,S,I,R,o,a,v,v,x,_,c,m))d=Rf.width(l.datum,l.datum.text);else continue;if(C=v+y*d*h/2,v=C-d/2,b=C+d/2,S=e(v),k=e(b),fwe(S,k,I,R,o,a,v,b,x,_,c,m))return l.x=h?h*y<0?b:v:C,l.y=p?p*y<0?_:x:T,l.align=gXt[h*y+1],l.baseline=yXt[p*y+1],o.setRange(S,I,k,R),!0}return!1}}function fwe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const iq=0,sq=4,oq=8,aq=0,uq=1,lq=2,bXt={"top-left":iq+aq,top:iq+uq,"top-right":iq+lq,left:sq+aq,middle:sq+uq,right:sq+lq,"bottom-left":oq+aq,bottom:oq+uq,"bottom-right":oq+lq},xXt={naive:fXt,"reduced-search":dXt,floodfill:mXt};function wXt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=_Xt(r,f),h=EXt(i,f),p=CXt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=TXt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let x=-1,_=-1;const C=e.map(I=>{const R=v?Rf.width(I,I.text):void 0;return x=Math.max(x,R),_=Math.max(_,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:R}});l=l===null||l===1/0?Math.max(x,_)+Math.max(...r):l;const T=cXt(t[0],t[1],l);let S;if(!b){n&&C.sort((F,O)=>n(F.datum,O.datum));let I=!1;for(let F=0;F<h.length&&!I;++F)I=h[F]===5||d[F]<0;const R=(p&&o||g)&&e.map(F=>F.datum);S=s.length||R?aXt(T,R||[],s,I,g):oXt(T,o&&C)}const k=g?xXt[c](T,S,o,u):vXt(T,S,h,d);return C.forEach(I=>I.opacity=+k(I)),C}function _Xt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function EXt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=bXt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function CXt(e){return e&&e.mark&&e.mark.marktype}function TXt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const BX=["x","y","opacity","align","baseline"],e7e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function oae(e){Ke.call(this,null,e)}oae.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:e7e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:BX.length,default:BX}]};Ot(oae,Ke,{transform(e,t){function n(s){const o=e[s];return cr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&rt("Size parameter should be specified as a [width, height] array.");const i=e.as||BX;return wXt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Lt(e.offset==null?1:e.offset),Lt(e.anchor||e7e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const AXt=Object.freeze(Object.defineProperty({__proto__:null,label:oae},Symbol.toStringTag,{value:"Module"}));function t7e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function aae(e){Ke.call(this,null,e)}aae.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ot(aae,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=t7e(r,e.groupby),s=(e.groupby||[]).map(ho),o=s.length,a=e.as||[ho(e.x),ho(e.y)],u=[];i.forEach(l=>{hLe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ii(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const jX={constant:bse,linear:xse,log:lLe,exp:cLe,pow:fLe,quad:wse,poly:dLe},SXt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function uae(e){Ke.call(this,null,e)}uae.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(jX)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ot(uae,Ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=t7e(r,e.groupby),s=(e.groupby||[]).map(ho),o=e.method||"linear",a=e.order==null?3:e.order,u=SXt(o,a),l=e.as||[ho(e.x),ho(e.y)],c=jX[o],f=[];let d=e.extent;vn(jX,o)||rt("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Ii({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||em(h,e.x),y=v=>{const b={};for(let x=0;x<s.length;++x)b[s[x]]=h.dims[x];b[l[0]]=v[0],b[l[1]]=v[1],f.push(Ii(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):M9(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const DXt=Object.freeze(Object.defineProperty({__proto__:null,loess:aae,regression:uae},Symbol.toStringTag,{value:"Module"}));function lae(e){Ke.call(this,null,e)}lae.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const IXt=[-1e5,-1e5,1e5,1e5];Ot(lae,Ke,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:IXt;const s=this.value=tne.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!RXt(u)?kXt(u):null}return t.reflow(e.modified()).modifies(n)}});function kXt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function RXt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const NXt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:lae},Symbol.toStringTag,{value:"Module"}));var cq=Math.PI/180,WI=64,jF=2048;function PXt(){var e=[256,256],t,n,r,i,s,o,a,u=n7e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(yv()),m=BXt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],x=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,T)=>T.size-C.size);++v<y;){var _=x[v];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,OXt(p,_,x,v),_.hasText&&h(m,_,g)&&(b.push(_),g?$Xt(g,_):g=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(WI<<5)/m,p.height=jF/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),x=u(e),_=c()<.5?1:-1,C=-_,T,S,k;(T=x(C+=_))&&(S=~~T[0],k=~~T[1],!(Math.min(Math.abs(S),Math.abs(k))>=b));)if(m.x=y+S,m.y=v+k,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!FXt(m,p,e[0]))&&(!g||MXt(m,g))){for(var I=m.sprite,R=m.width>>5,F=e[0]>>5,O=m.x-(R<<4),B=O&127,H=32-B,U=m.y1-m.y0,G=(m.y+m.y0)*F+(O>>5),Y,Q=0;Q<U;Q++){Y=0;for(var M=0;M<=R;M++)p[G+M]|=Y<<H|(M<R?(Y=I[Q*R+M])>>>B:0);G+=F}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=mx(p),f):n},f.fontStyle=function(p){return arguments.length?(i=mx(p),f):i},f.fontWeight=function(p){return arguments.length?(s=mx(p),f):s},f.rotate=function(p){return arguments.length?(o=mx(p),f):o},f.text=function(p){return arguments.length?(t=mx(p),f):t},f.spiral=function(p){return arguments.length?(u=jXt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=mx(p),f):r},f.padding=function(p){return arguments.length?(a=mx(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function OXt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(WI<<5)/s,jF/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*cq),g=Math.cos(t.rotate*cq),y=c*g,v=c*m,b=d*g,x=d*m;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=WI<<5&&(o=0,a+=u,u=0),a+d>=jF)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*cq),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var _=i.getImageData(0,0,(WI<<5)/s,jF/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,S=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var k=f*p+(h>>5),I=_[(a+p)*(WI<<5)+(o+h)<<2]?1<<31-h%32:0;C[k]|=I,T|=I}T?S=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+S,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function FXt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function $Xt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function MXt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function n7e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function LXt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function BXt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function mx(e){return typeof e=="function"?e:function(){return e}}var jXt={archimedean:n7e,rectangular:LXt};const r7e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],UXt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function cae(e){Ke.call(this,PXt(),e)}cae.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:r7e}]};Ot(cae,Ke,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&rt("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return cr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||UXt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||r7e;let a=e.fontSize||14,u;if(cr(a)?u=e.fontSizeRange:a=sl(a),u){const p=a,m=xi("sqrt")().domain(em(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(qd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const zXt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:cae},Symbol.toStringTag,{value:"Module"})),VXt=e=>new Uint8Array(e),HXt=e=>new Uint16Array(e),$k=e=>new Uint32Array(e);function qXt(){let e=8,t=[],n=$k(0),r=tO(0,e),i=tO(0,e);return{data:()=>t,seen:()=>n=WXt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=tO(s,e,r),i=tO(s,e))}}}function WXt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function tO(e,t,n){const r=(t<257?VXt:t<65537?HXt:$k)(e);return n&&r.set(n),r}function dwe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function hwe(){let e=$k(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=$k(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=GXt(h,d),c)p=t,m=e,t=Array(c+f),e=$k(c+f),YXt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[SEt(u,a[0],0,l),Nv(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function GXt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),kEt(e,t)}function YXt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function fae(e){Ke.call(this,qXt(),e),this._indices=null,this._dims=null}fae.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ot(fae,Ke,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=hwe()),s.push(dwe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,x,_,C,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,_=0,C=v.length;_<C;++_)x[v[_]._index]=1;for(_=0;_<h;++_)T=r[_],(!o[_]||e.modified("fields",_)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=hwe(),p[y]=m=g.insert(T,t.source,0)),o[_]=dwe(g,_,i[_]).onAdd(m,u));for(_=0,C=a.data().length;_<C;++_)b[_]||(l[_]!==u[_]?f.push(_):x[_]&&u[_]!==c&&d.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function dae(e){Ke.call(this,null,e)}dae.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ot(dae,Ke,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const KXt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:fae,resolvefilter:dae},Symbol.toStringTag,{value:"Module"})),XXt="RawCode",a_="Literal",QXt="Property",JXt="Identifier",ZXt="ArrayExpression",eQt="BinaryExpression",i7e="CallExpression",tQt="ConditionalExpression",nQt="LogicalExpression",rQt="MemberExpression",iQt="ObjectExpression",sQt="UnaryExpression";function kp(e){this.type=e}kp.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=oQt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function oQt(e){switch(e.type){case ZXt:return e.elements;case eQt:case nQt:return[e.left,e.right];case i7e:return[e.callee].concat(e.arguments);case tQt:return[e.test,e.consequent,e.alternate];case rQt:return[e.object,e.property];case iQt:return e.properties;case QXt:return[e.key,e.value];case sQt:return[e.argument];case JXt:case a_:case XXt:default:return[]}}var bm,en,tt,Ju,Hi,t7=1,fP=2,u_=3,Ub=4,n7=5,sE=6,gc=7,dP=8,aQt=9;bm={};bm[t7]="Boolean";bm[fP]="<end>";bm[u_]="Identifier";bm[Ub]="Keyword";bm[n7]="Null";bm[sE]="Numeric";bm[gc]="Punctuator";bm[dP]="String";bm[aQt]="RegularExpression";var uQt="ArrayExpression",lQt="BinaryExpression",cQt="CallExpression",fQt="ConditionalExpression",s7e="Identifier",dQt="Literal",hQt="LogicalExpression",pQt="MemberExpression",mQt="ObjectExpression",gQt="Property",yQt="UnaryExpression",Fa="Unexpected token %0",vQt="Unexpected number",bQt="Unexpected string",xQt="Unexpected identifier",wQt="Unexpected reserved word",_Qt="Unexpected end of input",UX="Invalid regular expression",fq="Invalid regular expression: missing /",o7e="Octal literals are not allowed in strict mode.",EQt="Duplicate data property in object literal not allowed in strict mode",uu="ILLEGAL",wR="Disabled.",CQt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),TQt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function r7(e,t){if(!e)throw new Error("ASSERT: "+t)}function og(e){return e>=48&&e<=57}function hae(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Mk(e){return"01234567".indexOf(e)>=0}function AQt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function _R(e){return e===10||e===13||e===8232||e===8233}function hP(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&CQt.test(String.fromCharCode(e))}function fM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&TQt.test(String.fromCharCode(e))}const SQt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function a7e(){for(;tt<Ju;){const e=en.charCodeAt(tt);if(AQt(e)||_R(e))++tt;else break}}function zX(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)tt<Ju&&hae(en[tt])?(r=en[tt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):yi({},Fa,uu);return String.fromCharCode(i)}function DQt(){var e,t,n,r;for(e=en[tt],t=0,e==="}"&&yi({},Fa,uu);tt<Ju&&(e=en[tt++],!!hae(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&yi({},Fa,uu),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function u7e(){var e,t;for(e=en.charCodeAt(tt++),t=String.fromCharCode(e),e===92&&(en.charCodeAt(tt)!==117&&yi({},Fa,uu),++tt,e=zX("u"),(!e||e==="\\"||!hP(e.charCodeAt(0)))&&yi({},Fa,uu),t=e);tt<Ju&&(e=en.charCodeAt(tt),!!fM(e));)++tt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),en.charCodeAt(tt)!==117&&yi({},Fa,uu),++tt,e=zX("u"),(!e||e==="\\"||!fM(e.charCodeAt(0)))&&yi({},Fa,uu),t+=e);return t}function IQt(){var e,t;for(e=tt++;tt<Ju;){if(t=en.charCodeAt(tt),t===92)return tt=e,u7e();if(fM(t))++tt;else break}return en.slice(e,tt)}function kQt(){var e,t,n;return e=tt,t=en.charCodeAt(tt)===92?u7e():IQt(),t.length===1?n=u_:SQt.hasOwnProperty(t)?n=Ub:t==="null"?n=n7:t==="true"||t==="false"?n=t7:n=u_,{type:n,value:t,start:e,end:tt}}function dq(){var e=tt,t=en.charCodeAt(tt),n,r=en[tt],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++tt,{type:gc,value:String.fromCharCode(t),start:e,end:tt};default:if(n=en.charCodeAt(tt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return tt+=2,{type:gc,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:tt};case 33:case 61:return tt+=2,en.charCodeAt(tt)===61&&++tt,{type:gc,value:en.slice(e,tt),start:e,end:tt}}}if(o=en.substr(tt,4),o===">>>=")return tt+=4,{type:gc,value:o,start:e,end:tt};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return tt+=3,{type:gc,value:s,start:e,end:tt};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return tt+=2,{type:gc,value:i,start:e,end:tt};if(i==="//"&&yi({},Fa,uu),"<>=!+-*%&|^/".indexOf(r)>=0)return++tt,{type:gc,value:r,start:e,end:tt};yi({},Fa,uu)}function RQt(e){let t="";for(;tt<Ju&&hae(en[tt]);)t+=en[tt++];return t.length===0&&yi({},Fa,uu),hP(en.charCodeAt(tt))&&yi({},Fa,uu),{type:sE,value:parseInt("0x"+t,16),start:e,end:tt}}function NQt(e){let t="0"+en[tt++];for(;tt<Ju&&Mk(en[tt]);)t+=en[tt++];return(hP(en.charCodeAt(tt))||og(en.charCodeAt(tt)))&&yi({},Fa,uu),{type:sE,value:parseInt(t,8),octal:!0,start:e,end:tt}}function pwe(){var e,t,n;if(n=en[tt],r7(og(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=tt,e="",n!=="."){if(e=en[tt++],n=en[tt],e==="0"){if(n==="x"||n==="X")return++tt,RQt(t);if(Mk(n))return NQt(t);n&&og(n.charCodeAt(0))&&yi({},Fa,uu)}for(;og(en.charCodeAt(tt));)e+=en[tt++];n=en[tt]}if(n==="."){for(e+=en[tt++];og(en.charCodeAt(tt));)e+=en[tt++];n=en[tt]}if(n==="e"||n==="E")if(e+=en[tt++],n=en[tt],(n==="+"||n==="-")&&(e+=en[tt++]),og(en.charCodeAt(tt)))for(;og(en.charCodeAt(tt));)e+=en[tt++];else yi({},Fa,uu);return hP(en.charCodeAt(tt))&&yi({},Fa,uu),{type:sE,value:parseFloat(e),start:t,end:tt}}function PQt(){var e="",t,n,r,i,s=!1;for(t=en[tt],r7(t==="'"||t==='"',"String literal must starts with a quote"),n=tt,++tt;tt<Ju;)if(r=en[tt++],r===t){t="";break}else if(r==="\\")if(r=en[tt++],!r||!_R(r.charCodeAt(0)))switch(r){case"u":case"x":en[tt]==="{"?(++tt,e+=DQt()):e+=zX(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Mk(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),tt<Ju&&Mk(en[tt])&&(s=!0,i=i*8+"01234567".indexOf(en[tt++]),"0123".indexOf(r)>=0&&tt<Ju&&Mk(en[tt])&&(i=i*8+"01234567".indexOf(en[tt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&en[tt]===`
`&&++tt;else{if(_R(r.charCodeAt(0)))break;e+=r}return t!==""&&yi({},Fa,uu),{type:dP,value:e,octal:s,start:n,end:tt}}function OQt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";yi({},UX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{yi({},UX)}try{return new RegExp(e,t)}catch{return null}}function FQt(){var e,t,n,r,i;for(e=en[tt],r7(e==="/","Regular expression literal must start with a slash"),t=en[tt++],n=!1,r=!1;tt<Ju;)if(e=en[tt++],t+=e,e==="\\")e=en[tt++],_R(e.charCodeAt(0))&&yi({},fq),t+=e;else if(_R(e.charCodeAt(0)))yi({},fq);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||yi({},fq),i=t.substr(1,t.length-2),{value:i,literal:t}}function $Qt(){var e,t,n;for(t="",n="";tt<Ju&&(e=en[tt],!!fM(e.charCodeAt(0)));)++tt,e==="\\"&&tt<Ju?yi({},Fa,uu):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&yi({},UX,n),{value:n,literal:t}}function MQt(){var e,t,n,r;return Hi=null,a7e(),e=tt,t=FQt(),n=$Qt(),r=OQt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:tt}}function LQt(e){return e.type===u_||e.type===Ub||e.type===t7||e.type===n7}function l7e(){if(a7e(),tt>=Ju)return{type:fP,start:tt,end:tt};const e=en.charCodeAt(tt);return hP(e)?kQt():e===40||e===41||e===59?dq():e===39||e===34?PQt():e===46?og(en.charCodeAt(tt+1))?pwe():dq():og(e)?pwe():dq()}function wc(){const e=Hi;return tt=e.end,Hi=l7e(),tt=e.end,e}function c7e(){const e=tt;Hi=l7e(),tt=e}function BQt(e){const t=new kp(uQt);return t.elements=e,t}function mwe(e,t,n){const r=new kp(e==="||"||e==="&&"?hQt:lQt);return r.operator=e,r.left=t,r.right=n,r}function jQt(e,t){const n=new kp(cQt);return n.callee=e,n.arguments=t,n}function UQt(e,t,n){const r=new kp(fQt);return r.test=e,r.consequent=t,r.alternate=n,r}function pae(e){const t=new kp(s7e);return t.name=e,t}function GI(e){const t=new kp(dQt);return t.value=e.value,t.raw=en.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function gwe(e,t,n){const r=new kp(pQt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function zQt(e){const t=new kp(mQt);return t.properties=e,t}function ywe(e,t,n){const r=new kp(gQt);return r.key=t,r.value=n,r.kind=e,r}function VQt(e,t){const n=new kp(yQt);return n.operator=e,n.argument=t,n.prefix=!0,n}function yi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(r7(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=tt,n.description=i,n}function i7(e){e.type===fP&&yi(e,_Qt),e.type===sE&&yi(e,vQt),e.type===dP&&yi(e,bQt),e.type===u_&&yi(e,xQt),e.type===Ub&&yi(e,wQt),yi(e,Fa,e.value)}function Zu(e){const t=wc();(t.type!==gc||t.value!==e)&&i7(t)}function _s(e){return Hi.type===gc&&Hi.value===e}function hq(e){return Hi.type===Ub&&Hi.value===e}function HQt(){const e=[];for(tt=Hi.start,Zu("[");!_s("]");)_s(",")?(wc(),e.push(null)):(e.push(l_()),_s("]")||Zu(","));return wc(),BQt(e)}function vwe(){tt=Hi.start;const e=wc();return e.type===dP||e.type===sE?(e.octal&&yi(e,o7e),GI(e)):pae(e.value)}function qQt(){var e,t,n,r;if(tt=Hi.start,e=Hi,e.type===u_)return n=vwe(),Zu(":"),r=l_(),ywe("init",n,r);if(e.type===fP||e.type===gc)i7(e);else return t=vwe(),Zu(":"),r=l_(),ywe("init",t,r)}function WQt(){var e=[],t,n,r,i={},s=String;for(tt=Hi.start,Zu("{");!_s("}");)t=qQt(),t.key.type===s7e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?yi({},EQt):i[r]=!0,e.push(t),_s("}")||Zu(",");return Zu("}"),zQt(e)}function GQt(){Zu("(");const e=mae();return Zu(")"),e}const YQt={if:1};function KQt(){var e,t,n;if(_s("("))return GQt();if(_s("["))return HQt();if(_s("{"))return WQt();if(e=Hi.type,tt=Hi.start,e===u_||YQt[Hi.value])n=pae(wc().value);else if(e===dP||e===sE)Hi.octal&&yi(Hi,o7e),n=GI(wc());else{if(e===Ub)throw new Error(wR);e===t7?(t=wc(),t.value=t.value==="true",n=GI(t)):e===n7?(t=wc(),t.value=null,n=GI(t)):_s("/")||_s("/=")?(n=GI(MQt()),c7e()):i7(wc())}return n}function XQt(){const e=[];if(Zu("("),!_s(")"))for(;tt<Ju&&(e.push(l_()),!_s(")"));)Zu(",");return Zu(")"),e}function QQt(){tt=Hi.start;const e=wc();return LQt(e)||i7(e),pae(e.value)}function JQt(){return Zu("."),QQt()}function ZQt(){Zu("[");const e=mae();return Zu("]"),e}function eJt(){var e,t,n;for(e=KQt();;)if(_s("."))n=JQt(),e=gwe(".",e,n);else if(_s("("))t=XQt(),e=jQt(e,t);else if(_s("["))n=ZQt(),e=gwe("[",e,n);else break;return e}function bwe(){const e=eJt();if(Hi.type===gc&&(_s("++")||_s("--")))throw new Error(wR);return e}function UF(){var e,t;if(Hi.type!==gc&&Hi.type!==Ub)t=bwe();else{if(_s("++")||_s("--"))throw new Error(wR);if(_s("+")||_s("-")||_s("~")||_s("!"))e=wc(),t=UF(),t=VQt(e.value,t);else{if(hq("delete")||hq("void")||hq("typeof"))throw new Error(wR);t=bwe()}}return t}function xwe(e){let t=0;if(e.type!==gc&&e.type!==Ub)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function tJt(){var e,t,n,r,i,s,o,a,u,l;if(e=Hi,u=UF(),r=Hi,i=xwe(r),i===0)return u;for(r.prec=i,wc(),t=[e,Hi],o=UF(),s=[u,r,o];(i=xwe(Hi))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=mwe(a,u,o),s.push(n);r=wc(),r.prec=i,s.push(r),t.push(Hi),n=UF(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=mwe(s[l-1].value,s[l-2],n),l-=2;return n}function l_(){var e,t,n;return e=tJt(),_s("?")&&(wc(),t=l_(),Zu(":"),n=l_(),e=UQt(e,t,n)),e}function mae(){const e=l_();if(_s(","))throw new Error(wR);return e}function gae(e){en=e,tt=0,Ju=en.length,Hi=null,c7e();const t=mae();if(Hi.type!==fP)throw new Error("Unexpect token after expression.");return t}var f7e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function d7e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&rt("Missing arguments to clamp function."),o.length>3&&rt("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&rt("Missing arguments to if function."),o.length>3&&rt("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function nJt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function h7e(e){e=e||{};const t=e.allowed?gp(e.allowed):{},n=e.forbidden?gp(e.forbidden):{},r=e.constants||f7e,i=(e.functions||d7e)(f),s=e.globalvar,o=e.fieldvar,a=cr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Bt(p))return p;const m=d[p.type];return m==null&&rt("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:vn(n,m)?rt("Illegal identifier: "+m):vn(r,m)?r[m]:vn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[nJt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&rt("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=vn(i,m)&&i[m];return y||rt("Unrecognized function: "+m),cr(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const wwe=Symbol("vega_selection_getter");function p7e(e){return(!e.getter||!e.getter[wwe])&&(e.getter=zd(e.field),e.getter[wwe]=!0),e.getter}const yae="intersect",_we="union",rJt="vlMulti",iJt="vlPoint",Ewe="or",sJt="and",i0="_vgsid_",ER=zd(i0),oJt="E",aJt="R",uJt="R-E",lJt="R-LE",cJt="R-RE",dM="index:unit";function Cwe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=p7e(a)(e),mv(o)&&(o=Wu(o)),mv(r[s])&&(r[s]=Wu(r[s])),at(r[s])&&mv(r[s][0])&&(r[s]=r[s].map(Wu)),a.type===oJt){if(at(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===aJt){if(!rC(o,r[s]))return!1}else if(a.type===cJt){if(!rC(o,r[s],!0,!1))return!1}else if(a.type===uJt){if(!rC(o,r[s],!1,!1))return!1}else if(a.type===lJt&&!rC(o,r[s],!1,!0))return!1;return!0}function fJt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[dM]&&r[dM].value:void 0,o=n===yae,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Cwe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Cwe(t,l),o^h)return h;return a&&o}const m7e=tp(ER),dJt=m7e.left,hJt=m7e.right;function pJt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[dM]&&r[dM].value:void 0,o=n===yae,a=ER(t),u=dJt(i,a);if(u===i.length||ER(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(hJt(i,a)-u<s.size)return!1}return!0}function mJt(e,t){return e.map(n=>lr(t.fields?{values:t.fields.map(r=>p7e(r)(n.datum))}:{[i0]:ER(n.datum)},t))}function gJt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,x=0,_,C;x<b;++x)if(l=s[x],d=l.unit,c=l.fields,f=l.values,c&&f){for(_=0,C=c.length;_<C;++_)h=c[_],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=pq[`${y}_union`],m[d]=v(g,Lt(f[_]));n&&(g=a[d]||(a[d]=[]),g.push(Lt(f).reduce((T,S,k)=>(T[c[k].field]=S,T),{})))}else h=i0,p=ER(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[i0]:p}));if(t=t||_we,o[i0]?o[i0]=pq[`${i0}_${t}`](...Object.values(o[i0])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(S=>o[T][S]).reduce((S,k)=>S===void 0?k:pq[`${u[T]}_${t}`](S,k))}),s=Object.keys(a),n&&s.length){const T=r?iJt:rJt;o[T]=t===_we?{[Ewe]:s.reduce((S,k)=>(S.push(...a[k]),S),[])}:{[sJt]:s.map(S=>({[Ewe]:a[S]}))}}return o}var pq={[`${i0}_union`]:BEt,[`${i0}_intersect`]:MEt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Wu(t[0]),r=Wu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Wu(t[0]),r=Wu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const yJt=":",vJt="@";function vae(e,t,n,r){t[0].type!==a_&&rt("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Xr(t).value,o="unit",a=vJt+o,u=yJt+i;s===yae&&!vn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),vn(r,u)||(r[u]=n.getData(i).tuplesRef())}function g7e(e){const t=this.context.data[e];return t?t.values.value:[]}function bJt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function xJt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Vd).insert(t)),1}function wJt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const pP=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},_Jt=pP("format"),y7e=pP("timeFormat"),EJt=pP("utcFormat"),CJt=pP("timeParse"),TJt=pP("utcParse"),nO=new Date(2e3,0,1);function s7(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(nO.setYear(2e3),nO.setMonth(e),nO.setDate(t),y7e.call(this,nO,n))}function AJt(e){return s7.call(this,e,1,"%B")}function SJt(e){return s7.call(this,e,1,"%b")}function DJt(e){return s7.call(this,0,2+e,"%A")}function IJt(e){return s7.call(this,0,2+e,"%a")}const kJt=":",RJt="@",VX="%",v7e="$";function bae(e,t,n,r){t[0].type!==a_&&rt("First argument to data functions must be a string literal.");const i=t[0].value,s=kJt+i;if(!vn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function NJt(e,t,n,r){t[0].type!==a_&&rt("First argument to indata must be a string literal."),t[1].type!==a_&&rt("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=RJt+s;vn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ml(e,t,n,r){if(t[0].type===a_)Twe(n,r,t[0].value);else for(e in n.scales)Twe(n,r,e)}function Twe(e,t,n){const r=VX+n;if(!vn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function xm(e,t){if(cr(e))return e;if(Bt(e)){const n=t.scales[e];return n&&iqt(n.value)?n.value:void 0}}function PJt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ml,n._range=Ml,n._scale=Ml;const r=i=>"_["+(i.type===a_?Nt(VX+i.value):Nt(VX)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function xae(e,t){return function(n,r,i){if(n){const s=xm(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const OJt=xae("area",ZSt),FJt=xae("bounds",rDt),$Jt=xae("centroid",lDt);function MJt(e,t){const n=xm(e,(t||this).context);return n&&n.scale()}function LJt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function wae(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function BJt(){return wae(this.context.dataflow,"warn",arguments)}function jJt(){return wae(this.context.dataflow,"info",arguments)}function UJt(){return wae(this.context.dataflow,"debug",arguments)}function mq(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function HX(e){const t=Ov(e),n=mq(t.r),r=mq(t.g),i=mq(t.b);return .2126*n+.7152*r+.0722*i}function zJt(e,t){const n=HX(e),r=HX(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function VJt(){const e=[].slice.call(arguments);return e.unshift({}),lr(...e)}function b7e(e,t){return e===t||e!==e&&t!==t?!0:at(e)?at(t)&&e.length===t.length?HJt(e,t):!1:jt(e)&&jt(t)?x7e(e,t):!1}function HJt(e,t){for(let n=0,r=e.length;n<r;++n)if(!b7e(e[n],t[n]))return!1;return!0}function x7e(e,t){for(const n in e)if(!b7e(e[n],t[n]))return!1;return!0}function Awe(e){return t=>x7e(e,t)}function qJt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Vd:at(n)||I9(n)?n:Awe(n),c.remove(f)),t&&c.insert(t),r&&(f=Awe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function WJt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function GJt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Swe={};function YJt(e,t){const n=Swe[t]||(Swe[t]=zd(t));return at(e)?e.map(n):n(e)}function _ae(e){return at(e)||ArrayBuffer.isView(e)?e:null}function Eae(e){return _ae(e)||(Bt(e)?e:null)}function KJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _ae(e).join(...n)}function XJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Eae(e).indexOf(...n)}function QJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Eae(e).lastIndexOf(...n)}function JJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Eae(e).slice(...n)}function ZJt(e,t,n){return cr(n)&&rt("Function argument passed to replace."),String(e).replace(t,n)}function eZt(e){return _ae(e).slice().reverse()}function tZt(e,t,n){return Gse(e||0,t||0,n||0)}function nZt(e,t){const n=xm(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function rZt(e,t){const n=xm(e,(t||this).context);return n?n.copy():void 0}function iZt(e,t){const n=xm(e,(t||this).context);return n?n.domain():[]}function sZt(e,t,n){const r=xm(e,(n||this).context);return r?at(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function oZt(e,t){const n=xm(e,(t||this).context);return n&&n.range?n.range():[]}function aZt(e,t,n){const r=xm(e,(n||this).context);return r?r(t):void 0}function uZt(e,t,n,r,i){e=xm(e,(i||this).context);const s=cBe(t,n);let o=e.domain(),a=o[0],u=Xr(o),l=il;return u-a?l=JLe(e,a,u):e=(e.interpolator?xi("sequential")().interpolator(e.interpolator()):xi("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Xr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function lZt(e,t,n){const r=xm(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function cZt(e){let t=null;return function(n){return n?yR(n,t=t||XT(e)):e}}const w7e=e=>e.data;function _7e(e,t){const n=g7e.call(t,e);return n.root&&n.root.lookup||{}}function fZt(e,t,n){const r=_7e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(w7e):void 0}function dZt(e,t){const n=_7e(e,this)[t];return n?n.ancestors().map(w7e):void 0}const E7e=()=>typeof window<"u"&&window||null;function hZt(){const e=E7e();return e?e.screen:{}}function pZt(){const e=E7e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function mZt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function C7e(e,t,n){if(!e)return[];const[r,i]=e,s=new Yo().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return a9e(o,s,gZt(t))}function gZt(e){let t=null;if(e){const n=Lt(e.marktype),r=Lt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function yZt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Lt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function vZt(e){return Lt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function bZt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Yo().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),C7e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>xZt(u.x,u.y,t))}function xZt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const CR={random(){return qd()},cumulativeNormal:O9,cumulativeLogNormal:hse,cumulativeUniform:yse,densityNormal:use,densityLogNormal:dse,densityUniform:gse,quantileNormal:F9,quantileLogNormal:pse,quantileUniform:vse,sampleNormal:P9,sampleLogNormal:fse,sampleUniform:mse,isArray:at,isBoolean:jb,isDate:mv,isDefined(e){return e!==void 0},isNumber:fi,isObject:jt,isRegExp:uMe,isString:Bt,isTuple:I9,isValid(e){return e!=null&&e===e},toBoolean:Wie,toDate(e){return Gie(e)},toNumber:Wu,toString:Yie,indexof:XJt,join:KJt,lastindexof:QJt,replace:ZJt,reverse:eZt,slice:JJt,flush:oMe,lerp:lMe,merge:VJt,pad:dMe,peek:Xr,pluck:YJt,span:YN,inrange:rC,truncate:hMe,rgb:Ov,lab:c8,hcl:f8,hsl:u8,luminance:HX,contrast:zJt,sequence:Sc,format:_Jt,utcFormat:EJt,utcParse:TJt,utcOffset:SMe,utcSequence:kMe,timeFormat:y7e,timeParse:CJt,timeOffset:AMe,timeSequence:IMe,timeUnitSpecifier:mMe,monthFormat:AJt,monthAbbrevFormat:SJt,dayFormat:DJt,dayAbbrevFormat:IJt,quarter:nMe,utcquarter:rMe,week:yMe,utcweek:xMe,dayofyear:gMe,utcdayofyear:bMe,warn:BJt,info:jJt,debug:UJt,extent(e){return em(e)},inScope:LJt,intersect:C7e,clampRange:iMe,pinchDistance:WJt,pinchAngle:GJt,screen:hZt,containerSize:mZt,windowSize:pZt,bandspace:tZt,setdata:xJt,pathShape:cZt,panLinear:J$e,panLog:Z$e,panPow:eMe,panSymlog:tMe,zoomLinear:jie,zoomLog:Uie,zoomPow:q$,zoomSymlog:zie,encode:wJt,modify:qJt,lassoAppend:yZt,lassoPath:vZt,intersectLasso:bZt},wZt=["view","item","group","xy","x","y"],_Zt="event.vega.",T7e="this.",Cae={},A7e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Nt(v7e+e)}]`,functions:EZt,constants:f7e,visitors:Cae},S7e=h7e(A7e);function EZt(e){const t=d7e(e);wZt.forEach(n=>t[n]=_Zt+n);for(const n in CR)t[n]=T7e+n;return lr(t,PJt(e,CR,Cae)),t}function Fo(e,t,n){return arguments.length===1?CR[e]:(CR[e]=t,n&&(Cae[e]=n),S7e.functions[e]=T7e+e,this)}Fo("bandwidth",nZt,Ml);Fo("copy",rZt,Ml);Fo("domain",iZt,Ml);Fo("range",oZt,Ml);Fo("invert",sZt,Ml);Fo("scale",aZt,Ml);Fo("gradient",uZt,Ml);Fo("geoArea",OJt,Ml);Fo("geoBounds",FJt,Ml);Fo("geoCentroid",$Jt,Ml);Fo("geoShape",lZt,Ml);Fo("geoScale",MJt,Ml);Fo("indata",bJt,NJt);Fo("data",g7e,bae);Fo("treePath",fZt,bae);Fo("treeAncestors",dZt,bae);Fo("vlSelectionTest",fJt,vae);Fo("vlSelectionIdTest",pJt,vae);Fo("vlSelectionResolve",gJt,vae);Fo("vlSelectionTuples",mJt);function nm(e,t){const n={};let r;try{e=Bt(e)?e:Nt(e)+"",r=gae(e)}catch{rt("Expression parse error: "+e)}r.visit(s=>{if(s.type!==i7e)return;const o=s.callee.name,a=A7e.visitors[o];a&&a(o,s.arguments,t,n)});const i=S7e(r);return i.globals.forEach(s=>{const o=v7e+s;!vn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:lr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function CZt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const TZt=gp(["rule"]),Dwe=gp(["group","image","rect"]);function AZt(e,t){let n="";return TZt[t]||(e.x2&&(e.x?(Dwe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Dwe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Tae(e){return(e+"").toLowerCase()}function SZt(e){return Tae(e)==="operator"}function DZt(e){return Tae(e)==="collect"}function qD(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function IZt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var kZt={operator:(e,t)=>qD(e,["_"],t.code),parameter:(e,t)=>qD(e,["datum","_"],t.code),event:(e,t)=>qD(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return qD(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=AZt(r,n),i+="return m;",qD(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),IZt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function RZt(e){const t=this;SZt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function NZt(e){const t=this;if(e.params){const n=t.get(e.id);n||rt("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function PZt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=at(i)?i.map(s=>Iwe(s,n,t)):Iwe(i,n,t)}return t}function Iwe(e,t,n){if(!e||!jt(e))return e;for(let r=0,i=kwe.length,s;r<i;++r)if(s=kwe[r],vn(e,s.key))return s.parse(e,t,n);return e}var kwe=[{key:"$ref",parse:OZt},{key:"$key",parse:$Zt},{key:"$expr",parse:FZt},{key:"$field",parse:MZt},{key:"$encode",parse:BZt},{key:"$compare",parse:LZt},{key:"$context",parse:jZt},{key:"$subflow",parse:UZt},{key:"$tupleid",parse:zZt}];function OZt(e,t){return t.get(e.$ref)||rt("Operator not defined: "+e.$ref)}function FZt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=nf(t.parameterExpression(e.$expr),e.$fields))}function $Zt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=qie(e.$key,e.$flat,t.expr.codegen))}function MZt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=zd(e.$field,e.$name,t.expr.codegen))}function LZt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Lt(e.$compare).map(i=>i&&i.$tupleid?mn:i);return t.fn[n]||(t.fn[n]=Vie(r,e.$order,t.expr.codegen))}function BZt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=nf(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function jZt(e,t){return t}function UZt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function zZt(){return mn}function VZt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&rt("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function HZt(e){var t=this,n=jt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||rt("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const qZt={skip:!0};function WZt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function GZt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],qZt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Vd).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function D7e(e,t,n,r){return new I7e(e,t,n,r)}function I7e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||kZt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Rwe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}I7e.prototype=Rwe.prototype={fork(){const e=new Rwe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),DZt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Tae(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:CZt,parseOperator:RZt,parseOperatorParameters:NZt,parseParameters:PZt,parseStream:VZt,parseUpdate:HZt,getState:WZt,setState:GZt};function YZt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),k7e(t,e.description()))}function k7e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function KZt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const gq="default";function XZt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:gq,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Bt(i)?i:i.user:gq,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Bt(r)||(i=r.item,r=r.user),qX(e,r&&r!==gq?r:i||r),i},{cursor:t})}function qX(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function hM(e,t){var n=e._runtime.data;return vn(n,t)||rt("Unrecognized data set: "+t),n[t]}function QZt(e,t){return arguments.length<2?hM(this,e).values.value:o7.call(this,e,rE().remove(Vd).insert(t))}function o7(e,t){XMe(t)||rt("Second argument to changes must be a changeset.");const n=hM(this,e);return n.modified=!0,this.pulse(n.input,t)}function JZt(e,t){return o7.call(this,e,rE().insert(t))}function ZZt(e,t){return o7.call(this,e,rE().remove(t))}function R7e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function N7e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function a7(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function een(e){var t=a7(e),n=R7e(e),r=N7e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function ten(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=a7(e),o=t.changedTouches?t.changedTouches[0]:t,s=J9(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=nen(e,n,s),t}function nen(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Bt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:sl(e),item:sl(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Nwe="view",ren="timer",ien="window",sen={trap:!1};function oen(e){const t=lr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{at(r[s])&&(r[s]=gp(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function P7e(e,t,n,r){e._eventListeners.push({type:n,sources:Lt(t),handler:r})}function aen(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function rO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||jt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function uen(e,t,n){var r=this,i=new N9(n),s=function(l,c){r.runAsync(null,()=>{e===Nwe&&aen(r,t)&&l.preventDefault(),i.receive(ten(r,l,c))})},o;if(e===ren)rO(r,"timer",t)&&r.timer(s,t);else if(e===Nwe)rO(r,"view",t)&&r.addEventListener(t,s,sen);else if(e===ien?rO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&rO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);P7e(r,o,t,s)}return i}function Pwe(e){return e.item}function Owe(e){return e.item.mark.source}function Fwe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function len(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Pwe),Owe,Fwe(e)),this.on(this.events("view","pointerout",Pwe),Owe,Fwe(t)),this}function cen(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Nf(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const fen="vega-bind",den="vega-bind-name",hen="vega-bind-radio";function pen(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Hie(r.debounce,i.update))),(r.input==null&&r.element?men:yen)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function men(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),P7e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(gen(i))}}function gen(e){return typeof Event<"u"?new Event(e):{type:e}}function yen(e,t,n,r){const i=r.signal(n.signal),s=Nf("div",{class:fen}),o=n.input==="radio"?s:s.appendChild(Nf("label"));o.appendChild(Nf("span",{class:den},n.name||n.signal)),t.appendChild(s);let a=ven;switch(n.input){case"checkbox":a=ben;break;case"select":a=xen;break;case"radio":a=wen;break;case"range":a=_en;break}a(e,o,n,i)}function ven(e,t,n,r){const i=Nf("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function ben(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Nf("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function xen(e,t,n,r){const i=Nf("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};pM(o,r)&&(u.selected=!0),i.appendChild(Nf("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(pM(n.options[a],o)){i.selectedIndex=a;return}}}function wen(e,t,n,r){const i=Nf("span",{class:hen}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};pM(o,r)&&(u.checked=!0);const l=Nf("input",u);l.addEventListener("change",()=>e.update(o));const c=Nf("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)pM(a[l].value,o)&&(a[l].checked=!0)}}function _en(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Pv(s,i,100),a=Nf("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Nf("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function pM(e,t){return e===t||e+""==t+""}function O7e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,R7e(e),N7e(e),a7(e),i,s).background(e.background())}function Aae(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Een(e,t,n,r){const i=new r(e.loader(),Aae(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,a7(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Cen(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Z9(r);e=n._el=e?yq(n,e,!0):null,YZt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||cP,a=e?s.renderer:s.headless;return n._renderer=a?O7e(n,n._renderer,e,a):null,n._handler=Een(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=yq(n,t,!0):e.appendChild(Nf("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=yq(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{pen(n,u.element||t,u)})),n}function yq(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const WD=e=>+e||0,Ten=e=>({top:e,bottom:e,left:e,right:e});function $we(e){return jt(e)?{top:WD(e.top),bottom:WD(e.bottom),left:WD(e.left),right:WD(e.right)}:Ten(WD(e))}async function Sae(e,t,n,r){const i=Z9(t),s=i&&i.headless;return s||rt("Unrecognized renderer type: "+t),await e.runAsync(),O7e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Aen(e,t){e!==G1.Canvas&&e!==G1.SVG&&e!==G1.PNG&&rt("Unrecognized image type: "+e);const n=await Sae(this,e,t);return e===G1.SVG?Sen(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Sen(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Den(e,t){return(await Sae(this,G1.Canvas,e,t)).canvas()}async function Ien(e){return(await Sae(this,G1.SVG,e)).svg()}function ken(e,t,n){return D7e(e,WT,CR,n).parse(t)}function Ren(e){var t=this._runtime.scales;return vn(t,e)||rt("Unrecognized scale or projection: "+e),t[e].value}var F7e="width",$7e="height",Dae="padding",Mwe={skip:!0};function M7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Dae?r.left+r.right:0)}function L7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Dae?r.top+r.bottom:0)}function Nen(e){var t=e._signals,n=t[F7e],r=t[$7e],i=t[Dae];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=M7e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=L7e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Pen(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(F7e,n,Mwe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal($7e,r,Mwe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Oen(e){return this._runtime.getState(e||{data:Fen,signals:$en,recurse:!0})}function Fen(e,t){return t.modified&&at(t.input.value)&&!e.startsWith("_:vega:_")}function $en(e,t){return!(e==="parent"||t instanceof WT.proxy)}function Men(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Len(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(gTt(n,t))}function Ben(e,t,n,r){const i=e.element();i&&i.setAttribute("title",jen(r))}function jen(e){return e==null?"":at(e)?B7e(e):jt(e)&&!mv(e)?Uen(e):e+""}function Uen(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(at(n)?B7e(n):j7e(n))}).join(`
`)}function B7e(e){return"["+e.map(j7e).join(", ")+"]"}function j7e(e){return at(e)?"[]":jt(e)&&!mv(e)?"{}":e}function zen(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function U7e(e,t){const n=this;if(t=t||{},LC.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=lr({},e.locale,t.locale);n.locale(jMe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||G1.Canvas,n._scenegraph=new OBe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Ben,n._redraw=!0,n._handler=new cP().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=oen(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=ken(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:lr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=M7e(n,n._width),n._viewHeight=L7e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Nen(n),KZt(n),XZt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function iO(e,t){return vn(e._signals,t)?e._signals[t]:rt("Unrecognized signal name: "+Nt(t))}function z7e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Lwe(e,t,n,r){let i=z7e(n,r);return i||(i=Aae(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Bwe(e,t,n){const r=z7e(t,n);return r&&t._targets.remove(r),e}Ot(U7e,LC,{async evaluate(e,t,n){if(await LC.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,een(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&DF(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&k7e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=iO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",$we(e)):$we(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Z9(e)||rt("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(LC.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(iO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Pen,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Aae(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Lwe(this,e,iO(this,e),t)},removeSignalListener(e,t){return Bwe(this,iO(this,e),t)},addDataListener(e,t){return Lwe(this,e,hM(this,e).values,t)},removeDataListener(e,t){return Bwe(this,hM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=qX(this,null);this._globalCursor=!!e,t&&qX(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Len,events:uen,finalize:cen,hover:len,data:QZt,change:o7,insert:JZt,remove:ZZt,scale:Ren,initialize:Cen,toImageURL:Aen,toCanvas:Den,toSVG:Ien,getState:Oen,setState:Men,_watchPixelRatio:zen});const Ven="view",mM="[",gM="]",V7e="{",H7e="}",Hen=":",q7e=",",qen="@",Wen=">",Gen=/[[\]{}]/,Yen={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let W7e,G7e;function zb(e,t,n){return W7e=t||Ven,G7e=n||Yen,Y7e(e.trim()).map(WX)}function Ken(e){return G7e[e]}function Lk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Y7e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Lk(e,i,q7e,mM+V7e,gM+H7e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function WX(e){return e[0]==="["?Xen(e):Qen(e)}function Xen(e){const t=e.length;let n=1,r;if(n=Lk(e,n,gM,mM,gM),n===t)throw"Empty between selector: "+e;if(r=Y7e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Wen)throw"Expected '>' after between selector: "+e;r=r.map(WX);const i=WX(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Qen(e){const t={source:W7e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===H7e){if(a=e.lastIndexOf(V7e),a>=0){try{r=Jen(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===qen&&(i=++a),u=Lk(e,a,Hen),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Lk(e,a,mM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Lk(e,a,gM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==mM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Gen.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Ken(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Jen(e){const t=e.split(q7e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Zen(e){return jt(e)?e:{type:e||"pad"}}const GD=e=>+e||0,etn=e=>({top:e,bottom:e,left:e,right:e});function ttn(e){return jt(e)?e.signal?e:{top:GD(e.top),bottom:GD(e.bottom),left:GD(e.left),right:GD(e.right)}:etn(GD(e))}const $a=e=>jt(e)&&!at(e)?lr({},e):{value:e};function jwe(e,t,n,r){return n!=null?(jt(n)&&!at(n)||at(n)&&n.length&&jt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function mu(e,t,n){for(const r in t)jwe(e,r,t[r]);for(const r in n)jwe(e,r,n[r],"update")}function TS(e,t,n){for(const r in t)n&&vn(n,r)||(e[r]=lr(e[r]||{},t[r]));return e}function k2(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Iae="mark",kae="frame",Rae="scope",ntn="axis",rtn="axis-domain",itn="axis-grid",stn="axis-label",otn="axis-tick",atn="axis-title",utn="legend",ltn="legend-band",ctn="legend-entry",ftn="legend-gradient",K7e="legend-label",dtn="legend-symbol",htn="legend-title",ptn="title",mtn="title-text",gtn="title-subtitle";function ytn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!k2(u,e)&&vq(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===kae?i.group:n===Iae?lr({},i.mark,i[t]):null;for(u in c)l=k2(u,e)||(u==="fill"||u==="stroke")&&(k2("fill",e)||k2("stroke",e)),l||vq(s,u,c[u]);Lt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)k2(h,e)||vq(s,h,d[h])}),e=lr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=lr(o,e.enter),a&&(e.update=lr(a,e.update)),e}function vq(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const X7e=e=>Bt(e)?Nt(e):e.signal?`(${e.signal})`:Q7e(e);function u7(e){if(e.gradient!=null)return btn(e);let t=e.signal?`(${e.signal})`:e.color?vtn(e.color):e.field!=null?Q7e(e.field):e.value!==void 0?Nt(e.value):void 0;return e.scale!=null&&(t=xtn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${zF(e.exponent)})`),e.mult!=null&&(t+=`*${zF(e.mult)}`),e.offset!=null&&(t+=`+${zF(e.offset)}`),e.round&&(t=`round(${t})`),t}const sO=(e,t,n,r)=>`(${e}(${[t,n,r].map(u7).join(",")})+'')`;function vtn(e){return e.c?sO("hcl",e.h,e.c,e.l):e.h||e.s?sO("hsl",e.h,e.s,e.l):e.l||e.a?sO("lab",e.l,e.a,e.b):e.r||e.g||e.b?sO("rgb",e.r,e.g,e.b):null}function btn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Nt(n));for(;t.length&&Xr(t)==null;)t.pop();return t.unshift(X7e(e.gradient)),`gradient(${t.join(",")})`}function zF(e){return jt(e)?"("+u7(e)+")":e}function Q7e(e){return J7e(jt(e)?e:{datum:e})}function J7e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):rt("Invalid field reference: "+Nt(e));return e.signal||(r=Bt(r)?ym(r).map(Nt).join("]["):J7e(r)),t+"["+r+"]"}function xtn(e,t){const n=X7e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+zF(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function wtn(e){let t="";return e.forEach(n=>{const r=u7(n);t+=n.test?`(${n.test})?${r}:`:r}),Xr(t)===":"&&(t+="null"),t}function Z7e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=ytn(e,t,n,r,i.config);for(const a in e)o[a]=_tn(e[a],t,s,i);return s}function _tn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Ctn(Etn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Etn(e){return at(e)?wtn(e):u7(e)}function Ctn(e,t,n,r){const i=nm(e,t);return i.$fields.forEach(s=>r[s]=1),lr(n,i.$params),i.$expr}const Ttn="outer",Atn=["value","update","init","react","bind"];function Uwe(e,t){rt(e+' for "outer" push: '+Nt(t))}function eje(e,t){const n=e.name;if(e.push===Ttn)t.signals[n]||Uwe("No prior signal definition",n),Atn.forEach(r=>{e[r]!==void 0&&Uwe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function GX(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function l7(e,t,n,r){return new GX(e,t,n,r)}function yM(e,t){return l7("operator",e,t)}function pn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function TR(e,t){return t?{$field:e,$name:t}:{$field:e}}const YX=TR("key");function zwe(e,t){return{$compare:e,$order:t}}function Stn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Dtn="ascending",Itn="descending";function ktn(e){return jt(e)?(e.order===Itn?"-":"+")+c7(e.op,e.field):""}function c7(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Nae="scope",KX="view";function ha(e){return e&&e.signal}function Rtn(e){return e&&e.expr}function VF(e){if(ha(e))return!0;if(jt(e)){for(const t in e)if(VF(e[t]))return!0}return!1}function Ph(e,t){return e??t}function Pw(e){return e&&e.signal||e}const Vwe="timer";function AR(e,t){return(e.merge?Ptn:e.stream?Otn:e.type?Ftn:rt("Invalid stream specification: "+Nt(e)))(e,t)}function Ntn(e){return e===Nae?KX:e||KX}function Ptn(e,t){const n=e.merge.map(i=>AR(i,t)),r=Pae({merge:n},e,t);return t.addStream(r).id}function Otn(e,t){const n=AR(e.stream,t),r=Pae({stream:n},e,t);return t.addStream(r).id}function Ftn(e,t){let n;e.type===Vwe?(n=t.event(Vwe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Ntn(e.source),e.type);const r=Pae({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Pae(e,t,n){let r=t.between;return r&&(r.length!==2&&rt('Stream "between" parameter must have 2 entries: '+Nt(t)),e.between=[AR(r[0],n),AR(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push($tn(t.marktype,t.markname,t.markrole)),t.source===Nae&&r.push("inScope(event.item)"),r.length&&(e.filter=nm("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function $tn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Mtn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Ltn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||rt("Signal update missing events specification."),Bt(s)&&(s=zb(s,t.isSubscope()?Nae:KX)),s=Lt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[jtn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&rt("Signal encode and update are mutually exclusive."),o="encode(item(),"+Nt(r)+")"),i.update=Bt(o)?nm(o,t):o.expr!=null?nm(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Mtn,$params:{$value:t.signalRef(o.signal)}}:rt("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(lr(Btn(u,t),i)))}function Btn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):AR(e,t)}}function jtn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Utn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?rt("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=nm(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Ltn(i,t,n.id))}const ts=e=>(t,n,r)=>l7(e,n,t||void 0,r),tje=ts("aggregate"),ztn=ts("axisticks"),nje=ts("bound"),Rp=ts("collect"),Hwe=ts("compare"),Vtn=ts("datajoin"),rje=ts("encode"),Htn=ts("expression"),qtn=ts("facet"),Wtn=ts("field"),Gtn=ts("key"),Ytn=ts("legendentries"),Ktn=ts("load"),Xtn=ts("mark"),Qtn=ts("multiextent"),Jtn=ts("multivalues"),Ztn=ts("overlap"),enn=ts("params"),ije=ts("prefacet"),tnn=ts("projection"),nnn=ts("proxy"),rnn=ts("relay"),sje=ts("render"),inn=ts("scale"),oE=ts("sieve"),snn=ts("sortitems"),oje=ts("viewlayout"),onn=ts("values");let ann=0;const aje={min:"min",max:"max",count:"sum"};function unn(e,t){const n=e.type||"linear";WLe(n)||rt("Unrecognized scale type: "+Nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function lnn(e,t){const n=t.getScale(e.name).params;let r;n.domain=uje(e.domain,e,t),e.range!=null&&(n.range=cje(e,t,n)),e.interpolate!=null&&bnn(e.interpolate,n),e.nice!=null&&(n.nice=vnn(e.nice,t)),e.bins!=null&&(n.bins=ynn(e.bins,t));for(r in e)vn(n,r)||r==="name"||(n[r]=Nd(e[r],t))}function Nd(e,t){return jt(e)?e.signal?t.signalRef(e.signal):rt("Unsupported object: "+Nt(e)):e}function HF(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Nd(n,t))}function f7(e){rt("Can not find data set: "+Nt(e))}function uje(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&rt("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(at(e)?cnn:e.fields?dnn:fnn)(e,t,n)}function cnn(e,t,n){return e.map(r=>Nd(r,n))}function fnn(e,t,n){const r=n.getData(e.data);return r||f7(e.data),KT(t.type)?r.valuesRef(n,e.field,lje(e.sort,!1)):KLe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function dnn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Bt(o)?{data:r,field:o}:at(o)||o.signal?hnn(o,n):o,s.push(o),s),[]);return(KT(t.type)?pnn:KLe(t.type)?mnn:gnn)(e,n,i)}function hnn(e,t){const n="_:vega:_"+ann++,r=Rp({});if(at(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,oE({})]),{data:n,field:"data"}}function pnn(e,t,n){const r=lje(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||f7(l.data),c.countsRef(t,l.field,r)}),a={groupby:YX,pulse:o};r&&(i=r.op||"count",s=r.field?c7(i,r.field):"count",a.ops=[aje[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(tje(a));const u=t.add(Rp({pulse:pn(i)}));return s=t.add(onn({field:YX,sort:t.sortRef(r),pulse:pn(u)})),pn(s)}function lje(e,t){return e&&(!e.field&&!e.op?jt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?rt("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!aje[e.op]&&rt("Multiple domain scales can not be sorted using "+e.op)),e}function mnn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||f7(i.data),s.domainRef(t,i.field)});return pn(t.add(Jtn({values:r})))}function gnn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||f7(i.data),s.extentRef(t,i.field)});return pn(t.add(Qtn({extents:r})))}function ynn(e,t){return e.signal||at(e)?HF(e,t):t.objectProperty(e)}function vnn(e,t){return e.signal?t.signalRef(e.signal):jt(e)?{interval:Nd(e.interval),step:Nd(e.step)}:Nd(e)}function bnn(e,t){t.interpolate=Nd(e.type||e),e.gamma!=null&&(t.interpolateGamma=Nd(e.gamma))}function cje(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Bt(i)){if(r&&vn(r,i))return e=lr({},e,{range:r[i]}),cje(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=KT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:rt("Unrecognized scale range value: "+Nt(i))}else if(i.scheme){n.scheme=at(i.scheme)?HF(i.scheme,t):Nd(i.scheme,t),i.extent&&(n.schemeExtent=HF(i.extent,t)),i.count&&(n.schemeCount=Nd(i.count,t));return}else if(i.step){n.rangeStep=Nd(i.step,t);return}else{if(KT(e.type)&&!at(i))return uje(i,e,t);at(i)||rt("Unsupported range type: "+Nt(i))}return i.map(s=>(at(s)?HF:Nd)(s,t))}function xnn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=XX(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=XX(n[i],i,t));t.addProjection(e.name,r)}function XX(e,t,n){return at(e)?e.map(r=>XX(r,t,n)):jt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:rt("Unsupported parameter object: "+Nt(e)):e}const Np="top",AS="left",SS="right",tb="bottom",fje="center",wnn="vertical",_nn="start",Enn="middle",Cnn="end",QX="index",Oae="label",Tnn="offset",eA="perc",Ann="perc2",Fd="value",mP="guide-label",Fae="guide-title",Snn="group-title",Dnn="group-subtitle",qwe="symbol",qF="gradient",JX="discrete",ZX="size",Inn="shape",knn="fill",Rnn="stroke",Nnn="strokeWidth",Pnn="strokeDash",Onn="opacity",$ae=[ZX,Inn,knn,Rnn,Nnn,Pnn,Onn],gP={name:1,style:1,interactive:1},ti={value:0},$d={value:1},d7="group",dje="rect",Mae="rule",Fnn="symbol",aE="text";function SR(e){return e.type=d7,e.interactive=e.interactive||!1,e}function rf(e,t){const n=(r,i)=>Ph(e[r],Ph(t[r],i));return n.isVertical=r=>wnn===Ph(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ph(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ph(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ph(e.columns,Ph(t.columns,+n.isVertical(!0))),n}function hje(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function $nn(e,t,n){const r=t.config.style[n];return r&&r[e]}function h7(e,t,n){return`item.anchor === '${_nn}' ? ${e} : item.anchor === '${Cnn}' ? ${t} : ${n}`}const Lae=h7(Nt(AS),Nt(SS),Nt(fje));function Mnn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},jt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function pje(e,t){return t?e?jt(e)?Object.assign({},e,{offset:pje(e.offset,t)}):{value:e,offset:t}:t:e}function Yf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=TS(e.encode,t,gP)):e.interactive=!1,e}function Lnn(e,t,n,r){const i=rf(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:ti,x:ti,y:ti,width:$a(f),height:$a(d)},update:lr({},u,{opacity:$d,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ti}};return mu(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Yf({type:dje,role:ftn,encode:h},r)}function Bnn(e,t,n,r,i){const s=rf(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:ti,fill:{scale:t,field:Fd}};p[l]={signal:h+"datum."+eA,mult:u},p[c]=ti,p[f]={signal:h+"datum."+Ann,mult:u},p[d]=$a(a);const m={enter:p,update:lr({},p,{opacity:$d}),exit:{opacity:ti}};return mu(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Yf({type:dje,role:ltn,key:Fd,from:i,encode:m},r)}const jnn=`datum.${eA}<=0?"${AS}":datum.${eA}>=1?"${SS}":"${fje}"`,Unn=`datum.${eA}<=0?"${tb}":datum.${eA}>=1?"${Np}":"${Enn}"`;function Wwe(e,t,n,r){const i=rf(e,t),s=i.isVertical(),o=$a(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:ti},update:c={opacity:$d,text:{field:Oae}},exit:{opacity:ti}};return mu(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ph(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:Unn},f="y",d="x",h="1-"):(l.align=c.align={signal:jnn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+eA,mult:a},l[d]=c[d]=o,o.offset=Ph(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+QX}:void 0,Yf({type:aE,role:K7e,style:mP,key:Fd,from:r,encode:p,overlap:u},n)}function znn(e,t,n,r,i){const s=rf(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Tnn} : datum.${ZX}`,h=l?$a(l):{field:ZX},p=`datum.${QX}`,m=`max(1, ${i})`;let g,y,v,b,x;h.mult=.5,g={enter:y={opacity:ti,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:$d,x:y.x,y:y.y},exit:{opacity:ti}};let _=null,C=null;e.fill||(_=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),mu(g,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),$ae.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:Fd})});const T=Yf({type:Fnn,role:dtn,key:Fd,from:f,clip:l?!0:void 0,encode:g},n.symbols),S=$a(c);S.offset=s("labelOffset"),g={enter:y={opacity:ti,x:{signal:d,offset:S},y:h},update:v={opacity:$d,text:{field:Oae},x:y.x,y:y.y},exit:{opacity:ti}},mu(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const k=Yf({type:aE,role:K7e,style:mP,key:Fd,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:ti,height:l?$a(l):ti,opacity:ti},exit:{opacity:ti},update:v={opacity:$d,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,x={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:QX}},SR({role:Rae,from:r,encode:TS(g,o,gP),marks:[T,k],name:u,interactive:a,sort:x})}function Vnn(e,t){const n=rf(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Bae='item.orient === "left"',jae='item.orient === "right"',p7=`(${Bae} || ${jae})`,Hnn=`datum.vgrad && ${p7}`,qnn=h7('"top"','"bottom"','"middle"'),Wnn=h7('"right"','"left"','"center"'),Gnn=`datum.vgrad && ${jae} ? (${Wnn}) : (${p7} && !(datum.vgrad && ${Bae})) ? "left" : ${Lae}`,Ynn=`item._anchor || (${p7} ? "middle" : "start")`,Knn=`${Hnn} ? (${Bae} ? -90 : 90) : 0`,Xnn=`${p7} ? (datum.vgrad ? (${jae} ? "bottom" : "top") : ${qnn}) : "top"`;function Qnn(e,t,n,r){const i=rf(e,t),s={enter:{opacity:ti},update:{opacity:$d,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ti}};return mu(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Ynn},angle:{signal:Knn},align:{signal:Gnn},baseline:{signal:Xnn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Yf({type:aE,role:htn,style:Fae,from:r,encode:s},n)}function Jnn(e,t){let n;return jt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Gwe(e.path)+")":e.sphere&&(n="geoShape("+Gwe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Gwe(e){return jt(e)&&e.signal?e.signal:Nt(e)}function mje(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===d7?Rae:t||Iae}function Znn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||mje(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function ern(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Uae(e,t){const n=ZMe(e.type);n||rt("Unrecognized transform type: "+Nt(e.type));const r=l7(n.type.toLowerCase(),null,gje(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function gje(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=trn(o,t,n)}return r}function trn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return nrn(e,t,n);if(i===void 0){e.required&&rt("Missing required "+Nt(t.type)+" parameter: "+Nt(e.name));return}else{if(r==="param")return rrn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ha(i)?i.map(s=>Ywe(e,s,n)):Ywe(e,i,n)}function Ywe(e,t,n){const r=e.type;if(ha(t))return Xwe(r)?rt("Expression references can not be signals."):bq(r)?n.fieldRef(t):Qwe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||bq(r);return i&&irn(t)?n.exprRef(t.expr,t.as):i&&srn(t)?TR(t.field,t.as):Xwe(r)?nm(t,n):orn(r)?pn(n.getData(t).values):bq(r)?TR(t):Qwe(r)?n.compareRef(t):t}}function nrn(e,t,n){return Bt(t.from)||rt('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function rrn(e,t,n){const r=t[e.name];return e.array?(at(r)||rt("Expected an array of sub-parameters. Instead: "+Nt(r)),r.map(i=>Kwe(e,i,n))):Kwe(e,r,n)}function Kwe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||rt("Unsupported parameter: "+Nt(t));const s=lr(gje(i,t,n),i.key);return pn(n.add(enn(s)))}const irn=e=>e&&e.expr,srn=e=>e&&e.field,orn=e=>e==="data",Xwe=e=>e==="expr",bq=e=>e==="field",Qwe=e=>e==="compare";function arn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||rt("Only group marks can be faceted."),r.field!=null?o=a=WF(r,n):(e.data?a=pn(n.getData(e.data).aggregate):(s=Uae(lr({type:"aggregate",groupby:Lt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=WF(r,n),o=a=pn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=pn(n.add(Rp(null,[{}]))),o||(o=WF(e,n)),{key:i,pulse:o,parent:a}}function WF(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:pn(t.getData(e.data).output)}function c_(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}c_.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=pn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new c_(e,s,i,r,o)};function yje(e){return Bt(e)?e:null}function Jwe(e,t,n){const r=c7(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function YD(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=ktn(s);let l=yje(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:YX,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:pn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(l7(r,void 0,d)),o&&(t.index[i]=f),c=pn(f),l!=null&&(a[l]=c)}return c}c_.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=yje(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Jwe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:pn(r.output)},n&&n.field&&Jwe(e,u,n),a=e.add(tje(u)),o=e.add(Rp({pulse:pn(a)})),o={agg:a,ref:pn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return pn(this.values)},extentRef(e,t){return YD(e,this,"extent","extent",t,!1)},domainRef(e,t){return YD(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return YD(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return YD(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return YD(e,this,"indata","tupleindex",t,!0,!0)}};function urn(e,t,n){const r=e.from.facet,i=r.name,s=WF(r,t);let o;r.name||rt("Facet must have a name: "+Nt(r)),r.data||rt("Facet must reference a data set: "+Nt(r)),r.field?o=t.add(ije({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(qtn({key:t.keyRef(r.groupby),group:pn(t.proxy(n.parent)),pulse:s})):rt("Facet must specify groupby or field: "+Nt(r));const a=t.fork(),u=a.add(Rp()),l=a.add(oE({pulse:pn(u)}));a.addData(i,new c_(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function lrn(e,t,n){const r=t.add(ije({pulse:n.pulse})),i=t.fork();i.add(oE()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function vje(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(yM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=nm(l,t);u.update=c.$expr,u.params=c.$params}function m7(e,t){const n=mje(e),r=e.type===d7,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Rae||n===kae,a,u,l,c,f,d,h;const p=n===Iae||o||i,m=arn(e.from,r,t);u=t.add(Vtn({key:m.key||(e.key?TR(e.key):void 0),pulse:m.pulse,clean:!r}));const g=pn(u);u=l=t.add(Rp({pulse:g})),u=t.add(Xtn({markdef:Znn(e),interactive:ern(e.interactive,t),clip:Jnn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:pn(u)}));const y=pn(u);u=c=t.add(rje(Z7e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const T=Uae(C,t),S=T.metadata;(S.generates||S.changes)&&rt("Mark transforms should not generate new data."),S.nomod||(c.params.mod=!0),T.params.pulse=pn(u),t.add(u=T)}),e.sort&&(u=t.add(snn({sort:t.compareRef(e.sort),pulse:pn(u)})));const v=pn(u);(i||o)&&(o=t.add(oje({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=pn(o));const b=t.add(nje({mark:y,pulse:d||v}));h=pn(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?urn(e,t,m):p?lrn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=crn(s,h,t));const x=t.add(sje({pulse:h})),_=t.add(oE({pulse:pn(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new c_(t,l,x,_)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&rt("Marks only support modify triggers."),vje(C,t,f)}))}function crn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:ha(s)?n.signalRef(s.signal):s,method:ha(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=ha(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return pn(n.add(Ztn(o)))}function frn(e,t){const n=t.config.legend,r=e.encode||{},i=rf(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;$ae.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||rt("Missing valid scale for legend.");const p=drn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=pn(t.add(Rp(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=pn(t.add(Ytn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===qF?(h=[Lnn(e,c,n,r.gradient),Wwe(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Pw(i.gradientLength())})/100))`)):p===JX?h=[Bnn(e,c,n,r.gradient,v),Wwe(e,n,r.labels,v)]:(f=Vnn(e,n),h=[znn(e,n,r,v,Pw(f.columns))],d.size=mrn(e,t,h[0].marks)),h=[SR({role:ctn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(Qnn(e,n,r.title,g)),m7(SR({role:utn,from:g,encode:TS(prn(i,e,n),s,gP),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function drn(e,t){let n=e.type||qwe;return!e.type&&hrn(e)===1&&(e.fill||e.stroke)&&(n=Jse(t)?qF:pX(t)?JX:qwe),n!==qF?n:pX(t)?JX:qF}function hrn(e){return $ae.reduce((t,n)=>t+(e[n]?1:0),0)}function prn(e,t,n){const r={enter:{},update:{}};return mu(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function mrn(e,t,n){const r=Pw(Zwe("size",e,n)),i=Pw(Zwe("strokeWidth",e,n)),s=Pw(grn(n[1].encode,t,mP));return nm(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Zwe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:hje(e,n[0].encode)}function grn(e,t,n){return hje("fontSize",e)||$nn("fontSize",t,n)}const yrn=`item.orient==="${AS}"?-90:item.orient==="${SS}"?90:0`;function vrn(e,t){e=Bt(e)?{text:e}:e;const n=rf(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=pn(t.add(Rp(null,[l])));return u.push(wrn(e,n,brn(e),c)),e.subtitle&&u.push(_rn(e,n,r.subtitle,c)),m7(SR({role:ptn,from:c,encode:xrn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function brn(e){const t=e.encode;return t&&t.title||lr({name:e.name,interactive:e.interactive,style:e.style},t)}function xrn(e,t){const n={enter:{},update:{}};return mu(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Lae},angle:{signal:yrn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),TS(n,t,gP)}function wrn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return mu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Yf({type:aE,role:mtn,style:Snn,from:r,encode:o},n)}function _rn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return mu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Yf({type:aE,role:gtn,style:Dnn,from:r,encode:o},n)}function Ern(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Uae(r,t))}),e.on&&e.on.forEach(r=>{vje(r,t,e.name)}),t.addDataPipeline(e.name,Crn(e,t,n))}function Crn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?ha(e.values)||VF(e.format)?(r.push(e_e(t,e)),r.push(i=gx())):r.push(i=gx({$ingest:e.values,$format:e.format})):e.url?VF(e.url)||VF(e.format)?(r.push(e_e(t,e)),r.push(i=gx())):r.push(i=gx({$request:e.url,$format:e.format})):e.source&&(i=a=Lt(e.source).map(d=>pn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=gx()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=rnn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,gx())),i||r.push(gx()),r.push(oE({})),r}function gx(e){const t=Rp({},e);return t.metadata={source:!0},t}function e_e(e,t){return Ktn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const bje=e=>e===tb||e===Np,g7=(e,t,n)=>ha(e)?Drn(e.signal,t,n):e===AS||e===Np?t:n,Ma=(e,t,n)=>ha(e)?Arn(e.signal,t,n):bje(e)?t:n,sp=(e,t,n)=>ha(e)?Srn(e.signal,t,n):bje(e)?n:t,xje=(e,t,n)=>ha(e)?Irn(e.signal,t,n):e===Np?{value:t}:{value:n},Trn=(e,t,n)=>ha(e)?krn(e.signal,t,n):e===SS?{value:t}:{value:n},Arn=(e,t,n)=>wje(`${e} === '${Np}' || ${e} === '${tb}'`,t,n),Srn=(e,t,n)=>wje(`${e} !== '${Np}' && ${e} !== '${tb}'`,t,n),Drn=(e,t,n)=>zae(`${e} === '${AS}' || ${e} === '${Np}'`,t,n),Irn=(e,t,n)=>zae(`${e} === '${Np}'`,t,n),krn=(e,t,n)=>zae(`${e} === '${SS}'`,t,n),wje=(e,t,n)=>(t=t!=null?$a(t):t,n=n!=null?$a(n):n,t_e(t)&&t_e(n)?(t=t?t.signal||Nt(t.value):null,n=n?n.signal||Nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[lr({test:e},t)].concat(n||[])),t_e=e=>e==null||Object.keys(e).length===1,zae=(e,t,n)=>({signal:`${e} ? (${oC(t)}) : (${oC(n)})`}),Rrn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${AS}' ? (${oC(r)}) : `:"")+(n!=null?`${e} === '${tb}' ? (${oC(n)}) : `:"")+(i!=null?`${e} === '${SS}' ? (${oC(i)}) : `:"")+(t!=null?`${e} === '${Np}' ? (${oC(t)}) : `:"")+"(null)"}),oC=e=>ha(e)?e.signal:e==null?null:Nt(e),Nrn=(e,t)=>t===0?0:ha(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},BC=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function f2(e,t,n,r){let i;if(t&&vn(t,e))return t[e];if(vn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Fae][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[mP][i]}return null}function n_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Prn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(ha(o)){const f=n_e([n.axisX,n.axisY]),d=n_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Ma(o,f2(l,n.axisX,i,r),f2(l,n.axisY,i,r));u={};for(l of d)u[l]=Rrn(o.signal,f2(l,n.axisTop,i,r),f2(l,n.axisBottom,i,r),f2(l,n.axisLeft,i,r),f2(l,n.axisRight,i,r))}else a=o===Np||o===tb?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?lr({},i,a,u,s):i}function Orn(e,t,n,r){const i=rf(e,t),s=e.orient;let o,a;const u={enter:o={opacity:ti},update:a={opacity:$d},exit:{opacity:ti}};mu(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=r_e(e,0),c=r_e(e,1);return o.x=a.x=Ma(s,l,ti),o.x2=a.x2=Ma(s,c),o.y=a.y=sp(s,l,ti),o.y2=a.y2=sp(s,c),Yf({type:Mae,role:rtn,from:r,encode:u},n)}function r_e(e,t){return{scale:e.scale,range:t}}function Frn(e,t,n,r,i){const s=rf(e,t),o=e.orient,a=e.gridScale,u=g7(o,1,-1),l=$rn(e.offset,u);let c,f,d;const h={enter:c={opacity:ti},update:d={opacity:$d},exit:f={opacity:ti}};mu(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Fd,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Ma(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:lr(m,{mult:u,offset:l});return c.x=d.x=Ma(o,p,g),c.y=d.y=sp(o,p,g),c.x2=d.x2=sp(o,y),c.y2=d.y2=Ma(o,y),f.x=Ma(o,p),f.y=sp(o,p),Yf({type:Mae,role:itn,key:Fd,from:r,encode:h},n)}function $rn(e,t){if(t!==1)if(!jt(e))e=ha(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=lr({},e);for(;n.mult!=null;)if(jt(n.mult))n=n.mult=lr({},n.mult);else return n.mult=ha(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Mrn(e,t,n,r,i,s){const o=rf(e,t),a=e.orient,u=g7(a,-1,1);let l,c,f;const d={enter:l={opacity:ti},update:f={opacity:$d},exit:c={opacity:ti}};mu(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=$a(i);h.mult=u;const p={scale:e.scale,field:Fd,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Ma(a,ti,p),f.y2=l.y2=Ma(a,h),c.x=Ma(a,p),f.x=l.x=sp(a,ti,p),f.x2=l.x2=sp(a,h),c.y=sp(a,p),Yf({type:Mae,role:otn,key:Fd,from:r,encode:d},n)}function xq(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Lrn(e,t,n,r,i,s){const o=rf(e,t),a=e.orient,u=e.scale,l=g7(a,-1,1),c=Pw(o("labelFlush")),f=Pw(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=$a(i);g.mult=l,g.offset=$a(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Fd,band:.5,offset:pje(s.offset,o("labelOffset"))},v=Ma(a,p?xq(u,c,'"left"','"right"','"center"'):{value:"center"},Trn(a,"left","right")),b=Ma(a,xje(a,"bottom","top"),p?xq(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=xq(u,c,`-(${f})`,f,0);p=p&&f;const _={opacity:ti,x:Ma(a,y,g),y:sp(a,y,g)},C={enter:_,update:m={opacity:$d,text:{field:Oae},x:_.x,y:_.y,align:v,baseline:b},exit:{opacity:ti,x:_.x,y:_.y}};mu(C,{dx:!d&&p?Ma(a,x):null,dy:!h&&p?sp(a,x):null}),mu(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let S=o("labelOverlap");return S=S||T?{separation:o("labelSeparation"),method:S,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=BC(m.align,v)),m.baseline!==b&&(m.baseline=BC(m.baseline,b)),Yf({type:aE,role:stn,style:mP,key:Fd,from:r,encode:C,overlap:S},n)}function Brn(e,t,n,r){const i=rf(e,t),s=e.orient,o=g7(s,-1,1);let a,u;const l={enter:a={opacity:ti,anchor:$a(i("titleAnchor",null)),align:{signal:Lae}},update:u=lr({},a,{opacity:$d,text:$a(e.title)}),exit:{opacity:ti}},c={signal:`lerp(range("${e.scale}"), ${h7(0,1,.5)})`};return u.x=Ma(s,c),u.y=sp(s,c),a.angle=Ma(s,ti,Nrn(o,90)),a.baseline=Ma(s,xje(s,tb,Np),{value:tb}),u.angle=a.angle,u.baseline=a.baseline,mu(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),jrn(i,s,l,n),l.update.align=BC(l.update.align,a.align),l.update.angle=BC(l.update.angle,a.angle),l.update.baseline=BC(l.update.baseline,a.baseline),Yf({type:aE,role:atn,style:Fae,from:r,encode:l},n)}function jrn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=BC($a(a),n.update[u]),!1):!k2(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?$a(o):Ma(t,$a(o),$a(s))}function Urn(e,t){const n=Prn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=rf(e,n),l=Mnn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=pn(t.add(Rp({},[c]))),d=pn(t.add(ztn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Frn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Mrn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Lrn(e,n,r.labels,d,p,l))),c.domain&&h.push(Orn(e,n,r.domain,f)),c.title&&h.push(Brn(e,n,r.title,f)),m7(SR({role:ntn,from:f,encode:TS(zrn(u,e),i,gP),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function zrn(e,t){const n={enter:{},update:{}};return mu(n,{orient:e("orient"),offset:e("offset")||0,position:Ph(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function _je(e,t,n){const r=Lt(e.signals),i=Lt(e.scales);return n||r.forEach(s=>eje(s,t)),Lt(e.projections).forEach(s=>xnn(s,t)),i.forEach(s=>unn(s,t)),Lt(e.data).forEach(s=>Ern(s,t)),i.forEach(s=>lnn(s,t)),(n||r).forEach(s=>Utn(s,t)),Lt(e.axes).forEach(s=>Urn(s,t)),Lt(e.marks).forEach(s=>m7(s,t)),Lt(e.legends).forEach(s=>frn(s,t)),e.title&&vrn(e.title,t),t.parseLambdas(),t}const Vrn=e=>TS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Hrn(e,t){const n=t.config,r=pn(t.root=t.add(yM())),i=qrn(e,n);i.forEach(l=>eje(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Rp()),o=t.add(rje(Z7e(Vrn(e.encode),d7,kae,e.style,t,{pulse:pn(s)}))),a=t.add(oje({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:pn(o)}));t.operators.pop(),t.pushState(pn(o),pn(a),null),_je(e,t,i),t.operators.push(a);let u=t.add(nje({mark:r,pulse:pn(a)}));return u=t.add(sje({pulse:pn(u)})),u=t.add(oE({pulse:pn(u)})),t.addData("root",new c_(t,s,s,u)),t}function KD(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function qrn(e,t){const n=o=>Ph(e[o],t[o]),r=[KD("background",n("background")),KD("autosize",Zen(n("autosize"))),KD("padding",ttn(n("padding"))),KD("width",n("width")||0),KD("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Lt(e.signals).forEach(o=>{vn(i,o.name)?o=lr(i[o.name],o):r.push(o),s[o.name]=o}),Lt(t.signals).forEach(o=>{!vn(s,o.name)&&!vn(i,o.name)&&r.push(o)}),r}function Eje(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function i_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Eje.prototype=i_e.prototype={parse(e){return _je(e,this)},fork(){return new i_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof GX?pn(e):e;return this.add(nnn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(pn(this.add(oE({pulse:e})))),this._parent.push(t),this._lookup.push(n?pn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Xr(this._parent)},encode(){return Xr(this._encode)},lookup(){return Xr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Bt(e))return TR(e,t);e.signal||rt("Unsupported field reference: "+Nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=pn(this.add(Wtn(i)))}return r},compareRef(e){let t=!1;const n=s=>ha(s)?(t=!0,this.signalRef(s.signal)):Rtn(s)?(t=!0,this.exprRef(s.expr)):s,r=Lt(e.field).map(n),i=Lt(e.order).map(n);return t?pn(this.add(Hwe({fields:r,orders:i}))):zwe(r,i)},keyRef(e,t){let n=!1;const r=s=>ha(s)?(n=!0,pn(i[s.signal])):s,i=this.signals;return e=Lt(e).map(r),n?pn(this.add(Gtn({fields:e,flat:t}))):Stn(e,t)},sortRef(e){if(!e)return e;const t=c7(e.op,e.field),n=e.order||Dtn;return n.signal?pn(this.add(Hwe({fields:t,orders:this.signalRef(n.signal)}))):zwe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return vn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&rt("Duplicate signal name: "+Nt(e));const n=t instanceof GX?t:this.add(yM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||rt("Unrecognized signal name: "+Nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?pn(this.signals[e]):(vn(this.lambdas,e)||(this.lambdas[e]=this.add(yM(null))),pn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=nm(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!jt(e)?e:this.signalRef(e.signal||Vae(e))},exprRef(e,t){const n={expr:nm(e,this)};return t&&(n.expr.$name=t),pn(this.add(Htn(n)))},addBinding(e,t){this.bindings||rt("Nested signals do not support binding: "+Nt(e)),this.bindings.push(lr({signal:e},t))},addScaleProj(e,t){vn(this.scales,e)&&rt("Duplicate scale or projection name: "+Nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,inn(t))},addProjection(e,t){this.addScaleProj(e,tnn(t))},getScale(e){return this.scales[e]||rt("Unrecognized scale name: "+Nt(e)),this.scales[e]},scaleRef(e){return pn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return vn(this.data,e)&&rt("Duplicate data set name: "+Nt(e)),this.data[e]=t},getData(e){return this.data[e]||rt("Undefined data set name: "+Nt(e)),this.data[e]},addDataPipeline(e,t){return vn(this.data,e)&&rt("Duplicate data set name: "+Nt(e)),this.addData(e,c_.fromEntries(this,t))}};function Vae(e){return(at(e)?Wrn:Grn)(e)}function Wrn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(jt(i)?i.signal||Vae(i):Nt(i))}return n+"]"}function Grn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Nt(r)+":"+(jt(i)?i.signal||Vae(i):Nt(i));return t+"}"}function Yrn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Krn(e,t,n){return jt(e)||rt("Input Vega specification must be an object."),t=yS(Yrn(),t,e.config),Hrn(e,new Eje(t,n)).toRuntime()}var Xrn="5.29.0";lr(WT,KHt,MYt,mKt,WKt,ZKt,AXt,sXt,DXt,NXt,zXt,KXt);const Qrn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Yo,CanvasHandler:cP,CanvasRenderer:sM,DATE:Kc,DAY:qu,DAYOFYEAR:tm,Dataflow:LC,Debug:G$e,Error:Mie,EventStream:N9,Gradient:cBe,GroupItem:q9,HOURS:qf,Handler:Eoe,HybridHandler:t9e,HybridRenderer:TX,Info:W$e,Item:H9,MILLISECONDS:yp,MINUTES:Wf,MONTH:Qu,Marks:Gf,MultiPulse:rse,None:q$e,Operator:us,Parameters:R9,Pulse:gv,QUARTER:Yc,RenderType:G1,Renderer:lP,ResourceLoader:yBe,SECONDS:Hd,SVGHandler:zBe,SVGRenderer:Ioe,SVGStringRenderer:e9e,Scenegraph:OBe,TIME_UNITS:Kie,Transform:Ke,View:U7e,WEEK:fa,Warn:Lie,YEAR:fu,accessor:nf,accessorFields:Xu,accessorName:ho,array:Lt,ascending:T9,bandwidthNRD:ase,bin:nLe,bootstrapCI:rLe,boundClip:f9e,boundContext:sP,boundItem:xX,boundMark:kBe,boundStroke:Oy,changeset:rE,clampRange:iMe,codegenExpression:h7e,compare:Vie,constant:sl,cumulativeLogNormal:hse,cumulativeNormal:O9,cumulativeUniform:yse,dayofyear:gMe,debounce:Hie,defaultLocale:Jie,definition:ZMe,densityLogNormal:dse,densityNormal:use,densityUniform:gse,domChild:la,domClear:Ad,domCreate:q1,domFind:_oe,dotbin:iLe,error:rt,expressionFunction:Fo,extend:lr,extent:em,extentIndex:sMe,falsy:d1,fastmap:bS,field:zd,flush:oMe,font:X9,fontFamily:uP,fontSize:vm,format:SF,formatLocale:W$,formats:tse,hasOwnProperty:vn,id:GN,identity:il,inferType:zMe,inferTypes:VMe,ingest:Ii,inherits:Ot,inrange:rC,interpolate:Zse,interpolateColors:z9,interpolateRange:XLe,intersect:a9e,intersectBoxLine:iC,intersectPath:aoe,intersectPoint:uoe,intersectRule:bBe,isArray:at,isBoolean:jb,isDate:mv,isFunction:cr,isIterable:aMe,isNumber:fi,isObject:jt,isRegExp:uMe,isString:Bt,isTuple:I9,key:qie,lerp:lMe,lineHeight:Jv,loader:S9,locale:jMe,logger:Bie,lruCache:cMe,markup:Doe,merge:fMe,mergeConfig:yS,multiLineOffset:boe,one:gS,pad:dMe,panLinear:J$e,panLog:Z$e,panPow:eMe,panSymlog:tMe,parse:Krn,parseExpression:gae,parseSelector:zb,path:TB,pathCurves:ioe,pathEqual:d9e,pathParse:XT,pathRectangle:hBe,pathRender:yR,pathSymbols:dBe,pathTrail:pBe,peek:Xr,point:J9,projection:Uoe,quantileLogNormal:pse,quantileNormal:F9,quantileUniform:vse,quantiles:sse,quantizeInterpolator:QLe,quarter:nMe,quartiles:ose,get random(){return qd},randomInteger:ZVt,randomKDE:cse,randomLCG:JVt,randomLogNormal:oLe,randomMixture:aLe,randomNormal:lse,randomUniform:uLe,read:WMe,regressionConstant:bse,regressionExp:cLe,regressionLinear:xse,regressionLoess:hLe,regressionLog:lLe,regressionPoly:dLe,regressionPow:fLe,regressionQuad:wse,renderModule:Z9,repeat:$I,resetDefaultLocale:Kzt,resetSVGClipId:gBe,resetSVGDefIds:tYt,responseType:qMe,runtimeContext:D7e,sampleCurve:M9,sampleLogNormal:fse,sampleNormal:P9,sampleUniform:mse,scale:xi,sceneEqual:koe,sceneFromJSON:NBe,scenePickVisit:Q$,sceneToJSON:RBe,sceneVisit:vp,sceneZOrder:loe,scheme:eoe,serializeXML:XBe,setHybridRendererOptions:QGt,setRandom:XVt,span:YN,splitAccessPath:ym,stringValue:Nt,textMetrics:Rf,timeBin:PMe,timeFloor:EMe,timeFormatLocale:pR,timeInterval:xS,timeOffset:AMe,timeSequence:IMe,timeUnitSpecifier:mMe,timeUnits:Xie,toBoolean:Wie,toDate:Gie,toNumber:Wu,toSet:gp,toString:Yie,transform:eLe,transforms:WT,truncate:hMe,truthy:Vd,tupleid:mn,typeParsers:fX,utcFloor:CMe,utcInterval:wS,utcOffset:SMe,utcSequence:kMe,utcdayofyear:bMe,utcquarter:rMe,utcweek:xMe,version:Xrn,visitArray:_1,week:yMe,writeConfig:vS,zero:N1,zoomLinear:jie,zoomLog:Uie,zoomPow:q$,zoomSymlog:zie},Symbol.toStringTag,{value:"Module"}));function Jrn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Zrn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},ein={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},tin={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const nin=Array.prototype.slice,yx=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,nin.call(t,1))},rin=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var iin={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:rin,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return yx("join",arguments)},indexof:function(){return yx("indexOf",arguments)},lastindexof:function(){return yx("lastIndexOf",arguments)},slice:function(){return yx("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return yx("substring",arguments,String)},split:function(){return yx("split",arguments,String)},replace:function(){return yx("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const sin=["view","item","group","xy","x","y"],eQ=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&eQ.add(setImmediate);const oin={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Zrn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),eQ.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||iin[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>ein[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>tin[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,eQ.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function XD(e,t,n,r,i,s){const o=a=>oin[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,sin.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var ain={operator(e,t){const n=t.ast,r=e.functions;return i=>XD(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>XD(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>XD(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return XD(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=XD(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&Jrn(o,r,s),l}}};const uin="vega-lite",lin='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',cin="5.18.1",fin=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],din="https://vega.github.io/vega-lite/",hin="Vega-Lite is a concise high-level language for interactive visualization.",pin=["vega","chart","visualization"],min="build/vega-lite.js",gin="build/vega-lite.min.js",yin="build/vega-lite.min.js",vin="build/src/index",bin="build/src/index.d.ts",xin={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},win=["bin","build","src","vega-lite*","tsconfig.json"],_in={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Ein={type:"git",url:"https://github.com/vega/vega-lite.git"},Cin="BSD-3-Clause",Tin={url:"https://github.com/vega/vega-lite/issues"},Ain={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Sin={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Din={vega:"^5.24.0"},Iin={node:">=18"},kin="yarn@1.22.19",Rin={name:uin,author:lin,version:cin,collaborators:fin,homepage:din,description:hin,keywords:pin,main:min,unpkg:gin,jsdelivr:yin,module:vin,types:bin,bin:xin,files:win,scripts:_in,repository:Ein,license:Cin,bugs:Tin,devDependencies:Ain,dependencies:Sin,peerDependencies:Din,engines:Iin,packageManager:kin};function Hae(e){return!!e.or}function qae(e){return!!e.and}function Wae(e){return!!e.not}function GF(e,t){if(Wae(e))GF(e.not,t);else if(qae(e))for(const n of e.and)GF(n,t);else if(Hae(e))for(const n of e.or)GF(n,t);else t(e)}function jC(e,t){return Wae(e)?{not:jC(e.not,t)}:qae(e)?{and:e.and.map(n=>jC(n,t))}:Hae(e)?{or:e.or.map(n=>jC(n,t))}:t(e)}const zn=structuredClone;function Cje(e){throw new Error(e)}function tA(e,t){const n={};for(const r of t)vn(e,r)&&(n[r]=e[r]);return n}function Lc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ji(e)).join(",")})`};function $r(e){if(fi(e))return e;const t=Bt(e)?e:Ji(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function tQ(e){return e===!1||e===null}function Mr(e,t){return e.includes(t)}function f_(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Gae(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Tje(e,...t){for(const n of t)Nin(e,n??{});return e}function Nin(e,t){for(const n of xt(t))vS(e,n,t[n],!0)}function _0(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Pin(e,t){const n=xt(e),r=xt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Aje(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Yae(e,t){for(const n of e)if(t.has(n))return!0;return!1}function nQ(e){const t=new Set;for(const n of e){const i=ym(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Kae(e,t){return e===void 0||t===void 0?!0:Yae(nQ(e),nQ(t))}function Qi(e){return xt(e).length===0}const xt=Object.keys,du=Object.values,nb=Object.entries;function DR(e){return e===!0||e===!1}function zs(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Bk(e,t){return Wae(e)?`!(${Bk(e.not,t)})`:qae(e)?`(${e.and.map(n=>Bk(n,t)).join(") && (")})`:Hae(e)?`(${e.or.map(n=>Bk(n,t)).join(") || (")})`:t(e)}function vM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&vM(e[n],t)&&delete e[n],Qi(e)}function yP(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Xae(e,t="datum"){const n=ym(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function Sje(e,t="datum"){return`${t}[${Nt(ym(e).join("."))}]`}function Oin(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Wd(e){return`${ym(e).map(Oin).join("\\.")}`}function d_(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function DS(e){return`${ym(e).join(".")}`}function nA(e){return e?ym(e).length:0}function ko(...e){for(const t of e)if(t!==void 0)return t}let Dje=42;function Ije(e){const t=++Dje;return e?String(e)+t:t}function Fin(){Dje=42}function kje(e){return Rje(e)?e:`__${e}`}function Rje(e){return e.startsWith("__")}function IR(e){if(e!==void 0)return(e%360+360)%360}function y7(e){return fi(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const s_e=Object.getPrototypeOf(structuredClone({}));function Sf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Sf(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Sf(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==s_e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==s_e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Sf(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ji(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Lg="row",Bg="column",v7="facet",Vs="x",qa="y",Pp="x2",wm="y2",Vb="xOffset",IS="yOffset",Op="radius",$y="radius2",ih="theta",My="theta2",Fp="latitude",$p="longitude",Mp="latitude2",Gd="longitude2",Xc="color",_m="fill",Em="stroke",Qc="shape",Ly="size",uE="angle",By="opacity",Hb="fillOpacity",qb="strokeOpacity",Wb="strokeWidth",Gb="strokeDash",vP="text",rA="order",bP="detail",b7="key",h_="tooltip",x7="href",w7="url",_7="description",$in={x:1,y:1,x2:1,y2:1},Nje={theta:1,theta2:1,radius:1,radius2:1};function Pje(e){return e in Nje}const Qae={longitude:1,longitude2:1,latitude:1,latitude2:1};function Oje(e){switch(e){case Fp:return"y";case Mp:return"y2";case $p:return"x";case Gd:return"x2"}}function Fje(e){return e in Qae}const Min=xt(Qae),Jae={...$in,...Nje,...Qae,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function UC(e){return e===Xc||e===_m||e===Em}const $je={row:1,column:1,facet:1},Pd=xt($je),Zae={...Jae,...$je},Lin=xt(Zae),{order:LSn,detail:BSn,tooltip:jSn,...Bin}=Zae,{row:USn,column:zSn,facet:VSn,...jin}=Bin;function Uin(e){return!!jin[e]}function Mje(e){return!!Zae[e]}const zin=[Pp,wm,Mp,Gd,My,$y];function Lje(e){return lE(e)!==e}function lE(e){switch(e){case Pp:return Vs;case wm:return qa;case Mp:return Fp;case Gd:return $p;case My:return ih;case $y:return Op}return e}function rb(e){if(Pje(e))switch(e){case ih:return"startAngle";case My:return"endAngle";case Op:return"outerRadius";case $y:return"innerRadius"}return e}function Cm(e){switch(e){case Vs:return Pp;case qa:return wm;case Fp:return Mp;case $p:return Gd;case ih:return My;case Op:return $y}}function Jc(e){switch(e){case Vs:case Pp:return"width";case qa:case wm:return"height"}}function Bje(e){switch(e){case Vs:return"xOffset";case qa:return"yOffset";case Pp:return"x2Offset";case wm:return"y2Offset";case ih:return"thetaOffset";case Op:return"radiusOffset";case My:return"theta2Offset";case $y:return"radius2Offset"}}function eue(e){switch(e){case Vs:return"xOffset";case qa:return"yOffset"}}function Vin(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Hin=xt(Jae),{x:HSn,y:qSn,x2:WSn,y2:GSn,xOffset:YSn,yOffset:KSn,latitude:XSn,longitude:QSn,latitude2:JSn,longitude2:ZSn,theta:eDn,theta2:tDn,radius:nDn,radius2:rDn,...tue}=Jae,qin=xt(tue),nue={x:1,y:1},Tm=xt(nue);function Ro(e){return e in nue}const rue={theta:1,radius:1},Win=xt(rue);function E7(e){return e==="width"?Vs:qa}const jje={xOffset:1,yOffset:1};function xP(e){return e in jje}const{text:iDn,tooltip:sDn,href:oDn,url:aDn,description:uDn,detail:lDn,key:cDn,order:fDn,...Uje}=tue,Gin=xt(Uje);function Yin(e){return!!tue[e]}function Kin(e){switch(e){case Xc:case _m:case Em:case Ly:case Qc:case By:case Wb:case Gb:return!0;case Hb:case qb:case uE:return!1}}const zje={...nue,...rue,...jje,...Uje},C7=xt(zje);function jy(e){return!!zje[e]}function Xin(e,t){return Jin(e)[t]}const Vje={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:dDn,...Qin}=Vje;function Jin(e){switch(e){case Xc:case _m:case Em:case _7:case bP:case b7:case h_:case x7:case rA:case By:case Hb:case qb:case Wb:case v7:case Lg:case Bg:return Vje;case Vs:case qa:case Vb:case IS:case Fp:case $p:return Qin;case Pp:case wm:case Mp:case Gd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ly:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Gb:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Qc:return{point:"always",geoshape:"always"};case vP:return{text:"always"};case uE:return{point:"always",square:"always",text:"always"};case w7:return{image:"always"};case ih:return{text:"always",arc:"always"};case Op:return{text:"always",arc:"always"};case My:case $y:return{arc:"always"}}}function wq(e){switch(e){case Vs:case qa:case ih:case Op:case Vb:case IS:case Ly:case uE:case Wb:case By:case Hb:case qb:case Pp:case wm:case My:case $y:return;case v7:case Lg:case Bg:case Qc:case Gb:case vP:case h_:case x7:case w7:case _7:return"discrete";case Xc:case _m:case Em:return"flexible";case Fp:case $p:case Mp:case Gd:case bP:case b7:case rA:return}}const Zin={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},esn={count:1,min:1,max:1};function hy(e){return!!e&&!!e.argmin}function Yb(e){return!!e&&!!e.argmax}function iue(e){return Bt(e)&&!!Zin[e]}const tsn=new Set(["count","valid","missing","distinct"]);function Hje(e){return Bt(e)&&tsn.has(e)}function nsn(e){return Bt(e)&&Mr(["min","max"],e)}const rsn=new Set(["count","sum","distinct","valid","missing"]),isn=new Set(["mean","average","median","q1","q3","min","max"]);function qje(e){return jb(e)&&(e=$7(e,void 0)),"bin"+xt(e).map(t=>T7(e[t])?zs(`_${t}_${nb(e[t])}`):zs(`_${t}_${e[t]}`)).join("")}function gs(e){return e===!0||cE(e)&&!e.binned}function nu(e){return e==="binned"||cE(e)&&e.binned===!0}function cE(e){return jt(e)}function T7(e){return e==null?void 0:e.param}function o_e(e){switch(e){case Lg:case Bg:case Ly:case Xc:case _m:case Em:case Wb:case By:case Hb:case qb:case Qc:return 6;case Gb:return 4;default:return 10}}function wP(e){return!!(e!=null&&e.expr)}function xc(e){const t=xt(e||{}),n={};for(const r of t)n[r]=xf(e[r]);return n}function Wje(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=tA(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function T1(e){return Bt(e)||at(e)&&Bt(e[0])}function rn(e){return!!(e!=null&&e.signal)}function Kb(e){return!!e.step}function ssn(e){return at(e)?!1:"fields"in e&&!("data"in e)}function osn(e){return at(e)?!1:"fields"in e&&"data"in e}function Ag(e){return at(e)?!1:"field"in e&&"data"in e}const asn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},usn=xt(asn),lsn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},rQ=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Gje(e){const t=at(e.condition)?e.condition.map(a_e):a_e(e.condition);return{...xf(e),condition:t}}function xf(e){if(wP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function a_e(e){if(wP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Es(e){if(wP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return rn(e)?e:e!==void 0?{value:e}:void 0}function csn(e){return rn(e)?e.signal:Nt(e)}function u_e(e){return rn(e)?e.signal:Nt(e.value)}function Xh(e){return rn(e)?e.signal:e==null?null:Nt(e)}function fsn(e,t,n){for(const r of n){const i=py(r,t.markDef,t.config);i!==void 0&&(e[r]=Es(i))}return e}function Yje(e){return[].concat(e.type,e.style??[])}function Di(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:py(e,t,n,r)}function py(e,t,n,{vgChannel:r}={}){return ko(r?bM(e,t,n.style):void 0,bM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function bM(e,t,n){return Kje(e,Yje(t),n)}function Kje(e,t,n){t=Lt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function Xje(e,t){return Lt(e).reduce((n,r)=>(n.field.push(Pt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Qje(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Sf(i,r))return;n.push(r)}),n}function Jje(e,t){return Sf(e,t)||!t?e:e?[...Lt(e),...Lt(t)].join(", "):t}function Zje(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((T1(n)||rn(n))&&(T1(r)||rn(r)))return{explicit:e.explicit,value:Jje(n,r)};if(T1(n)||rn(n))return{explicit:e.explicit,value:n};if(T1(r)||rn(r))return{explicit:e.explicit,value:r};if(!T1(n)&&!rn(n)&&!T1(r)&&!rn(r))return{explicit:e.explicit,value:Qje(n,r)};throw new Error("It should never reach here")}function sue(e){return`Invalid specification ${Ji(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const dsn='Autosize "fit" only works for single views and layered views.';function l_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function c_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function f_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Jc(e)}.`:'Dropping "fit" because spec has discrete size.'}function oue(e){return`Unknown field for ${e}. Cannot calculate view size.`}function d_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function hsn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function psn(e){return`The "nearest" transform is not supported for ${e} marks.`}function eUe(e){return`Selection not supported for ${e} yet.`}function msn(e){return`Cannot find a selection named "${e}".`}const gsn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",ysn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",vsn="Legend bindings are only supported for selections over an individual field or encoding channel.";function bsn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function xsn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const wsn="The same selection must be used to override scale domains in a layered view.",_sn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Esn(e){return`Unknown repeated value "${e}".`}function h_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Csn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Tsn(e){return`Unrecognized parse "${e}".`}function p_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Asn="Attempt to add the same child twice.";function Ssn(e){return`Ignoring an invalid transform: ${Ji(e)}.`}const Dsn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function m_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Isn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ji(t)} is overridden by a child projection ${Ji(n)}.`}const ksn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Rsn(e){return`${e}Offset dropped because ${e} is continuous`}function Nsn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ji(n)}}.`}function tUe(e){return`Invalid field type "${e}".`}function Psn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Osn(e){return`Invalid aggregation operator "${e}".`}function nUe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Fsn(e){return`Position range does not support relative band size for ${e}.`}function iQ(e,t){return`Dropping ${Ji(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const $sn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function A7(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Msn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Lsn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Bsn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function jsn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function _q(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Usn(e){return`The ${e} for range marks cannot be an expression`}function zsn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Vsn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Hsn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function qsn(e){return`Cannot use the relative band size with ${e} scale.`}function Wsn(e){return`Using unaggregated domain with raw field has no effect (${Ji(e)}).`}function Gsn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Ysn(e){return`Unaggregated domain is currently unsupported for log scale (${Ji(e)}).`}function Ksn(e){return`Cannot apply size to non-oriented mark "${e}".`}function Xsn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Qsn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function rUe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function iUe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Jsn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ji(n)} and ${Ji(r)}). Using ${Ji(n)}.`}function Zsn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ji(n)} and ${Ji(r)}). Using the union of the two domains.`}function eon(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ton(e){return`Dropping sort property ${Ji(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const g_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",non="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",ron="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",ion="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function son(e){return`Cannot stack "${e}" if there is already "${e}2".`}function oon(e){return`Stack is applied to a non-linear scale (${e}).`}function aon(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function xM(e,t){return`Invalid ${e}: ${Ji(t)}.`}function uon(e){return`Dropping day from datetime ${Ji(e)} as day cannot be combined with other units.`}function lon(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function con(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function fon(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function y_e(e){return`1D error band does not support ${e}.`}function sUe(e){return`Channel ${e} is required for "binned" bin.`}function don(e){return`Channel ${e} should not be used with "binned" bin.`}function hon(e){return`Domain for ${e} is required for threshold scale.`}const oUe=Bie(Lie);let iA=oUe;function pon(e){return iA=e,iA}function mon(){return iA=oUe,iA}function At(...e){iA.warn(...e)}function gon(...e){iA.debug(...e)}function fE(e){if(e&&jt(e)){for(const t of uue)if(t in e)return!0}return!1}const aUe=["january","february","march","april","may","june","july","august","september","october","november","december"],yon=aUe.map(e=>e.substr(0,3)),uUe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],von=uUe.map(e=>e.substr(0,3));function bon(e){if(y7(e)&&(e=+e),fi(e))return e>4&&At(xM("quarter",e)),e-1;throw new Error(xM("quarter",e))}function xon(e){if(y7(e)&&(e=+e),fi(e))return e-1;{const t=e.toLowerCase(),n=aUe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=yon.indexOf(r);if(i!==-1)return i;throw new Error(xM("month",e))}}function won(e){if(y7(e)&&(e=+e),fi(e))return e%7;{const t=e.toLowerCase(),n=uUe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=von.indexOf(r);if(i!==-1)return i;throw new Error(xM("day",e))}}function aue(e,t){const n=[];if(t&&e.day!==void 0&&xt(e).length>1&&(At(uon(e)),e=zn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?xon(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?bon(e.quarter):e.quarter;n.push(fi(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?won(e.day):e.day;n.push(fi(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function p_(e){const n=aue(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function _on(e){const n=aue(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Eon(e){const t=aue(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const lUe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},uue=xt(lUe);function Con(e){return!!lUe[e]}function dE(e){return jt(e)?e.binned:cUe(e)}function cUe(e){return e&&e.startsWith("binned")}function lue(e){return e.startsWith("utc")}function Ton(e){return e.substring(3)}const Aon={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function S7(e){return uue.filter(t=>dUe(e,t))}function fUe(e){const t=S7(e);return t[t.length-1]}function dUe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Son(e,t,{end:n}={end:!1}){const r=Xae(t),i=lue(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of uue)dUe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),_on(a)}function hUe(e){if(!e)return;const t=S7(e);return`timeUnitSpecifier(${Ji(t)}, ${Ji(Aon)})`}function Don(e,t,n){if(!e)return;const r=hUe(e);return`${n||lue(e)?"utc":"time"}Format(${t}, ${r})`}function Ba(e){if(!e)return;let t;return Bt(e)?cUe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:jt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),lue(t.unit)&&(t.utc=!0,t.unit=Ton(t.unit)),t}function Ion(e){const{utc:t,...n}=Ba(e);return n.unit?(t?"utc":"")+xt(n).map(r=>zs(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+xt(n).map(r=>zs(`_${r}_${n[r]}`)).join("")}function pUe(e,t=n=>n){const n=Ba(e),r=fUe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=mUe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(p_(a))} - ${t(p_(i))}`}}const kon={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Ron(e){return!!kon[e]}function mUe(e,t=1){if(Ron(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Non(e){return e==null?void 0:e.param}function cue(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function fue(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function due(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function hue(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function pue(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function mue(e){if(e!=null&&e.field){if(at(e.range)&&e.range.length===2)return!0;if(rn(e.range))return!0}return!1}function gue(e){return!!(e!=null&&e.field)&&(at(e.oneOf)||at(e.in))}function Pon(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function gUe(e){return gue(e)||cue(e)||mue(e)||fue(e)||hue(e)||due(e)||pue(e)}function Gp(e,t){return M7(e,{timeUnit:t,wrapTime:!0})}function Oon(e,t){return e.map(n=>Gp(n,t))}function yUe(e,t=!0){const{field:n}=e,r=Ba(e.timeUnit),{unit:i,binned:s}=r||{},o=Pt(e,{expr:"datum"}),a=i?`time(${s?o:Son(i,n)})`:o;if(cue(e))return`${a}===${Gp(e.equal,i)}`;if(fue(e)){const u=e.lt;return`${a}<${Gp(u,i)}`}else if(hue(e)){const u=e.gt;return`${a}>${Gp(u,i)}`}else if(due(e)){const u=e.lte;return`${a}<=${Gp(u,i)}`}else if(pue(e)){const u=e.gte;return`${a}>=${Gp(u,i)}`}else{if(gue(e))return`indexof([${Oon(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Pon(e))return yue(a,e.valid);if(mue(e)){const{range:u}=e,l=rn(u)?{signal:`${u.signal}[0]`}:u[0],c=rn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Gp(l,i)+", "+Gp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Gp(l,i)}`),c!==null&&f.push(`${a} <= ${Gp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ji(e)}`)}function yue(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Fon(e){return gUe(e)&&e.timeUnit?{...e,timeUnit:Ba(e.timeUnit)}:e}const _P={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function $on(e){return e==="quantitative"||e==="temporal"}function vUe(e){return e==="ordinal"||e==="nominal"}const m_=_P.quantitative,vue=_P.ordinal,sA=_P.temporal,bue=_P.nominal,kS=_P.geojson;function Mon(e){if(e)switch(e=e.toLowerCase(),e){case"q":case m_:return"quantitative";case"t":case sA:return"temporal";case"o":case vue:return"ordinal";case"n":case bue:return"nominal";case kS:return"geojson"}}const Bc={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},sQ={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Lon(e,t){const n=sQ[e],r=sQ[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Bon={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function v_e(e){return Bon[e]}const bUe=new Set(["linear","log","pow","sqrt","symlog"]),xUe=new Set([...bUe,"time","utc"]);function wUe(e){return bUe.has(e)}const _Ue=new Set(["quantile","quantize","threshold"]),jon=new Set([...xUe,..._Ue,"sequential","identity"]),Uon=new Set(["ordinal","bin-ordinal","point","band"]);function za(e){return Uon.has(e)}function Kf(e){return jon.has(e)}function Qh(e){return xUe.has(e)}function oA(e){return _Ue.has(e)}const zon={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Von(e){return!Bt(e)&&!!e.name}function EUe(e){return e==null?void 0:e.param}function Hon(e){return e==null?void 0:e.unionWith}function qon(e){return jt(e)&&"field"in e}const Won={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:hDn,domain:pDn,range:mDn,rangeMax:gDn,rangeMin:yDn,scheme:vDn,...Gon}=Won,Yon=xt(Gon);function oQ(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Qh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Qh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Qh(e);case"nice":return Qh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Kf(e)&&!Mr(["log","time","utc","threshold","quantile"],e)}}function CUe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return UC(e)?void 0:Hsn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Kon(e,t){return Mr([vue,bue],t)?e===void 0||za(e):t===sA?Mr([Bc.TIME,Bc.UTC,void 0],e):t===m_?wUe(e)||oA(e)||e===void 0:!0}function Xon(e,t,n=!1){if(!jy(e))return!1;switch(e){case Vs:case qa:case Vb:case IS:case ih:case Op:return Qh(t)||t==="band"?!0:t==="point"?!n:!1;case Ly:case Wb:case By:case Hb:case qb:case uE:return Qh(t)||oA(t)||Mr(["band","point","ordinal"],t);case Xc:case _m:case Em:return t!=="band";case Gb:case Qc:return t==="ordinal"||oA(t)}}function xue(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=_ue(e);return St(n)&&!Hje(n.aggregate)&&i&&Qh(i.get("type"))?Qon({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function Qon({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Di("invalid",n,i)===null?[Jon(e,t),r]:r}function Jon(e,t){const n=wue(e,!0),i=lE(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function wue(e,t=!0){return yue(Bt(e)?e:Pt(e,{expr:"datum"}),!t)}function Zon(e){const{datum:t}=e;return fE(t)?p_(t):`${Ji(t)}`}function Ow(e,t,n,r){const i={};if(t&&(i.scale=t),Am(e)){const{datum:s}=e;fE(s)?i.signal=p_(s):rn(s)?i.signal=s.signal:wP(s)?i.signal=s.expr:i.value=s}else i.field=Pt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function wM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!rn(o)&&0<o&&o<1?"datum":void 0,u=Pt(t,{expr:a,suffix:i}),l=n!==void 0?Pt(n,{expr:a}):Pt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=rn(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function ean({scaleName:e,fieldDef:t}){const n=Pt(t,{expr:"datum"}),r=Pt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function _ue({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qn(t)){const f=o==null?void 0:o.get("type");if(Gl(t)){c??(c=ib({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(gs(d)||c&&h&&p===sA)return a!=null&&a.impute?Ow(t,s,{binSuffix:"mid"},{offset:u}):c&&!za(f)?wM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Ow(t,s,AP(t,e)?{binSuffix:"range"}:{},{offset:u});if(nu(d)){if(St(n))return wM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});At(sUe(e===Vs?Pp:wm))}}return Ow(t,s,za(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(bp(t)){const f=t.value,d=u?{offset:u}:{};return{...jk(e,f),...d}}}return cr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function jk(e,t){return Mr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Mr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Es(t)}function g_(e){return e&&e!=="number"&&e!=="time"}function TUe(e,t,n){return`${e}(${t}${n?`, ${Ji(n)}`:""})`}const tan="  ";function Eue({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(g_(n))return Jh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=AUe(e,r,i),a=aA(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Jh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Jh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&St(e)&&e.timeUnit===void 0)return Jh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(lA(e)){const c=ran({field:o,timeUnit:St(e)?(u=Ba(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:pE(e)&&((l=e.scale)==null?void 0:l.type)===Bc.UTC});return c?{signal:c}:void 0}if(t=aQ({type:a,specifiedFormat:t,config:s,normalizeStack:i}),St(e)&&gs(e.bin)){const c=Pt(e,{expr:r,binSuffix:"end"});return{signal:EP(o,c,t,n,s)}}else return t||aA(e)==="quantitative"?{signal:`${IUe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function AUe(e,t,n){return St(e)?n?`${Pt(e,{expr:t,suffix:"end"})}-${Pt(e,{expr:t,suffix:"start"})}`:Pt(e,{expr:t}):Zon(e)}function Jh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=AUe(e,r,i)),o!=="datum.value"&&St(e)&&gs(e.bin)){const a=Pt(e,{expr:r,binSuffix:"end"});return{signal:EP(o,a,t,n,s)}}return{signal:TUe(n,o,t)}}function SUe(e,t,n,r,i,s){var o;if(!(Bt(r)&&g_(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&aA(e)==="quantitative"&&(i.normalizedNumberFormatType&&uA(e)&&e.stack==="normalize"||i.numberFormatType))){if(uA(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return aQ({type:"quantitative",config:i,normalizeStack:!0});if(lA(e)){const a=St(e)?(o=Ba(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:nan({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return aQ({type:t,specifiedFormat:n,config:i})}}function DUe(e,t,n){var r;if(e&&(rn(e)||e==="number"||e==="time"))return e;if(lA(t)&&n!=="time"&&n!=="utc")return St(t)&&((r=Ba(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function aQ({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Bt(t))return t;if(e===m_)return r?n.normalizedNumberFormat:n.numberFormat}function nan({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:hUe(t)}:r?void 0:n.timeFormat)}function IUe(e,t){return`format(${e}, "${t||""}")`}function b_e(e,t,n,r){return g_(n)?TUe(n,e,t):IUe(e,(Bt(t)?t:void 0)??r.numberFormat)}function EP(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return EP(e,t,i.numberFormat,i.numberFormatType,i);const s=b_e(e,n,r,i),o=b_e(t,n,r,i);return`${yue(e,!1)} ? "null" : ${s} + "${tan}" + ${o}`}function ran({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Bt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Don(t,e,s)}const Zl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},kUe=Zl.arc,D7=Zl.area,I7=Zl.bar,ian=Zl.image,k7=Zl.line,R7=Zl.point,san=Zl.rect,_M=Zl.rule,RUe=Zl.text,Cue=Zl.tick,oan=Zl.trail,Tue=Zl.circle,Aue=Zl.square,NUe=Zl.geoshape;function hE(e){return["line","area","trail"].includes(e)}function kR(e){return["rect","bar","image","arc"].includes(e)}const aan=new Set(xt(Zl));function rm(e){return e.type}const uan=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],lan=["fill","fillOpacity"],can=[...uan,...lan],fan={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},x_e=xt(fan),dan={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},han={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},pan={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},PUe=xt(pan);function y_(e){return e&&e.band!=null}const man={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},OUe=5,gan={binSpacing:1,continuousBandSize:OUe,minBandSize:.25,timeUnitBandPosition:.5},yan={binSpacing:0,continuousBandSize:OUe,minBandSize:.25,timeUnitBandPosition:.5},van={thickness:1};function ban(e){return rm(e)?e.type:e}const N7="min",xan={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function w_e(e){return e in xan}function FUe(e){return!!(e!=null&&e.encoding)}function $0(e){return e&&(e.op==="count"||!!e.field)}function $Ue(e){return e&&at(e)}function CP(e){return"row"in e||"column"in e}function Sue(e){return!!e&&"header"in e}function P7(e){return"facet"in e}function wan(e){return e.param}function _an(e){return e&&!Bt(e)&&"repeat"in e}function __e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Due(e){return"sort"in e}function ib({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(St(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return py("timeUnitBandPosition",n,r);if(gs(s))return .5}}function MUe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Jc(e),u=Di(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(St(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:py("timeUnitBandSize",r,i)};if(gs(h)&&!za(s))return{band:1}}if(kR(r.type))return s?za(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function LUe(e,t,n,r){return gs(e.bin)||e.timeUnit&&Gl(e)&&e.type==="temporal"?ib({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function BUe(e){return e&&!!e.sort&&!e.field}function O7(e){return e&&"condition"in e}function F7(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&St(t)}function TP(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Qn(t)}function Ean(e){const t=e==null?void 0:e.condition;return!!t&&(at(t)||bp(t))}function St(e){return e&&(!!e.field||e.aggregate==="count")}function aA(e){return e==null?void 0:e.type}function Am(e){return e&&"datum"in e}function Q1(e){return Gl(e)&&!CM(e)||EM(e)}function E_e(e){return Gl(e)&&e.type==="quantitative"&&!e.bin||EM(e)}function EM(e){return Am(e)&&fi(e.datum)}function Qn(e){return St(e)||Am(e)}function Gl(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function bp(e){return e&&"value"in e&&"value"in e}function pE(e){return e&&("scale"in e||"sort"in e)}function uA(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function jUe(e){return e&&"legend"in e}function UUe(e){return e&&("format"in e||"formatType"in e)}function Can(e){return Lc(e,["legend","axis","header","scale"])}function Tan(e){return"op"in e}function Pt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(San(e))n=kje("count");else{let o;if(!t.nofn)if(Tan(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;gs(a)?(o=qje(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Yb(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):hy(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!dE(l)&&(o=Ion(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?DS(n):t.expr?Sje(n,t.expr)+s:Wd(n)+s}function CM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return St(e)&&!!e.bin;case"temporal":return!1}throw new Error(tUe(e.type))}function Aan(e){var t;return pE(e)&&oA((t=e.scale)==null?void 0:t.type)}function San(e){return e.aggregate==="count"}function Dan(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(gs(r))return`${n} (binned)`;if(i&&!dE(i)){const a=(o=Ba(i))==null?void 0:o.unit;if(a)return`${n} (${S7(a).join("-")})`}else if(s)return Yb(s)?`${n} for max ${s.argmax}`:hy(s)?`${n} for min ${s.argmin}`:`${yP(s)} of ${n}`;return n}function Ian(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Yb(t))return`${i} for argmax(${t.argmax})`;if(hy(t))return`${i} for argmin(${t.argmin})`;const s=r&&!dE(r)?Ba(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||gs(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const zUe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Ian(e);default:return Dan(e,t)}};let VUe=zUe;function HUe(e){VUe=e}function kan(){HUe(zUe)}function zC(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Iue(e))==null?void 0:a.title;if(!St(e))return i??e.title;const s=e,o=r?kue(s,t):void 0;return n?ko(i,s.title,o):i??s.title??o}function Iue(e){if(uA(e)&&e.axis)return e.axis;if(jUe(e)&&e.legend)return e.legend;if(Sue(e)&&e.header)return e.header}function kue(e,t){return VUe(e,t)}function TM(e){if(UUe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Iue(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Ran(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Due(e)&&at(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Yb(n)&&!hy(n))return"quantitative";if(pE(e)&&((s=e.scale)!=null&&s.type))switch(sQ[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function im(e){if(St(e))return e;if(F7(e))return e.condition}function da(e){if(Qn(e))return e;if(TP(e))return e.condition}function qUe(e,t,n,r={}){if(Bt(e)||fi(e)||jb(e)){const i=Bt(e)?"string":fi(e)?"number":"boolean";return At(Nsn(t,i,e)),{value:e}}return Qn(e)?AM(e,t,n,r):TP(e)?{...e,condition:AM(e.condition,t,n,r)}:e}function AM(e,t,n,r){if(UUe(e)){const{format:i,formatType:s,...o}=e;if(g_(s)&&!n.customFormatTypes)return At(m_e(t)),AM(o,t,n,r)}else{const i=uA(e)?"axis":jUe(e)?"legend":Sue(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(g_(o)&&!n.customFormatTypes)return At(m_e(t)),AM({...e,[i]:a},t,n,r)}}return St(e)?Rue(e,t,r):Nan(e)}function Nan(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=fi(n)?"quantitative":Bt(n)?"nominal":fE(n)?"temporal":void 0,{...e,type:t}}function Rue(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!iue(r)&&!Yb(r)&&!hy(r)&&(At(Osn(r)),delete a.aggregate),i&&(a.timeUnit=Ba(i)),o&&(a.field=`${o}`),gs(s)&&(a.bin=$7(s,t)),nu(s)&&!Ro(t)&&At(don(t)),Gl(a)){const{type:u}=a,l=Mon(u);u!==l&&(a.type=l),u!=="quantitative"&&Hje(r)&&(At(Psn(u,r)),a.type="quantitative")}else if(!Lje(t)){const u=Ran(a,t);a.type=u}if(Gl(a)){const{compatible:u,warning:l}=Pan(a,t)||{};u===!1&&At(l)}if(Due(a)&&Bt(a.sort)){const{sort:u}=a;if(w_e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&w_e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Sue(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function $7(e,t){return jb(e)?{maxbins:o_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:o_e(t)}:e}const d2={compatible:!0};function Pan(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Lg:case Bg:case v7:return CM(e)?d2:{compatible:!1,warning:Lsn(t)};case Vs:case qa:case Vb:case IS:case Xc:case _m:case Em:case vP:case bP:case b7:case h_:case x7:case w7:case uE:case ih:case Op:case _7:return d2;case $p:case Gd:case Fp:case Mp:return n!==m_?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:d2;case By:case Hb:case qb:case Wb:case Ly:case My:case $y:case Pp:case wm:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:d2;case Qc:case Gb:return!CM(e)&&!Aan(e)?{compatible:!1,warning:Bsn(t)}:d2;case rA:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:d2}}function lA(e){const{formatType:t}=TM(e);return t==="time"||!t&&Oan(e)}function Oan(e){return e&&(e.type==="temporal"||St(e)&&!!e.timeUnit)}function M7(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Ba(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return wP(e)?a=e.expr:rn(e)?a=e.signal:fE(e)?(o=!0,a=p_(e)):(Bt(e)||fi(e))&&o&&(a=`datetime(${Ji(e)})`,Con(s)&&(fi(e)&&e<1e4||Bt(e)&&isNaN(Date.parse(e)))&&(a=p_({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Ji(e)}function WUe(e,t){const{type:n}=e;return t.map(r=>{const i=St(e)&&!dE(e.timeUnit)?e.timeUnit:void 0,s=M7(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function AP(e,t){return gs(e.bin)?jy(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const C_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function SP(e){return e==null?void 0:e.condition}const GUe=["domain","grid","labels","ticks","title"],Fan={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},YUe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},$an={...YUe,style:1,labelExpr:1,encoding:1};function T_e(e){return!!$an[e]}const Man={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},KUe=xt(Man);function Uy(e){return"mark"in e}class L7{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Uy(t)?ban(t.mark)===this.name:!1}}function Fw(e,t){const n=e&&e[t];return n?at(n)?f_(n,r=>!!r.field):St(n)||F7(n):!1}function XUe(e,t){const n=e&&e[t];return n?at(n)?f_(n,r=>!!r.field):St(n)||Am(n)||TP(n):!1}function QUe(e,t){if(Ro(t)){const n=e[t];if((St(n)||Am(n))&&(vUe(n.type)||St(n)&&n.timeUnit)){const r=eue(t);return XUe(e,r)}}return!1}function Nue(e){return f_(Lin,t=>{if(Fw(e,t)){const n=e[t];if(at(n))return f_(n,r=>!!r.aggregate);{const r=im(n);return r&&!!r.aggregate}}return!1})}function JUe(e,t){const n=[],r=[],i=[],s=[],o={};return Pue(e,(a,u)=>{if(St(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Iue(a),m=p==null?void 0:p.title;let g=Pt(a,{forAs:!0});const y={...m?[]:{title:zC(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Yb(c)?(v="argmax",g=Pt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):hy(c)?(v="argmin",g=Pt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),Gl(a)&&gs(f)){if(r.push({bin:f,field:l,as:g}),n.push(Pt(a,{binSuffix:"end"})),AP(a,u)&&n.push(Pt(a,{binSuffix:"range"})),Ro(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",Lje(u)||(y.type=m_)}else if(d&&!dE(d)){i.push({timeUnit:d,field:l,as:g});const v=Gl(a)&&a.type!==sA&&"time";v&&(u===vP||u===h_?y.formatType=v:Yin(u)?y.legend={formatType:v,...y.legend}:Ro(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Lan(e,t,n){const r=Xin(t,n);if(r){if(r==="binned"){const i=e[t===Pp?Vs:qa];return!!(St(i)&&St(e[t])&&nu(i.bin))}}else return!1;return!0}function Ban(e,t,n,r){const i={};for(const s of xt(e))Mje(s)||At(Msn(s));for(let s of Hin){if(!e[s])continue;const o=e[s];if(xP(s)){const a=Vin(s),u=i[a];if(St(u)&&$on(u.type)&&St(o)&&!u.timeUnit){At(Rsn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(At(ksn),s=ih),!Lan(e,s,t)){At(A7(s,t));continue}if(s===Ly&&t==="line"){const a=im(e[s]);if(a!=null&&a.aggregate){At($sn);continue}}if(s===Xc&&(n?"fill"in e:"stroke"in e)){At(nUe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===bP||s===rA&&!at(o)&&!bp(o)||s===h_&&at(o)){if(o){if(s===rA){const a=e[s];if(BUe(a)){i[s]=a;continue}}i[s]=Lt(o).reduce((a,u)=>(St(u)?a.push(Rue(u,s)):At(iQ(u,s)),a),[])}}else{if(s===h_&&o===null)i[s]=null;else if(!St(o)&&!Am(o)&&!bp(o)&&!O7(o)&&!rn(o)){At(iQ(o,s));continue}i[s]=qUe(o,s,r)}}return i}function B7(e,t){const n={};for(const r of xt(e)){const i=qUe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function jan(e){const t=[];for(const n of xt(e))if(Fw(e,n)){const r=e[n],i=Lt(r);for(const s of i)St(s)?t.push(s):F7(s)&&t.push(s.condition)}return t}function Pue(e,t,n){if(e)for(const r of xt(e)){const i=e[r];if(at(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Uan(e,t,n,r){return e?xt(e).reduce((i,s)=>{const o=e[s];return at(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function ZUe(e,t){return xt(t).reduce((n,r)=>{switch(r){case Vs:case qa:case x7:case _7:case w7:case Pp:case wm:case Vb:case IS:case ih:case My:case Op:case $y:case Fp:case $p:case Mp:case Gd:case vP:case Qc:case uE:case h_:return n;case rA:if(e==="line"||e==="trail")return n;case bP:case b7:{const i=t[r];if(at(i)||St(i))for(const s of Lt(i))s.aggregate||n.push(Pt(s,{}));return n}case Ly:if(e==="trail")return n;case Xc:case _m:case Em:case By:case Hb:case qb:case Gb:case Wb:{const i=im(t[r]);return i&&!i.aggregate&&n.push(Pt(i,{})),n}}},[])}function zan(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(at(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function uQ(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Oue(t)}`:"";return{field:o+t.field,type:t.type,title:rn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=jan(n).map(Can);return{tooltip:[...i,..._0(s,$r)]}}function Oue(e){const{title:t,field:n}=e;return ko(t,n)}function Fue(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Oue(n);return eze(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Bt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function eze(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...rm(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...jb(e[t])?{}:e[t]}}]:[]}function tze(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:oO(s,n),continuousAxisChannelDef2:oO(o,n),continuousAxisChannelDefError:oO(a,n),continuousAxisChannelDefError2:oO(u,n),continuousAxis:i}}function oO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&At(fon(n,t)),r}else return e}function nze(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(rm(n)&&n.orient)return n.orient;if(Q1(i)){if(Q1(s)){const o=St(i)&&i.aggregate,a=St(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return lA(s)&&!lA(i)?"horizontal":"vertical"}return"horizontal"}else{if(Q1(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const SM="boxplot",Van=["box","median","outliers","rule","ticks"],Han=new L7(SM,ize);function rze(e){return fi(e)?"tukey":e}function ize(e,{config:t}){e={...e,encoding:B7(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=rm(n)?n:{type:n};i&&At(eUe("boxplot"));const u=a.extent??t.boxplot.extent,l=Di("size",a,t),c=a.invalid,f=rze(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:C}=qan(e,u,t),T=DS(m.field),{color:S,size:k,...I}=b,R=Ve=>Fue(a,g,m,Ve,t.boxplot),F=R(I),O=R(b),B=(jt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",H=R({...I,...k?{size:k}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...S||{value:B}}}}),U=uQ([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),G={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},Y=f==="min-max"?U:uQ([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),Q=[...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...F({partName:"ticks",mark:G,positionPrefix:"lower_whisker",extraEncoding:Y}),...F({partName:"ticks",mark:G,positionPrefix:"upper_whisker",extraEncoding:Y})],M=[...f!=="tukey"?Q:[],...O({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...H({partName:"median",mark:{type:"tick",invalid:c,...jt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:M};const j=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,L=`(${W} - ${j})`,q=`${j} - ${u} * ${L}`,J=`${W} + ${u} * ${L}`,re=`datum["${m.field}"]`,ve={joinaggregate:sze(m.field),groupby:y},pe={transform:[{filter:`(${q} <= ${re}) && (${re} <= ${J})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:Q},{tooltip:Ae,...ke}=I,{scale:it,axis:Re}=m,ut=Oue(m),Xe=Lc(Re,["title"]),Tt=eze(a,"outliers",t.boxplot,{transform:[{filter:`(${re} < ${q}) || (${re} > ${J})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ut!==void 0?{title:ut}:{},...it!==void 0?{scale:it}:{},...Qi(Xe)?{}:{axis:Xe}},...ke,...S?{color:S}:{},...C?{tooltip:C}:{}}})[0];let gt;const Ie=[...d,...h,ve];return Tt?gt={transform:Ie,layer:[Tt,pe]}:(gt=pe,gt.transform.unshift(...Ie)),{...o,layer:[gt,{transform:p,layer:M}]}}function sze(e){const t=DS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function qan(e,t,n){const r=nze(e,SM),{continuousAxisChannelDef:i,continuousAxis:s}=tze(e,r,SM),o=i.field,a=DS(o),u=rze(t),l=[...sze(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=zan(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=JUe(p,n),x=r==="vertical"?"horizontal":"vertical",_=r,C=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:C,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:h}}const $ue="errorbar",Wan=["ticks","rule"],Gan=new L7($ue,oze);function oze(e,{config:t}){e={...e,encoding:B7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=aze(e,$ue,t);delete s.size;const c=Fue(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Yan(e,t){const{encoding:n}=e;if(Kan(n))return{orient:nze(e,t),inputType:"raw"};const r=Xan(n),i=Qan(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qn(a)&&Qn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qn(a)){if(Q1(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qn(u)){if(Q1(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qn(u)&&!Qn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qn(c)&&!Qn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qn(a)&&Qn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qn(a)){if(Q1(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qn(l)){if(Q1(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Kan(e){return(Qn(e.x)||Qn(e.y))&&!Qn(e.x2)&&!Qn(e.y2)&&!Qn(e.xError)&&!Qn(e.xError2)&&!Qn(e.yError)&&!Qn(e.yError2)}function Xan(e){return Qn(e.x2)||Qn(e.y2)}function Qan(e){return Qn(e.xError)||Qn(e.xError2)||Qn(e.yError)||Qn(e.yError2)}function aze(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=rm(r)?r:{type:r};s&&At(eUe(t));const{orient:l,inputType:c}=Yan(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=tze(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=Jan(u,f,d,h,p,c,t,n),{[m]:x,[m==="x"?"x2":"y2"]:_,[m==="x"?"xError":"yError"]:C,[m==="x"?"xError2":"yError2"]:T,...S}=i,{bins:k,timeUnits:I,aggregate:R,groupby:F,encoding:O}=JUe(S,n),B=[...R,...g],H=c!=="raw"?[]:F,U=uQ(v,f,O,b);return{transform:[...a.transform??[],...k,...I,...B.length===0?[]:[{aggregate:B,groupby:H}],...y],groupby:H,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:O,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:U}}function Jan(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&At(con(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:yP(h)},{fieldPrefix:"upper_",titlePrefix:A_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:A_e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:zC({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:zC({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:zC({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&At(lon(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:d_(d_(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function A_e(e,t,n){return`${yP(e)} ${n} ${t}`}const Mue="errorband",Zan=["band","borders"],eun=new L7(Mue,uze);function uze(e,{config:t}){e={...e,encoding:B7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=aze(e,Mue,t),l=o,c=Fue(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?At(y_e("interpolate")):l.tension&&At(y_e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const lze={};function Lue(e,t,n){const r=new L7(e,t);lze[e]={normalizer:r,parts:n}}function tun(){return xt(lze)}Lue(SM,ize,Van);Lue($ue,oze,Wan);Lue(Mue,uze,Zan);const nun=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],cze={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},fze={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},run=xt(cze),iun=xt(fze),sun={header:1,headerRow:1,headerColumn:1,headerFacet:1},dze=xt(sun),hze=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],oun={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},aun={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},xp="_vgsid_",uun={point:{on:"click",fields:[xp],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Bue(e){return e==="legend"||!!(e!=null&&e.legend)}function Eq(e){return Bue(e)&&jt(e)}function jue(e){return!!(e!=null&&e.select)}function pze(e){const t=[];for(const n of e||[]){if(jue(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function lun(e){return j7(e)||zue(e)||Uue(e)}function Uue(e){return"concat"in e}function j7(e){return"vconcat"in e}function zue(e){return"hconcat"in e}function mze({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function sm(e){return jt(e)&&e.step!==void 0}function S_e(e){return e.view||e.width||e.height}const D_e=20,cun={align:1,bounds:1,center:1,columns:1,spacing:1},fun=xt(cun);function dun(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(P7(e)&&!CP(e.facet)||Uue(e))&&(i.columns=o),j7(e)&&(i.columns=1);for(const a of fun)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=fi(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function lQ(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function DM(e,t){const n=IM(e,t);return sm(n)?n.step:gze}function IM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ko(n,{step:e.step})}const gze=20,hun={continuousWidth:200,continuousHeight:200,step:gze},pun={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:hun,mark:han,arc:{},area:{},bar:gan,circle:{},geoshape:{},image:{},line:{},point:{},rect:yan,rule:{color:"black"},square:{},text:{color:"black"},tick:van,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:zon,projection:{},legend:oun,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:uun,style:{},title:{},facet:{spacing:D_e},concat:{spacing:D_e},normalizedNumberFormat:".0%"},Km=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],I_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},k_e={blue:Km[0],orange:Km[1],red:Km[2],teal:Km[3],green:Km[4],yellow:Km[5],purple:Km[6],pink:Km[7],brown:Km[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function mun(e={}){return{signals:[{name:"color",value:jt(e)?{...k_e,...e}:k_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function gun(e){return{signals:[{name:"fontSize",value:jt(e)?{...I_e,...e}:I_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function yun(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function yze(e){const t=xt(e||{}),n={};for(const r of t){const i=e[r];n[r]=SP(i)?Gje(i):xf(i)}return n}function vun(e){const t=xt(e),n={};for(const r of t)n[r]=yze(e[r]);return n}const bun=[...PUe,...KUe,...dze,"background","padding","legend","lineBreak","scale","style","title","view"];function vze(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=yS({},zn(pun),n?yun(n):{},t?mun(t):{},r?gun(r):{},s||{});i&&vS(o,"selection",i,!0);const a=Lc(o,bun);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=xf(o[u]));for(const u of PUe)o[u]&&(a[u]=xc(o[u]));for(const u of KUe)o[u]&&(a[u]=yze(o[u]));for(const u of dze)o[u]&&(a[u]=xc(o[u]));return o.legend&&(a.legend=xc(o.legend)),o.scale&&(a.scale=xc(o.scale)),o.style&&(a.style=vun(o.style)),o.title&&(a.title=xc(o.title)),o.view&&(a.view=xc(o.view)),a}const xun=new Set(["view",...aan]),wun=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],_un={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...dan};function Eun(e){e=zn(e);for(const t of wun)delete e[t];if(e.axis)for(const t in e.axis)SP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of nun)delete e.legend[t];if(e.mark){for(const t of x_e)delete e.mark[t];e.mark.tooltip&&jt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(pze(e.params)),delete e.params);for(const t of xun){for(const r of x_e)delete e[t][r];const n=_un[t];if(n)for(const r of n)delete e[t][r];Tun(e,t)}for(const t of tun())delete e[t];Cun(e);for(const t in e)jt(e[t])&&Qi(e[t])&&delete e[t];return Qi(e)?void 0:e}function Cun(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Wje(e.title);Qi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Qi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Qi(r)?delete e.title:e.title=r}function Tun(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Qi(s)||(e.style[n??t]=s),delete e[t]}function U7(e){return"layer"in e}function Aun(e){return"repeat"in e}function Sun(e){return!at(e.repeat)&&e.repeat.layer}class Vue{map(t,n){return P7(t)?this.mapFacet(t,n):Aun(t)?this.mapRepeat(t,n):zue(t)?this.mapHConcat(t,n):j7(t)?this.mapVConcat(t,n):Uue(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(U7(t))return this.mapLayer(t,n);if(Uy(t))return this.mapUnit(t,n);throw new Error(sue(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Dun={zero:1,center:1,normalize:1};function Iun(e){return e in Dun}const kun=new Set([kUe,I7,D7,_M,R7,Tue,Aue,k7,RUe,Cue]),Run=new Set([I7,D7,kUe]);function h2(e){return St(e)&&aA(e)==="quantitative"&&!e.bin}function R_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(St(o)&&St(a))if(h2(o)&&h2(a)){if(o.stack)return t;if(a.stack)return i;const u=St(o)&&!!o.aggregate,l=St(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(h2(o))return t;if(h2(a))return i}else{if(h2(o))return s&&n==="vertical"?void 0:t;if(h2(a))return s&&n==="horizontal"?void 0:i}}function Nun(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function bze(e,t){var m,g;const n=rm(e)?e:{type:e},r=n.type;if(!kun.has(r))return null;const i=R_e(t,"x",n)||R_e(t,"theta",n);if(!i)return null;const s=t[i],o=St(s)?Pt(s,{}):void 0,a=Nun(i),u=[],l=new Set;if(t[a]){const y=t[a],v=St(y)?Pt(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=St(f)?Pt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=qin.reduce((y,v)=>{if(v!=="tooltip"&&Fw(t,v)){const b=t[v];for(const x of Lt(b)){const _=im(x);if(_.aggregate)continue;const C=Pt(_,{});(!C||!l.has(C))&&y.push({channel:v,fieldDef:_})}}return y},[]);let p;return s.stack!==void 0?jb(s.stack)?p=s.stack?"zero":null:p=s.stack:Run.has(r)&&(p="zero"),!p||!Iun(p)||Nue(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Bc.LINEAR&&s!=null&&s.stack&&At(oon(s.scale.type)),Qn(t[Cm(i)])?(s.stack!==void 0&&At(son(i)),null):(St(s)&&s.aggregate&&!rsn.has(s.aggregate)&&At(aon(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:hE(r),stackBy:h,offset:p}))}function xze(e,t,n){const r=xc(e),i=Di("orient",r,n);if(r.orient=$un(r.type,t,i),i!==void 0&&i!==r.orient&&At(Vsn(r.orient,i)),r.type==="bar"&&r.orient){const u=Di("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:man[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Di("opacity",r,n),o=Di("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Oun(r.type,t)),Di("cursor",r,n)===void 0&&(r.cursor=Pun(r,t,n)),r}function Pun(e,t,n){return t.href||e.href||Di("href",e,n)?"pointer":e.cursor}function Oun(e,t){if(Mr([R7,Cue,Tue,Aue],e)&&!Nue(t))return .7}function Fun(e,t,{graticule:n}){if(n)return!1;const r=py("filled",e,t),i=e.type;return ko(r,i!==R7&&i!==k7&&i!==_M)}function $un(e,t,n){switch(e){case R7:case Tue:case Aue:case RUe:case san:case ian:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case I7:if(St(r)&&(nu(r.bin)||St(i)&&i.aggregate&&!r.aggregate))return"vertical";if(St(i)&&(nu(i.bin)||St(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(St(r)&&r.type===m_&&!gs(r.bin)||EM(r))&&St(i)&&nu(i.bin)?"horizontal":"vertical";if(!o)return(St(i)&&i.type===m_&&!gs(i.bin)||EM(i))&&St(r)&&nu(r.bin)?"vertical":"horizontal"}case _M:if(s&&!(St(r)&&nu(r.bin))&&o&&!(St(i)&&nu(i.bin)))return;case D7:if(o)return St(i)&&nu(i.bin)?"horizontal":"vertical";if(s)return St(r)&&nu(r.bin)?"vertical":"horizontal";if(e===_M){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case k7:case Cue:{const a=E_e(r),u=E_e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Gl(r)&&r.type===sA,c=Gl(i)&&i.type===sA;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Mun(e){const{point:t,line:n,...r}=e;return xt(r).length>1?r:r.type}function Lun(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Lc(e[t],["point","line"])});return e}function Cq(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?jt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?jt(t.point)?t.point:{}:void 0}function N_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Bun{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Uy(t)){const{mark:r,encoding:i}=t,s=rm(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!Cq(s,n[s.type],i);case"area":return!!Cq(s,n[s.type],i)||!!N_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=B7(l,i),d=rm(a)?a:{type:a},h=Cq(d,i[d.type],f),p=d.type==="area"&&N_e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:Mun({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Lc(f,["shape"])}],g=bze(xze(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Lc(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...tA(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...tA(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Lun(i)})}}function jun(e,t){return t?CP(e)?_ze(e,t):wze(e,t):e}function Tq(e,t){return t?_ze(e,t):e}function cQ(e,t,n){const r=t[e];if(_an(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};At(Esn(r.repeat));return}return t}function wze(e,t){if(e=cQ("field",e,t),e!==void 0){if(e===null)return null;if(Due(e)&&$0(e.sort)){const n=cQ("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function P_e(e,t){if(St(e))return wze(e,t);{const n=cQ("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function O_e(e,t){if(Qn(e)){const n=P_e(e,t);if(n)return n;if(O7(e))return{condition:e.condition}}else{if(TP(e)){const n=P_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function _ze(e,t){const n={};for(const r in e)if(vn(e,r)){const i=e[r];if(at(i))n[r]=i.map(s=>O_e(s,t)).filter(s=>s);else{const s=O_e(i,t);s!==void 0&&(n[r]=s)}}return n}class Uun{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Uy(t)){const{encoding:n,mark:r}=t;if(r==="line"||rm(r)&&r.type==="line")for(const i of zin){const s=lE(i),o=n[s];if(n[i]&&(St(o)&&!nu(o.bin)||Am(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return At(zsn(!!i.x2,!!i.y2)),r({...t,mark:jt(s)?{...s,type:"rule"}:"rule"},n)}}class zun extends Vue{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Han,Gan,eun,new Bun,new Uun]}map(t,n){if(Uy(t)){const r=Fw(t.encoding,Lg),i=Fw(t.encoding,Bg),s=Fw(t.encoding,v7);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=Tq(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Sun(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${zs(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!at(r)&&t.columns&&(t=Lc(t,["columns"]),At(h_e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!at(r)&&r.row||[u?u.row:null],f=!at(r)&&r.column||[u?u.column:null],d=at(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(at(r)?`${zs(p)}`:(r.row?`row_${zs(m)}`:"")+(r.column?`column_${zs(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Lc(b,["data"]))}const h=at(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return CP(r)&&t.columns&&(t=Lc(t,["columns"]),At(h_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=$_e({parentProjection:o,projection:i}),l=F_e({parentEncoding:s,encoding:Tq(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=Tq(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&At(jsn([...r?[Lg]:[],...i?[Bg]:[]]));const o={},a={};for(const u of[Lg,Bg]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:jun(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:F_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:$_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function F_e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...xt(e),...xt(t)]);for(const s of i){const o=t[s],a=e[s];if(Qn(o)){const u={...a,...o};r[s]=u}else TP(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||bp(a)||rn(a)||Qn(a)||at(a))&&(r[s]=a)}}else r=t;return!r||Qi(r)?void 0:r}function $_e(e){const{parentProjection:t,projection:n}=e;return t&&n&&At(Isn({parentProjection:t,projection:n})),n??t}function Hue(e){return"filter"in e}function Vun(e){return(e==null?void 0:e.stop)!==void 0}function Eze(e){return"lookup"in e}function Hun(e){return"data"in e}function qun(e){return"param"in e}function Wun(e){return"pivot"in e}function Gun(e){return"density"in e}function Yun(e){return"quantile"in e}function Kun(e){return"regression"in e}function Xun(e){return"loess"in e}function Qun(e){return"sample"in e}function Jun(e){return"window"in e}function Zun(e){return"joinaggregate"in e}function eln(e){return"flatten"in e}function tln(e){return"calculate"in e}function Cze(e){return"bin"in e}function nln(e){return"impute"in e}function rln(e){return"timeUnit"in e}function iln(e){return"aggregate"in e}function sln(e){return"stack"in e}function oln(e){return"fold"in e}function aln(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function uln(e){return e.map(t=>Hue(t)?{filter:jC(t.filter,Fon)}:t)}class lln extends Vue{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=M_e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=M_e(t,n),t.encoding){const r={};for(const[i,s]of nb(t.encoding))r[i]=Tze(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:nb(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of du(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function M_e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Hue(s))return{filter:fQ(s,t)};if(Cze(s)&&cE(s.bin))return{...s,bin:Aze(s.bin)};if(Eze(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function Tze(e,t){var r,i;const n=zn(e);if(St(n)&&cE(n.bin)&&(n.bin=Aze(n.bin)),pE(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(O7(n))if(at(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:fQ(s,t)}});else{const{selection:s,param:o,test:a,...u}=Tze(n.condition,t);n.condition=o?n.condition:{...u,test:fQ(n.condition,t)}}return n}function Aze(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function fQ(e,t){const n=r=>jC(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):jC(e.test||e.filter,r=>r.selection?n(r.selection):r)}class dQ extends Vue{map(t,n){const r=n.selections??[];if(t.params&&!Uy(t)){const i=[];for(const s of t.params)jue(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Bt(a)&&(a===t.name||i.includes(a))||at(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=dQ.prototype[e];dQ.prototype[e]=function(n,r){return t.call(this,n,cln(n,r))}}function cln(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Sze(e,t){t===void 0&&(t=vze(e.config));const n=pln(e,t),{width:r,height:i}=e,s=mln(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const fln=new zun,dln=new lln,hln=new dQ;function pln(e,t={}){const n={config:t};return hln.map(fln.map(dln.map(e,n),n),n)}function L_e(e){return Bt(e)?{type:e}:e??{}}function mln(e,t,n){let{width:r,height:i}=t;const s=Uy(e)||U7(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(At(l_e("width")),r=void 0),i=="container"&&(At(l_e("height")),i=void 0));const a={type:"pad",...o,...n?L_e(n.autosize):{},...L_e(e.autosize)};if(a.type==="fit"&&!s&&(At(dsn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&At(c_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&At(c_e("height")),!Sf(a,{type:"pad"}))return a}function gln(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function yln(e){return e?`fit-${E7(e)}`:"fit"}const vln=["background","padding"];function B_e(e,t){const n={};for(const r of vln)e&&e[r]!==void 0&&(n[r]=xf(e[r]));return t&&(n.params=e.params),n}class zy{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new zy(zn(this.explicit),zn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ko(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of xt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function r0(e){return{explicit:!0,value:e}}function df(e){return{explicit:!1,value:e}}function Dze(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:z7(t,n,r,i)}}function z7(e,t,n,r){return e.explicit&&t.explicit&&At(Jsn(n,r,e.value,t.value)),e}function sb(e,t,n,r,i=z7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Sf(e.value,t.value)?e:i(e,t,n,r)}class bln extends zy{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function cA(e){return"url"in e}function RR(e){return"values"in e}function Ize(e){return"name"in e&&!cA(e)&&!RR(e)&&!bv(e)}function bv(e){return e&&(kze(e)||Rze(e)||que(e))}function kze(e){return"sequence"in e}function Rze(e){return"sphere"in e}function que(e){return"graticule"in e}var Ms;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ms||(Ms={}));function Nze(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Wd(i.field),i}function v_(e,t=!0,n=il){if(at(e)){const r=e.map(i=>v_(i,t,n));return t?`[${r.join(", ")}]`:r}else if(fE(e))return n(t?p_(e):Eon(e));return t?n(Ji(e)):e}function xln(e,t){for(const n of du(e.component.selection??{})){const r=n.name;let i=`${r}${ab}, ${n.resolve==="global"?"true":`{unit: ${$w(e)}}`}`;for(const s of W7)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Jln,on:[{events:{signal:n.name+ab},update:`modify(${Nt(n.name+b_)}, ${i})`}]})}return Wue(t)}function wln(e,t){if(e.component.selection&&xt(e.component.selection).length){const n=Nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:zb("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Wue(t)}function _ln(e,t){let n=!1;for(const r of du(e.component.selection??{})){const i=r.name,s=Nt(i+b_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Xze}(${s}, ${Nt(a)}${u}`})}n=!0;for(const a of W7)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Wue(t)}function Eln(e,t){const n=[...t],r=$w(e,{escape:!1});for(const i of du(e.component.selection??{})){const s={name:i.name+b_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:xp}}]),i.init){const a=i.project.items.map(Nze);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[xp]:v_(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:v_(u,!1)}))}n.filter(a=>a.name===i.name+b_).length||n.push(s)}return n}function Pze(e,t){for(const n of du(e.component.selection??{}))for(const r of W7)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Cln(e,t){for(const n of e.children)lo(n)&&(t=Pze(n,t));return t}function Tln(e,t,n,r){const i=tVe(e,t.param,t);return{signal:Kf(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Wue(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Wi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){At(Asn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class jc extends Wi{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Ije()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function Aq(e){return e.as!==void 0}function j_e(e){return`${e}_end`}class M0 extends Wi{clone(){return new M0(null,zn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(dE(u)){if(lo(n)){const{mark:c,markDef:f,config:d}=n,h=ib({fieldDef:s,markDef:f,config:d});(kR(c)||h)&&(l={timeUnit:Ba(u),field:a})}}else l={as:Pt(s,{forAs:!0}),field:a,timeUnit:u};if(lo(n)){const{mark:c,markDef:f,config:d}=n,h=ib({fieldDef:s,markDef:f,config:d});kR(c)&&Ro(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[$r(l)]=l)}return i},{});return Qi(r)?null:new M0(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Ba(r),o={...i,timeUnit:s};return new M0(t,{[$r(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of nb(this.timeUnits)){const s=Aq(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(du(this.timeUnits).map(t=>Aq(t)?t.as:j_e(t.field)))}dependentFields(){return new Set(du(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${$r(this.timeUnits)}`}assemble(){const t=[];for(const n of du(this.timeUnits)){const{rectBandPosition:r}=n,i=Ba(n.timeUnit);if(Aq(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Wd(s),type:"timeunit",...a?{units:S7(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...U_e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=Oze({timeUnit:i,field:o}),u=j_e(o);t.push({type:"formula",expr:a,as:u}),t.push(...U_e([o,u],r,i))}}return t}}const V7="offsetted_rect_start",H7="offsetted_rect_end";function Oze({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=fUe(r),{part:o,step:a}=mUe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function U_e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:z_e([Oze({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${V7}`},{type:"formula",expr:z_e([i,s],n+.5),as:`${e}_${H7}`}]}return[]}function z_e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const DP="_tuple_fields";class Aln{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Sln={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Aln),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=zs(`${r}_${g}`);for(let v=1;a.has(y);v++)y=zs(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Lt(n.value):null;let{fields:d,encodings:h}=jt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(jt(p))for(const m of xt(p))Uin(m)?(h||(h=[])).push(m):l==="interval"?(At(_sn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){At(hsn(p,m.aggregate));continue}else if(!g){At(d_e(p));continue}if(m.timeUnit&&!dE(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[$r(y)]=y}if(!s[g]){const y=l==="interval"&&jy(p)&&Kf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===xp,Fje(p)?(v.geoChannel=p,v.channel=Oje(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else At(d_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===xp}f&&(t.init=f.map(p=>i.items.map(m=>jt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Qi(o)||(i.timeUnit=new M0(null,o))},signals:(e,t,n)=>{const r=t.name+DP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(Nze)})}},jg={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!jy(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&At(ysn),!s||!Kf(o)){At(gsn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||V_e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(Xze)>=0)i.update=`{${r.map(o=>`${Nt(Wd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Nt(Wd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!V_e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function hQ(e,t){return`domain(${Nt(e.scaleName(t))})`}function V_e(e){return e.parent&&FS(e.parent)&&!e.parent.parent}const VC="_brush",Fze="_scale_trigger",QD="geo_interval_init_tick",$ze="_init",Dln="_center",Iln={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...jt(n.select)?n.select:{}};i.fields=[xp],i.encodings||(i.encodings=n.value?xt(n.value):[$p,Fp]),n.select={type:"interval",...i}}if(t.translate&&!jg.defined(t)){const i=`!event.item || event.item.mark.name !== ${Nt(t.name+VC)}`;for(const s of t.events){if(!s.between){At(`${s} is not an ordered event stream for interval selections.`);continue}const o=Lt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ab,s=du(t.project.hasChannel).filter(a=>a.channel===Vs||a.channel===qa),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(kln(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Nt(e.projectionName()),u=e.projectionName()+Dln,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=_=>e.getSizeSignalRef(_).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+$ze,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${$w(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,x=s.map(_=>_.signals.visual);return n.concat({name:i,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...o?[{signal:QD}]:[]],update:b}]})}else{if(!jg.defined(t)){const l=r+Fze,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Kf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${$w(e)}, fields: ${r+DP}, values`;return n.concat({name:i,...o?{init:`{${u}: ${v_(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(lo(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===QD).length||n.unshift({name:QD,value:null,on:[{events:"timer{1}",update:`${QD} === null ? {} : ${QD}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Nt(t.name+b_)})`;if(jg.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of xt(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${$w(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=xt(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+VC}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+VC,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function kln(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Vs?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=jg.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:v_(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+Fze},update:Kf(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:v_(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Vs?0:1,h=t.name+$ze,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Rln={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+DP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=du(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+VC):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${$w(e)}, `;if(t.project.hasSelectionId)l+=`${xp}: ${o}[${Nt(xp)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Nt(e.vgField(d.channel,{}))}], ${o}[${Nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+ab,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function RS(e,t,n,r){const i=O7(t)&&t.condition,s=r(t);if(i){const a=Lt(i).map(u=>{const l=r(u);if(wan(u)){const{param:c,empty:f}=u;return{test:eVe(e,{param:c,empty:f}),...l}}else return{test:NM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Gue(e,t="text"){const n=e.encoding[t];return RS(e,n,t,r=>q7(r,e.config))}function q7(e,t,n="datum"){if(e){if(bp(e))return Es(e.value);if(Qn(e)){const{format:r,formatType:i}=TM(e);return Eue({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Mze(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(at(o))return{tooltip:H_e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return RS(e,o,"tooltip",u=>{const l=q7(u,i,a);if(l)return l;if(u===null)return;let c=Di("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Bt(c))return{value:c};if(jt(c))return rn(c)?c:c.content==="encoding"?H_e(n,s,i,t):{signal:a}})}}function Lze(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=lE(f),h=Gl(c)?c:{...c,type:e[d].type},p=h.title||kue(h,i),m=Lt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Ro(f)){const y=f==="x"?"x2":"y2",v=im(e[y]);if(nu(h.bin)&&v){const b=Pt(h,{expr:o}),x=Pt(v,{expr:o}),{format:_,formatType:C}=TM(h);g=EP(b,x,_,C,i),s[y]=!0}}if((Ro(f)||f===ih||f===Op)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=TM(h);g=Eue({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=q7(h,i,o).signal),a.push({channel:f,key:m,value:g})}Pue(e,(c,f)=>{St(c)?u(c,f):F7(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function H_e(e,t,n,{reactiveGeom:r}={}){const i=Lze(e,t,n,{reactiveGeom:r}),s=nb(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Nln(e){const{markDef:t,config:n}=e,r=Di("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Pln(e),...Oln(e)}}function Pln(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Di("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in lsn?{}:{ariaRoleDescription:{value:t}}}function Oln(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return RS(e,s,"description",u=>q7(u,e.config));const o=Di("description",n,r);if(o!=null)return{description:Es(o)};if(r.aria===!1)return{};const a=Lze(t,i,r);if(!Qi(a))return{description:{signal:nb(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Na(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Di(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Es(u)));const l=i[e];return RS(t,l,o??e,c=>_ue({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function Bze(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Di("filled",n,i),a=Mr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Di(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Di(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Es(u)}:{},...l?{stroke:Es(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&At(nUe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Na("color",e,{vgChannel:c,defaultValue:o?u:l}),...Na("fill",e,{defaultValue:r.fill?u:void 0}),...Na("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Fln(e){const{encoding:t,mark:n}=e,r=t.order;return!hE(n)&&bp(r)?RS(e,r,"zindex",i=>Es(i.value)):{}}function fA({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:_ue({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Es(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Gu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Cm(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=fA({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Yue({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Ro(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:$ln({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function $ln(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qn(n)&&i&&t===i.fieldChannel){if(St(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return wM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Ow(n,r,{suffix:"end"},{offset:s})}return xue(e)}function Yue({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=lE(n),u=rb(n),l=Di(n,s,o,{vgChannel:u});if(l!==void 0)return jk(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Mr([Bc.LOG,Bc.TIME,Bc.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Jc(n)],mult:.5}}}}const Mln={left:"x",center:"xc",right:"x2"},Lln={top:"y",middle:"yc",bottom:"y2"};function jze(e,t,n,r="middle"){if(e==="radius"||e==="theta")return rb(e);const i=e==="x"?"align":"baseline",s=Di(i,t,n);let o;return rn(s)?(At(Usn(i)),o=void 0):o=s,e==="x"?Mln[o||(r==="top"?"left":"center")]:Lln[o||r]}function kM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Uze(e,t,{defaultPos:n,defaultPos2:r}):Gu(e,t,{defaultPos:n})}function Uze(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Cm(e),a=Jc(e),u=Bln(t,r,o),l=u[a]?jze(e,i,s):rb(e);return{...Gu(e,t,{defaultPos:n,vgChannel:l}),...u}}function Bln(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=lE(n),l=Jc(n),c=rb(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?fA({channel:n,markDef:s,encoding:r,model:e}):fA({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Jc(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=jln({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:aO(n,s)||aO(n,{[n]:bM(n,s,a.style),[l]:bM(l,s,a.style)})||aO(n,a[i])||aO(n,a.mark)||{[c]:Yue({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function jln({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Ow(t,s,{suffix:"start"},{offset:u}):xue({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function aO(e,t){const n=Jc(e),r=rb(e);if(t[r]!==void 0)return{[r]:jk(e,t[r])};if(t[e]!==void 0)return{[r]:jk(e,t[e])};if(t[n]){const i=t[n];if(y_(i))At(Fsn(n));else return{[n]:jk(e,i)}}}function ob(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Cm(t),a=Jc(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Di("size",i,n,{vgChannel:a}),p=Bje(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return St(u)&&(gs(u.bin)||nu(u.bin)||u.timeUnit&&!l)&&!(h&&!y_(h))&&!r[p]&&!za(f)?Vln({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qn(u)&&za(f)||m)&&!l?zln(u,t,e):Uze(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Uln(e,t,n,r,i,s,o){if(y_(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=py("minBandSize",{type:o},r);return{signal:c?`max(${Xh(c)}, ${l})`:l}}else i.band!==1&&(At(qsn(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(rn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Kb(u)&&fi(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ko(u,o==="bar"?l:c);if(rn(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(fi(f))return{signal:`${1-f} * ${e}`}}return{value:DM(r.view,e)-2}}function zln(e,t,n){var k,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Jc(t),f=Cm(t),d=Bje(t),h=n.scaleName(d),p=n.getScaleComponent(eue(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Na("size",n,{vgChannel:c,defaultRef:Es(r.size)}):At(Ksn(r.type)));const y=!!g,v=MUe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(k=l||p)==null?void 0:k.get("type"),useVlSizeChannel:m});g=g||{[c]:Uln(c,h||u,p||l,s,v,!!e,r.type)};const b=((I=l||p)==null?void 0:I.get("type"))==="band"&&y_(v)&&!y?"top":"middle",x=jze(t,r,s,b),_=x==="xc"||x==="yc",{offset:C,offsetType:T}=fA({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),S=xue({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:C,defaultRef:Yue({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:_?T==="encoding"?0:.5:rn(v)?{signal:`(1-${v})/2`}:y_(v)?(1-v.band)/2:0});if(c)return{[x]:S,...g};{const R=rb(f),F=g[c],O=C?{...F,offset:C}:F;return{[x]:S,[R]:at(S)?[S[0],{...S[1],offset:O}]:{...S,offset:O}}}}function q_e(e,t,n,r,i,s,o){if(Pje(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(rn(n)||rn(i)||rn(r)||s){const l=Xh(n),c=Xh(i),f=Xh(r),d=Xh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Vln({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=MUe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=Ro(n)?Di("binSpacing",s,i)??0:0,m=Cm(n),g=rb(n),y=rb(m),v=py("minBandSize",s,i),{offset:b}=fA({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:x}=fA({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),_=ean({fieldDef:e,scaleName:u}),C=q_e(n,p,c,h,b,v,_),T=q_e(m,p,c,h,x??b,v,_),S=rn(f)?{signal:`(1-${f.signal})/2`}:y_(f)?(1-f.band)/2:.5,k=ib({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(gs(e.bin)||e.timeUnit){const R=e.timeUnit&&k!==.5;return{[y]:W_e({fieldDef:e,scaleName:u,bandPosition:S,offset:T,useRectOffsetField:R}),[g]:W_e({fieldDef:e,scaleName:u,bandPosition:rn(S)?{signal:`1-${S.signal}`}:1-S,offset:C,useRectOffsetField:R})}}else if(nu(e.bin)){const R=Ow(e,u,{},{offset:T});if(St(t))return{[y]:R,[g]:Ow(t,u,{},{offset:C})};if(cE(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${Pt(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}At(sUe(m))}function W_e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return wM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:V7,endSuffix:H7}:{}})}const Hln=new Set(["aria","width","height"]);function sh(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Bze(e):{};return{...qln(e.markDef,t),...G_e(e,"fill",n),...G_e(e,"stroke",r),...Na("opacity",e),...Na("fillOpacity",e),...Na("strokeOpacity",e),...Na("strokeWidth",e),...Na("strokeDash",e),...Fln(e),...Mze(e),...Gue(e,"href"),...Nln(e)}}function G_e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Di("invalid",s,r)==="hide"&&n&&!hE(i)){const a=Wln(e,{invalid:!0,channels:C7});if(a)return{[t]:[{test:a,value:null},...Lt(n)]}}return n?{[t]:n}:{}}function qln(e,t){return usn.reduce((n,r)=>(!Hln.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Es(e[r])),n),{})}function Wln(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Kf(u)&&(s[l]=!0)}return s},{}),i=xt(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>wue(o,t)).join(` ${s} `)}}function Kue(e){const{config:t,markDef:n}=e;if(Di("invalid",n,t)){const i=Gln(e,{channels:Tm});if(i)return{defined:{signal:i}}}return{}}function Gln(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Kf(l)&&(s[c]=!0)}return s},{}),i=xt(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>wue(o,t)).join(` ${s} `)}}function Y_e(e,t){if(t!==void 0)return{[e]:Es(t)}}const Sq="voronoi",zze={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Sq)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(hE(s))return At(psn(s)),n;const o={name:e.getName(Sq),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Mze(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(Sq)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},Vze={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Bue(e.bind),parse:(e,t,n)=>Qze(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=zze.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=zs(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:v_(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+ab)[0],o=r+DP,a=i.items.map(l=>zs(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},RM="_toggle",Hze={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+RM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ab,r=t.name+RM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${$w(e)}}, `)+`${r} ? ${n} : null`}},Yln={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Bt(t.clear)?zb(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Vze.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===zs(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ab);r(i,"null"),Hze.defined(t)&&(i=n.findIndex(s=>s.name===t.name+RM),r(i,"false"))}return n}},qze={defined:e=>{const t=e.resolve==="global"&&e.bind&&Bue(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==xp;return t&&!n&&At(vsn),t&&n},parse:(e,t,n)=>{const r=zn(n);if(r.select=Bt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Qze(t,r),jt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Lt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=Eq(t.bind)?t.bind.legend:"click",s=Bt(i)?zb(i,"view"):Lt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Eq(t.bind)&&t.bind.legend,s=o=>a=>{const u=zn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${zs(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+ab),o=r+DP,a=i.items.filter(d=>d.hasLegend).map(d=>zs(`${r}_${zs(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+RM),f=Eq(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Kln(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of du(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&qze.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const Wze="_translate_anchor",Gze="_translate_delta",Xln={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=jg.defined(t),s=r+Wze,{x:o,y:a}=t.project.hasChannel;let u=zb(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+VC,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?hQ(e,Vs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?hQ(e,qa):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Gze,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&K_e(e,t,o,"width",n),a!==void 0&&K_e(e,t,a,"height",n),n}};function K_e(e,t,n,r,i){const s=t.name,o=s+Wze,a=s+Gze,u=n.channel,l=jg.defined(t),c=i.filter(_=>_.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Vs?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?x:`clampRange(${x}, 0, ${f})`})}const Yze="_zoom_anchor",Kze="_zoom_delta",Qln={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=jg.defined(t),s=r+Kze,{x:o,y:a}=t.project.hasChannel,u=Nt(e.scaleName(Vs)),l=Nt(e.scaleName(qa));let c=zb(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+VC,f))),n.push({name:r+Yze,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&X_e(e,t,o,"width",n),a!==void 0&&X_e(e,t,a,"height",n),n}};function X_e(e,t,n,r,i){const s=t.name,o=n.channel,a=jg.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?hQ(e,o):u.name,h=s+Kze,p=`${s}${Yze}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const b_="_store",ab="_tuple",Jln="_modify",Xze="vlSelectionResolve",W7=[Rln,Iln,Sln,Hze,Vze,jg,qze,Yln,Xln,Qln,zze];function Zln(e){let t=e.parent;for(;t&&!Pf(t);)t=t.parent;return t}function $w(e,{escape:t}={escape:!0}){let n=t?Nt(e.name):e.name;const r=Zln(e);if(r){const{facet:i}=r;for(const s of Pd)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Nt(r.vgField(s))}])`)}return n}function Xue(e){return du(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Qze(e,t){(Bt(t.select)||!t.select.on)&&delete e.events,(Bt(t.select)||!t.select.clear)&&delete e.clear,(Bt(t.select)||!t.select.toggle)&&delete e.toggle}function pQ(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...pQ(e.object)),t.push(...pQ(e.property))),t)}function Jze(e){return e.object.type==="MemberExpression"?Jze(e.object):e.object.name==="datum"}function Zze(e){const t=gae(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Jze(r)&&n.add(pQ(r).slice(1).join("."))}),n}class NS extends Wi{clone(){return new NS(null,this.model,zn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=NM(this.model,this.filter,this),this._dependentFields=Zze(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function ecn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=zs(i.name),o=i.select,a=Bt(o)?o:o.type,u=jt(o)?zn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=zn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Bt(u.on)?zb(u.on,"scope"):Lt(zn(u.on))},f=zn(i);for(const d of W7)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function eVe(e,t,n,r="datum"){const i=Bt(t)?t:t.param,s=zs(i),o=Nt(s+b_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function tVe(e,t,n){const r=zs(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&At(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,At((a.length?"Multiple ":"No ")+`matching ${Nt(i)} encoding found for selection ${Nt(n.param)}. Using "field": ${Nt(s)}.`)):s=a[0].field}return`${o.name}[${Nt(Wd(s))}]`}function tcn(e,t){for(const[n,r]of nb(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new jc(new NS(t,e,{param:n}),i,Ms.Lookup,e.component.data.outputNodeRefCounts)}}function NM(e,t,n){return Bk(t,r=>Bt(r)?r:Non(r)?eVe(e,r,n):yUe(r))}function ncn(e,t){if(e)return at(e)&&!T1(e)?e.map(n=>kue(n,t)).join(", "):e}function Dq(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function YI(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Fan[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(SP(m)){const{condition:g,...y}=m,v=Lt(g),b=C_e[h];if(b){const{vgProp:x,part:_}=b,C=[...v.map(T=>{const{test:S,...k}=T;return{test:NM(null,S),...k}}),y];Dq(c,_,x,C),delete c[h]}else if(b===null){const x={signal:v.map(_=>{const{test:C,...T}=_;return`${NM(null,C)} ? ${u_e(T)} : `}).join("")+u_e(y)};c[h]=x}}else if(rn(m)){const g=C_e[h];if(g){const{vgProp:y,part:v}=g;Dq(c,v,y,m),delete c[h]}}Mr(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Qi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ko(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&rn(c.encode.labels.update.text)&&(p=d_(a,"datum.label",c.encode.labels.update.text.signal)),Dq(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of GUe)e.hasAxisPart(p)||delete c.encode[p];Qi(c.encode)&&delete c.encode}const h=ncn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ko(l,0)}}}}function nVe(e){const{axes:t}=e.component,n=[];for(const r of Tm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function rcn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>YI(i,"grid",t)),...r.map(i=>YI(i,"grid",t)),...n.map(i=>YI(i,"main",t)),...r.map(i=>YI(i,"main",t))].filter(i=>i)}function Q_e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...xt(o),...xt(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Xh(o[c])} : ${Xh(a[c])}`};return l}return t[i]})])}function icn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:wUe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=rn(n)?"axisOrient":`axis${yP(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Q_e(a,r,e,n),vgAxisConfig:Q_e(u,r,e,n),axisConfigStyle:scn([...u,...a],r)}}function scn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Lt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function mQ(e,t,n,r={}){var s;const i=Kje(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const J_e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??ocn(n,e),gridScale:({model:e,channel:t})=>acn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||iVe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||rVe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??lcn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??ccn(t.type,n,St(t)&&!!t.timeUnit,St(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??dcn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:hcn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=sVe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return Qje(i?[__e(i)]:[],St(o)?[__e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>pcn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??mcn(n,t)};function ocn(e,t){return!za(e)&&St(t)&&!gs(t==null?void 0:t.bin)&&!nu(t==null?void 0:t.bin)}function acn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function ucn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return rn(s)?s:IR(s);{const{configValue:o}=mQ("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?IR(o):n===Vs&&Mr([bue,vue],e.type)&&!(St(e)&&e.timeUnit)?270:void 0}}function gQ(e){return`(((${e.signal} % 360) + 360) % 360)`}function rVe(e,t,n,r){if(e!==void 0)if(n==="x"){if(rn(e)){const i=gQ(e),s=rn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(rn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(rn(e)){const i=gQ(e),s=rn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(rn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function iVe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(rn(e)){const o=gQ(e),a=rn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(rn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function lcn(e,t){if(t==="x"&&Mr(["quantitative","temporal"],e))return!0}function ccn(e,t,n,r){if(n&&!jt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function fcn(e){return e==="x"?"bottom":"left"}function dcn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!za(t)&&t!=="log"){if(St(e)){if(gs(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Mr(["month","hours","day","quarter"],(i=Ba(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function hcn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(St(t)){const{timeUnit:n}=t;if(n){const r=pUe(n);if(r)return{signal:r}}}}function sVe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return Jje(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function pcn(e,t){const n=e.values;if(at(n))return WUe(t,n);if(rn(n))return n}function mcn(e,t){return e==="rect"&&CM(t)?1:0}class dA extends Wi{clone(){return new dA(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Zze(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(pE(r)&&$Ue(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${yUe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new dA(t,{calculate:u,as:hA(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${$r(this.transform)}`}}function hA(e,t,n){return Pt(e,{prefix:t,suffix:"sort_index",...n})}function G7(e,t){return Mr(["top","bottom"],t)?"column":Mr(["left","right"],t)||e==="row"?"row":"column"}function pA(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ko((t||{})[e],i[e],n.header[e])}function Y7(e,t,n,r){const i={};for(const s of e){const o=pA(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Que=["row","column"],Jue=["header","footer"];function gcn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=Y7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=G7(t,a),l=IR(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...aVe(l,u),...oVe(u,l,s),...uVe(r,i,t,run,cze)}}}function oVe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=iVe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function aVe(e,t){const n=rVe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ycn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Jue)if(n[i])for(const s of n[i]){const o=bcn(e,t,i,n,s);o!=null&&r.push(o)}return r}function vcn(e,t){const{sort:n}=e;return $0(n)?{field:Pt(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:hA(e,t,{expr:"datum"}),order:"ascending"}:{field:Pt(e,{expr:"datum"}),order:n??"ascending"}}function yQ(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=Y7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Eue({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=G7(t,a);return{text:{signal:u?d_(d_(u,"datum.label",l),"datum.value",Pt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...aVe(s,c),...oVe(c,s,o),...uVe(n,e,t,iun,fze)}}function bcn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=Y7(["labelOrient"],o.header,a,t);(t==="row"&&!Mr(["top","bottom"],f)||t==="column"&&!Mr(["left","right"],f))&&(s=yQ(o,t,a))}const u=Pf(e)&&!CP(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:vcn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const xcn={column:{start:0,end:1},row:{start:1,end:0}};function wcn(e,t){return xcn[t][e]}function _cn(e,t){const n={};for(const r of Pd){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=Y7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=G7(r,o),u=wcn(s,a);u!==void 0&&(n[a]=u)}}return Qi(n)?void 0:n}function uVe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=pA(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Zue(e){return[...uO(e,"width"),...uO(e,"height"),...uO(e,"childWidth"),...uO(e,"childHeight")]}function uO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(za(o)&&Kb(a)){const u=e.scaleName(n);return Pf(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Z_e(u,a)]:[Z_e(u,a),{name:i,update:lVe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=lQ(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Z_e(e,t){const n=`${e}_step`;return rn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function lVe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ko(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Xh(o)}, ${Xh(s)}) * ${e}_step`}function cVe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function fVe(e,t){return xt(e).reduce((n,r)=>{const i=e[r];return{...n,...RS(t,i,r,s=>Es(s.value))}},{})}function dVe(e,t){if(Pf(t))return e==="theta"?"independent":"shared";if(FS(t))return"shared";if(ole(t))return Ro(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function ele(e,t){const n=e.scale[t],r=Ro(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&At(eon(t)),"independent"):e[r][t]||"shared"}const Ecn={...aun,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},hVe=xt(Ecn);class Ccn extends zy{}const eEe={symbols:Tcn,gradient:Acn,labels:Scn,entries:Dcn};function Tcn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...fsn({},n,can),...Bze(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?pVe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Xc)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Es(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Es(m??1));else if(at(f.fill)){const g=vQ(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Es(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Xc)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(at(f.stroke)){const g=ko(vQ(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==By){const g=St(t)&&gVe(n,i,t);g?f.opacity=[{test:g,...Es(m??1)},Es(u.legend.unselectedOpacity)]:m&&(f.opacity=Es(m))}return f={...f,...e},Qi(f)?void 0:f}function Acn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?pVe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Es(l)),a={...a,...e},Qi(a)?void 0:a}function Scn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=St(t)?gVe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;g_(c)?f=Jh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Jh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&St(t)&&t.timeUnit===void 0&&(f=Jh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Qi(d)?void 0:d}function Dcn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function pVe(e){return mVe(e,(t,n)=>Math.max(t,n.value))}function vQ(e){return mVe(e,(t,n)=>ko(t,n.value))}function mVe(e,t){if(Ean(e))return Lt(e.condition).reduce(t,e.value);if(bp(e))return e.value}function gVe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Nt(n.field);return r.map(s=>`(!length(data(${Nt(zs(s)+b_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const tEe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return SUe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return DUe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Fcn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??$cn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??kcn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>zC(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(UC(n)&&Qh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Icn(t,e)};function Icn(e,t){const n=e.values;if(at(n))return WUe(t,n);if(rn(n))return n}function kcn(e,t,n,r){if(t!=="shape"){const i=vQ(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Rcn(e){const{legend:t}=e;return ko(t.type,Ncn(e))}function Ncn({channel:e,timeUnit:t,scaleType:n}){if(UC(e)){if(Mr(["quarter","month","day"],t))return"symbol";if(Qh(n))return"gradient"}return"symbol"}function Pcn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Ocn(n,t)}function Ocn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Fcn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Qh(i))return n==="horizontal"?r==="top"||r==="bottom"?nEe(t,"width",o,s):o:nEe(t,"height",u,a)}function nEe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function $cn(e){if(Mr(["quantile","threshold","log","symlog"],e))return"greedy"}function yVe(e){const t=lo(e)?Mcn(e):Ucn(e);return e.component.legends=t,t}function Mcn(e){const{encoding:t}=e,n={};for(const r of[Xc,...hze]){const i=da(t[r]);!i||!e.getScaleComponent(r)||r===Qc&&St(i)&&i.type===kS||(n[r]=jcn(e,r))}return n}function Lcn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Bcn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function jcn(e,t){var x;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Ccn({},Lcn(e,t));Kln(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=da(i[t]),f=St(c)?(x=Ba(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||s.legend.orient||"right",h=Rcn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Pcn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const _ of hVe){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const C=_ in tEe?tEe[_](m):n[_];if(C!==void 0){const T=Bcn(C,_,n,e.fieldDef(t));(T||s.legend[_]===void 0)&&a.set(_,C,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const C=fVe(g[_]??{},e),T=_ in eEe?eEe[_](C,b):C;T!==void 0&&!Qi(T)&&(v[_]={...y!=null&&y.length&&St(c)?{name:`${zs(c.field)}_legend_${_}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return Qi(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Ucn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){yVe(r);for(const i of xt(r.component.legends))n.legend[i]=ele(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=vVe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of xt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function vVe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of hVe){const c=sb(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return zcn(f,d);case"title":return Zje(f,d);case"type":return i=!0,df("symbol")}return z7(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&vM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&vM(e.explicit,["encode","gradient"])),e}function zcn(e,t){return t.value==="circle"?t:e}function Vcn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function bVe(e){const t=e.component.legends,n={};for(const i of xt(t)){const s=e.getScaleComponent(i),o=Ji(s.get("domains"));if(n[o])for(const a of n[o])vVe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return du(n).flat().map(i=>Hcn(i,e.config)).filter(i=>i!==void 0)}function Hcn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of hze)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&rn(s.encode.labels.update.text)&&(l=d_(r,"datum.label",s.encode.labels.update.text.signal)),Vcn(s,"labels","text",{signal:l})}return s}}function qcn(e){return FS(e)||ole(e)?Wcn(e):xVe(e)}function Wcn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),xVe(e))}function xVe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=rn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Mr(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Gcn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class wVe extends zy{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function _Ve(e){e.component.projection=lo(e)?Ycn(e):Qcn(e)}function Ycn(e){if(e.hasProjection){const t=xc(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Kcn(e):void 0,s=new wVe(e.projectionName(!0),{...xc(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Kcn(e){const t=[],{encoding:n}=e;for(const r of[[$p,Fp],[Gd,Mp]])(da(n[r[0]])||da(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Qc)&&e.typedFieldDef(Qc).type===kS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ms.Main)),t}function Xcn(e,t){const n=Gae(Gcn,i=>!!(!vn(e.explicit,i)&&!vn(t.explicit,i)||vn(e.explicit,i)&&vn(t.explicit,i)&&Sf(e.get(i),t.get(i))));if(Sf(e.size,t.size)){if(n)return e;if(Sf(e.explicit,{}))return t;if(Sf(t.explicit,{}))return e}return null}function Qcn(e){if(e.children.length===0)return;let t;for(const r of e.children)_Ve(r);const n=Gae(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Xcn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new wVe(r,t.specifiedProjection,t.size,zn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Jcn(e,t,n,r){if(AP(t,n)){const i=lo(e)?e.axis(n)??e.legend(n)??{}:{},s=Pt(t,{expr:"datum"}),o=Pt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Pt(t,{binSuffix:"range",forAs:!0}),formula:EP(s,o,i.format,i.formatType,r)}}return{}}function EVe(e,t){return`${qje(e)}_${t}`}function Zcn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function tle(e,t,n){const r=$7(n,void 0)??{},i=EVe(r,t);return e.getName(`${i}_bins`)}function efn(e){return"as"in e}function rEe(e,t,n){let r,i;efn(e)?r=Bt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Pt(e,{forAs:!0}),Pt(e,{binSuffix:"end",forAs:!0})];const s={...$7(t,void 0)},o=EVe(s,e.field),{signal:a,extentSignal:u}=Zcn(n,o);if(T7(s.extent)){const c=s.extent;i=tVe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class L0 extends Wi{clone(){return new L0(null,zn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Gl(s)&&gs(s.bin)){const{key:a,binComponent:u}=rEe(s,s.bin,n);i[a]={...u,...i[a],...Jcn(n,s,o,n.config)}}return i},{});return Qi(r)?null:new L0(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=rEe(n,n.bin,r);return new L0(t,{[i]:s})}merge(t,n){for(const r of xt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=_0([...this.bins[r].as,...t.bins[r].as],$r)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(du(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(du(this.bins).map(t=>t.field))}hash(){return`Bin ${$r(this.bins)}`}assemble(){return du(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Wd(t.field),as:r,signal:t.signal,...T7(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Wd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Pt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function tfn(e,t,n,r){var s;const i=lo(r)?r.encoding[Cm(t)]:void 0;if(Gl(n)&&lo(r)&&LUe(n,i,r.markDef,r.config)){e.add(Pt(n,{})),e.add(Pt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=ib({fieldDef:n,markDef:a,config:u});kR(o)&&l!==.5&&Ro(t)&&(e.add(Pt(n,{suffix:V7})),e.add(Pt(n,{suffix:H7}))),n.bin&&AP(n,t)&&e.add(Pt(n,{binSuffix:"range"}))}else if(Fje(t)){const o=Oje(t);e.add(r.getName(o))}else e.add(Pt(n));return pE(n)&&qon((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function nfn(e,t){for(const n of xt(t)){const r=t[n];for(const i of xt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class op extends Wi{clone(){return new op(null,new Set(this.dimensions),zn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Pt(o,{forAs:!0})]);else{if(hy(u)||Yb(u)){const c=hy(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Pt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Pt(o,{forAs:!0})]);jy(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Pt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Pt({field:l,aggregate:"max"},{forAs:!0})]))}else tfn(s,a,o,n)}),s.size+xt(i).length===0)?null:new op(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Pt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Pt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+xt(i).length===0?null:new op(t,r,i)}merge(t){return Aje(this.dimensions,t.dimensions)?(nfn(this.measures,t.measures),!0):(gon("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...xt(this.measures)])}producedFields(){const t=new Set;for(const n of xt(this.measures))for(const r of xt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${$r({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of xt(this.measures))for(const o of xt(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Wd(s));return{type:"aggregate",groupby:[...this.dimensions].map(Wd),ops:t,fields:n,as:r}}}class PS extends Wi{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Pd){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Pt(o),...gs(a)?[Pt(o,{binSuffix:"end"})]:[]],...$0(u)?{sortField:u}:at(u)?{sortIndexField:hA(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Pd)this[n]&&(t+=` ${n.charAt(0)}:${$r(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Pd)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Pd)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Tm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(za(i)&&Kb(s)){const o=K7(this.childModel,n),a=sle(o);a?t[n]=a:At(oue(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=N7,field:f}=u;s.push(f),o.push(c),a.push(Pt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Que){for(const c of Jue){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Bg,Lg])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function iEe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function rfn(e,t){const n=Xae(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=iEe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=iEe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return At(Tsn(t)),null}function ifn(e){const t={};return GF(e.filter,n=>{if(gUe(n)){let r=null;cue(n)?r=xf(n.equal):due(n)?r=xf(n.lte):fue(n)?r=xf(n.lt):hue(n)?r=xf(n.gt):pue(n)?r=xf(n.gte):mue(n)?r=n.range[0]:gue(n)&&(r=(n.oneOf??n.in)[0]),r&&(fE(r)?t[n.field]="date":fi(r)?t[n.field]="number":Bt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function sfn(e){const t={};function n(r){lA(r)?t[r.field]="date":r.type==="quantitative"&&nsn(r.aggregate)?t[r.field]="number":nA(r.field)>1?r.field in t||(t[r.field]="flatten"):pE(r)&&$0(r.sort)&&nA(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((lo(e)||Pf(e))&&e.forEachFieldDef((r,i)=>{if(Gl(r))n(r);else{const s=lE(i),o=e.fieldDef(s);n({...r,type:o.type})}}),lo(e)){const{mark:r,markDef:i,encoding:s}=e;if(hE(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];St(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function ofn(e){const t={};if(lo(e)&&e.component.selection)for(const n of xt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&nA(i.field)>1&&(t[i.field]="flatten")}return t}class Yu extends Wi{clone(){return new Yu(null,zn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${$r(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!bv(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of xt(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:At(p_e(a,r[a],u.value)))}for(const a of xt(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:At(p_e(a,n[a],u)))}const s=new zy(n,r);i.copyAll(s);const o={};for(const a of xt(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return xt(o).length===0||i.parseNothing?null:new Yu(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of xt(this._parse)){const r=this._parse[n];nA(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(xt(this._parse))}dependentFields(){return new Set(xt(this._parse))}assembleTransforms(t=!1){return xt(this._parse).filter(n=>t?nA(n)>1:!0).map(n=>{const r=rfn(n,this._parse[n]);return r?{type:"formula",expr:r,as:DS(n)}:null}).filter(n=>n!==null)}}class ub extends Wi{clone(){return new ub(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([xp])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:xp}}}class IP extends Wi{clone(){return new IP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${$r(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class kP extends Wi{clone(){return new kP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${$r(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class x_ extends Wi{constructor(t){super(null),t??(t={name:"source"});let n;if(bv(t)||(n=t.format?{...Lc(t.format,["parse"])}:{}),RR(t))this._data={values:t.values};else if(cA(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Mr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else Rze(t)?this._data={values:[{type:"Sphere"}]}:(Ize(t)||bv(t))&&(this._data={});this._generator=bv(t),t.name&&(this._name=t.name),n&&!Qi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var sEe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},afn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},KI;function nle(e){return e instanceof x_||e instanceof IP||e instanceof kP}class rle{constructor(){KI.set(this,void 0),sEe(this,KI,!1,"f")}setModified(){sEe(this,KI,!0,"f")}get modifiedFlag(){return afn(this,KI,"f")}}KI=new WeakMap;class mE extends rle{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class ile extends rle{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class ufn extends ile{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of xt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class lfn extends ile{constructor(t){super(),this.requiresSelectionId=t&&Xue(t)}run(t){t instanceof ub&&(this.requiresSelectionId&&(nle(t.parent)||t.parent instanceof op||t.parent instanceof Yu)||(this.setModified(),t.remove()))}}class cfn extends rle{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof M0&&(r=t.producedFields(),Yae(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class ffn extends ile{constructor(){super()}run(t){t instanceof jc&&!t.isRequired()&&(this.setModified(),t.remove())}}class dfn extends mE{run(t){if(!nle(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Yu)if(t instanceof Yu)this.setModified(),t.merge(n);else{if(Kae(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class hfn extends mE{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Yu);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of xt(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Qi(i)){this.setModified();const o=new Yu(t,i);for(const a of n){if(a instanceof Yu)for(const u of xt(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Yu&&xt(a.parse).length===0&&a.remove()}}}}}class pfn extends mE{run(t){t instanceof jc||t.numChildren()>0||t instanceof PS||t instanceof x_||(this.setModified(),t.remove())}}class mfn extends mE{run(t){const n=t.children.filter(i=>i instanceof M0),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class gfn extends mE{run(t){const n=t.children.filter(i=>i instanceof op),r={};for(const i of n){const s=$r(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of xt(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class yfn extends mE{constructor(t){super(),this.model=t}run(t){const n=!(nle(t)||t instanceof NS||t instanceof Yu||t instanceof ub),r=[],i=[];for(const s of t.children)s instanceof L0&&(n&&!Kae(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof L0?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class vfn extends mE{run(t){const n=[...t.children];if(!f_(n,o=>o instanceof jc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof jc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof jc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class gE extends Wi{clone(){return new gE(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=_0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Pt(t)}hash(){return`JoinAggregateTransform ${$r(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function bfn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Pt(r);return i&&t.push(i),t},[])}function xfn(e){return at(e)&&e.every(t=>Bt(t))&&e.length>1}class Ug extends Wi{clone(){return new Ug(null,zn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ko(f.order,"ascending"));const l={field:a,order:u};let c;return xfn(s)?c=s:Bt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Ug(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return im(p)}).filter(h=>!!h),c=bfn(n),f=n.encoding.order;let d;if(at(f)||St(f))d=Xje(f);else{const h=BUe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Ug(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${$r(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Pt(i,{binSuffix:"mid"})]:[Pt(i,{}),Pt(i,{binSuffix:"end"})]:[Pt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Pt(c,{expr:"datum"}),p=Pt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Pt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Pt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class OS extends Wi{clone(){return new OS(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=_0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Pt(t)}hash(){return`WindowTransform ${$r(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>iue(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function wfn(e){function t(n){if(!(n instanceof PS)){const r=n.clone();if(r instanceof jc){const i=xQ+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof op||r instanceof Ug||r instanceof OS||r instanceof gE)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function bQ(e){if(e instanceof PS)if(e.numChildren()===1&&!(e.children[0]instanceof jc)){const t=e.children[0];(t instanceof op||t instanceof Ug||t instanceof OS||t instanceof gE)&&t.addDimensions(e.fields),t.swapWithParent(),bQ(e)}else{const t=e.model.component.data.main;CVe(t);const n=wfn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(bQ)}function CVe(e){if(e instanceof jc&&e.type===Ms.Main&&e.numChildren()===1){const t=e.children[0];t instanceof PS||(t.swapWithParent(),CVe(e))}}const xQ="scale_",lO=5;function wQ(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!wQ(t.children))return!1}return!0}function bh(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function oEe(e,t,n){let r=e.sources,i=!1;return i=bh(new ffn,r)||i,i=bh(new lfn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=bh(new pfn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=bh(new dfn,r)||i,i=bh(new yfn(t),r)||i,i=bh(new cfn,r)||i,i=bh(new hfn,r)||i,i=bh(new gfn,r)||i,i=bh(new mfn,r)||i,i=bh(new ufn,r)||i,i=bh(new vfn,r)||i),e.sources=r,i}function _fn(e,t){wQ(e.sources);let n=0,r=0;for(let i=0;i<lO&&oEe(e,t,!0);i++)n++;e.sources.map(bQ);for(let i=0;i<lO&&oEe(e,t,!1);i++)r++;wQ(e.sources),Math.max(n,r)===lO&&At(`Maximum optimization runs(${lO}) reached.`)}class ka{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ka(()=>t(n))}}function TVe(e){lo(e)?Efn(e):Cfn(e)}function Efn(e){const t=e.component.scales;for(const n of xt(t)){const r=Afn(e,n);if(t[n].setWithExplicit("domains",r),Dfn(e,n),e.component.data.isFaceted){let s=e;for(;!Pf(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Ag(a)&&(a.data=xQ+a.data.replace(xQ,""))}}}function Cfn(e){for(const n of e.children)TVe(n);const t=e.component.scales;for(const n of xt(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=sb(r,o.getWithExplicit("domains"),"domains","scale",_Q);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&At(wsn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Tfn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=aEe(t,n);if(!i){At(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=aEe(t,n);if(i)return"unaggregated"}return e}function Afn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Tfn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&da(r.x2)?da(r.x)?sb(p1(n,i,e,"x"),p1(n,i,e,"x2"),"domain","scale",_Q):p1(n,i,e,"x2"):t==="y"&&da(r.y2)?da(r.y)?sb(p1(n,i,e,"y"),p1(n,i,e,"y2"),"domain","scale",_Q):p1(n,i,e,"y2"):p1(n,i,e,t)}function Sfn(e,t,n){return e.map(r=>({signal:`{data: ${M7(r,{timeUnit:n,type:t})}}`}))}function Iq(e,t,n){var i;const r=(i=Ba(n))==null?void 0:i.unit;return t==="temporal"||r?Sfn(e,t,r):[e]}function p1(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=da(i[r]),{type:c}=l,f=l.timeUnit;if(Hon(t)){const p=p1(e,void 0,n,r),m=Iq(t.unionWith,c,f);return r0([...m,...p.value])}else{if(rn(t))return r0([t]);if(t&&t!=="unaggregated"&&!EUe(t))return r0(Iq(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return df([[0,1]]);const p=n.requestDataName(Ms.Main);return df([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=jy(r)&&St(l)?Ifn(n,r,e):void 0;if(Am(l)){const p=Iq([l.datum],c,f);return df(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ms.Main),{field:m}=l;return df([{data:p,field:Pt({field:m,aggregate:"min"})},{data:p,field:Pt({field:m,aggregate:"max"})}])}else if(gs(h.bin)){if(za(e))return df(e==="bin-ordinal"?[]:[{data:DR(d)?n.requestDataName(Ms.Main):n.requestDataName(Ms.Raw),field:n.vgField(r,AP(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!jt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(gs(p)){const m=tle(n,h.field,p);return df([new ka(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return df([{data:n.requestDataName(Ms.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Mr(["time","utc"],e)){const p=i[Cm(r)];if(LUe(h,p,s,a)){const m=n.requestDataName(Ms.Main),g=ib({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=kR(o)&&g!==.5&&Ro(r);return df([{data:m,field:n.vgField(r,y?{suffix:V7}:{})},{data:m,field:n.vgField(r,{suffix:y?H7:"end"})}])}}return df(d?[{data:DR(d)?n.requestDataName(Ms.Main):n.requestDataName(Ms.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ms.Main),field:n.vgField(r)}])}function kq(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":N7),...r?{field:Wd(r)}:{},...i?{order:i}:{}}}function Dfn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=EUe(r)&&r,o=cE(i)&&T7(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Ifn(e,t,n){if(!za(n))return;const r=e.fieldDef(t),i=r.sort;if($Ue(i))return{op:"min",field:hA(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if($0(i)){const a=s&&!o.has(i.field);return kq(i,a)}else if(FUe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(hy(c)||Yb(c))return kq({field:Pt(l),order:u},d);if(iue(c)||!c)return kq({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Mr(["ascending",void 0],i))return!0}}function aEe(e,t){const{aggregate:n,type:r}=e;return n?Bt(n)&&!isn.has(n)?{valid:!1,reason:Gsn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Ysn(e)}:{valid:!0}:{valid:!1,reason:Wsn(e)}}function _Q(e,t,n,r){return e.explicit&&t.explicit&&At(Zsn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function kfn(e){const t=_0(e.map(o=>{if(Ag(o)){const{sort:a,...u}=o;return u}return o}),$r),n=_0(e.map(o=>{if(Ag(o)){const a=o.sort;return a!==void 0&&!DR(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),$r);if(t.length===0)return;if(t.length===1){const o=e[0];if(Ag(o)&&n.length>0){let a=n[0];if(n.length>1){At(g_e);const u=n.filter(l=>jt(l)&&"op"in l&&l.op!=="min");n.every(l=>jt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(jt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=_0(n.map(o=>DR(o)||!("op"in o)||Bt(o.op)&&o.op in esn?o:(At(ton(o)),!0)),$r);let i;r.length===1?i=r[0]:r.length>1&&(At(g_e),i=!0);const s=_0(e.map(o=>Ag(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function sle(e){if(Ag(e)&&Bt(e.field))return e.field;if(ssn(e)){let t;for(const n of e.fields)if(Ag(n)&&Bt(n.field)){if(!t)t=n.field;else if(t!==n.field)return At(non),t}return At(ron),t}else if(osn(e)){At(ion);const t=e.fields[0];return Bt(t)?t:void 0}}function K7(e,t){const r=e.component.scales[t].get("domains").map(i=>(Ag(i)&&(i.data=e.lookupDataSource(i.data)),i));return kfn(r)}function AVe(e){return FS(e)||ole(e)?e.children.reduce((t,n)=>t.concat(AVe(n)),uEe(e)):uEe(e)}function uEe(e){return xt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Rfn(i.range,s,n,e),h=K7(e,n),p=a?Tln(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Rfn(e,t,n,r){if(Ro(n)){if(Kb(e))return{step:{signal:`${t}_step`}}}else if(jt(e)&&Ag(e))return{...e,data:r.lookupDataSource(e.data)};return e}class SVe extends zy{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:f_(this.get("domains"),t=>at(t)&&t.length===2&&fi(t[0])&&t[0]<=0&&fi(t[1])&&t[1]>=0)}}const Nfn=["range","scheme"];function Pfn(e){const t=e.component.scales;for(const n of C7){const r=t[n];if(!r)continue;const i=Ofn(n,e);r.setWithExplicit("range",i)}}function lEe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Jc(t),o=e.getName(s);if(jt(r)&&r.binned&&r.step!==void 0)return new ka(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(gs(r)){const a=tle(e,i,r);return new ka(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Ofn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Nfn)if(n[f]!==void 0){const d=oQ(s,f),h=CUe(e,f);if(!d)At(rUe(s,f,e));else if(h)At(h);else switch(f){case"range":{const p=n.range;if(at(p)){if(Ro(e))return r0(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return ka.fromName(y,g)}return m}))}else if(jt(p))return r0({data:t.requestDataName(Ms.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return r0(p)}case"scheme":return r0(Ffn(n[f]))}}const o=e===Vs||e==="xOffset"?"width":"height",a=r[o];if(sm(a)){if(Ro(e))if(za(s)){const f=IVe(a,t,e);if(f)return r0({step:f})}else At(iUe(o));else if(xP(e)){const f=e===Vb?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=kVe(a,s);if(p)return r0(p)}}}const{rangeMin:u,rangeMax:l}=n,c=$fn(e,t);return(u!==void 0||l!==void 0)&&oQ(s,"rangeMin")&&at(c)&&c.length===2?r0([u??c[0],l??c[1]]):df(c)}function Ffn(e){return Von(e)?{scheme:e.name,...Lc(e,["name"])}:{scheme:e}}function DVe(e,t,n,{center:r}={}){const i=Jc(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===qa&&Kf(n)?r?[ka.fromName(a=>`${o(a)}/2`,s),ka.fromName(a=>`-${o(a)}/2`,s)]:[ka.fromName(o,s),0]:r?[ka.fromName(a=>`-${o(a)}/2`,s),ka.fromName(a=>`${o(a)}/2`,s)]:[0,ka.fromName(o,s)]}function $fn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=da(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Vs:case qa:{if(Mr(["point","band"],u)){const f=RVe(e,n,r.view);if(sm(f))return{step:IVe(f,t,e)}}return DVe(e,t,u)}case Vb:case IS:return Mfn(e,t,u);case Ly:{const f=t.component.scales[e].get("zero"),d=NVe(i,f,r),h=jfn(i,n,t,r);return oA(u)?Bfn(d,h,Lfn(u,r,l,e)):[d,h]}case ih:return[0,Math.PI*2];case uE:return[0,360];case Op:return[0,new ka(()=>{const f=t.getSignalName(Pf(t.parent)?"child_width":"width"),d=t.getSignalName(Pf(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Wb:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Gb:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Qc:return"symbol";case Xc:case _m:case Em:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case By:case Hb:case qb:return[r.scale.minOpacity,r.scale.maxOpacity]}}function IVe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=eue(n),o=r[s];if(mze({step:e,offsetIsDiscrete:Qn(o)&&vUe(o.type)})==="offset"&&XUe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${csn(f)})`}}else return e.step}function kVe(e,t){if(mze({step:e,offsetIsDiscrete:za(t)})==="offset")return{step:e.step}}function Mfn(e,t,n){const r=e===Vb?"x":"y",i=t.getScaleComponent(r);if(!i)return DVe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=RVe(r,t.size,t.config.view);if(sm(l)){const c=kVe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(St(l)&&l.timeUnit){const c=pUe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=ib({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=rn(f)?`${f.signal}/2`+h:`${f/2+d}`,m=rn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return Cje(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function RVe(e,t,n){const r=e===Vs?"width":"height",i=t[r];return i||IM(n,r)}function Lfn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(At(hon(r)),3)}}function Bfn(e,t,n){const r=()=>{const i=Xh(t),s=Xh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return rn(t)?new ka(r):{signal:r()}}function NVe(e,t,n){if(t)return rn(t)?{signal:`${t.signal} ? 0 : ${NVe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(A7("size",e))}const cEe=.95;function jfn(e,t,n,r){const i={x:lEe(n,"x"),y:lEe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=fEe(t,i,r.view);return fi(s)?s-1:new ka(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=fEe(t,i,r.view);return fi(s)?Math.pow(cEe*s,2):new ka(()=>`pow(${cEe} * ${s.signal}, 2)`)}}throw new Error(A7("size",e))}function fEe(e,t,n){const r=sm(e.width)?e.width.step:DM(n,"width"),i=sm(e.height)?e.height.step:DM(n,"height");return t.x||t.y?new ka(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function PVe(e,t){lo(e)?Ufn(e,t):FVe(e,t)}function Ufn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of xt(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=da(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=oQ(h,t),y=CUe(a,t);if(d!==void 0&&(g?y&&At(y):At(rUe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":fE(u[t])||b==="temporal"||v?l.set(t,{signal:M7(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in dEe?dEe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:QUe(i,a),hasSecondaryRangeChannel:!!i[Cm(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const dEe={bins:({model:e,fieldOrDatumDef:t})=>St(t)?zfn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Vfn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Hfn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>qfn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Wfn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Gfn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=St(e)?e.sort:void 0;return Yfn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Kfn(e,t,n,r,i,s.scale,o)};function OVe(e){lo(e)?Pfn(e):FVe(e,"range")}function FVe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?OVe(r):PVe(r,t);for(const r of xt(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=sb(i,a,t,"scale",Dze((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function zfn(e,t){const n=t.bin;if(gs(n)){const r=tle(e,t.field,n);return new ka(()=>e.getSignalName(r))}else if(nu(n)&&cE(n)&&n.step!==void 0)return{step:n.step}}function Vfn(e,t){if(Mr([Xc,_m,Em],e)&&t!=="nominal")return"hcl"}function Hfn(e,t,n,r,i,s){var o;if(!((o=im(s))!=null&&o.bin||at(n)||i!=null||r!=null||Mr([Bc.TIME,Bc.UTC],e)))return Ro(t)?!0:void 0}function qfn(e,t,n,r,i,s){if(Ro(e)){if(Qh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(St(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Bc.POINT)return n.pointPadding}}function Wfn(e,t,n,r,i,s=!1){if(e===void 0){if(Ro(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:ko(o,n==="bar"?a:u)}else if(xP(t)&&r===Bc.BAND)return i.offsetBandPaddingInner}}function Gfn(e,t,n,r,i,s=!1){if(e===void 0){if(Ro(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Bc.BAND)return ko(o,rn(r)?{signal:`${r.signal}/2`}:r/2)}else if(xP(t)){if(n===Bc.POINT)return .5;if(n===Bc.BAND)return i.offsetBandPaddingOuter}}}function Yfn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Kf(e)&&t==="descending"?rn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Kf(e)&&t==="descending")return!0}function Kfn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Kf(i)){if(at(n)){const u=n[0],l=n[n.length-1];if(fi(u)&&u<=0&&fi(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!oA(i))return!0;if(!(St(t)&&t.bin)&&Mr([...Tm,...Win],e)){const{orient:u,type:l}=r;return Mr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Mr(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Xfn(e,t,n,r,i=!1){const s=Qfn(t,n,r,i),{type:o}=e;return jy(t)?o!==void 0?Xon(t,o)?St(n)&&!Kon(o,n.type)?(At(Qsn(o,s)),s):o:(At(Xsn(t,o,s)),s):s:null}function Qfn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(UC(e)||wq(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&At(_q(e,"ordinal")),"ordinal";if(Ro(e)||xP(e)){if(Mr(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in rue)return"band";const s=n[Jc(e)];return y_(s)||uA(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return UC(e)?"time":wq(e)==="discrete"?(At(_q(e,"temporal")),"ordinal"):St(t)&&t.timeUnit&&Ba(t.timeUnit).utc?"utc":"time";case"quantitative":return UC(e)?St(t)&&gs(t.bin)?"bin-ordinal":"linear":wq(e)==="discrete"?(At(_q(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(tUe(t.type))}function Jfn(e,{ignoreRange:t}={}){$Ve(e),TVe(e);for(const n of Yon)PVe(e,n);t||OVe(e)}function $Ve(e){lo(e)?e.component.scales=Zfn(e):e.component.scales=tdn(e)}function Zfn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of C7){const o=da(t[s]);if(o&&n===NUe&&s===Qc&&o.type===kS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=QUe(t,s),l=Xfn(a,s,o,r,u);i[s]=new SVe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const edn=Dze((e,t)=>v_e(e)-v_e(t));function tdn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){$Ve(s);for(const o of xt(s.component.scales))if((t=i.scale)[o]??(t[o]=dVe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?Lon(a.value,u.value)?r[o]=sb(a,u,"type","scale",edn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of xt(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new SVe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class Rq{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function lo(e){return(e==null?void 0:e.type)==="unit"}function Pf(e){return(e==null?void 0:e.type)==="facet"}function ole(e){return(e==null?void 0:e.type)==="concat"}function FS(e){return(e==null?void 0:e.type)==="layer"}class ale{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=xc(a),this.name=t.name??i,this.title=T1(t.title)?{text:t.title}:t.title?xc(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Rq,this.projectionNameMap=r?r.projectionNameMap:new Rq,this.signalNameMap=r?r.signalNameMap:new Rq,this.data=t.data,this.description=t.description,this.transforms=uln(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:dun(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:P7(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new zy,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?zn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Jfn(this)}parseProjection(){_Ve(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){yVe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of xt(r)){const o=r[s];o!==void 0&&(i[s]=Es(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Es(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Qi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=_cn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Pd)t[r].title&&n.push(gcn(this,r));for(const r of Que)n=n.concat(ycn(this,r));return n}assembleAxes(){return rcn(this.component.axes,this.config)}assembleLegends(){return bVe(this)}assembleProjections(){return qcn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Wje(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Mr(["unit","layer"],this.type)?Mr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Qi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Pf(this.parent)?AVe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return zs((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ms[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Pf(this.parent)){const n=cVe(t),r=E7(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(za(s)&&Kb(o)){const a=i.get("name"),u=K7(this,r),l=sle(u);if(l){const c=Pt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:lVe(a,i,c)}}else return At(oue(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Mje(t)&&jy(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(msn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class MVe extends ale{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Pt(r,n)}reduceFieldDef(t,n){return Uan(this.getMapping(),(r,i,s)=>{const o=im(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Pue(this.getMapping(),(r,i)=>{const s=im(r);s&&t(s,i)},n)}}class X7 extends Wi{clone(){return new X7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${$r(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Q7 extends Wi{clone(){return new Q7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${$r(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class NR extends Wi{clone(){return new NR(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Di("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=jy(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Kf(d)&&l.aggregate!=="count"&&!hE(i)&&(u[l.field]=l)}return u},{});return xt(a).length?new NR(t,a):null}dependentFields(){return new Set(xt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${$r(this.filter)}`}assemble(){const t=xt(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Pt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class J7 extends Wi{clone(){return new J7(this.parent,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${$r(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Z7 extends Wi{clone(){return new Z7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${$r(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class HC extends Wi{clone(){return new HC(null,zn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[$p,Fp],[Gd,Mp]]){const s=i.map(o=>{const a=da(n.encoding[o]);return St(a)?a.field:Am(a)?{expr:`${a.datum}`}:bp(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new HC(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Qc)){const i=n.typedFieldDef(Qc);i.type===kS&&(t=new HC(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Bt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${$r(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class PR extends Wi{clone(){return new PR(null,this.projection,zn(this.fields),zn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[$p,Fp],[Gd,Mp]]){const i=r.map(o=>{const a=da(n.encoding[o]);return St(a)?a.field:Am(a)?{expr:`${a.datum}`}:bp(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Gd?"2":"";(i[0]||i[1])&&(t=new PR(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Bt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${$r(this.fields)} ${$r(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Mw extends Wi{clone(){return new Mw(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Mw(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(St(i)&&St(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=ZUe(n.mark,r);return new Mw(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${$r(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Vun(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class ej extends Wi{clone(){return new ej(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${$r(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class OR extends Wi{clone(){return new OR(null,zn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Hun(o)){let u=jVe(o.data,s);u||(u=new x_(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new jc(u,l,Ms.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(qun(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(zs(u),u)}catch{throw new Error(bsn(u))}if(a=l.materialized,!a)throw new Error(xsn(u))}return new OR(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Lt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${$r({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Lt(this.transform.as)}:{}};else{let n=this.transform.as;Bt(n)||(At(Dsn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class tj extends Wi{clone(){return new tj(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${$r(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class nj extends Wi{clone(){return new nj(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${$r(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class rj extends Wi{clone(){return new rj(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=_0((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${$r(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class ij extends Wi{clone(){return new ij(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${$r(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function LVe(e){let t=0;function n(r,i){if(r instanceof x_&&!r.isGenerator&&!cA(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Yu&&(r.parent instanceof x_&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof PS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof IP||r instanceof kP||r instanceof NR||r instanceof NS||r instanceof dA||r instanceof PR||r instanceof op||r instanceof OR||r instanceof OS||r instanceof gE||r instanceof Z7||r instanceof J7||r instanceof X7||r instanceof ej||r instanceof tj||r instanceof nj||r instanceof ub||r instanceof ij||r instanceof rj||r instanceof Q7)&&i.transform.push(r.assemble()),(r instanceof L0||r instanceof M0||r instanceof Mw||r instanceof Ug||r instanceof HC)&&i.transform.push(...r.assemble()),r instanceof jc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof jc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof jc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function ndn(e){const t=[],n=LVe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function rdn(e,t){const n=[],r=LVe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function idn(e){return e==="top"||e==="left"||rn(e)?"header":"footer"}function sdn(e){for(const t of Pd)odn(e,t);hEe(e,"x"),hEe(e,"y")}function odn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=pA("title",null,r,t);let l=zC(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=at(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=pA("labelOrient",a.header,r,t),f=a.header!==null?ko((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Mr(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[BVe(e,t,f)]}}}function BVe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function hEe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=ele(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=idn(a.get("orient"));o[u]??(o[u]=[BVe(e,s,!1)]);const l=YI(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function adn(e){ule(e),PM(e,"width"),PM(e,"height")}function udn(e){ule(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";PM(e,t),PM(e,n)}function ule(e){for(const t of e.children)t.parseLayoutSize()}function PM(e,t){const n=cVe(t),r=E7(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??dVe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=sb(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function ldn(e){const{size:t,component:n}=e;for(const r of Tm){const i=Jc(r);if(t[i]){const s=t[i];n.layoutSize.set(i,sm(s)?"step":s,!0)}else{const s=cdn(e,i);n.layoutSize.set(i,s,!1)}}}function cdn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(za(s)){const a=IM(r.view,t);return Kb(o)||sm(a)?"step":a}else return lQ(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return lQ(r.view,t);{const s=IM(r.view,t);return sm(s)?s.step:s}}}function EQ(e,t,n){return Pt(t,{suffix:`by_${Pt(e)}`,...n})}class Uk extends MVe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=hle(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!CP(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=xt(t),r={};for(const i of n){if(![Lg,Bg].includes(i)){At(A7(i,"facet"));break}const s=t[i];if(s.field===void 0){At(iQ(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Rue(t,n);return r.header?r.header=xc(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=sj(this),this.child.parseData()}parseLayoutSize(){ule(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),sdn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Pd)for(const r of Jue){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=pA("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=G7(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Uk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Uk?{...this.channelHasField("column")?{encode:{update:{columns:{field:Pt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Uk){if(this.child.channelHasField("column")){const i=Pt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Tm){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(za(o)&&Kb(a)){const u=K7(this.child,i),l=sle(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):At(oue(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Pd){const f=this.facet[c];if(f){u.push(Pt(f));const{bin:d,sort:h}=f;if(gs(d)&&u.push(Pt(f,{binSuffix:"end"})),$0(h)){const{field:p,op:m=N7}=h,g=EQ(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(at(h)){const p=hA(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?$0(r.sort)?[EQ(r,r.sort,{expr:"datum"})]:at(r.sort)?[hA(r,t,{expr:"datum"})]:[Pt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[($0(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return yQ(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Que)if(t[s]){const o=pA("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return yQ(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=ndn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Pd.map(u=>this.facetSortFields(u)).flat(),order:Pd.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(wln(this,[]))}]}getMapping(){return this.facet}}function fdn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if($0(s.sort)){const{field:o,op:a=N7}=s.sort;e=i=new gE(e,{joinaggregate:[{op:a,field:o,as:EQ(s,s.sort,{forAs:!0})}],groupby:[Pt(s)]})}return i}return null}function jVe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(RR(e)&&RR(a)){if(Sf(e.values,a.values))return o}else if(cA(e)&&cA(a)){if(e.url===a.url)return o}else if(Ize(e)&&e.name===o.dataName)return o}}return null}function ddn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new x_({values:[]});return t.push(r),r}const n=jVe(e.data,t);if(n)return bv(e.data)||(n.data.format=Tje({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new x_(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function hdn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(tln(i))o=e=new dA(e,i),s="derived";else if(Hue(i)){const a=ifn(i);o=e=Yu.makeWithAncestors(e,{},a,n)??e,e=new NS(e,t,i.filter)}else if(Cze(i))o=e=L0.makeFromTransform(e,i,t),s="number";else if(rln(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Yu(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=M0.makeFromTransform(e,i);else if(iln(i))o=e=op.makeFromTransform(e,i),s="number",Xue(t)&&(e=new ub(e));else if(Eze(i))o=e=OR.make(e,t,i,r++),s="derived";else if(Jun(i))o=e=new OS(e,i),s="number";else if(Zun(i))o=e=new gE(e,i),s="number";else if(sln(i))o=e=Ug.makeFromTransform(e,i),s="derived";else if(oln(i))o=e=new Z7(e,i),s="derived";else if(aln(i))o=e=new Q7(e,i),s="derived";else if(eln(i))o=e=new J7(e,i),s="derived";else if(Wun(i))o=e=new rj(e,i),s="derived";else if(Qun(i))e=new ij(e,i);else if(nln(i))o=e=Mw.makeFromTransform(e,i),s="derived";else if(Gun(i))o=e=new X7(e,i),s="derived";else if(Yun(i))o=e=new tj(e,i),s="derived";else if(Kun(i))o=e=new nj(e,i),s="derived";else if(Xun(i))o=e=new ej(e,i),s="derived";else{At(Ssn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function sj(e){var h;let t=ddn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(bv(i)||cA(i)||RR(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new bln;bv(i)?(kze(i)?t=new kP(t,i.sequence):que(i)&&(t=new IP(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=Yu.makeExplicit(t,e,o)??t,t=new ub(t);const a=e.parent&&FS(e.parent);(lo(e)||Pf(e))&&a&&(t=L0.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=hdn(t,e,o));const u=ofn(e),l=sfn(e);t=Yu.makeWithAncestors(t,{},{...u,...l},o)??t,lo(e)&&(t=HC.parseAll(t,e),t=PR.parseAll(t,e)),(lo(e)||Pf(e))&&(a||(t=L0.makeFromEncoding(t,e)??t),t=M0.makeFromEncoding(t,e)??t,t=dA.parseAllForSortIndex(t,e));const c=t=pEe(Ms.Raw,e,t);if(lo(e)){const p=op.makeFromEncoding(t,e);p&&(t=p,Xue(e)&&(t=new ub(t))),t=Mw.makeFromEncoding(t,e)??t,t=Ug.makeFromEncoding(t,e)??t}lo(e)&&(t=NR.make(t,e)??t);const f=t=pEe(Ms.Main,e,t);lo(e)&&tcn(e,f);let d=null;if(Pf(e)){const p=e.getName("facet");t=fdn(t,e.facet)??t,d=new PS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function pEe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new jc(n,s,e,i);return r[s]=o,o}class pdn extends ale{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&At(Csn),this.children=this.getChildren(t).map((l,c)=>hle(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=sj(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of xt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return j7(t)?t.vconcat:zue(t)?t.hconcat:t.concat}parseLayoutSize(){udn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Zue(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function mdn(e){return e===!1||e===null}const gdn={disable:1,gridScale:1,scale:1,...YUe,labelExpr:1,encode:1},UVe=xt(gdn);class lle extends zy{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new lle(zn(this.explicit),zn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!mdn(this.get(t))}hasOrientSignalRef(){return rn(this.explicit.orient)}}function ydn(e,t,n){const{encoding:r,config:i}=e,s=da(r[t])??da(r[Cm(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(g_(u))return{text:Jh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(aA(s)==="quantitative"){if(uA(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Jh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Jh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(aA(s)==="temporal"&&i.timeFormatType&&St(s)&&!s.timeUnit)return{text:Jh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function vdn(e){return Tm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Tdn(n,e)]),t),{})}const bdn={bottom:"top",top:"bottom",left:"right",right:"left"};function xdn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of xt(i.component.axes))n.axis[s]=ele(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=wdn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Tm){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!rn(a)){if(r[a]>0&&!u){const l=bdn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function wdn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=_dn(i,s)}}}else return t.map(n=>n.clone());return e}function _dn(e,t){for(const n of UVe){const r=sb(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return Zje(i,s);case"gridScale":return{explicit:i.explicit,value:ko(i.value,s.value)}}return z7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Edn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(rn(n.labelAngle)?n.labelAngle:IR(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===sVe(r,i))return!0}return e===n[t]}const Cdn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Tdn(e,t){var y,v;let n=t.axis(e);const r=new lle,i=da(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||fcn(e),u=t.getScaleComponent(e).get("type"),l=icn(e,u,a,t.config),c=n!==void 0?!n:mQ("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=ucn(i,n,e,o.style,l),d=DUe(n.formatType,i,u),h=SUe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of UVe){const x=b in J_e?J_e[b](p):T_e(b)?n[b]:void 0,_=x!==void 0,C=Edn(x,b,n,t,e);if(_&&C)r.set(b,x,C);else{const{configValue:T=void 0,configFrom:S=void 0}=T_e(b)&&b!=="values"?mQ(b,o.style,n.style,l):{},k=T!==void 0;_&&!k?r.set(b,x,C):(S!=="vgAxisConfig"||Cdn.has(b)&&k||SP(T)||rn(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=GUe.reduce((b,x)=>{if(!r.hasAxisPart(x))return b;const _=fVe(m[x]??{},t),C=x==="labels"?ydn(t,e,_):_;return C!==void 0&&!Qi(C)&&(b[x]={update:C}),b},{});return Qi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Adn({encoding:e,size:t}){for(const n of Tm){const r=Jc(n);sm(t[r])&&Q1(e[n])&&(delete t[r],At(iUe(r)))}return t}const Sdn={vgMark:"arc",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...ob(e,"radius"),...ob(e,"theta")})},Ddn={vgMark:"area",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...kM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...kM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Kue(e)})},Idn={vgMark:"rect",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ob(e,"x"),...ob(e,"y")})},kdn={vgMark:"shape",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&St(n)&&n.type===kS?{field:Pt(n,{expr:"datum"})}:{}}]}},Rdn={vgMark:"image",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ob(e,"x"),...ob(e,"y"),...Gue(e,"url")})},Ndn={vgMark:"line",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...Na("size",e,{vgChannel:"strokeWidth"}),...Kue(e)})},Pdn={vgMark:"trail",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...Na("size",e),...Kue(e)})};function cle(e,t){const{config:n}=e;return{...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...Na("size",e),...Na("angle",e),...Odn(e,n,t)}}function Odn(e,t,n){return n?{shape:{value:n}}:Na("shape",e)}const Fdn={vgMark:"symbol",encodeEntry:e=>cle(e)},$dn={vgMark:"symbol",encodeEntry:e=>cle(e,"circle")},Mdn={vgMark:"symbol",encodeEntry:e=>cle(e,"square")},Ldn={vgMark:"rect",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ob(e,"x"),...ob(e,"y")})},Bdn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...kM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...kM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Na("size",e,{vgChannel:"strokeWidth"})}}},jdn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...sh(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...Gue(e),...Na("size",e,{vgChannel:"fontSize"}),...Na("angle",e),...Y_e("align",Udn(e.markDef,n,t)),...Y_e("baseline",zdn(e.markDef,n,t)),...Gu("radius",e,{defaultPos:null}),...Gu("theta",e,{defaultPos:null})}}};function Udn(e,t,n){if(Di("align",e,n)===void 0)return"center"}function zdn(e,t,n){if(Di("baseline",e,n)===void 0)return"middle"}const Vdn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Gu("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Na("size",e,{defaultValue:Hdn(e),vgChannel:i}),[s]:Es(Di("thickness",n,t))}}};function Hdn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Di("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Kb(a)&&fi(a.step)?a.step*3/4:DM(t.view,i)*3/4}}const cO={arc:Sdn,area:Ddn,bar:Idn,circle:$dn,geoshape:kdn,image:Rdn,line:Ndn,point:Fdn,rect:Ldn,rule:Bdn,square:Mdn,text:jdn,tick:Vdn,trail:Pdn};function qdn(e){if(Mr([k7,D7,oan],e.mark)){const t=ZUe(e.mark,e.encoding);if(t.length>0)return Wdn(e,t)}else if(e.mark===I7){const t=rQ.some(n=>Di(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Gdn(e)}return fle(e)}const mEe="faceted_path_";function Wdn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:mEe+e.requestDataName(Ms.Main),data:e.requestDataName(Ms.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:fle(e,{fromPrefix:mEe})}]}const gEe="stack_group_";function Gdn(e){var l;const[t]=fle(e,{fromPrefix:gEe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...tA(t.encode.update,["y","yc","y2","height",...rQ]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Lc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...tA(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Lc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of rQ){const f=py(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Es(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Pt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Pt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=py(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Es(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ms.Main),name:gEe+e.requestDataName(Ms.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Ydn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!at(o)&&bp(o)&&tQ(o.value)||!o&&tQ(Di("order",i,s)))){if((at(o)||St(o))&&!n)return Xje(o,{expr:"datum"});if(hE(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(St(l)){const c=l.sort;if(at(c))return{field:Pt(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if($0(c))return{field:Pt({aggregate:Nue(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(FUe(c)){const f=e.fieldDef(c.encoding);return{field:Pt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Pt(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function fle(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ko(r.clip,Kdn(e),Xdn(e)),a=Yje(r),u=i.key,l=Ydn(e),c=Qdn(e),f=Di("aria",r,s),d=cO[n].postEncodingTransform?cO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:cO[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ms.Main)},encode:{update:cO[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Kdn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Xdn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Qdn(e){if(!e.component.selection)return null;const t=xt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=xt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class zVe extends MVe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,S_e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=rm(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Fun(o,s,{graticule:t.data&&que(t.data)}));const u=this.encoding=Ban(t.encoding||{},a,o.filled,s);this.markDef=xze(o,u,s),this.size=Adn({encoding:u,size:S_e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=bze(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>jue(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===NUe,r=t&&Min.some(i=>Qn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return C7.reduce((r,i)=>{const s=da(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=xc(t);return at(n)&&(i.domain=n.map(xf)),at(r)&&(i.range=r.map(xf)),i}initAxes(t){return Tm.reduce((n,r)=>{const i=t[r];if(Qn(i)||r===Vs&&Qn(t.x2)||r===qa&&Qn(t.y2)){const s=Qn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=xt(t),r={};for(const i of n){const s=t[i];r[i]=SP(s)?Gje(s):xf(s)}return r}initLegends(t){return Gin.reduce((n,r)=>{const i=da(t[r]);if(i&&Kin(r)){const s=i.legend;n[r]=s&&xc(s)}return n},{})}parseData(){this.component.data=sj(this)}parseLayoutSize(){ldn(this)}parseSelections(){this.component.selection=ecn(this,this.selection)}parseMarkGroup(){this.component.mark=qdn(this)}parseAxesAndHeaders(){this.component.axes=vdn(this)}assembleSelectionTopLevelSignals(t){return _ln(this,t)}assembleSignals(){return[...nVe(this),...xln(this,[])]}assembleSelectionData(t){return Eln(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Zue(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!FS(this.parent))&&(t=Pze(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Fw(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return im(n)}typedFieldDef(t){const n=this.fieldDef(t);return Gl(n)?n:null}}class dle extends ale{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(U7(a))return new dle(a,this,this.getName(`layer_${u}`),o,s);if(Uy(a))return new zVe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(sue(a))})}parseData(){this.component.data=sj(this);for(const t of this.children)t.parseData()}parseLayoutSize(){adn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of xt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){xdn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),nVe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Zue(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Lt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Cln(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),bVe(this))}}function hle(e,t,n,r,i){if(P7(e))return new Uk(e,t,n,i);if(U7(e))return new dle(e,t,n,r,i);if(Uy(e))return new zVe(e,t,n,r,i);if(lun(e))return new pdn(e,t,n,i);throw new Error(sue(e))}function Jdn(e,t={}){t.logger&&pon(t.logger),t.fieldTitle&&HUe(t.fieldTitle);try{const n=vze(yS(t.config,e.config)),r=Sze(e,n),i=hle(r,null,"",void 0,n);return i.parse(),_fn(i.component.data,i),{spec:ehn(i,Zdn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&mon(),t.fieldTitle&&kan()}}function Zdn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Bt(t)&&(t={type:t}),i&&s&&gln(t.type)){if(i==="step"&&s==="step")At(f_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";At(f_e(E7(o)));const a=o==="width"?"height":"width";t.type=yln(a)}}return{...xt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...B_e(n,!1),...B_e(e,!0)}}function ehn(e,t,n={},r){const i=e.config?Eun(e.config):void 0,s=[].concat(e.assembleSelectionData([]),rdn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...pze(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const thn=Rin.version,nhn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:nA,accessPathWithDatum:Xae,compile:Jdn,contains:Mr,deepEqual:Sf,deleteNestedProperty:vM,duplicate:zn,entries:nb,every:Gae,fieldIntersection:Kae,flatAccessWithDatum:Sje,getFirstDefined:ko,hasIntersection:Yae,hash:$r,internalField:kje,isBoolean:DR,isEmpty:Qi,isEqual:Pin,isInternalField:Rje,isNullOrFalse:tQ,isNumeric:y7,keys:xt,logicalExpr:Bk,mergeDeep:Tje,never:Cje,normalize:Sze,normalizeAngle:IR,omit:Lc,pick:tA,prefixGenerator:nQ,removePathFromField:DS,replaceAll:d_,replacePathInField:Wd,resetIdCounter:Fin,setEqual:Aje,some:f_,stringify:Ji,titleCase:yP,unique:_0,uniqueId:Ije,vals:du,varName:zs,version:thn},Symbol.toStringTag,{value:"Module"}));function VVe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var rhn="vega-themes",ihn="2.15.0",shn="Themes for stylized Vega and Vega-Lite visualizations.",ohn=["vega","vega-lite","themes","style"],ahn="BSD-3-Clause",uhn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},lhn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],chn="build/vega-themes.js",ple="build/vega-themes.module.js",fhn="build/vega-themes.min.js",dhn="build/vega-themes.min.js",hhn="build/vega-themes.module.d.ts",phn={type:"git",url:"https://github.com/vega/vega-themes.git"},mhn=["src","build"],ghn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},yhn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},vhn={vega:"*","vega-lite":"*"},bhn={},xhn={name:rhn,version:ihn,description:shn,keywords:ohn,license:ahn,author:uhn,contributors:lhn,main:chn,module:ple,unpkg:fhn,jsdelivr:dhn,types:hhn,repository:phn,files:mhn,scripts:ghn,devDependencies:yhn,peerDependencies:vhn,dependencies:bhn};const p2="#fff",yEe="#888",whn={background:"#333",view:{stroke:yEe},title:{color:p2,subtitleColor:p2},style:{"guide-label":{fill:p2},"guide-title":{fill:p2}},axis:{domainColor:p2,gridColor:yEe,tickColor:p2}},vx="#4572a7",_hn={background:"#fff",arc:{fill:vx},area:{fill:vx},line:{stroke:vx,strokeWidth:2},path:{stroke:vx},rect:{fill:vx},shape:{stroke:vx},symbol:{fill:vx,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},bx="#30a2da",Nq="#cbcbcb",Ehn="#999",Chn="#333",vEe="#f0f0f0",bEe="#333",Thn={arc:{fill:bx},area:{fill:bx},axis:{domainColor:Nq,grid:!0,gridColor:Nq,gridWidth:1,labelColor:Ehn,labelFontSize:10,titleColor:Chn,tickColor:Nq,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:vEe,group:{fill:vEe},legend:{labelColor:bEe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:bEe,titleFontSize:14,titlePadding:10},line:{stroke:bx,strokeWidth:2},path:{stroke:bx,strokeWidth:.5},rect:{fill:bx},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:bx},bar:{binSpacing:2,fill:bx,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},xx="#000",Ahn={group:{fill:"#e5e5e5"},arc:{fill:xx},area:{fill:xx},line:{stroke:xx},path:{stroke:xx},rect:{fill:xx},shape:{stroke:xx},symbol:{fill:xx,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Shn=22,Dhn="normal",xEe="Benton Gothic, sans-serif",wEe=11.5,Ihn="normal",wx="#82c6df",Pq="Benton Gothic Bold, sans-serif",_Ee="normal",EEe=13,JD={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},khn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Pq,fontSize:Shn,fontWeight:Dhn},arc:{fill:wx},area:{fill:wx},line:{stroke:wx,strokeWidth:2},path:{stroke:wx},rect:{fill:wx},shape:{stroke:wx},symbol:{fill:wx,size:30},axis:{labelFont:xEe,labelFontSize:wEe,labelFontWeight:Ihn,titleFont:Pq,titleFontSize:EEe,titleFontWeight:_Ee},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:xEe,labelFontSize:wEe,symbolType:"square",titleFont:Pq,titleFontSize:EEe,titleFontWeight:_Ee},range:{category:JD["category-6"],diverging:JD["fireandice-6"],heatmap:JD["fire-7"],ordinal:JD["fire-7"],ramp:JD["fire-7"]}},_x="#ab5787",fO="#979797",Rhn={background:"#f9f9f9",arc:{fill:_x},area:{fill:_x},line:{stroke:_x},path:{stroke:_x},rect:{fill:_x},shape:{stroke:_x},symbol:{fill:_x,size:30},axis:{domainColor:fO,domainWidth:.5,gridWidth:.2,labelColor:fO,tickColor:fO,tickWidth:.2,titleColor:fO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ex="#3e5c69",Nhn={background:"#fff",arc:{fill:Ex},area:{fill:Ex},line:{stroke:Ex},path:{stroke:Ex},rect:{fill:Ex},shape:{stroke:Ex},symbol:{fill:Ex},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},md="#1696d2",CEe="#000000",Phn="#FFFFFF",dO="Lato",Oq="Lato",Ohn="Lato",Fhn="#DEDDDD",$hn=18,ZD={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Mhn={background:Phn,title:{anchor:"start",fontSize:$hn,font:dO},axisX:{domain:!0,domainColor:CEe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Oq,labelAngle:0,tickColor:CEe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:dO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Fhn,gridWidth:1,labelFontSize:12,labelFont:Oq,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:dO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Oq,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:dO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:ZD["six-groups-cat-1"],diverging:ZD["diverging-colors"],heatmap:ZD["diverging-colors"],ordinal:ZD["six-groups-seq"],ramp:ZD["shades-blue"]},area:{fill:md},rect:{fill:md},line:{color:md,stroke:md,strokeWidth:5},trail:{color:md,stroke:md,strokeWidth:0,size:1},path:{stroke:md,strokeWidth:.5},point:{filled:!0},text:{font:Ohn,color:md,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:md,stroke:null}},arc:{fill:md},shape:{stroke:md},symbol:{fill:md,size:30}},Cx="#3366CC",TEe="#ccc",hO="Arial, sans-serif",Lhn={arc:{fill:Cx},area:{fill:Cx},path:{stroke:Cx},rect:{fill:Cx},shape:{stroke:Cx},symbol:{stroke:Cx},circle:{fill:Cx},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:hO,fontSize:12},"guide-title":{font:hO,fontSize:12},"group-title":{font:hO,fontSize:12}},title:{font:hO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:TEe,tickColor:TEe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},mle=e=>e*(1/3+1),AEe=mle(9),SEe=mle(10),DEe=mle(12),eI="Segoe UI",IEe="wf_standard-font, helvetica, arial, sans-serif",kEe="#252423",tI="#605E5C",REe="transparent",Bhn="#C8C6C4",Ch="#118DFF",jhn="#12239E",Uhn="#E66C37",zhn="#6B007B",Vhn="#E044A7",Hhn="#744EC2",qhn="#D9B300",Whn="#D64550",HVe=Ch,qVe="#DEEFFF",NEe=[qVe,HVe],Ghn=[qVe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",HVe],Yhn={view:{stroke:REe},background:REe,font:eI,header:{titleFont:IEe,titleFontSize:DEe,titleColor:kEe,labelFont:eI,labelFontSize:SEe,labelColor:tI},axis:{ticks:!1,grid:!1,domain:!1,labelColor:tI,labelFontSize:AEe,titleFont:IEe,titleColor:kEe,titleFontSize:DEe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Bhn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ch},line:{stroke:Ch,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:eI,fontSize:AEe,fill:tI},arc:{fill:Ch},area:{fill:Ch,line:!0,opacity:.6},path:{stroke:Ch},rect:{fill:Ch},point:{fill:Ch,filled:!0,size:75},shape:{stroke:Ch},symbol:{fill:Ch,strokeWidth:1.5,size:50},legend:{titleFont:eI,titleFontWeight:"bold",titleColor:tI,labelFont:eI,labelFontSize:SEe,labelColor:tI,symbolType:"circle",symbolSize:75},range:{category:[Ch,jhn,Uhn,zhn,Vhn,Hhn,qhn,Whn],diverging:NEe,heatmap:NEe,ordinal:Ghn}},Fq='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Khn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',$q=400,pO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Xhn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Qhn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function oj({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=pO.gridBg[e],i=pO.textPrimary[e],s=pO.textSecondary[e],o=n==="dark"?Xhn:Qhn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Fq,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Khn,labelFontWeight:$q,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:pO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Fq,fill:s,fontWeight:$q},"guide-title":{font:Fq,fill:s,fontWeight:$q}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Jhn=oj({theme:"white",background:"#ffffff"}),Zhn=oj({theme:"g10",background:"#f4f4f4"}),epn=oj({theme:"g90",background:"#262626"}),tpn=oj({theme:"g100",background:"#161616"}),npn=xhn.version,rpn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Zhn,carbong100:tpn,carbong90:epn,carbonwhite:Jhn,dark:whn,excel:_hn,fivethirtyeight:Thn,ggplot2:Ahn,googlecharts:Lhn,latimes:khn,powerbi:Yhn,quartz:Rhn,urbaninstitute:Mhn,version:npn,vox:Nhn},Symbol.toStringTag,{value:"Module"}));function ipn(e,t,n,r){if(at(e))return`[${e.map(i=>t(Bt(i)?i:PEe(i,n))).join(", ")}]`;if(jt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(jt(c)&&(c=PEe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function spn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function PEe(e,t){return JSON.stringify(e,spn(t))}var opn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const WVe="vg-tooltip-element",apn={offsetX:10,offsetY:10,id:WVe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:upn,maxDepth:2,formatTooltip:ipn,baseURL:""};function upn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function lpn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return opn.toString().replace(WVe,e)}function cpn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class fpn{constructor(t){this.options={...apn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=lpn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=cpn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Mq={};function dpn(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lq,OEe;function hpn(){return OEe||(OEe=1,Lq=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Lq}var ppn=wi;wi.Node=w_;wi.create=wi;function wi(e){var t=this;if(t instanceof wi||(t=new wi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}wi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};wi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};wi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};wi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)gpn(this,arguments[e]);return this.length};wi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ypn(this,arguments[e]);return this.length};wi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};wi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};wi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};wi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};wi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};wi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};wi.prototype.map=function(e,t){t=t||this;for(var n=new wi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};wi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new wi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};wi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};wi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};wi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};wi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};wi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};wi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};wi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=mpn(this,i,n[r]);return s};wi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function mpn(e,t,n){var r=t===e.head?new w_(n,null,t,e):new w_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function gpn(e,t){e.tail=new w_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ypn(e,t){e.head=new w_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function w_(e,t,n,r){if(!(this instanceof w_))return new w_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{hpn()(wi)}catch{}const vpn=ppn,ew=Symbol("max"),ag=Symbol("length"),m2=Symbol("lengthCalculator"),zk=Symbol("allowStale"),_w=Symbol("maxAge"),tg=Symbol("dispose"),FEe=Symbol("noDisposeOnSet"),Ta=Symbol("lruList"),Sh=Symbol("cache"),GVe=Symbol("updateAgeOnGet"),Bq=()=>1;class bpn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ew]=t.max||1/0;const n=t.length||Bq;if(this[m2]=typeof n!="function"?Bq:n,this[zk]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[_w]=t.maxAge||0,this[tg]=t.dispose,this[FEe]=t.noDisposeOnSet||!1,this[GVe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ew]=t||1/0,nI(this)}get max(){return this[ew]}set allowStale(t){this[zk]=!!t}get allowStale(){return this[zk]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[_w]=t,nI(this)}get maxAge(){return this[_w]}set lengthCalculator(t){typeof t!="function"&&(t=Bq),t!==this[m2]&&(this[m2]=t,this[ag]=0,this[Ta].forEach(n=>{n.length=this[m2](n.value,n.key),this[ag]+=n.length})),nI(this)}get lengthCalculator(){return this[m2]}get length(){return this[ag]}get itemCount(){return this[Ta].length}rforEach(t,n){n=n||this;for(let r=this[Ta].tail;r!==null;){const i=r.prev;$Ee(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ta].head;r!==null;){const i=r.next;$Ee(this,t,r,n),r=i}}keys(){return this[Ta].toArray().map(t=>t.key)}values(){return this[Ta].toArray().map(t=>t.value)}reset(){this[tg]&&this[Ta]&&this[Ta].length&&this[Ta].forEach(t=>this[tg](t.key,t.value)),this[Sh]=new Map,this[Ta]=new vpn,this[ag]=0}dump(){return this[Ta].map(t=>OM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ta]}set(t,n,r){if(r=r||this[_w],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[m2](n,t);if(this[Sh].has(t)){if(s>this[ew])return qC(this,this[Sh].get(t)),!1;const u=this[Sh].get(t).value;return this[tg]&&(this[FEe]||this[tg](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[ag]+=s-u.length,u.length=s,this.get(t),nI(this),!0}const o=new xpn(t,n,s,i,r);return o.length>this[ew]?(this[tg]&&this[tg](t,n),!1):(this[ag]+=o.length,this[Ta].unshift(o),this[Sh].set(t,this[Ta].head),nI(this),!0)}has(t){if(!this[Sh].has(t))return!1;const n=this[Sh].get(t).value;return!OM(this,n)}get(t){return jq(this,t,!0)}peek(t){return jq(this,t,!1)}pop(){const t=this[Ta].tail;return t?(qC(this,t),t.value):null}del(t){qC(this,this[Sh].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Sh].forEach((t,n)=>jq(this,n,!1))}}const jq=(e,t,n)=>{const r=e[Sh].get(t);if(r){const i=r.value;if(OM(e,i)){if(qC(e,r),!e[zk])return}else n&&(e[GVe]&&(r.value.now=Date.now()),e[Ta].unshiftNode(r));return i.value}},OM=(e,t)=>{if(!t||!t.maxAge&&!e[_w])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[_w]&&n>e[_w]},nI=e=>{if(e[ag]>e[ew])for(let t=e[Ta].tail;e[ag]>e[ew]&&t!==null;){const n=t.prev;qC(e,t),t=n}},qC=(e,t)=>{if(t){const n=t.value;e[tg]&&e[tg](n.key,n.value),e[ag]-=n.length,e[Sh].delete(n.key),e[Ta].removeNode(t)}};class xpn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const $Ee=(e,t,n,r)=>{let i=n.value;OM(e,i)&&(qC(e,n),e[zk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var wpn=bpn;const _pn=Object.freeze({loose:!0}),Epn=Object.freeze({}),Cpn=e=>e?typeof e!="object"?_pn:e:Epn;var gle=Cpn,CQ={exports:{}};const Tpn="2.0.0",YVe=256,Apn=Number.MAX_SAFE_INTEGER||9007199254740991,Spn=16,Dpn=YVe-6,Ipn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var yle={MAX_LENGTH:YVe,MAX_SAFE_COMPONENT_LENGTH:Spn,MAX_SAFE_BUILD_LENGTH:Dpn,MAX_SAFE_INTEGER:Apn,RELEASE_TYPES:Ipn,SEMVER_SPEC_VERSION:Tpn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const kpn=typeof process=="object"&&Mq&&Mq.NODE_DEBUG&&/\bsemver\b/i.test(Mq.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var aj=kpn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=yle,s=aj;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(CQ,CQ.exports);var vle=CQ.exports;const MEe=/^[0-9]+$/,KVe=(e,t)=>{const n=MEe.test(e),r=MEe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Rpn=(e,t)=>KVe(t,e);var Npn={compareIdentifiers:KVe,rcompareIdentifiers:Rpn};const mO=aj,{MAX_LENGTH:LEe,MAX_SAFE_INTEGER:gO}=yle,{safeRe:BEe,t:jEe}=vle,Ppn=gle,{compareIdentifiers:g2}=Npn;let Opn=class Yp{constructor(t,n){if(n=Ppn(n),t instanceof Yp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>LEe)throw new TypeError(`version is longer than ${LEe} characters`);mO("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?BEe[jEe.LOOSE]:BEe[jEe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>gO||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gO||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gO||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<gO)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(mO("SemVer.compare",this.version,this.options,t),!(t instanceof Yp)){if(typeof t=="string"&&t===this.version)return 0;t=new Yp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Yp||(t=new Yp(t,this.options)),g2(this.major,t.major)||g2(this.minor,t.minor)||g2(this.patch,t.patch)}comparePre(t){if(t instanceof Yp||(t=new Yp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(mO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return g2(r,i)}while(++n)}compareBuild(t){t instanceof Yp||(t=new Yp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(mO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return g2(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),g2(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ble=Opn;const UEe=ble,Fpn=(e,t,n)=>new UEe(e,n).compare(new UEe(t,n));var $S=Fpn;const $pn=$S,Mpn=(e,t,n)=>$pn(e,t,n)===0;var Lpn=Mpn;const Bpn=$S,jpn=(e,t,n)=>Bpn(e,t,n)!==0;var Upn=jpn;const zpn=$S,Vpn=(e,t,n)=>zpn(e,t,n)>0;var Hpn=Vpn;const qpn=$S,Wpn=(e,t,n)=>qpn(e,t,n)>=0;var Gpn=Wpn;const Ypn=$S,Kpn=(e,t,n)=>Ypn(e,t,n)<0;var Xpn=Kpn;const Qpn=$S,Jpn=(e,t,n)=>Qpn(e,t,n)<=0;var Zpn=Jpn;const e0n=Lpn,t0n=Upn,n0n=Hpn,r0n=Gpn,i0n=Xpn,s0n=Zpn,o0n=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return e0n(e,n,r);case"!=":return t0n(e,n,r);case">":return n0n(e,n,r);case">=":return r0n(e,n,r);case"<":return i0n(e,n,r);case"<=":return s0n(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var a0n=o0n,Uq,zEe;function u0n(){if(zEe)return Uq;zEe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Uq=t;const n=gle,{safeRe:r,t:i}=vle,s=a0n,o=aj,a=ble,u=XVe();return Uq}var zq,VEe;function XVe(){if(VEe)return zq;VEe=1;class e{constructor(B,H){if(H=r(H),B instanceof e)return B.loose===!!H.loose&&B.includePrerelease===!!H.includePrerelease?B:new e(B.raw,H);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(G=>!p(G[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const U=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+B,G=n.get(U);if(G)return G;const Y=this.options.loose,Q=Y?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];B=B.replace(Q,R(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[u.COMPARATORTRIM],l),s("comparator trim",B),B=B.replace(a[u.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[u.CARETTRIM],f),s("caret trim",B);let M=B.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>I(q,this.options));Y&&(M=M.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",M);const j=new Map,W=M.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];j.set(q.value,q)}j.size>1&&j.has("")&&j.delete("");const L=[...j.values()];return n.set(U,L),L}intersects(B,H){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(U=>g(U,H)&&B.set.some(G=>g(G,H)&&U.every(Y=>G.every(Q=>Y.intersects(Q,H)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let H=0;H<this.set.length;H++)if(F(this.set[H],B,this.options))return!0;return!1}}zq=e;const t=wpn,n=new t({max:1e3}),r=gle,i=u0n(),s=aj,o=ble,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=vle,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=yle,p=O=>O.value==="<0.0.0-0",m=O=>O.value==="",g=(O,B)=>{let H=!0;const U=O.slice();let G=U.pop();for(;H&&U.length;)H=U.every(Y=>G.intersects(Y,B)),G=U.pop();return H},y=(O,B)=>(s("comp",O,B),O=_(O,B),s("caret",O),O=b(O,B),s("tildes",O),O=T(O,B),s("xrange",O),O=k(O,B),s("stars",O),O),v=O=>!O||O.toLowerCase()==="x"||O==="*",b=(O,B)=>O.trim().split(/\s+/).map(H=>x(H,B)).join(" "),x=(O,B)=>{const H=B.loose?a[u.TILDELOOSE]:a[u.TILDE];return O.replace(H,(U,G,Y,Q,M)=>{s("tilde",O,U,G,Y,Q,M);let j;return v(G)?j="":v(Y)?j=`>=${G}.0.0 <${+G+1}.0.0-0`:v(Q)?j=`>=${G}.${Y}.0 <${G}.${+Y+1}.0-0`:M?(s("replaceTilde pr",M),j=`>=${G}.${Y}.${Q}-${M} <${G}.${+Y+1}.0-0`):j=`>=${G}.${Y}.${Q} <${G}.${+Y+1}.0-0`,s("tilde return",j),j})},_=(O,B)=>O.trim().split(/\s+/).map(H=>C(H,B)).join(" "),C=(O,B)=>{s("caret",O,B);const H=B.loose?a[u.CARETLOOSE]:a[u.CARET],U=B.includePrerelease?"-0":"";return O.replace(H,(G,Y,Q,M,j)=>{s("caret",O,G,Y,Q,M,j);let W;return v(Y)?W="":v(Q)?W=`>=${Y}.0.0${U} <${+Y+1}.0.0-0`:v(M)?Y==="0"?W=`>=${Y}.${Q}.0${U} <${Y}.${+Q+1}.0-0`:W=`>=${Y}.${Q}.0${U} <${+Y+1}.0.0-0`:j?(s("replaceCaret pr",j),Y==="0"?Q==="0"?W=`>=${Y}.${Q}.${M}-${j} <${Y}.${Q}.${+M+1}-0`:W=`>=${Y}.${Q}.${M}-${j} <${Y}.${+Q+1}.0-0`:W=`>=${Y}.${Q}.${M}-${j} <${+Y+1}.0.0-0`):(s("no pr"),Y==="0"?Q==="0"?W=`>=${Y}.${Q}.${M}${U} <${Y}.${Q}.${+M+1}-0`:W=`>=${Y}.${Q}.${M}${U} <${Y}.${+Q+1}.0-0`:W=`>=${Y}.${Q}.${M} <${+Y+1}.0.0-0`),s("caret return",W),W})},T=(O,B)=>(s("replaceXRanges",O,B),O.split(/\s+/).map(H=>S(H,B)).join(" ")),S=(O,B)=>{O=O.trim();const H=B.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return O.replace(H,(U,G,Y,Q,M,j)=>{s("xRange",O,U,G,Y,Q,M,j);const W=v(Y),L=W||v(Q),q=L||v(M),J=q;return G==="="&&J&&(G=""),j=B.includePrerelease?"-0":"",W?G===">"||G==="<"?U="<0.0.0-0":U="*":G&&J?(L&&(Q=0),M=0,G===">"?(G=">=",L?(Y=+Y+1,Q=0,M=0):(Q=+Q+1,M=0)):G==="<="&&(G="<",L?Y=+Y+1:Q=+Q+1),G==="<"&&(j="-0"),U=`${G+Y}.${Q}.${M}${j}`):L?U=`>=${Y}.0.0${j} <${+Y+1}.0.0-0`:q&&(U=`>=${Y}.${Q}.0${j} <${Y}.${+Q+1}.0-0`),s("xRange return",U),U})},k=(O,B)=>(s("replaceStars",O,B),O.trim().replace(a[u.STAR],"")),I=(O,B)=>(s("replaceGTE0",O,B),O.trim().replace(a[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=O=>(B,H,U,G,Y,Q,M,j,W,L,q,J,re)=>(v(U)?H="":v(G)?H=`>=${U}.0.0${O?"-0":""}`:v(Y)?H=`>=${U}.${G}.0${O?"-0":""}`:Q?H=`>=${H}`:H=`>=${H}${O?"-0":""}`,v(W)?j="":v(L)?j=`<${+W+1}.0.0-0`:v(q)?j=`<${W}.${+L+1}.0-0`:J?j=`<=${W}.${L}.${q}-${J}`:O?j=`<${W}.${L}.${+q+1}-0`:j=`<=${j}`,`${H} ${j}`.trim()),F=(O,B,H)=>{for(let U=0;U<O.length;U++)if(!O[U].test(B))return!1;if(B.prerelease.length&&!H.includePrerelease){for(let U=0;U<O.length;U++)if(s(O[U].semver),O[U].semver!==i.ANY&&O[U].semver.prerelease.length>0){const G=O[U].semver;if(G.major===B.major&&G.minor===B.minor&&G.patch===B.patch)return!0}return!1}return!0};return zq}const l0n=XVe(),c0n=(e,t,n)=>{try{t=new l0n(t,n)}catch{return!1}return t.test(e)};var f0n=c0n,QVe=dpn(f0n);function d0n(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var h0n=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function JVe(e,...t){for(const n of t)p0n(e,n);return e}function p0n(e,t){for(const n of Object.keys(t))vS(e,n,t[n],!0)}const Ih=Qrn;let FR=nhn;const yO=typeof window<"u"?window:void 0;var dTe;FR===void 0&&((dTe=yO==null?void 0:yO.vl)!=null&&dTe.compile)&&(FR=yO.vl);const m0n={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},g0n={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},XI={vega:"Vega","vega-lite":"Vega-Lite"},FM={vega:Ih.version,"vega-lite":FR?FR.version:"not available"},y0n={vega:e=>e,"vega-lite":(e,t)=>FR.compile(e,{config:t}).spec},v0n=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,b0n="chart-wrapper";function x0n(e){return typeof e=="function"}function HEe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${XI[r]} JSON Source`}function w0n(e,t){if(e.$schema){const n=VVe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${XI[n.library]}, but mode argument sets ${XI[t]??t}.`);const r=n.library;return QVe(FM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${XI[r]} ${n.version}, but the current version of ${XI[r]} is v${FM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function ZVe(e){return!!(e&&"load"in e)}function qEe(e){return ZVe(e)?e:Ih.loader(e)}function _0n(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Bt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function E0n(e,t,n={}){let r,i;Bt(t)?(i=qEe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=_0n(r),o=s.loader;(!i||o)&&(i=qEe(n.loader??o));const a=await WEe(s,i),u=await WEe(n,i),l={...JVe(u,a),config:yS(u.config??{},a.config??{})};return await T0n(e,r,l,i)}async function WEe(e,t){const n=Bt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Bt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function C0n(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function T0n(e,t,n={},r){const i=n.theme?yS(rpn[n.theme],n.config??{}):n.config,s=jb(n.actions)?n.actions:JVe({},m0n,n.actions??{}),o={...g0n,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Ih.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const _="vega-embed-style",{root:C,rootContainer:T}=C0n(c);if(!C.getElementById(_)){const S=document.createElement("style");S.id=_,S.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?h0n.toString():n.defaultStyle,T.appendChild(S)}}const f=w0n(t,n.mode);let d=y0n[f](t,i);if(f==="vega-lite"&&d.$schema){const _=VVe(d.$schema);QVe(FM.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${FM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const _=document.createElement("div");_.classList.add(b0n),c.appendChild(_),h=_}const p=n.patch;if(p&&(d=p instanceof Function?p(d):_9(d,p,!0,!1).newDocument),n.formatLocale&&Ih.formatLocale(n.formatLocale),n.timeFormatLocale&&Ih.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const _ in n.expressionFunctions){const C=n.expressionFunctions[_];"fn"in C?Ih.expressionFunction(_,C.fn,C.visitor):C instanceof Function&&Ih.expressionFunction(_,C)}const{ast:m}=n,g=Ih.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Ih.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Ih.expressionInterpreter??n.expr??ain}:{}});if(y.addSignalListener("autosize",(_,C)=>{const{type:T}=C;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:_,tooltip:C}=n,T=_&&!ZVe(_)?_==null?void 0:_.baseURL:void 0,S=x0n(C)?C:new fpn({baseURL:T,...C===!0?{}:C}).call;y.tooltip(S)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:_,updateSet:C}=typeof v=="boolean"?{}:v;y.hover(_,C)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let _=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),_=T;const S=document.createElement("summary");S.innerHTML=v0n,T.append(S),b=k=>{T.contains(k.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const C=document.createElement("div");if(_.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const S=o[`${T.toUpperCase()}_ACTION`],k=document.createElement("a"),I=jt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;k.text=S,k.href="#",k.target="_blank",k.download=`${l}.${T}`,k.addEventListener("mousedown",async function(R){R.preventDefault();const F=await y.toImageURL(T,I);this.href=F}),C.append(k)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(S){HEe(VH(t),n.sourceHeader??"",n.sourceFooter??"",f),S.preventDefault()}),C.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(S){HEe(VH(d),n.sourceHeader??"",n.sourceFooter??"","vega"),S.preventDefault()}),C.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=o.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(k){d0n(window,T,{config:i,mode:f,renderer:a,spec:VH(t)}),k.preventDefault()}),C.append(S)}}function x(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:x,embedOptions:n}}function A0n(e){return!!e&&{}.toString.call(e)==="[object Function]"}function S0n(e,t,n){n&&(A0n(n)?n(e.data(t)):e.change(t,Ih.changeset().remove(()=>!0).insert(n)))}function D0n(e,t){Object.keys(t).forEach(n=>{S0n(e,n,t[n])})}function eHe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const tHe=()=>{};function Vq(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function I0n(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=eHe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!aF(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function GEe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Hq(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function QI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nHe extends vi.PureComponent{constructor(){super(...arguments),QI(this,"containerRef",vi.createRef()),QI(this,"resultPromise",void 0),QI(this,"handleError",t=>{const{onError:n=tHe}=this.props;n(t,this.containerRef.current),console.warn(t)}),QI(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=eHe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=I0n(Hq(this.props),Hq(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!QK(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&GEe(a,s),i&&Vq(a,i)),a.run()})}else QK(i,s)||this.modifyView(o=>{s&&GEe(o,s),i&&Vq(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Hq(this.props);this.resultPromise=E0n(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;Vq(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return vi.createElement("div",{ref:this.containerRef,className:t,style:n})}}QI(nHe,"propTypes",{className:E0e.string,onError:E0e.func});function TQ(){return TQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TQ.apply(this,arguments)}function AQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const k0n={};class xle extends vi.PureComponent{constructor(){super(...arguments),AQ(this,"vegaEmbed",vi.createRef()),AQ(this,"handleNewView",t=>{this.update();const{onNewView:n=tHe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){QK(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{D0n(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return vi.createElement(nHe,TQ({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}AQ(xle,"defaultProps",{data:k0n});function SQ(){return SQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SQ.apply(this,arguments)}function YEe(e){return vi.createElement(xle,SQ({},e,{mode:"vega-lite"}))}function R0n({currentConfig:e,provState:t}){const n=Zd(),r=eh(),i=ef(),[s,o]=N.useState(null),[a,u]=N.useState(!0),{updateResponseBlockValidation:l,setIframeAnswers:c}=Ul(),[f,d]=N.useState(),{actions:h,trrack:p}=N.useMemo(()=>{const b=Q_.create(),x=b.register("signal",(C,T)=>(C.event=T,C)),_=ON({registry:b,initialState:{event:{}}});return{actions:{signalAction:x},trrack:_}},[]),m=N.useCallback(({status:b,provenanceGraph:x,answers:_})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:b,values:_,provenanceGraph:x})),i(c(_))},[r,n,i,c,l]),g=N.useCallback((b,x)=>{p.apply(b,h.signalAction({key:b,value:x}))},[h,p]),y=N.useCallback((b,x)=>{const{responseId:_,response:C}=x;m({status:!0,provenanceGraph:p.graph.backend,answers:{[_]:C}})},[m,p.graph.backend]),v=N.useMemo(()=>{var x;const b=(x=s==null?void 0:s.config)==null?void 0:x.signals;return b?b.reduce((_,C)=>(C.name==="revisitAnswer"?_[C.name]=y:_[C.name]=g,_),{}):{}},[y,g,s]);return N.useEffect(()=>{async function b(){u(!0);let x;"path"in e?x=await wEt(e.path):x=e.config,x!==void 0&&o(x),u(!1)}e&&b()},[e]),N.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?E.jsx("div",{children:"Loading..."}):"path"in e&&!s?E.jsx(Rv,{path:e.path}):s?E.jsx(xle,{spec:structuredClone(s),signalListeners:v,onNewView:b=>d(b)}):E.jsx("div",{children:"Failed to load vega config"})}function N0n(){const e=ty(),t=Zd(),n=eh()||"Notfound",r=e.components[n],{storageEngine:i}=Oo(),s=N.useRef(null),[o,a]=N.useState(null),{setIsRecording:u}=Ul(),l=ni(k=>k.analysisProvState),c=YA(),f=$te(),d=ni(k=>k.sequence),[h]=Tb(),p=ni(k=>k.participantId),m=N.useMemo(()=>h.get("participantId"),[h]);L$e();const g=ef(),{setAlertModal:y}=Ul();N.useEffect(()=>{(i==null?void 0:i.getEngine())!=="localStorage"&&g(y({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[y,i,g]),N.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(k=>{var I;k.stop(),(I=s.current)==null||I.stream.removeTrack(k)}),s.current.stream.getAudioTracks().forEach(k=>{var I;k.stop(),(I=s.current)==null||I.stream.removeTrack(k)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(k=>{const I=new MediaRecorder(k);s.current=I,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[v,b]=N.useState([]),x=N.useRef([]);N.useEffect(()=>{async function k(){var F;const R=((F=kte(d,t))==null?void 0:F.map(O=>O.currentBlock.id).filter(O=>O!==void 0))||[];b(R)}async function I(){const R=x.current;JSON.stringify(R)!==JSON.stringify(v)&&v.length>0&&i&&await i.addParticipantTags(v),x.current=v}k().then(I)},[t,i,d]);const _=N.useMemo(()=>{var k;return n!=="end"&&mS(r)&&e.baseComponents?Fte({},(k=e.baseComponents)==null?void 0:k[r.baseComponent],r):r},[r,e]);if(n==="end")return E.jsx(KUt,{});if(n==="__trainingFailed")return E.jsx(XUt,{});if(n==="__timedOut")return E.jsx(QUt,{});if(n==="Notfound")return E.jsx(Rv,{email:e.uiConfig.contactEmail});if(m&&p!==m)return E.jsx(ga,{style:{height:"80vh"},children:E.jsx(Zc,{})});const C=_.instruction||"",{instructionLocation:T}=_,S=e.uiConfig.sidebar&&(T==="sidebar"||T===void 0);return E.jsxs(E.Fragment,{children:[T==="aboveStimulus"&&E.jsx(tl,{text:C}),E.jsx(n8,{status:f,config:_,location:"aboveStimulus"},`${t}-above-response-block`),E.jsxs(N.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:[_.type==="markdown"&&E.jsx(LUt,{currentConfig:_}),_.type==="website"&&E.jsx(xEt,{currentConfig:_}),_.type==="image"&&E.jsx(EEt,{currentConfig:_}),_.type==="react-component"&&E.jsx(MUt,{currentConfig:_,provState:l}),_.type==="vega"&&E.jsx(R0n,{currentConfig:_,provState:l})]},`${t}-stimulus`),(T==="belowStimulus"||T===void 0&&!S)&&E.jsx(tl,{text:C}),E.jsx(n8,{status:f,config:_,location:"belowStimulus"},`${t}-below-response-block`)]})}function rHe(e){const[t]=Tb();return E.jsx(ete,{...e,to:{pathname:e.to,search:t.toString()}})}function iHe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=iHe(o,t,n,r),r.includes(o.orderPath))break}return i}function sHe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=sHe(s,r)}}),n}function P0n(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function O0n({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=W_(),c=Cp(),f=Zd(),[d,{close:h,open:p}]=dZ(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?iHe(n,e,r,a.orderPath):-1,{trialId:y}=V0(),[v]=Tb(),b=N.useMemo(()=>v.get("participantId"),[v]),x=y===e,_=s?f===g:f===`reviewer-${e}`,C=u?x:_,T=N.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),k=u?T:()=>c(s?b?`/${l}/${Lh(g)}?participantId=${b}`:`/${l}/${Lh(g)}`:`/${l}/reviewer-${e}`),I=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,R=e.includes("$")&&I&&e.includes(I)?e.split(I).at(-1):e;return E.jsxs(Fc,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[E.jsx(Fc.Target,{children:E.jsx(Fe,{onMouseEnter:p,onMouseLeave:h,children:E.jsx(WL,{active:C,style:{lineHeight:"32px",height:"32px"},label:E.jsxs(Fe,{children:[i&&E.jsx(Ept,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==R&&E.jsx(Lpt,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),E.jsx(Ye,{size:"sm",span:C,fw:C?"700":void 0,display:"inline",children:R})]}),onClick:k,disabled:t})})}),m&&(m.description||m.meta)&&E.jsx(Fc.Dropdown,{onMouseLeave:h,children:E.jsxs(Fe,{children:[m.description&&E.jsxs(Fe,{children:[E.jsx(Ye,{fw:900,display:"inline-block",mr:2,children:"Description:"}),E.jsx(Ye,{fw:400,component:"span",children:m.description})]}),m.meta&&E.jsxs(Fe,{children:[E.jsx(Ye,{fw:"900",component:"span",children:"Task Meta: "}),E.jsx(Ye,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function $M({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=Pg(e.components);return n&&r&&(o=P0n(Pg(e.components),Pg(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),E.jsx(E.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return E.jsx(O0n,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?dp(c).length-sHe(u,c):0,d=dp(u);return E.jsx(WL,{label:E.jsxs(Fe,{style:{opacity:f>0?1:.5},children:[E.jsx(Ye,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?E.jsx(wpt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&E.jsxs(uv,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&E.jsx(uv,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:E.jsx(Fe,{style:{borderLeft:"1px solid #e9ecef"},children:E.jsx($M,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function oHe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function KEe({text:e}){return E.jsx(ws,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:E.jsx(nte,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function F0n(){const e=ni(h=>h.sequence),t=ni(h=>h.metadata),{toggleStudyBrowser:n}=Ul(),r=ty(),i=ef(),s=W_(),o=_ke(`/${s}`),{storageEngine:a}=Oo(),u=YA(),l=N.useMemo(()=>{let h=Pg(r.sequence);return h=Rte(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=N.useState("participant"),d=N.useMemo(()=>c==="allTrials"||u,[c,u]);return E.jsxs(Yi.Aside,{p:"0",children:[E.jsx(Yi.Section,{p:"md",children:E.jsxs(Jt,{direction:"row",justify:"space-between",children:[E.jsx(Ye,{size:"md",fw:700,pt:3,children:"Study Browser"}),E.jsx(ws,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:E.jsx(bn,{variant:"light",leftSection:E.jsx(rte,{size:14}),onClick:()=>oHe(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),E.jsx(xb,{onClick:()=>i(n()),mt:1})]})}),E.jsx(Yi.Section,{grow:!0,component:Kg,p:"md",children:E.jsxs(qr,{value:c,onChange:f,children:[E.jsx(Fe,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:E.jsxs(qr.List,{grow:!0,children:[E.jsxs(qr.Tab,{value:"participant",children:["Participant View",E.jsx(KEe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),E.jsxs(qr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",E.jsx(KEe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),E.jsx(qr.Panel,{value:"participant",children:E.jsx($M,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),E.jsx(qr.Panel,{value:"allTrials",children:E.jsx($M,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function $0n({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=ni(S=>S.config),r=ni(S=>S.metadata),i=Nte(),s=ef(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Ul(),{storageEngine:l}=Oo(),c=eh(),f=Zd(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=N.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,y=n==null?void 0:n.uiConfig.withProgressBar,v=W_(),b=_ke(`/${v}`),x=N.useRef(null),[_,C]=N.useState(!1),T=ni(S=>S.isRecording);return N.useEffect(()=>{const S=x.current;S&&C(S.scrollWidth>S.offsetWidth)},[n]),E.jsx(Yi.Header,{p:"md",children:E.jsxs(Ef,{mt:-7,align:"center",children:[E.jsx(Ef.Col,{span:4,children:E.jsxs(Jt,{align:"center",children:[E.jsx(Eb,{w:40,src:`${jl}${g}`,alt:"Study Logo"}),E.jsx(Ku,{w:"md"}),E.jsx(uo,{ref:x,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),E.jsx(Ef.Col,{span:4,children:y&&E.jsx(LA,{radius:"md",size:"lg",value:h})}),E.jsx(Ef.Col,{span:4,children:E.jsxs(Mi,{wrap:"nowrap",justify:"right",children:[T?E.jsxs(Mi,{ml:"xl",gap:20,wrap:"nowrap",children:[E.jsx(Ye,{color:"red",children:"Recording audio"}),E.jsx(_8e,{})]}):null,!t&&E.jsx(ws,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:E.jsx(uv,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&E.jsx(bn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),E.jsxs(Cl,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[E.jsx(Cl.Target,{children:E.jsx($_,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:E.jsx(kpt,{})})}),E.jsxs(Cl.Dropdown,{children:[e&&E.jsx(Cl.Item,{leftSection:E.jsx(Vpt,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),E.jsx(Cl.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:E.jsx($pt,{size:14}),children:"Contact"}),e&&E.jsx(Cl.Item,{leftSection:E.jsx(rte,{size:14}),onClick:()=>oHe(l,n,r,b),children:"Next Participant"}),e&&E.jsx(Cl.Item,{leftSection:E.jsx(Ske,{size:14}),component:"a",href:`${jl}analysis/stats/${v}`,children:"Analyze & Manage"})]})]})]})})]})})}function aHe(e,t){var n;return mS(e)&&t.baseComponents?Fte({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function M0n(){var u;const e=(u=ty())==null?void 0:u.uiConfig.sidebar,t=ty(),n=eh(),r=t.components[n],i=N.useMemo(()=>r?aHe(r,t):null,[r,t]),s=$te(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?E.jsxs(Yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&E.jsx(Yi.Section,{bg:"gray.3",p:"md",children:E.jsxs(Ye,{c:"gray.9",children:[E.jsx(Ye,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),E.jsx(tl,{text:o})]})}),E.jsx(Yi.Section,{p:"md",children:E.jsx(n8,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):E.jsx(Yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:E.jsx(n8,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function L0n(){const e=ni(u=>u.showHelpText),t=ni(u=>u.config),n=ef(),{toggleShowHelpText:r}=Ul(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await Lte(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),E.jsx(fo,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?E.jsx(tl,{text:i}):E.jsx(Rv,{path:t.uiConfig.helpTextPath})})}function B0n(){const e=ni(o=>o.alertModal),{setAlertModal:t}=Ul(),n=ef(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),E.jsx(fo,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:E.jsxs(Ng,{color:"red",radius:"xs",title:"Alert",icon:E.jsx(xpt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[E.jsx(Ye,{my:"md",children:e.message}),E.jsx(Mi,{w:"100%",justify:"end",children:E.jsx(bn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const XEe=15,QEe=3;function j0n({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return E.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return E.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:E.jsx("rect",{fill:a===r?"#e15759":"#484848",x:e(u.createdOn)-QEe/2,y:n/2-XEe/2,width:QEe,height:XEe})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?E.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const JEe={left:5,top:0,right:5,bottom:0};function U0n({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=N.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=N.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=N.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return E.jsx(j0n,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return E.jsxs("svg",{style:{width:n,height:r},children:[E.jsx("line",{stroke:"black",strokeWidth:1,x1:JEe.left,x2:n+JEe.left,y1:r/2,y2:r/2}),c]})}function z0n(e){const t=N.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return N.useLayoutEffect(()=>{t.current=e}),N.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function V0n({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=N.useRef(0),u=N.useRef(Date.now()),[l,c]=N.useState(0);N.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=z0n(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});N.useEffect(()=>{let h=null;return i&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[f,i]);const d=N.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return E.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:E.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function DQ(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const qq={left:0,top:0,right:0,bottom:0};function H0n(e,t){return t?t.getParticipantData(e):null}function q0n({setTimeString:e}){const[t]=Tb(),n=N.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Oo(),i=ni(j=>j.analysisIsPlaying),s=ni(j=>j.analysisHasAudio),o=ni(j=>j.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l}=Ul(),c=ef(),f=eh(),d=Zd();N.useEffect(()=>{c(a(null))},[d,a,c]);const[h,{width:p}]=kf(),[m,g]=N.useState(0),[y,v]=N.useState(null),[b,x]=N.useState(0),{value:_,status:C}=U$(H0n,[n,r]),[T,S]=mit(0,100),k=N.useRef(null),[I,R]=N.useState(!0),F=N.useRef(null),O=N.useMemo(()=>`${f}_${d}`,[f,d]);N.useEffect(()=>{var j;if(O&&_&&((j=_.answers[O])!=null&&j.provenanceGraph)){const W=Q_.create(),L=ON({registry:W,initialState:{}});_.answers[O].provenanceGraph&&(L.importObject(Pg(_.answers[O].provenanceGraph)),c(l(!0)),F.current=L)}else c(l(!1))},[_,O,c,l]);const B=N.useCallback(j=>{var W;j&&(O&&_&&F.current&&(c(a(F.current.getState((W=_.answers[O].provenanceGraph)==null?void 0:W.nodes[j]))),F.current.to(j)),v(j))},[_,a,c,O]);N.useEffect(()=>{var L;if(!O||!_||!F.current||!((L=_.answers[O])!=null&&L.provenanceGraph))return;const j=_.answers[O].provenanceGraph;if(!j)return;if(!y||!j.nodes[y]){B(j.root);return}let W=j.nodes[y];for(;;)if(T<W.createdOn){if(DNt(W))break;{const q=W.parent;W=j.nodes[q]}}else if(W.children.length>0){const q=W.children[0];if(T>j.nodes[q].createdOn)W=j.nodes[q];else break}else break;W.id!==y&&B(W.id)},[B,y,_,n,T,O]);const H=N.useMemo(()=>(_==null?void 0:_.answers[O].startTime)||0,[_,O]);N.useEffect(()=>{b===0?e(""):T!==0&&e(`${DQ(T-H)} / ${DQ(b*1e3)}`)},[O,_,T,e,H,b]);const U=YA(),G=N.useRef(null),Y=N.useCallback(async j=>{if(G.current=j,j&&_&&U&&O&&r)try{const W=await r.getAudio(O,n);await j.load(W),R(!1),c(u(!0)),x(j.getDuration()),g(j.getWidth()),j.seekTo(0),j.on("redrawcomplete",()=>g(j.getWidth()))}catch(W){c(u(!1));const L=_.answers[O].endTime-_.answers[O].startTime;throw x(L>-1?L/1e3:0),c(u(!1)),new Error(W)}else c(u(!1)),x(0)},[_,U,O,r,n,c,u]),Q=N.useCallback((j,W)=>{S(j),G.current&&W&&setTimeout(()=>{var L;(L=G.current)==null||L.seekTo(W)})},[S,G]);N.useEffect(()=>{G.current&&(i?G.current.play():G.current.pause())},[G,i]);const M=N.useMemo(()=>{var L,q;if(!_||!((L=_.answers[O])!=null&&L.startTime)||!((q=_.answers[O])!=null&&q.endTime))return null;const j=b>0?_.answers[O].startTime+b*1e3:_.answers[O].endTime;return Ua([qq.left,p+qq.left+qq.right]).domain([_.answers[O].startTime,j]).clamp(!0)},[_,O,p,b]);return N.useEffect(()=>{Y(G.current)},[Q,Y,_,n,G]),E.jsx(Mi,{wrap:"nowrap",gap:10,mx:10,children:E.jsxs(os,{ref:h,style:{width:"100%"},gap:0,children:[E.jsx(ga,{}),_!==null&&O?E.jsxs(Fe,{ref:k,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[E.jsx(b8e,{onMount:Y,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:E.jsx(x8e,{id:"waveform",height:50})}),I?E.jsx(Zc,{}):null]}):null,C==="success"&&_&&M&&O&&_.answers[O].provenanceGraph?E.jsx(U0n,{xScale:M,trialName:O,setPlayTime:Q,currentNode:y,setCurrentNode:B,participantData:_,width:m||p,height:25}):null,M&&_&&(s||o)?E.jsx(V0n,{duration:b*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:_.answers[O].startTime,width:p,xScale:M,updateTimer:Q}):null]})})}function W0n(e,t){return t?t.getParticipantData(e):null}function G0n(e){return e?e.getAllParticipantsData():null}function Y0n(){const[e]=Tb(),t=N.useMemo(()=>e.get("participantId")||void 0,[e]),n=eh(),r=Zd(),i=Cp(),{setAnalysisIsPlaying:s}=Ul(),o=ef(),a=ni(y=>y.analysisIsPlaying),{storageEngine:u}=Oo(),{value:l,status:c}=U$(W0n,[t,u]),{value:f}=U$(G0n,[u]),[d,h]=N.useMemo(()=>{if(f&&l&&t&&n){const y=f.filter(_=>_.participantConfigHash===l.participantConfigHash),v=y.findIndex(_=>_.participantId===t),b=v<y.length-1?y[v+1]:y[0],x=v>0?y[v-1]:y[y.length-1];return[[b.participantId,dp(b.sequence).indexOf(n)],[x.participantId,dp(x.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=N.useMemo(()=>{const y={};return f==null||f.forEach(v=>{y[v.participantConfigHash]||(y[v.participantConfigHash]=new Set),y[v.participantConfigHash].add(v.participantId)}),Object.keys(y).sort((v,b)=>v===(l==null?void 0:l.participantConfigHash)?-1:b===(l==null?void 0:l.participantConfigHash)?1:0).map(v=>({group:`Config version: ${v}`,items:[...y[v]].map(b=>({value:b,label:b,disabled:v!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=N.useState("");return E.jsx(Yi.Footer,{zIndex:101,withBorder:!1,children:E.jsxs(Fe,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[E.jsx(Lf,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),E.jsx(q0n,{setTimeString:g}),E.jsx(ga,{children:E.jsxs(Mi,{gap:"xs",style:{height:"50px"},children:[E.jsx(Ye,{size:"sm",ff:"monospace",children:m}),E.jsx($_,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?E.jsx(Kpt,{}):E.jsx(Xpt,{})}),E.jsx(Ye,{mx:"0",children:"Participant:"}),E.jsx(BA,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:y=>{i(`./${Lh(0)}?participantId=${y}`,{relative:"path"})},data:p}),E.jsx(bn,{onClick:()=>i(`./${Lh(+r-1)}?participantId=${t}`,{relative:"path"}),children:E.jsx(F0e,{})}),E.jsx(bn,{onClick:()=>i(`./${Lh(+r+1)}?participantId=${t}`,{relative:"path"}),children:E.jsx($0e,{})}),E.jsxs(bn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${Lh(h[1])}?participantId=${h[0]}`),children:[E.jsx(F0e,{}),E.jsx(L0e,{})]}),E.jsxs(bn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${Lh(d[1])}?participantId=${d[0]}`),children:[E.jsx(L0e,{}),E.jsx($0e,{})]})]})})]})})}function K0n(){const e=N.useRef([]),t=ty(),n=t.uiConfig.windowEventDebounceTime??100,r=ni(d=>d.showStudyBrowser),i=ni(d=>d.analysisHasAudio),s=ni(d=>d.analysisHasProvenance),o=ni(d=>d.modes);N.useEffect(()=>{const d=Ah(_=>{e.current.push([Date.now(),"focus",_.target instanceof HTMLElement?_.target.tagName:""])},n,{maxWait:n}),h=Ah(_=>{e.current.push([Date.now(),"input",_.data??""])},n,{maxWait:n}),p=Ah(_=>{e.current.push([Date.now(),"keypress",_.key])},n,{maxWait:n}),m=Ah(_=>{e.current.push([Date.now(),"mousedown",[_.clientX,_.clientY]])},n,{maxWait:n}),g=Ah(_=>{e.current.push([Date.now(),"mouseup",[_.clientX,_.clientY]])},n,{maxWait:n}),y=Ah(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Ah(_=>{e.current.push([Date.now(),"mousemove",[_.clientX,_.clientY]])},n,{maxWait:n}),b=Ah(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),x=Ah(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",x),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",x)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=N.useMemo(()=>o,[o]),c=N.useMemo(()=>u&&r,[u,r]),f=YA();return E.jsx(FRe.Provider,{value:e,children:E.jsxs(Yi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[E.jsx(M0n,{}),E.jsx(F0n,{}),E.jsx($0n,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),E.jsx(L0n,{}),E.jsx(B0n,{}),E.jsx(Yi.Main,{children:E.jsx(spt,{})}),f&&E.jsx(Y0n,{})]})})}function X0n(e,t=!1){return typeof e=="number"?ZEe(e,t):ZEe(e.length,t).map(r=>r.map(i=>e[i]))}function ZEe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function uHe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=uHe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function Q0n(e,t){const n=Pg(e);return uHe(n,t,"root")}function lHe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&lHe(s,t,i,o)})}function J0n(e){const t=[];return lHe(e,t,"",0),t}function e2e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return X0n(i.sort(()=>.5-Math.random()),!0)}function t2e(e){const n=J0n(e.sequence).map(s=>({[s]:e2e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=Q0n(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=e2e(e,o))})}),i}var Z0n=NRe;function emn(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function tmn(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function nmn(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function rmn(e){return e.__COMMENTS__}function imn(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var uj={EOL:Z0n.EOL||`
`,tryParseNumber:emn,createComment:tmn,removeComment:nmn,getComment:rmn,forceComment:imn},smn="3.2.1";function omn(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return n2e}else if(e.length===0)return n2e;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return umn(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),amn.bind(null,n)}function amn(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function n2e(){}function umn(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function cHe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}cHe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function fHe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}fHe.description="parse hexadecimal numbers prefixed with 0x";function dHe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}dHe.description="support ISO dates";var wle={loadDsf:omn,std:{math:cHe,hex:fHe,date:dHe}},lmn=function(e,t){var n=uj,r=wle,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function d(B){var H,U=0,G=1;for(H=s-1;H>0&&i[H]!==`
`;H--,U++);for(;H>0;H--)i[H]===`
`&&G++;throw new Error(B+" at line "+G+","+U+" >>>"+i.substr(s-U,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function m(B){for(var H="",U=o;h();){if(o===U)return h(),B&&U==="'"&&o==="'"&&H.length===0?(h(),g()):H;if(o==="\\")if(h(),o==="u"){for(var G=0,Y=0;Y<4;Y++){h();var Q=o.charCodeAt(0),M;o>="0"&&o<="9"?M=Q-48:o>="a"&&o<="f"?M=Q-97+10:o>="A"&&o<="F"?M=Q-65+10:d("Bad \\u char "+o),G=G*16+M}H+=String.fromCharCode(G)}else if(typeof a[o]=="string")H+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):H+=o}d("Bad string")}function g(){for(var B="",H=0,U=0;;){var G=p(-U-5);if(!G||G===`
`)break;U++}function Y(){for(var Q=U;o&&o<=" "&&o!==`
`&&Q-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),Y());;){if(!o)d("Bad multiline string");else if(o==="'"){if(H++,h(),H===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;H>0;)B+="'",H--;o===`
`?(B+=`
`,h(),Y()):(o!=="\r"&&(B+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var B="",H=s,U=-1;;){if(o===":")return B?U>=0&&U!==B.length&&(s=H+U,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?U<0&&(U=B.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var B=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var H=o==="\r"||o===`
`||o==="";if(H||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var U=B[0];switch(U){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(U==="-"||U>="0"&&U<="9"){var G=n.tryParseNumber(B);if(G!==void 0)return G}}if(H){B=B.trim();var Y=l(B);return Y!==void 0?Y:B}}B+=o}}function x(B,H){var U;for(B--,U=s-2;U>B&&i[U]<=" "&&i[U]!==`
`;U--);i[U]===`
`&&U--,i[U]==="\r"&&U--;var G=i.substr(B,U-B+1);for(U=0;U<G.length;U++)if(G[U]>" "){var Y=G.indexOf(`
`);if(Y>=0){var Q=[G.substr(0,Y),G.substr(Y+1)];return H&&Q[0].trim().length===0&&Q.shift(),Q}else return[G]}return[]}function _(B){function H(G,Y){var Q,M,j,W;switch(typeof G){case"string":G.indexOf(Y)>=0&&(W=G);break;case"object":if(Object.prototype.toString.apply(G)==="[object Array]")for(Q=0,j=G.length;Q<j;Q++)W=H(G[Q],Y)||W;else for(M in G)Object.prototype.hasOwnProperty.call(G,M)&&(W=H(G[M],Y)||W)}return W}function U(G){var Y=H(B,G);return Y?"found '"+G+`' in a string value, your mistake could be with:
  > `+Y+`
  (unquoted strings contain everything up to the next line!)`:""}return U("}")||U("]")}function C(){var B=[],H,U,G;try{if(u&&(H=n.createComment(B,{a:[]})),h(),U=s,v(),H&&(G=x(U,!0).join(`
`)),o==="]")return h(),H&&(H.e=[G]),B;for(;o;){if(B.push(S()),U=s,v(),o===","&&(h(),U=s,v()),H){var Y=x(U);H.a.push([G||"",Y[0]||""]),G=Y[1]}if(o==="]")return h(),H&&(H.a[H.a.length-1][1]+=G||""),B;v()}d("End of input while parsing an array (missing ']')")}catch(Q){throw Q.hint=Q.hint||_(B),Q}}function T(B){var H="",U={},G,Y,Q;try{if(u&&(G=n.createComment(U,{c:{},o:[]})),B?Y=1:(h(),Y=s),v(),G&&(Q=x(Y,!0).join(`
`)),o==="}"&&!B)return G&&(G.e=[Q]),h(),U;for(;o;){if(H=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),U[H]=S(),Y=s,v(),o===","&&(h(),Y=s,v()),G){var M=x(Y);G.c[H]=[Q||"",M[0]||""],Q=M[1],G.o.push(H)}if(o==="}"&&!B)return h(),G&&(G.c[H][1]+=Q||""),U;v()}if(B)return U;d("End of input while parsing an object (missing '}')")}catch(j){throw j.hint=j.hint||_(U),j}}function S(){switch(v(),o){case"{":return T();case"[":return C();case"'":case'"':return m(!0);default:return b()}}function k(B,H){var U=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var G=H.join(`
`),Y=x(U).join(`
`);if(Y||G){var Q=n.createComment(B,n.getComment(B));Q.r=[G,Y]}}return B}function I(){v();var B=u?x(1):null;switch(o){case"{":return k(T(),B);case"[":return k(C(),B);default:return k(S(),B)}}function R(){v();var B=u?x(1):null;switch(o){case"{":return k(T(),B);case"[":return k(C(),B)}try{return k(T(!0),B)}catch(H){c();try{return k(S(),B)}catch{throw H}}}if(typeof e!="string")throw new Error("source is not a string");var F=null,O=!0;return t&&typeof t=="object"&&(u=t.keepWsc,F=t.dsf,O=t.legacyRoot!==!1),l=r.loadDsf(F,"parse"),i=e,c(),O?R():I()},cmn=function(e,t){var n=uj,r=wle,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var x,_="---\u2028--\uFEFF-",C=new RegExp('[\\\\\\"\0-'+_+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+_+"]","g"),S=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+_+"]","g"),k=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,F="",O=0;function B(W,L){return O+=W[0].length+W[1].length-W[2]-W[3],W[0]+L+W[1]}function H(W){return W.replace(C,function(L){var q=I[L];return typeof q=="string"?B(g.esc,q):B(g.uni,("0000"+L.charCodeAt(0).toString(16)).slice(-4))})}function U(W,L,q,J){return W?(T.lastIndex=0,k.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||k.test(W)?(C.lastIndex=0,S.lastIndex=0,C.test(W)?!S.test(W)&&!J&&d?G(W,L):B(g.qstr,H(W)):B(g.qstr,W)):B(g.str,W)):B(g.qstr,"")}function G(W,L){var q,J=W.replace(/\r/g,"").split(`
`);if(L+=o,J.length===1)return B(g.mstr,J[0]);var re=s+L+g.mstr[0];for(q=0;q<J.length;q++)re+=s,J[q]&&(re+=L+J[q]);return re+s+L+g.mstr[1]}function Y(W){return W?l||R.test(W)?(C.lastIndex=0,B(g.qkey,C.test(W)?H(W):W)):B(g.key,W):'""'}function Q(W,L,q,J){function re(Wt){return Wt&&Wt[Wt[0]==="\r"?1:0]===`
`}function ve(Wt){return Wt&&!re(Wt)}function pe(Wt,an,Cn){if(!Wt)return"";Wt=n.forceComment(Wt);var $n,ki=Wt.length;for($n=0;$n<ki&&Wt[$n]<=" ";$n++);return Cn&&$n>0&&(Wt=Wt.substr($n)),$n<ki?an+B(g.rem,Wt):Wt}var Ae=x(W);if(Ae!==void 0)return B(g.dsf,Ae);switch(typeof W){case"string":return U(W,F,L,J);case"number":return isFinite(W)?B(g.num,String(W)):B(g.lit,"null");case"boolean":return B(g.lit,String(W));case"object":if(!W)return B(g.lit,"null");var ke;a&&(ke=n.getComment(W));var it=Object.prototype.toString.apply(W)==="[object Array]",Re=F;F+=o;var ut=s+Re,Xe=s+F,Tt=q||u?"":ut,gt=[],Ie,Ve=f?[]:null,ft=c,_t=d,$t=h?"":g.com[0],st=0,X,de,we,ae,he,Ee,Me,Be,lt;if(it){for(X=0,de=W.length;X<de;X++){if(Ie=X<de-1,ke?(Ee=ke.a[X]||[],Me=ve(Ee[1]),gt.push(pe(Ee[0],`
`)+Xe),Ve&&(Ee[0]||Ee[1]||Me)&&(Ve=null)):gt.push(Xe),O=0,ae=W[X],gt.push(Q(ae,ke?Me:!1,!0)+(Ie?h:"")),Ve){switch(typeof ae){case"string":O=0,c=!0,d=0,Ve.push(Q(ae,!1,!0)+(Ie?g.com[0]:"")),c=ft,d=_t;break;case"object":if(ae){Ve=null;break}default:Ve.push(gt[gt.length-1]+(Ie?$t:""));break}Ie&&(O+=g.com[0].length-g.com[2]),st+=O}ke&&Ee[1]&&gt.push(pe(Ee[1],Me?" ":`
`,Me))}de===0?ke&&ke.e&&gt.push(pe(ke.e[0],`
`)+ut):gt.push(ut),gt.length===0?Be=B(g.arr,""):(Be=Tt+B(g.arr,gt.join("")),Ve&&(lt=Ve.join(" "),lt.length-st<=f&&(Be=B(g.arr,lt))))}else{var Ze=ke?ke.o.slice():[],Xt=[];for(we in W)Object.prototype.hasOwnProperty.call(W,we)&&Ze.indexOf(we)<0&&Xt.push(we);m&&Xt.sort();var fn=Ze.concat(Xt);for(X=0,de=fn.length;X<de;X++)if(Ie=X<de-1,we=fn[X],ke?(Ee=ke.c[we]||[],Me=ve(Ee[1]),gt.push(pe(Ee[0],`
`)+Xe),Ve&&(Ee[0]||Ee[1]||Me)&&(Ve=null)):gt.push(Xe),O=0,ae=W[we],he=Q(ae,ke&&Me),gt.push(Y(we)+g.col[0]+(re(he)?"":" ")+he+(Ie?h:"")),ke&&Ee[1]&&gt.push(pe(Ee[1],Me?" ":`
`,Me)),Ve){switch(typeof ae){case"string":O=0,c=!0,d=0,he=Q(ae,!1),c=ft,d=_t,Ve.push(Y(we)+g.col[0]+" "+he+(Ie?g.com[0]:""));break;case"object":if(ae){Ve=null;break}default:Ve.push(gt[gt.length-1]+(Ie?$t:""));break}O+=g.col[0].length-g.col[2],Ie&&(O+=g.com[0].length-g.com[2]),st+=O}de===0?ke&&ke.e&&gt.push(pe(ke.e[0],`
`)+ut):gt.push(ut),gt.length===0?Be=B(g.obj,""):(Be=Tt+B(g.obj,gt.join("")),Ve&&(lt=Ve.join(" "),lt.length-st<=f&&(Be=B(g.obj,lt))))}return F=Re,Be}}x=r.loadDsf(p,"stringify");var M="",j=a?j=(n.getComment(e)||{}).r:null;return j&&j[0]&&(M=j[0]+`
`),M+=Q(e,null,!0,!0),j&&(M+=j[1]||""),M},WC=uj;function Vk(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function IQ(e,t){if(!(e===null||typeof e!="object")){var n=WC.getComment(e);n&&WC.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)r2e(o.a,r,n.a[r],IQ(e[r]))&&(s=!0);!s&&n.e&&(o.e=Vk(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];r2e(o.s,l,n.c[l],IQ(e[l]))&&(s=!0)}!s&&n.e&&(o.e=Vk(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=Vk(n.r[0],n.r[1])),s?o:void 0}}function fmn(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function dmn(e,t){var n=[];if(kQ(e,t,n,[]),n.length>0){var r=MM(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+fmn(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),MM(t,r,1)}}function r2e(e,t,n,r){var i=Vk(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function Hk(e,t){var n=Vk(t.b,t.a);return n.path=e,n}function qk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(Hk(s,o)),qk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(Hk(u,l)),qk(l.x,t,u))});e.e&&t.push(Hk(n,e.e))}}function kQ(e,t,n,r){if(e){if(t===null||typeof t!="object"){qk(e,n,r);return}var i,s=WC.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],kQ(u.x,t[i],n,l)):(n.push(Hk(l,u)),qk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],kQ(d.x,t[c],n,f))):d&&(n.push(Hk(f,d)),qk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function MM(e,t,n){var r=WC.createComment(e,WC.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=WC.forceComment(t)),r.r[n]||""}var hmn={extract:function(e){return IQ(e,!0)},merge:dmn,header:function(e,t){return MM(e,t,0)},footer:function(e,t){return MM(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var i2e=uj,pmn=smn,s2e=lmn,o2e=cmn,mmn=hmn,gmn=wle,lj={parse:s2e,stringify:o2e,endOfLine:function(){return i2e.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(i2e.EOL=e)},version:pmn,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,s2e(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,o2e(e,t)}},comments:mmn,dsf:gmn.std},RQ={exports:{}},hHe={},ap={},mA={},RP={},Sr={},$R={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,x)=>`${b}${x}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,x)=>(x instanceof n&&(b[x.str]=(b[x.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let x=0;for(;x<v.length;)a(b,v[x]),b.push(y[++x]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let x=0;for(;x<v.length;)b.push(s),a(b,v[x]),b.push(s,h(y[++x]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})($R);var NQ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=$R;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(NQ);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=$R,n=NQ;var r=$R;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=NQ;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,J){return this}}class o extends s{constructor(q,J,re){super(),this.varKind=q,this.name=J,this.rhs=re}render({es5:q,_n:J}){const re=q?n.varKinds.var:this.varKind,ve=this.rhs===void 0?"":` = ${this.rhs}`;return`${re} ${this.name}${ve};`+J}optimizeNames(q,J){if(q[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,q,J)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,J,re){super(),this.lhs=q,this.rhs=J,this.sideEffects=re}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,J){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,q,J),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(q,this.rhs)}}class u extends a{constructor(q,J,re,ve){super(q,re,ve),this.op=J}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,J){return this.code=B(this.code,q,J),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((J,re)=>J+re.render(q),"")}optimizeNodes(){const{nodes:q}=this;let J=q.length;for(;J--;){const re=q[J].optimizeNodes();Array.isArray(re)?q.splice(J,1,...re):re?q[J]=re:q.splice(J,1)}return q.length>0?this:void 0}optimizeNames(q,J){const{nodes:re}=this;let ve=re.length;for(;ve--;){const pe=re[ve];pe.optimizeNames(q,J)||(H(q,pe.names),re.splice(ve,1))}return re.length>0?this:void 0}get names(){return this.nodes.reduce((q,J)=>F(q,J.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,J){super(J),this.condition=q}render(q){let J=`if(${this.condition})`+super.render(q);return this.else&&(J+="else "+this.else.render(q)),J}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let J=this.else;if(J){const re=J.optimizeNodes();J=this.else=Array.isArray(re)?new g(re):re}if(J)return q===!1?J instanceof y?J:J.nodes:this.nodes.length?this:new y(U(q),J instanceof y?[J]:J.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,J){var re;if(this.else=(re=this.else)===null||re===void 0?void 0:re.optimizeNames(q,J),!!(super.optimizeNames(q,J)||this.else))return this.condition=B(this.condition,q,J),this}get names(){const q=super.names;return O(q,this.condition),this.else&&F(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,J){if(super.optimizeNames(q,J))return this.iteration=B(this.iteration,q,J),this}get names(){return F(super.names,this.iteration.names)}}class x extends v{constructor(q,J,re,ve){super(),this.varKind=q,this.name=J,this.from=re,this.to=ve}render(q){const J=q.es5?n.varKinds.var:this.varKind,{name:re,from:ve,to:pe}=this;return`for(${J} ${re}=${ve}; ${re}<${pe}; ${re}++)`+super.render(q)}get names(){const q=O(super.names,this.from);return O(q,this.to)}}class _ extends v{constructor(q,J,re,ve){super(),this.loop=q,this.varKind=J,this.name=re,this.iterable=ve}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,J){if(super.optimizeNames(q,J))return this.iterable=B(this.iterable,q,J),this}get names(){return F(super.names,this.iterable.names)}}class C extends p{constructor(q,J,re){super(),this.name=q,this.args=J,this.async=re}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}C.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class S extends p{render(q){let J="try"+super.render(q);return this.catch&&(J+=this.catch.render(q)),this.finally&&(J+=this.finally.render(q)),J}optimizeNodes(){var q,J;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(J=this.finally)===null||J===void 0||J.optimizeNodes(),this}optimizeNames(q,J){var re,ve;return super.optimizeNames(q,J),(re=this.catch)===null||re===void 0||re.optimizeNames(q,J),(ve=this.finally)===null||ve===void 0||ve.optimizeNames(q,J),this}get names(){const q=super.names;return this.catch&&F(q,this.catch.names),this.finally&&F(q,this.finally.names),q}}class k extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}k.kind="catch";class I extends p{render(q){return"finally"+super.render(q)}}I.kind="finally";class R{constructor(q,J={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...J,_n:J.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,J){const re=this._extScope.value(q,J);return(this._values[re.prefix]||(this._values[re.prefix]=new Set)).add(re),re}getScopeValue(q,J){return this._extScope.getValue(q,J)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,J,re,ve){const pe=this._scope.toName(J);return re!==void 0&&ve&&(this._constants[pe.str]=re),this._leafNode(new o(q,pe,re)),pe}const(q,J,re){return this._def(n.varKinds.const,q,J,re)}let(q,J,re){return this._def(n.varKinds.let,q,J,re)}var(q,J,re){return this._def(n.varKinds.var,q,J,re)}assign(q,J,re){return this._leafNode(new a(q,J,re))}add(q,J){return this._leafNode(new u(q,e.operators.ADD,J))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const J=["{"];for(const[re,ve]of q)J.length>1&&J.push(","),J.push(re),(re!==ve||this.opts.es5)&&(J.push(":"),(0,t.addCodeArg)(J,ve));return J.push("}"),new t._Code(J)}if(q,J,re){if(this._blockNode(new y(q)),J&&re)this.code(J).else().code(re).endIf();else if(J)this.code(J).endIf();else if(re)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,J){return this._blockNode(q),J&&this.code(J).endFor(),this}for(q,J){return this._for(new b(q),J)}forRange(q,J,re,ve,pe=this.opts.es5?n.varKinds.var:n.varKinds.let){const Ae=this._scope.toName(q);return this._for(new x(pe,Ae,J,re),()=>ve(Ae))}forOf(q,J,re,ve=n.varKinds.const){const pe=this._scope.toName(q);if(this.opts.es5){const Ae=J instanceof t.Name?J:this.var("_arr",J);return this.forRange("_i",0,(0,t._)`${Ae}.length`,ke=>{this.var(pe,(0,t._)`${Ae}[${ke}]`),re(pe)})}return this._for(new _("of",ve,pe,J),()=>re(pe))}forIn(q,J,re,ve=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${J})`,re);const pe=this._scope.toName(q);return this._for(new _("in",ve,pe,J),()=>re(pe))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const J=new T;if(this._blockNode(J),this.code(q),J.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,J,re){if(!J&&!re)throw new Error('CodeGen: "try" without "catch" and "finally"');const ve=new S;if(this._blockNode(ve),this.code(q),J){const pe=this.name("e");this._currNode=ve.catch=new k(pe),J(pe)}return re&&(this._currNode=ve.finally=new I,this.code(re)),this._endBlockNode(k,I)}throw(q){return this._leafNode(new f(q))}block(q,J){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(J),this}endBlock(q){const J=this._blockStarts.pop();if(J===void 0)throw new Error("CodeGen: not in self-balancing block");const re=this._nodes.length-J;if(re<0||q!==void 0&&re!==q)throw new Error(`CodeGen: wrong number of nodes: ${re} vs ${q} expected`);return this._nodes.length=J,this}func(q,J=t.nil,re,ve){return this._blockNode(new C(q,J,re)),ve&&this.code(ve).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,J){const re=this._currNode;if(re instanceof q||J&&re instanceof J)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${J?`${q.kind}/${J.kind}`:q.kind}"`)}_elseNode(q){const J=this._currNode;if(!(J instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=J.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const J=this._nodes;J[J.length-1]=q}}e.CodeGen=R;function F(L,q){for(const J in q)L[J]=(L[J]||0)+(q[J]||0);return L}function O(L,q){return q instanceof t._CodeOrName?F(L,q.names):L}function B(L,q,J){if(L instanceof t.Name)return re(L);if(!ve(L))return L;return new t._Code(L._items.reduce((pe,Ae)=>(Ae instanceof t.Name&&(Ae=re(Ae)),Ae instanceof t._Code?pe.push(...Ae._items):pe.push(Ae),pe),[]));function re(pe){const Ae=J[pe.str];return Ae===void 0||q[pe.str]!==1?pe:(delete q[pe.str],Ae)}function ve(pe){return pe instanceof t._Code&&pe._items.some(Ae=>Ae instanceof t.Name&&q[Ae.str]===1&&J[Ae.str]!==void 0)}}function H(L,q){for(const J in q)L[J]=(L[J]||0)-(q[J]||0)}function U(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,t._)`!${W(L)}`}e.not=U;const G=j(e.operators.AND);function Y(...L){return L.reduce(G)}e.and=Y;const Q=j(e.operators.OR);function M(...L){return L.reduce(Q)}e.or=M;function j(L){return(q,J)=>q===t.nil?J:J===t.nil?q:(0,t._)`${W(q)} ${L} ${W(J)}`}function W(L){return L instanceof t.Name?L:(0,t._)`(${L})`}})(Sr);var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.checkStrictMode=qt.getErrorPath=qt.Type=qt.useFunc=qt.setEvaluated=qt.evaluatedPropsToName=qt.mergeEvaluated=qt.eachItem=qt.unescapeJsonPointer=qt.escapeJsonPointer=qt.escapeFragment=qt.unescapeFragment=qt.schemaRefOrVal=qt.schemaHasRulesButRef=qt.schemaHasRules=qt.checkUnknownRules=qt.alwaysValidSchema=qt.toHash=void 0;const ss=Sr,ymn=$R;function vmn(e){const t={};for(const n of e)t[n]=!0;return t}qt.toHash=vmn;function bmn(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(pHe(e,t),!mHe(t,e.self.RULES.all))}qt.alwaysValidSchema=bmn;function pHe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||vHe(e,`unknown keyword: "${s}"`)}qt.checkUnknownRules=pHe;function mHe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}qt.schemaHasRules=mHe;function xmn(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}qt.schemaHasRulesButRef=xmn;function wmn({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,ss._)`${n}`}return(0,ss._)`${e}${t}${(0,ss.getProperty)(r)}`}qt.schemaRefOrVal=wmn;function _mn(e){return gHe(decodeURIComponent(e))}qt.unescapeFragment=_mn;function Emn(e){return encodeURIComponent(_le(e))}qt.escapeFragment=Emn;function _le(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}qt.escapeJsonPointer=_le;function gHe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}qt.unescapeJsonPointer=gHe;function Cmn(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}qt.eachItem=Cmn;function a2e({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof ss.Name?(s instanceof ss.Name?e(i,s,o):t(i,s,o),o):s instanceof ss.Name?(t(i,o,s),s):n(s,o);return a===ss.Name&&!(u instanceof ss.Name)?r(i,u):u}}qt.mergeEvaluated={props:a2e({mergeNames:(e,t,n)=>e.if((0,ss._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,ss._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,ss._)`${n} || {}`).code((0,ss._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,ss._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,ss._)`${n} || {}`),Ele(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:yHe}),items:a2e({mergeNames:(e,t,n)=>e.if((0,ss._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,ss._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,ss._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,ss._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function yHe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,ss._)`{}`);return t!==void 0&&Ele(e,n,t),n}qt.evaluatedPropsToName=yHe;function Ele(e,t,n){Object.keys(n).forEach(r=>e.assign((0,ss._)`${t}${(0,ss.getProperty)(r)}`,!0))}qt.setEvaluated=Ele;const u2e={};function Tmn(e,t){return e.scopeValue("func",{ref:t,code:u2e[t.code]||(u2e[t.code]=new ymn._Code(t.code))})}qt.useFunc=Tmn;var PQ;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(PQ||(qt.Type=PQ={}));function Amn(e,t,n){if(e instanceof ss.Name){const r=t===PQ.Num;return n?r?(0,ss._)`"[" + ${e} + "]"`:(0,ss._)`"['" + ${e} + "']"`:r?(0,ss._)`"/" + ${e}`:(0,ss._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,ss.getProperty)(e).toString():"/"+_le(e)}qt.getErrorPath=Amn;function vHe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}qt.checkStrictMode=vHe;var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});const Nu=Sr,Smn={data:new Nu.Name("data"),valCxt:new Nu.Name("valCxt"),instancePath:new Nu.Name("instancePath"),parentData:new Nu.Name("parentData"),parentDataProperty:new Nu.Name("parentDataProperty"),rootData:new Nu.Name("rootData"),dynamicAnchors:new Nu.Name("dynamicAnchors"),vErrors:new Nu.Name("vErrors"),errors:new Nu.Name("errors"),this:new Nu.Name("this"),self:new Nu.Name("self"),scope:new Nu.Name("scope"),json:new Nu.Name("json"),jsonPos:new Nu.Name("jsonPos"),jsonLen:new Nu.Name("jsonLen"),jsonPart:new Nu.Name("jsonPart")};Sm.default=Smn;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Sr,n=qt,r=Sm;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:x}=g,{gen:_,compositeRule:C,allErrors:T}=x,S=f(g,y,v);b??(C||T)?u(_,S):l(x,(0,t._)`[${S}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:x,compositeRule:_,allErrors:C}=b,T=f(g,y,v);u(x,T),_||C||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:x,it:_}){if(x===void 0)throw new Error("ajv implementation error");const C=g.name("err");g.forRange("i",x,r.default.errors,T=>{g.const(C,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${C}.instancePath === undefined`,()=>g.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,_.errorPath))),g.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${_.errSchemaPath}/${y}`),_.opts.verbose&&(g.assign((0,t._)`${C}.schema`,v),g.assign((0,t._)`${C}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:x}=g;x.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:x}=g,_=[h(x,v),p(g,v)];return m(g,y,_),b.object(..._)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let x=b?y:(0,t.str)`${y}/${g}`;return v&&(x=(0,t.str)`${x}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,x]}function m(g,{params:y,message:v},b){const{keyword:x,data:_,schemaValue:C,it:T}=g,{opts:S,propertyName:k,topSchemaRef:I,schemaPath:R}=T;b.push([c.keyword,x],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),S.messages&&b.push([c.message,typeof v=="function"?v(g):v]),S.verbose&&b.push([c.schema,C],[c.parentSchema,(0,t._)`${I}${R}`],[r.default.data,_]),k&&b.push([c.propertyName,k])}})(RP);Object.defineProperty(mA,"__esModule",{value:!0});mA.boolOrEmptySchema=mA.topBoolOrEmptySchema=void 0;const Dmn=RP,Imn=Sr,kmn=Sm,Rmn={message:"boolean schema is false"};function Nmn(e){const{gen:t,schema:n,validateName:r}=e;n===!1?bHe(e,!1):typeof n=="object"&&n.$async===!0?t.return(kmn.default.data):(t.assign((0,Imn._)`${r}.errors`,null),t.return(!0))}mA.topBoolOrEmptySchema=Nmn;function Pmn(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),bHe(e)):n.var(t,!0)}mA.boolOrEmptySchema=Pmn;function bHe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Dmn.reportError)(i,Rmn,void 0,t)}var ia={},__={};Object.defineProperty(__,"__esModule",{value:!0});__.getRules=__.isJSONType=void 0;const Omn=["string","number","integer","boolean","null","object","array"],Fmn=new Set(Omn);function $mn(e){return typeof e=="string"&&Fmn.has(e)}__.isJSONType=$mn;function Mmn(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}__.getRules=Mmn;var zg={};Object.defineProperty(zg,"__esModule",{value:!0});zg.shouldUseRule=zg.shouldUseGroup=zg.schemaHasRulesForType=void 0;function Lmn({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&xHe(e,r)}zg.schemaHasRulesForType=Lmn;function xHe(e,t){return t.rules.some(n=>wHe(e,n))}zg.shouldUseGroup=xHe;function wHe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}zg.shouldUseRule=wHe;Object.defineProperty(ia,"__esModule",{value:!0});ia.reportTypeError=ia.checkDataTypes=ia.checkDataType=ia.coerceAndCheckDataType=ia.getJSONTypes=ia.getSchemaTypes=ia.DataType=void 0;const Bmn=__,jmn=zg,Umn=RP,dr=Sr,_He=qt;var GC;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(GC||(ia.DataType=GC={}));function zmn(e){const t=EHe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ia.getSchemaTypes=zmn;function EHe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Bmn.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ia.getJSONTypes=EHe;function Vmn(e,t){const{gen:n,data:r,opts:i}=e,s=Hmn(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,jmn.schemaHasRulesForType)(e,t[0]));if(o){const a=Cle(t,r,i.strictNumbers,GC.Wrong);n.if(a,()=>{s.length?qmn(e,t,s):Tle(e)})}return o}ia.coerceAndCheckDataType=Vmn;const CHe=new Set(["string","number","integer","boolean","null"]);function Hmn(e,t){return t?e.filter(n=>CHe.has(n)||t==="array"&&n==="array"):[]}function qmn(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,dr._)`typeof ${i}`),a=r.let("coerced",(0,dr._)`undefined`);s.coerceTypes==="array"&&r.if((0,dr._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,dr._)`${i}[0]`).assign(o,(0,dr._)`typeof ${i}`).if(Cle(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,dr._)`${a} !== undefined`);for(const l of n)(CHe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),Tle(e),r.endIf(),r.if((0,dr._)`${a} !== undefined`,()=>{r.assign(i,a),Wmn(e,a)});function u(l){switch(l){case"string":r.elseIf((0,dr._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,dr._)`"" + ${i}`).elseIf((0,dr._)`${i} === null`).assign(a,(0,dr._)`""`);return;case"number":r.elseIf((0,dr._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,dr._)`+${i}`);return;case"integer":r.elseIf((0,dr._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,dr._)`+${i}`);return;case"boolean":r.elseIf((0,dr._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,dr._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,dr._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,dr._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,dr._)`[${i}]`)}}}function Wmn({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,dr._)`${t} !== undefined`,()=>e.assign((0,dr._)`${t}[${n}]`,r))}function OQ(e,t,n,r=GC.Correct){const i=r===GC.Correct?dr.operators.EQ:dr.operators.NEQ;let s;switch(e){case"null":return(0,dr._)`${t} ${i} null`;case"array":s=(0,dr._)`Array.isArray(${t})`;break;case"object":s=(0,dr._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,dr._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,dr._)`typeof ${t} ${i} ${e}`}return r===GC.Correct?s:(0,dr.not)(s);function o(a=dr.nil){return(0,dr.and)((0,dr._)`typeof ${t} == "number"`,a,n?(0,dr._)`isFinite(${t})`:dr.nil)}}ia.checkDataType=OQ;function Cle(e,t,n,r){if(e.length===1)return OQ(e[0],t,n,r);let i;const s=(0,_He.toHash)(e);if(s.array&&s.object){const o=(0,dr._)`typeof ${t} != "object"`;i=s.null?o:(0,dr._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=dr.nil;s.number&&delete s.integer;for(const o in s)i=(0,dr.and)(i,OQ(o,t,n,r));return i}ia.checkDataTypes=Cle;const Gmn={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,dr._)`{type: ${e}}`:(0,dr._)`{type: ${t}}`};function Tle(e){const t=Ymn(e);(0,Umn.reportError)(t,Gmn)}ia.reportTypeError=Tle;function Ymn(e){const{gen:t,data:n,schema:r}=e,i=(0,_He.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var cj={};Object.defineProperty(cj,"__esModule",{value:!0});cj.assignDefaults=void 0;const y2=Sr,Kmn=qt;function Xmn(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)l2e(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>l2e(e,s,i.default))}cj.assignDefaults=Xmn;function l2e(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,y2._)`${s}${(0,y2.getProperty)(t)}`;if(i){(0,Kmn.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,y2._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,y2._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,y2._)`${a} = ${(0,y2.stringify)(n)}`)}var E0={},Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.validateUnion=Cr.validateArray=Cr.usePattern=Cr.callValidateCode=Cr.schemaProperties=Cr.allSchemaProperties=Cr.noPropertyInData=Cr.propertyInData=Cr.isOwnProperty=Cr.hasPropFunc=Cr.reportMissingProp=Cr.checkMissingProp=Cr.checkReportMissingProp=void 0;const Cs=Sr,Ale=qt,i1=Sm,Qmn=qt;function Jmn(e,t){const{gen:n,data:r,it:i}=e;n.if(Dle(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Cs._)`${t}`},!0),e.error()})}Cr.checkReportMissingProp=Jmn;function Zmn({gen:e,data:t,it:{opts:n}},r,i){return(0,Cs.or)(...r.map(s=>(0,Cs.and)(Dle(e,t,s,n.ownProperties),(0,Cs._)`${i} = ${s}`)))}Cr.checkMissingProp=Zmn;function egn(e,t){e.setParams({missingProperty:t},!0),e.error()}Cr.reportMissingProp=egn;function THe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Cs._)`Object.prototype.hasOwnProperty`})}Cr.hasPropFunc=THe;function Sle(e,t,n){return(0,Cs._)`${THe(e)}.call(${t}, ${n})`}Cr.isOwnProperty=Sle;function tgn(e,t,n,r){const i=(0,Cs._)`${t}${(0,Cs.getProperty)(n)} !== undefined`;return r?(0,Cs._)`${i} && ${Sle(e,t,n)}`:i}Cr.propertyInData=tgn;function Dle(e,t,n,r){const i=(0,Cs._)`${t}${(0,Cs.getProperty)(n)} === undefined`;return r?(0,Cs.or)(i,(0,Cs.not)(Sle(e,t,n))):i}Cr.noPropertyInData=Dle;function AHe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Cr.allSchemaProperties=AHe;function ngn(e,t){return AHe(t).filter(n=>!(0,Ale.alwaysValidSchema)(e,t[n]))}Cr.schemaProperties=ngn;function rgn({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,Cs._)`${e}, ${t}, ${r}${i}`:t,f=[[i1.default.instancePath,(0,Cs.strConcat)(i1.default.instancePath,s)],[i1.default.parentData,o.parentData],[i1.default.parentDataProperty,o.parentDataProperty],[i1.default.rootData,i1.default.rootData]];o.opts.dynamicRef&&f.push([i1.default.dynamicAnchors,i1.default.dynamicAnchors]);const d=(0,Cs._)`${c}, ${n.object(...f)}`;return u!==Cs.nil?(0,Cs._)`${a}.call(${u}, ${d})`:(0,Cs._)`${a}(${d})`}Cr.callValidateCode=rgn;const ign=(0,Cs._)`new RegExp`;function sgn({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Cs._)`${i.code==="new RegExp"?ign:(0,Qmn.useFunc)(e,i)}(${n}, ${r})`})}Cr.usePattern=sgn;function ogn(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,Cs._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:Ale.Type.Num},s),t.if((0,Cs.not)(s),a)})}}Cr.validateArray=ogn;function agn(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,Ale.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Cs._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Cs.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Cr.validateUnion=agn;Object.defineProperty(E0,"__esModule",{value:!0});E0.validateKeywordUsage=E0.validSchemaType=E0.funcKeywordCode=E0.macroKeywordCode=void 0;const El=Sr,tw=Sm,ugn=Cr,lgn=RP;function cgn(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=SHe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:El.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}E0.macroKeywordCode=cgn;function fgn(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;hgn(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=SHe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&c2e(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&c2e(e),g(()=>dgn(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,El._)`await `),v=>r.assign(f,!1).if((0,El._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,El._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,El._)`${c}.errors`;return r.assign(y,null),m(El.nil),y}function m(y=t.async?(0,El._)`await `:El.nil){const v=u.opts.passContext?tw.default.this:tw.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,El._)`${y}${(0,ugn.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,El.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}E0.funcKeywordCode=fgn;function c2e(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,El._)`${r.parentData}[${r.parentDataProperty}]`))}function dgn(e,t){const{gen:n}=e;n.if((0,El._)`Array.isArray(${t})`,()=>{n.assign(tw.default.vErrors,(0,El._)`${tw.default.vErrors} === null ? ${t} : ${tw.default.vErrors}.concat(${t})`).assign(tw.default.errors,(0,El._)`${tw.default.vErrors}.length`),(0,lgn.extendErrors)(e)},()=>e.error())}function hgn({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function SHe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,El.stringify)(n)})}function pgn(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}E0.validSchemaType=pgn;function mgn({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}E0.validateKeywordUsage=mgn;var xv={};Object.defineProperty(xv,"__esModule",{value:!0});xv.extendSubschemaMode=xv.extendSubschemaData=xv.getSubschema=void 0;const b0=Sr,DHe=qt;function ggn(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,b0._)`${e.schemaPath}${(0,b0.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,b0._)`${e.schemaPath}${(0,b0.getProperty)(t)}${(0,b0.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,DHe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}xv.getSubschema=ggn;function ygn(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,b0._)`${t.data}${(0,b0.getProperty)(n)}`,!0);u(d),e.errorPath=(0,b0.str)`${l}${(0,DHe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,b0._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof b0.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}xv.extendSubschemaData=ygn;function vgn(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}xv.extendSubschemaMode=vgn;var iu={},IHe={exports:{}},J1=IHe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};YF(t,r,i,e,"",e)};J1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};J1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};J1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};J1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function YF(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in J1.arrayKeywords)for(var d=0;d<f.length;d++)YF(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in J1.propsKeywords){if(f&&typeof f=="object")for(var h in f)YF(e,t,n,f[h],i+"/"+c+"/"+bgn(h),s,i,c,r,h)}else(c in J1.keywords||e.allKeys&&!(c in J1.skipKeywords))&&YF(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function bgn(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var xgn=IHe.exports;Object.defineProperty(iu,"__esModule",{value:!0});iu.getSchemaRefs=iu.resolveUrl=iu.normalizeId=iu._getFullPath=iu.getFullPath=iu.inlineRef=void 0;const wgn=qt,_gn=Mte,Egn=xgn,Cgn=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Tgn(e,t=!0){return typeof e=="boolean"?!0:t===!0?!FQ(e):t?kHe(e)<=t:!1}iu.inlineRef=Tgn;const Agn=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function FQ(e){for(const t in e){if(Agn.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(FQ)||typeof n=="object"&&FQ(n))return!0}return!1}function kHe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Cgn.has(n)&&(typeof e[n]=="object"&&(0,wgn.eachItem)(e[n],r=>t+=kHe(r)),t===1/0))return 1/0}return t}function RHe(e,t="",n){n!==!1&&(t=YC(t));const r=e.parse(t);return NHe(e,r)}iu.getFullPath=RHe;function NHe(e,t){return e.serialize(t).split("#")[0]+"#"}iu._getFullPath=NHe;const Sgn=/#\/?$/;function YC(e){return e?e.replace(Sgn,""):""}iu.normalizeId=YC;function Dgn(e,t,n){return n=YC(n),e.resolve(t,n)}iu.resolveUrl=Dgn;const Ign=/^[a-z_][-a-z0-9._]*$/i;function kgn(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=YC(e[n]||t),s={"":i},o=RHe(r,i,!1),a={},u=new Set;return Egn(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const x=this.opts.uriResolver.resolve;if(b=YC(g?x(g,b):b),u.has(b))throw c(b);u.add(b);let _=this.refs[b];return typeof _=="string"&&(_=this.refs[_]),typeof _=="object"?l(f,_.schema,b):b!==YC(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!Ign.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!_gn(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}iu.getSchemaRefs=kgn;Object.defineProperty(ap,"__esModule",{value:!0});ap.getData=ap.KeywordCxt=ap.validateFunctionCode=void 0;const PHe=mA,f2e=ia,Ile=zg,LM=ia,Rgn=cj,Wk=E0,Wq=xv,ln=Sr,Hn=Sm,Ngn=iu,Vg=qt,rI=RP;function Pgn(e){if($He(e)&&(MHe(e),FHe(e))){$gn(e);return}OHe(e,()=>(0,PHe.topBoolOrEmptySchema)(e))}ap.validateFunctionCode=Pgn;function OHe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,ln._)`${Hn.default.data}, ${Hn.default.valCxt}`,r.$async,()=>{e.code((0,ln._)`"use strict"; ${d2e(n,i)}`),Fgn(e,i),e.code(s)}):e.func(t,(0,ln._)`${Hn.default.data}, ${Ogn(i)}`,r.$async,()=>e.code(d2e(n,i)).code(s))}function Ogn(e){return(0,ln._)`{${Hn.default.instancePath}="", ${Hn.default.parentData}, ${Hn.default.parentDataProperty}, ${Hn.default.rootData}=${Hn.default.data}${e.dynamicRef?(0,ln._)`, ${Hn.default.dynamicAnchors}={}`:ln.nil}}={}`}function Fgn(e,t){e.if(Hn.default.valCxt,()=>{e.var(Hn.default.instancePath,(0,ln._)`${Hn.default.valCxt}.${Hn.default.instancePath}`),e.var(Hn.default.parentData,(0,ln._)`${Hn.default.valCxt}.${Hn.default.parentData}`),e.var(Hn.default.parentDataProperty,(0,ln._)`${Hn.default.valCxt}.${Hn.default.parentDataProperty}`),e.var(Hn.default.rootData,(0,ln._)`${Hn.default.valCxt}.${Hn.default.rootData}`),t.dynamicRef&&e.var(Hn.default.dynamicAnchors,(0,ln._)`${Hn.default.valCxt}.${Hn.default.dynamicAnchors}`)},()=>{e.var(Hn.default.instancePath,(0,ln._)`""`),e.var(Hn.default.parentData,(0,ln._)`undefined`),e.var(Hn.default.parentDataProperty,(0,ln._)`undefined`),e.var(Hn.default.rootData,Hn.default.data),t.dynamicRef&&e.var(Hn.default.dynamicAnchors,(0,ln._)`{}`)})}function $gn(e){const{schema:t,opts:n,gen:r}=e;OHe(e,()=>{n.$comment&&t.$comment&&BHe(e),Ugn(e),r.let(Hn.default.vErrors,null),r.let(Hn.default.errors,0),n.unevaluated&&Mgn(e),LHe(e),Hgn(e)})}function Mgn(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,ln._)`${n}.evaluated`),t.if((0,ln._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,ln._)`${e.evaluated}.props`,(0,ln._)`undefined`)),t.if((0,ln._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,ln._)`${e.evaluated}.items`,(0,ln._)`undefined`))}function d2e(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,ln._)`/*# sourceURL=${n} */`:ln.nil}function Lgn(e,t){if($He(e)&&(MHe(e),FHe(e))){Bgn(e,t);return}(0,PHe.boolOrEmptySchema)(e,t)}function FHe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function $He(e){return typeof e.schema!="boolean"}function Bgn(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&BHe(e),zgn(e),Vgn(e);const s=r.const("_errs",Hn.default.errors);LHe(e,s),r.var(t,(0,ln._)`${s} === ${Hn.default.errors}`)}function MHe(e){(0,Vg.checkUnknownRules)(e),jgn(e)}function LHe(e,t){if(e.opts.jtd)return h2e(e,[],!1,t);const n=(0,f2e.getSchemaTypes)(e.schema),r=(0,f2e.coerceAndCheckDataType)(e,n);h2e(e,n,!r,t)}function jgn(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Vg.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Ugn(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Vg.checkStrictMode)(e,"default is ignored in the schema root")}function zgn(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Ngn.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Vgn(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function BHe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,ln._)`${Hn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,ln.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,ln._)`${Hn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function Hgn(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,ln._)`${Hn.default.errors} === 0`,()=>t.return(Hn.default.data),()=>t.throw((0,ln._)`new ${i}(${Hn.default.vErrors})`)):(t.assign((0,ln._)`${r}.errors`,Hn.default.vErrors),s.unevaluated&&qgn(e),t.return((0,ln._)`${Hn.default.errors} === 0`))}function qgn({gen:e,evaluated:t,props:n,items:r}){n instanceof ln.Name&&e.assign((0,ln._)`${t}.props`,n),r instanceof ln.Name&&e.assign((0,ln._)`${t}.items`,r)}function h2e(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Vg.schemaHasRulesButRef)(s,c))){i.block(()=>zHe(e,"$ref",c.all.$ref.definition));return}u.jtd||Wgn(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,Ile.shouldUseGroup)(s,d)&&(d.type?(i.if((0,LM.checkDataType)(d.type,o,u.strictNumbers)),p2e(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,LM.reportTypeError)(e)),i.endIf()):p2e(e,d),a||i.if((0,ln._)`${Hn.default.errors} === ${r||0}`))}}function p2e(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,Rgn.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,Ile.shouldUseRule)(r,s)&&zHe(e,s.keyword,s.definition,t.type)})}function Wgn(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Ggn(e,t),e.opts.allowUnionTypes||Ygn(e,t),Kgn(e,e.dataTypes))}function Ggn(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{jHe(e.dataTypes,n)||kle(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),Qgn(e,t)}}function Ygn(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&kle(e,"use allowUnionTypes to allow union type keyword")}function Kgn(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,Ile.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Xgn(t,o))&&kle(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Xgn(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function jHe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Qgn(e,t){const n=[];for(const r of e.dataTypes)jHe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function kle(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Vg.checkStrictMode)(e,t,e.opts.strictTypes)}class UHe{constructor(t,n,r){if((0,Wk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Vg.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",VHe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Wk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Hn.default.errors))}result(t,n,r){this.failResult((0,ln.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,ln.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,ln._)`${n} !== undefined && (${(0,ln.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?rI.reportExtraError:rI.reportError)(this,this.def.error,n)}$dataError(){(0,rI.reportError)(this,this.def.$dataError||rI.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,rI.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=ln.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=ln.nil,n=ln.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,ln.or)((0,ln._)`${i} === undefined`,n)),t!==ln.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==ln.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,ln.or)(o(),a());function o(){if(r.length){if(!(n instanceof ln.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,ln._)`${(0,LM.checkDataTypes)(u,n,s.opts.strictNumbers,LM.DataType.Wrong)}`}return ln.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,ln._)`!${u}(${n})`}return ln.nil}}subschema(t,n){const r=(0,Wq.getSubschema)(this.it,t);(0,Wq.extendSubschemaData)(r,this.it,t),(0,Wq.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Lgn(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Vg.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Vg.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,ln.Name)),!0}}ap.KeywordCxt=UHe;function zHe(e,t,n,r){const i=new UHe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Wk.funcKeywordCode)(i,n):"macro"in n?(0,Wk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Wk.funcKeywordCode)(i,n)}const Jgn=/^\/(?:[^~]|~0|~1)*$/,Zgn=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function VHe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Hn.default.rootData;if(e[0]==="/"){if(!Jgn.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Hn.default.rootData}else{const l=Zgn.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,ln._)`${s}${(0,ln.getProperty)((0,Vg.unescapeJsonPointer)(l))}`,o=(0,ln._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}ap.getData=VHe;var NP={};Object.defineProperty(NP,"__esModule",{value:!0});class eyn extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}NP.default=eyn;var MS={};Object.defineProperty(MS,"__esModule",{value:!0});const Gq=iu;class tyn extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Gq.resolveUrl)(t,n,r),this.missingSchema=(0,Gq.normalizeId)((0,Gq.getFullPath)(t,this.missingRef))}}MS.default=tyn;var _c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.resolveSchema=_c.getCompilingSchema=_c.resolveRef=_c.compileSchema=_c.SchemaEnv=void 0;const xh=Sr,nyn=NP,Tx=Sm,Vh=iu,m2e=qt,ryn=ap;class fj{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Vh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}_c.SchemaEnv=fj;function Rle(e){const t=HHe.call(this,e);if(t)return t;const n=(0,Vh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new xh.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:nyn.default,code:(0,xh._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Tx.default.data,parentData:Tx.default.parentData,parentDataProperty:Tx.default.parentDataProperty,dataNames:[Tx.default.data],dataPathArr:[xh.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,xh.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:xh.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,xh._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,ryn.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Tx.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Tx.default.self}`,`${Tx.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof xh.Name?void 0:p,items:m instanceof xh.Name?void 0:m,dynamicProps:p instanceof xh.Name,dynamicItems:m instanceof xh.Name},h.source&&(h.source.evaluated=(0,xh.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}_c.compileSchema=Rle;function iyn(e,t,n){var r;n=(0,Vh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=ayn.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new fj({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=syn.call(this,s)}_c.resolveRef=iyn;function syn(e){return(0,Vh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Rle.call(this,e)}function HHe(e){for(const t of this._compilations)if(oyn(t,e))return t}_c.getCompilingSchema=HHe;function oyn(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function ayn(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||dj.call(this,e,t)}function dj(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Vh._getFullPath)(this.opts.uriResolver,n);let i=(0,Vh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Yq.call(this,n,e);const s=(0,Vh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=dj.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Yq.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Rle.call(this,o),s===(0,Vh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Vh.resolveUrl)(this.opts.uriResolver,i,l)),new fj({schema:a,schemaId:u,root:e,baseId:i})}return Yq.call(this,n,o)}}_c.resolveSchema=dj;const uyn=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Yq(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,m2e.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!uyn.has(a)&&l&&(t=(0,Vh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,m2e.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Vh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=dj.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new fj({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const lyn="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",cyn="Meta-schema for $data reference (JSON AnySchema extension proposal)",fyn="object",dyn=["$data"],hyn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},pyn=!1,myn={$id:lyn,description:cyn,type:fyn,required:dyn,properties:hyn,additionalProperties:pyn};var Nle={},$Q={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(on,function(n){function r(){for(var be=arguments.length,ce=Array(be),_e=0;_e<be;_e++)ce[_e]=arguments[_e];if(ce.length>1){ce[0]=ce[0].slice(0,-1);for(var Ue=ce.length-1,je=1;je<Ue;++je)ce[je]=ce[je].slice(1,-1);return ce[Ue]=ce[Ue].slice(1),ce.join("")}else return ce[0]}function i(be){return"(?:"+be+")"}function s(be){return be===void 0?"undefined":be===null?"null":Object.prototype.toString.call(be).split(" ").pop().split("]").shift().toLowerCase()}function o(be){return be.toUpperCase()}function a(be){return be!=null?be instanceof Array?be:typeof be.length!="number"||be.split||be.setInterval||be.call?[be]:Array.prototype.slice.call(be):[]}function u(be,ce){var _e=be;if(ce)for(var Ue in ce)_e[Ue]=ce[Ue];return _e}function l(be){var ce="[A-Za-z]",_e="[0-9]",Ue=r(_e,"[A-Fa-f]"),je=i(i("%[EFef]"+Ue+"%"+Ue+Ue+"%"+Ue+Ue)+"|"+i("%[89A-Fa-f]"+Ue+"%"+Ue+Ue)+"|"+i("%"+Ue+Ue)),Dt="[\\:\\/\\?\\#\\[\\]\\@]",Ht="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",xn=r(Dt,Ht),rr=be?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",mr=be?"[\\uE000-\\uF8FF]":"[]",jn=r(ce,_e,"[\\-\\.\\_\\~]",rr);i(ce+r(ce,_e,"[\\+\\-\\.]")+"*"),i(i(je+"|"+r(jn,Ht,"[\\:]"))+"*");var Dr=i(i("25[0-5]")+"|"+i("2[0-4]"+_e)+"|"+i("1"+_e+_e)+"|"+i("0?[1-9]"+_e)+"|0?0?"+_e),ii=i(Dr+"\\."+Dr+"\\."+Dr+"\\."+Dr),dn=i(Ue+"{1,4}"),Ir=i(i(dn+"\\:"+dn)+"|"+ii),Jr=i(i(dn+"\\:")+"{6}"+Ir),ir=i("\\:\\:"+i(dn+"\\:")+"{5}"+Ir),un=i(i(dn)+"?\\:\\:"+i(dn+"\\:")+"{4}"+Ir),jr=i(i(i(dn+"\\:")+"{0,1}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{3}"+Ir),Pi=i(i(i(dn+"\\:")+"{0,2}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{2}"+Ir),Is=i(i(i(dn+"\\:")+"{0,3}"+dn)+"?\\:\\:"+dn+"\\:"+Ir),_i=i(i(i(dn+"\\:")+"{0,4}"+dn)+"?\\:\\:"+Ir),ns=i(i(i(dn+"\\:")+"{0,5}"+dn)+"?\\:\\:"+dn),Ko=i(i(i(dn+"\\:")+"{0,6}"+dn)+"?\\:\\:"),Ga=i([Jr,ir,un,jr,Pi,Is,_i,ns,Ko].join("|")),Mo=i(i(jn+"|"+je)+"+");i("[vV]"+Ue+"+\\."+r(jn,Ht,"[\\:]")+"+"),i(i(je+"|"+r(jn,Ht))+"*");var ec=i(je+"|"+r(jn,Ht,"[\\:\\@]"));return i(i(je+"|"+r(jn,Ht,"[\\@]"))+"+"),i(i(ec+"|"+r("[\\/\\?]",mr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ce,_e,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",jn,Ht),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",jn,Ht),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",jn,Ht),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",jn,Ht),"g"),NOT_QUERY:new RegExp(r("[^\\%]",jn,Ht,"[\\:\\@\\/\\?]",mr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",jn,Ht,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",jn,Ht),"g"),UNRESERVED:new RegExp(jn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",jn,xn),"g"),PCT_ENCODED:new RegExp(je,"g"),IPV4ADDRESS:new RegExp("^("+ii+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ga+")"+i(i("\\%25|\\%(?!"+Ue+"{2})")+"("+Mo+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function be(ce,_e){var Ue=[],je=!0,Dt=!1,Ht=void 0;try{for(var xn=ce[Symbol.iterator](),rr;!(je=(rr=xn.next()).done)&&(Ue.push(rr.value),!(_e&&Ue.length===_e));je=!0);}catch(mr){Dt=!0,Ht=mr}finally{try{!je&&xn.return&&xn.return()}finally{if(Dt)throw Ht}}return Ue}return function(ce,_e){if(Array.isArray(ce))return ce;if(Symbol.iterator in Object(ce))return be(ce,_e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(be){if(Array.isArray(be)){for(var ce=0,_e=Array(be.length);ce<be.length;ce++)_e[ce]=be[ce];return _e}else return Array.from(be)},p=2147483647,m=36,g=1,y=26,v=38,b=700,x=72,_=128,C="-",T=/^xn--/,S=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,F=Math.floor,O=String.fromCharCode;function B(be){throw new RangeError(I[be])}function H(be,ce){for(var _e=[],Ue=be.length;Ue--;)_e[Ue]=ce(be[Ue]);return _e}function U(be,ce){var _e=be.split("@"),Ue="";_e.length>1&&(Ue=_e[0]+"@",be=_e[1]),be=be.replace(k,".");var je=be.split("."),Dt=H(je,ce).join(".");return Ue+Dt}function G(be){for(var ce=[],_e=0,Ue=be.length;_e<Ue;){var je=be.charCodeAt(_e++);if(je>=55296&&je<=56319&&_e<Ue){var Dt=be.charCodeAt(_e++);(Dt&64512)==56320?ce.push(((je&1023)<<10)+(Dt&1023)+65536):(ce.push(je),_e--)}else ce.push(je)}return ce}var Y=function(ce){return String.fromCodePoint.apply(String,h(ce))},Q=function(ce){return ce-48<10?ce-22:ce-65<26?ce-65:ce-97<26?ce-97:m},M=function(ce,_e){return ce+22+75*(ce<26)-((_e!=0)<<5)},j=function(ce,_e,Ue){var je=0;for(ce=Ue?F(ce/b):ce>>1,ce+=F(ce/_e);ce>R*y>>1;je+=m)ce=F(ce/R);return F(je+(R+1)*ce/(ce+v))},W=function(ce){var _e=[],Ue=ce.length,je=0,Dt=_,Ht=x,xn=ce.lastIndexOf(C);xn<0&&(xn=0);for(var rr=0;rr<xn;++rr)ce.charCodeAt(rr)>=128&&B("not-basic"),_e.push(ce.charCodeAt(rr));for(var mr=xn>0?xn+1:0;mr<Ue;){for(var jn=je,Dr=1,ii=m;;ii+=m){mr>=Ue&&B("invalid-input");var dn=Q(ce.charCodeAt(mr++));(dn>=m||dn>F((p-je)/Dr))&&B("overflow"),je+=dn*Dr;var Ir=ii<=Ht?g:ii>=Ht+y?y:ii-Ht;if(dn<Ir)break;var Jr=m-Ir;Dr>F(p/Jr)&&B("overflow"),Dr*=Jr}var ir=_e.length+1;Ht=j(je-jn,ir,jn==0),F(je/ir)>p-Dt&&B("overflow"),Dt+=F(je/ir),je%=ir,_e.splice(je++,0,Dt)}return String.fromCodePoint.apply(String,_e)},L=function(ce){var _e=[];ce=G(ce);var Ue=ce.length,je=_,Dt=0,Ht=x,xn=!0,rr=!1,mr=void 0;try{for(var jn=ce[Symbol.iterator](),Dr;!(xn=(Dr=jn.next()).done);xn=!0){var ii=Dr.value;ii<128&&_e.push(O(ii))}}catch(Qe){rr=!0,mr=Qe}finally{try{!xn&&jn.return&&jn.return()}finally{if(rr)throw mr}}var dn=_e.length,Ir=dn;for(dn&&_e.push(C);Ir<Ue;){var Jr=p,ir=!0,un=!1,jr=void 0;try{for(var Pi=ce[Symbol.iterator](),Is;!(ir=(Is=Pi.next()).done);ir=!0){var _i=Is.value;_i>=je&&_i<Jr&&(Jr=_i)}}catch(Qe){un=!0,jr=Qe}finally{try{!ir&&Pi.return&&Pi.return()}finally{if(un)throw jr}}var ns=Ir+1;Jr-je>F((p-Dt)/ns)&&B("overflow"),Dt+=(Jr-je)*ns,je=Jr;var Ko=!0,Ga=!1,Mo=void 0;try{for(var ec=ce[Symbol.iterator](),Zf;!(Ko=(Zf=ec.next()).done);Ko=!0){var te=Zf.value;if(te<je&&++Dt>p&&B("overflow"),te==je){for(var xe=Dt,ue=m;;ue+=m){var De=ue<=Ht?g:ue>=Ht+y?y:ue-Ht;if(xe<De)break;var Pe=xe-De,Se=m-De;_e.push(O(M(De+Pe%Se,0))),xe=F(Pe/Se)}_e.push(O(M(xe,0))),Ht=j(Dt,ns,Ir==dn),Dt=0,++Ir}}}catch(Qe){Ga=!0,Mo=Qe}finally{try{!Ko&&ec.return&&ec.return()}finally{if(Ga)throw Mo}}++Dt,++je}return _e.join("")},q=function(ce){return U(ce,function(_e){return T.test(_e)?W(_e.slice(4).toLowerCase()):_e})},J=function(ce){return U(ce,function(_e){return S.test(_e)?"xn--"+L(_e):_e})},re={version:"2.1.0",ucs2:{decode:G,encode:Y},decode:W,encode:L,toASCII:J,toUnicode:q},ve={};function pe(be){var ce=be.charCodeAt(0),_e=void 0;return ce<16?_e="%0"+ce.toString(16).toUpperCase():ce<128?_e="%"+ce.toString(16).toUpperCase():ce<2048?_e="%"+(ce>>6|192).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase():_e="%"+(ce>>12|224).toString(16).toUpperCase()+"%"+(ce>>6&63|128).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase(),_e}function Ae(be){for(var ce="",_e=0,Ue=be.length;_e<Ue;){var je=parseInt(be.substr(_e+1,2),16);if(je<128)ce+=String.fromCharCode(je),_e+=3;else if(je>=194&&je<224){if(Ue-_e>=6){var Dt=parseInt(be.substr(_e+4,2),16);ce+=String.fromCharCode((je&31)<<6|Dt&63)}else ce+=be.substr(_e,6);_e+=6}else if(je>=224){if(Ue-_e>=9){var Ht=parseInt(be.substr(_e+4,2),16),xn=parseInt(be.substr(_e+7,2),16);ce+=String.fromCharCode((je&15)<<12|(Ht&63)<<6|xn&63)}else ce+=be.substr(_e,9);_e+=9}else ce+=be.substr(_e,3),_e+=3}return ce}function ke(be,ce){function _e(Ue){var je=Ae(Ue);return je.match(ce.UNRESERVED)?je:Ue}return be.scheme&&(be.scheme=String(be.scheme).replace(ce.PCT_ENCODED,_e).toLowerCase().replace(ce.NOT_SCHEME,"")),be.userinfo!==void 0&&(be.userinfo=String(be.userinfo).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_USERINFO,pe).replace(ce.PCT_ENCODED,o)),be.host!==void 0&&(be.host=String(be.host).replace(ce.PCT_ENCODED,_e).toLowerCase().replace(ce.NOT_HOST,pe).replace(ce.PCT_ENCODED,o)),be.path!==void 0&&(be.path=String(be.path).replace(ce.PCT_ENCODED,_e).replace(be.scheme?ce.NOT_PATH:ce.NOT_PATH_NOSCHEME,pe).replace(ce.PCT_ENCODED,o)),be.query!==void 0&&(be.query=String(be.query).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_QUERY,pe).replace(ce.PCT_ENCODED,o)),be.fragment!==void 0&&(be.fragment=String(be.fragment).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_FRAGMENT,pe).replace(ce.PCT_ENCODED,o)),be}function it(be){return be.replace(/^0*(.*)/,"$1")||"0"}function Re(be,ce){var _e=be.match(ce.IPV4ADDRESS)||[],Ue=d(_e,2),je=Ue[1];return je?je.split(".").map(it).join("."):be}function ut(be,ce){var _e=be.match(ce.IPV6ADDRESS)||[],Ue=d(_e,3),je=Ue[1],Dt=Ue[2];if(je){for(var Ht=je.toLowerCase().split("::").reverse(),xn=d(Ht,2),rr=xn[0],mr=xn[1],jn=mr?mr.split(":").map(it):[],Dr=rr.split(":").map(it),ii=ce.IPV4ADDRESS.test(Dr[Dr.length-1]),dn=ii?7:8,Ir=Dr.length-dn,Jr=Array(dn),ir=0;ir<dn;++ir)Jr[ir]=jn[ir]||Dr[Ir+ir]||"";ii&&(Jr[dn-1]=Re(Jr[dn-1],ce));var un=Jr.reduce(function(ns,Ko,Ga){if(!Ko||Ko==="0"){var Mo=ns[ns.length-1];Mo&&Mo.index+Mo.length===Ga?Mo.length++:ns.push({index:Ga,length:1})}return ns},[]),jr=un.sort(function(ns,Ko){return Ko.length-ns.length})[0],Pi=void 0;if(jr&&jr.length>1){var Is=Jr.slice(0,jr.index),_i=Jr.slice(jr.index+jr.length);Pi=Is.join(":")+"::"+_i.join(":")}else Pi=Jr.join(":");return Dt&&(Pi+="%"+Dt),Pi}else return be}var Xe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Tt="".match(/(){0}/)[1]===void 0;function gt(be){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e={},Ue=ce.iri!==!1?f:c;ce.reference==="suffix"&&(be=(ce.scheme?ce.scheme+":":"")+"//"+be);var je=be.match(Xe);if(je){Tt?(_e.scheme=je[1],_e.userinfo=je[3],_e.host=je[4],_e.port=parseInt(je[5],10),_e.path=je[6]||"",_e.query=je[7],_e.fragment=je[8],isNaN(_e.port)&&(_e.port=je[5])):(_e.scheme=je[1]||void 0,_e.userinfo=be.indexOf("@")!==-1?je[3]:void 0,_e.host=be.indexOf("//")!==-1?je[4]:void 0,_e.port=parseInt(je[5],10),_e.path=je[6]||"",_e.query=be.indexOf("?")!==-1?je[7]:void 0,_e.fragment=be.indexOf("#")!==-1?je[8]:void 0,isNaN(_e.port)&&(_e.port=be.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?je[4]:void 0)),_e.host&&(_e.host=ut(Re(_e.host,Ue),Ue)),_e.scheme===void 0&&_e.userinfo===void 0&&_e.host===void 0&&_e.port===void 0&&!_e.path&&_e.query===void 0?_e.reference="same-document":_e.scheme===void 0?_e.reference="relative":_e.fragment===void 0?_e.reference="absolute":_e.reference="uri",ce.reference&&ce.reference!=="suffix"&&ce.reference!==_e.reference&&(_e.error=_e.error||"URI is not a "+ce.reference+" reference.");var Dt=ve[(ce.scheme||_e.scheme||"").toLowerCase()];if(!ce.unicodeSupport&&(!Dt||!Dt.unicodeSupport)){if(_e.host&&(ce.domainHost||Dt&&Dt.domainHost))try{_e.host=re.toASCII(_e.host.replace(Ue.PCT_ENCODED,Ae).toLowerCase())}catch(Ht){_e.error=_e.error||"Host's domain name can not be converted to ASCII via punycode: "+Ht}ke(_e,c)}else ke(_e,Ue);Dt&&Dt.parse&&Dt.parse(_e,ce)}else _e.error=_e.error||"URI can not be parsed.";return _e}function Ie(be,ce){var _e=ce.iri!==!1?f:c,Ue=[];return be.userinfo!==void 0&&(Ue.push(be.userinfo),Ue.push("@")),be.host!==void 0&&Ue.push(ut(Re(String(be.host),_e),_e).replace(_e.IPV6ADDRESS,function(je,Dt,Ht){return"["+Dt+(Ht?"%25"+Ht:"")+"]"})),(typeof be.port=="number"||typeof be.port=="string")&&(Ue.push(":"),Ue.push(String(be.port))),Ue.length?Ue.join(""):void 0}var Ve=/^\.\.?\//,ft=/^\/\.(\/|$)/,_t=/^\/\.\.(\/|$)/,$t=/^\/?(?:.|\n)*?(?=\/|$)/;function st(be){for(var ce=[];be.length;)if(be.match(Ve))be=be.replace(Ve,"");else if(be.match(ft))be=be.replace(ft,"/");else if(be.match(_t))be=be.replace(_t,"/"),ce.pop();else if(be==="."||be==="..")be="";else{var _e=be.match($t);if(_e){var Ue=_e[0];be=be.slice(Ue.length),ce.push(Ue)}else throw new Error("Unexpected dot segment condition")}return ce.join("")}function X(be){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=ce.iri?f:c,Ue=[],je=ve[(ce.scheme||be.scheme||"").toLowerCase()];if(je&&je.serialize&&je.serialize(be,ce),be.host&&!_e.IPV6ADDRESS.test(be.host)){if(ce.domainHost||je&&je.domainHost)try{be.host=ce.iri?re.toUnicode(be.host):re.toASCII(be.host.replace(_e.PCT_ENCODED,Ae).toLowerCase())}catch(xn){be.error=be.error||"Host's domain name can not be converted to "+(ce.iri?"Unicode":"ASCII")+" via punycode: "+xn}}ke(be,_e),ce.reference!=="suffix"&&be.scheme&&(Ue.push(be.scheme),Ue.push(":"));var Dt=Ie(be,ce);if(Dt!==void 0&&(ce.reference!=="suffix"&&Ue.push("//"),Ue.push(Dt),be.path&&be.path.charAt(0)!=="/"&&Ue.push("/")),be.path!==void 0){var Ht=be.path;!ce.absolutePath&&(!je||!je.absolutePath)&&(Ht=st(Ht)),Dt===void 0&&(Ht=Ht.replace(/^\/\//,"/%2F")),Ue.push(Ht)}return be.query!==void 0&&(Ue.push("?"),Ue.push(be.query)),be.fragment!==void 0&&(Ue.push("#"),Ue.push(be.fragment)),Ue.join("")}function de(be,ce){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ue=arguments[3],je={};return Ue||(be=gt(X(be,_e),_e),ce=gt(X(ce,_e),_e)),_e=_e||{},!_e.tolerant&&ce.scheme?(je.scheme=ce.scheme,je.userinfo=ce.userinfo,je.host=ce.host,je.port=ce.port,je.path=st(ce.path||""),je.query=ce.query):(ce.userinfo!==void 0||ce.host!==void 0||ce.port!==void 0?(je.userinfo=ce.userinfo,je.host=ce.host,je.port=ce.port,je.path=st(ce.path||""),je.query=ce.query):(ce.path?(ce.path.charAt(0)==="/"?je.path=st(ce.path):((be.userinfo!==void 0||be.host!==void 0||be.port!==void 0)&&!be.path?je.path="/"+ce.path:be.path?je.path=be.path.slice(0,be.path.lastIndexOf("/")+1)+ce.path:je.path=ce.path,je.path=st(je.path)),je.query=ce.query):(je.path=be.path,ce.query!==void 0?je.query=ce.query:je.query=be.query),je.userinfo=be.userinfo,je.host=be.host,je.port=be.port),je.scheme=be.scheme),je.fragment=ce.fragment,je}function we(be,ce,_e){var Ue=u({scheme:"null"},_e);return X(de(gt(be,Ue),gt(ce,Ue),Ue,!0),Ue)}function ae(be,ce){return typeof be=="string"?be=X(gt(be,ce),ce):s(be)==="object"&&(be=gt(X(be,ce),ce)),be}function he(be,ce,_e){return typeof be=="string"?be=X(gt(be,_e),_e):s(be)==="object"&&(be=X(be,_e)),typeof ce=="string"?ce=X(gt(ce,_e),_e):s(ce)==="object"&&(ce=X(ce,_e)),be===ce}function Ee(be,ce){return be&&be.toString().replace(!ce||!ce.iri?c.ESCAPE:f.ESCAPE,pe)}function Me(be,ce){return be&&be.toString().replace(!ce||!ce.iri?c.PCT_ENCODED:f.PCT_ENCODED,Ae)}var Be={scheme:"http",domainHost:!0,parse:function(ce,_e){return ce.host||(ce.error=ce.error||"HTTP URIs must have a host."),ce},serialize:function(ce,_e){var Ue=String(ce.scheme).toLowerCase()==="https";return(ce.port===(Ue?443:80)||ce.port==="")&&(ce.port=void 0),ce.path||(ce.path="/"),ce}},lt={scheme:"https",domainHost:Be.domainHost,parse:Be.parse,serialize:Be.serialize};function Ze(be){return typeof be.secure=="boolean"?be.secure:String(be.scheme).toLowerCase()==="wss"}var Xt={scheme:"ws",domainHost:!0,parse:function(ce,_e){var Ue=ce;return Ue.secure=Ze(Ue),Ue.resourceName=(Ue.path||"/")+(Ue.query?"?"+Ue.query:""),Ue.path=void 0,Ue.query=void 0,Ue},serialize:function(ce,_e){if((ce.port===(Ze(ce)?443:80)||ce.port==="")&&(ce.port=void 0),typeof ce.secure=="boolean"&&(ce.scheme=ce.secure?"wss":"ws",ce.secure=void 0),ce.resourceName){var Ue=ce.resourceName.split("?"),je=d(Ue,2),Dt=je[0],Ht=je[1];ce.path=Dt&&Dt!=="/"?Dt:void 0,ce.query=Ht,ce.resourceName=void 0}return ce.fragment=void 0,ce}},fn={scheme:"wss",domainHost:Xt.domainHost,parse:Xt.parse,serialize:Xt.serialize},Wt={},an="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Cn="[0-9A-Fa-f]",$n=i(i("%[EFef]"+Cn+"%"+Cn+Cn+"%"+Cn+Cn)+"|"+i("%[89A-Fa-f]"+Cn+"%"+Cn+Cn)+"|"+i("%"+Cn+Cn)),ki="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",hi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Li=r(hi,'[\\"\\\\]'),Ds="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Br=new RegExp(an,"g"),cs=new RegExp($n,"g"),cl=new RegExp(r("[^]",ki,"[\\.]",'[\\"]',Li),"g"),$o=new RegExp(r("[^]",an,Ds),"g"),Wa=$o;function Nr(be){var ce=Ae(be);return ce.match(Br)?ce:be}var Ri={scheme:"mailto",parse:function(ce,_e){var Ue=ce,je=Ue.to=Ue.path?Ue.path.split(","):[];if(Ue.path=void 0,Ue.query){for(var Dt=!1,Ht={},xn=Ue.query.split("&"),rr=0,mr=xn.length;rr<mr;++rr){var jn=xn[rr].split("=");switch(jn[0]){case"to":for(var Dr=jn[1].split(","),ii=0,dn=Dr.length;ii<dn;++ii)je.push(Dr[ii]);break;case"subject":Ue.subject=Me(jn[1],_e);break;case"body":Ue.body=Me(jn[1],_e);break;default:Dt=!0,Ht[Me(jn[0],_e)]=Me(jn[1],_e);break}}Dt&&(Ue.headers=Ht)}Ue.query=void 0;for(var Ir=0,Jr=je.length;Ir<Jr;++Ir){var ir=je[Ir].split("@");if(ir[0]=Me(ir[0]),_e.unicodeSupport)ir[1]=Me(ir[1],_e).toLowerCase();else try{ir[1]=re.toASCII(Me(ir[1],_e).toLowerCase())}catch(un){Ue.error=Ue.error||"Email address's domain name can not be converted to ASCII via punycode: "+un}je[Ir]=ir.join("@")}return Ue},serialize:function(ce,_e){var Ue=ce,je=a(ce.to);if(je){for(var Dt=0,Ht=je.length;Dt<Ht;++Dt){var xn=String(je[Dt]),rr=xn.lastIndexOf("@"),mr=xn.slice(0,rr).replace(cs,Nr).replace(cs,o).replace(cl,pe),jn=xn.slice(rr+1);try{jn=_e.iri?re.toUnicode(jn):re.toASCII(Me(jn,_e).toLowerCase())}catch(Ir){Ue.error=Ue.error||"Email address's domain name can not be converted to "+(_e.iri?"Unicode":"ASCII")+" via punycode: "+Ir}je[Dt]=mr+"@"+jn}Ue.path=je.join(",")}var Dr=ce.headers=ce.headers||{};ce.subject&&(Dr.subject=ce.subject),ce.body&&(Dr.body=ce.body);var ii=[];for(var dn in Dr)Dr[dn]!==Wt[dn]&&ii.push(dn.replace(cs,Nr).replace(cs,o).replace($o,pe)+"="+Dr[dn].replace(cs,Nr).replace(cs,o).replace(Wa,pe));return ii.length&&(Ue.query=ii.join("&")),Ue}},pi=/^([^\:]+)\:(.*)/,Hs={scheme:"urn",parse:function(ce,_e){var Ue=ce.path&&ce.path.match(pi),je=ce;if(Ue){var Dt=_e.scheme||je.scheme||"urn",Ht=Ue[1].toLowerCase(),xn=Ue[2],rr=Dt+":"+(_e.nid||Ht),mr=ve[rr];je.nid=Ht,je.nss=xn,je.path=void 0,mr&&(je=mr.parse(je,_e))}else je.error=je.error||"URN can not be parsed.";return je},serialize:function(ce,_e){var Ue=_e.scheme||ce.scheme||"urn",je=ce.nid,Dt=Ue+":"+(_e.nid||je),Ht=ve[Dt];Ht&&(ce=Ht.serialize(ce,_e));var xn=ce,rr=ce.nss;return xn.path=(je||_e.nid)+":"+rr,xn}},ri=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ni={scheme:"urn:uuid",parse:function(ce,_e){var Ue=ce;return Ue.uuid=Ue.nss,Ue.nss=void 0,!_e.tolerant&&(!Ue.uuid||!Ue.uuid.match(ri))&&(Ue.error=Ue.error||"UUID is not valid."),Ue},serialize:function(ce,_e){var Ue=ce;return Ue.nss=(ce.uuid||"").toLowerCase(),Ue}};ve[Be.scheme]=Be,ve[lt.scheme]=lt,ve[Xt.scheme]=Xt,ve[fn.scheme]=fn,ve[Ri.scheme]=Ri,ve[Hs.scheme]=Hs,ve[Ni.scheme]=Ni,n.SCHEMES=ve,n.pctEncChar=pe,n.pctDecChars=Ae,n.parse=gt,n.removeDotSegments=st,n.serialize=X,n.resolveComponents=de,n.resolve=we,n.normalize=ae,n.equal=he,n.escapeComponent=Ee,n.unescapeComponent=Me,Object.defineProperty(n,"__esModule",{value:!0})})})($Q,$Q.exports);var gyn=$Q.exports;Object.defineProperty(Nle,"__esModule",{value:!0});const qHe=gyn;qHe.code='require("ajv/dist/runtime/uri").default';Nle.default=qHe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ap;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Sr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=NP,i=MS,s=__,o=_c,a=Sr,u=iu,l=ia,c=qt,f=myn,d=Nle,h=(M,j)=>new RegExp(M,j);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(M){var j,W,L,q,J,re,ve,pe,Ae,ke,it,Re,ut,Xe,Tt,gt,Ie,Ve,ft,_t,$t,st,X,de,we;const ae=M.strict,he=(j=M.code)===null||j===void 0?void 0:j.optimize,Ee=he===!0||he===void 0?1:he||0,Me=(L=(W=M.code)===null||W===void 0?void 0:W.regExp)!==null&&L!==void 0?L:h,Be=(q=M.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(re=(J=M.strictSchema)!==null&&J!==void 0?J:ae)!==null&&re!==void 0?re:!0,strictNumbers:(pe=(ve=M.strictNumbers)!==null&&ve!==void 0?ve:ae)!==null&&pe!==void 0?pe:!0,strictTypes:(ke=(Ae=M.strictTypes)!==null&&Ae!==void 0?Ae:ae)!==null&&ke!==void 0?ke:"log",strictTuples:(Re=(it=M.strictTuples)!==null&&it!==void 0?it:ae)!==null&&Re!==void 0?Re:"log",strictRequired:(Xe=(ut=M.strictRequired)!==null&&ut!==void 0?ut:ae)!==null&&Xe!==void 0?Xe:!1,code:M.code?{...M.code,optimize:Ee,regExp:Me}:{optimize:Ee,regExp:Me},loopRequired:(Tt=M.loopRequired)!==null&&Tt!==void 0?Tt:v,loopEnum:(gt=M.loopEnum)!==null&&gt!==void 0?gt:v,meta:(Ie=M.meta)!==null&&Ie!==void 0?Ie:!0,messages:(Ve=M.messages)!==null&&Ve!==void 0?Ve:!0,inlineRefs:(ft=M.inlineRefs)!==null&&ft!==void 0?ft:!0,schemaId:(_t=M.schemaId)!==null&&_t!==void 0?_t:"$id",addUsedSchema:($t=M.addUsedSchema)!==null&&$t!==void 0?$t:!0,validateSchema:(st=M.validateSchema)!==null&&st!==void 0?st:!0,validateFormats:(X=M.validateFormats)!==null&&X!==void 0?X:!0,unicodeRegExp:(de=M.unicodeRegExp)!==null&&de!==void 0?de:!0,int32range:(we=M.int32range)!==null&&we!==void 0?we:!0,uriResolver:Be}}class x{constructor(j={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,j=this.opts={...j,...b(j)};const{es5:W,lines:L}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:L}),this.logger=F(j.logger);const q=j.validateFormats;j.validateFormats=!1,this.RULES=(0,s.getRules)(),_.call(this,g,j,"NOT SUPPORTED"),_.call(this,y,j,"DEPRECATED","warn"),this._metaOpts=I.call(this),j.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),j.keywords&&k.call(this,j.keywords),typeof j.meta=="object"&&this.addMetaSchema(j.meta),T.call(this),j.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:j,meta:W,schemaId:L}=this.opts;let q=f;L==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&j&&this.addMetaSchema(q,q[L],!1)}defaultMeta(){const{meta:j,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof j=="object"?j[W]||j:void 0}validate(j,W){let L;if(typeof j=="string"){if(L=this.getSchema(j),!L)throw new Error(`no schema with key or ref "${j}"`)}else L=this.compile(j);const q=L(W);return"$async"in L||(this.errors=L.errors),q}compile(j,W){const L=this._addSchema(j,W);return L.validate||this._compileSchemaEnv(L)}compileAsync(j,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return q.call(this,j,W);async function q(ke,it){await J.call(this,ke.$schema);const Re=this._addSchema(ke,it);return Re.validate||re.call(this,Re)}async function J(ke){ke&&!this.getSchema(ke)&&await q.call(this,{$ref:ke},!0)}async function re(ke){try{return this._compileSchemaEnv(ke)}catch(it){if(!(it instanceof i.default))throw it;return ve.call(this,it),await pe.call(this,it.missingSchema),re.call(this,ke)}}function ve({missingSchema:ke,missingRef:it}){if(this.refs[ke])throw new Error(`AnySchema ${ke} is loaded but ${it} cannot be resolved`)}async function pe(ke){const it=await Ae.call(this,ke);this.refs[ke]||await J.call(this,it.$schema),this.refs[ke]||this.addSchema(it,ke,W)}async function Ae(ke){const it=this._loading[ke];if(it)return it;try{return await(this._loading[ke]=L(ke))}finally{delete this._loading[ke]}}}addSchema(j,W,L,q=this.opts.validateSchema){if(Array.isArray(j)){for(const re of j)this.addSchema(re,void 0,L,q);return this}let J;if(typeof j=="object"){const{schemaId:re}=this.opts;if(J=j[re],J!==void 0&&typeof J!="string")throw new Error(`schema ${re} must be string`)}return W=(0,u.normalizeId)(W||J),this._checkUnique(W),this.schemas[W]=this._addSchema(j,L,W,q,!0),this}addMetaSchema(j,W,L=this.opts.validateSchema){return this.addSchema(j,W,!0,L),this}validateSchema(j,W){if(typeof j=="boolean")return!0;let L;if(L=j.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(L,j);if(!q&&W){const J="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(J);else throw new Error(J)}return q}getSchema(j){let W;for(;typeof(W=C.call(this,j))=="string";)j=W;if(W===void 0){const{schemaId:L}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:L});if(W=o.resolveSchema.call(this,q,j),!W)return;this.refs[j]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(j){if(j instanceof RegExp)return this._removeAllSchemas(this.schemas,j),this._removeAllSchemas(this.refs,j),this;switch(typeof j){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=C.call(this,j);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[j],delete this.refs[j],this}case"object":{const W=j;this._cache.delete(W);let L=j[this.opts.schemaId];return L&&(L=(0,u.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(j){for(const W of j)this.addKeyword(W);return this}addKeyword(j,W){let L;if(typeof j=="string")L=j,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=L);else if(typeof j=="object"&&W===void 0){if(W=j,L=W.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,L,W),!W)return(0,c.eachItem)(L,J=>H.call(this,J)),this;G.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(L,q.type.length===0?J=>H.call(this,J,q):J=>q.type.forEach(re=>H.call(this,J,q,re))),this}getKeyword(j){const W=this.RULES.all[j];return typeof W=="object"?W.definition:!!W}removeKeyword(j){const{RULES:W}=this;delete W.keywords[j],delete W.all[j];for(const L of W.rules){const q=L.rules.findIndex(J=>J.keyword===j);q>=0&&L.rules.splice(q,1)}return this}addFormat(j,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[j]=W,this}errorsText(j=this.errors,{separator:W=", ",dataVar:L="data"}={}){return!j||j.length===0?"No errors":j.map(q=>`${L}${q.instancePath} ${q.message}`).reduce((q,J)=>q+W+J)}$dataMetaSchema(j,W){const L=this.RULES.all;j=JSON.parse(JSON.stringify(j));for(const q of W){const J=q.split("/").slice(1);let re=j;for(const ve of J)re=re[ve];for(const ve in L){const pe=L[ve];if(typeof pe!="object")continue;const{$data:Ae}=pe.definition,ke=re[ve];Ae&&ke&&(re[ve]=Q(ke))}}return j}_removeAllSchemas(j,W){for(const L in j){const q=j[L];(!W||W.test(L))&&(typeof q=="string"?delete j[L]:q&&!q.meta&&(this._cache.delete(q.schema),delete j[L]))}}_addSchema(j,W,L,q=this.opts.validateSchema,J=this.opts.addUsedSchema){let re;const{schemaId:ve}=this.opts;if(typeof j=="object")re=j[ve];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof j!="boolean")throw new Error("schema must be object or boolean")}let pe=this._cache.get(j);if(pe!==void 0)return pe;L=(0,u.normalizeId)(re||L);const Ae=u.getSchemaRefs.call(this,j,L);return pe=new o.SchemaEnv({schema:j,schemaId:ve,meta:W,baseId:L,localRefs:Ae}),this._cache.set(pe.schema,pe),J&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=pe),q&&this.validateSchema(j,!0),pe}_checkUnique(j){if(this.schemas[j]||this.refs[j])throw new Error(`schema with key or id "${j}" already exists`)}_compileSchemaEnv(j){if(j.meta?this._compileMetaSchema(j):o.compileSchema.call(this,j),!j.validate)throw new Error("ajv implementation error");return j.validate}_compileMetaSchema(j){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,j)}finally{this.opts=W}}}x.ValidationError=r.default,x.MissingRefError=i.default,e.default=x;function _(M,j,W,L="error"){for(const q in M){const J=q;J in j&&this.logger[L](`${W}: option ${q}. ${M[J]}`)}}function C(M){return M=(0,u.normalizeId)(M),this.schemas[M]||this.refs[M]}function T(){const M=this.opts.schemas;if(M)if(Array.isArray(M))this.addSchema(M);else for(const j in M)this.addSchema(M[j],j)}function S(){for(const M in this.opts.formats){const j=this.opts.formats[M];j&&this.addFormat(M,j)}}function k(M){if(Array.isArray(M)){this.addVocabulary(M);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const j in M){const W=M[j];W.keyword||(W.keyword=j),this.addKeyword(W)}}function I(){const M={...this.opts};for(const j of p)delete M[j];return M}const R={log(){},warn(){},error(){}};function F(M){if(M===!1)return R;if(M===void 0)return console;if(M.log&&M.warn&&M.error)return M;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function B(M,j){const{RULES:W}=this;if((0,c.eachItem)(M,L=>{if(W.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!O.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!j&&j.$data&&!("code"in j||"validate"in j))throw new Error('$data keyword must have "code" or "validate" function')}function H(M,j,W){var L;const q=j==null?void 0:j.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:J}=this;let re=q?J.post:J.rules.find(({type:pe})=>pe===W);if(re||(re={type:W,rules:[]},J.rules.push(re)),J.keywords[M]=!0,!j)return;const ve={keyword:M,definition:{...j,type:(0,l.getJSONTypes)(j.type),schemaType:(0,l.getJSONTypes)(j.schemaType)}};j.before?U.call(this,re,ve,j.before):re.rules.push(ve),J.all[M]=ve,(L=j.implements)===null||L===void 0||L.forEach(pe=>this.addKeyword(pe))}function U(M,j,W){const L=M.rules.findIndex(q=>q.keyword===W);L>=0?M.rules.splice(L,0,j):(M.rules.push(j),this.logger.warn(`rule ${W} is not defined`))}function G(M){let{metaSchema:j}=M;j!==void 0&&(M.$data&&this.opts.$data&&(j=Q(j)),M.validateSchema=this.compile(j,!0))}const Y={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Q(M){return{anyOf:[M,Y]}}})(hHe);var Ple={},Ole={},Fle={};Object.defineProperty(Fle,"__esModule",{value:!0});const yyn={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Fle.default=yyn;var E_={};Object.defineProperty(E_,"__esModule",{value:!0});E_.callRef=E_.getValidate=void 0;const vyn=MS,g2e=Cr,fc=Sr,v2=Sm,y2e=_c,vO=qt,byn={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=y2e.resolveRef.call(u,l,i,n);if(c===void 0)throw new vyn.default(r.opts.uriResolver,i,n);if(c instanceof y2e.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return KF(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return KF(e,(0,fc._)`${p}.validate`,l,l.$async)}function d(p){const m=WHe(e,p);KF(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,fc.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:fc.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function WHe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,fc._)`${n.scopeValue("wrapper",{ref:t})}.validate`}E_.getValidate=WHe;function KF(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?v2.default.this:fc.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,fc._)`await ${(0,g2e.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,fc._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,g2e.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,fc._)`${p}.errors`;i.assign(v2.default.vErrors,(0,fc._)`${v2.default.vErrors} === null ? ${m} : ${v2.default.vErrors}.concat(${m})`),i.assign(v2.default.errors,(0,fc._)`${v2.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=vO.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,fc._)`${p}.evaluated.props`);s.props=vO.mergeEvaluated.props(i,y,s.props,fc.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=vO.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,fc._)`${p}.evaluated.items`);s.items=vO.mergeEvaluated.items(i,y,s.items,fc.Name)}}}E_.callRef=KF;E_.default=byn;Object.defineProperty(Ole,"__esModule",{value:!0});const xyn=Fle,wyn=E_,_yn=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",xyn.default,wyn.default];Ole.default=_yn;var $le={},Mle={};Object.defineProperty(Mle,"__esModule",{value:!0});const BM=Sr,s1=BM.operators,jM={maximum:{okStr:"<=",ok:s1.LTE,fail:s1.GT},minimum:{okStr:">=",ok:s1.GTE,fail:s1.LT},exclusiveMaximum:{okStr:"<",ok:s1.LT,fail:s1.GTE},exclusiveMinimum:{okStr:">",ok:s1.GT,fail:s1.LTE}},Eyn={message:({keyword:e,schemaCode:t})=>(0,BM.str)`must be ${jM[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,BM._)`{comparison: ${jM[e].okStr}, limit: ${t}}`},Cyn={keyword:Object.keys(jM),type:"number",schemaType:"number",$data:!0,error:Eyn,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,BM._)`${n} ${jM[t].fail} ${r} || isNaN(${n})`)}};Mle.default=Cyn;var Lle={};Object.defineProperty(Lle,"__esModule",{value:!0});const Gk=Sr,Tyn={message:({schemaCode:e})=>(0,Gk.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Gk._)`{multipleOf: ${e}}`},Ayn={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Tyn,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Gk._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Gk._)`${o} !== parseInt(${o})`;e.fail$data((0,Gk._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};Lle.default=Ayn;var Ble={},jle={};Object.defineProperty(jle,"__esModule",{value:!0});function GHe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}jle.default=GHe;GHe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Ble,"__esModule",{value:!0});const nw=Sr,Syn=qt,Dyn=jle,Iyn={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,nw.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,nw._)`{limit: ${e}}`},kyn={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Iyn,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?nw.operators.GT:nw.operators.LT,o=i.opts.unicode===!1?(0,nw._)`${n}.length`:(0,nw._)`${(0,Syn.useFunc)(e.gen,Dyn.default)}(${n})`;e.fail$data((0,nw._)`${o} ${s} ${r}`)}};Ble.default=kyn;var Ule={};Object.defineProperty(Ule,"__esModule",{value:!0});const Ryn=Cr,UM=Sr,Nyn={message:({schemaCode:e})=>(0,UM.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,UM._)`{pattern: ${e}}`},Pyn={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Nyn,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,UM._)`(new RegExp(${i}, ${o}))`:(0,Ryn.usePattern)(e,r);e.fail$data((0,UM._)`!${a}.test(${t})`)}};Ule.default=Pyn;var zle={};Object.defineProperty(zle,"__esModule",{value:!0});const Yk=Sr,Oyn={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Yk.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Yk._)`{limit: ${e}}`},Fyn={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Oyn,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?Yk.operators.GT:Yk.operators.LT;e.fail$data((0,Yk._)`Object.keys(${n}).length ${i} ${r}`)}};zle.default=Fyn;var Vle={};Object.defineProperty(Vle,"__esModule",{value:!0});const iI=Cr,Kk=Sr,$yn=qt,Myn={message:({params:{missingProperty:e}})=>(0,Kk.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Kk._)`{missingProperty: ${e}}`},Lyn={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Myn,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,$yn.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Kk.nil,f);else for(const h of n)(0,iI.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,iI.checkMissingProp)(e,n,h)),(0,iI.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,iI.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,iI.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Kk.not)(p),()=>{e.error(),t.break()})},Kk.nil)}}};Vle.default=Lyn;var Hle={};Object.defineProperty(Hle,"__esModule",{value:!0});const Xk=Sr,Byn={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Xk.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Xk._)`{limit: ${e}}`},jyn={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Byn,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Xk.operators.GT:Xk.operators.LT;e.fail$data((0,Xk._)`${n}.length ${i} ${r}`)}};Hle.default=jyn;var qle={},PP={};Object.defineProperty(PP,"__esModule",{value:!0});const YHe=Mte;YHe.code='require("ajv/dist/runtime/equal").default';PP.default=YHe;Object.defineProperty(qle,"__esModule",{value:!0});const Kq=ia,Ja=Sr,Uyn=qt,zyn=PP,Vyn={message:({params:{i:e,j:t}})=>(0,Ja.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ja._)`{i: ${e}, j: ${t}}`},Hyn={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Vyn,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Kq.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Ja._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Ja._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Ja._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Kq.checkDataTypes)(l,g,a.opts.strictNumbers,Kq.DataType.Wrong),v=t.const("indices",(0,Ja._)`{}`);t.for((0,Ja._)`;${p}--;`,()=>{t.let(g,(0,Ja._)`${n}[${p}]`),t.if(y,(0,Ja._)`continue`),l.length>1&&t.if((0,Ja._)`typeof ${g} == "string"`,(0,Ja._)`${g} += "_"`),t.if((0,Ja._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Ja._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Ja._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Uyn.useFunc)(t,zyn.default),y=t.name("outer");t.label(y).for((0,Ja._)`;${p}--;`,()=>t.for((0,Ja._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Ja._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};qle.default=Hyn;var Wle={};Object.defineProperty(Wle,"__esModule",{value:!0});const MQ=Sr,qyn=qt,Wyn=PP,Gyn={message:"must be equal to constant",params:({schemaCode:e})=>(0,MQ._)`{allowedValue: ${e}}`},Yyn={keyword:"const",$data:!0,error:Gyn,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,MQ._)`!${(0,qyn.useFunc)(t,Wyn.default)}(${n}, ${i})`):e.fail((0,MQ._)`${s} !== ${n}`)}};Wle.default=Yyn;var Gle={};Object.defineProperty(Gle,"__esModule",{value:!0});const JI=Sr,Kyn=qt,Xyn=PP,Qyn={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,JI._)`{allowedValues: ${e}}`},Jyn={keyword:"enum",schemaType:"array",$data:!0,error:Qyn,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,Kyn.useFunc)(t,Xyn.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,JI.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,JI._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,JI._)`${l()}(${n}, ${h}[${p}])`:(0,JI._)`${n} === ${m}`}}};Gle.default=Jyn;Object.defineProperty($le,"__esModule",{value:!0});const Zyn=Mle,e1n=Lle,t1n=Ble,n1n=Ule,r1n=zle,i1n=Vle,s1n=Hle,o1n=qle,a1n=Wle,u1n=Gle,l1n=[Zyn.default,e1n.default,t1n.default,n1n.default,r1n.default,i1n.default,s1n.default,o1n.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},a1n.default,u1n.default];$le.default=l1n;var Yle={},LS={};Object.defineProperty(LS,"__esModule",{value:!0});LS.validateAdditionalItems=void 0;const rw=Sr,LQ=qt,c1n={message:({params:{len:e}})=>(0,rw.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,rw._)`{limit: ${e}}`},f1n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:c1n,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,LQ.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}KHe(e,r)}};function KHe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,rw._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,rw._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,LQ.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,rw._)`${a} <= ${t.length}`);n.if((0,rw.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:LQ.Type.Num},l),o.allErrors||n.if((0,rw.not)(l),()=>n.break())})}}LS.validateAdditionalItems=KHe;LS.default=f1n;var Kle={},BS={};Object.defineProperty(BS,"__esModule",{value:!0});BS.validateTuple=void 0;const v2e=Sr,XF=qt,d1n=Cr,h1n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return XHe(e,"additionalItems",t);n.items=!0,!(0,XF.alwaysValidSchema)(n,t)&&e.ok((0,d1n.validateArray)(e))}};function XHe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=XF.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,v2e._)`${s}.length`);n.forEach((f,d)=>{(0,XF.alwaysValidSchema)(a,f)||(r.if((0,v2e._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,XF.checkStrictMode)(a,g,d.strictTuples)}}}BS.validateTuple=XHe;BS.default=h1n;Object.defineProperty(Kle,"__esModule",{value:!0});const p1n=BS,m1n={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,p1n.validateTuple)(e,"items")};Kle.default=m1n;var Xle={};Object.defineProperty(Xle,"__esModule",{value:!0});const b2e=Sr,g1n=qt,y1n=Cr,v1n=LS,b1n={message:({params:{len:e}})=>(0,b2e.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,b2e._)`{limit: ${e}}`},x1n={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:b1n,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,g1n.alwaysValidSchema)(r,t)&&(i?(0,v1n.validateAdditionalItems)(e,i):e.ok((0,y1n.validateArray)(e)))}};Xle.default=x1n;var Qle={};Object.defineProperty(Qle,"__esModule",{value:!0});const xd=Sr,bO=qt,w1n={message:({params:{min:e,max:t}})=>t===void 0?(0,xd.str)`must contain at least ${e} valid item(s)`:(0,xd.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,xd._)`{minContains: ${e}}`:(0,xd._)`{minContains: ${e}, maxContains: ${t}}`},_1n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:w1n,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,xd._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,bO.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,bO.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,bO.alwaysValidSchema)(s,n)){let m=(0,xd._)`${c} >= ${o}`;a!==void 0&&(m=(0,xd._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,xd._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:bO.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,xd._)`${m}++`),a===void 0?t.if((0,xd._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,xd._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,xd._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};Qle.default=_1n;var QHe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Sr,n=qt,r=Cr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(QHe);var Jle={};Object.defineProperty(Jle,"__esModule",{value:!0});const JHe=Sr,E1n=qt,C1n={message:"property name must be valid",params:({params:e})=>(0,JHe._)`{propertyName: ${e.propertyName}}`},T1n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:C1n,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,E1n.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,JHe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Jle.default=T1n;var hj={};Object.defineProperty(hj,"__esModule",{value:!0});const xO=Cr,Th=Sr,A1n=Sm,wO=qt,S1n={message:"must NOT have additional properties",params:({params:e})=>(0,Th._)`{additionalProperty: ${e.additionalProperty}}`},D1n={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:S1n,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,wO.alwaysValidSchema)(o,n))return;const l=(0,xO.allSchemaProperties)(r.properties),c=(0,xO.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Th._)`${s} === ${A1n.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,wO.schemaRefOrVal)(o,r.properties,"properties");y=(0,xO.isOwnProperty)(t,v,g)}else l.length?y=(0,Th.or)(...l.map(v=>(0,Th._)`${g} === ${v}`)):y=Th.nil;return c.length&&(y=(0,Th.or)(y,...c.map(v=>(0,Th._)`${(0,xO.usePattern)(e,v)}.test(${g})`))),(0,Th.not)(y)}function h(g){t.code((0,Th._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,wO.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Th.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Th.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:wO.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};hj.default=D1n;var Zle={};Object.defineProperty(Zle,"__esModule",{value:!0});const I1n=ap,x2e=Cr,Xq=qt,w2e=hj,k1n={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&w2e.default.code(new I1n.KeywordCxt(s,w2e.default,"additionalProperties"));const o=(0,x2e.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Xq.mergeEvaluated.props(t,(0,Xq.toHash)(o),s.props));const a=o.filter(f=>!(0,Xq.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,x2e.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Zle.default=k1n;var ece={};Object.defineProperty(ece,"__esModule",{value:!0});const _2e=Cr,_O=Sr,E2e=qt,C2e=qt,R1n={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,_2e.allSchemaProperties)(n),u=a.filter(m=>(0,E2e.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof _O.Name)&&(s.props=(0,C2e.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,E2e.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,_O._)`${(0,_2e.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:C2e.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,_O._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,_O.not)(c),()=>t.break())})})}}};ece.default=R1n;var tce={};Object.defineProperty(tce,"__esModule",{value:!0});const N1n=qt,P1n={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,N1n.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};tce.default=P1n;var nce={};Object.defineProperty(nce,"__esModule",{value:!0});const O1n=Cr,F1n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:O1n.validateUnion,error:{message:"must match a schema in anyOf"}};nce.default=F1n;var rce={};Object.defineProperty(rce,"__esModule",{value:!0});const QF=Sr,$1n=qt,M1n={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,QF._)`{passingSchemas: ${e.passing}}`},L1n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:M1n,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,$1n.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,QF._)`${u} && ${o}`).assign(o,!1).assign(a,(0,QF._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,QF.Name)})})}}};rce.default=L1n;var ice={};Object.defineProperty(ice,"__esModule",{value:!0});const B1n=qt,j1n={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,B1n.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};ice.default=j1n;var sce={};Object.defineProperty(sce,"__esModule",{value:!0});const zM=Sr,ZHe=qt,U1n={message:({params:e})=>(0,zM.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,zM._)`{failingKeyword: ${e.ifClause}}`},z1n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:U1n,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,ZHe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=T2e(r,"then"),s=T2e(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,zM.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,zM._)`${c}`):e.setParams({ifClause:c})}}}};function T2e(e,t){const n=e.schema[t];return n!==void 0&&!(0,ZHe.alwaysValidSchema)(e,n)}sce.default=z1n;var oce={};Object.defineProperty(oce,"__esModule",{value:!0});const V1n=qt,H1n={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,V1n.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};oce.default=H1n;Object.defineProperty(Yle,"__esModule",{value:!0});const q1n=LS,W1n=Kle,G1n=BS,Y1n=Xle,K1n=Qle,X1n=QHe,Q1n=Jle,J1n=hj,Z1n=Zle,evn=ece,tvn=tce,nvn=nce,rvn=rce,ivn=ice,svn=sce,ovn=oce;function avn(e=!1){const t=[tvn.default,nvn.default,rvn.default,ivn.default,svn.default,ovn.default,Q1n.default,J1n.default,X1n.default,Z1n.default,evn.default];return e?t.push(W1n.default,Y1n.default):t.push(q1n.default,G1n.default),t.push(K1n.default),t}Yle.default=avn;var ace={},uce={};Object.defineProperty(uce,"__esModule",{value:!0});const wo=Sr,uvn={message:({schemaCode:e})=>(0,wo.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,wo._)`{format: ${e}}`},lvn={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:uvn,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,wo._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,wo._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,wo._)`${m}.type || "string"`).assign(y,(0,wo._)`${m}.validate`),()=>n.assign(g,(0,wo._)`"string"`).assign(y,m)),e.fail$data((0,wo.or)(v(),b()));function v(){return u.strictSchema===!1?wo.nil:(0,wo._)`${o} && !${y}`}function b(){const x=c.$async?(0,wo._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,wo._)`${y}(${r})`,_=(0,wo._)`(typeof ${y} == "function" ? ${x} : ${y}.test(${r}))`;return(0,wo._)`${y} && ${y} !== true && ${g} === ${t} && !${_}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(x());function v(){if(u.strictSchema===!1){f.logger.warn(_());return}throw new Error(_());function _(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(_){const C=_ instanceof RegExp?(0,wo.regexpCode)(_):u.code.formats?(0,wo._)`${u.code.formats}${(0,wo.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:_,code:C});return typeof _=="object"&&!(_ instanceof RegExp)?[_.type||"string",_.validate,(0,wo._)`${T}.validate`]:["string",_,T]}function x(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,wo._)`await ${y}(${r})`}return typeof g=="function"?(0,wo._)`${y}(${r})`:(0,wo._)`${y}.test(${r})`}}}};uce.default=lvn;Object.defineProperty(ace,"__esModule",{value:!0});const cvn=uce,fvn=[cvn.default];ace.default=fvn;var gA={};Object.defineProperty(gA,"__esModule",{value:!0});gA.contentVocabulary=gA.metadataVocabulary=void 0;gA.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];gA.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Ple,"__esModule",{value:!0});const dvn=Ole,hvn=$le,pvn=Yle,mvn=ace,A2e=gA,gvn=[dvn.default,hvn.default,(0,pvn.default)(),mvn.default,A2e.metadataVocabulary,A2e.contentVocabulary];Ple.default=gvn;var lce={},pj={};Object.defineProperty(pj,"__esModule",{value:!0});pj.DiscrError=void 0;var S2e;(function(e){e.Tag="tag",e.Mapping="mapping"})(S2e||(pj.DiscrError=S2e={}));Object.defineProperty(lce,"__esModule",{value:!0});const R2=Sr,BQ=pj,D2e=_c,yvn=MS,vvn=qt,bvn={message:({params:{discrError:e,tagName:t}})=>e===BQ.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,R2._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},xvn={keyword:"discriminator",type:"object",schemaType:"object",error:bvn,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,R2._)`${n}${(0,R2.getProperty)(a)}`);t.if((0,R2._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:BQ.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,R2._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:BQ.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,R2.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let x=0;x<o.length;x++){let _=o[x];if(_!=null&&_.$ref&&!(0,vvn.schemaHasRulesButRef)(_,s.self.RULES)){const T=_.$ref;if(_=D2e.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),_ instanceof D2e.SchemaEnv&&(_=_.schema),_===void 0)throw new yvn.default(s.opts.uriResolver,s.baseId,T)}const C=(h=_==null?void 0:_.properties)===null||h===void 0?void 0:h[a];if(typeof C!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(_)),v(C,x)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:x}){return Array.isArray(x)&&x.includes(a)}function v(x,_){if(x.const)b(x.const,_);else if(x.enum)for(const C of x.enum)b(C,_);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(x,_){if(typeof x!="string"||x in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[x]=_}}}};lce.default=xvn;const wvn="http://json-schema.org/draft-07/schema#",_vn="http://json-schema.org/draft-07/schema#",Evn="Core schema meta-schema",Cvn={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Tvn=["object","boolean"],Avn={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Svn={$schema:wvn,$id:_vn,title:Evn,definitions:Cvn,type:Tvn,properties:Avn,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=hHe,r=Ple,i=lce,s=Svn,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=ap;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Sr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=NP;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=MS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(RQ,RQ.exports);var Dvn=RQ.exports;const cce=_p(Dvn),Ivn="#/definitions/StudyConfig",kvn="http://json-schema.org/draft-07/schema#",Rvn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Nvn={$ref:Ivn,$schema:kvn,definitions:Rvn},Pvn="#/definitions/GlobalConfig",Ovn="http://json-schema.org/draft-07/schema#",Fvn={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},$vn={$ref:Pvn,$schema:Ovn,definitions:Fvn};var VM={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */VM.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,v=4,b=8,x=16,_=32,C=64,T=128,S=256,k=512,I=30,R="...",F=800,O=16,B=1,H=2,U=3,G=1/0,Y=9007199254740991,Q=17976931348623157e292,M=NaN,j=4294967295,W=j-1,L=j>>>1,q=[["ary",T],["bind",g],["bindKey",y],["curry",b],["curryRight",x],["flip",k],["partial",_],["partialRight",C],["rearg",S]],J="[object Arguments]",re="[object Array]",ve="[object AsyncFunction]",pe="[object Boolean]",Ae="[object Date]",ke="[object DOMException]",it="[object Error]",Re="[object Function]",ut="[object GeneratorFunction]",Xe="[object Map]",Tt="[object Number]",gt="[object Null]",Ie="[object Object]",Ve="[object Promise]",ft="[object Proxy]",_t="[object RegExp]",$t="[object Set]",st="[object String]",X="[object Symbol]",de="[object Undefined]",we="[object WeakMap]",ae="[object WeakSet]",he="[object ArrayBuffer]",Ee="[object DataView]",Me="[object Float32Array]",Be="[object Float64Array]",lt="[object Int8Array]",Ze="[object Int16Array]",Xt="[object Int32Array]",fn="[object Uint8Array]",Wt="[object Uint8ClampedArray]",an="[object Uint16Array]",Cn="[object Uint32Array]",$n=/\b__p \+= '';/g,ki=/\b(__p \+=) '' \+/g,hi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Li=/&(?:amp|lt|gt|quot|#39);/g,Ds=/[&<>"']/g,Br=RegExp(Li.source),cs=RegExp(Ds.source),cl=/<%-([\s\S]+?)%>/g,$o=/<%([\s\S]+?)%>/g,Wa=/<%=([\s\S]+?)%>/g,Nr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ri=/^\w*$/,pi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hs=/[\\^$.*+?()[\]{}|]/g,ri=RegExp(Hs.source),Ni=/^\s+/,be=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,Ue=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/[()=,{}\[\]\/\s]/,Ht=/\\(\\)?/g,xn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rr=/\w*$/,mr=/^[-+]0x[0-9a-f]+$/i,jn=/^0b[01]+$/i,Dr=/^\[object .+?Constructor\]$/,ii=/^0o[0-7]+$/i,dn=/^(?:0|[1-9]\d*)$/,Ir=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jr=/($^)/,ir=/['\n\r\u2028\u2029\\]/g,un="\\ud800-\\udfff",jr="\\u0300-\\u036f",Pi="\\ufe20-\\ufe2f",Is="\\u20d0-\\u20ff",_i=jr+Pi+Is,ns="\\u2700-\\u27bf",Ko="a-z\\xdf-\\xf6\\xf8-\\xff",Ga="\\xac\\xb1\\xd7\\xf7",Mo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ec="\\u2000-\\u206f",Zf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\ufe0e\\ufe0f",ue=Ga+Mo+ec+Zf,De="[']",Pe="["+un+"]",Se="["+ue+"]",Qe="["+_i+"]",pt="\\d+",yt="["+ns+"]",vt="["+Ko+"]",It="[^"+un+ue+pt+ns+Ko+te+"]",zt="\\ud83c[\\udffb-\\udfff]",Xn="(?:"+Qe+"|"+zt+")",nn="[^"+un+"]",gr="(?:\\ud83c[\\udde6-\\uddff]){2}",si="[\\ud800-\\udbff][\\udc00-\\udfff]",Pr="["+te+"]",Xo="\\u200d",sf="(?:"+vt+"|"+It+")",oh="(?:"+Pr+"|"+It+")",Vy="(?:"+De+"(?:d|ll|m|re|s|t|ve))?",Lp="(?:"+De+"(?:D|LL|M|RE|S|T|VE))?",Qb=Xn+"?",fl="["+xe+"]?",xu="(?:"+Xo+"(?:"+[nn,gr,si].join("|")+")"+fl+Qb+")*",ah="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jb=fl+Qb+xu,uh="(?:"+[yt,gr,si].join("|")+")"+Jb,Zb="(?:"+[nn+Qe+"?",Qe,gr,si,Pe].join("|")+")",_E=RegExp(De,"g"),lh=RegExp(Qe,"g"),wa=RegExp(zt+"(?="+zt+")|"+Zb+Jb,"g"),GS=RegExp([Pr+"?"+vt+"+"+Vy+"(?="+[Se,Pr,"$"].join("|")+")",oh+"+"+Lp+"(?="+[Se,Pr+sf,"$"].join("|")+")",Pr+"?"+sf+"+"+Vy,Pr+"+"+Lp,Hy,ah,pt,uh].join("|"),"g"),EE=RegExp("["+Xo+un+_i+xe+"]"),Im=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,km=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],CE=-1,oi={};oi[Me]=oi[Be]=oi[lt]=oi[Ze]=oi[Xt]=oi[fn]=oi[Wt]=oi[an]=oi[Cn]=!0,oi[J]=oi[re]=oi[he]=oi[pe]=oi[Ee]=oi[Ae]=oi[it]=oi[Re]=oi[Xe]=oi[Tt]=oi[Ie]=oi[_t]=oi[$t]=oi[st]=oi[we]=!1;var Ur={};Ur[J]=Ur[re]=Ur[he]=Ur[Ee]=Ur[pe]=Ur[Ae]=Ur[Me]=Ur[Be]=Ur[lt]=Ur[Ze]=Ur[Xt]=Ur[Xe]=Ur[Tt]=Ur[Ie]=Ur[_t]=Ur[$t]=Ur[st]=Ur[X]=Ur[fn]=Ur[Wt]=Ur[an]=Ur[Cn]=!0,Ur[it]=Ur[Re]=Ur[we]=!1;var TE={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},He={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qt=parseFloat,xr=parseInt,ai=typeof on=="object"&&on&&on.Object===Object&&on,Bi=typeof self=="object"&&self&&self.Object===Object&&self,wn=ai||Bi||Function("return this")(),Ei=t&&!t.nodeType&&t,ji=Ei&&!0&&e&&!e.nodeType&&e,Qo=ji&&ji.exports===Ei,ch=Qo&&ai.process,Js=function(){try{var Ne=ji&&ji.require&&ji.require("util").types;return Ne||ch&&ch.binding&&ch.binding("util")}catch{}}(),Rm=Js&&Js.isArrayBuffer,Nm=Js&&Js.isDate,ex=Js&&Js.isMap,YS=Js&&Js.isRegExp,tx=Js&&Js.isSet,QP=Js&&Js.isTypedArray;function wu(Ne,nt,qe){switch(qe.length){case 0:return Ne.call(nt);case 1:return Ne.call(nt,qe[0]);case 2:return Ne.call(nt,qe[0],qe[1]);case 3:return Ne.call(nt,qe[0],qe[1],qe[2])}return Ne.apply(nt,qe)}function nx(Ne,nt,qe,Yt){for(var Zn=-1,Ti=Ne==null?0:Ne.length;++Zn<Ti;){var Zo=Ne[Zn];nt(Yt,Zo,qe(Zo),Ne)}return Yt}function dl(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt&&nt(Ne[qe],qe,Ne)!==!1;);return Ne}function JP(Ne,nt){for(var qe=Ne==null?0:Ne.length;qe--&&nt(Ne[qe],qe,Ne)!==!1;);return Ne}function AE(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt;)if(!nt(Ne[qe],qe,Ne))return!1;return!0}function ed(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length,Zn=0,Ti=[];++qe<Yt;){var Zo=Ne[qe];nt(Zo,qe,Ne)&&(Ti[Zn++]=Zo)}return Ti}function rx(Ne,nt){var qe=Ne==null?0:Ne.length;return!!qe&&Pm(Ne,nt,0)>-1}function qy(Ne,nt,qe){for(var Yt=-1,Zn=Ne==null?0:Ne.length;++Yt<Zn;)if(qe(nt,Ne[Yt]))return!0;return!1}function rs(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length,Zn=Array(Yt);++qe<Yt;)Zn[qe]=nt(Ne[qe],qe,Ne);return Zn}function fh(Ne,nt){for(var qe=-1,Yt=nt.length,Zn=Ne.length;++qe<Yt;)Ne[Zn+qe]=nt[qe];return Ne}function dh(Ne,nt,qe,Yt){var Zn=-1,Ti=Ne==null?0:Ne.length;for(Yt&&Ti&&(qe=Ne[++Zn]);++Zn<Ti;)qe=nt(qe,Ne[Zn],Zn,Ne);return qe}function ZP(Ne,nt,qe,Yt){var Zn=Ne==null?0:Ne.length;for(Yt&&Zn&&(qe=Ne[--Zn]);Zn--;)qe=nt(qe,Ne[Zn],Zn,Ne);return qe}function SE(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt;)if(nt(Ne[qe],qe,Ne))return!0;return!1}var e4=K("length");function t4(Ne){return Ne.split("")}function DE(Ne){return Ne.match(je)||[]}function _u(Ne,nt,qe){var Yt;return qe(Ne,function(Zn,Ti,Zo){if(nt(Zn,Ti,Zo))return Yt=Ti,!1}),Yt}function ix(Ne,nt,qe,Yt){for(var Zn=Ne.length,Ti=qe+(Yt?1:-1);Yt?Ti--:++Ti<Zn;)if(nt(Ne[Ti],Ti,Ne))return Ti;return-1}function Pm(Ne,nt,qe){return nt===nt?aYe(Ne,nt,qe):ix(Ne,D,qe)}function Wy(Ne,nt,qe,Yt){for(var Zn=qe-1,Ti=Ne.length;++Zn<Ti;)if(Yt(Ne[Zn],nt))return Zn;return-1}function D(Ne){return Ne!==Ne}function z(Ne,nt){var qe=Ne==null?0:Ne.length;return qe?Ft(Ne,nt)/qe:M}function K(Ne){return function(nt){return nt==null?n:nt[Ne]}}function ie(Ne){return function(nt){return Ne==null?n:Ne[nt]}}function $e(Ne,nt,qe,Yt,Zn){return Zn(Ne,function(Ti,Zo,is){qe=Yt?(Yt=!1,Ti):nt(qe,Ti,Zo,is)}),qe}function Ge(Ne,nt){var qe=Ne.length;for(Ne.sort(nt);qe--;)Ne[qe]=Ne[qe].value;return Ne}function Ft(Ne,nt){for(var qe,Yt=-1,Zn=Ne.length;++Yt<Zn;){var Ti=nt(Ne[Yt]);Ti!==n&&(qe=qe===n?Ti:qe+Ti)}return qe}function Ci(Ne,nt){for(var qe=-1,Yt=Array(Ne);++qe<Ne;)Yt[qe]=nt(qe);return Yt}function Jo(Ne,nt){return rs(nt,function(qe){return[qe,Ne[qe]]})}function zr(Ne){return Ne&&Ne.slice(0,bfe(Ne)+1).replace(Ni,"")}function Oi(Ne){return function(nt){return Ne(nt)}}function Lo(Ne,nt){return rs(nt,function(qe){return Ne[qe]})}function td(Ne,nt){return Ne.has(nt)}function tc(Ne,nt){for(var qe=-1,Yt=Ne.length;++qe<Yt&&Pm(nt,Ne[qe],0)>-1;);return qe}function sx(Ne,nt){for(var qe=Ne.length;qe--&&Pm(nt,Ne[qe],0)>-1;);return qe}function KS(Ne,nt){for(var qe=Ne.length,Yt=0;qe--;)Ne[qe]===nt&&++Yt;return Yt}var eYe=ie(TE),tYe=ie(fe);function nYe(Ne){return"\\"+He[Ne]}function rYe(Ne,nt){return Ne==null?n:Ne[nt]}function IE(Ne){return EE.test(Ne)}function iYe(Ne){return Im.test(Ne)}function sYe(Ne){for(var nt,qe=[];!(nt=Ne.next()).done;)qe.push(nt.value);return qe}function Lj(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt,Zn){qe[++nt]=[Zn,Yt]}),qe}function vfe(Ne,nt){return function(qe){return Ne(nt(qe))}}function Gy(Ne,nt){for(var qe=-1,Yt=Ne.length,Zn=0,Ti=[];++qe<Yt;){var Zo=Ne[qe];(Zo===nt||Zo===c)&&(Ne[qe]=c,Ti[Zn++]=qe)}return Ti}function n4(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt){qe[++nt]=Yt}),qe}function oYe(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt){qe[++nt]=[Yt,Yt]}),qe}function aYe(Ne,nt,qe){for(var Yt=qe-1,Zn=Ne.length;++Yt<Zn;)if(Ne[Yt]===nt)return Yt;return-1}function uYe(Ne,nt,qe){for(var Yt=qe+1;Yt--;)if(Ne[Yt]===nt)return Yt;return Yt}function kE(Ne){return IE(Ne)?cYe(Ne):e4(Ne)}function hh(Ne){return IE(Ne)?fYe(Ne):t4(Ne)}function bfe(Ne){for(var nt=Ne.length;nt--&&be.test(Ne.charAt(nt)););return nt}var lYe=ie(Ce);function cYe(Ne){for(var nt=wa.lastIndex=0;wa.test(Ne);)++nt;return nt}function fYe(Ne){return Ne.match(wa)||[]}function dYe(Ne){return Ne.match(GS)||[]}var hYe=function Ne(nt){nt=nt==null?wn:RE.defaults(wn.Object(),nt,RE.pick(wn,km));var qe=nt.Array,Yt=nt.Date,Zn=nt.Error,Ti=nt.Function,Zo=nt.Math,is=nt.Object,Bj=nt.RegExp,pYe=nt.String,nd=nt.TypeError,r4=qe.prototype,mYe=Ti.prototype,NE=is.prototype,i4=nt["__core-js_shared__"],s4=mYe.toString,Ui=NE.hasOwnProperty,gYe=0,xfe=function(){var w=/[^.]+$/.exec(i4&&i4.keys&&i4.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),o4=NE.toString,yYe=s4.call(is),vYe=wn._,bYe=Bj("^"+s4.call(Ui).replace(Hs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),a4=Qo?nt.Buffer:n,Yy=nt.Symbol,u4=nt.Uint8Array,wfe=a4?a4.allocUnsafe:n,l4=vfe(is.getPrototypeOf,is),_fe=is.create,Efe=NE.propertyIsEnumerable,c4=r4.splice,Cfe=Yy?Yy.isConcatSpreadable:n,XS=Yy?Yy.iterator:n,ox=Yy?Yy.toStringTag:n,f4=function(){try{var w=fx(is,"defineProperty");return w({},"",{}),w}catch{}}(),xYe=nt.clearTimeout!==wn.clearTimeout&&nt.clearTimeout,wYe=Yt&&Yt.now!==wn.Date.now&&Yt.now,_Ye=nt.setTimeout!==wn.setTimeout&&nt.setTimeout,d4=Zo.ceil,h4=Zo.floor,jj=is.getOwnPropertySymbols,EYe=a4?a4.isBuffer:n,Tfe=nt.isFinite,CYe=r4.join,TYe=vfe(is.keys,is),ea=Zo.max,Eu=Zo.min,AYe=Yt.now,SYe=nt.parseInt,Afe=Zo.random,DYe=r4.reverse,Uj=fx(nt,"DataView"),QS=fx(nt,"Map"),zj=fx(nt,"Promise"),PE=fx(nt,"Set"),JS=fx(nt,"WeakMap"),ZS=fx(is,"create"),p4=JS&&new JS,OE={},IYe=dx(Uj),kYe=dx(QS),RYe=dx(zj),NYe=dx(PE),PYe=dx(JS),m4=Yy?Yy.prototype:n,eD=m4?m4.valueOf:n,Sfe=m4?m4.toString:n;function ee(w){if(Zs(w)&&!nr(w)&&!(w instanceof Or)){if(w instanceof rd)return w;if(Ui.call(w,"__wrapped__"))return Dde(w)}return new rd(w)}var FE=function(){function w(){}return function(A){if(!qs(A))return{};if(_fe)return _fe(A);w.prototype=A;var P=new w;return w.prototype=n,P}}();function g4(){}function rd(w,A){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=n}ee.templateSettings={escape:cl,evaluate:$o,interpolate:Wa,variable:"",imports:{_:ee}},ee.prototype=g4.prototype,ee.prototype.constructor=ee,rd.prototype=FE(g4.prototype),rd.prototype.constructor=rd;function Or(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function OYe(){var w=new Or(this.__wrapped__);return w.__actions__=nc(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=nc(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=nc(this.__views__),w}function FYe(){if(this.__filtered__){var w=new Or(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function $Ye(){var w=this.__wrapped__.value(),A=this.__dir__,P=nr(w),V=A<0,Z=P?w.length:0,se=YKe(0,Z,this.__views__),me=se.start,Te=se.end,Oe=Te-me,ct=V?Te:me-1,dt=this.__iteratees__,bt=dt.length,Ut=0,sn=Eu(Oe,this.__takeCount__);if(!P||!V&&Z==Oe&&sn==Oe)return Qfe(w,this.__actions__);var In=[];e:for(;Oe--&&Ut<sn;){ct+=A;for(var yr=-1,kn=w[ct];++yr<bt;){var kr=dt[yr],Vr=kr.iteratee,uf=kr.type,ml=Vr(kn);if(uf==H)kn=ml;else if(!ml){if(uf==B)continue e;break e}}In[Ut++]=kn}return In}Or.prototype=FE(g4.prototype),Or.prototype.constructor=Or;function ax(w){var A=-1,P=w==null?0:w.length;for(this.clear();++A<P;){var V=w[A];this.set(V[0],V[1])}}function MYe(){this.__data__=ZS?ZS(null):{},this.size=0}function LYe(w){var A=this.has(w)&&delete this.__data__[w];return this.size-=A?1:0,A}function BYe(w){var A=this.__data__;if(ZS){var P=A[w];return P===u?n:P}return Ui.call(A,w)?A[w]:n}function jYe(w){var A=this.__data__;return ZS?A[w]!==n:Ui.call(A,w)}function UYe(w,A){var P=this.__data__;return this.size+=this.has(w)?0:1,P[w]=ZS&&A===n?u:A,this}ax.prototype.clear=MYe,ax.prototype.delete=LYe,ax.prototype.get=BYe,ax.prototype.has=jYe,ax.prototype.set=UYe;function Om(w){var A=-1,P=w==null?0:w.length;for(this.clear();++A<P;){var V=w[A];this.set(V[0],V[1])}}function zYe(){this.__data__=[],this.size=0}function VYe(w){var A=this.__data__,P=y4(A,w);if(P<0)return!1;var V=A.length-1;return P==V?A.pop():c4.call(A,P,1),--this.size,!0}function HYe(w){var A=this.__data__,P=y4(A,w);return P<0?n:A[P][1]}function qYe(w){return y4(this.__data__,w)>-1}function WYe(w,A){var P=this.__data__,V=y4(P,w);return V<0?(++this.size,P.push([w,A])):P[V][1]=A,this}Om.prototype.clear=zYe,Om.prototype.delete=VYe,Om.prototype.get=HYe,Om.prototype.has=qYe,Om.prototype.set=WYe;function Fm(w){var A=-1,P=w==null?0:w.length;for(this.clear();++A<P;){var V=w[A];this.set(V[0],V[1])}}function GYe(){this.size=0,this.__data__={hash:new ax,map:new(QS||Om),string:new ax}}function YYe(w){var A=I4(this,w).delete(w);return this.size-=A?1:0,A}function KYe(w){return I4(this,w).get(w)}function XYe(w){return I4(this,w).has(w)}function QYe(w,A){var P=I4(this,w),V=P.size;return P.set(w,A),this.size+=P.size==V?0:1,this}Fm.prototype.clear=GYe,Fm.prototype.delete=YYe,Fm.prototype.get=KYe,Fm.prototype.has=XYe,Fm.prototype.set=QYe;function ux(w){var A=-1,P=w==null?0:w.length;for(this.__data__=new Fm;++A<P;)this.add(w[A])}function JYe(w){return this.__data__.set(w,u),this}function ZYe(w){return this.__data__.has(w)}ux.prototype.add=ux.prototype.push=JYe,ux.prototype.has=ZYe;function ph(w){var A=this.__data__=new Om(w);this.size=A.size}function eKe(){this.__data__=new Om,this.size=0}function tKe(w){var A=this.__data__,P=A.delete(w);return this.size=A.size,P}function nKe(w){return this.__data__.get(w)}function rKe(w){return this.__data__.has(w)}function iKe(w,A){var P=this.__data__;if(P instanceof Om){var V=P.__data__;if(!QS||V.length<i-1)return V.push([w,A]),this.size=++P.size,this;P=this.__data__=new Fm(V)}return P.set(w,A),this.size=P.size,this}ph.prototype.clear=eKe,ph.prototype.delete=tKe,ph.prototype.get=nKe,ph.prototype.has=rKe,ph.prototype.set=iKe;function Dfe(w,A){var P=nr(w),V=!P&&hx(w),Z=!P&&!V&&Zy(w),se=!P&&!V&&!Z&&BE(w),me=P||V||Z||se,Te=me?Ci(w.length,pYe):[],Oe=Te.length;for(var ct in w)(A||Ui.call(w,ct))&&!(me&&(ct=="length"||Z&&(ct=="offset"||ct=="parent")||se&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Bm(ct,Oe)))&&Te.push(ct);return Te}function Ife(w){var A=w.length;return A?w[Zj(0,A-1)]:n}function sKe(w,A){return k4(nc(w),lx(A,0,w.length))}function oKe(w){return k4(nc(w))}function Vj(w,A,P){(P!==n&&!mh(w[A],P)||P===n&&!(A in w))&&$m(w,A,P)}function tD(w,A,P){var V=w[A];(!(Ui.call(w,A)&&mh(V,P))||P===n&&!(A in w))&&$m(w,A,P)}function y4(w,A){for(var P=w.length;P--;)if(mh(w[P][0],A))return P;return-1}function aKe(w,A,P,V){return Ky(w,function(Z,se,me){A(V,Z,P(Z),me)}),V}function kfe(w,A){return w&&jp(A,_a(A),w)}function uKe(w,A){return w&&jp(A,ic(A),w)}function $m(w,A,P){A=="__proto__"&&f4?f4(w,A,{configurable:!0,enumerable:!0,value:P,writable:!0}):w[A]=P}function Hj(w,A){for(var P=-1,V=A.length,Z=qe(V),se=w==null;++P<V;)Z[P]=se?n:CU(w,A[P]);return Z}function lx(w,A,P){return w===w&&(P!==n&&(w=w<=P?w:P),A!==n&&(w=w>=A?w:A)),w}function id(w,A,P,V,Z,se){var me,Te=A&f,Oe=A&d,ct=A&h;if(P&&(me=Z?P(w,V,Z,se):P(w)),me!==n)return me;if(!qs(w))return w;var dt=nr(w);if(dt){if(me=XKe(w),!Te)return nc(w,me)}else{var bt=Cu(w),Ut=bt==Re||bt==ut;if(Zy(w))return ede(w,Te);if(bt==Ie||bt==J||Ut&&!Z){if(me=Oe||Ut?{}:bde(w),!Te)return Oe?BKe(w,uKe(me,w)):LKe(w,kfe(me,w))}else{if(!Ur[bt])return Z?w:{};me=QKe(w,bt,Te)}}se||(se=new ph);var sn=se.get(w);if(sn)return sn;se.set(w,me),Yde(w)?w.forEach(function(kn){me.add(id(kn,A,P,kn,w,se))}):Wde(w)&&w.forEach(function(kn,kr){me.set(kr,id(kn,A,P,kr,w,se))});var In=ct?Oe?cU:lU:Oe?ic:_a,yr=dt?n:In(w);return dl(yr||w,function(kn,kr){yr&&(kr=kn,kn=w[kr]),tD(me,kr,id(kn,A,P,kr,w,se))}),me}function lKe(w){var A=_a(w);return function(P){return Rfe(P,w,A)}}function Rfe(w,A,P){var V=P.length;if(w==null)return!V;for(w=is(w);V--;){var Z=P[V],se=A[Z],me=w[Z];if(me===n&&!(Z in w)||!se(me))return!1}return!0}function Nfe(w,A,P){if(typeof w!="function")throw new nd(o);return uD(function(){w.apply(n,P)},A)}function nD(w,A,P,V){var Z=-1,se=rx,me=!0,Te=w.length,Oe=[],ct=A.length;if(!Te)return Oe;P&&(A=rs(A,Oi(P))),V?(se=qy,me=!1):A.length>=i&&(se=td,me=!1,A=new ux(A));e:for(;++Z<Te;){var dt=w[Z],bt=P==null?dt:P(dt);if(dt=V||dt!==0?dt:0,me&&bt===bt){for(var Ut=ct;Ut--;)if(A[Ut]===bt)continue e;Oe.push(dt)}else se(A,bt,V)||Oe.push(dt)}return Oe}var Ky=sde(Bp),Pfe=sde(Wj,!0);function cKe(w,A){var P=!0;return Ky(w,function(V,Z,se){return P=!!A(V,Z,se),P}),P}function v4(w,A,P){for(var V=-1,Z=w.length;++V<Z;){var se=w[V],me=A(se);if(me!=null&&(Te===n?me===me&&!af(me):P(me,Te)))var Te=me,Oe=se}return Oe}function fKe(w,A,P,V){var Z=w.length;for(P=fr(P),P<0&&(P=-P>Z?0:Z+P),V=V===n||V>Z?Z:fr(V),V<0&&(V+=Z),V=P>V?0:Xde(V);P<V;)w[P++]=A;return w}function Ofe(w,A){var P=[];return Ky(w,function(V,Z,se){A(V,Z,se)&&P.push(V)}),P}function Ya(w,A,P,V,Z){var se=-1,me=w.length;for(P||(P=ZKe),Z||(Z=[]);++se<me;){var Te=w[se];A>0&&P(Te)?A>1?Ya(Te,A-1,P,V,Z):fh(Z,Te):V||(Z[Z.length]=Te)}return Z}var qj=ode(),Ffe=ode(!0);function Bp(w,A){return w&&qj(w,A,_a)}function Wj(w,A){return w&&Ffe(w,A,_a)}function b4(w,A){return ed(A,function(P){return jm(w[P])})}function cx(w,A){A=Qy(A,w);for(var P=0,V=A.length;w!=null&&P<V;)w=w[Up(A[P++])];return P&&P==V?w:n}function $fe(w,A,P){var V=A(w);return nr(w)?V:fh(V,P(w))}function hl(w){return w==null?w===n?de:gt:ox&&ox in is(w)?GKe(w):oXe(w)}function Gj(w,A){return w>A}function dKe(w,A){return w!=null&&Ui.call(w,A)}function hKe(w,A){return w!=null&&A in is(w)}function pKe(w,A,P){return w>=Eu(A,P)&&w<ea(A,P)}function Yj(w,A,P){for(var V=P?qy:rx,Z=w[0].length,se=w.length,me=se,Te=qe(se),Oe=1/0,ct=[];me--;){var dt=w[me];me&&A&&(dt=rs(dt,Oi(A))),Oe=Eu(dt.length,Oe),Te[me]=!P&&(A||Z>=120&&dt.length>=120)?new ux(me&&dt):n}dt=w[0];var bt=-1,Ut=Te[0];e:for(;++bt<Z&&ct.length<Oe;){var sn=dt[bt],In=A?A(sn):sn;if(sn=P||sn!==0?sn:0,!(Ut?td(Ut,In):V(ct,In,P))){for(me=se;--me;){var yr=Te[me];if(!(yr?td(yr,In):V(w[me],In,P)))continue e}Ut&&Ut.push(In),ct.push(sn)}}return ct}function mKe(w,A,P,V){return Bp(w,function(Z,se,me){A(V,P(Z),se,me)}),V}function rD(w,A,P){A=Qy(A,w),w=Ede(w,A);var V=w==null?w:w[Up(od(A))];return V==null?n:wu(V,w,P)}function Mfe(w){return Zs(w)&&hl(w)==J}function gKe(w){return Zs(w)&&hl(w)==he}function yKe(w){return Zs(w)&&hl(w)==Ae}function iD(w,A,P,V,Z){return w===A?!0:w==null||A==null||!Zs(w)&&!Zs(A)?w!==w&&A!==A:vKe(w,A,P,V,iD,Z)}function vKe(w,A,P,V,Z,se){var me=nr(w),Te=nr(A),Oe=me?re:Cu(w),ct=Te?re:Cu(A);Oe=Oe==J?Ie:Oe,ct=ct==J?Ie:ct;var dt=Oe==Ie,bt=ct==Ie,Ut=Oe==ct;if(Ut&&Zy(w)){if(!Zy(A))return!1;me=!0,dt=!1}if(Ut&&!dt)return se||(se=new ph),me||BE(w)?gde(w,A,P,V,Z,se):qKe(w,A,Oe,P,V,Z,se);if(!(P&p)){var sn=dt&&Ui.call(w,"__wrapped__"),In=bt&&Ui.call(A,"__wrapped__");if(sn||In){var yr=sn?w.value():w,kn=In?A.value():A;return se||(se=new ph),Z(yr,kn,P,V,se)}}return Ut?(se||(se=new ph),WKe(w,A,P,V,Z,se)):!1}function bKe(w){return Zs(w)&&Cu(w)==Xe}function Kj(w,A,P,V){var Z=P.length,se=Z,me=!V;if(w==null)return!se;for(w=is(w);Z--;){var Te=P[Z];if(me&&Te[2]?Te[1]!==w[Te[0]]:!(Te[0]in w))return!1}for(;++Z<se;){Te=P[Z];var Oe=Te[0],ct=w[Oe],dt=Te[1];if(me&&Te[2]){if(ct===n&&!(Oe in w))return!1}else{var bt=new ph;if(V)var Ut=V(ct,dt,Oe,w,A,bt);if(!(Ut===n?iD(dt,ct,p|m,V,bt):Ut))return!1}}return!0}function Lfe(w){if(!qs(w)||tXe(w))return!1;var A=jm(w)?bYe:Dr;return A.test(dx(w))}function xKe(w){return Zs(w)&&hl(w)==_t}function wKe(w){return Zs(w)&&Cu(w)==$t}function _Ke(w){return Zs(w)&&$4(w.length)&&!!oi[hl(w)]}function Bfe(w){return typeof w=="function"?w:w==null?sc:typeof w=="object"?nr(w)?zfe(w[0],w[1]):Ufe(w):ahe(w)}function Xj(w){if(!aD(w))return TYe(w);var A=[];for(var P in is(w))Ui.call(w,P)&&P!="constructor"&&A.push(P);return A}function EKe(w){if(!qs(w))return sXe(w);var A=aD(w),P=[];for(var V in w)V=="constructor"&&(A||!Ui.call(w,V))||P.push(V);return P}function Qj(w,A){return w<A}function jfe(w,A){var P=-1,V=rc(w)?qe(w.length):[];return Ky(w,function(Z,se,me){V[++P]=A(Z,se,me)}),V}function Ufe(w){var A=dU(w);return A.length==1&&A[0][2]?wde(A[0][0],A[0][1]):function(P){return P===w||Kj(P,w,A)}}function zfe(w,A){return pU(w)&&xde(A)?wde(Up(w),A):function(P){var V=CU(P,w);return V===n&&V===A?TU(P,w):iD(A,V,p|m)}}function x4(w,A,P,V,Z){w!==A&&qj(A,function(se,me){if(Z||(Z=new ph),qs(se))CKe(w,A,me,P,x4,V,Z);else{var Te=V?V(gU(w,me),se,me+"",w,A,Z):n;Te===n&&(Te=se),Vj(w,me,Te)}},ic)}function CKe(w,A,P,V,Z,se,me){var Te=gU(w,P),Oe=gU(A,P),ct=me.get(Oe);if(ct){Vj(w,P,ct);return}var dt=se?se(Te,Oe,P+"",w,A,me):n,bt=dt===n;if(bt){var Ut=nr(Oe),sn=!Ut&&Zy(Oe),In=!Ut&&!sn&&BE(Oe);dt=Oe,Ut||sn||In?nr(Te)?dt=Te:vo(Te)?dt=nc(Te):sn?(bt=!1,dt=ede(Oe,!0)):In?(bt=!1,dt=tde(Oe,!0)):dt=[]:lD(Oe)||hx(Oe)?(dt=Te,hx(Te)?dt=Qde(Te):(!qs(Te)||jm(Te))&&(dt=bde(Oe))):bt=!1}bt&&(me.set(Oe,dt),Z(dt,Oe,V,se,me),me.delete(Oe)),Vj(w,P,dt)}function Vfe(w,A){var P=w.length;if(P)return A+=A<0?P:0,Bm(A,P)?w[A]:n}function Hfe(w,A,P){A.length?A=rs(A,function(se){return nr(se)?function(me){return cx(me,se.length===1?se[0]:se)}:se}):A=[sc];var V=-1;A=rs(A,Oi(Sn()));var Z=jfe(w,function(se,me,Te){var Oe=rs(A,function(ct){return ct(se)});return{criteria:Oe,index:++V,value:se}});return Ge(Z,function(se,me){return MKe(se,me,P)})}function TKe(w,A){return qfe(w,A,function(P,V){return TU(w,V)})}function qfe(w,A,P){for(var V=-1,Z=A.length,se={};++V<Z;){var me=A[V],Te=cx(w,me);P(Te,me)&&sD(se,Qy(me,w),Te)}return se}function AKe(w){return function(A){return cx(A,w)}}function Jj(w,A,P,V){var Z=V?Wy:Pm,se=-1,me=A.length,Te=w;for(w===A&&(A=nc(A)),P&&(Te=rs(w,Oi(P)));++se<me;)for(var Oe=0,ct=A[se],dt=P?P(ct):ct;(Oe=Z(Te,dt,Oe,V))>-1;)Te!==w&&c4.call(Te,Oe,1),c4.call(w,Oe,1);return w}function Wfe(w,A){for(var P=w?A.length:0,V=P-1;P--;){var Z=A[P];if(P==V||Z!==se){var se=Z;Bm(Z)?c4.call(w,Z,1):nU(w,Z)}}return w}function Zj(w,A){return w+h4(Afe()*(A-w+1))}function SKe(w,A,P,V){for(var Z=-1,se=ea(d4((A-w)/(P||1)),0),me=qe(se);se--;)me[V?se:++Z]=w,w+=P;return me}function eU(w,A){var P="";if(!w||A<1||A>Y)return P;do A%2&&(P+=w),A=h4(A/2),A&&(w+=w);while(A);return P}function wr(w,A){return yU(_de(w,A,sc),w+"")}function DKe(w){return Ife(jE(w))}function IKe(w,A){var P=jE(w);return k4(P,lx(A,0,P.length))}function sD(w,A,P,V){if(!qs(w))return w;A=Qy(A,w);for(var Z=-1,se=A.length,me=se-1,Te=w;Te!=null&&++Z<se;){var Oe=Up(A[Z]),ct=P;if(Oe==="__proto__"||Oe==="constructor"||Oe==="prototype")return w;if(Z!=me){var dt=Te[Oe];ct=V?V(dt,Oe,Te):n,ct===n&&(ct=qs(dt)?dt:Bm(A[Z+1])?[]:{})}tD(Te,Oe,ct),Te=Te[Oe]}return w}var Gfe=p4?function(w,A){return p4.set(w,A),w}:sc,kKe=f4?function(w,A){return f4(w,"toString",{configurable:!0,enumerable:!1,value:SU(A),writable:!0})}:sc;function RKe(w){return k4(jE(w))}function sd(w,A,P){var V=-1,Z=w.length;A<0&&(A=-A>Z?0:Z+A),P=P>Z?Z:P,P<0&&(P+=Z),Z=A>P?0:P-A>>>0,A>>>=0;for(var se=qe(Z);++V<Z;)se[V]=w[V+A];return se}function NKe(w,A){var P;return Ky(w,function(V,Z,se){return P=A(V,Z,se),!P}),!!P}function w4(w,A,P){var V=0,Z=w==null?V:w.length;if(typeof A=="number"&&A===A&&Z<=L){for(;V<Z;){var se=V+Z>>>1,me=w[se];me!==null&&!af(me)&&(P?me<=A:me<A)?V=se+1:Z=se}return Z}return tU(w,A,sc,P)}function tU(w,A,P,V){var Z=0,se=w==null?0:w.length;if(se===0)return 0;A=P(A);for(var me=A!==A,Te=A===null,Oe=af(A),ct=A===n;Z<se;){var dt=h4((Z+se)/2),bt=P(w[dt]),Ut=bt!==n,sn=bt===null,In=bt===bt,yr=af(bt);if(me)var kn=V||In;else ct?kn=In&&(V||Ut):Te?kn=In&&Ut&&(V||!sn):Oe?kn=In&&Ut&&!sn&&(V||!yr):sn||yr?kn=!1:kn=V?bt<=A:bt<A;kn?Z=dt+1:se=dt}return Eu(se,W)}function Yfe(w,A){for(var P=-1,V=w.length,Z=0,se=[];++P<V;){var me=w[P],Te=A?A(me):me;if(!P||!mh(Te,Oe)){var Oe=Te;se[Z++]=me===0?0:me}}return se}function Kfe(w){return typeof w=="number"?w:af(w)?M:+w}function of(w){if(typeof w=="string")return w;if(nr(w))return rs(w,of)+"";if(af(w))return Sfe?Sfe.call(w):"";var A=w+"";return A=="0"&&1/w==-1/0?"-0":A}function Xy(w,A,P){var V=-1,Z=rx,se=w.length,me=!0,Te=[],Oe=Te;if(P)me=!1,Z=qy;else if(se>=i){var ct=A?null:VKe(w);if(ct)return n4(ct);me=!1,Z=td,Oe=new ux}else Oe=A?[]:Te;e:for(;++V<se;){var dt=w[V],bt=A?A(dt):dt;if(dt=P||dt!==0?dt:0,me&&bt===bt){for(var Ut=Oe.length;Ut--;)if(Oe[Ut]===bt)continue e;A&&Oe.push(bt),Te.push(dt)}else Z(Oe,bt,P)||(Oe!==Te&&Oe.push(bt),Te.push(dt))}return Te}function nU(w,A){return A=Qy(A,w),w=Ede(w,A),w==null||delete w[Up(od(A))]}function Xfe(w,A,P,V){return sD(w,A,P(cx(w,A)),V)}function _4(w,A,P,V){for(var Z=w.length,se=V?Z:-1;(V?se--:++se<Z)&&A(w[se],se,w););return P?sd(w,V?0:se,V?se+1:Z):sd(w,V?se+1:0,V?Z:se)}function Qfe(w,A){var P=w;return P instanceof Or&&(P=P.value()),dh(A,function(V,Z){return Z.func.apply(Z.thisArg,fh([V],Z.args))},P)}function rU(w,A,P){var V=w.length;if(V<2)return V?Xy(w[0]):[];for(var Z=-1,se=qe(V);++Z<V;)for(var me=w[Z],Te=-1;++Te<V;)Te!=Z&&(se[Z]=nD(se[Z]||me,w[Te],A,P));return Xy(Ya(se,1),A,P)}function Jfe(w,A,P){for(var V=-1,Z=w.length,se=A.length,me={};++V<Z;){var Te=V<se?A[V]:n;P(me,w[V],Te)}return me}function iU(w){return vo(w)?w:[]}function sU(w){return typeof w=="function"?w:sc}function Qy(w,A){return nr(w)?w:pU(w,A)?[w]:Sde(Fi(w))}var PKe=wr;function Jy(w,A,P){var V=w.length;return P=P===n?V:P,!A&&P>=V?w:sd(w,A,P)}var Zfe=xYe||function(w){return wn.clearTimeout(w)};function ede(w,A){if(A)return w.slice();var P=w.length,V=wfe?wfe(P):new w.constructor(P);return w.copy(V),V}function oU(w){var A=new w.constructor(w.byteLength);return new u4(A).set(new u4(w)),A}function OKe(w,A){var P=A?oU(w.buffer):w.buffer;return new w.constructor(P,w.byteOffset,w.byteLength)}function FKe(w){var A=new w.constructor(w.source,rr.exec(w));return A.lastIndex=w.lastIndex,A}function $Ke(w){return eD?is(eD.call(w)):{}}function tde(w,A){var P=A?oU(w.buffer):w.buffer;return new w.constructor(P,w.byteOffset,w.length)}function nde(w,A){if(w!==A){var P=w!==n,V=w===null,Z=w===w,se=af(w),me=A!==n,Te=A===null,Oe=A===A,ct=af(A);if(!Te&&!ct&&!se&&w>A||se&&me&&Oe&&!Te&&!ct||V&&me&&Oe||!P&&Oe||!Z)return 1;if(!V&&!se&&!ct&&w<A||ct&&P&&Z&&!V&&!se||Te&&P&&Z||!me&&Z||!Oe)return-1}return 0}function MKe(w,A,P){for(var V=-1,Z=w.criteria,se=A.criteria,me=Z.length,Te=P.length;++V<me;){var Oe=nde(Z[V],se[V]);if(Oe){if(V>=Te)return Oe;var ct=P[V];return Oe*(ct=="desc"?-1:1)}}return w.index-A.index}function rde(w,A,P,V){for(var Z=-1,se=w.length,me=P.length,Te=-1,Oe=A.length,ct=ea(se-me,0),dt=qe(Oe+ct),bt=!V;++Te<Oe;)dt[Te]=A[Te];for(;++Z<me;)(bt||Z<se)&&(dt[P[Z]]=w[Z]);for(;ct--;)dt[Te++]=w[Z++];return dt}function ide(w,A,P,V){for(var Z=-1,se=w.length,me=-1,Te=P.length,Oe=-1,ct=A.length,dt=ea(se-Te,0),bt=qe(dt+ct),Ut=!V;++Z<dt;)bt[Z]=w[Z];for(var sn=Z;++Oe<ct;)bt[sn+Oe]=A[Oe];for(;++me<Te;)(Ut||Z<se)&&(bt[sn+P[me]]=w[Z++]);return bt}function nc(w,A){var P=-1,V=w.length;for(A||(A=qe(V));++P<V;)A[P]=w[P];return A}function jp(w,A,P,V){var Z=!P;P||(P={});for(var se=-1,me=A.length;++se<me;){var Te=A[se],Oe=V?V(P[Te],w[Te],Te,P,w):n;Oe===n&&(Oe=w[Te]),Z?$m(P,Te,Oe):tD(P,Te,Oe)}return P}function LKe(w,A){return jp(w,hU(w),A)}function BKe(w,A){return jp(w,yde(w),A)}function E4(w,A){return function(P,V){var Z=nr(P)?nx:aKe,se=A?A():{};return Z(P,w,Sn(V,2),se)}}function $E(w){return wr(function(A,P){var V=-1,Z=P.length,se=Z>1?P[Z-1]:n,me=Z>2?P[2]:n;for(se=w.length>3&&typeof se=="function"?(Z--,se):n,me&&pl(P[0],P[1],me)&&(se=Z<3?n:se,Z=1),A=is(A);++V<Z;){var Te=P[V];Te&&w(A,Te,V,se)}return A})}function sde(w,A){return function(P,V){if(P==null)return P;if(!rc(P))return w(P,V);for(var Z=P.length,se=A?Z:-1,me=is(P);(A?se--:++se<Z)&&V(me[se],se,me)!==!1;);return P}}function ode(w){return function(A,P,V){for(var Z=-1,se=is(A),me=V(A),Te=me.length;Te--;){var Oe=me[w?Te:++Z];if(P(se[Oe],Oe,se)===!1)break}return A}}function jKe(w,A,P){var V=A&g,Z=oD(w);function se(){var me=this&&this!==wn&&this instanceof se?Z:w;return me.apply(V?P:this,arguments)}return se}function ade(w){return function(A){A=Fi(A);var P=IE(A)?hh(A):n,V=P?P[0]:A.charAt(0),Z=P?Jy(P,1).join(""):A.slice(1);return V[w]()+Z}}function ME(w){return function(A){return dh(she(ihe(A).replace(_E,"")),w,"")}}function oD(w){return function(){var A=arguments;switch(A.length){case 0:return new w;case 1:return new w(A[0]);case 2:return new w(A[0],A[1]);case 3:return new w(A[0],A[1],A[2]);case 4:return new w(A[0],A[1],A[2],A[3]);case 5:return new w(A[0],A[1],A[2],A[3],A[4]);case 6:return new w(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new w(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var P=FE(w.prototype),V=w.apply(P,A);return qs(V)?V:P}}function UKe(w,A,P){var V=oD(w);function Z(){for(var se=arguments.length,me=qe(se),Te=se,Oe=LE(Z);Te--;)me[Te]=arguments[Te];var ct=se<3&&me[0]!==Oe&&me[se-1]!==Oe?[]:Gy(me,Oe);if(se-=ct.length,se<P)return dde(w,A,C4,Z.placeholder,n,me,ct,n,n,P-se);var dt=this&&this!==wn&&this instanceof Z?V:w;return wu(dt,this,me)}return Z}function ude(w){return function(A,P,V){var Z=is(A);if(!rc(A)){var se=Sn(P,3);A=_a(A),P=function(Te){return se(Z[Te],Te,Z)}}var me=w(A,P,V);return me>-1?Z[se?A[me]:me]:n}}function lde(w){return Lm(function(A){var P=A.length,V=P,Z=rd.prototype.thru;for(w&&A.reverse();V--;){var se=A[V];if(typeof se!="function")throw new nd(o);if(Z&&!me&&D4(se)=="wrapper")var me=new rd([],!0)}for(V=me?V:P;++V<P;){se=A[V];var Te=D4(se),Oe=Te=="wrapper"?fU(se):n;Oe&&mU(Oe[0])&&Oe[1]==(T|b|_|S)&&!Oe[4].length&&Oe[9]==1?me=me[D4(Oe[0])].apply(me,Oe[3]):me=se.length==1&&mU(se)?me[Te]():me.thru(se)}return function(){var ct=arguments,dt=ct[0];if(me&&ct.length==1&&nr(dt))return me.plant(dt).value();for(var bt=0,Ut=P?A[bt].apply(this,ct):dt;++bt<P;)Ut=A[bt].call(this,Ut);return Ut}})}function C4(w,A,P,V,Z,se,me,Te,Oe,ct){var dt=A&T,bt=A&g,Ut=A&y,sn=A&(b|x),In=A&k,yr=Ut?n:oD(w);function kn(){for(var kr=arguments.length,Vr=qe(kr),uf=kr;uf--;)Vr[uf]=arguments[uf];if(sn)var ml=LE(kn),lf=KS(Vr,ml);if(V&&(Vr=rde(Vr,V,Z,sn)),se&&(Vr=ide(Vr,se,me,sn)),kr-=lf,sn&&kr<ct){var bo=Gy(Vr,ml);return dde(w,A,C4,kn.placeholder,P,Vr,bo,Te,Oe,ct-kr)}var gh=bt?P:this,zm=Ut?gh[w]:w;return kr=Vr.length,Te?Vr=aXe(Vr,Te):In&&kr>1&&Vr.reverse(),dt&&Oe<kr&&(Vr.length=Oe),this&&this!==wn&&this instanceof kn&&(zm=yr||oD(zm)),zm.apply(gh,Vr)}return kn}function cde(w,A){return function(P,V){return mKe(P,w,A(V),{})}}function T4(w,A){return function(P,V){var Z;if(P===n&&V===n)return A;if(P!==n&&(Z=P),V!==n){if(Z===n)return V;typeof P=="string"||typeof V=="string"?(P=of(P),V=of(V)):(P=Kfe(P),V=Kfe(V)),Z=w(P,V)}return Z}}function aU(w){return Lm(function(A){return A=rs(A,Oi(Sn())),wr(function(P){var V=this;return w(A,function(Z){return wu(Z,V,P)})})})}function A4(w,A){A=A===n?" ":of(A);var P=A.length;if(P<2)return P?eU(A,w):A;var V=eU(A,d4(w/kE(A)));return IE(A)?Jy(hh(V),0,w).join(""):V.slice(0,w)}function zKe(w,A,P,V){var Z=A&g,se=oD(w);function me(){for(var Te=-1,Oe=arguments.length,ct=-1,dt=V.length,bt=qe(dt+Oe),Ut=this&&this!==wn&&this instanceof me?se:w;++ct<dt;)bt[ct]=V[ct];for(;Oe--;)bt[ct++]=arguments[++Te];return wu(Ut,Z?P:this,bt)}return me}function fde(w){return function(A,P,V){return V&&typeof V!="number"&&pl(A,P,V)&&(P=V=n),A=Um(A),P===n?(P=A,A=0):P=Um(P),V=V===n?A<P?1:-1:Um(V),SKe(A,P,V,w)}}function S4(w){return function(A,P){return typeof A=="string"&&typeof P=="string"||(A=ad(A),P=ad(P)),w(A,P)}}function dde(w,A,P,V,Z,se,me,Te,Oe,ct){var dt=A&b,bt=dt?me:n,Ut=dt?n:me,sn=dt?se:n,In=dt?n:se;A|=dt?_:C,A&=~(dt?C:_),A&v||(A&=-4);var yr=[w,A,Z,sn,bt,In,Ut,Te,Oe,ct],kn=P.apply(n,yr);return mU(w)&&Cde(kn,yr),kn.placeholder=V,Tde(kn,w,A)}function uU(w){var A=Zo[w];return function(P,V){if(P=ad(P),V=V==null?0:Eu(fr(V),292),V&&Tfe(P)){var Z=(Fi(P)+"e").split("e"),se=A(Z[0]+"e"+(+Z[1]+V));return Z=(Fi(se)+"e").split("e"),+(Z[0]+"e"+(+Z[1]-V))}return A(P)}}var VKe=PE&&1/n4(new PE([,-0]))[1]==G?function(w){return new PE(w)}:kU;function hde(w){return function(A){var P=Cu(A);return P==Xe?Lj(A):P==$t?oYe(A):Jo(A,w(A))}}function Mm(w,A,P,V,Z,se,me,Te){var Oe=A&y;if(!Oe&&typeof w!="function")throw new nd(o);var ct=V?V.length:0;if(ct||(A&=-97,V=Z=n),me=me===n?me:ea(fr(me),0),Te=Te===n?Te:fr(Te),ct-=Z?Z.length:0,A&C){var dt=V,bt=Z;V=Z=n}var Ut=Oe?n:fU(w),sn=[w,A,P,V,Z,dt,bt,se,me,Te];if(Ut&&iXe(sn,Ut),w=sn[0],A=sn[1],P=sn[2],V=sn[3],Z=sn[4],Te=sn[9]=sn[9]===n?Oe?0:w.length:ea(sn[9]-ct,0),!Te&&A&(b|x)&&(A&=-25),!A||A==g)var In=jKe(w,A,P);else A==b||A==x?In=UKe(w,A,Te):(A==_||A==(g|_))&&!Z.length?In=zKe(w,A,P,V):In=C4.apply(n,sn);var yr=Ut?Gfe:Cde;return Tde(yr(In,sn),w,A)}function pde(w,A,P,V){return w===n||mh(w,NE[P])&&!Ui.call(V,P)?A:w}function mde(w,A,P,V,Z,se){return qs(w)&&qs(A)&&(se.set(A,w),x4(w,A,n,mde,se),se.delete(A)),w}function HKe(w){return lD(w)?n:w}function gde(w,A,P,V,Z,se){var me=P&p,Te=w.length,Oe=A.length;if(Te!=Oe&&!(me&&Oe>Te))return!1;var ct=se.get(w),dt=se.get(A);if(ct&&dt)return ct==A&&dt==w;var bt=-1,Ut=!0,sn=P&m?new ux:n;for(se.set(w,A),se.set(A,w);++bt<Te;){var In=w[bt],yr=A[bt];if(V)var kn=me?V(yr,In,bt,A,w,se):V(In,yr,bt,w,A,se);if(kn!==n){if(kn)continue;Ut=!1;break}if(sn){if(!SE(A,function(kr,Vr){if(!td(sn,Vr)&&(In===kr||Z(In,kr,P,V,se)))return sn.push(Vr)})){Ut=!1;break}}else if(!(In===yr||Z(In,yr,P,V,se))){Ut=!1;break}}return se.delete(w),se.delete(A),Ut}function qKe(w,A,P,V,Z,se,me){switch(P){case Ee:if(w.byteLength!=A.byteLength||w.byteOffset!=A.byteOffset)return!1;w=w.buffer,A=A.buffer;case he:return!(w.byteLength!=A.byteLength||!se(new u4(w),new u4(A)));case pe:case Ae:case Tt:return mh(+w,+A);case it:return w.name==A.name&&w.message==A.message;case _t:case st:return w==A+"";case Xe:var Te=Lj;case $t:var Oe=V&p;if(Te||(Te=n4),w.size!=A.size&&!Oe)return!1;var ct=me.get(w);if(ct)return ct==A;V|=m,me.set(w,A);var dt=gde(Te(w),Te(A),V,Z,se,me);return me.delete(w),dt;case X:if(eD)return eD.call(w)==eD.call(A)}return!1}function WKe(w,A,P,V,Z,se){var me=P&p,Te=lU(w),Oe=Te.length,ct=lU(A),dt=ct.length;if(Oe!=dt&&!me)return!1;for(var bt=Oe;bt--;){var Ut=Te[bt];if(!(me?Ut in A:Ui.call(A,Ut)))return!1}var sn=se.get(w),In=se.get(A);if(sn&&In)return sn==A&&In==w;var yr=!0;se.set(w,A),se.set(A,w);for(var kn=me;++bt<Oe;){Ut=Te[bt];var kr=w[Ut],Vr=A[Ut];if(V)var uf=me?V(Vr,kr,Ut,A,w,se):V(kr,Vr,Ut,w,A,se);if(!(uf===n?kr===Vr||Z(kr,Vr,P,V,se):uf)){yr=!1;break}kn||(kn=Ut=="constructor")}if(yr&&!kn){var ml=w.constructor,lf=A.constructor;ml!=lf&&"constructor"in w&&"constructor"in A&&!(typeof ml=="function"&&ml instanceof ml&&typeof lf=="function"&&lf instanceof lf)&&(yr=!1)}return se.delete(w),se.delete(A),yr}function Lm(w){return yU(_de(w,n,Rde),w+"")}function lU(w){return $fe(w,_a,hU)}function cU(w){return $fe(w,ic,yde)}var fU=p4?function(w){return p4.get(w)}:kU;function D4(w){for(var A=w.name+"",P=OE[A],V=Ui.call(OE,A)?P.length:0;V--;){var Z=P[V],se=Z.func;if(se==null||se==w)return Z.name}return A}function LE(w){var A=Ui.call(ee,"placeholder")?ee:w;return A.placeholder}function Sn(){var w=ee.iteratee||DU;return w=w===DU?Bfe:w,arguments.length?w(arguments[0],arguments[1]):w}function I4(w,A){var P=w.__data__;return eXe(A)?P[typeof A=="string"?"string":"hash"]:P.map}function dU(w){for(var A=_a(w),P=A.length;P--;){var V=A[P],Z=w[V];A[P]=[V,Z,xde(Z)]}return A}function fx(w,A){var P=rYe(w,A);return Lfe(P)?P:n}function GKe(w){var A=Ui.call(w,ox),P=w[ox];try{w[ox]=n;var V=!0}catch{}var Z=o4.call(w);return V&&(A?w[ox]=P:delete w[ox]),Z}var hU=jj?function(w){return w==null?[]:(w=is(w),ed(jj(w),function(A){return Efe.call(w,A)}))}:RU,yde=jj?function(w){for(var A=[];w;)fh(A,hU(w)),w=l4(w);return A}:RU,Cu=hl;(Uj&&Cu(new Uj(new ArrayBuffer(1)))!=Ee||QS&&Cu(new QS)!=Xe||zj&&Cu(zj.resolve())!=Ve||PE&&Cu(new PE)!=$t||JS&&Cu(new JS)!=we)&&(Cu=function(w){var A=hl(w),P=A==Ie?w.constructor:n,V=P?dx(P):"";if(V)switch(V){case IYe:return Ee;case kYe:return Xe;case RYe:return Ve;case NYe:return $t;case PYe:return we}return A});function YKe(w,A,P){for(var V=-1,Z=P.length;++V<Z;){var se=P[V],me=se.size;switch(se.type){case"drop":w+=me;break;case"dropRight":A-=me;break;case"take":A=Eu(A,w+me);break;case"takeRight":w=ea(w,A-me);break}}return{start:w,end:A}}function KKe(w){var A=w.match(_e);return A?A[1].split(Ue):[]}function vde(w,A,P){A=Qy(A,w);for(var V=-1,Z=A.length,se=!1;++V<Z;){var me=Up(A[V]);if(!(se=w!=null&&P(w,me)))break;w=w[me]}return se||++V!=Z?se:(Z=w==null?0:w.length,!!Z&&$4(Z)&&Bm(me,Z)&&(nr(w)||hx(w)))}function XKe(w){var A=w.length,P=new w.constructor(A);return A&&typeof w[0]=="string"&&Ui.call(w,"index")&&(P.index=w.index,P.input=w.input),P}function bde(w){return typeof w.constructor=="function"&&!aD(w)?FE(l4(w)):{}}function QKe(w,A,P){var V=w.constructor;switch(A){case he:return oU(w);case pe:case Ae:return new V(+w);case Ee:return OKe(w,P);case Me:case Be:case lt:case Ze:case Xt:case fn:case Wt:case an:case Cn:return tde(w,P);case Xe:return new V;case Tt:case st:return new V(w);case _t:return FKe(w);case $t:return new V;case X:return $Ke(w)}}function JKe(w,A){var P=A.length;if(!P)return w;var V=P-1;return A[V]=(P>1?"& ":"")+A[V],A=A.join(P>2?", ":" "),w.replace(ce,`{
/* [wrapped with `+A+`] */
`)}function ZKe(w){return nr(w)||hx(w)||!!(Cfe&&w&&w[Cfe])}function Bm(w,A){var P=typeof w;return A=A??Y,!!A&&(P=="number"||P!="symbol"&&dn.test(w))&&w>-1&&w%1==0&&w<A}function pl(w,A,P){if(!qs(P))return!1;var V=typeof A;return(V=="number"?rc(P)&&Bm(A,P.length):V=="string"&&A in P)?mh(P[A],w):!1}function pU(w,A){if(nr(w))return!1;var P=typeof w;return P=="number"||P=="symbol"||P=="boolean"||w==null||af(w)?!0:Ri.test(w)||!Nr.test(w)||A!=null&&w in is(A)}function eXe(w){var A=typeof w;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?w!=="__proto__":w===null}function mU(w){var A=D4(w),P=ee[A];if(typeof P!="function"||!(A in Or.prototype))return!1;if(w===P)return!0;var V=fU(P);return!!V&&w===V[0]}function tXe(w){return!!xfe&&xfe in w}var nXe=i4?jm:NU;function aD(w){var A=w&&w.constructor,P=typeof A=="function"&&A.prototype||NE;return w===P}function xde(w){return w===w&&!qs(w)}function wde(w,A){return function(P){return P==null?!1:P[w]===A&&(A!==n||w in is(P))}}function rXe(w){var A=O4(w,function(V){return P.size===l&&P.clear(),V}),P=A.cache;return A}function iXe(w,A){var P=w[1],V=A[1],Z=P|V,se=Z<(g|y|T),me=V==T&&P==b||V==T&&P==S&&w[7].length<=A[8]||V==(T|S)&&A[7].length<=A[8]&&P==b;if(!(se||me))return w;V&g&&(w[2]=A[2],Z|=P&g?0:v);var Te=A[3];if(Te){var Oe=w[3];w[3]=Oe?rde(Oe,Te,A[4]):Te,w[4]=Oe?Gy(w[3],c):A[4]}return Te=A[5],Te&&(Oe=w[5],w[5]=Oe?ide(Oe,Te,A[6]):Te,w[6]=Oe?Gy(w[5],c):A[6]),Te=A[7],Te&&(w[7]=Te),V&T&&(w[8]=w[8]==null?A[8]:Eu(w[8],A[8])),w[9]==null&&(w[9]=A[9]),w[0]=A[0],w[1]=Z,w}function sXe(w){var A=[];if(w!=null)for(var P in is(w))A.push(P);return A}function oXe(w){return o4.call(w)}function _de(w,A,P){return A=ea(A===n?w.length-1:A,0),function(){for(var V=arguments,Z=-1,se=ea(V.length-A,0),me=qe(se);++Z<se;)me[Z]=V[A+Z];Z=-1;for(var Te=qe(A+1);++Z<A;)Te[Z]=V[Z];return Te[A]=P(me),wu(w,this,Te)}}function Ede(w,A){return A.length<2?w:cx(w,sd(A,0,-1))}function aXe(w,A){for(var P=w.length,V=Eu(A.length,P),Z=nc(w);V--;){var se=A[V];w[V]=Bm(se,P)?Z[se]:n}return w}function gU(w,A){if(!(A==="constructor"&&typeof w[A]=="function")&&A!="__proto__")return w[A]}var Cde=Ade(Gfe),uD=_Ye||function(w,A){return wn.setTimeout(w,A)},yU=Ade(kKe);function Tde(w,A,P){var V=A+"";return yU(w,JKe(V,uXe(KKe(V),P)))}function Ade(w){var A=0,P=0;return function(){var V=AYe(),Z=O-(V-P);if(P=V,Z>0){if(++A>=F)return arguments[0]}else A=0;return w.apply(n,arguments)}}function k4(w,A){var P=-1,V=w.length,Z=V-1;for(A=A===n?V:A;++P<A;){var se=Zj(P,Z),me=w[se];w[se]=w[P],w[P]=me}return w.length=A,w}var Sde=rXe(function(w){var A=[];return w.charCodeAt(0)===46&&A.push(""),w.replace(pi,function(P,V,Z,se){A.push(Z?se.replace(Ht,"$1"):V||P)}),A});function Up(w){if(typeof w=="string"||af(w))return w;var A=w+"";return A=="0"&&1/w==-1/0?"-0":A}function dx(w){if(w!=null){try{return s4.call(w)}catch{}try{return w+""}catch{}}return""}function uXe(w,A){return dl(q,function(P){var V="_."+P[0];A&P[1]&&!rx(w,V)&&w.push(V)}),w.sort()}function Dde(w){if(w instanceof Or)return w.clone();var A=new rd(w.__wrapped__,w.__chain__);return A.__actions__=nc(w.__actions__),A.__index__=w.__index__,A.__values__=w.__values__,A}function lXe(w,A,P){(P?pl(w,A,P):A===n)?A=1:A=ea(fr(A),0);var V=w==null?0:w.length;if(!V||A<1)return[];for(var Z=0,se=0,me=qe(d4(V/A));Z<V;)me[se++]=sd(w,Z,Z+=A);return me}function cXe(w){for(var A=-1,P=w==null?0:w.length,V=0,Z=[];++A<P;){var se=w[A];se&&(Z[V++]=se)}return Z}function fXe(){var w=arguments.length;if(!w)return[];for(var A=qe(w-1),P=arguments[0],V=w;V--;)A[V-1]=arguments[V];return fh(nr(P)?nc(P):[P],Ya(A,1))}var dXe=wr(function(w,A){return vo(w)?nD(w,Ya(A,1,vo,!0)):[]}),hXe=wr(function(w,A){var P=od(A);return vo(P)&&(P=n),vo(w)?nD(w,Ya(A,1,vo,!0),Sn(P,2)):[]}),pXe=wr(function(w,A){var P=od(A);return vo(P)&&(P=n),vo(w)?nD(w,Ya(A,1,vo,!0),n,P):[]});function mXe(w,A,P){var V=w==null?0:w.length;return V?(A=P||A===n?1:fr(A),sd(w,A<0?0:A,V)):[]}function gXe(w,A,P){var V=w==null?0:w.length;return V?(A=P||A===n?1:fr(A),A=V-A,sd(w,0,A<0?0:A)):[]}function yXe(w,A){return w&&w.length?_4(w,Sn(A,3),!0,!0):[]}function vXe(w,A){return w&&w.length?_4(w,Sn(A,3),!0):[]}function bXe(w,A,P,V){var Z=w==null?0:w.length;return Z?(P&&typeof P!="number"&&pl(w,A,P)&&(P=0,V=Z),fKe(w,A,P,V)):[]}function Ide(w,A,P){var V=w==null?0:w.length;if(!V)return-1;var Z=P==null?0:fr(P);return Z<0&&(Z=ea(V+Z,0)),ix(w,Sn(A,3),Z)}function kde(w,A,P){var V=w==null?0:w.length;if(!V)return-1;var Z=V-1;return P!==n&&(Z=fr(P),Z=P<0?ea(V+Z,0):Eu(Z,V-1)),ix(w,Sn(A,3),Z,!0)}function Rde(w){var A=w==null?0:w.length;return A?Ya(w,1):[]}function xXe(w){var A=w==null?0:w.length;return A?Ya(w,G):[]}function wXe(w,A){var P=w==null?0:w.length;return P?(A=A===n?1:fr(A),Ya(w,A)):[]}function _Xe(w){for(var A=-1,P=w==null?0:w.length,V={};++A<P;){var Z=w[A];V[Z[0]]=Z[1]}return V}function Nde(w){return w&&w.length?w[0]:n}function EXe(w,A,P){var V=w==null?0:w.length;if(!V)return-1;var Z=P==null?0:fr(P);return Z<0&&(Z=ea(V+Z,0)),Pm(w,A,Z)}function CXe(w){var A=w==null?0:w.length;return A?sd(w,0,-1):[]}var TXe=wr(function(w){var A=rs(w,iU);return A.length&&A[0]===w[0]?Yj(A):[]}),AXe=wr(function(w){var A=od(w),P=rs(w,iU);return A===od(P)?A=n:P.pop(),P.length&&P[0]===w[0]?Yj(P,Sn(A,2)):[]}),SXe=wr(function(w){var A=od(w),P=rs(w,iU);return A=typeof A=="function"?A:n,A&&P.pop(),P.length&&P[0]===w[0]?Yj(P,n,A):[]});function DXe(w,A){return w==null?"":CYe.call(w,A)}function od(w){var A=w==null?0:w.length;return A?w[A-1]:n}function IXe(w,A,P){var V=w==null?0:w.length;if(!V)return-1;var Z=V;return P!==n&&(Z=fr(P),Z=Z<0?ea(V+Z,0):Eu(Z,V-1)),A===A?uYe(w,A,Z):ix(w,D,Z,!0)}function kXe(w,A){return w&&w.length?Vfe(w,fr(A)):n}var RXe=wr(Pde);function Pde(w,A){return w&&w.length&&A&&A.length?Jj(w,A):w}function NXe(w,A,P){return w&&w.length&&A&&A.length?Jj(w,A,Sn(P,2)):w}function PXe(w,A,P){return w&&w.length&&A&&A.length?Jj(w,A,n,P):w}var OXe=Lm(function(w,A){var P=w==null?0:w.length,V=Hj(w,A);return Wfe(w,rs(A,function(Z){return Bm(Z,P)?+Z:Z}).sort(nde)),V});function FXe(w,A){var P=[];if(!(w&&w.length))return P;var V=-1,Z=[],se=w.length;for(A=Sn(A,3);++V<se;){var me=w[V];A(me,V,w)&&(P.push(me),Z.push(V))}return Wfe(w,Z),P}function vU(w){return w==null?w:DYe.call(w)}function $Xe(w,A,P){var V=w==null?0:w.length;return V?(P&&typeof P!="number"&&pl(w,A,P)?(A=0,P=V):(A=A==null?0:fr(A),P=P===n?V:fr(P)),sd(w,A,P)):[]}function MXe(w,A){return w4(w,A)}function LXe(w,A,P){return tU(w,A,Sn(P,2))}function BXe(w,A){var P=w==null?0:w.length;if(P){var V=w4(w,A);if(V<P&&mh(w[V],A))return V}return-1}function jXe(w,A){return w4(w,A,!0)}function UXe(w,A,P){return tU(w,A,Sn(P,2),!0)}function zXe(w,A){var P=w==null?0:w.length;if(P){var V=w4(w,A,!0)-1;if(mh(w[V],A))return V}return-1}function VXe(w){return w&&w.length?Yfe(w):[]}function HXe(w,A){return w&&w.length?Yfe(w,Sn(A,2)):[]}function qXe(w){var A=w==null?0:w.length;return A?sd(w,1,A):[]}function WXe(w,A,P){return w&&w.length?(A=P||A===n?1:fr(A),sd(w,0,A<0?0:A)):[]}function GXe(w,A,P){var V=w==null?0:w.length;return V?(A=P||A===n?1:fr(A),A=V-A,sd(w,A<0?0:A,V)):[]}function YXe(w,A){return w&&w.length?_4(w,Sn(A,3),!1,!0):[]}function KXe(w,A){return w&&w.length?_4(w,Sn(A,3)):[]}var XXe=wr(function(w){return Xy(Ya(w,1,vo,!0))}),QXe=wr(function(w){var A=od(w);return vo(A)&&(A=n),Xy(Ya(w,1,vo,!0),Sn(A,2))}),JXe=wr(function(w){var A=od(w);return A=typeof A=="function"?A:n,Xy(Ya(w,1,vo,!0),n,A)});function ZXe(w){return w&&w.length?Xy(w):[]}function eQe(w,A){return w&&w.length?Xy(w,Sn(A,2)):[]}function tQe(w,A){return A=typeof A=="function"?A:n,w&&w.length?Xy(w,n,A):[]}function bU(w){if(!(w&&w.length))return[];var A=0;return w=ed(w,function(P){if(vo(P))return A=ea(P.length,A),!0}),Ci(A,function(P){return rs(w,K(P))})}function Ode(w,A){if(!(w&&w.length))return[];var P=bU(w);return A==null?P:rs(P,function(V){return wu(A,n,V)})}var nQe=wr(function(w,A){return vo(w)?nD(w,A):[]}),rQe=wr(function(w){return rU(ed(w,vo))}),iQe=wr(function(w){var A=od(w);return vo(A)&&(A=n),rU(ed(w,vo),Sn(A,2))}),sQe=wr(function(w){var A=od(w);return A=typeof A=="function"?A:n,rU(ed(w,vo),n,A)}),oQe=wr(bU);function aQe(w,A){return Jfe(w||[],A||[],tD)}function uQe(w,A){return Jfe(w||[],A||[],sD)}var lQe=wr(function(w){var A=w.length,P=A>1?w[A-1]:n;return P=typeof P=="function"?(w.pop(),P):n,Ode(w,P)});function Fde(w){var A=ee(w);return A.__chain__=!0,A}function cQe(w,A){return A(w),w}function R4(w,A){return A(w)}var fQe=Lm(function(w){var A=w.length,P=A?w[0]:0,V=this.__wrapped__,Z=function(se){return Hj(se,w)};return A>1||this.__actions__.length||!(V instanceof Or)||!Bm(P)?this.thru(Z):(V=V.slice(P,+P+(A?1:0)),V.__actions__.push({func:R4,args:[Z],thisArg:n}),new rd(V,this.__chain__).thru(function(se){return A&&!se.length&&se.push(n),se}))});function dQe(){return Fde(this)}function hQe(){return new rd(this.value(),this.__chain__)}function pQe(){this.__values__===n&&(this.__values__=Kde(this.value()));var w=this.__index__>=this.__values__.length,A=w?n:this.__values__[this.__index__++];return{done:w,value:A}}function mQe(){return this}function gQe(w){for(var A,P=this;P instanceof g4;){var V=Dde(P);V.__index__=0,V.__values__=n,A?Z.__wrapped__=V:A=V;var Z=V;P=P.__wrapped__}return Z.__wrapped__=w,A}function yQe(){var w=this.__wrapped__;if(w instanceof Or){var A=w;return this.__actions__.length&&(A=new Or(this)),A=A.reverse(),A.__actions__.push({func:R4,args:[vU],thisArg:n}),new rd(A,this.__chain__)}return this.thru(vU)}function vQe(){return Qfe(this.__wrapped__,this.__actions__)}var bQe=E4(function(w,A,P){Ui.call(w,P)?++w[P]:$m(w,P,1)});function xQe(w,A,P){var V=nr(w)?AE:cKe;return P&&pl(w,A,P)&&(A=n),V(w,Sn(A,3))}function wQe(w,A){var P=nr(w)?ed:Ofe;return P(w,Sn(A,3))}var _Qe=ude(Ide),EQe=ude(kde);function CQe(w,A){return Ya(N4(w,A),1)}function TQe(w,A){return Ya(N4(w,A),G)}function AQe(w,A,P){return P=P===n?1:fr(P),Ya(N4(w,A),P)}function $de(w,A){var P=nr(w)?dl:Ky;return P(w,Sn(A,3))}function Mde(w,A){var P=nr(w)?JP:Pfe;return P(w,Sn(A,3))}var SQe=E4(function(w,A,P){Ui.call(w,P)?w[P].push(A):$m(w,P,[A])});function DQe(w,A,P,V){w=rc(w)?w:jE(w),P=P&&!V?fr(P):0;var Z=w.length;return P<0&&(P=ea(Z+P,0)),M4(w)?P<=Z&&w.indexOf(A,P)>-1:!!Z&&Pm(w,A,P)>-1}var IQe=wr(function(w,A,P){var V=-1,Z=typeof A=="function",se=rc(w)?qe(w.length):[];return Ky(w,function(me){se[++V]=Z?wu(A,me,P):rD(me,A,P)}),se}),kQe=E4(function(w,A,P){$m(w,P,A)});function N4(w,A){var P=nr(w)?rs:jfe;return P(w,Sn(A,3))}function RQe(w,A,P,V){return w==null?[]:(nr(A)||(A=A==null?[]:[A]),P=V?n:P,nr(P)||(P=P==null?[]:[P]),Hfe(w,A,P))}var NQe=E4(function(w,A,P){w[P?0:1].push(A)},function(){return[[],[]]});function PQe(w,A,P){var V=nr(w)?dh:$e,Z=arguments.length<3;return V(w,Sn(A,4),P,Z,Ky)}function OQe(w,A,P){var V=nr(w)?ZP:$e,Z=arguments.length<3;return V(w,Sn(A,4),P,Z,Pfe)}function FQe(w,A){var P=nr(w)?ed:Ofe;return P(w,F4(Sn(A,3)))}function $Qe(w){var A=nr(w)?Ife:DKe;return A(w)}function MQe(w,A,P){(P?pl(w,A,P):A===n)?A=1:A=fr(A);var V=nr(w)?sKe:IKe;return V(w,A)}function LQe(w){var A=nr(w)?oKe:RKe;return A(w)}function BQe(w){if(w==null)return 0;if(rc(w))return M4(w)?kE(w):w.length;var A=Cu(w);return A==Xe||A==$t?w.size:Xj(w).length}function jQe(w,A,P){var V=nr(w)?SE:NKe;return P&&pl(w,A,P)&&(A=n),V(w,Sn(A,3))}var UQe=wr(function(w,A){if(w==null)return[];var P=A.length;return P>1&&pl(w,A[0],A[1])?A=[]:P>2&&pl(A[0],A[1],A[2])&&(A=[A[0]]),Hfe(w,Ya(A,1),[])}),P4=wYe||function(){return wn.Date.now()};function zQe(w,A){if(typeof A!="function")throw new nd(o);return w=fr(w),function(){if(--w<1)return A.apply(this,arguments)}}function Lde(w,A,P){return A=P?n:A,A=w&&A==null?w.length:A,Mm(w,T,n,n,n,n,A)}function Bde(w,A){var P;if(typeof A!="function")throw new nd(o);return w=fr(w),function(){return--w>0&&(P=A.apply(this,arguments)),w<=1&&(A=n),P}}var xU=wr(function(w,A,P){var V=g;if(P.length){var Z=Gy(P,LE(xU));V|=_}return Mm(w,V,A,P,Z)}),jde=wr(function(w,A,P){var V=g|y;if(P.length){var Z=Gy(P,LE(jde));V|=_}return Mm(A,V,w,P,Z)});function Ude(w,A,P){A=P?n:A;var V=Mm(w,b,n,n,n,n,n,A);return V.placeholder=Ude.placeholder,V}function zde(w,A,P){A=P?n:A;var V=Mm(w,x,n,n,n,n,n,A);return V.placeholder=zde.placeholder,V}function Vde(w,A,P){var V,Z,se,me,Te,Oe,ct=0,dt=!1,bt=!1,Ut=!0;if(typeof w!="function")throw new nd(o);A=ad(A)||0,qs(P)&&(dt=!!P.leading,bt="maxWait"in P,se=bt?ea(ad(P.maxWait)||0,A):se,Ut="trailing"in P?!!P.trailing:Ut);function sn(bo){var gh=V,zm=Z;return V=Z=n,ct=bo,me=w.apply(zm,gh),me}function In(bo){return ct=bo,Te=uD(kr,A),dt?sn(bo):me}function yr(bo){var gh=bo-Oe,zm=bo-ct,uhe=A-gh;return bt?Eu(uhe,se-zm):uhe}function kn(bo){var gh=bo-Oe,zm=bo-ct;return Oe===n||gh>=A||gh<0||bt&&zm>=se}function kr(){var bo=P4();if(kn(bo))return Vr(bo);Te=uD(kr,yr(bo))}function Vr(bo){return Te=n,Ut&&V?sn(bo):(V=Z=n,me)}function uf(){Te!==n&&Zfe(Te),ct=0,V=Oe=Z=Te=n}function ml(){return Te===n?me:Vr(P4())}function lf(){var bo=P4(),gh=kn(bo);if(V=arguments,Z=this,Oe=bo,gh){if(Te===n)return In(Oe);if(bt)return Zfe(Te),Te=uD(kr,A),sn(Oe)}return Te===n&&(Te=uD(kr,A)),me}return lf.cancel=uf,lf.flush=ml,lf}var VQe=wr(function(w,A){return Nfe(w,1,A)}),HQe=wr(function(w,A,P){return Nfe(w,ad(A)||0,P)});function qQe(w){return Mm(w,k)}function O4(w,A){if(typeof w!="function"||A!=null&&typeof A!="function")throw new nd(o);var P=function(){var V=arguments,Z=A?A.apply(this,V):V[0],se=P.cache;if(se.has(Z))return se.get(Z);var me=w.apply(this,V);return P.cache=se.set(Z,me)||se,me};return P.cache=new(O4.Cache||Fm),P}O4.Cache=Fm;function F4(w){if(typeof w!="function")throw new nd(o);return function(){var A=arguments;switch(A.length){case 0:return!w.call(this);case 1:return!w.call(this,A[0]);case 2:return!w.call(this,A[0],A[1]);case 3:return!w.call(this,A[0],A[1],A[2])}return!w.apply(this,A)}}function WQe(w){return Bde(2,w)}var GQe=PKe(function(w,A){A=A.length==1&&nr(A[0])?rs(A[0],Oi(Sn())):rs(Ya(A,1),Oi(Sn()));var P=A.length;return wr(function(V){for(var Z=-1,se=Eu(V.length,P);++Z<se;)V[Z]=A[Z].call(this,V[Z]);return wu(w,this,V)})}),wU=wr(function(w,A){var P=Gy(A,LE(wU));return Mm(w,_,n,A,P)}),Hde=wr(function(w,A){var P=Gy(A,LE(Hde));return Mm(w,C,n,A,P)}),YQe=Lm(function(w,A){return Mm(w,S,n,n,n,A)});function KQe(w,A){if(typeof w!="function")throw new nd(o);return A=A===n?A:fr(A),wr(w,A)}function XQe(w,A){if(typeof w!="function")throw new nd(o);return A=A==null?0:ea(fr(A),0),wr(function(P){var V=P[A],Z=Jy(P,0,A);return V&&fh(Z,V),wu(w,this,Z)})}function QQe(w,A,P){var V=!0,Z=!0;if(typeof w!="function")throw new nd(o);return qs(P)&&(V="leading"in P?!!P.leading:V,Z="trailing"in P?!!P.trailing:Z),Vde(w,A,{leading:V,maxWait:A,trailing:Z})}function JQe(w){return Lde(w,1)}function ZQe(w,A){return wU(sU(A),w)}function eJe(){if(!arguments.length)return[];var w=arguments[0];return nr(w)?w:[w]}function tJe(w){return id(w,h)}function nJe(w,A){return A=typeof A=="function"?A:n,id(w,h,A)}function rJe(w){return id(w,f|h)}function iJe(w,A){return A=typeof A=="function"?A:n,id(w,f|h,A)}function sJe(w,A){return A==null||Rfe(w,A,_a(A))}function mh(w,A){return w===A||w!==w&&A!==A}var oJe=S4(Gj),aJe=S4(function(w,A){return w>=A}),hx=Mfe(function(){return arguments}())?Mfe:function(w){return Zs(w)&&Ui.call(w,"callee")&&!Efe.call(w,"callee")},nr=qe.isArray,uJe=Rm?Oi(Rm):gKe;function rc(w){return w!=null&&$4(w.length)&&!jm(w)}function vo(w){return Zs(w)&&rc(w)}function lJe(w){return w===!0||w===!1||Zs(w)&&hl(w)==pe}var Zy=EYe||NU,cJe=Nm?Oi(Nm):yKe;function fJe(w){return Zs(w)&&w.nodeType===1&&!lD(w)}function dJe(w){if(w==null)return!0;if(rc(w)&&(nr(w)||typeof w=="string"||typeof w.splice=="function"||Zy(w)||BE(w)||hx(w)))return!w.length;var A=Cu(w);if(A==Xe||A==$t)return!w.size;if(aD(w))return!Xj(w).length;for(var P in w)if(Ui.call(w,P))return!1;return!0}function hJe(w,A){return iD(w,A)}function pJe(w,A,P){P=typeof P=="function"?P:n;var V=P?P(w,A):n;return V===n?iD(w,A,n,P):!!V}function _U(w){if(!Zs(w))return!1;var A=hl(w);return A==it||A==ke||typeof w.message=="string"&&typeof w.name=="string"&&!lD(w)}function mJe(w){return typeof w=="number"&&Tfe(w)}function jm(w){if(!qs(w))return!1;var A=hl(w);return A==Re||A==ut||A==ve||A==ft}function qde(w){return typeof w=="number"&&w==fr(w)}function $4(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=Y}function qs(w){var A=typeof w;return w!=null&&(A=="object"||A=="function")}function Zs(w){return w!=null&&typeof w=="object"}var Wde=ex?Oi(ex):bKe;function gJe(w,A){return w===A||Kj(w,A,dU(A))}function yJe(w,A,P){return P=typeof P=="function"?P:n,Kj(w,A,dU(A),P)}function vJe(w){return Gde(w)&&w!=+w}function bJe(w){if(nXe(w))throw new Zn(s);return Lfe(w)}function xJe(w){return w===null}function wJe(w){return w==null}function Gde(w){return typeof w=="number"||Zs(w)&&hl(w)==Tt}function lD(w){if(!Zs(w)||hl(w)!=Ie)return!1;var A=l4(w);if(A===null)return!0;var P=Ui.call(A,"constructor")&&A.constructor;return typeof P=="function"&&P instanceof P&&s4.call(P)==yYe}var EU=YS?Oi(YS):xKe;function _Je(w){return qde(w)&&w>=-9007199254740991&&w<=Y}var Yde=tx?Oi(tx):wKe;function M4(w){return typeof w=="string"||!nr(w)&&Zs(w)&&hl(w)==st}function af(w){return typeof w=="symbol"||Zs(w)&&hl(w)==X}var BE=QP?Oi(QP):_Ke;function EJe(w){return w===n}function CJe(w){return Zs(w)&&Cu(w)==we}function TJe(w){return Zs(w)&&hl(w)==ae}var AJe=S4(Qj),SJe=S4(function(w,A){return w<=A});function Kde(w){if(!w)return[];if(rc(w))return M4(w)?hh(w):nc(w);if(XS&&w[XS])return sYe(w[XS]());var A=Cu(w),P=A==Xe?Lj:A==$t?n4:jE;return P(w)}function Um(w){if(!w)return w===0?w:0;if(w=ad(w),w===G||w===-1/0){var A=w<0?-1:1;return A*Q}return w===w?w:0}function fr(w){var A=Um(w),P=A%1;return A===A?P?A-P:A:0}function Xde(w){return w?lx(fr(w),0,j):0}function ad(w){if(typeof w=="number")return w;if(af(w))return M;if(qs(w)){var A=typeof w.valueOf=="function"?w.valueOf():w;w=qs(A)?A+"":A}if(typeof w!="string")return w===0?w:+w;w=zr(w);var P=jn.test(w);return P||ii.test(w)?xr(w.slice(2),P?2:8):mr.test(w)?M:+w}function Qde(w){return jp(w,ic(w))}function DJe(w){return w?lx(fr(w),-9007199254740991,Y):w===0?w:0}function Fi(w){return w==null?"":of(w)}var IJe=$E(function(w,A){if(aD(A)||rc(A)){jp(A,_a(A),w);return}for(var P in A)Ui.call(A,P)&&tD(w,P,A[P])}),Jde=$E(function(w,A){jp(A,ic(A),w)}),L4=$E(function(w,A,P,V){jp(A,ic(A),w,V)}),kJe=$E(function(w,A,P,V){jp(A,_a(A),w,V)}),RJe=Lm(Hj);function NJe(w,A){var P=FE(w);return A==null?P:kfe(P,A)}var PJe=wr(function(w,A){w=is(w);var P=-1,V=A.length,Z=V>2?A[2]:n;for(Z&&pl(A[0],A[1],Z)&&(V=1);++P<V;)for(var se=A[P],me=ic(se),Te=-1,Oe=me.length;++Te<Oe;){var ct=me[Te],dt=w[ct];(dt===n||mh(dt,NE[ct])&&!Ui.call(w,ct))&&(w[ct]=se[ct])}return w}),OJe=wr(function(w){return w.push(n,mde),wu(Zde,n,w)});function FJe(w,A){return _u(w,Sn(A,3),Bp)}function $Je(w,A){return _u(w,Sn(A,3),Wj)}function MJe(w,A){return w==null?w:qj(w,Sn(A,3),ic)}function LJe(w,A){return w==null?w:Ffe(w,Sn(A,3),ic)}function BJe(w,A){return w&&Bp(w,Sn(A,3))}function jJe(w,A){return w&&Wj(w,Sn(A,3))}function UJe(w){return w==null?[]:b4(w,_a(w))}function zJe(w){return w==null?[]:b4(w,ic(w))}function CU(w,A,P){var V=w==null?n:cx(w,A);return V===n?P:V}function VJe(w,A){return w!=null&&vde(w,A,dKe)}function TU(w,A){return w!=null&&vde(w,A,hKe)}var HJe=cde(function(w,A,P){A!=null&&typeof A.toString!="function"&&(A=o4.call(A)),w[A]=P},SU(sc)),qJe=cde(function(w,A,P){A!=null&&typeof A.toString!="function"&&(A=o4.call(A)),Ui.call(w,A)?w[A].push(P):w[A]=[P]},Sn),WJe=wr(rD);function _a(w){return rc(w)?Dfe(w):Xj(w)}function ic(w){return rc(w)?Dfe(w,!0):EKe(w)}function GJe(w,A){var P={};return A=Sn(A,3),Bp(w,function(V,Z,se){$m(P,A(V,Z,se),V)}),P}function YJe(w,A){var P={};return A=Sn(A,3),Bp(w,function(V,Z,se){$m(P,Z,A(V,Z,se))}),P}var KJe=$E(function(w,A,P){x4(w,A,P)}),Zde=$E(function(w,A,P,V){x4(w,A,P,V)}),XJe=Lm(function(w,A){var P={};if(w==null)return P;var V=!1;A=rs(A,function(se){return se=Qy(se,w),V||(V=se.length>1),se}),jp(w,cU(w),P),V&&(P=id(P,f|d|h,HKe));for(var Z=A.length;Z--;)nU(P,A[Z]);return P});function QJe(w,A){return ehe(w,F4(Sn(A)))}var JJe=Lm(function(w,A){return w==null?{}:TKe(w,A)});function ehe(w,A){if(w==null)return{};var P=rs(cU(w),function(V){return[V]});return A=Sn(A),qfe(w,P,function(V,Z){return A(V,Z[0])})}function ZJe(w,A,P){A=Qy(A,w);var V=-1,Z=A.length;for(Z||(Z=1,w=n);++V<Z;){var se=w==null?n:w[Up(A[V])];se===n&&(V=Z,se=P),w=jm(se)?se.call(w):se}return w}function eZe(w,A,P){return w==null?w:sD(w,A,P)}function tZe(w,A,P,V){return V=typeof V=="function"?V:n,w==null?w:sD(w,A,P,V)}var the=hde(_a),nhe=hde(ic);function nZe(w,A,P){var V=nr(w),Z=V||Zy(w)||BE(w);if(A=Sn(A,4),P==null){var se=w&&w.constructor;Z?P=V?new se:[]:qs(w)?P=jm(se)?FE(l4(w)):{}:P={}}return(Z?dl:Bp)(w,function(me,Te,Oe){return A(P,me,Te,Oe)}),P}function rZe(w,A){return w==null?!0:nU(w,A)}function iZe(w,A,P){return w==null?w:Xfe(w,A,sU(P))}function sZe(w,A,P,V){return V=typeof V=="function"?V:n,w==null?w:Xfe(w,A,sU(P),V)}function jE(w){return w==null?[]:Lo(w,_a(w))}function oZe(w){return w==null?[]:Lo(w,ic(w))}function aZe(w,A,P){return P===n&&(P=A,A=n),P!==n&&(P=ad(P),P=P===P?P:0),A!==n&&(A=ad(A),A=A===A?A:0),lx(ad(w),A,P)}function uZe(w,A,P){return A=Um(A),P===n?(P=A,A=0):P=Um(P),w=ad(w),pKe(w,A,P)}function lZe(w,A,P){if(P&&typeof P!="boolean"&&pl(w,A,P)&&(A=P=n),P===n&&(typeof A=="boolean"?(P=A,A=n):typeof w=="boolean"&&(P=w,w=n)),w===n&&A===n?(w=0,A=1):(w=Um(w),A===n?(A=w,w=0):A=Um(A)),w>A){var V=w;w=A,A=V}if(P||w%1||A%1){var Z=Afe();return Eu(w+Z*(A-w+Qt("1e-"+((Z+"").length-1))),A)}return Zj(w,A)}var cZe=ME(function(w,A,P){return A=A.toLowerCase(),w+(P?rhe(A):A)});function rhe(w){return AU(Fi(w).toLowerCase())}function ihe(w){return w=Fi(w),w&&w.replace(Ir,eYe).replace(lh,"")}function fZe(w,A,P){w=Fi(w),A=of(A);var V=w.length;P=P===n?V:lx(fr(P),0,V);var Z=P;return P-=A.length,P>=0&&w.slice(P,Z)==A}function dZe(w){return w=Fi(w),w&&cs.test(w)?w.replace(Ds,tYe):w}function hZe(w){return w=Fi(w),w&&ri.test(w)?w.replace(Hs,"\\$&"):w}var pZe=ME(function(w,A,P){return w+(P?"-":"")+A.toLowerCase()}),mZe=ME(function(w,A,P){return w+(P?" ":"")+A.toLowerCase()}),gZe=ade("toLowerCase");function yZe(w,A,P){w=Fi(w),A=fr(A);var V=A?kE(w):0;if(!A||V>=A)return w;var Z=(A-V)/2;return A4(h4(Z),P)+w+A4(d4(Z),P)}function vZe(w,A,P){w=Fi(w),A=fr(A);var V=A?kE(w):0;return A&&V<A?w+A4(A-V,P):w}function bZe(w,A,P){w=Fi(w),A=fr(A);var V=A?kE(w):0;return A&&V<A?A4(A-V,P)+w:w}function xZe(w,A,P){return P||A==null?A=0:A&&(A=+A),SYe(Fi(w).replace(Ni,""),A||0)}function wZe(w,A,P){return(P?pl(w,A,P):A===n)?A=1:A=fr(A),eU(Fi(w),A)}function _Ze(){var w=arguments,A=Fi(w[0]);return w.length<3?A:A.replace(w[1],w[2])}var EZe=ME(function(w,A,P){return w+(P?"_":"")+A.toLowerCase()});function CZe(w,A,P){return P&&typeof P!="number"&&pl(w,A,P)&&(A=P=n),P=P===n?j:P>>>0,P?(w=Fi(w),w&&(typeof A=="string"||A!=null&&!EU(A))&&(A=of(A),!A&&IE(w))?Jy(hh(w),0,P):w.split(A,P)):[]}var TZe=ME(function(w,A,P){return w+(P?" ":"")+AU(A)});function AZe(w,A,P){return w=Fi(w),P=P==null?0:lx(fr(P),0,w.length),A=of(A),w.slice(P,P+A.length)==A}function SZe(w,A,P){var V=ee.templateSettings;P&&pl(w,A,P)&&(A=n),w=Fi(w),A=L4({},A,V,pde);var Z=L4({},A.imports,V.imports,pde),se=_a(Z),me=Lo(Z,se),Te,Oe,ct=0,dt=A.interpolate||Jr,bt="__p += '",Ut=Bj((A.escape||Jr).source+"|"+dt.source+"|"+(dt===Wa?xn:Jr).source+"|"+(A.evaluate||Jr).source+"|$","g"),sn="//# sourceURL="+(Ui.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++CE+"]")+`
`;w.replace(Ut,function(kn,kr,Vr,uf,ml,lf){return Vr||(Vr=uf),bt+=w.slice(ct,lf).replace(ir,nYe),kr&&(Te=!0,bt+=`' +
__e(`+kr+`) +
'`),ml&&(Oe=!0,bt+=`';
`+ml+`;
__p += '`),Vr&&(bt+=`' +
((__t = (`+Vr+`)) == null ? '' : __t) +
'`),ct=lf+kn.length,kn}),bt+=`';
`;var In=Ui.call(A,"variable")&&A.variable;if(!In)bt=`with (obj) {
`+bt+`
}
`;else if(Dt.test(In))throw new Zn(a);bt=(Oe?bt.replace($n,""):bt).replace(ki,"$1").replace(hi,"$1;"),bt="function("+(In||"obj")+`) {
`+(In?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Te?", __e = _.escape":"")+(Oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+bt+`return __p
}`;var yr=ohe(function(){return Ti(se,sn+"return "+bt).apply(n,me)});if(yr.source=bt,_U(yr))throw yr;return yr}function DZe(w){return Fi(w).toLowerCase()}function IZe(w){return Fi(w).toUpperCase()}function kZe(w,A,P){if(w=Fi(w),w&&(P||A===n))return zr(w);if(!w||!(A=of(A)))return w;var V=hh(w),Z=hh(A),se=tc(V,Z),me=sx(V,Z)+1;return Jy(V,se,me).join("")}function RZe(w,A,P){if(w=Fi(w),w&&(P||A===n))return w.slice(0,bfe(w)+1);if(!w||!(A=of(A)))return w;var V=hh(w),Z=sx(V,hh(A))+1;return Jy(V,0,Z).join("")}function NZe(w,A,P){if(w=Fi(w),w&&(P||A===n))return w.replace(Ni,"");if(!w||!(A=of(A)))return w;var V=hh(w),Z=tc(V,hh(A));return Jy(V,Z).join("")}function PZe(w,A){var P=I,V=R;if(qs(A)){var Z="separator"in A?A.separator:Z;P="length"in A?fr(A.length):P,V="omission"in A?of(A.omission):V}w=Fi(w);var se=w.length;if(IE(w)){var me=hh(w);se=me.length}if(P>=se)return w;var Te=P-kE(V);if(Te<1)return V;var Oe=me?Jy(me,0,Te).join(""):w.slice(0,Te);if(Z===n)return Oe+V;if(me&&(Te+=Oe.length-Te),EU(Z)){if(w.slice(Te).search(Z)){var ct,dt=Oe;for(Z.global||(Z=Bj(Z.source,Fi(rr.exec(Z))+"g")),Z.lastIndex=0;ct=Z.exec(dt);)var bt=ct.index;Oe=Oe.slice(0,bt===n?Te:bt)}}else if(w.indexOf(of(Z),Te)!=Te){var Ut=Oe.lastIndexOf(Z);Ut>-1&&(Oe=Oe.slice(0,Ut))}return Oe+V}function OZe(w){return w=Fi(w),w&&Br.test(w)?w.replace(Li,lYe):w}var FZe=ME(function(w,A,P){return w+(P?" ":"")+A.toUpperCase()}),AU=ade("toUpperCase");function she(w,A,P){return w=Fi(w),A=P?n:A,A===n?iYe(w)?dYe(w):DE(w):w.match(A)||[]}var ohe=wr(function(w,A){try{return wu(w,n,A)}catch(P){return _U(P)?P:new Zn(P)}}),$Ze=Lm(function(w,A){return dl(A,function(P){P=Up(P),$m(w,P,xU(w[P],w))}),w});function MZe(w){var A=w==null?0:w.length,P=Sn();return w=A?rs(w,function(V){if(typeof V[1]!="function")throw new nd(o);return[P(V[0]),V[1]]}):[],wr(function(V){for(var Z=-1;++Z<A;){var se=w[Z];if(wu(se[0],this,V))return wu(se[1],this,V)}})}function LZe(w){return lKe(id(w,f))}function SU(w){return function(){return w}}function BZe(w,A){return w==null||w!==w?A:w}var jZe=lde(),UZe=lde(!0);function sc(w){return w}function DU(w){return Bfe(typeof w=="function"?w:id(w,f))}function zZe(w){return Ufe(id(w,f))}function VZe(w,A){return zfe(w,id(A,f))}var HZe=wr(function(w,A){return function(P){return rD(P,w,A)}}),qZe=wr(function(w,A){return function(P){return rD(w,P,A)}});function IU(w,A,P){var V=_a(A),Z=b4(A,V);P==null&&!(qs(A)&&(Z.length||!V.length))&&(P=A,A=w,w=this,Z=b4(A,_a(A)));var se=!(qs(P)&&"chain"in P)||!!P.chain,me=jm(w);return dl(Z,function(Te){var Oe=A[Te];w[Te]=Oe,me&&(w.prototype[Te]=function(){var ct=this.__chain__;if(se||ct){var dt=w(this.__wrapped__),bt=dt.__actions__=nc(this.__actions__);return bt.push({func:Oe,args:arguments,thisArg:w}),dt.__chain__=ct,dt}return Oe.apply(w,fh([this.value()],arguments))})}),w}function WZe(){return wn._===this&&(wn._=vYe),this}function kU(){}function GZe(w){return w=fr(w),wr(function(A){return Vfe(A,w)})}var YZe=aU(rs),KZe=aU(AE),XZe=aU(SE);function ahe(w){return pU(w)?K(Up(w)):AKe(w)}function QZe(w){return function(A){return w==null?n:cx(w,A)}}var JZe=fde(),ZZe=fde(!0);function RU(){return[]}function NU(){return!1}function eet(){return{}}function tet(){return""}function net(){return!0}function ret(w,A){if(w=fr(w),w<1||w>Y)return[];var P=j,V=Eu(w,j);A=Sn(A),w-=j;for(var Z=Ci(V,A);++P<w;)A(P);return Z}function iet(w){return nr(w)?rs(w,Up):af(w)?[w]:nc(Sde(Fi(w)))}function set(w){var A=++gYe;return Fi(w)+A}var oet=T4(function(w,A){return w+A},0),aet=uU("ceil"),uet=T4(function(w,A){return w/A},1),cet=uU("floor");function fet(w){return w&&w.length?v4(w,sc,Gj):n}function det(w,A){return w&&w.length?v4(w,Sn(A,2),Gj):n}function het(w){return z(w,sc)}function pet(w,A){return z(w,Sn(A,2))}function met(w){return w&&w.length?v4(w,sc,Qj):n}function get(w,A){return w&&w.length?v4(w,Sn(A,2),Qj):n}var yet=T4(function(w,A){return w*A},1),vet=uU("round"),bet=T4(function(w,A){return w-A},0);function xet(w){return w&&w.length?Ft(w,sc):0}function wet(w,A){return w&&w.length?Ft(w,Sn(A,2)):0}return ee.after=zQe,ee.ary=Lde,ee.assign=IJe,ee.assignIn=Jde,ee.assignInWith=L4,ee.assignWith=kJe,ee.at=RJe,ee.before=Bde,ee.bind=xU,ee.bindAll=$Ze,ee.bindKey=jde,ee.castArray=eJe,ee.chain=Fde,ee.chunk=lXe,ee.compact=cXe,ee.concat=fXe,ee.cond=MZe,ee.conforms=LZe,ee.constant=SU,ee.countBy=bQe,ee.create=NJe,ee.curry=Ude,ee.curryRight=zde,ee.debounce=Vde,ee.defaults=PJe,ee.defaultsDeep=OJe,ee.defer=VQe,ee.delay=HQe,ee.difference=dXe,ee.differenceBy=hXe,ee.differenceWith=pXe,ee.drop=mXe,ee.dropRight=gXe,ee.dropRightWhile=yXe,ee.dropWhile=vXe,ee.fill=bXe,ee.filter=wQe,ee.flatMap=CQe,ee.flatMapDeep=TQe,ee.flatMapDepth=AQe,ee.flatten=Rde,ee.flattenDeep=xXe,ee.flattenDepth=wXe,ee.flip=qQe,ee.flow=jZe,ee.flowRight=UZe,ee.fromPairs=_Xe,ee.functions=UJe,ee.functionsIn=zJe,ee.groupBy=SQe,ee.initial=CXe,ee.intersection=TXe,ee.intersectionBy=AXe,ee.intersectionWith=SXe,ee.invert=HJe,ee.invertBy=qJe,ee.invokeMap=IQe,ee.iteratee=DU,ee.keyBy=kQe,ee.keys=_a,ee.keysIn=ic,ee.map=N4,ee.mapKeys=GJe,ee.mapValues=YJe,ee.matches=zZe,ee.matchesProperty=VZe,ee.memoize=O4,ee.merge=KJe,ee.mergeWith=Zde,ee.method=HZe,ee.methodOf=qZe,ee.mixin=IU,ee.negate=F4,ee.nthArg=GZe,ee.omit=XJe,ee.omitBy=QJe,ee.once=WQe,ee.orderBy=RQe,ee.over=YZe,ee.overArgs=GQe,ee.overEvery=KZe,ee.overSome=XZe,ee.partial=wU,ee.partialRight=Hde,ee.partition=NQe,ee.pick=JJe,ee.pickBy=ehe,ee.property=ahe,ee.propertyOf=QZe,ee.pull=RXe,ee.pullAll=Pde,ee.pullAllBy=NXe,ee.pullAllWith=PXe,ee.pullAt=OXe,ee.range=JZe,ee.rangeRight=ZZe,ee.rearg=YQe,ee.reject=FQe,ee.remove=FXe,ee.rest=KQe,ee.reverse=vU,ee.sampleSize=MQe,ee.set=eZe,ee.setWith=tZe,ee.shuffle=LQe,ee.slice=$Xe,ee.sortBy=UQe,ee.sortedUniq=VXe,ee.sortedUniqBy=HXe,ee.split=CZe,ee.spread=XQe,ee.tail=qXe,ee.take=WXe,ee.takeRight=GXe,ee.takeRightWhile=YXe,ee.takeWhile=KXe,ee.tap=cQe,ee.throttle=QQe,ee.thru=R4,ee.toArray=Kde,ee.toPairs=the,ee.toPairsIn=nhe,ee.toPath=iet,ee.toPlainObject=Qde,ee.transform=nZe,ee.unary=JQe,ee.union=XXe,ee.unionBy=QXe,ee.unionWith=JXe,ee.uniq=ZXe,ee.uniqBy=eQe,ee.uniqWith=tQe,ee.unset=rZe,ee.unzip=bU,ee.unzipWith=Ode,ee.update=iZe,ee.updateWith=sZe,ee.values=jE,ee.valuesIn=oZe,ee.without=nQe,ee.words=she,ee.wrap=ZQe,ee.xor=rQe,ee.xorBy=iQe,ee.xorWith=sQe,ee.zip=oQe,ee.zipObject=aQe,ee.zipObjectDeep=uQe,ee.zipWith=lQe,ee.entries=the,ee.entriesIn=nhe,ee.extend=Jde,ee.extendWith=L4,IU(ee,ee),ee.add=oet,ee.attempt=ohe,ee.camelCase=cZe,ee.capitalize=rhe,ee.ceil=aet,ee.clamp=aZe,ee.clone=tJe,ee.cloneDeep=rJe,ee.cloneDeepWith=iJe,ee.cloneWith=nJe,ee.conformsTo=sJe,ee.deburr=ihe,ee.defaultTo=BZe,ee.divide=uet,ee.endsWith=fZe,ee.eq=mh,ee.escape=dZe,ee.escapeRegExp=hZe,ee.every=xQe,ee.find=_Qe,ee.findIndex=Ide,ee.findKey=FJe,ee.findLast=EQe,ee.findLastIndex=kde,ee.findLastKey=$Je,ee.floor=cet,ee.forEach=$de,ee.forEachRight=Mde,ee.forIn=MJe,ee.forInRight=LJe,ee.forOwn=BJe,ee.forOwnRight=jJe,ee.get=CU,ee.gt=oJe,ee.gte=aJe,ee.has=VJe,ee.hasIn=TU,ee.head=Nde,ee.identity=sc,ee.includes=DQe,ee.indexOf=EXe,ee.inRange=uZe,ee.invoke=WJe,ee.isArguments=hx,ee.isArray=nr,ee.isArrayBuffer=uJe,ee.isArrayLike=rc,ee.isArrayLikeObject=vo,ee.isBoolean=lJe,ee.isBuffer=Zy,ee.isDate=cJe,ee.isElement=fJe,ee.isEmpty=dJe,ee.isEqual=hJe,ee.isEqualWith=pJe,ee.isError=_U,ee.isFinite=mJe,ee.isFunction=jm,ee.isInteger=qde,ee.isLength=$4,ee.isMap=Wde,ee.isMatch=gJe,ee.isMatchWith=yJe,ee.isNaN=vJe,ee.isNative=bJe,ee.isNil=wJe,ee.isNull=xJe,ee.isNumber=Gde,ee.isObject=qs,ee.isObjectLike=Zs,ee.isPlainObject=lD,ee.isRegExp=EU,ee.isSafeInteger=_Je,ee.isSet=Yde,ee.isString=M4,ee.isSymbol=af,ee.isTypedArray=BE,ee.isUndefined=EJe,ee.isWeakMap=CJe,ee.isWeakSet=TJe,ee.join=DXe,ee.kebabCase=pZe,ee.last=od,ee.lastIndexOf=IXe,ee.lowerCase=mZe,ee.lowerFirst=gZe,ee.lt=AJe,ee.lte=SJe,ee.max=fet,ee.maxBy=det,ee.mean=het,ee.meanBy=pet,ee.min=met,ee.minBy=get,ee.stubArray=RU,ee.stubFalse=NU,ee.stubObject=eet,ee.stubString=tet,ee.stubTrue=net,ee.multiply=yet,ee.nth=kXe,ee.noConflict=WZe,ee.noop=kU,ee.now=P4,ee.pad=yZe,ee.padEnd=vZe,ee.padStart=bZe,ee.parseInt=xZe,ee.random=lZe,ee.reduce=PQe,ee.reduceRight=OQe,ee.repeat=wZe,ee.replace=_Ze,ee.result=ZJe,ee.round=vet,ee.runInContext=Ne,ee.sample=$Qe,ee.size=BQe,ee.snakeCase=EZe,ee.some=jQe,ee.sortedIndex=MXe,ee.sortedIndexBy=LXe,ee.sortedIndexOf=BXe,ee.sortedLastIndex=jXe,ee.sortedLastIndexBy=UXe,ee.sortedLastIndexOf=zXe,ee.startCase=TZe,ee.startsWith=AZe,ee.subtract=bet,ee.sum=xet,ee.sumBy=wet,ee.template=SZe,ee.times=ret,ee.toFinite=Um,ee.toInteger=fr,ee.toLength=Xde,ee.toLower=DZe,ee.toNumber=ad,ee.toSafeInteger=DJe,ee.toString=Fi,ee.toUpper=IZe,ee.trim=kZe,ee.trimEnd=RZe,ee.trimStart=NZe,ee.truncate=PZe,ee.unescape=OZe,ee.uniqueId=set,ee.upperCase=FZe,ee.upperFirst=AU,ee.each=$de,ee.eachRight=Mde,ee.first=Nde,IU(ee,function(){var w={};return Bp(ee,function(A,P){Ui.call(ee.prototype,P)||(w[P]=A)}),w}(),{chain:!1}),ee.VERSION=r,dl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){ee[w].placeholder=ee}),dl(["drop","take"],function(w,A){Or.prototype[w]=function(P){P=P===n?1:ea(fr(P),0);var V=this.__filtered__&&!A?new Or(this):this.clone();return V.__filtered__?V.__takeCount__=Eu(P,V.__takeCount__):V.__views__.push({size:Eu(P,j),type:w+(V.__dir__<0?"Right":"")}),V},Or.prototype[w+"Right"]=function(P){return this.reverse()[w](P).reverse()}}),dl(["filter","map","takeWhile"],function(w,A){var P=A+1,V=P==B||P==U;Or.prototype[w]=function(Z){var se=this.clone();return se.__iteratees__.push({iteratee:Sn(Z,3),type:P}),se.__filtered__=se.__filtered__||V,se}}),dl(["head","last"],function(w,A){var P="take"+(A?"Right":"");Or.prototype[w]=function(){return this[P](1).value()[0]}}),dl(["initial","tail"],function(w,A){var P="drop"+(A?"":"Right");Or.prototype[w]=function(){return this.__filtered__?new Or(this):this[P](1)}}),Or.prototype.compact=function(){return this.filter(sc)},Or.prototype.find=function(w){return this.filter(w).head()},Or.prototype.findLast=function(w){return this.reverse().find(w)},Or.prototype.invokeMap=wr(function(w,A){return typeof w=="function"?new Or(this):this.map(function(P){return rD(P,w,A)})}),Or.prototype.reject=function(w){return this.filter(F4(Sn(w)))},Or.prototype.slice=function(w,A){w=fr(w);var P=this;return P.__filtered__&&(w>0||A<0)?new Or(P):(w<0?P=P.takeRight(-w):w&&(P=P.drop(w)),A!==n&&(A=fr(A),P=A<0?P.dropRight(-A):P.take(A-w)),P)},Or.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},Or.prototype.toArray=function(){return this.take(j)},Bp(Or.prototype,function(w,A){var P=/^(?:filter|find|map|reject)|While$/.test(A),V=/^(?:head|last)$/.test(A),Z=ee[V?"take"+(A=="last"?"Right":""):A],se=V||/^find/.test(A);Z&&(ee.prototype[A]=function(){var me=this.__wrapped__,Te=V?[1]:arguments,Oe=me instanceof Or,ct=Te[0],dt=Oe||nr(me),bt=function(kr){var Vr=Z.apply(ee,fh([kr],Te));return V&&Ut?Vr[0]:Vr};dt&&P&&typeof ct=="function"&&ct.length!=1&&(Oe=dt=!1);var Ut=this.__chain__,sn=!!this.__actions__.length,In=se&&!Ut,yr=Oe&&!sn;if(!se&&dt){me=yr?me:new Or(this);var kn=w.apply(me,Te);return kn.__actions__.push({func:R4,args:[bt],thisArg:n}),new rd(kn,Ut)}return In&&yr?w.apply(this,Te):(kn=this.thru(bt),In?V?kn.value()[0]:kn.value():kn)})}),dl(["pop","push","shift","sort","splice","unshift"],function(w){var A=r4[w],P=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",V=/^(?:pop|shift)$/.test(w);ee.prototype[w]=function(){var Z=arguments;if(V&&!this.__chain__){var se=this.value();return A.apply(nr(se)?se:[],Z)}return this[P](function(me){return A.apply(nr(me)?me:[],Z)})}}),Bp(Or.prototype,function(w,A){var P=ee[A];if(P){var V=P.name+"";Ui.call(OE,V)||(OE[V]=[]),OE[V].push({name:A,func:P})}}),OE[C4(n,y).name]=[{name:"wrapper",func:n}],Or.prototype.clone=OYe,Or.prototype.reverse=FYe,Or.prototype.value=$Ye,ee.prototype.at=fQe,ee.prototype.chain=dQe,ee.prototype.commit=hQe,ee.prototype.next=pQe,ee.prototype.plant=gQe,ee.prototype.reverse=yQe,ee.prototype.toJSON=ee.prototype.valueOf=ee.prototype.value=vQe,ee.prototype.first=ee.prototype.head,XS&&(ee.prototype[XS]=mQe),ee},RE=hYe();ji?((ji.exports=RE)._=RE,Ei._=RE):wn._=RE}).call(on)})(VM,VM.exports);var Mvn=VM.exports;const Lvn="#/definitions/LibraryConfig",Bvn="http://json-schema.org/draft-07/schema#",jvn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},description:{description:"A description of the library.",type:"string"},name:{description:"The name of the library.",type:"string"},reference:{description:"The reference to the paper where the content of the library is based on.",type:"string"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Uvn={$ref:Lvn,$schema:Bvn,definitions:jvn},eqe=new cce;eqe.addSchema(Uvn);const zvn=eqe.getSchema("#/definitions/LibraryConfig");function tqe(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?tqe(n,t):`$${t}.components.${n}`)}}function nqe(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return nqe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=tqe(l,a),l}return r})}}function Vvn(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;mS(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function Hvn(e,t){let n=!1,r;try{r=lj.parse(e),n=zvn(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function qvn(e){const t=await(await fetch(`${jl}libraries/${e}/config.json`)).text();return Hvn(t,e)}async function Wvn(e,t,n){const r=e.map(async s=>{const o=await qvn(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(mS(a)){const u=Mvn.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const rqe=new cce;rqe.addSchema($vn);const I2e=rqe.getSchema("#/definitions/GlobalConfig"),iqe=new cce;iqe.addSchema(Nvn);const k2e=iqe.getSchema("#/definitions/StudyConfig");function Gvn(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function Yvn(e){const t=lj.parse(e),n=I2e(t),r=Gvn(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...I2e.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function sqe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):sqe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Kvn(e,t){const n=[],r=[];Vvn(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;mS(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=ARe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return sqe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function fce(e){let t=!1,n;try{n=lj.parse(e),t=k2e(n)}catch{t=!1}let r=k2e.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await Wvn(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=nqe(n.sequence,o,r);const{errors:a,warnings:u}=Kvn(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function Xvn(e){const t=await(await fetch(`${jl}${e}`)).text();return await fce(t)}async function dce(e,t){const n=t.configsList.find(r=>Pke(r)===e);if(n){const r=t.configs[n];return await Xvn(`${r.path}`)}return null}async function Qvn(e){const t={},n=e.configsList.map(async i=>dce(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function Jvn({globalConfig:e}){const t=W_(),[n,r]=N.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";N.useEffect(()=>{if(t!=="__revisit-widget")return dce(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&fce(m.data.payload).then(async g=>{r(g);const y=await t2e(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:y},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=N.useState([]),[a,u]=N.useState(null),{storageEngine:l}=Oo(),[c]=Tb(),f=N.useMemo(()=>c.get("participantId"),[c]);N.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await t2e(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),v=await fetch("https://api.ipify.org?format=json").catch(S=>""),b=v instanceof Response?await v.json():{ip:""},x={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},_=await l.initializeParticipantSession(t,y,n,x,f||g),C=await l.getModes(t),T=await a_t(t,n,_.sequence,x,_.answers,C,_.participantId);u(T),o([{element:E.jsx(K0n,{}),children:[{path:"/",element:E.jsx(rHe,{to:Lh(0),replace:!0})},{path:"/:index",element:n.errors.length>0?E.jsxs(E.Fragment,{children:[E.jsx(uo,{order:2,mb:8,children:"Error loading config"}),E.jsx(oF,{issues:n.errors,type:"error"})]}):E.jsx(N0n,{})}]}])}p()},[l,n,t,c,f]);const d=Cke(s);let h=null;return i?s.length===0?h=E.jsx(Lf,{visible:!0}):h=d&&a?E.jsx(kRe.Provider,{value:a,children:E.jsx(rwt,{store:a.store,children:d})}):E.jsx(Rv,{}):h=E.jsx(Rv,{}),h}function JF({studyIds:e}){const t=Cp(),{studyId:n}=V0(),r=Cb(),i=e.map(o=>({value:o,label:o})),s=r.pathname.includes("analysis");return E.jsx(Yi.Header,{p:"md",children:E.jsxs(Ef,{mt:-7,align:"center",children:[E.jsx(Ef.Col,{span:6,children:E.jsxs(Jt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[E.jsx(Eb,{w:40,src:`${jl}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),E.jsx(Ku,{w:"md"}),E.jsx(uo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),E.jsx(Ef.Col,{span:6,children:E.jsxs(Jt,{justify:"flex-end",direction:"row",children:[s&&E.jsx(BA,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),E.jsx(kke,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function oqe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=dZ(!1),[a,u]=N.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;Oie(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return E.jsxs(E.Fragment,{children:[E.jsxs(Mi,{style:{gap:n},children:[E.jsx(ws,{label:"Download all participants data as JSON",children:E.jsx(bn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:E.jsx(Ipt,{})})}),E.jsx(ws,{label:"Download all participants data as a tidy CSV",children:E.jsx(bn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:E.jsx(Rke,{})})})]}),i&&a.length>0&&E.jsx(YUt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}var R2e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aqe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Zvn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},hce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(aqe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Zvn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new ebn;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ebn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tbn=function(e){const t=aqe(e);return hce.encodeByteArray(t,!0)},HM=function(e){return tbn(e).replace(/\./g,"")},uqe=function(e){try{return hce.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lqe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nbn=()=>lqe().__FIREBASE_DEFAULTS__,rbn=()=>{if(typeof process>"u"||typeof R2e>"u")return;const e=R2e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ibn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&uqe(e[1]);return t&&JSON.parse(t)},mj=()=>{try{return nbn()||rbn()||ibn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},cqe=e=>{var t,n;return(n=(t=mj())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},sbn=e=>{const t=cqe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},fqe=()=>{var e;return(e=mj())===null||e===void 0?void 0:e.config},dqe=e=>{var t;return(t=mj())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function obn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[HM(JSON.stringify(n)),HM(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function abn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gu())}function ubn(){var e;const t=(e=mj())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lbn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function cbn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fbn(){const e=gu();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function dbn(){return!ubn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pce(){try{return typeof indexedDB=="object"}catch{return!1}}function hbn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pbn="FirebaseError";class Dm extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=pbn,Object.setPrototypeOf(this,Dm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jS.prototype.create)}}class jS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?mbn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Dm(i,a,r)}}function mbn(e,t){return e.replace(gbn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const gbn=/\{\$([^}]+)}/g;function ybn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function LR(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(N2e(s)&&N2e(o)){if(!LR(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function N2e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function vbn(e,t){const n=new bbn(e,t);return n.subscribe.bind(n)}class bbn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xbn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Qq),i.error===void 0&&(i.error=Qq),i.complete===void 0&&(i.complete=Qq);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xbn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Qq(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wbn=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _bn=1e3,Ebn=2,Cbn=4*60*60*1e3,Tbn=.5;function Abn(e,t=_bn,n=Ebn){const r=t*Math.pow(n,e),i=Math.round(Tbn*r*(Math.random()-.5)*2);return Math.min(Cbn,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(e){return e&&e._delegate?e._delegate:e}class om{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sbn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new MR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ibn(t))try{this.getOrInitializeService({instanceIdentifier:Vx})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Vx){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vx){return this.instances.has(t)}getOptions(t=Vx){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dbn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Vx){return this.component?this.component.multipleInstances?t:Vx:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dbn(e){return e===Vx?void 0:e}function Ibn(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kbn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Sbn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Wr||(Wr={}));const Rbn={debug:Wr.DEBUG,verbose:Wr.VERBOSE,info:Wr.INFO,warn:Wr.WARN,error:Wr.ERROR,silent:Wr.SILENT},Nbn=Wr.INFO,Pbn={[Wr.DEBUG]:"log",[Wr.VERBOSE]:"log",[Wr.INFO]:"info",[Wr.WARN]:"warn",[Wr.ERROR]:"error"},Obn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Pbn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class gj{constructor(t){this.name=t,this._logLevel=Nbn,this._logHandler=Obn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Rbn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wr.DEBUG,...t),this._logHandler(this,Wr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wr.VERBOSE,...t),this._logHandler(this,Wr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wr.INFO,...t),this._logHandler(this,Wr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wr.WARN,...t),this._logHandler(this,Wr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wr.ERROR,...t),this._logHandler(this,Wr.ERROR,...t)}}const Fbn=(e,t)=>t.some(n=>e instanceof n);let P2e,O2e;function $bn(){return P2e||(P2e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mbn(){return O2e||(O2e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hqe=new WeakMap,jQ=new WeakMap,pqe=new WeakMap,Jq=new WeakMap,mce=new WeakMap;function Lbn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(wv(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&hqe.set(n,e)}).catch(()=>{}),mce.set(t,e),t}function Bbn(e){if(jQ.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});jQ.set(e,t)}let UQ={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return jQ.get(e);if(t==="objectStoreNames")return e.objectStoreNames||pqe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wv(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function jbn(e){UQ=e(UQ)}function Ubn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Zq(this),t,...n);return pqe.set(r,t.sort?t.sort():[t]),wv(r)}:Mbn().includes(e)?function(...t){return e.apply(Zq(this),t),wv(hqe.get(this))}:function(...t){return wv(e.apply(Zq(this),t))}}function zbn(e){return typeof e=="function"?Ubn(e):(e instanceof IDBTransaction&&Bbn(e),Fbn(e,$bn())?new Proxy(e,UQ):e)}function wv(e){if(e instanceof IDBRequest)return Lbn(e);if(Jq.has(e))return Jq.get(e);const t=zbn(e);return t!==e&&(Jq.set(e,t),mce.set(t,e)),t}const Zq=e=>mce.get(e);function Vbn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=wv(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wv(o.result),u.oldVersion,u.newVersion,wv(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Hbn=["get","getKey","getAll","getAllKeys","count"],qbn=["put","add","delete","clear"],eW=new Map;function F2e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(eW.get(t))return eW.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=qbn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Hbn.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return eW.set(t,s),s}jbn(e=>({...e,get:(t,n,r)=>F2e(t,n)||e.get(t,n,r),has:(t,n)=>!!F2e(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wbn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Gbn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Gbn(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const zQ="@firebase/app",$2e="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=new gj("@firebase/app"),Ybn="@firebase/app-compat",Kbn="@firebase/analytics-compat",Xbn="@firebase/analytics",Qbn="@firebase/app-check-compat",Jbn="@firebase/app-check",Zbn="@firebase/auth",exn="@firebase/auth-compat",txn="@firebase/database",nxn="@firebase/database-compat",rxn="@firebase/functions",ixn="@firebase/functions-compat",sxn="@firebase/installations",oxn="@firebase/installations-compat",axn="@firebase/messaging",uxn="@firebase/messaging-compat",lxn="@firebase/performance",cxn="@firebase/performance-compat",fxn="@firebase/remote-config",dxn="@firebase/remote-config-compat",hxn="@firebase/storage",pxn="@firebase/storage-compat",mxn="@firebase/firestore",gxn="@firebase/vertexai-preview",yxn="@firebase/firestore-compat",vxn="firebase",bxn="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ="[DEFAULT]",xxn={[zQ]:"fire-core",[Ybn]:"fire-core-compat",[Xbn]:"fire-analytics",[Kbn]:"fire-analytics-compat",[Jbn]:"fire-app-check",[Qbn]:"fire-app-check-compat",[Zbn]:"fire-auth",[exn]:"fire-auth-compat",[txn]:"fire-rtdb",[nxn]:"fire-rtdb-compat",[rxn]:"fire-fn",[ixn]:"fire-fn-compat",[sxn]:"fire-iid",[oxn]:"fire-iid-compat",[axn]:"fire-fcm",[uxn]:"fire-fcm-compat",[lxn]:"fire-perf",[cxn]:"fire-perf-compat",[fxn]:"fire-rc",[dxn]:"fire-rc-compat",[hxn]:"fire-gcs",[pxn]:"fire-gcs-compat",[mxn]:"fire-fst",[yxn]:"fire-fst-compat",[gxn]:"fire-vertex","fire-js":"fire-js",[vxn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=new Map,wxn=new Map,HQ=new Map;function M2e(e,t){try{e.container.addComponent(t)}catch(n){C_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function my(e){const t=e.name;if(HQ.has(t))return C_.debug(`There were multiple attempts to register component ${t}.`),!1;HQ.set(t,e);for(const n of qM.values())M2e(n,e);for(const n of wxn.values())M2e(n,e);return!0}function US(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function C0(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _xn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_v=new jS("app","Firebase",_xn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Exn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new om("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw _v.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=bxn;function mqe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:VQ,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw _v.create("bad-app-name",{appName:String(i)});if(n||(n=fqe()),!n)throw _v.create("no-options");const s=qM.get(i);if(s){if(LR(n,s.options)&&LR(r,s.config))return s;throw _v.create("duplicate-app",{appName:i})}const o=new kbn(i);for(const u of HQ.values())o.addComponent(u);const a=new Exn(n,r,o);return qM.set(i,a),a}function gce(e=VQ){const t=qM.get(e);if(!t&&e===VQ&&fqe())return mqe();if(!t)throw _v.create("no-app",{appName:e});return t}function up(e,t,n){var r;let i=(r=xxn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),C_.warn(a.join(" "));return}my(new om(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cxn="firebase-heartbeat-database",Txn=1,BR="firebase-heartbeat-store";let tW=null;function gqe(){return tW||(tW=Vbn(Cxn,Txn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(BR)}catch(n){console.warn(n)}}}}).catch(e=>{throw _v.create("idb-open",{originalErrorMessage:e.message})})),tW}async function Axn(e){try{const n=(await gqe()).transaction(BR),r=await n.objectStore(BR).get(yqe(e));return await n.done,r}catch(t){if(t instanceof Dm)C_.warn(t.message);else{const n=_v.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});C_.warn(n.message)}}}async function L2e(e,t){try{const r=(await gqe()).transaction(BR,"readwrite");await r.objectStore(BR).put(t,yqe(e)),await r.done}catch(n){if(n instanceof Dm)C_.warn(n.message);else{const r=_v.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});C_.warn(r.message)}}}function yqe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sxn=1024,Dxn=30*24*60*60*1e3;class Ixn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rxn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=B2e();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Dxn}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B2e(),{heartbeatsToSend:r,unsentEntries:i}=kxn(this._heartbeatsCache.heartbeats),s=HM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function B2e(){return new Date().toISOString().substring(0,10)}function kxn(e,t=Sxn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),j2e(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),j2e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Rxn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pce()?hbn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Axn(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return L2e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return L2e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function j2e(e){return HM(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nxn(e){my(new om("platform-logger",t=>new Wbn(t),"PRIVATE")),my(new om("heartbeat",t=>new Ixn(t),"PRIVATE")),up(zQ,$2e,e),up(zQ,$2e,"esm2017"),up("fire-js","")}Nxn("");function vqe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pxn=vqe,bqe=new jS("auth","Firebase",vqe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=new gj("@firebase/auth");function Oxn(e,...t){WM.logLevel<=Wr.WARN&&WM.warn(`Auth (${yE}): ${e}`,...t)}function ZF(e,...t){WM.logLevel<=Wr.ERROR&&WM.error(`Auth (${yE}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(e,...t){throw vce(e,...t)}function lp(e,...t){return vce(e,...t)}function yce(e,t,n){const r=Object.assign(Object.assign({},Pxn()),{[t]:n});return new jS("auth","Firebase",r).create(t,{appName:e.name})}function Ev(e){return yce(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fxn(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&am(e,"argument-error"),yce(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vce(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return bqe.create(e,...t)}function qn(e,t,...n){if(!e)throw vce(t,...n)}function Sg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ZF(t),new Error(t)}function gy(e,t){e||Sg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qQ(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function $xn(){return U2e()==="http:"||U2e()==="https:"}function U2e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mxn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($xn()||lbn()||"connection"in navigator)?navigator.onLine:!0}function Lxn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(t,n){this.shortDelay=t,this.longDelay=n,gy(n>t,"Short delay should be less than long delay!"),this.isMobile=abn()||cbn()}get(){return Mxn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bce(e,t){gy(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xqe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bxn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jxn=new FP(3e4,6e4);function yj(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function zS(e,t,n,r,i={}){return wqe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=OP(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),xqe.fetch()(Eqe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function wqe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Bxn),t);try{const i=new Uxn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw EO(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw EO(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw EO(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw EO(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw yce(e,c,l);am(e,c)}}catch(i){if(i instanceof Dm)throw i;am(e,"network-request-failed",{message:String(i)})}}async function _qe(e,t,n,r,i={}){const s=await zS(e,t,n,r,i);return"mfaPendingCredential"in s&&am(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Eqe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?bce(e.config,i):`${e.config.apiScheme}://${i}`}class Uxn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lp(this.auth,"network-request-failed")),jxn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function EO(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=lp(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zxn(e,t){return zS(e,"POST","/v1/accounts:delete",t)}async function Cqe(e,t){return zS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Vxn(e,t=!1){const n=ys(e),r=await n.getIdToken(t),i=xce(r);qn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Qk(nW(i.auth_time)),issuedAtTime:Qk(nW(i.iat)),expirationTime:Qk(nW(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function nW(e){return Number(e)*1e3}function xce(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return ZF("JWT malformed, contained fewer than 3 sections"),null;try{const i=uqe(n);return i?JSON.parse(i):(ZF("Failed to decode base64 JWT payload"),null)}catch(i){return ZF("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function z2e(e){const t=xce(e);return qn(t,"internal-error"),qn(typeof t.exp<"u","internal-error"),qn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Dm&&Hxn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Hxn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qxn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qk(this.lastLoginAt),this.creationTime=Qk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await jR(e,Cqe(n,{idToken:r}));qn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Tqe(s.providerUserInfo):[],a=Gxn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new WQ(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Wxn(e){const t=ys(e);await GM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Gxn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function Tqe(e){return e.map(t=>{var{providerId:n}=t,r=iN(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yxn(e,t){const n=await wqe(e,{},async()=>{const r=OP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=Eqe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xqe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Kxn(e,t){return zS(e,"POST","/v2/accounts:revokeToken",yj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qn(t.idToken,"internal-error"),qn(typeof t.idToken<"u","internal-error"),qn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):z2e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){qn(t.length!==0,"internal-error");const n=z2e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Yxn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new KC;return r&&(qn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(qn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(qn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new KC,this.toJSON())}_performRefresh(){return Sg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(e,t){qn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Dg{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=iN(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qxn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new WQ(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await jR(this,this.stsTokenManager.getToken(this.auth,t));return qn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Vxn(this,t)}reload(){return Wxn(this)}_assign(t){this!==t&&(qn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Dg(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await GM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(C0(this.auth.app))return Promise.reject(Ev(this.auth));const t=await this.getIdToken();return await jR(this,zxn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:x,isAnonymous:_,providerData:C,stsTokenManager:T}=n;qn(b&&T,t,"internal-error");const S=KC.fromJSON(this.name,T);qn(typeof b=="string",t,"internal-error"),o1(f,t.name),o1(d,t.name),qn(typeof x=="boolean",t,"internal-error"),qn(typeof _=="boolean",t,"internal-error"),o1(h,t.name),o1(p,t.name),o1(m,t.name),o1(g,t.name),o1(y,t.name),o1(v,t.name);const k=new Dg({uid:b,auth:t,email:d,emailVerified:x,displayName:f,isAnonymous:_,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return C&&Array.isArray(C)&&(k.providerData=C.map(I=>Object.assign({},I))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(t,n,r=!1){const i=new KC;i.updateFromServerResponse(n);const s=new Dg({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await GM(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];qn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Tqe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new KC;a.updateFromIdToken(r);const u=new Dg({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new WQ(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2e=new Map;function Ig(e){gy(e instanceof Function,"Expected a class definition");let t=V2e.get(e);return t?(gy(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,V2e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aqe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Aqe.type="NONE";const H2e=Aqe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(e,t,n){return`firebase:${e}:${t}:${n}`}class XC{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=e5(this.userKey,i.apiKey,s),this.fullPersistenceKey=e5("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Dg._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new XC(Ig(H2e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Ig(H2e);const o=e5(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Dg._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new XC(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new XC(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Iqe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sqe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Rqe(t))return"Blackberry";if(Nqe(t))return"Webos";if(wce(t))return"Safari";if((t.includes("chrome/")||Dqe(t))&&!t.includes("edge/"))return"Chrome";if(kqe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Sqe(e=gu()){return/firefox\//i.test(e)}function wce(e=gu()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Dqe(e=gu()){return/crios\//i.test(e)}function Iqe(e=gu()){return/iemobile/i.test(e)}function kqe(e=gu()){return/android/i.test(e)}function Rqe(e=gu()){return/blackberry/i.test(e)}function Nqe(e=gu()){return/webos/i.test(e)}function vj(e=gu()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Xxn(e=gu()){var t;return vj(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Qxn(){return fbn()&&document.documentMode===10}function Pqe(e=gu()){return vj(e)||kqe(e)||Nqe(e)||Rqe(e)||/windows phone/i.test(e)||Iqe(e)}function Jxn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oqe(e,t=[]){let n;switch(e){case"Browser":n=q2e(gu());break;case"Worker":n=`${q2e(gu())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${yE}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zxn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ewn(e,t={}){return zS(e,"GET","/v2/passwordPolicy",yj(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const twn=6;class nwn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:twn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rwn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W2e(this),this.idTokenSubscription=new W2e(this),this.beforeStateQueue=new Zxn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bqe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ig(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await XC.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Cqe(this,{idToken:t}),r=await Dg._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(C0(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await GM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Lxn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(C0(this.app))return Promise.reject(Ev(this));const n=t?ys(t):null;return n&&qn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&qn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return C0(this.app)?Promise.reject(Ev(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return C0(this.app)?Promise.reject(Ev(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ig(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ewn(this),n=new nwn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new jS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Kxn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ig(t)||this._popupRedirectResolver;qn(n,this,"argument-error"),this.redirectPersistenceManager=await XC.create(this,[Ig(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Oqe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Oxn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $P(e){return ys(e)}class W2e{constructor(t){this.auth=t,this.observer=null,this.addObserver=vbn(n=>this.observer=n)}get next(){return qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _ce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iwn(e){_ce=e}function swn(e){return _ce.loadJS(e)}function own(){return _ce.gapiScript}function awn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uwn(e,t){const n=US(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(LR(s,t??{}))return i;am(i,"already-initialized")}return n.initialize({options:t})}function lwn(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ig);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function cwn(e,t,n){const r=$P(e);qn(r._canInitEmulator,r,"emulator-config-failed"),qn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=Fqe(t),{host:o,port:a}=fwn(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),dwn()}function Fqe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function fwn(e){const t=Fqe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:G2e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:G2e(o)}}}function G2e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function dwn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $qe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Sg("not implemented")}_getIdTokenResponse(t){return Sg("not implemented")}_linkToIdToken(t,n){return Sg("not implemented")}_getReauthenticationResolver(t){return Sg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(e,t){return _qe(e,"POST","/v1/accounts:signInWithIdp",yj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hwn="http://localhost";class T_ extends $qe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new T_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):am("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=iN(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new T_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return QC(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,QC(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,QC(t,n)}buildRequest(){const t={requestUri:hwn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=OP(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ece{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP extends Ece{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1 extends MP{constructor(){super("facebook.com")}static credential(t){return T_._fromParams({providerId:P1.PROVIDER_ID,signInMethod:P1.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return P1.credentialFromTaggedObject(t)}static credentialFromError(t){return P1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return P1.credential(t.oauthAccessToken)}catch{return null}}}P1.FACEBOOK_SIGN_IN_METHOD="facebook.com";P1.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends MP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return T_._fromParams({providerId:pg.PROVIDER_ID,signInMethod:pg.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return pg.credentialFromTaggedObject(t)}static credentialFromError(t){return pg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return pg.credential(n,r)}catch{return null}}}pg.GOOGLE_SIGN_IN_METHOD="google.com";pg.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends MP{constructor(){super("github.com")}static credential(t){return T_._fromParams({providerId:O1.PROVIDER_ID,signInMethod:O1.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return O1.credentialFromTaggedObject(t)}static credentialFromError(t){return O1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return O1.credential(t.oauthAccessToken)}catch{return null}}}O1.GITHUB_SIGN_IN_METHOD="github.com";O1.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1 extends MP{constructor(){super("twitter.com")}static credential(t,n){return T_._fromParams({providerId:F1.PROVIDER_ID,signInMethod:F1.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return F1.credentialFromTaggedObject(t)}static credentialFromError(t){return F1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return F1.credential(n,r)}catch{return null}}}F1.TWITTER_SIGN_IN_METHOD="twitter.com";F1.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pwn(e,t){return _qe(e,"POST","/v1/accounts:signUp",yj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Dg._fromIdTokenResponse(t,r,i),o=Y2e(r);return new lb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Y2e(r);return new lb({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Y2e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mwn(e){var t;if(C0(e.app))return Promise.reject(Ev(e));const n=$P(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new lb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await pwn(n,{returnSecureToken:!0}),i=await lb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM extends Dm{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,YM.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new YM(t,n,r,i)}}function Mqe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?YM._fromErrorAndOperation(e,s,t,r):s})}async function gwn(e,t,n=!1){const r=await jR(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return lb._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ywn(e,t,n=!1){const{auth:r}=e;if(C0(r.app))return Promise.reject(Ev(r));const i="reauthenticate";try{const s=await jR(e,Mqe(r,i,t,e),n);qn(s.idToken,r,"internal-error");const o=xce(s.idToken);qn(o,r,"internal-error");const{sub:a}=o;return qn(e.uid===a,r,"user-mismatch"),lb._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&am(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vwn(e,t,n=!1){if(C0(e.app))return Promise.reject(Ev(e));const r="signIn",i=await Mqe(e,r,t),s=await lb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function bwn(e,t,n,r){return ys(e).onIdTokenChanged(t,n,r)}function xwn(e,t,n){return ys(e).beforeAuthStateChanged(t,n)}function wwn(e,t,n,r){return ys(e).onAuthStateChanged(t,n,r)}function _wn(e){return ys(e).signOut()}const KM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lqe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(KM,"1"),this.storage.removeItem(KM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ewn(){const e=gu();return wce(e)||vj(e)}const Cwn=1e3,Twn=10;class Bqe extends Lqe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Ewn()&&Jxn(),this.fallbackToPolling=Pqe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Qxn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Twn):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Cwn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Bqe.type="LOCAL";const Awn=Bqe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jqe extends Lqe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}jqe.type="SESSION";const Uqe=jqe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Swn(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new bj(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Swn(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cce(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dwn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=Cce("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(){return window}function Iwn(e){B0().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zqe(){return typeof B0().WorkerGlobalScope<"u"&&typeof B0().importScripts=="function"}async function kwn(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rwn(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Nwn(){return zqe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vqe="firebaseLocalStorageDb",Pwn=1,XM="firebaseLocalStorage",Hqe="fbase_key";class LP{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xj(e,t){return e.transaction([XM],t?"readwrite":"readonly").objectStore(XM)}function Own(){const e=indexedDB.deleteDatabase(Vqe);return new LP(e).toPromise()}function GQ(){const e=indexedDB.open(Vqe,Pwn);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(XM,{keyPath:Hqe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(XM)?t(r):(r.close(),await Own(),t(await GQ()))})})}async function K2e(e,t,n){const r=xj(e,!0).put({[Hqe]:t,value:n});return new LP(r).toPromise()}async function Fwn(e,t){const n=xj(e,!1).get(t),r=await new LP(n).toPromise();return r===void 0?null:r.value}function X2e(e,t){const n=xj(e,!0).delete(t);return new LP(n).toPromise()}const $wn=800,Mwn=3;class qqe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await GQ(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Mwn)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zqe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bj._getInstance(Nwn()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await kwn(),!this.activeServiceWorker)return;this.sender=new Dwn(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Rwn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await GQ();return await K2e(t,KM,"1"),await X2e(t,KM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>K2e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Fwn(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>X2e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=xj(i,!1).getAll();return new LP(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$wn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qqe.type="LOCAL";const Lwn=qqe;new FP(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wqe(e,t){return t?Ig(t):(qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tce extends $qe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return QC(t,this._buildIdpRequest())}_linkToIdToken(t,n){return QC(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return QC(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Bwn(e){return vwn(e.auth,new Tce(e),e.bypassAuthState)}function jwn(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),ywn(n,new Tce(e),e.bypassAuthState)}async function Uwn(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),gwn(n,new Tce(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gqe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Bwn;case"linkViaPopup":case"linkViaRedirect":return Uwn;case"reauthViaPopup":case"reauthViaRedirect":return jwn;default:am(this.auth,"internal-error")}}resolve(t){gy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){gy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zwn=new FP(2e3,1e4);async function Vwn(e,t,n){if(C0(e.app))return Promise.reject(lp(e,"operation-not-supported-in-this-environment"));const r=$P(e);Fxn(e,t,Ece);const i=Wqe(r,n);return new Ew(r,"signInViaPopup",t,i).executeNotNull()}class Ew extends Gqe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ew.currentPopupAction&&Ew.currentPopupAction.cancel(),Ew.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qn(t,this.auth,"internal-error"),t}async onExecution(){gy(this.filter.length===1,"Popup operations only handle one event");const t=Cce();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(lp(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(lp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ew.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lp(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,zwn.get())};t()}}Ew.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hwn="pendingRedirect",t5=new Map;class qwn extends Gqe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=t5.get(this.auth._key());if(!t){try{const r=await Wwn(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}t5.set(this.auth._key(),t)}return this.bypassAuthState||t5.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Wwn(e,t){const n=Kwn(t),r=Ywn(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Gwn(e,t){t5.set(e._key(),t)}function Ywn(e){return Ig(e._redirectPersistence)}function Kwn(e){return e5(Hwn,e.config.apiKey,e.name)}async function Xwn(e,t,n=!1){if(C0(e.app))return Promise.reject(Ev(e));const r=$P(e),i=Wqe(r,t),o=await new qwn(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qwn=10*60*1e3;class Jwn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Zwn(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Yqe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(lp(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Qwn&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q2e(t))}saveEventToCache(t){this.cachedEventUids.add(Q2e(t)),this.lastProcessedEventTime=Date.now()}}function Q2e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Yqe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Zwn(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yqe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_n(e,t={}){return zS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_n=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n_n=/^https?/;async function r_n(e){if(e.config.emulator)return;const{authorizedDomains:t}=await e_n(e);for(const n of t)try{if(i_n(n))return}catch{}am(e,"unauthorized-domain")}function i_n(e){const t=qQ(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!n_n.test(n))return!1;if(t_n.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_n=new FP(3e4,6e4);function J2e(){const e=B0().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function o_n(e){return new Promise((t,n)=>{var r,i,s;function o(){J2e(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{J2e(),n(lp(e,"network-request-failed"))},timeout:s_n.get()})}if(!((i=(r=B0().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=B0().gapi)===null||s===void 0)&&s.load)o();else{const a=awn("iframefcb");return B0()[a]=()=>{gapi.load?o():n(lp(e,"network-request-failed"))},swn(`${own()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw n5=null,t})}let n5=null;function a_n(e){return n5=n5||o_n(e),n5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_n=new FP(5e3,15e3),l_n="__/auth/iframe",c_n="emulator/auth/iframe",f_n={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d_n=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h_n(e){const t=e.config;qn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?bce(t,c_n):`https://${e.config.authDomain}/${l_n}`,r={apiKey:t.apiKey,appName:e.name,v:yE},i=d_n.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${OP(r).slice(1)}`}async function p_n(e){const t=await a_n(e),n=B0().gapi;return qn(n,e,"internal-error"),t.open({where:document.body,url:h_n(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f_n,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=lp(e,"network-request-failed"),a=B0().setTimeout(()=>{s(o)},u_n.get());function u(){B0().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_n={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g_n=500,y_n=600,v_n="_blank",b_n="http://localhost";class Z2e{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x_n(e,t,n,r=g_n,i=y_n){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},m_n),{width:r.toString(),height:i.toString(),top:s,left:o}),l=gu().toLowerCase();n&&(a=Dqe(l)?v_n:n),Sqe(l)&&(t=t||b_n,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Xxn(l)&&a!=="_self")return w_n(t||"",a),new Z2e(null);const f=window.open(t||"",a,c);qn(f,e,"popup-blocked");try{f.focus()}catch{}return new Z2e(f)}function w_n(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __n="__/auth/handler",E_n="emulator/auth/handler",C_n=encodeURIComponent("fac");async function eCe(e,t,n,r,i,s){qn(e.config.authDomain,e,"auth-domain-config-required"),qn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:yE,eventId:i};if(t instanceof Ece){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ybn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof MP){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${C_n}=${encodeURIComponent(u)}`:"";return`${T_n(e)}?${OP(a).slice(1)}${l}`}function T_n({config:e}){return e.emulator?bce(e,E_n):`https://${e.authDomain}/${__n}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW="webStorageSupport";class A_n{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uqe,this._completeRedirectFn=Xwn,this._overrideRedirectResult=Gwn}async _openPopup(t,n,r,i){var s;gy((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await eCe(t,n,r,qQ(),i);return x_n(t,o,Cce())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await eCe(t,n,r,qQ(),i);return Iwn(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(gy(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await p_n(t),r=new Jwn(t);return n.register("authEvent",i=>(qn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(rW,{type:rW},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[rW];o!==void 0&&n(!!o),am(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r_n(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Pqe()||wce()||vj()}}const Kqe=A_n;var tCe="@firebase/auth",nCe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_n{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_n(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I_n(e){my(new om("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;qn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oqe(e)},l=new rwn(r,i,s,u);return lwn(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),my(new om("auth-internal",t=>{const n=$P(t.getProvider("auth").getImmediate());return(r=>new S_n(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),up(tCe,nCe,D_n(e)),up(tCe,nCe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_n=5*60,R_n=dqe("authIdTokenMaxAge")||k_n;let rCe=null;const N_n=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>R_n)return;const i=n==null?void 0:n.token;rCe!==i&&(rCe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function QM(e=gce()){const t=US(e,"auth");if(t.isInitialized())return t.getImmediate();const n=uwn(e,{popupRedirectResolver:Kqe,persistence:[Lwn,Awn,Uqe]}),r=dqe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=N_n(s.toString());xwn(n,o,()=>o(n.currentUser)),bwn(n,a=>o(a))}}const i=cqe("auth");return i&&cwn(n,`http://${i}`),n}function P_n(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}iwn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=lp("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",P_n().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I_n("Browser");var O_n="firebase",F_n="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */up(O_n,F_n,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xqe="firebasestorage.googleapis.com",Qqe="storageBucket",$_n=2*60*1e3,M_n=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Dm{constructor(t,n,r=0){super(iW(t),`Firebase Storage: ${n} (${iW(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yo.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return iW(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mo;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mo||(mo={}));function iW(e){return"storage/"+e}function Ace(){const e="An unknown error occurred, please check the error payload for server response.";return new yo(mo.UNKNOWN,e)}function L_n(e){return new yo(mo.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function B_n(e){return new yo(mo.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function j_n(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yo(mo.UNAUTHENTICATED,e)}function U_n(){return new yo(mo.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function z_n(e){return new yo(mo.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function V_n(){return new yo(mo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function H_n(){return new yo(mo.CANCELED,"User canceled the upload/download.")}function q_n(e){return new yo(mo.INVALID_URL,"Invalid URL '"+e+"'.")}function W_n(e){return new yo(mo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function G_n(){return new yo(mo.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qqe+"' property when initializing the app?")}function Y_n(){return new yo(mo.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function K_n(){return new yo(mo.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function X_n(e){return new yo(mo.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function YQ(e){return new yo(mo.INVALID_ARGUMENT,e)}function Jqe(){return new yo(mo.APP_DELETED,"The Firebase app was deleted.")}function Q_n(e){return new yo(mo.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jk(e,t){return new yo(mo.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function sI(e){throw new yo(mo.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Nl.makeFromUrl(t,n)}catch{return new Nl(t,"")}if(r.path==="")return r;throw W_n(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(x){x.path_=decodeURIComponent(x.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===Xqe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let x=0;x<b.length;x++){const _=b[x],C=_.regex.exec(t);if(C){const T=C[_.indices.bucket];let S=C[_.indices.path];S||(S=""),r=new Nl(T,S),_.postModify(r);break}}if(r==null)throw q_n(t);return r}}class J_n{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_n(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function eEn(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tEn(e){return e!==void 0}function nEn(e){return typeof e=="object"&&!Array.isArray(e)}function Sce(e){return typeof e=="string"||e instanceof String}function iCe(e){return Dce()&&e instanceof Blob}function Dce(){return typeof Blob<"u"}function KQ(e,t,n,r){if(r<t)throw YQ(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw YQ(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Zqe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lw;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Lw||(Lw={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rEn(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iEn{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new CO(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Lw.NO_ERROR,u=s.getStatus();if(!a||rEn(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Lw.ABORT;r(!1,new CO(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new CO(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());tEn(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=Ace();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Jqe():H_n();o(u)}else{const u=V_n();o(u)}};this.canceled_?n(!1,new CO(!1,null,!0)):this.backoffId_=Z_n(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&eEn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class CO{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function sEn(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function oEn(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function aEn(e,t){t&&(e["X-Firebase-GMPID"]=t)}function uEn(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function lEn(e,t,n,r,i,s,o=!0){const a=Zqe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return aEn(l,t),sEn(l,n),oEn(l,s),uEn(l,r),new iEn(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cEn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fEn(...e){const t=cEn();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(Dce())return new Blob(e);throw new yo(mo.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function dEn(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hEn(e){if(typeof atob>"u")throw X_n("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sW{constructor(t,n){this.data=t,this.contentType=n||null}}function pEn(e,t){switch(e){case T0.RAW:return new sW(eWe(t));case T0.BASE64:case T0.BASE64URL:return new sW(tWe(e,t));case T0.DATA_URL:return new sW(gEn(t),yEn(t))}throw Ace()}function eWe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function mEn(e){let t;try{t=decodeURIComponent(e)}catch{throw Jk(T0.DATA_URL,"Malformed data URL.")}return eWe(t)}function tWe(e,t){switch(e){case T0.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Jk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case T0.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Jk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=hEn(t)}catch(i){throw i.message.includes("polyfill")?i:Jk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class nWe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Jk(T0.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=vEn(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function gEn(e){const t=new nWe(e);return t.base64?tWe(T0.BASE64,t.rest):mEn(t.rest)}function yEn(e){return new nWe(e).contentType}function vEn(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t,n){let r=0,i="";iCe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(iCe(this.data_)){const r=this.data_,i=dEn(r,t,n);return i===null?null:new $1(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new $1(r,!0)}}static getBlob(...t){if(Dce()){const n=t.map(r=>r instanceof $1?r.data_:r);return new $1(fEn.apply(null,n))}else{const n=t.map(o=>Sce(o)?pEn(T0.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new $1(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ice(e){let t;try{t=JSON.parse(e)}catch{return null}return nEn(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bEn(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function xEn(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function rWe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wEn(e,t){return t}class xl{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||wEn}}let TO=null;function _En(e){return!Sce(e)||e.length<2?e:rWe(e)}function iWe(){if(TO)return TO;const e=[];e.push(new xl("bucket")),e.push(new xl("generation")),e.push(new xl("metageneration")),e.push(new xl("name","fullPath",!0));function t(s,o){return _En(o)}const n=new xl("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new xl("size");return i.xform=r,e.push(i),e.push(new xl("timeCreated")),e.push(new xl("updated")),e.push(new xl("md5Hash",null,!0)),e.push(new xl("cacheControl",null,!0)),e.push(new xl("contentDisposition",null,!0)),e.push(new xl("contentEncoding",null,!0)),e.push(new xl("contentLanguage",null,!0)),e.push(new xl("contentType",null,!0)),e.push(new xl("metadata","customMetadata",!0)),TO=e,TO}function EEn(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Nl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function CEn(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return EEn(r,e),r}function sWe(e,t,n){const r=Ice(t);return r===null?null:CEn(e,r,n)}function TEn(e,t,n,r){const i=Ice(t);if(i===null||!Sce(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=BP(d,n,r),p=Zqe({alt:"media",token:l});return h+p})[0]}function AEn(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sCe="prefixes",oCe="items";function SEn(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[sCe])for(const i of n[sCe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Nl(t,s));r.prefixes.push(o)}if(n[oCe])for(const i of n[oCe]){const s=e._makeStorageReference(new Nl(t,i.name));r.items.push(s)}return r}function DEn(e,t,n){const r=Ice(n);return r===null?null:SEn(e,t,r)}class wj{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kce(e){if(!e)throw Ace()}function IEn(e,t){function n(r,i){const s=sWe(e,i,t);return kce(s!==null),s}return n}function kEn(e,t){function n(r,i){const s=DEn(e,t,i);return kce(s!==null),s}return n}function REn(e,t){function n(r,i){const s=sWe(e,i,t);return kce(s!==null),TEn(s,i,e.host,e._protocol)}return n}function Rce(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=U_n():i=j_n():n.getStatus()===402?i=B_n(e.bucket):n.getStatus()===403?i=z_n(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function oWe(e){const t=Rce(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=L_n(e.path)),s.serverResponse=i.serverResponse,s}return n}function NEn(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=BP(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new wj(a,u,kEn(e,t.bucket),l);return c.urlParams=s,c.errorHandler=Rce(t),c}function PEn(e,t,n){const r=t.fullServerUrl(),i=BP(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new wj(i,s,REn(e,n),o);return a.errorHandler=oWe(t),a}function OEn(e,t){const n=t.fullServerUrl(),r=BP(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new wj(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=oWe(t),a}function FEn(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function $En(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=FEn(null,t)),r}function MEn(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let x=0;x<2;x++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=$En(t,r,i),c=AEn(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=$1.getBlob(f,r,d);if(h===null)throw Y_n();const p={name:l.fullPath},m=BP(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new wj(m,g,IEn(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=Rce(t),v}class LEn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lw.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lw.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lw.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw sI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class BEn extends LEn{initXhr(){this.xhr_.responseType="text"}}function _j(){return new BEn}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(t,n){this._service=t,n instanceof Nl?this._location=n:this._location=Nl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new A_(t,n)}get root(){const t=new Nl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rWe(this._location.path)}get storage(){return this._service}get parent(){const t=bEn(this._location.path);if(t===null)return null;const n=new Nl(this._location.bucket,t);return new A_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Q_n(t)}}function jEn(e,t,n){e._throwIfRoot("uploadBytes");const r=MEn(e.storage,e._location,iWe(),new $1(t,!0),n);return e.storage.makeRequestWithTokens(r,_j).then(i=>({metadata:i,ref:e}))}function UEn(e){const t={prefixes:[],items:[]};return aWe(e,t).then(()=>t)}async function aWe(e,t,n){const i=await zEn(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await aWe(e,t,i.nextPageToken)}function zEn(e,t){t!=null&&typeof t.maxResults=="number"&&KQ("options.maxResults",1,1e3,t.maxResults);const n=t,r=NEn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,_j)}function VEn(e){e._throwIfRoot("getDownloadURL");const t=PEn(e.storage,e._location,iWe());return e.storage.makeRequestWithTokens(t,_j).then(n=>{if(n===null)throw K_n();return n})}function HEn(e){e._throwIfRoot("deleteObject");const t=OEn(e.storage,e._location);return e.storage.makeRequestWithTokens(t,_j)}function qEn(e,t){const n=xEn(e._location.path,t),r=new Nl(e._location.bucket,n);return new A_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WEn(e){return/^[A-Za-z]+:\/\//.test(e)}function GEn(e,t){return new A_(e,t)}function uWe(e,t){if(e instanceof Nce){const n=e;if(n._bucket==null)throw G_n();const r=new A_(n,n._bucket);return t!=null?uWe(r,t):r}else return t!==void 0?qEn(e,t):e}function YEn(e,t){if(t&&WEn(t)){if(e instanceof Nce)return GEn(e,t);throw YQ("To use ref(service, url), the first argument must be a Storage instance.")}else return uWe(e,t)}function aCe(e,t){const n=t==null?void 0:t[Qqe];return n==null?null:Nl.makeFromBucketSpec(n,e)}function KEn(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:obn(i,e.app.options.projectId))}class Nce{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Xqe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$_n,this._maxUploadRetryTime=M_n,this._requests=new Set,i!=null?this._bucket=Nl.makeFromBucketSpec(i,this._host):this._bucket=aCe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Nl.makeFromBucketSpec(this._url,t):this._bucket=aCe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){KQ("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){KQ("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new A_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new J_n(Jqe());{const o=lEn(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const uCe="@firebase/storage",lCe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lWe="storage";function AO(e,t,n){return e=ys(e),jEn(e,t,n)}function oI(e){return e=ys(e),UEn(e)}function SO(e){return e=ys(e),VEn(e)}function cCe(e){return e=ys(e),HEn(e)}function cf(e,t){return e=ys(e),YEn(e,t)}function fCe(e=gce(),t){e=ys(e);const r=US(e,lWe).getImmediate({identifier:t}),i=sbn("storage");return i&&XEn(r,...i),r}function XEn(e,t,n,r={}){KEn(e,t,n,r)}function QEn(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Nce(n,r,i,t,yE)}function JEn(){my(new om(lWe,QEn,"PUBLIC").setMultipleInstances(!0)),up(uCe,lCe,""),up(uCe,lCe,"esm2017")}JEn();var dCe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bw,cWe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,S){function k(){}k.prototype=S.prototype,T.D=S.prototype,T.prototype=new k,T.prototype.constructor=T,T.C=function(I,R,F){for(var O=Array(arguments.length-2),B=2;B<arguments.length;B++)O[B-2]=arguments[B];return S.prototype[R].apply(I,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,S,k){k||(k=0);var I=Array(16);if(typeof S=="string")for(var R=0;16>R;++R)I[R]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(R=0;16>R;++R)I[R]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=T.g[0],k=T.g[1],R=T.g[2];var F=T.g[3],O=S+(F^k&(R^F))+I[0]+3614090360&4294967295;S=k+(O<<7&4294967295|O>>>25),O=F+(R^S&(k^R))+I[1]+3905402710&4294967295,F=S+(O<<12&4294967295|O>>>20),O=R+(k^F&(S^k))+I[2]+606105819&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(S^R&(F^S))+I[3]+3250441966&4294967295,k=R+(O<<22&4294967295|O>>>10),O=S+(F^k&(R^F))+I[4]+4118548399&4294967295,S=k+(O<<7&4294967295|O>>>25),O=F+(R^S&(k^R))+I[5]+1200080426&4294967295,F=S+(O<<12&4294967295|O>>>20),O=R+(k^F&(S^k))+I[6]+2821735955&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(S^R&(F^S))+I[7]+4249261313&4294967295,k=R+(O<<22&4294967295|O>>>10),O=S+(F^k&(R^F))+I[8]+1770035416&4294967295,S=k+(O<<7&4294967295|O>>>25),O=F+(R^S&(k^R))+I[9]+2336552879&4294967295,F=S+(O<<12&4294967295|O>>>20),O=R+(k^F&(S^k))+I[10]+4294925233&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(S^R&(F^S))+I[11]+2304563134&4294967295,k=R+(O<<22&4294967295|O>>>10),O=S+(F^k&(R^F))+I[12]+1804603682&4294967295,S=k+(O<<7&4294967295|O>>>25),O=F+(R^S&(k^R))+I[13]+4254626195&4294967295,F=S+(O<<12&4294967295|O>>>20),O=R+(k^F&(S^k))+I[14]+2792965006&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(S^R&(F^S))+I[15]+1236535329&4294967295,k=R+(O<<22&4294967295|O>>>10),O=S+(R^F&(k^R))+I[1]+4129170786&4294967295,S=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(S^k))+I[6]+3225465664&4294967295,F=S+(O<<9&4294967295|O>>>23),O=R+(S^k&(F^S))+I[11]+643717713&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^S&(R^F))+I[0]+3921069994&4294967295,k=R+(O<<20&4294967295|O>>>12),O=S+(R^F&(k^R))+I[5]+3593408605&4294967295,S=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(S^k))+I[10]+38016083&4294967295,F=S+(O<<9&4294967295|O>>>23),O=R+(S^k&(F^S))+I[15]+3634488961&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^S&(R^F))+I[4]+3889429448&4294967295,k=R+(O<<20&4294967295|O>>>12),O=S+(R^F&(k^R))+I[9]+568446438&4294967295,S=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(S^k))+I[14]+3275163606&4294967295,F=S+(O<<9&4294967295|O>>>23),O=R+(S^k&(F^S))+I[3]+4107603335&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^S&(R^F))+I[8]+1163531501&4294967295,k=R+(O<<20&4294967295|O>>>12),O=S+(R^F&(k^R))+I[13]+2850285829&4294967295,S=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(S^k))+I[2]+4243563512&4294967295,F=S+(O<<9&4294967295|O>>>23),O=R+(S^k&(F^S))+I[7]+1735328473&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^S&(R^F))+I[12]+2368359562&4294967295,k=R+(O<<20&4294967295|O>>>12),O=S+(k^R^F)+I[5]+4294588738&4294967295,S=k+(O<<4&4294967295|O>>>28),O=F+(S^k^R)+I[8]+2272392833&4294967295,F=S+(O<<11&4294967295|O>>>21),O=R+(F^S^k)+I[11]+1839030562&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^S)+I[14]+4259657740&4294967295,k=R+(O<<23&4294967295|O>>>9),O=S+(k^R^F)+I[1]+2763975236&4294967295,S=k+(O<<4&4294967295|O>>>28),O=F+(S^k^R)+I[4]+1272893353&4294967295,F=S+(O<<11&4294967295|O>>>21),O=R+(F^S^k)+I[7]+4139469664&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^S)+I[10]+3200236656&4294967295,k=R+(O<<23&4294967295|O>>>9),O=S+(k^R^F)+I[13]+681279174&4294967295,S=k+(O<<4&4294967295|O>>>28),O=F+(S^k^R)+I[0]+3936430074&4294967295,F=S+(O<<11&4294967295|O>>>21),O=R+(F^S^k)+I[3]+3572445317&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^S)+I[6]+76029189&4294967295,k=R+(O<<23&4294967295|O>>>9),O=S+(k^R^F)+I[9]+3654602809&4294967295,S=k+(O<<4&4294967295|O>>>28),O=F+(S^k^R)+I[12]+3873151461&4294967295,F=S+(O<<11&4294967295|O>>>21),O=R+(F^S^k)+I[15]+530742520&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^S)+I[2]+3299628645&4294967295,k=R+(O<<23&4294967295|O>>>9),O=S+(R^(k|~F))+I[0]+4096336452&4294967295,S=k+(O<<6&4294967295|O>>>26),O=F+(k^(S|~R))+I[7]+1126891415&4294967295,F=S+(O<<10&4294967295|O>>>22),O=R+(S^(F|~k))+I[14]+2878612391&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~S))+I[5]+4237533241&4294967295,k=R+(O<<21&4294967295|O>>>11),O=S+(R^(k|~F))+I[12]+1700485571&4294967295,S=k+(O<<6&4294967295|O>>>26),O=F+(k^(S|~R))+I[3]+2399980690&4294967295,F=S+(O<<10&4294967295|O>>>22),O=R+(S^(F|~k))+I[10]+4293915773&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~S))+I[1]+2240044497&4294967295,k=R+(O<<21&4294967295|O>>>11),O=S+(R^(k|~F))+I[8]+1873313359&4294967295,S=k+(O<<6&4294967295|O>>>26),O=F+(k^(S|~R))+I[15]+4264355552&4294967295,F=S+(O<<10&4294967295|O>>>22),O=R+(S^(F|~k))+I[6]+2734768916&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~S))+I[13]+1309151649&4294967295,k=R+(O<<21&4294967295|O>>>11),O=S+(R^(k|~F))+I[4]+4149444226&4294967295,S=k+(O<<6&4294967295|O>>>26),O=F+(k^(S|~R))+I[11]+3174756917&4294967295,F=S+(O<<10&4294967295|O>>>22),O=R+(S^(F|~k))+I[2]+718787259&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~S))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+S&4294967295,T.g[1]=T.g[1]+(R+(O<<21&4294967295|O>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+F&4294967295}r.prototype.u=function(T,S){S===void 0&&(S=T.length);for(var k=S-this.blockSize,I=this.B,R=this.h,F=0;F<S;){if(R==0)for(;F<=k;)i(this,T,F),F+=this.blockSize;if(typeof T=="string"){for(;F<S;)if(I[R++]=T.charCodeAt(F++),R==this.blockSize){i(this,I),R=0;break}}else for(;F<S;)if(I[R++]=T[F++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=S},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var S=1;S<T.length-8;++S)T[S]=0;var k=8*this.o;for(S=T.length-8;S<T.length;++S)T[S]=k&255,k/=256;for(this.u(T),T=Array(16),S=k=0;4>S;++S)for(var I=0;32>I;I+=8)T[k++]=this.g[S]>>>I&255;return T};function s(T,S){var k=a;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=S(T)}function o(T,S){this.h=S;for(var k=[],I=!0,R=T.length-1;0<=R;R--){var F=T[R]|0;I&&F==S||(k[R]=F,I=!1)}this.g=k}var a={};function u(T){return-128<=T&&128>T?s(T,function(S){return new o([S|0],0>S?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var S=[],k=1,I=0;T>=k;I++)S[I]=T/k|0,k*=4294967296;return new o(S,0)}function c(T,S){if(T.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T.charAt(0)=="-")return g(c(T.substring(1),S));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=l(Math.pow(S,8)),I=f,R=0;R<T.length;R+=8){var F=Math.min(8,T.length-R),O=parseInt(T.substring(R,R+F),S);8>F?(F=l(Math.pow(S,F)),I=I.j(F).add(l(O))):(I=I.j(k),I=I.add(l(O)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,S=1,k=0;k<this.g.length;k++){var I=this.i(k);T+=(0<=I?I:4294967296+I)*S,S*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var S=l(Math.pow(T,6)),k=this,I="";;){var R=x(k,S).g;k=y(k,R.j(S));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(T);if(k=R,p(k))return F+I;for(;6>F.length;)F="0"+F;I=F+I}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var S=0;S<T.g.length;S++)if(T.g[S]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var S=T.g.length,k=[],I=0;I<S;I++)k[I]=~T.g[I];return new o(k,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var S=Math.max(this.g.length,T.g.length),k=[],I=0,R=0;R<=S;R++){var F=I+(this.i(R)&65535)+(T.i(R)&65535),O=(F>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);I=O>>>16,F&=65535,O&=65535,k[R]=O<<16|F}return new o(k,k[k.length-1]&-2147483648?-1:0)};function y(T,S){return T.add(g(S))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var S=this.g.length+T.g.length,k=[],I=0;I<2*S;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<T.g.length;R++){var F=this.i(I)>>>16,O=this.i(I)&65535,B=T.i(R)>>>16,H=T.i(R)&65535;k[2*I+2*R]+=O*H,v(k,2*I+2*R),k[2*I+2*R+1]+=F*H,v(k,2*I+2*R+1),k[2*I+2*R+1]+=O*B,v(k,2*I+2*R+1),k[2*I+2*R+2]+=F*B,v(k,2*I+2*R+2)}for(I=0;I<S;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=S;I<2*S;I++)k[I]=0;return new o(k,0)};function v(T,S){for(;(T[S]&65535)!=T[S];)T[S+1]+=T[S]>>>16,T[S]&=65535,S++}function b(T,S){this.g=T,this.h=S}function x(T,S){if(p(S))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return S=x(g(T),S),new b(g(S.g),g(S.h));if(m(S))return S=x(T,g(S)),new b(g(S.g),S.h);if(30<T.g.length){if(m(T)||m(S))throw Error("slowDivide_ only works with positive integers.");for(var k=d,I=S;0>=I.l(T);)k=_(k),I=_(I);var R=C(k,1),F=C(I,1);for(I=C(I,2),k=C(k,2);!p(I);){var O=F.add(I);0>=O.l(T)&&(R=R.add(k),F=O),I=C(I,1),k=C(k,1)}return S=y(T,R.j(S)),new b(R,S)}for(R=f;0<=T.l(S);){for(k=Math.max(1,Math.floor(T.m()/S.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),F=l(k),O=F.j(S);m(O)||0<O.l(T);)k-=I,F=l(k),O=F.j(S);p(F)&&(F=d),R=R.add(F),T=y(T,O)}return new b(R,T)}e.A=function(T){return x(this,T).h},e.and=function(T){for(var S=Math.max(this.g.length,T.g.length),k=[],I=0;I<S;I++)k[I]=this.i(I)&T.i(I);return new o(k,this.h&T.h)},e.or=function(T){for(var S=Math.max(this.g.length,T.g.length),k=[],I=0;I<S;I++)k[I]=this.i(I)|T.i(I);return new o(k,this.h|T.h)},e.xor=function(T){for(var S=Math.max(this.g.length,T.g.length),k=[],I=0;I<S;I++)k[I]=this.i(I)^T.i(I);return new o(k,this.h^T.h)};function _(T){for(var S=T.g.length+1,k=[],I=0;I<S;I++)k[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(k,T.h)}function C(T,S){var k=S>>5;S%=32;for(var I=T.g.length-k,R=[],F=0;F<I;F++)R[F]=0<S?T.i(F+k)>>>S|T.i(F+k+1)<<32-S:T.i(F+k);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cWe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Bw=o}).apply(typeof dCe<"u"?dCe:typeof self<"u"?self:typeof window<"u"?window:{});var DO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fWe,dWe,ZI,hWe,r5,XQ,pWe,mWe,gWe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,z,K){return D==Array.prototype||D==Object.prototype||(D[z]=K.value),D};function n(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof DO=="object"&&DO];for(var z=0;z<D.length;++z){var K=D[z];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var r=n(this);function i(D,z){if(z)e:{var K=r;D=D.split(".");for(var ie=0;ie<D.length-1;ie++){var $e=D[ie];if(!($e in K))break e;K=K[$e]}D=D[D.length-1],ie=K[D],z=z(ie),z!=ie&&z!=null&&t(K,D,{configurable:!0,writable:!0,value:z})}}function s(D,z){D instanceof String&&(D+="");var K=0,ie=!1,$e={next:function(){if(!ie&&K<D.length){var Ge=K++;return{value:z(Ge,D[Ge]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return $e[Symbol.iterator]=function(){return $e},$e}i("Array.prototype.values",function(D){return D||function(){return s(this,function(z,K){return K})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(D){var z=typeof D;return z=z!="object"?z:D?Array.isArray(D)?"array":z:"null",z=="array"||z=="object"&&typeof D.length=="number"}function l(D){var z=typeof D;return z=="object"&&D!=null||z=="function"}function c(D,z,K){return D.call.apply(D.bind,arguments)}function f(D,z,K){if(!D)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var $e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($e,ie),D.apply(z,$e)}}return function(){return D.apply(z,arguments)}}function d(D,z,K){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(D,z){var K=Array.prototype.slice.call(arguments,1);return function(){var ie=K.slice();return ie.push.apply(ie,arguments),D.apply(this,ie)}}function p(D,z){function K(){}K.prototype=z.prototype,D.aa=z.prototype,D.prototype=new K,D.prototype.constructor=D,D.Qb=function(ie,$e,Ge){for(var Ft=Array(arguments.length-2),Ci=2;Ci<arguments.length;Ci++)Ft[Ci-2]=arguments[Ci];return z.prototype[$e].apply(ie,Ft)}}function m(D){const z=D.length;if(0<z){const K=Array(z);for(let ie=0;ie<z;ie++)K[ie]=D[ie];return K}return[]}function g(D,z){for(let K=1;K<arguments.length;K++){const ie=arguments[K];if(u(ie)){const $e=D.length||0,Ge=ie.length||0;D.length=$e+Ge;for(let Ft=0;Ft<Ge;Ft++)D[$e+Ft]=ie[Ft]}else D.push(ie)}}class y{constructor(z,K){this.i=z,this.j=K,this.h=0,this.g=null}get(){let z;return 0<this.h?(this.h--,z=this.g,this.g=z.next,z.next=null):z=this.i(),z}}function v(D){return/^[\s\xa0]*$/.test(D)}function b(){var D=a.navigator;return D&&(D=D.userAgent)?D:""}function x(D){return x[" "](D),D}x[" "]=function(){};var _=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function C(D,z,K){for(const ie in D)z.call(K,D[ie],ie,D)}function T(D,z){for(const K in D)z.call(void 0,D[K],K,D)}function S(D){const z={};for(const K in D)z[K]=D[K];return z}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(D,z){let K,ie;for(let $e=1;$e<arguments.length;$e++){ie=arguments[$e];for(K in ie)D[K]=ie[K];for(let Ge=0;Ge<k.length;Ge++)K=k[Ge],Object.prototype.hasOwnProperty.call(ie,K)&&(D[K]=ie[K])}}function R(D){var z=1;D=D.split(":");const K=[];for(;0<z&&D.length;)K.push(D.shift()),z--;return D.length&&K.push(D.join(":")),K}function F(D){a.setTimeout(()=>{throw D},0)}function O(){var D=Q;let z=null;return D.g&&(z=D.g,D.g=D.g.next,D.g||(D.h=null),z.next=null),z}class B{constructor(){this.h=this.g=null}add(z,K){const ie=H.get();ie.set(z,K),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var H=new y(()=>new U,D=>D.reset());class U{constructor(){this.next=this.g=this.h=null}set(z,K){this.h=z,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Y=!1,Q=new B,M=()=>{const D=a.Promise.resolve(void 0);G=()=>{D.then(j)}};var j=()=>{for(var D;D=O();){try{D.h.call(D.g)}catch(K){F(K)}var z=H;z.j(D),100>z.h&&(z.h++,D.next=z.g,z.g=D)}Y=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(D,z){this.type=D,this.g=this.target=z,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var D=!1,z=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const K=()=>{};a.addEventListener("test",K,z),a.removeEventListener("test",K,z)}catch{}return D}();function J(D,z){if(L.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var K=this.type=D.type,ie=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=z,z=D.relatedTarget){if(_){e:{try{x(z.nodeName);var $e=!0;break e}catch{}$e=!1}$e||(z=null)}}else K=="mouseover"?z=D.fromElement:K=="mouseout"&&(z=D.toElement);this.relatedTarget=z,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:re[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&J.aa.h.call(this)}}p(J,L);var re={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Ae(D,z,K,ie,$e){this.listener=D,this.proxy=null,this.src=z,this.type=K,this.capture=!!ie,this.ha=$e,this.key=++pe,this.da=this.fa=!1}function ke(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function it(D){this.src=D,this.g={},this.h=0}it.prototype.add=function(D,z,K,ie,$e){var Ge=D.toString();D=this.g[Ge],D||(D=this.g[Ge]=[],this.h++);var Ft=ut(D,z,ie,$e);return-1<Ft?(z=D[Ft],K||(z.fa=!1)):(z=new Ae(z,this.src,Ge,!!ie,$e),z.fa=K,D.push(z)),z};function Re(D,z){var K=z.type;if(K in D.g){var ie=D.g[K],$e=Array.prototype.indexOf.call(ie,z,void 0),Ge;(Ge=0<=$e)&&Array.prototype.splice.call(ie,$e,1),Ge&&(ke(z),D.g[K].length==0&&(delete D.g[K],D.h--))}}function ut(D,z,K,ie){for(var $e=0;$e<D.length;++$e){var Ge=D[$e];if(!Ge.da&&Ge.listener==z&&Ge.capture==!!K&&Ge.ha==ie)return $e}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),Tt={};function gt(D,z,K,ie,$e){if(Array.isArray(z)){for(var Ge=0;Ge<z.length;Ge++)gt(D,z[Ge],K,ie,$e);return null}return K=we(K),D&&D[ve]?D.K(z,K,l(ie)?!!ie.capture:!1,$e):Ie(D,z,K,!1,ie,$e)}function Ie(D,z,K,ie,$e,Ge){if(!z)throw Error("Invalid event type");var Ft=l($e)?!!$e.capture:!!$e,Ci=X(D);if(Ci||(D[Xe]=Ci=new it(D)),K=Ci.add(z,K,ie,Ft,Ge),K.proxy)return K;if(ie=Ve(),K.proxy=ie,ie.src=D,ie.listener=K,D.addEventListener)q||($e=Ft),$e===void 0&&($e=!1),D.addEventListener(z.toString(),ie,$e);else if(D.attachEvent)D.attachEvent($t(z.toString()),ie);else if(D.addListener&&D.removeListener)D.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return K}function Ve(){function D(K){return z.call(D.src,D.listener,K)}const z=st;return D}function ft(D,z,K,ie,$e){if(Array.isArray(z))for(var Ge=0;Ge<z.length;Ge++)ft(D,z[Ge],K,ie,$e);else ie=l(ie)?!!ie.capture:!!ie,K=we(K),D&&D[ve]?(D=D.i,z=String(z).toString(),z in D.g&&(Ge=D.g[z],K=ut(Ge,K,ie,$e),-1<K&&(ke(Ge[K]),Array.prototype.splice.call(Ge,K,1),Ge.length==0&&(delete D.g[z],D.h--)))):D&&(D=X(D))&&(z=D.g[z.toString()],D=-1,z&&(D=ut(z,K,ie,$e)),(K=-1<D?z[D]:null)&&_t(K))}function _t(D){if(typeof D!="number"&&D&&!D.da){var z=D.src;if(z&&z[ve])Re(z.i,D);else{var K=D.type,ie=D.proxy;z.removeEventListener?z.removeEventListener(K,ie,D.capture):z.detachEvent?z.detachEvent($t(K),ie):z.addListener&&z.removeListener&&z.removeListener(ie),(K=X(z))?(Re(K,D),K.h==0&&(K.src=null,z[Xe]=null)):ke(D)}}}function $t(D){return D in Tt?Tt[D]:Tt[D]="on"+D}function st(D,z){if(D.da)D=!0;else{z=new J(z,this);var K=D.listener,ie=D.ha||D.src;D.fa&&_t(D),D=K.call(ie,z)}return D}function X(D){return D=D[Xe],D instanceof it?D:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(D){return typeof D=="function"?D:(D[de]||(D[de]=function(z){return D.handleEvent(z)}),D[de])}function ae(){W.call(this),this.i=new it(this),this.M=this,this.F=null}p(ae,W),ae.prototype[ve]=!0,ae.prototype.removeEventListener=function(D,z,K,ie){ft(this,D,z,K,ie)};function he(D,z){var K,ie=D.F;if(ie)for(K=[];ie;ie=ie.F)K.push(ie);if(D=D.M,ie=z.type||z,typeof z=="string")z=new L(z,D);else if(z instanceof L)z.target=z.target||D;else{var $e=z;z=new L(ie,D),I(z,$e)}if($e=!0,K)for(var Ge=K.length-1;0<=Ge;Ge--){var Ft=z.g=K[Ge];$e=Ee(Ft,ie,!0,z)&&$e}if(Ft=z.g=D,$e=Ee(Ft,ie,!0,z)&&$e,$e=Ee(Ft,ie,!1,z)&&$e,K)for(Ge=0;Ge<K.length;Ge++)Ft=z.g=K[Ge],$e=Ee(Ft,ie,!1,z)&&$e}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var D=this.i,z;for(z in D.g){for(var K=D.g[z],ie=0;ie<K.length;ie++)ke(K[ie]);delete D.g[z],D.h--}}this.F=null},ae.prototype.K=function(D,z,K,ie){return this.i.add(String(D),z,!1,K,ie)},ae.prototype.L=function(D,z,K,ie){return this.i.add(String(D),z,!0,K,ie)};function Ee(D,z,K,ie){if(z=D.i.g[String(z)],!z)return!0;z=z.concat();for(var $e=!0,Ge=0;Ge<z.length;++Ge){var Ft=z[Ge];if(Ft&&!Ft.da&&Ft.capture==K){var Ci=Ft.listener,Jo=Ft.ha||Ft.src;Ft.fa&&Re(D.i,Ft),$e=Ci.call(Jo,ie)!==!1&&$e}}return $e&&!ie.defaultPrevented}function Me(D,z,K){if(typeof D=="function")K&&(D=d(D,K));else if(D&&typeof D.handleEvent=="function")D=d(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(z)?-1:a.setTimeout(D,z||0)}function Be(D){D.g=Me(()=>{D.g=null,D.i&&(D.i=!1,Be(D))},D.l);const z=D.h;D.h=null,D.m.apply(null,z)}class lt extends W{constructor(z,K){super(),this.m=z,this.l=K,this.h=null,this.i=!1,this.g=null}j(z){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ze(D){W.call(this),this.h=D,this.g={}}p(Ze,W);var Xt=[];function fn(D){C(D.g,function(z,K){this.g.hasOwnProperty(K)&&_t(z)},D),D.g={}}Ze.prototype.N=function(){Ze.aa.N.call(this),fn(this)},Ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=a.JSON.stringify,an=a.JSON.parse,Cn=class{stringify(D){return a.JSON.stringify(D,void 0)}parse(D){return a.JSON.parse(D,void 0)}};function $n(){}$n.prototype.h=null;function ki(D){return D.h||(D.h=D.i())}function hi(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ds(){L.call(this,"d")}p(Ds,L);function Br(){L.call(this,"c")}p(Br,L);var cs={},cl=null;function $o(){return cl=cl||new ae}cs.La="serverreachability";function Wa(D){L.call(this,cs.La,D)}p(Wa,L);function Nr(D){const z=$o();he(z,new Wa(z))}cs.STAT_EVENT="statevent";function Ri(D,z){L.call(this,cs.STAT_EVENT,D),this.stat=z}p(Ri,L);function pi(D){const z=$o();he(z,new Ri(z,D))}cs.Ma="timingevent";function Hs(D,z){L.call(this,cs.Ma,D),this.size=z}p(Hs,L);function ri(D,z){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){D()},z)}function Ni(){this.g=!0}Ni.prototype.xa=function(){this.g=!1};function be(D,z,K,ie,$e,Ge){D.info(function(){if(D.g)if(Ge)for(var Ft="",Ci=Ge.split("&"),Jo=0;Jo<Ci.length;Jo++){var zr=Ci[Jo].split("=");if(1<zr.length){var Oi=zr[0];zr=zr[1];var Lo=Oi.split("_");Ft=2<=Lo.length&&Lo[1]=="type"?Ft+(Oi+"="+zr+"&"):Ft+(Oi+"=redacted&")}}else Ft=null;else Ft=Ge;return"XMLHTTP REQ ("+ie+") [attempt "+$e+"]: "+z+`
`+K+`
`+Ft})}function ce(D,z,K,ie,$e,Ge,Ft){D.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+$e+"]: "+z+`
`+K+`
`+Ge+" "+Ft})}function _e(D,z,K,ie){D.info(function(){return"XMLHTTP TEXT ("+z+"): "+je(D,K)+(ie?" "+ie:"")})}function Ue(D,z){D.info(function(){return"TIMEOUT: "+z})}Ni.prototype.info=function(){};function je(D,z){if(!D.g)return z;if(!z)return null;try{var K=JSON.parse(z);if(K){for(D=0;D<K.length;D++)if(Array.isArray(K[D])){var ie=K[D];if(!(2>ie.length)){var $e=ie[1];if(Array.isArray($e)&&!(1>$e.length)){var Ge=$e[0];if(Ge!="noop"&&Ge!="stop"&&Ge!="close")for(var Ft=1;Ft<$e.length;Ft++)$e[Ft]=""}}}}return Wt(K)}catch{return z}}var Dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xn;function rr(){}p(rr,$n),rr.prototype.g=function(){return new XMLHttpRequest},rr.prototype.i=function(){return{}},xn=new rr;function mr(D,z,K,ie){this.j=D,this.i=z,this.l=K,this.R=ie||1,this.U=new Ze(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jn}function jn(){this.i=null,this.g="",this.h=!1}var Dr={},ii={};function dn(D,z,K){D.L=1,D.v=gr(vt(z)),D.m=K,D.P=!0,Ir(D,null)}function Ir(D,z){D.F=Date.now(),un(D),D.A=vt(D.v);var K=D.A,ie=D.R;Array.isArray(ie)||(ie=[String(ie)]),Jb(K.i,"t",ie),D.C=0,K=D.j.J,D.h=new jn,D.g=e4(D.j,K?z:null,!D.m),0<D.O&&(D.M=new lt(d(D.Y,D,D.g),D.O)),z=D.U,K=D.g,ie=D.ca;var $e="readystatechange";Array.isArray($e)||($e&&(Xt[0]=$e.toString()),$e=Xt);for(var Ge=0;Ge<$e.length;Ge++){var Ft=gt(K,$e[Ge],ie||z.handleEvent,!1,z.h||z);if(!Ft)break;z.g[Ft.key]=Ft}z=D.H?S(D.H):{},D.m?(D.u||(D.u="POST"),z["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,z)):(D.u="GET",D.g.ea(D.A,D.u,null,z)),Nr(),be(D.i,D.u,D.A,D.l,D.R,D.m)}mr.prototype.ca=function(D){D=D.target;const z=this.M;z&&ji(D)==3?z.j():this.Y(D)},mr.prototype.Y=function(D){try{if(D==this.g)e:{const Lo=ji(this.g);var z=this.g.Ba();const td=this.g.Z();if(!(3>Lo)&&(Lo!=3||this.g&&(this.h.h||this.g.oa()||Qo(this.g)))){this.J||Lo!=4||z==7||(z==8||0>=td?Nr(3):Nr(2)),Pi(this);var K=this.g.Z();this.X=K;t:if(Jr(this)){var ie=Qo(this.g);D="";var $e=ie.length,Ge=ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),Is(this);var Ft="";break t}this.h.i=new a.TextDecoder}for(z=0;z<$e;z++)this.h.h=!0,D+=this.h.i.decode(ie[z],{stream:!(Ge&&z==$e-1)});ie.length=0,this.h.g+=D,this.C=0,Ft=this.h.g}else Ft=this.g.oa();if(this.o=K==200,ce(this.i,this.u,this.A,this.l,this.R,Lo,K),this.o){if(this.T&&!this.K){t:{if(this.g){var Ci,Jo=this.g;if((Ci=Jo.g?Jo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ci)){var zr=Ci;break t}}zr=null}if(K=zr)_e(this.i,this.l,K,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,K);else{this.o=!1,this.s=3,pi(12),_i(this),Is(this);break e}}if(this.P){K=!0;let tc;for(;!this.J&&this.C<Ft.length;)if(tc=ir(this,Ft),tc==ii){Lo==4&&(this.s=4,pi(14),K=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}else if(tc==Dr){this.s=4,pi(15),_e(this.i,this.l,Ft,"[Invalid Chunk]"),K=!1;break}else _e(this.i,this.l,tc,null),ns(this,tc);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lo!=4||Ft.length!=0||this.h.h||(this.s=1,pi(16),K=!1),this.o=this.o&&K,!K)_e(this.i,this.l,Ft,"[Invalid Chunked Response]"),_i(this),Is(this);else if(0<Ft.length&&!this.W){this.W=!0;var Oi=this.j;Oi.g==this&&Oi.ba&&!Oi.M&&(Oi.j.info("Great, no buffering proxy detected. Bytes received: "+Ft.length),ed(Oi),Oi.M=!0,pi(11))}}else _e(this.i,this.l,Ft,null),ns(this,Ft);Lo==4&&_i(this),this.o&&!this.J&&(Lo==4?rs(this.j,this):(this.o=!1,un(this)))}else ch(this.g),K==400&&0<Ft.indexOf("Unknown SID")?(this.s=3,pi(12)):(this.s=0,pi(13)),_i(this),Is(this)}}}catch{}finally{}};function Jr(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function ir(D,z){var K=D.C,ie=z.indexOf(`
`,K);return ie==-1?ii:(K=Number(z.substring(K,ie)),isNaN(K)?Dr:(ie+=1,ie+K>z.length?ii:(z=z.slice(ie,ie+K),D.C=ie+K,z)))}mr.prototype.cancel=function(){this.J=!0,_i(this)};function un(D){D.S=Date.now()+D.I,jr(D,D.I)}function jr(D,z){if(D.B!=null)throw Error("WatchDog timer not null");D.B=ri(d(D.ba,D),z)}function Pi(D){D.B&&(a.clearTimeout(D.B),D.B=null)}mr.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(Ue(this.i,this.A),this.L!=2&&(Nr(),pi(17)),_i(this),this.s=2,Is(this)):jr(this,this.S-D)};function Is(D){D.j.G==0||D.J||rs(D.j,D)}function _i(D){Pi(D);var z=D.M;z&&typeof z.ma=="function"&&z.ma(),D.M=null,fn(D.U),D.g&&(z=D.g,D.g=null,z.abort(),z.ma())}function ns(D,z){try{var K=D.j;if(K.G!=0&&(K.g==D||Zf(K.h,D))){if(!D.K&&Zf(K.h,D)&&K.G==3){try{var ie=K.Da.g.parse(z)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var $e=ie;if($e[0]==0){e:if(!K.u){if(K.g)if(K.g.F+3e3<D.F)qy(K),ex(K);else break e;AE(K),pi(18)}}else K.za=$e[1],0<K.za-K.T&&37500>$e[2]&&K.F&&K.v==0&&!K.C&&(K.C=ri(d(K.Za,K),6e3));if(1>=ec(K.h)&&K.ca){try{K.ca()}catch{}K.ca=void 0}}else dh(K,11)}else if((D.K||K.g==D)&&qy(K),!v(z))for($e=K.Da.g.parse(z),z=0;z<$e.length;z++){let zr=$e[z];if(K.T=zr[0],zr=zr[1],K.G==2)if(zr[0]=="c"){K.K=zr[1],K.ia=zr[2];const Oi=zr[3];Oi!=null&&(K.la=Oi,K.j.info("VER="+K.la));const Lo=zr[4];Lo!=null&&(K.Aa=Lo,K.j.info("SVER="+K.Aa));const td=zr[5];td!=null&&typeof td=="number"&&0<td&&(ie=1.5*td,K.L=ie,K.j.info("backChannelRequestTimeoutMs_="+ie)),ie=K;const tc=D.g;if(tc){const sx=tc.g?tc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sx){var Ge=ie.h;Ge.g||sx.indexOf("spdy")==-1&&sx.indexOf("quic")==-1&&sx.indexOf("h2")==-1||(Ge.j=Ge.l,Ge.g=new Set,Ge.h&&(te(Ge,Ge.h),Ge.h=null))}if(ie.D){const KS=tc.g?tc.g.getResponseHeader("X-HTTP-Session-Id"):null;KS&&(ie.ya=KS,nn(ie.I,ie.D,KS))}}K.G=3,K.l&&K.l.ua(),K.ba&&(K.R=Date.now()-D.F,K.j.info("Handshake RTT: "+K.R+"ms")),ie=K;var Ft=D;if(ie.qa=SE(ie,ie.J?ie.ia:null,ie.W),Ft.K){xe(ie.h,Ft);var Ci=Ft,Jo=ie.L;Jo&&(Ci.I=Jo),Ci.B&&(Pi(Ci),un(Ci)),ie.g=Ft}else JP(ie);0<K.i.length&&tx(K)}else zr[0]!="stop"&&zr[0]!="close"||dh(K,7);else K.G==3&&(zr[0]=="stop"||zr[0]=="close"?zr[0]=="stop"?dh(K,7):Nm(K):zr[0]!="noop"&&K.l&&K.l.ta(zr),K.v=0)}}Nr(4)}catch{}}var Ko=class{constructor(D,z){this.g=D,this.map=z}};function Ga(D){this.l=D||10,a.PerformanceNavigationTiming?(D=a.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mo(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function ec(D){return D.h?1:D.g?D.g.size:0}function Zf(D,z){return D.h?D.h==z:D.g?D.g.has(z):!1}function te(D,z){D.g?D.g.add(z):D.h=z}function xe(D,z){D.h&&D.h==z?D.h=null:D.g&&D.g.has(z)&&D.g.delete(z)}Ga.prototype.cancel=function(){if(this.i=ue(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function ue(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let z=D.i;for(const K of D.g.values())z=z.concat(K.D);return z}return m(D.i)}function De(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(u(D)){for(var z=[],K=D.length,ie=0;ie<K;ie++)z.push(D[ie]);return z}z=[],K=0;for(ie in D)z[K++]=D[ie];return z}function Pe(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(u(D)||typeof D=="string"){var z=[];D=D.length;for(var K=0;K<D;K++)z.push(K);return z}z=[],K=0;for(const ie in D)z[K++]=ie;return z}}}function Se(D,z){if(D.forEach&&typeof D.forEach=="function")D.forEach(z,void 0);else if(u(D)||typeof D=="string")Array.prototype.forEach.call(D,z,void 0);else for(var K=Pe(D),ie=De(D),$e=ie.length,Ge=0;Ge<$e;Ge++)z.call(void 0,ie[Ge],K&&K[Ge],D)}var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(D,z){if(D){D=D.split("&");for(var K=0;K<D.length;K++){var ie=D[K].indexOf("="),$e=null;if(0<=ie){var Ge=D[K].substring(0,ie);$e=D[K].substring(ie+1)}else Ge=D[K];z(Ge,$e?decodeURIComponent($e.replace(/\+/g," ")):"")}}}function yt(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof yt){this.h=D.h,It(this,D.j),this.o=D.o,this.g=D.g,zt(this,D.s),this.l=D.l;var z=D.i,K=new fl;K.i=z.i,z.g&&(K.g=new Map(z.g),K.h=z.h),Xn(this,K),this.m=D.m}else D&&(z=String(D).match(Qe))?(this.h=!1,It(this,z[1]||"",!0),this.o=si(z[2]||""),this.g=si(z[3]||"",!0),zt(this,z[4]),this.l=si(z[5]||"",!0),Xn(this,z[6]||"",!0),this.m=si(z[7]||"")):(this.h=!1,this.i=new fl(null,this.h))}yt.prototype.toString=function(){var D=[],z=this.j;z&&D.push(Pr(z,sf,!0),":");var K=this.g;return(K||z=="file")&&(D.push("//"),(z=this.o)&&D.push(Pr(z,sf,!0),"@"),D.push(encodeURIComponent(String(K)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.s,K!=null&&D.push(":",String(K))),(K=this.l)&&(this.g&&K.charAt(0)!="/"&&D.push("/"),D.push(Pr(K,K.charAt(0)=="/"?Vy:oh,!0))),(K=this.i.toString())&&D.push("?",K),(K=this.m)&&D.push("#",Pr(K,Qb)),D.join("")};function vt(D){return new yt(D)}function It(D,z,K){D.j=K?si(z,!0):z,D.j&&(D.j=D.j.replace(/:$/,""))}function zt(D,z){if(z){if(z=Number(z),isNaN(z)||0>z)throw Error("Bad port number "+z);D.s=z}else D.s=null}function Xn(D,z,K){z instanceof fl?(D.i=z,Zb(D.i,D.h)):(K||(z=Pr(z,Lp)),D.i=new fl(z,D.h))}function nn(D,z,K){D.i.set(z,K)}function gr(D){return nn(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function si(D,z){return D?z?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function Pr(D,z,K){return typeof D=="string"?(D=encodeURI(D).replace(z,Xo),K&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function Xo(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var sf=/[#\/\?@]/g,oh=/[#\?:]/g,Vy=/[#\?]/g,Lp=/[#\?@]/g,Qb=/#/g;function fl(D,z){this.h=this.g=null,this.i=D||null,this.j=!!z}function xu(D){D.g||(D.g=new Map,D.h=0,D.i&&pt(D.i,function(z,K){D.add(decodeURIComponent(z.replace(/\+/g," ")),K)}))}e=fl.prototype,e.add=function(D,z){xu(this),this.i=null,D=uh(this,D);var K=this.g.get(D);return K||this.g.set(D,K=[]),K.push(z),this.h+=1,this};function ah(D,z){xu(D),z=uh(D,z),D.g.has(z)&&(D.i=null,D.h-=D.g.get(z).length,D.g.delete(z))}function Hy(D,z){return xu(D),z=uh(D,z),D.g.has(z)}e.forEach=function(D,z){xu(this),this.g.forEach(function(K,ie){K.forEach(function($e){D.call(z,$e,ie,this)},this)},this)},e.na=function(){xu(this);const D=Array.from(this.g.values()),z=Array.from(this.g.keys()),K=[];for(let ie=0;ie<z.length;ie++){const $e=D[ie];for(let Ge=0;Ge<$e.length;Ge++)K.push(z[ie])}return K},e.V=function(D){xu(this);let z=[];if(typeof D=="string")Hy(this,D)&&(z=z.concat(this.g.get(uh(this,D))));else{D=Array.from(this.g.values());for(let K=0;K<D.length;K++)z=z.concat(D[K])}return z},e.set=function(D,z){return xu(this),this.i=null,D=uh(this,D),Hy(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[z]),this.h+=1,this},e.get=function(D,z){return D?(D=this.V(D),0<D.length?String(D[0]):z):z};function Jb(D,z,K){ah(D,z),0<K.length&&(D.i=null,D.g.set(uh(D,z),m(K)),D.h+=K.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],z=Array.from(this.g.keys());for(var K=0;K<z.length;K++){var ie=z[K];const Ge=encodeURIComponent(String(ie)),Ft=this.V(ie);for(ie=0;ie<Ft.length;ie++){var $e=Ge;Ft[ie]!==""&&($e+="="+encodeURIComponent(String(Ft[ie]))),D.push($e)}}return this.i=D.join("&")};function uh(D,z){return z=String(z),D.j&&(z=z.toLowerCase()),z}function Zb(D,z){z&&!D.j&&(xu(D),D.i=null,D.g.forEach(function(K,ie){var $e=ie.toLowerCase();ie!=$e&&(ah(this,ie),Jb(this,$e,K))},D)),D.j=z}function _E(D,z){const K=new Ni;if(a.Image){const ie=new Image;ie.onload=h(wa,K,"TestLoadImage: loaded",!0,z,ie),ie.onerror=h(wa,K,"TestLoadImage: error",!1,z,ie),ie.onabort=h(wa,K,"TestLoadImage: abort",!1,z,ie),ie.ontimeout=h(wa,K,"TestLoadImage: timeout",!1,z,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=D}else z(!1)}function lh(D,z){const K=new Ni,ie=new AbortController,$e=setTimeout(()=>{ie.abort(),wa(K,"TestPingServer: timeout",!1,z)},1e4);fetch(D,{signal:ie.signal}).then(Ge=>{clearTimeout($e),Ge.ok?wa(K,"TestPingServer: ok",!0,z):wa(K,"TestPingServer: server error",!1,z)}).catch(()=>{clearTimeout($e),wa(K,"TestPingServer: error",!1,z)})}function wa(D,z,K,ie,$e){try{$e&&($e.onload=null,$e.onerror=null,$e.onabort=null,$e.ontimeout=null),ie(K)}catch{}}function GS(){this.g=new Cn}function EE(D,z,K){const ie=K||"";try{Se(D,function($e,Ge){let Ft=$e;l($e)&&(Ft=Wt($e)),z.push(ie+Ge+"="+encodeURIComponent(Ft))})}catch($e){throw z.push(ie+"type="+encodeURIComponent("_badmap")),$e}}function Im(D){this.l=D.Ub||null,this.j=D.eb||!1}p(Im,$n),Im.prototype.g=function(){return new km(this.l,this.j)},Im.prototype.i=function(D){return function(){return D}}({});function km(D,z){ae.call(this),this.D=D,this.o=z,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(km,ae),e=km.prototype,e.open=function(D,z){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=z,this.readyState=1,Ur(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const z={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(z.body=D),(this.D||a).fetch(new Request(this.A,z)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,Ur(this)),this.g&&(this.readyState=3,Ur(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;CE(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function CE(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var z=D.value?D.value:new Uint8Array(0);(z=this.v.decode(z,{stream:!D.done}))&&(this.response=this.responseText+=z)}D.done?oi(this):Ur(this),this.readyState==3&&CE(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,oi(this))},e.Qa=function(D){this.g&&(this.response=D,oi(this))},e.ga=function(){this.g&&oi(this)};function oi(D){D.readyState=4,D.l=null,D.j=null,D.v=null,Ur(D)}e.setRequestHeader=function(D,z){this.u.append(D,z)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],z=this.h.entries();for(var K=z.next();!K.done;)K=K.value,D.push(K[0]+": "+K[1]),K=z.next();return D.join(`\r
`)};function Ur(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(km.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function TE(D){let z="";return C(D,function(K,ie){z+=ie,z+=":",z+=K,z+=`\r
`}),z}function fe(D,z,K){e:{for(ie in K){var ie=!1;break e}ie=!0}ie||(K=TE(K),typeof D=="string"?K!=null&&encodeURIComponent(String(K)):nn(D,z,K))}function Ce(D){ae.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ce,ae);var He=/^https?$/i,Qt=["POST","PUT"];e=Ce.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,z,K,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);z=z?z.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xn.g(),this.v=this.o?ki(this.o):ki(xn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(z,String(D),!0),this.B=!1}catch(Ge){xr(this,Ge);return}if(D=K||"",K=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var $e in ie)K.set($e,ie[$e]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Ge of ie.keys())K.set(Ge,ie.get(Ge));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(K.keys()).find(Ge=>Ge.toLowerCase()=="content-type"),$e=a.FormData&&D instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Qt,z,void 0))||ie||$e||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ge,Ft]of K)this.g.setRequestHeader(Ge,Ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ei(this),this.u=!0,this.g.send(D),this.u=!1}catch(Ge){xr(this,Ge)}};function xr(D,z){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=z,D.m=5,ai(D),wn(D)}function ai(D){D.A||(D.A=!0,he(D,"complete"),he(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,he(this,"complete"),he(this,"abort"),wn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),Ce.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bi(this):this.bb())},e.bb=function(){Bi(this)};function Bi(D){if(D.h&&typeof o<"u"&&(!D.v[1]||ji(D)!=4||D.Z()!=2)){if(D.u&&ji(D)==4)Me(D.Ea,0,D);else if(he(D,"readystatechange"),ji(D)==4){D.h=!1;try{const Ft=D.Z();e:switch(Ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var z=!0;break e;default:z=!1}var K;if(!(K=z)){var ie;if(ie=Ft===0){var $e=String(D.D).match(Qe)[1]||null;!$e&&a.self&&a.self.location&&($e=a.self.location.protocol.slice(0,-1)),ie=!He.test($e?$e.toLowerCase():"")}K=ie}if(K)he(D,"complete"),he(D,"success");else{D.m=6;try{var Ge=2<ji(D)?D.g.statusText:""}catch{Ge=""}D.l=Ge+" ["+D.Z()+"]",ai(D)}}finally{wn(D)}}}}function wn(D,z){if(D.g){Ei(D);const K=D.g,ie=D.v[0]?()=>{}:null;D.g=null,D.v=null,z||he(D,"ready");try{K.onreadystatechange=ie}catch{}}}function Ei(D){D.I&&(a.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function ji(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var z=this.g.responseText;return D&&z.indexOf(D)==0&&(z=z.substring(D.length)),an(z)}};function Qo(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function ch(D){const z={};D=(D.g&&2<=ji(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<D.length;ie++){if(v(D[ie]))continue;var K=R(D[ie]);const $e=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const Ge=z[$e]||[];z[$e]=Ge,Ge.push(K)}T(z,function(ie){return ie.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(D,z,K){return K&&K.internalChannelParams&&K.internalChannelParams[D]||z}function Rm(D){this.Aa=0,this.i=[],this.j=new Ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,D),this.cb=Js("retryDelaySeedMs",1e4,D),this.Wa=Js("forwardChannelMaxRetries",2,D),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new Ga(D&&D.concurrentRequestLimit),this.Da=new GS,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Rm.prototype,e.la=8,e.G=1,e.connect=function(D,z,K,ie){pi(0),this.W=D,this.H=z||{},K&&ie!==void 0&&(this.H.OSID=K,this.H.OAID=ie),this.F=this.X,this.I=SE(this,null,this.W),tx(this)};function Nm(D){if(YS(D),D.G==3){var z=D.U++,K=vt(D.I);if(nn(K,"SID",D.K),nn(K,"RID",z),nn(K,"TYPE","terminate"),nx(D,K),z=new mr(D,D.j,z),z.L=2,z.v=gr(vt(K)),K=!1,a.navigator&&a.navigator.sendBeacon)try{K=a.navigator.sendBeacon(z.v.toString(),"")}catch{}!K&&a.Image&&(new Image().src=z.v,K=!0),K||(z.g=e4(z.j,null),z.g.ea(z.v)),z.F=Date.now(),un(z)}ZP(D)}function ex(D){D.g&&(ed(D),D.g.cancel(),D.g=null)}function YS(D){ex(D),D.u&&(a.clearTimeout(D.u),D.u=null),qy(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&a.clearTimeout(D.s),D.s=null)}function tx(D){if(!Mo(D.h)&&!D.s){D.s=!0;var z=D.Ga;G||M(),Y||(G(),Y=!0),Q.add(z,D),D.B=0}}function QP(D,z){return ec(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=z.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=ri(d(D.Ga,D,z),fh(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const $e=new mr(this,this.j,D);let Ge=this.o;if(this.S&&(Ge?(Ge=S(Ge),I(Ge,this.S)):Ge=this.S),this.m!==null||this.O||($e.H=Ge,Ge=null),this.P)e:{for(var z=0,K=0;K<this.i.length;K++){t:{var ie=this.i[K];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(z+=ie,4096<z){z=K;break e}if(z===4096||K===this.i.length-1){z=K+1;break e}}z=1e3}else z=1e3;z=dl(this,$e,z),K=vt(this.I),nn(K,"RID",D),nn(K,"CVER",22),this.D&&nn(K,"X-HTTP-Session-Id",this.D),nx(this,K),Ge&&(this.O?z="headers="+encodeURIComponent(String(TE(Ge)))+"&"+z:this.m&&fe(K,this.m,Ge)),te(this.h,$e),this.Ua&&nn(K,"TYPE","init"),this.P?(nn(K,"$req",z),nn(K,"SID","null"),$e.T=!0,dn($e,K,null)):dn($e,K,z),this.G=2}}else this.G==3&&(D?wu(this,D):this.i.length==0||Mo(this.h)||wu(this))};function wu(D,z){var K;z?K=z.l:K=D.U++;const ie=vt(D.I);nn(ie,"SID",D.K),nn(ie,"RID",K),nn(ie,"AID",D.T),nx(D,ie),D.m&&D.o&&fe(ie,D.m,D.o),K=new mr(D,D.j,K,D.B+1),D.m===null&&(K.H=D.o),z&&(D.i=z.D.concat(D.i)),z=dl(D,K,1e3),K.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),te(D.h,K),dn(K,ie,z)}function nx(D,z){D.H&&C(D.H,function(K,ie){nn(z,ie,K)}),D.l&&Se({},function(K,ie){nn(z,ie,K)})}function dl(D,z,K){K=Math.min(D.i.length,K);var ie=D.l?d(D.l.Na,D.l,D):null;e:{var $e=D.i;let Ge=-1;for(;;){const Ft=["count="+K];Ge==-1?0<K?(Ge=$e[0].g,Ft.push("ofs="+Ge)):Ge=0:Ft.push("ofs="+Ge);let Ci=!0;for(let Jo=0;Jo<K;Jo++){let zr=$e[Jo].g;const Oi=$e[Jo].map;if(zr-=Ge,0>zr)Ge=Math.max(0,$e[Jo].g-100),Ci=!1;else try{EE(Oi,Ft,"req"+zr+"_")}catch{ie&&ie(Oi)}}if(Ci){ie=Ft.join("&");break e}}}return D=D.i.splice(0,K),z.D=D,ie}function JP(D){if(!D.g&&!D.u){D.Y=1;var z=D.Fa;G||M(),Y||(G(),Y=!0),Q.add(z,D),D.v=0}}function AE(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=ri(d(D.Fa,D),fh(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,rx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=ri(d(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pi(10),ex(this),rx(this))};function ed(D){D.A!=null&&(a.clearTimeout(D.A),D.A=null)}function rx(D){D.g=new mr(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var z=vt(D.qa);nn(z,"RID","rpc"),nn(z,"SID",D.K),nn(z,"AID",D.T),nn(z,"CI",D.F?"0":"1"),!D.F&&D.ja&&nn(z,"TO",D.ja),nn(z,"TYPE","xmlhttp"),nx(D,z),D.m&&D.o&&fe(z,D.m,D.o),D.L&&(D.g.I=D.L);var K=D.g;D=D.ia,K.L=1,K.v=gr(vt(z)),K.m=null,K.P=!0,Ir(K,D)}e.Za=function(){this.C!=null&&(this.C=null,ex(this),AE(this),pi(19))};function qy(D){D.C!=null&&(a.clearTimeout(D.C),D.C=null)}function rs(D,z){var K=null;if(D.g==z){qy(D),ed(D),D.g=null;var ie=2}else if(Zf(D.h,z))K=z.D,xe(D.h,z),ie=1;else return;if(D.G!=0){if(z.o)if(ie==1){K=z.m?z.m.length:0,z=Date.now()-z.F;var $e=D.B;ie=$o(),he(ie,new Hs(ie,K)),tx(D)}else JP(D);else if($e=z.s,$e==3||$e==0&&0<z.X||!(ie==1&&QP(D,z)||ie==2&&AE(D)))switch(K&&0<K.length&&(z=D.h,z.i=z.i.concat(K)),$e){case 1:dh(D,5);break;case 4:dh(D,10);break;case 3:dh(D,6);break;default:dh(D,2)}}}function fh(D,z){let K=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(K*=2),K*z}function dh(D,z){if(D.j.info("Error code "+z),z==2){var K=d(D.fb,D),ie=D.Xa;const $e=!ie;ie=new yt(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||It(ie,"https"),gr(ie),$e?_E(ie.toString(),K):lh(ie.toString(),K)}else pi(2);D.G=0,D.l&&D.l.sa(z),ZP(D),YS(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))};function ZP(D){if(D.G=0,D.ka=[],D.l){const z=ue(D.h);(z.length!=0||D.i.length!=0)&&(g(D.ka,z),g(D.ka,D.i),D.h.i.length=0,m(D.i),D.i.length=0),D.l.ra()}}function SE(D,z,K){var ie=K instanceof yt?vt(K):new yt(K);if(ie.g!="")z&&(ie.g=z+"."+ie.g),zt(ie,ie.s);else{var $e=a.location;ie=$e.protocol,z=z?z+"."+$e.hostname:$e.hostname,$e=+$e.port;var Ge=new yt(null);ie&&It(Ge,ie),z&&(Ge.g=z),$e&&zt(Ge,$e),K&&(Ge.l=K),ie=Ge}return K=D.D,z=D.ya,K&&z&&nn(ie,K,z),nn(ie,"VER",D.la),nx(D,ie),ie}function e4(D,z,K){if(z&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return z=D.Ca&&!D.pa?new Ce(new Im({eb:K})):new Ce(D.pa),z.Ha(D.J),z}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function t4(){}e=t4.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function DE(){}DE.prototype.g=function(D,z){return new _u(D,z)};function _u(D,z){ae.call(this),this.g=new Rm(z),this.l=D,this.h=z&&z.messageUrlParams||null,D=z&&z.messageHeaders||null,z&&z.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=z&&z.initMessageHeaders||null,z&&z.messageContentType&&(D?D["X-WebChannel-Content-Type"]=z.messageContentType:D={"X-WebChannel-Content-Type":z.messageContentType}),z&&z.va&&(D?D["X-WebChannel-Client-Profile"]=z.va:D={"X-WebChannel-Client-Profile":z.va}),this.g.S=D,(D=z&&z.Sb)&&!v(D)&&(this.g.m=D),this.v=z&&z.supportsCrossDomainXhr||!1,this.u=z&&z.sendRawJson||!1,(z=z&&z.httpSessionIdParam)&&!v(z)&&(this.g.D=z,D=this.h,D!==null&&z in D&&(D=this.h,z in D&&delete D[z])),this.j=new Wy(this)}p(_u,ae),_u.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_u.prototype.close=function(){Nm(this.g)},_u.prototype.o=function(D){var z=this.g;if(typeof D=="string"){var K={};K.__data__=D,D=K}else this.u&&(K={},K.__data__=Wt(D),D=K);z.i.push(new Ko(z.Ya++,D)),z.G==3&&tx(z)},_u.prototype.N=function(){this.g.l=null,delete this.j,Nm(this.g),delete this.g,_u.aa.N.call(this)};function ix(D){Ds.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var z=D.__sm__;if(z){e:{for(const K in z){D=K;break e}D=void 0}(this.i=D)&&(D=this.i,z=z!==null&&D in z?z[D]:void 0),this.data=z}else this.data=D}p(ix,Ds);function Pm(){Br.call(this),this.status=1}p(Pm,Br);function Wy(D){this.g=D}p(Wy,t4),Wy.prototype.ua=function(){he(this.g,"a")},Wy.prototype.ta=function(D){he(this.g,new ix(D))},Wy.prototype.sa=function(D){he(this.g,new Pm)},Wy.prototype.ra=function(){he(this.g,"b")},DE.prototype.createWebChannel=DE.prototype.g,_u.prototype.send=_u.prototype.o,_u.prototype.open=_u.prototype.m,_u.prototype.close=_u.prototype.close,gWe=function(){return new DE},mWe=function(){return $o()},pWe=cs,XQ={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,r5=Dt,Ht.COMPLETE="complete",hWe=Ht,hi.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",ae.prototype.listen=ae.prototype.K,ZI=hi,dWe=Im,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,fWe=Ce}).apply(typeof DO<"u"?DO:typeof self<"u"?self:typeof window<"u"?window:{});const hCe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}dc.UNAUTHENTICATED=new dc(null),dc.GOOGLE_CREDENTIALS=new dc("google-credentials-uid"),dc.FIRST_PARTY=new dc("first-party-uid"),dc.MOCK_USER=new dc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new gj("@firebase/firestore");function aI(){return S_.logLevel}function tn(e,...t){if(S_.logLevel<=Wr.DEBUG){const n=t.map(Pce);S_.debug(`Firestore (${VS}): ${e}`,...n)}}function yy(e,...t){if(S_.logLevel<=Wr.ERROR){const n=t.map(Pce);S_.error(`Firestore (${VS}): ${e}`,...n)}}function UR(e,...t){if(S_.logLevel<=Wr.WARN){const n=t.map(Pce);S_.warn(`Firestore (${VS}): ${e}`,...n)}}function Pce(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(e="Unexpected state"){const t=`FIRESTORE (${VS}) INTERNAL ASSERTION FAILED: `+e;throw yy(t),new Error(t)}function ms(e,t){e||Wn()}function tr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends Dm{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZEn{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class e2n{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(dc.UNAUTHENTICATED))}shutdown(){}}class t2n{constructor(t){this.t=t,this.currentUser=dc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Hg;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hg,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{tn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(tn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hg)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(tn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ms(typeof r.accessToken=="string"),new ZEn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ms(t===null||typeof t=="string"),new dc(t)}}class n2n{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=dc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class r2n{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new n2n(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(dc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i2n{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s2n{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&tn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,tn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{tn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):tn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ms(typeof n.token=="string"),this.R=n.token,new i2n(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2n(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yWe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=o2n(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Ai(e,t){return e<t?-1:e>t?1:0}function yA(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return pa.fromMillis(Date.now())}static fromDate(t){return pa.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new pa(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ai(this.nanoseconds,t.nanoseconds):Ai(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t){this.timestamp=t}static fromTimestamp(t){return new er(t)}static min(){return new er(new pa(0,0))}static max(){return new er(new pa(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(t,n,r){n===void 0?n=0:n>t.length&&Wn(),r===void 0?r=t.length-n:r>t.length-n&&Wn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return zR.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof zR?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Ts extends zR{construct(t,n,r){return new Ts(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ts(n)}static emptyPath(){return new Ts([])}}const a2n=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class su extends zR{construct(t,n,r){return new su(t,n,r)}static isValidIdentifier(t){return a2n.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),su.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new su(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Vt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Vt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Vt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new su(n)}static emptyPath(){return new su([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.path=t}static fromPath(t){return new En(Ts.fromString(t))}static fromName(t){return new En(Ts.fromString(t).popFirst(5))}static empty(){return new En(Ts.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ts.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ts.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new En(new Ts(t.slice()))}}function u2n(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=er.fromTimestamp(r===1e9?new pa(n+1,0):new pa(n,r));return new cb(i,En.empty(),t)}function l2n(e){return new cb(e.readTime,e.key,-1)}class cb{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new cb(er.min(),En.empty(),-1)}static max(){return new cb(er.max(),En.empty(),-1)}}function c2n(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=En.comparator(e.documentKey,t.documentKey),n!==0?n:Ai(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2n="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d2n{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(e){if(e.code!==ht.FAILED_PRECONDITION||e.message!==f2n)throw e;tn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Et((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Et?n:Et.resolve(n)}catch(n){return Et.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Et.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Et.reject(n)}static resolve(t){return new Et((n,r)=>{n(t)})}static reject(t){return new Et((n,r)=>{r(t)})}static waitFor(t){return new Et((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Et.resolve(!1);for(const r of t)n=n.next(i=>i?Et.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Et((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Et((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function h2n(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function UP(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oce{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Oce.oe=-1;function Ej(e){return e==null}function JM(e){return e===0&&1/e==-1/0}function p2n(e){return typeof e=="number"&&Number.isInteger(e)&&!JM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pCe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vE(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function vWe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,n){this.comparator=t,this.root=n||ru.EMPTY}insert(t,n){return new Qs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ru.BLACK,null,null))}remove(t){return new Qs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ru.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new IO(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new IO(this.root,t,this.comparator,!1)}getReverseIterator(){return new IO(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new IO(this.root,t,this.comparator,!0)}}class IO{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ru{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??ru.RED,this.left=i??ru.EMPTY,this.right=s??ru.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new ru(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ru.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return ru.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ru.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ru.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Wn();const t=this.left.check();if(t!==this.right.check())throw Wn();return t+(this.isRed()?0:1)}}ru.EMPTY=null,ru.RED=!0,ru.BLACK=!1;ru.EMPTY=new class{constructor(){this.size=0}get key(){throw Wn()}get value(){throw Wn()}get color(){throw Wn()}get left(){throw Wn()}get right(){throw Wn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new ru(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){this.comparator=t,this.data=new Qs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new mCe(this.data.getIterator())}getIteratorFrom(t){return new mCe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof hu)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new hu(this.comparator);return n.data=t,n}}class mCe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(t){this.fields=t,t.sort(su.comparator)}static empty(){return new Df([])}unionWith(t){let n=new hu(su.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Df(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return yA(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bWe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bWe("Invalid base64 string: "+s):s}}(t);return new ol(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ol(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ai(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ol.EMPTY_BYTE_STRING=new ol("");const m2n=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fb(e){if(ms(!!e),typeof e=="string"){let t=0;const n=m2n.exec(e);if(ms(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vo(e.seconds),nanos:Vo(e.nanos)}}function Vo(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function D_(e){return typeof e=="string"?ol.fromBase64String(e):ol.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fce(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $ce(e){const t=e.mapValue.fields.__previous_value__;return Fce(t)?$ce(t):t}function VR(e){const t=fb(e.mapValue.fields.__local_write_time__.timestampValue);return new pa(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2n{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class HR{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new HR("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof HR&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function I_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fce(e)?4:y2n(e)?9007199254740991:10:Wn()}function um(e,t){if(e===t)return!0;const n=I_(e);if(n!==I_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return VR(e).isEqual(VR(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=fb(i.timestampValue),a=fb(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return D_(i.bytesValue).isEqual(D_(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Vo(i.geoPointValue.latitude)===Vo(s.geoPointValue.latitude)&&Vo(i.geoPointValue.longitude)===Vo(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Vo(i.integerValue)===Vo(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Vo(i.doubleValue),a=Vo(s.doubleValue);return o===a?JM(o)===JM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return yA(e.arrayValue.values||[],t.arrayValue.values||[],um);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(pCe(o)!==pCe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!um(o[u],a[u])))return!1;return!0}(e,t);default:return Wn()}}function qR(e,t){return(e.values||[]).find(n=>um(n,t))!==void 0}function vA(e,t){if(e===t)return 0;const n=I_(e),r=I_(t);if(n!==r)return Ai(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ai(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Vo(s.integerValue||s.doubleValue),u=Vo(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return gCe(e.timestampValue,t.timestampValue);case 4:return gCe(VR(e),VR(t));case 5:return Ai(e.stringValue,t.stringValue);case 6:return function(s,o){const a=D_(s),u=D_(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Ai(a[l],u[l]);if(c!==0)return c}return Ai(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Ai(Vo(s.latitude),Vo(o.latitude));return a!==0?a:Ai(Vo(s.longitude),Vo(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=vA(a[l],u[l]);if(c)return c}return Ai(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===kO.mapValue&&o===kO.mapValue)return 0;if(s===kO.mapValue)return 1;if(o===kO.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Ai(u[f],c[f]);if(d!==0)return d;const h=vA(a[u[f]],l[c[f]]);if(h!==0)return h}return Ai(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Wn()}}function gCe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ai(e,t);const n=fb(e),r=fb(t),i=Ai(n.seconds,r.seconds);return i!==0?i:Ai(n.nanos,r.nanos)}function bA(e){return QQ(e)}function QQ(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=fb(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return D_(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return En.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=QQ(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${QQ(n.fields[o])}`;return i+"}"}(e.mapValue):Wn()}function yCe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function JQ(e){return!!e&&"integerValue"in e}function Mce(e){return!!e&&"arrayValue"in e}function vCe(e){return!!e&&"nullValue"in e}function bCe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function i5(e){return!!e&&"mapValue"in e}function Zk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vE(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Zk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Zk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function y2n(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t){this.value=t}static empty(){return new Ec({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!i5(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zk(n)}setAll(t){let n=su.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Zk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());i5(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return um(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];i5(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){vE(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Ec(Zk(this.value))}}function xWe(e){const t=[];return vE(e.fields,(n,r)=>{const i=new su([n]);if(i5(r)){const s=xWe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Df(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new zu(t,0,er.min(),er.min(),er.min(),Ec.empty(),0)}static newFoundDocument(t,n,r,i){return new zu(t,1,n,er.min(),r,i,0)}static newNoDocument(t,n){return new zu(t,2,n,er.min(),er.min(),Ec.empty(),0)}static newUnknownDocument(t,n){return new zu(t,3,n,er.min(),er.min(),Ec.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(er.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ec.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ec.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=er.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(t,n){this.position=t,this.inclusive=n}}function xCe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=En.comparator(En.fromName(o.referenceValue),n.key):r=vA(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function wCe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!um(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(t,n="asc"){this.field=t,this.dir=n}}function v2n(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wWe{}class qo extends wWe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new x2n(t,n,r):n==="array-contains"?new E2n(t,r):n==="in"?new C2n(t,r):n==="not-in"?new T2n(t,r):n==="array-contains-any"?new A2n(t,r):new qo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new w2n(t,r):new _2n(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vA(n,this.value)):n!==null&&I_(this.value)===I_(n)&&this.matchesComparison(vA(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Wn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wp extends wWe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new wp(t,n)}matches(t){return _We(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _We(e){return e.op==="and"}function EWe(e){return b2n(e)&&_We(e)}function b2n(e){for(const t of e.filters)if(t instanceof wp)return!1;return!0}function ZQ(e){if(e instanceof qo)return e.field.canonicalString()+e.op.toString()+bA(e.value);if(EWe(e))return e.filters.map(t=>ZQ(t)).join(",");{const t=e.filters.map(n=>ZQ(n)).join(",");return`${e.op}(${t})`}}function CWe(e,t){return e instanceof qo?function(r,i){return i instanceof qo&&r.op===i.op&&r.field.isEqual(i.field)&&um(r.value,i.value)}(e,t):e instanceof wp?function(r,i){return i instanceof wp&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CWe(o,i.filters[a]),!0):!1}(e,t):void Wn()}function TWe(e){return e instanceof qo?function(n){return`${n.field.canonicalString()} ${n.op} ${bA(n.value)}`}(e):e instanceof wp?function(n){return n.op.toString()+" {"+n.getFilters().map(TWe).join(" ,")+"}"}(e):"Filter"}class x2n extends qo{constructor(t,n,r){super(t,n,r),this.key=En.fromName(r.referenceValue)}matches(t){const n=En.comparator(t.key,this.key);return this.matchesComparison(n)}}class w2n extends qo{constructor(t,n){super(t,"in",n),this.keys=AWe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class _2n extends qo{constructor(t,n){super(t,"not-in",n),this.keys=AWe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function AWe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>En.fromName(r.referenceValue))}class E2n extends qo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Mce(n)&&qR(n.arrayValue,this.value)}}class C2n extends qo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&qR(this.value.arrayValue,n)}}class T2n extends qo{constructor(t,n){super(t,"not-in",n)}matches(t){if(qR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!qR(this.value.arrayValue,n)}}class A2n extends qo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Mce(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qR(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2n{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function _Ce(e,t=null,n=[],r=[],i=null,s=null,o=null){return new S2n(e,t,n,r,i,s,o)}function Lce(e){const t=tr(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>ZQ(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ej(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>bA(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>bA(r)).join(",")),t.ue=n}return t.ue}function Bce(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!v2n(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!CWe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!wCe(e.startAt,t.startAt)&&wCe(e.endAt,t.endAt)}function eJ(e){return En.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function D2n(e,t,n,r,i,s,o,a){return new HS(e,t,n,r,i,s,o,a)}function jce(e){return new HS(e)}function ECe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function SWe(e){return e.collectionGroup!==null}function e3(e){const t=tr(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new hu(su.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new WR(s,r))}),n.has(su.keyField().canonicalString())||t.ce.push(new WR(su.keyField(),r))}return t.ce}function j0(e){const t=tr(e);return t.le||(t.le=I2n(t,e3(e))),t.le}function I2n(e,t){if(e.limitType==="F")return _Ce(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new WR(i.field,s)});const n=e.endAt?new ZM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ZM(e.startAt.position,e.startAt.inclusive):null;return _Ce(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function tJ(e,t){const n=e.filters.concat([t]);return new HS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function nJ(e,t,n){return new HS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Cj(e,t){return Bce(j0(e),j0(t))&&e.limitType===t.limitType}function DWe(e){return`${Lce(j0(e))}|lt:${e.limitType}`}function N2(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TWe(i)).join(", ")}]`),Ej(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bA(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bA(i)).join(",")),`Target(${r})`}(j0(e))}; limitType=${e.limitType})`}function Tj(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):En.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of e3(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=xCe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,e3(r),i)||r.endAt&&!function(o,a,u){const l=xCe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,e3(r),i))}(e,t)}function k2n(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function IWe(e){return(t,n)=>{let r=!1;for(const i of e3(e)){const s=R2n(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function R2n(e,t,n){const r=e.field.isKeyField()?En.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?vA(u,l):Wn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){vE(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return vWe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2n=new Qs(En.comparator);function vy(){return N2n}const kWe=new Qs(En.comparator);function ek(...e){let t=kWe;for(const n of e)t=t.insert(n.key,n);return t}function RWe(e){let t=kWe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Cw(){return t3()}function NWe(){return t3()}function t3(){return new qS(e=>e.toString(),(e,t)=>e.isEqual(t))}const P2n=new Qs(En.comparator),O2n=new hu(En.comparator);function Fr(...e){let t=O2n;for(const n of e)t=t.add(n);return t}const F2n=new hu(Ai);function $2n(){return F2n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PWe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:JM(t)?"-0":t}}function OWe(e){return{integerValue:""+e}}function M2n(e,t){return p2n(t)?OWe(t):PWe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this._=void 0}}function L2n(e,t,n){return e instanceof GR?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Fce(s)&&(s=$ce(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof YR?$We(e,t):e instanceof KR?MWe(e,t):function(i,s){const o=FWe(i,s),a=CCe(o)+CCe(i.Pe);return JQ(o)&&JQ(i.Pe)?OWe(a):PWe(i.serializer,a)}(e,t)}function B2n(e,t,n){return e instanceof YR?$We(e,t):e instanceof KR?MWe(e,t):n}function FWe(e,t){return e instanceof eL?function(r){return JQ(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class GR extends Aj{}class YR extends Aj{constructor(t){super(),this.elements=t}}function $We(e,t){const n=LWe(t);for(const r of e.elements)n.some(i=>um(i,r))||n.push(r);return{arrayValue:{values:n}}}class KR extends Aj{constructor(t){super(),this.elements=t}}function MWe(e,t){let n=LWe(t);for(const r of e.elements)n=n.filter(i=>!um(i,r));return{arrayValue:{values:n}}}class eL extends Aj{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function CCe(e){return Vo(e.integerValue||e.doubleValue)}function LWe(e){return Mce(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2n{constructor(t,n){this.field=t,this.transform=n}}function U2n(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof YR&&i instanceof YR||r instanceof KR&&i instanceof KR?yA(r.elements,i.elements,um):r instanceof eL&&i instanceof eL?um(r.Pe,i.Pe):r instanceof GR&&i instanceof GR}(e.transform,t.transform)}class z2n{constructor(t,n){this.version=t,this.transformResults=n}}class Of{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Of}static exists(t){return new Of(void 0,t)}static updateTime(t){return new Of(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function s5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Sj{}function BWe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Uce(e.key,Of.none()):new zP(e.key,e.data,Of.none());{const n=e.data,r=Ec.empty();let i=new hu(su.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xb(e.key,r,new Df(i.toArray()),Of.none())}}function V2n(e,t,n){e instanceof zP?function(i,s,o){const a=i.value.clone(),u=ACe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Xb?function(i,s,o){if(!s5(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ACe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(jWe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function n3(e,t,n,r){return e instanceof zP?function(s,o,a,u){if(!s5(s.precondition,o))return a;const l=s.value.clone(),c=SCe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xb?function(s,o,a,u){if(!s5(s.precondition,o))return a;const l=SCe(s.fieldTransforms,u,o),c=o.data;return c.setAll(jWe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return s5(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function H2n(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=FWe(r.transform,i||null);s!=null&&(n===null&&(n=Ec.empty()),n.set(r.field,s))}return n||null}function TCe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yA(r,i,(s,o)=>U2n(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zP extends Sj{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xb extends Sj{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function jWe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ACe(e,t,n){const r=new Map;ms(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,B2n(o,a,n[i]))}return r}function SCe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,L2n(s,o,t))}return r}class Uce extends Sj{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q2n extends Sj{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2n{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&V2n(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=n3(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=n3(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=NWe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=BWe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(er.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Fr())}isEqual(t){return this.batchId===t.batchId&&yA(this.mutations,t.mutations,(n,r)=>TCe(n,r))&&yA(this.baseMutations,t.baseMutations,(n,r)=>TCe(n,r))}}class zce{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ms(t.mutations.length===r.length);let i=function(){return P2n}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new zce(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2n{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2n{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bo,Zr;function K2n(e){switch(e){default:return Wn();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function UWe(e){if(e===void 0)return yy("GRPC error has no .code"),ht.UNKNOWN;switch(e){case Bo.OK:return ht.OK;case Bo.CANCELLED:return ht.CANCELLED;case Bo.UNKNOWN:return ht.UNKNOWN;case Bo.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Bo.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Bo.INTERNAL:return ht.INTERNAL;case Bo.UNAVAILABLE:return ht.UNAVAILABLE;case Bo.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Bo.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Bo.NOT_FOUND:return ht.NOT_FOUND;case Bo.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Bo.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Bo.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Bo.ABORTED:return ht.ABORTED;case Bo.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Bo.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Bo.DATA_LOSS:return ht.DATA_LOSS;default:return Wn()}}(Zr=Bo||(Bo={}))[Zr.OK=0]="OK",Zr[Zr.CANCELLED=1]="CANCELLED",Zr[Zr.UNKNOWN=2]="UNKNOWN",Zr[Zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zr[Zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zr[Zr.NOT_FOUND=5]="NOT_FOUND",Zr[Zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zr[Zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zr[Zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zr[Zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zr[Zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zr[Zr.ABORTED=10]="ABORTED",Zr[Zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zr[Zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zr[Zr.INTERNAL=13]="INTERNAL",Zr[Zr.UNAVAILABLE=14]="UNAVAILABLE",Zr[Zr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2n(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2n=new Bw([4294967295,4294967295],0);function DCe(e){const t=X2n().encode(e),n=new cWe;return n.update(t),new Uint8Array(n.digest())}function ICe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Bw([n,r],0),new Bw([i,s],0)]}class Vce{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tk(`Invalid padding: ${n}`);if(r<0)throw new tk(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new tk(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new tk(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Bw.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Bw.fromNumber(r)));return i.compare(Q2n)===1&&(i=new Bw([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=DCe(t),[r,i]=ICe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Vce(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=DCe(t),[r,i]=ICe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class tk extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,VP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Dj(er.min(),i,new Qs(Ai),vy(),Fr())}}class VP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new VP(r,n,Fr(),Fr(),Fr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class zWe{constructor(t,n){this.targetId=t,this.me=n}}class VWe{constructor(t,n,r=ol.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class kCe{constructor(){this.fe=0,this.ge=NCe(),this.pe=ol.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Fr(),n=Fr(),r=Fr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Wn()}}),new VP(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=NCe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ms(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class J2n{constructor(t){this.Le=t,this.Be=new Map,this.ke=vy(),this.qe=RCe(),this.Qe=new Qs(Ai)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Wn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(eJ(s))if(r===0){const o=new En(s.path);this.Ue(n,o,zu.newNoDocument(o,er.min()))}else ms(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=D_(r).toUint8Array()}catch(u){if(u instanceof bWe)return UR("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Vce(o,i,s)}catch(u){return UR(u instanceof tk?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&eJ(a.target)){const u=new En(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,zu.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Fr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new Dj(t,n,this.Qe,this.ke,r);return this.ke=vy(),this.qe=RCe(),this.Qe=new Qs(Ai),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new kCe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new hu(Ai),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||tn("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new kCe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function RCe(){return new Qs(En.comparator)}function NCe(){return new Qs(En.comparator)}const Z2n={asc:"ASCENDING",desc:"DESCENDING"},eCn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tCn={and:"AND",or:"OR"};class nCn{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function rJ(e,t){return e.useProto3Json||Ej(t)?t:{value:t}}function tL(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function HWe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rCn(e,t){return tL(e,t.toTimestamp())}function U0(e){return ms(!!e),er.fromTimestamp(function(n){const r=fb(n);return new pa(r.seconds,r.nanos)}(e))}function Hce(e,t){return iJ(e,t).canonicalString()}function iJ(e,t){const n=function(i){return new Ts(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function qWe(e){const t=Ts.fromString(e);return ms(XWe(t)),t}function sJ(e,t){return Hce(e.databaseId,t.path)}function oW(e,t){const n=qWe(t);if(n.get(1)!==e.databaseId.projectId)throw new Vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new En(GWe(n))}function WWe(e,t){return Hce(e.databaseId,t)}function iCn(e){const t=qWe(e);return t.length===4?Ts.emptyPath():GWe(t)}function oJ(e){return new Ts(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function GWe(e){return ms(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function PCe(e,t,n){return{name:sJ(e,t),fields:n.value.mapValue.fields}}function sCn(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Wn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ms(c===void 0||typeof c=="string"),ol.fromBase64String(c||"")):(ms(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ol.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?ht.UNKNOWN:UWe(l.code);return new Vt(c,l.message||"")}(o);n=new VWe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=oW(e,r.document.name),s=U0(r.document.updateTime),o=r.document.createTime?U0(r.document.createTime):er.min(),a=new Ec({mapValue:{fields:r.document.fields}}),u=zu.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new o5(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=oW(e,r.document),s=r.readTime?U0(r.readTime):er.min(),o=zu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new o5([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=oW(e,r.document),s=r.removedTargetIds||[];n=new o5([],s,i,null)}else{if(!("filter"in t))return Wn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Y2n(i,s),a=r.targetId;n=new zWe(a,o)}}return n}function oCn(e,t){let n;if(t instanceof zP)n={update:PCe(e,t.key,t.value)};else if(t instanceof Uce)n={delete:sJ(e,t.key)};else if(t instanceof Xb)n={update:PCe(e,t.key,t.data),updateMask:mCn(t.fieldMask)};else{if(!(t instanceof q2n))return Wn();n={verify:sJ(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof GR)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof YR)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof KR)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof eL)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Wn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:rCn(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Wn()}(e,t.precondition)),n}function aCn(e,t){return e&&e.length>0?(ms(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?U0(i.updateTime):U0(s);return o.isEqual(er.min())&&(o=U0(s)),new z2n(o,i.transformResults||[])}(n,t))):[]}function uCn(e,t){return{documents:[WWe(e,t.path)]}}function lCn(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WWe(e,i);const s=function(l){if(l.length!==0)return KWe(wp.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:P2(d.field),direction:dCn(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=rJ(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function cCn(e){let t=iCn(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ms(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=YWe(f);return d instanceof wp&&EWe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new WR(O2(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,Ej(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new ZM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new ZM(h,d)}(n.endAt)),D2n(t,i,o,s,a,"F",u,l)}function fCn(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function YWe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=O2(n.unaryFilter.field);return qo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=O2(n.unaryFilter.field);return qo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=O2(n.unaryFilter.field);return qo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=O2(n.unaryFilter.field);return qo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Wn()}}(e):e.fieldFilter!==void 0?function(n){return qo.create(O2(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return wp.create(n.compositeFilter.filters.map(r=>YWe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Wn()}}(n.compositeFilter.op))}(e):Wn()}function dCn(e){return Z2n[e]}function hCn(e){return eCn[e]}function pCn(e){return tCn[e]}function P2(e){return{fieldPath:e.canonicalString()}}function O2(e){return su.fromServerFormat(e.fieldPath)}function KWe(e){return e instanceof qo?function(n){if(n.op==="=="){if(bCe(n.value))return{unaryFilter:{field:P2(n.field),op:"IS_NAN"}};if(vCe(n.value))return{unaryFilter:{field:P2(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bCe(n.value))return{unaryFilter:{field:P2(n.field),op:"IS_NOT_NAN"}};if(vCe(n.value))return{unaryFilter:{field:P2(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:P2(n.field),op:hCn(n.op),value:n.value}}}(e):e instanceof wp?function(n){const r=n.getFilters().map(i=>KWe(i));return r.length===1?r[0]:{compositeFilter:{op:pCn(n.op),filters:r}}}(e):Wn()}function mCn(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function XWe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,n,r,i,s=er.min(),o=er.min(),a=ol.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Z1(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Z1(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Z1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Z1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gCn{constructor(t){this.ct=t}}function yCn(e){const t=cCn({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?nJ(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vCn{constructor(){this._n=new bCn}addToCollectionParentIndex(t,n){return this._n.add(n),Et.resolve()}getCollectionParents(t,n){return Et.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Et.resolve()}deleteFieldIndex(t,n){return Et.resolve()}deleteAllFieldIndexes(t){return Et.resolve()}createTargetIndexes(t,n){return Et.resolve()}getDocumentsMatchingTarget(t,n){return Et.resolve(null)}getIndexType(t,n){return Et.resolve(0)}getFieldIndexes(t,n){return Et.resolve([])}getNextCollectionGroupToUpdate(t){return Et.resolve(null)}getMinOffset(t,n){return Et.resolve(cb.min())}getMinOffsetFromCollectionGroup(t,n){return Et.resolve(cb.min())}updateCollectionGroup(t,n,r){return Et.resolve()}updateIndexEntries(t,n){return Et.resolve()}}class bCn{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new hu(Ts.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new hu(Ts.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new xA(0)}static Ln(){return new xA(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xCn{constructor(){this.changes=new qS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,zu.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Et.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wCn{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Cn{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&n3(r.mutation,i,Df.empty(),pa.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Fr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Fr()){const i=Cw();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=ek();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Cw();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Fr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=vy();const o=t3(),a=function(){return t3()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Xb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),n3(c.mutation,l,c.mutation.getFieldMask(),pa.now())):o.set(l.key,Df.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new wCn(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=t3();let i=new Qs((o,a)=>o-a),s=Fr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Df.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Fr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=NWe();c.forEach(d=>{if(!s.has(d)){const h=BWe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return En.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):SWe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Et.resolve(Cw());let a=-1,u=s;return o.next(l=>Et.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Et.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Fr())).next(c=>({batchId:a,changes:RWe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new En(n)).next(r=>{let i=ek();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=ek();return this.indexManager.getCollectionParents(t,s).next(a=>Et.forEach(a,u=>{const l=function(f,d){return new HS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,zu.newInvalidDocument(c)))});let a=ek();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&n3(c.mutation,l,Df.empty(),pa.now()),Tj(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ECn{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Et.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:U0(i.createTime)}}(n)),Et.resolve()}getNamedQuery(t,n){return Et.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:yCn(i.bundledQuery),readTime:U0(i.readTime)}}(n)),Et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CCn{constructor(){this.overlays=new Qs(En.comparator),this.hr=new Map}getOverlay(t,n){return Et.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Cw();return Et.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Et.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Et.resolve()}getOverlaysForCollection(t,n,r){const i=Cw(),s=n.length+1,o=new En(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Et.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Qs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Cw(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Cw(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Et.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new G2n(n,r));let s=this.hr.get(n);s===void 0&&(s=Fr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qce{constructor(){this.Pr=new hu(Sa.Ir),this.Tr=new hu(Sa.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Sa(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Sa(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new En(new Ts([])),r=new Sa(n,t),i=new Sa(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new En(new Ts([])),r=new Sa(n,t),i=new Sa(n,t+1);let s=Fr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Sa(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Sa{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return En.comparator(t.key,n.key)||Ai(t.pr,n.pr)}static Er(t,n){return Ai(t.pr,n.pr)||En.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TCn{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new hu(Sa.Ir)}checkEmpty(t){return Et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new W2n(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Sa(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Et.resolve(o)}lookupMutationBatch(t,n){return Et.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Et.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Et.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Sa(n,0),i=new Sa(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Et.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new hu(Ai);return n.forEach(i=>{const s=new Sa(i,0),o=new Sa(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Et.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;En.isDocumentKey(s)||(s=s.child(""));const o=new Sa(new En(s),0);let a=new hu(Ai);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Et.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ms(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Et.forEach(n.mutations,i=>{const s=new Sa(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Sa(n,0),i=this.wr.firstAfterOrEqual(r);return Et.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Et.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ACn{constructor(t){this.vr=t,this.docs=function(){return new Qs(En.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Et.resolve(r?r.document.mutableCopy():zu.newInvalidDocument(n))}getEntries(t,n){let r=vy();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zu.newInvalidDocument(i))}),Et.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=vy();const o=n.path,a=new En(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||c2n(l2n(c),r)<=0||(i.has(c.key)||Tj(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Et.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Wn()}Fr(t,n){return Et.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new SCn(this)}getSize(t){return Et.resolve(this.size)}}class SCn extends xCn{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Et.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DCn{constructor(t){this.persistence=t,this.Mr=new qS(n=>Lce(n),Bce),this.lastRemoteSnapshotVersion=er.min(),this.highestTargetId=0,this.Or=0,this.Nr=new qce,this.targetCount=0,this.Lr=xA.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Et.resolve()}getLastRemoteSnapshotVersion(t){return Et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Et.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Et.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Et.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new xA(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Et.resolve()}updateTargetData(t,n){return this.qn(n),Et.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Et.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Et.waitFor(s).next(()=>i)}getTargetCount(t){return Et.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Et.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Et.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Et.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Et.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Et.resolve(r)}containsKey(t,n){return Et.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ICn{constructor(t,n){this.Br={},this.overlays={},this.kr=new Oce(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new DCn(this),this.indexManager=new vCn,this.remoteDocumentCache=function(i){return new ACn(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new gCn(n),this.$r=new ECn(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new CCn,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new TCn(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){tn("MemoryPersistence","Starting transaction:",t);const i=new kCn(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Et.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class kCn extends d2n{constructor(t){super(),this.currentSequenceNumber=t}}class Wce{constructor(t){this.persistence=t,this.zr=new qce,this.jr=null}static Hr(t){return new Wce(t)}get Jr(){if(this.jr)return this.jr;throw Wn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Et.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Et.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Et.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Et.forEach(this.Jr,r=>{const i=En.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,er.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Et.or([()=>Et.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gce{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Fr(),i=Fr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Gce(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RCn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NCn{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return dbn()?8:h2n(gu())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new RCn;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(aI()<=Wr.DEBUG&&tn("QueryEngine","SDK will not create cache indexes for query:",N2(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Et.resolve()):(aI()<=Wr.DEBUG&&tn("QueryEngine","Query:",N2(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(aI()<=Wr.DEBUG&&tn("QueryEngine","The SDK decides to create cache indexes for query:",N2(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,j0(n))):Et.resolve())}ji(t,n){if(ECe(n))return Et.resolve(null);let r=j0(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nJ(n,null,"F"),r=j0(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Fr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,nJ(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return ECe(n)||i.isEqual(er.min())?Et.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Et.resolve(null):(aI()<=Wr.DEBUG&&tn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),N2(n)),this.es(t,o,n,u2n(i,-1)).next(a=>a))})}Zi(t,n){let r=new hu(IWe(t));return n.forEach((i,s)=>{Tj(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return aI()<=Wr.DEBUG&&tn("QueryEngine","Using full collection scan to execute query:",N2(n)),this.zi.getDocumentsMatchingQuery(t,n,cb.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PCn{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Qs(Ai),this.rs=new qS(s=>Lce(s),Bce),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _Cn(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function OCn(e,t,n,r){return new PCn(e,t,n,r)}async function QWe(e,t){const n=tr(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Fr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function FCn(e,t){const n=tr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Et.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ms(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Fr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function JWe(e){const t=tr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function $Cn(e,t){const n=tr(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ol.EMPTY_BYTE_STRING,er.min()).withLastLimboFreeSnapshotVersion(er.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=vy(),l=Fr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(MCn(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(er.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Et.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function MCn(e,t,n){let r=Fr(),i=Fr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=vy();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(er.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):tn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function LCn(e,t){const n=tr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function BCn(e,t){const n=tr(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Et.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Z1(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function aJ(e,t,n){const r=tr(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!UP(o))throw o;tn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function OCe(e,t,n){const r=tr(e);let i=er.min(),s=Fr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=tr(u),d=f.rs.get(c);return d!==void 0?Et.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,j0(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:er.min(),n?s:Fr())).next(a=>(jCn(r,k2n(t),a),{documents:a,hs:s})))}function jCn(e,t,n){let r=e.ss.get(t)||er.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class FCe{constructor(){this.activeTargetIds=$2n()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class UCn{constructor(){this.no=new FCe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new FCe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zCn{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ce{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){tn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){tn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RO=null;function aW(){return RO===null?RO=function(){return 268435456+Math.round(2147483648*Math.random())}():RO++,"0x"+RO.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VCn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HCn{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="WebChannelConnection";class qCn extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=aW(),u=this.vo(n,r.toUriEncodedString());tn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(tn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw UR("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+VS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=VCn[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=aW();return new Promise((o,a)=>{const u=new fWe;u.setWithCredentials(!0),u.listenOnce(hWe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case r5.NO_ERROR:const c=u.getResponseJson();tn(Pu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case r5.TIMEOUT:tn(Pu,`RPC '${t}' ${s} timed out`),a(new Vt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case r5.HTTP_ERROR:const f=u.getStatus();if(tn(Pu,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(y)>=0?y:ht.UNKNOWN}(h.status);a(new Vt(p,h.message))}else a(new Vt(ht.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Vt(ht.UNAVAILABLE,"Connection failed."));break;default:Wn()}}finally{tn(Pu,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);tn(Pu,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=aW(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=gWe(),a=mWe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new dWe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");tn(Pu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new HCn({lo:g=>{h?tn(Pu,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(tn(Pu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),tn(Pu,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(x){setTimeout(()=>{throw x},0)}})};return m(f,ZI.EventType.OPEN,()=>{h||(tn(Pu,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,ZI.EventType.CLOSE,()=>{h||(h=!0,tn(Pu,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,ZI.EventType.ERROR,g=>{h||(h=!0,UR(Pu,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Vt(ht.UNAVAILABLE,"The operation could not be completed")))}),m(f,ZI.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ms(!!v);const b=v,x=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(x){tn(Pu,`RPC '${t}' stream ${i} received error:`,x);const _=x.status;let C=function(k){const I=Bo[k];if(I!==void 0)return UWe(I)}(_),T=x.message;C===void 0&&(C=ht.INTERNAL,T="Unknown error status: "+_+" with message "+x.message),h=!0,p.po(new Vt(C,T)),f.close()}else tn(Pu,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,pWe.STAT_EVENT,g=>{g.stat===XQ.PROXY?tn(Pu,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===XQ.NOPROXY&&tn(Pu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function uW(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(e){return new nCn(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZWe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&tn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eGe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ZWe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===ht.RESOURCE_EXHAUSTED?(yy(n.toString()),yy("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Vt(ht.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return tn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(tn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WCn extends eGe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=sCn(this.serializer,t),r=function(s){if(!("targetChange"in s))return er.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?er.min():o.readTime?U0(o.readTime):er.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=oJ(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=eJ(u)?{documents:uCn(s,u)}:{query:lCn(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HWe(s,o.resumeToken);const l=rJ(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(er.min())>0){a.readTime=tL(s,o.snapshotVersion.toTimestamp());const l=rJ(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=fCn(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=oJ(this.serializer),n.removeTarget=t,this.i_(n)}}class GCn extends eGe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ms(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=aCn(t.writeResults,t.commitTime),r=U0(t.commitTime);return this.listener.A_(r,n)}return ms(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=oJ(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>oCn(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YCn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,iJ(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Vt(ht.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,iJ(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Vt(ht.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class KCn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(yy(n),this.y_=!1):tn("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XCn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{bE(this)&&(tn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=tr(u);l.M_.add(4),await qP(l),l.N_.set("Unknown"),l.M_.delete(4),await HP(l)}(this))})}),this.N_=new KCn(r,i)}}async function HP(e){if(bE(e))for(const t of e.x_)await t(!0)}async function qP(e){for(const t of e.x_)await t(!1)}function tGe(e,t){const n=tr(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Qce(n)?Xce(n):WS(n).Xo()&&Kce(n,t))}function Yce(e,t){const n=tr(e),r=WS(n);n.F_.delete(t),r.Xo()&&nGe(n,t),n.F_.size===0&&(r.Xo()?r.n_():bE(n)&&n.N_.set("Unknown"))}function Kce(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(er.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}WS(e).P_(t)}function nGe(e,t){e.L_.xe(t),WS(e).I_(t)}function Xce(e){e.L_=new J2n({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),WS(e).start(),e.N_.w_()}function Qce(e){return bE(e)&&!WS(e).Zo()&&e.F_.size>0}function bE(e){return tr(e).M_.size===0}function rGe(e){e.L_=void 0}async function QCn(e){e.N_.set("Online")}async function JCn(e){e.F_.forEach((t,n)=>{Kce(e,t)})}async function ZCn(e,t){rGe(e),Qce(e)?(e.N_.D_(t),Xce(e)):e.N_.set("Unknown")}async function eTn(e,t,n){if(e.N_.set("Online"),t instanceof VWe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){tn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await nL(e,r)}else if(t instanceof o5?e.L_.Ke(t):t instanceof zWe?e.L_.He(t):e.L_.We(t),!n.isEqual(er.min()))try{const r=await JWe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ol.EMPTY_BYTE_STRING,c.snapshotVersion)),nGe(s,u);const f=new Z1(c.target,u,l,c.sequenceNumber);Kce(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){tn("RemoteStore","Failed to raise snapshot:",r),await nL(e,r)}}async function nL(e,t,n){if(!UP(t))throw t;e.M_.add(1),await qP(e),e.N_.set("Offline"),n||(n=()=>JWe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{tn("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await HP(e)})}function iGe(e,t){return t().catch(n=>nL(e,n,t))}async function kj(e){const t=tr(e),n=db(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;tTn(t);)try{const i=await LCn(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,nTn(t,i)}catch(i){await nL(t,i)}sGe(t)&&oGe(t)}function tTn(e){return bE(e)&&e.v_.length<10}function nTn(e,t){e.v_.push(t);const n=db(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function sGe(e){return bE(e)&&!db(e).Zo()&&e.v_.length>0}function oGe(e){db(e).start()}async function rTn(e){db(e).V_()}async function iTn(e){const t=db(e);for(const n of e.v_)t.d_(n.mutations)}async function sTn(e,t,n){const r=e.v_.shift(),i=zce.from(r,t,n);await iGe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await kj(e)}async function oTn(e,t){t&&db(e).E_&&await async function(r,i){if(function(o){return K2n(o)&&o!==ht.ABORTED}(i.code)){const s=r.v_.shift();db(r).t_(),await iGe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await kj(r)}}(e,t),sGe(e)&&oGe(e)}async function MCe(e,t){const n=tr(e);n.asyncQueue.verifyOperationInProgress(),tn("RemoteStore","RemoteStore received new credentials");const r=bE(n);n.M_.add(3),await qP(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await HP(n)}async function aTn(e,t){const n=tr(e);t?(n.M_.delete(2),await HP(n)):t||(n.M_.add(2),await qP(n),n.N_.set("Unknown"))}function WS(e){return e.B_||(e.B_=function(n,r,i){const s=tr(n);return s.f_(),new WCn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:QCn.bind(null,e),To:JCn.bind(null,e),Ao:ZCn.bind(null,e),h_:eTn.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),Qce(e)?Xce(e):e.N_.set("Unknown")):(await e.B_.stop(),rGe(e))})),e.B_}function db(e){return e.k_||(e.k_=function(n,r,i){const s=tr(n);return s.f_(),new GCn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:rTn.bind(null,e),Ao:oTn.bind(null,e),R_:iTn.bind(null,e),A_:sTn.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await kj(e)):(await e.k_.stop(),e.v_.length>0&&(tn("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jce{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Jce(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Vt(ht.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zce(e,t){if(yy("AsyncQueue",`${t}: ${e}`),UP(e))return new Vt(ht.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.comparator=t?(n,r)=>t(n,r)||En.comparator(n.key,r.key):(n,r)=>En.comparator(n.key,r.key),this.keyedMap=ek(),this.sortedSet=new Qs(this.comparator)}static emptySet(t){return new JC(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof JC)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new JC;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LCe{constructor(){this.q_=new Qs(En.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Wn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class wA{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wA(t,n,JC.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Cj(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uTn{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class lTn{constructor(){this.queries=new qS(t=>DWe(t),Cj),this.onlineState="Unknown",this.z_=new Set}}async function aGe(e,t){const n=tr(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new uTn,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Zce(o,`Initialization of query '${N2(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&efe(n)}async function uGe(e,t){const n=tr(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cTn(e,t){const n=tr(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&efe(n)}function fTn(e,t,n){const r=tr(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function efe(e){e.z_.forEach(t=>{t.next()})}var uJ,BCe;(BCe=uJ||(uJ={})).J_="default",BCe.Cache="cache";class lGe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new wA(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=wA.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==uJ.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cGe{constructor(t){this.key=t}}class fGe{constructor(t){this.key=t}}class dTn{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Fr(),this.mutatedKeys=Fr(),this.Ia=IWe(t),this.Ta=new JC(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new LCe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=Tj(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new wA(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new LCe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Fr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new fGe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new cGe(r))}),n}pa(t){this.la=t.hs,this.Pa=Fr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return wA.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class hTn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class pTn{constructor(t){this.key=t,this.wa=!1}}class mTn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new qS(a=>DWe(a),Cj),this.Da=new Map,this.Ca=new Set,this.va=new Qs(En.comparator),this.Fa=new Map,this.Ma=new qce,this.xa={},this.Oa=new Map,this.Na=xA.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function gTn(e,t,n=!0){const r=yGe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await dGe(r,t,n,!0),i}async function yTn(e,t){const n=yGe(e);await dGe(n,t,!0,!1)}async function dGe(e,t,n,r){const i=await BCn(e.localStore,j0(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await vTn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&tGe(e.remoteStore,i),a}async function vTn(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await OCe(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const x=v&&v.targetChanges.get(g.targetId),_=v&&v.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(b,m.isPrimaryClient,x,_);return UCe(m,g.targetId,C.fa),C.snapshot}(e,f,d,h);const s=await OCe(e.localStore,t,!0),o=new dTn(t,s.hs),a=o.da(s.documents),u=VP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);UCe(e,n,l.fa);const c=new hTn(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function bTn(e,t,n){const r=tr(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Cj(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await aJ(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yce(r.remoteStore,i.targetId),lJ(r,i.targetId)}).catch(jP)):(lJ(r,i.targetId),await aJ(r.localStore,i.targetId,!0))}async function xTn(e,t){const n=tr(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yce(n.remoteStore,r.targetId))}async function wTn(e,t,n){const r=DTn(e);try{const i=await function(o,a){const u=tr(o),l=pa.now(),c=a.reduce((h,p)=>h.add(p.key),Fr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=vy(),m=Fr();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=H2n(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Xb(v.key,b,xWe(b.value.mapValue),Of.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:RWe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Qs(Ai)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await WP(r,i.changes),await kj(r.remoteStore)}catch(i){const s=Zce(i,"Failed to persist write");n.reject(s)}}async function hGe(e,t){const n=tr(e);try{const r=await $Cn(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ms(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ms(o.wa):i.removedDocuments.size>0&&(ms(o.wa),o.wa=!1))}),await WP(n,r,t)}catch(r){await jP(r)}}function jCe(e,t,n){const r=tr(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=tr(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&efe(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _Tn(e,t,n){const r=tr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Qs(En.comparator);o=o.insert(s,zu.newNoDocument(s,er.min()));const a=Fr().add(s),u=new Dj(er.min(),new Map,new Qs(Ai),o,a);await hGe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),tfe(r)}else await aJ(r.localStore,t,!1).then(()=>lJ(r,t,n)).catch(jP)}async function ETn(e,t){const n=tr(e),r=t.batch.batchId;try{const i=await FCn(n.localStore,t);mGe(n,r,null),pGe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await WP(n,i)}catch(i){await jP(i)}}async function CTn(e,t,n){const r=tr(e);try{const i=await function(o,a){const u=tr(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ms(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);mGe(r,t,n),pGe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await WP(r,i)}catch(i){await jP(i)}}function pGe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function mGe(e,t,n){const r=tr(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function lJ(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||gGe(e,r)})}function gGe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(Yce(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),tfe(e))}function UCe(e,t,n){for(const r of n)r instanceof cGe?(e.Ma.addReference(r.key,t),TTn(e,r)):r instanceof fGe?(tn("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||gGe(e,r.key)):Wn()}function TTn(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(tn("SyncEngine","New document in limbo: "+n),e.Ca.add(r),tfe(e))}function tfe(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new En(Ts.fromString(t)),r=e.Na.next();e.Fa.set(r,new pTn(n)),e.va=e.va.insert(n,r),tGe(e.remoteStore,new Z1(j0(jce(n.path)),r,"TargetPurposeLimboResolution",Oce.oe))}}async function WP(e,t,n){const r=tr(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=Gce.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=tr(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Et.forEach(l,d=>Et.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Et.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!UP(f))throw f;tn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function ATn(e,t){const n=tr(e);if(!n.currentUser.isEqual(t)){tn("SyncEngine","User change. New user:",t.toKey());const r=await QWe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Vt(ht.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await WP(n,r.us)}}function STn(e,t){const n=tr(e),r=n.Fa.get(t);if(r&&r.wa)return Fr().add(r.key);{let i=Fr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function yGe(e){const t=tr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hGe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=STn.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_Tn.bind(null,t),t.Sa.h_=cTn.bind(null,t.eventManager),t.Sa.ka=fTn.bind(null,t.eventManager),t}function DTn(e){const t=tr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ETn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CTn.bind(null,t),t}class zCe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Ij(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return OCn(this.persistence,new NCn,t.initialUser,this.serializer)}createPersistence(t){return new ICn(Wce.Hr,this.serializer)}createSharedClientState(t){return new UCn}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ITn{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jCe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ATn.bind(null,this.syncEngine),await aTn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new lTn}()}createDatastore(t){const n=Ij(t.databaseInfo.databaseId),r=function(s){return new qCn(s)}(t.databaseInfo);return function(s,o,a,u){return new YCn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new XCn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>jCe(this.syncEngine,n,0),function(){return $Ce.D()?new $Ce:new zCn}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new mTn(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=tr(r);tn("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await qP(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vGe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):yy("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kTn{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dc.UNAUTHENTICATED,this.clientId=yWe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{tn("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(tn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Hg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Zce(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function lW(e,t){e.asyncQueue.verifyOperationInProgress(),tn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await QWe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function VCe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await bGe(e);tn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>MCe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>MCe(t.remoteStore,i)),e._onlineComponents=t}function RTn(e){return e.name==="FirebaseError"?e.code===ht.FAILED_PRECONDITION||e.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function bGe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tn("FirestoreClient","Using user provided OfflineComponentProvider");try{await lW(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!RTn(n))throw n;UR("Error using user provided cache. Falling back to memory cache: "+n),await lW(e,new zCe)}}else tn("FirestoreClient","Using default OfflineComponentProvider"),await lW(e,new zCe);return e._offlineComponents}async function nfe(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tn("FirestoreClient","Using user provided OnlineComponentProvider"),await VCe(e,e._uninitializedComponentsProvider._online)):(tn("FirestoreClient","Using default OnlineComponentProvider"),await VCe(e,new ITn))),e._onlineComponents}function NTn(e){return bGe(e).then(t=>t.persistence)}function PTn(e){return nfe(e).then(t=>t.remoteStore)}function OTn(e){return nfe(e).then(t=>t.syncEngine)}async function xGe(e){const t=await nfe(e),n=t.eventManager;return n.onListen=gTn.bind(null,t.syncEngine),n.onUnlisten=bTn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=yTn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xTn.bind(null,t.syncEngine),n}function FTn(e){return e.asyncQueue.enqueue(async()=>{const t=await NTn(e),n=await PTn(e);return t.setNetworkEnabled(!0),function(i){const s=tr(i);return s.M_.delete(0),HP(s)}(n)})}function $Tn(e,t,n={}){const r=new Hg;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new vGe({next:d=>{o.enqueueAndForget(()=>uGe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Vt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Vt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new lGe(jce(a.path),c,{includeMetadataChanges:!0,ra:!0});return aGe(s,f)}(await xGe(e),e.asyncQueue,t,n,r)),r.promise}function MTn(e,t,n={}){const r=new Hg;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new vGe({next:d=>{o.enqueueAndForget(()=>uGe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Vt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new lGe(a,c,{includeMetadataChanges:!0,ra:!0});return aGe(s,f)}(await xGe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wGe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HCe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Ge(e,t,n){if(!n)throw new Vt(ht.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function LTn(e,t,n,r){if(t===!0&&r===!0)throw new Vt(ht.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function qCe(e){if(!En.isDocumentKey(e))throw new Vt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function WCe(e){if(En.isDocumentKey(e))throw new Vt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Rj(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Wn()}function lm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rj(e);throw new Vt(ht.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GCe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Vt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}LTn("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wGe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rfe{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GCe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Vt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Vt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GCe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new e2n;switch(r.type){case"firstParty":return new r2n(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Vt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=HCe.get(n);r&&(tn("ComponentProvider","Removing Datastore"),HCe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new xE(this.firestore,t,this._query)}}class Ll{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ll(this.firestore,t,this._key)}}class Cv extends xE{constructor(t,n,r){super(t,n,jce(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ll(this.firestore,null,new En(t))}withConverter(t){return new Cv(this.firestore,t,this._path)}}function uc(e,t,...n){if(e=ys(e),_Ge("collection","path",t),e instanceof rfe){const r=Ts.fromString(t,...n);return WCe(r),new Cv(e,null,r)}{if(!(e instanceof Ll||e instanceof Cv))throw new Vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ts.fromString(t,...n));return WCe(r),new Cv(e.firestore,null,r)}}function vs(e,t,...n){if(e=ys(e),arguments.length===1&&(t=yWe.newId()),_Ge("doc","path",t),e instanceof rfe){const r=Ts.fromString(t,...n);return qCe(r),new Ll(e,null,new En(r))}{if(!(e instanceof Ll||e instanceof Cv))throw new Vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ts.fromString(t,...n));return qCe(r),new Ll(e.firestore,e instanceof Cv?e.converter:null,new En(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BTn{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ZWe(this,"async_queue_retry"),this.hu=()=>{const n=uW();n&&tn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=uW();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=uW();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Hg;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!UP(t))throw t;tn("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yy("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Jce.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Wn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class wE extends rfe{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new BTn}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||EGe(this),this._firestoreClient.terminate()}}function jTn(e,t,n){n||(n="(default)");const r=US(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(LR(s,t))return i;throw new Vt(ht.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Vt(ht.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function GP(e){return e._firestoreClient||EGe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function EGe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new g2n(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,wGe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new kTn(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function UTn(e){return FTn(GP(e=lm(e,wE)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _A(ol.fromBase64String(t))}catch(n){throw new Vt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new _A(ol.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Vt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new su(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ife{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Vt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Vt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ai(this._lat,t._lat)||Ai(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zTn=/^__.*__$/;class VTn{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Xb(t,this.data,this.fieldMask,n,this.fieldTransforms):new zP(t,this.data,n,this.fieldTransforms)}}class CGe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Xb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function TGe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wn()}}class sfe{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new sfe(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return rL(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(TGe(this.fu)&&zTn.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class HTn{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ij(t)}Fu(t,n,r,i=!1){return new sfe({fu:t,methodName:n,vu:r,path:su.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pj(e){const t=e._freezeSettings(),n=Ij(e._databaseId);return new HTn(e._databaseId,!!t.ignoreUndefinedProperties,n)}function AGe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);afe("Data must be an object, but it was:",o,r);const a=IGe(r,o);let u,l;if(s.merge)u=new Df(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=cJ(t,f,n);if(!o.contains(d))throw new Vt(ht.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);RGe(c,d)||c.push(d)}u=new Df(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new VTn(new Ec(a),u,l)}class Oj extends Nj{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Oj}}class ofe extends Nj{_toFieldTransform(t){return new j2n(t.path,new GR)}isEqual(t){return t instanceof ofe}}function SGe(e,t,n,r){const i=e.Fu(1,t,n);afe("Data must be an object, but it was:",i,r);const s=[],o=Ec.empty();vE(r,(u,l)=>{const c=ufe(t,u,n);l=ys(l);const f=i.Su(c);if(l instanceof Oj)s.push(c);else{const d=KP(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Df(s);return new CGe(o,a,i.fieldTransforms)}function DGe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[cJ(t,r,n)],u=[i];if(s.length%2!=0)throw new Vt(ht.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(cJ(t,s[d])),u.push(s[d+1]);const l=[],c=Ec.empty();for(let d=a.length-1;d>=0;--d)if(!RGe(l,a[d])){const h=a[d];let p=u[d];p=ys(p);const m=o.Su(h);if(p instanceof Oj)l.push(h);else{const g=KP(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Df(l);return new CGe(c,f,o.fieldTransforms)}function qTn(e,t,n,r=!1){return KP(n,e.Fu(r?4:3,t))}function KP(e,t){if(kGe(e=ys(e)))return afe("Unsupported field value:",t,e),IGe(e,t);if(e instanceof Nj)return function(r,i){if(!TGe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=KP(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ys(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M2n(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pa.fromDate(r);return{timestampValue:tL(i.serializer,s)}}if(r instanceof pa){const s=new pa(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tL(i.serializer,s)}}if(r instanceof ife)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _A)return{bytesValue:HWe(i.serializer,r._byteString)};if(r instanceof Ll){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hce(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Rj(r)}`)}(e,t)}function IGe(e,t){const n={};return vWe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vE(e,(r,i)=>{const s=KP(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function kGe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof pa||e instanceof ife||e instanceof _A||e instanceof Ll||e instanceof Nj)}function afe(e,t,n){if(!kGe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Rj(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function cJ(e,t,n){if((t=ys(t))instanceof YP)return t._internalPath;if(typeof t=="string")return ufe(e,t);throw rL("Field path arguments must be of type string or ",e,!1,void 0,n)}const WTn=new RegExp("[~\\*/\\[\\]]");function ufe(e,t,n){if(t.search(WTn)>=0)throw rL(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new YP(...t.split("."))._internalPath}catch{throw rL(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function rL(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Vt(ht.INVALID_ARGUMENT,a+e+u)}function RGe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NGe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ll(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new GTn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Fj("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GTn extends NGe{data(){return super.data()}}function Fj(e,t){return typeof t=="string"?ufe(e,t):t instanceof YP?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YTn(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Vt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lfe{}class PGe extends lfe{}function cW(e,t,...n){let r=[];t instanceof lfe&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof cfe).length,a=s.filter(u=>u instanceof $j).length;if(o>1||o>0&&a>0)throw new Vt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class $j extends PGe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new $j(t,n,r)}_apply(t){const n=this._parse(t);return OGe(t._query,n),new xE(t.firestore,t.converter,tJ(t._query,n))}_parse(t){const n=Pj(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Vt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){QCe(f,c);const h=[];for(const p of f)h.push(XCe(u,s,p));d={arrayValue:{values:h}}}else d=XCe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||QCe(f,c),d=qTn(a,o,f,c==="in"||c==="not-in");return qo.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function YCe(e,t,n){const r=t,i=Fj("where",e);return $j._create(i,r,n)}class cfe extends lfe{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new cfe(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wp.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)OGe(o,u),o=tJ(o,u)}(t._query,n),new xE(t.firestore,t.converter,tJ(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ffe extends PGe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new ffe(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new WR(s,o)}(t._query,this._field,this._direction);return new xE(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new HS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function KCe(e,t="asc"){const n=t,r=Fj("orderBy",e);return ffe._create(r,n)}function XCe(e,t,n){if(typeof(n=ys(n))=="string"){if(n==="")throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SWe(t)&&n.indexOf("/")!==-1)throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ts.fromString(n));if(!En.isDocumentKey(r))throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yCe(e,new En(r))}if(n instanceof Ll)return yCe(e,n._key);throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rj(n)}.`)}function QCe(e,t){if(!Array.isArray(e)||e.length===0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function OGe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class KTn{convertValue(t,n="none"){switch(I_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(D_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Wn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return vE(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new ife(Vo(t.latitude),Vo(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=$ce(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(VR(t));default:return null}}convertTimestamp(t){const n=fb(t);return new pa(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ts.fromString(t);ms(XWe(r));const i=new HR(r.get(1),r.get(3)),s=new En(r.popFirst(5));return i.isEqual(n)||yy(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FGe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $Ge extends NGe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new a5(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Fj("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class a5 extends $Ge{data(t={}){return super.data(t)}}class XTn{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new nk(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new a5(this._firestore,this._userDataWriter,r.key,r,new nk(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Vt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new a5(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nk(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new a5(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nk(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:QTn(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QTn(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(e){e=lm(e,Ll);const t=lm(e.firestore,wE);return $Tn(GP(t),e._key).then(n=>JTn(t,e,n))}class MGe extends KTn{constructor(t){super(),this.firestore=t}convertBytes(t){return new _A(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ll(this.firestore,null,n)}}function b2(e){e=lm(e,xE);const t=lm(e.firestore,wE),n=GP(t),r=new MGe(t);return YTn(e._query),MTn(n,e._query).then(i=>new XTn(t,r,e,i))}function Ou(e,t,n){e=lm(e,Ll);const r=lm(e.firestore,wE),i=FGe(e.converter,t,n);return dfe(r,[AGe(Pj(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Of.none())])}function JCe(e,t,n,...r){e=lm(e,Ll);const i=lm(e.firestore,wE),s=Pj(i);let o;return o=typeof(t=ys(t))=="string"||t instanceof YP?DGe(s,"updateDoc",e._key,t,n,r):SGe(s,"updateDoc",e._key,t),dfe(i,[o.toMutation(e._key,Of.exists(!0))])}function dfe(e,t){return function(r,i){const s=new Hg;return r.asyncQueue.enqueueAndForget(async()=>wTn(await OTn(r),i,s)),s.promise}(GP(e),t)}function JTn(e,t,n){const r=n.docs.get(t._key),i=new MGe(e);return new $Ge(e,i,t._key,r,new nk(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZTn{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pj(t)}set(t,n,r){this._verifyNotCommitted();const i=fW(t,this._firestore),s=FGe(i.converter,n,r),o=AGe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Of.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=fW(t,this._firestore);let o;return o=typeof(n=ys(n))=="string"||n instanceof YP?DGe(this._dataReader,"WriteBatch.update",s._key,n,r,i):SGe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Of.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=fW(t,this._firestore);return this._mutations=this._mutations.concat(new Uce(n._key,Of.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Vt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fW(e,t){if((e=ys(e)).firestore!==t)throw new Vt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function ZCe(){return new ofe("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eTe(e){return GP(e=lm(e,wE)),new ZTn(e,t=>dfe(e,t))}(function(t,n=!0){(function(i){VS=i})(yE),my(new om("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wE(new t2n(r.getProvider("auth-internal")),new s2n(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Vt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new HR(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),up(hCe,"4.6.3",t),up(hCe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ=new Map,LGe={activated:!1,tokenObservers:[]},eAn={initialized:!1,enabled:!1};function ma(e){return fJ.get(e)||Object.assign({},LGe)}function tAn(e,t){return fJ.set(e,t),fJ.get(e)}function Mj(){return eAn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BGe="https://content-firebaseappcheck.googleapis.com/v1",nAn="exchangeRecaptchaV3Token",rAn="exchangeDebugToken",tTe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},iAn=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sAn{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new MR,this.pending.promise.catch(n=>{}),await oAn(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new MR,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function oAn(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aAn={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},kc=new jS("appCheck","AppCheck",aAn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nTe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function hfe(e){if(!ma(e).activated)throw kc.create("use-before-activation",{appName:e.name})}function jGe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=PO(n)+"d:"),r&&(o+=PO(r)+"h:"),o+=PO(i)+"m:"+PO(s)+"s",o}function PO(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pfe({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw kc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw kc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw kc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw kc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function uAn(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${BGe}/projects/${n}/apps/${r}:${nAn}?key=${i}`,body:{recaptcha_v3_token:t}}}function UGe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${BGe}/projects/${n}/apps/${r}:${rAn}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lAn="firebase-app-check-database",cAn=1,XR="firebase-app-check-store",zGe="debug-token";let OO=null;function VGe(){return OO||(OO=new Promise((e,t)=>{try{const n=indexedDB.open(lAn,cAn);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(kc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(XR,{keyPath:"compositeKey"})}}}catch(n){t(kc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),OO)}function fAn(e){return qGe(WGe(e))}function dAn(e,t){return HGe(WGe(e),t)}function hAn(e){return HGe(zGe,e)}function pAn(){return qGe(zGe)}async function HGe(e,t){const r=(await VGe()).transaction(XR,"readwrite"),s=r.objectStore(XR).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(kc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function qGe(e){const n=(await VGe()).transaction(XR,"readonly"),i=n.objectStore(XR).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(kc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function WGe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=new gj("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mAn(e){if(pce()){let t;try{t=await fAn(e)}catch(n){QR.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function dW(e,t){return pce()?dAn(e,t).catch(n=>{QR.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function gAn(){let e;try{e=await pAn()}catch{}if(e)return e;{const t=wbn();return hAn(t).catch(n=>QR.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mfe(){return Mj().enabled}async function gfe(){const e=Mj();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function yAn(){const e=lqe(),t=Mj();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new MR;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(gAn())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vAn={error:"UNKNOWN_ERROR"};function bAn(e){return hce.encodeString(JSON.stringify(e),!1)}async function dJ(e,t=!1){const n=e.app;hfe(n);const r=ma(n);let i=r.token,s;if(i&&!aC(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(aC(u)?i=u:await dW(n,void 0))}if(!t&&i&&aC(i))return{token:i.token};let o=!1;if(mfe()){r.exchangeTokenPromise||(r.exchangeTokenPromise=pfe(UGe(n,await gfe()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await dW(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await ma(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?QR.warn(u.message):QR.error(u),s=u}let a;return i?s?aC(i)?a={token:i.token,internalError:s}:a=iTe(s):(a={token:i.token},r.token=i,await dW(n,i)):a=iTe(s),o&&KGe(n,a),a}async function xAn(e){const t=e.app;hfe(t);const{provider:n}=ma(t);if(mfe()){const r=await gfe(),{token:i}=await pfe(UGe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function GGe(e,t,n,r){const{app:i}=e,s=ma(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&aC(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),rTe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>rTe(e))}function YGe(e,t){const n=ma(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function rTe(e){const{app:t}=e,n=ma(t);let r=n.tokenRefresher;r||(r=wAn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function wAn(e){const{app:t}=e;return new sAn(async()=>{const n=ma(t);let r;if(n.token?r=await dJ(e,!0):r=await dJ(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=ma(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tTe.RETRIAL_MIN_WAIT,tTe.RETRIAL_MAX_WAIT)}function KGe(e,t){const n=ma(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function aC(e){return e.expireTimeMillis-Date.now()>0}function iTe(e){return{token:bAn(vAn),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _An{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=ma(this.app);for(const n of t)YGe(this.app,n.next);return Promise.resolve()}}function EAn(e,t){return new _An(e,t)}function CAn(e){return{getToken:t=>dJ(e,t),getLimitedUseToken:()=>xAn(e),addTokenListener:t=>GGe(e,"INTERNAL",t),removeTokenListener:t=>YGe(e.app,t)}}const TAn="@firebase/app-check",AAn="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SAn="https://www.google.com/recaptcha/api.js";function DAn(e,t){const n=new MR,r=ma(e);r.reCAPTCHAState={initialized:n};const i=IAn(e),s=nTe(!1);return s?sTe(e,t,s,i,n):NAn(()=>{const o=nTe(!1);if(!o)throw new Error("no recaptcha");sTe(e,t,o,i,n)}),n.promise}function sTe(e,t,n,r,i){n.ready(()=>{RAn(e,t,n,r),i.resolve(n)})}function IAn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function kAn(e){hfe(e);const n=await ma(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=ma(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function RAn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{ma(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{ma(e).reCAPTCHAState.succeeded=!1}}),s=ma(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function NAn(e){const t=document.createElement("script");t.src=SAn,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yfe{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;OAn(this._throttleData);const i=await kAn(this._app).catch(o=>{throw kc.create("recaptcha-error")});if(!(!((t=ma(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw kc.create("recaptcha-error");let s;try{s=await pfe(uAn(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=PAn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),kc.create("throttled",{time:jGe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=US(t,"heartbeat"),DAn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof yfe?this._siteKey===t._siteKey:!1}}function PAn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+iAn,httpStatus:e};{const n=t?t.backoffCount:0,r=Abn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function OAn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw kc.create("throttled",{time:jGe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FAn(e=gce(),t){e=ys(e);const n=US(e,"app-check");if(Mj().initialized||yAn(),mfe()&&gfe().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw kc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return $An(e,t.provider,t.isTokenAutoRefreshEnabled),ma(e).isTokenAutoRefreshEnabled&&GGe(r,"INTERNAL",()=>{}),r}function $An(e,t,n){const r=tAn(e,Object.assign({},LGe));r.activated=!0,r.provider=t,r.cachedTokenPromise=mAn(e).then(i=>(i&&aC(i)&&(r.token=i,KGe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const MAn="app-check",oTe="app-check-internal";function LAn(){my(new om(MAn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return EAn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(oTe).initialize()})),my(new om(oTe,e=>{const t=e.getProvider("app-check").getImmediate();return CAn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),up(TAn,AAn)}LAn();var XGe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof vI=="function"&&vI;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof vI=="function"&&vI,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof on<"u"?on:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,_!==o&&m(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,C){if(typeof _!="function"&&this.state===l||typeof C!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var S=this.state===l?_:C;h(T,S,this.outcome)}else this.queue.push(new d(T,_,C));return T};function d(_,C,T){this.promise=_,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},d.prototype.otherCallFulfilled=function(_){h(this.promise,this.onFulfilled,_)},d.prototype.callRejected=function(_){a.reject(this.promise,_)},d.prototype.otherCallRejected=function(_){h(this.promise,this.onRejected,_)};function h(_,C,T){s(function(){var S;try{S=C(T)}catch(k){return a.reject(_,k)}S===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,S)})}a.resolve=function(_,C){var T=g(p,C);if(T.status==="error")return a.reject(_,T.value);var S=T.value;if(S)m(_,S);else{_.state=l,_.outcome=C;for(var k=-1,I=_.queue.length;++k<I;)_.queue[k].callFulfilled(C)}return _},a.reject=function(_,C){_.state=u,_.outcome=C;for(var T=-1,S=_.queue.length;++T<S;)_.queue[T].callRejected(C);return _};function p(_){var C=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof C=="function")return function(){C.apply(_,arguments)}}function m(_,C){var T=!1;function S(F){T||(T=!0,a.reject(_,F))}function k(F){T||(T=!0,a.resolve(_,F))}function I(){C(k,S)}var R=g(I);R.status==="error"&&S(R.value)}function g(_,C){var T={};try{T.value=_(C),T.status="success"}catch(S){T.status="error",T.value=S}return T}f.resolve=y;function y(_){return _ instanceof this?_:a.resolve(new this(o),_)}f.reject=v;function v(_){var C=new this(o);return a.reject(C,_)}f.all=b;function b(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=_.length,S=!1;if(!T)return this.resolve([]);for(var k=new Array(T),I=0,R=-1,F=new this(o);++R<T;)O(_[R],R);return F;function O(B,H){C.resolve(B).then(U,function(G){S||(S=!0,a.reject(F,G))});function U(G){k[H]=G,++I===T&&!S&&(S=!0,a.resolve(F,k))}}}f.race=x;function x(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=_.length,S=!1;if(!T)return this.resolve([]);for(var k=-1,I=new this(o);++k<T;)R(_[k]);return I;function R(F){C.resolve(F).then(function(O){S||(S=!0,a.resolve(I,O))},function(O){S||(S=!0,a.reject(I,O))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof on<"u"?on:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function o(te,xe){if(!(te instanceof xe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var te=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),xe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!te||xe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(te,xe){te=te||[],xe=xe||{};try{return new Blob(te,xe)}catch(Se){if(Se.name!=="TypeError")throw Se;for(var ue=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,De=new ue,Pe=0;Pe<te.length;Pe+=1)De.append(te[Pe]);return De.getBlob(xe.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(te,xe){xe&&te.then(function(ue){xe(null,ue)},function(ue){xe(ue)})}function h(te,xe,ue){typeof xe=="function"&&te.then(xe),typeof ue=="function"&&te.catch(ue)}function p(te){return typeof te!="string"&&(console.warn(te+" used as a key, but it is not a string."),te=String(te)),te}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,x="readonly",_="readwrite";function C(te){for(var xe=te.length,ue=new ArrayBuffer(xe),De=new Uint8Array(ue),Pe=0;Pe<xe;Pe++)De[Pe]=te.charCodeAt(Pe);return ue}function T(te){return new f(function(xe){var ue=te.transaction(g,_),De=c([""]);ue.objectStore(g).put(De,"key"),ue.onabort=function(Pe){Pe.preventDefault(),Pe.stopPropagation(),xe(!1)},ue.oncomplete=function(){var Pe=navigator.userAgent.match(/Chrome\/(\d+)/),Se=navigator.userAgent.match(/Edge\//);xe(Se||!Pe||parseInt(Pe[1],10)>=43)}}).catch(function(){return!1})}function S(te){return typeof y=="boolean"?f.resolve(y):T(te).then(function(xe){return y=xe,y})}function k(te){var xe=v[te.name],ue={};ue.promise=new f(function(De,Pe){ue.resolve=De,ue.reject=Pe}),xe.deferredOperations.push(ue),xe.dbReady?xe.dbReady=xe.dbReady.then(function(){return ue.promise}):xe.dbReady=ue.promise}function I(te){var xe=v[te.name],ue=xe.deferredOperations.pop();if(ue)return ue.resolve(),ue.promise}function R(te,xe){var ue=v[te.name],De=ue.deferredOperations.pop();if(De)return De.reject(xe),De.promise}function F(te,xe){return new f(function(ue,De){if(v[te.name]=v[te.name]||W(),te.db)if(xe)k(te),te.db.close();else return ue(te.db);var Pe=[te.name];xe&&Pe.push(te.version);var Se=u.open.apply(u,Pe);xe&&(Se.onupgradeneeded=function(Qe){var pt=Se.result;try{pt.createObjectStore(te.storeName),Qe.oldVersion<=1&&pt.createObjectStore(g)}catch(yt){if(yt.name==="ConstraintError")console.warn('The database "'+te.name+'" has been upgraded from version '+Qe.oldVersion+" to version "+Qe.newVersion+', but the storage "'+te.storeName+'" already exists.');else throw yt}}),Se.onerror=function(Qe){Qe.preventDefault(),De(Se.error)},Se.onsuccess=function(){var Qe=Se.result;Qe.onversionchange=function(pt){pt.target.close()},ue(Qe),I(te)}})}function O(te){return F(te,!1)}function B(te){return F(te,!0)}function H(te,xe){if(!te.db)return!0;var ue=!te.db.objectStoreNames.contains(te.storeName),De=te.version<te.db.version,Pe=te.version>te.db.version;if(De&&(te.version!==xe&&console.warn('The database "'+te.name+`" can't be downgraded from version `+te.db.version+" to version "+te.version+"."),te.version=te.db.version),Pe||ue){if(ue){var Se=te.db.version+1;Se>te.version&&(te.version=Se)}return!0}return!1}function U(te){return new f(function(xe,ue){var De=new FileReader;De.onerror=ue,De.onloadend=function(Pe){var Se=btoa(Pe.target.result||"");xe({__local_forage_encoded_blob:!0,data:Se,type:te.type})},De.readAsBinaryString(te)})}function G(te){var xe=C(atob(te.data));return c([xe],{type:te.type})}function Y(te){return te&&te.__local_forage_encoded_blob}function Q(te){var xe=this,ue=xe._initReady().then(function(){var De=v[xe._dbInfo.name];if(De&&De.dbReady)return De.dbReady});return h(ue,te,te),ue}function M(te){k(te);for(var xe=v[te.name],ue=xe.forages,De=0;De<ue.length;De++){var Pe=ue[De];Pe._dbInfo.db&&(Pe._dbInfo.db.close(),Pe._dbInfo.db=null)}return te.db=null,O(te).then(function(Se){return te.db=Se,H(te)?B(te):Se}).then(function(Se){te.db=xe.db=Se;for(var Qe=0;Qe<ue.length;Qe++)ue[Qe]._dbInfo.db=Se}).catch(function(Se){throw R(te,Se),Se})}function j(te,xe,ue,De){De===void 0&&(De=1);try{var Pe=te.db.transaction(te.storeName,xe);ue(null,Pe)}catch(Se){if(De>0&&(!te.db||Se.name==="InvalidStateError"||Se.name==="NotFoundError"))return f.resolve().then(function(){if(!te.db||Se.name==="NotFoundError"&&!te.db.objectStoreNames.contains(te.storeName)&&te.version<=te.db.version)return te.db&&(te.version=te.db.version+1),B(te)}).then(function(){return M(te).then(function(){j(te,xe,ue,De-1)})}).catch(ue);ue(Se)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(te){var xe=this,ue={db:null};if(te)for(var De in te)ue[De]=te[De];var Pe=v[ue.name];Pe||(Pe=W(),v[ue.name]=Pe),Pe.forages.push(xe),xe._initReady||(xe._initReady=xe.ready,xe.ready=Q);var Se=[];function Qe(){return f.resolve()}for(var pt=0;pt<Pe.forages.length;pt++){var yt=Pe.forages[pt];yt!==xe&&Se.push(yt._initReady().catch(Qe))}var vt=Pe.forages.slice(0);return f.all(Se).then(function(){return ue.db=Pe.db,O(ue)}).then(function(It){return ue.db=It,H(ue,xe._defaultConfig.version)?B(ue):It}).then(function(It){ue.db=Pe.db=It,xe._dbInfo=ue;for(var zt=0;zt<vt.length;zt++){var Xn=vt[zt];Xn!==xe&&(Xn._dbInfo.db=ue.db,Xn._dbInfo.version=ue.version)}})}function q(te,xe){var ue=this;te=p(te);var De=new f(function(Pe,Se){ue.ready().then(function(){j(ue._dbInfo,x,function(Qe,pt){if(Qe)return Se(Qe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.get(te);vt.onsuccess=function(){var It=vt.result;It===void 0&&(It=null),Y(It)&&(It=G(It)),Pe(It)},vt.onerror=function(){Se(vt.error)}}catch(It){Se(It)}})}).catch(Se)});return d(De,xe),De}function J(te,xe){var ue=this,De=new f(function(Pe,Se){ue.ready().then(function(){j(ue._dbInfo,x,function(Qe,pt){if(Qe)return Se(Qe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.openCursor(),It=1;vt.onsuccess=function(){var zt=vt.result;if(zt){var Xn=zt.value;Y(Xn)&&(Xn=G(Xn));var nn=te(Xn,zt.key,It++);nn!==void 0?Pe(nn):zt.continue()}else Pe()},vt.onerror=function(){Se(vt.error)}}catch(zt){Se(zt)}})}).catch(Se)});return d(De,xe),De}function re(te,xe,ue){var De=this;te=p(te);var Pe=new f(function(Se,Qe){var pt;De.ready().then(function(){return pt=De._dbInfo,b.call(xe)==="[object Blob]"?S(pt.db).then(function(yt){return yt?xe:U(xe)}):xe}).then(function(yt){j(De._dbInfo,_,function(vt,It){if(vt)return Qe(vt);try{var zt=It.objectStore(De._dbInfo.storeName);yt===null&&(yt=void 0);var Xn=zt.put(yt,te);It.oncomplete=function(){yt===void 0&&(yt=null),Se(yt)},It.onabort=It.onerror=function(){var nn=Xn.error?Xn.error:Xn.transaction.error;Qe(nn)}}catch(nn){Qe(nn)}})}).catch(Qe)});return d(Pe,ue),Pe}function ve(te,xe){var ue=this;te=p(te);var De=new f(function(Pe,Se){ue.ready().then(function(){j(ue._dbInfo,_,function(Qe,pt){if(Qe)return Se(Qe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.delete(te);pt.oncomplete=function(){Pe()},pt.onerror=function(){Se(vt.error)},pt.onabort=function(){var It=vt.error?vt.error:vt.transaction.error;Se(It)}}catch(It){Se(It)}})}).catch(Se)});return d(De,xe),De}function pe(te){var xe=this,ue=new f(function(De,Pe){xe.ready().then(function(){j(xe._dbInfo,_,function(Se,Qe){if(Se)return Pe(Se);try{var pt=Qe.objectStore(xe._dbInfo.storeName),yt=pt.clear();Qe.oncomplete=function(){De()},Qe.onabort=Qe.onerror=function(){var vt=yt.error?yt.error:yt.transaction.error;Pe(vt)}}catch(vt){Pe(vt)}})}).catch(Pe)});return d(ue,te),ue}function Ae(te){var xe=this,ue=new f(function(De,Pe){xe.ready().then(function(){j(xe._dbInfo,x,function(Se,Qe){if(Se)return Pe(Se);try{var pt=Qe.objectStore(xe._dbInfo.storeName),yt=pt.count();yt.onsuccess=function(){De(yt.result)},yt.onerror=function(){Pe(yt.error)}}catch(vt){Pe(vt)}})}).catch(Pe)});return d(ue,te),ue}function ke(te,xe){var ue=this,De=new f(function(Pe,Se){if(te<0){Pe(null);return}ue.ready().then(function(){j(ue._dbInfo,x,function(Qe,pt){if(Qe)return Se(Qe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=!1,It=yt.openKeyCursor();It.onsuccess=function(){var zt=It.result;if(!zt){Pe(null);return}te===0||vt?Pe(zt.key):(vt=!0,zt.advance(te))},It.onerror=function(){Se(It.error)}}catch(zt){Se(zt)}})}).catch(Se)});return d(De,xe),De}function it(te){var xe=this,ue=new f(function(De,Pe){xe.ready().then(function(){j(xe._dbInfo,x,function(Se,Qe){if(Se)return Pe(Se);try{var pt=Qe.objectStore(xe._dbInfo.storeName),yt=pt.openKeyCursor(),vt=[];yt.onsuccess=function(){var It=yt.result;if(!It){De(vt);return}vt.push(It.key),It.continue()},yt.onerror=function(){Pe(yt.error)}}catch(It){Pe(It)}})}).catch(Pe)});return d(ue,te),ue}function Re(te,xe){xe=m.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var De=this,Pe;if(!te.name)Pe=f.reject("Invalid arguments");else{var Se=te.name===ue.name&&De._dbInfo.db,Qe=Se?f.resolve(De._dbInfo.db):O(te).then(function(pt){var yt=v[te.name],vt=yt.forages;yt.db=pt;for(var It=0;It<vt.length;It++)vt[It]._dbInfo.db=pt;return pt});te.storeName?Pe=Qe.then(function(pt){if(pt.objectStoreNames.contains(te.storeName)){var yt=pt.version+1;k(te);var vt=v[te.name],It=vt.forages;pt.close();for(var zt=0;zt<It.length;zt++){var Xn=It[zt];Xn._dbInfo.db=null,Xn._dbInfo.version=yt}var nn=new f(function(gr,si){var Pr=u.open(te.name,yt);Pr.onerror=function(Xo){var sf=Pr.result;sf.close(),si(Xo)},Pr.onupgradeneeded=function(){var Xo=Pr.result;Xo.deleteObjectStore(te.storeName)},Pr.onsuccess=function(){var Xo=Pr.result;Xo.close(),gr(Xo)}});return nn.then(function(gr){vt.db=gr;for(var si=0;si<It.length;si++){var Pr=It[si];Pr._dbInfo.db=gr,I(Pr._dbInfo)}}).catch(function(gr){throw(R(te,gr)||f.resolve()).catch(function(){}),gr})}}):Pe=Qe.then(function(pt){k(te);var yt=v[te.name],vt=yt.forages;pt.close();for(var It=0;It<vt.length;It++){var zt=vt[It];zt._dbInfo.db=null}var Xn=new f(function(nn,gr){var si=u.deleteDatabase(te.name);si.onerror=function(){var Pr=si.result;Pr&&Pr.close(),gr(si.error)},si.onblocked=function(){console.warn('dropInstance blocked for database "'+te.name+'" until all open connections are closed')},si.onsuccess=function(){var Pr=si.result;Pr&&Pr.close(),nn(Pr)}});return Xn.then(function(nn){yt.db=nn;for(var gr=0;gr<vt.length;gr++){var si=vt[gr];I(si._dbInfo)}}).catch(function(nn){throw(R(te,nn)||f.resolve()).catch(function(){}),nn})})}return d(Pe,xe),Pe}var ut={_driver:"asyncStorage",_initStorage:L,_support:l(),iterate:J,getItem:q,setItem:re,removeItem:ve,clear:pe,length:Ae,key:ke,keys:it,dropInstance:Re};function Xe(){return typeof openDatabase=="function"}var Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gt="~~local_forage_type~",Ie=/^~~local_forage_type~([^~]+)~/,Ve="__lfsc__:",ft=Ve.length,_t="arbf",$t="blob",st="si08",X="ui08",de="uic8",we="si16",ae="si32",he="ur16",Ee="ui32",Me="fl32",Be="fl64",lt=ft+_t.length,Ze=Object.prototype.toString;function Xt(te){var xe=te.length*.75,ue=te.length,De,Pe=0,Se,Qe,pt,yt;te[te.length-1]==="="&&(xe--,te[te.length-2]==="="&&xe--);var vt=new ArrayBuffer(xe),It=new Uint8Array(vt);for(De=0;De<ue;De+=4)Se=Tt.indexOf(te[De]),Qe=Tt.indexOf(te[De+1]),pt=Tt.indexOf(te[De+2]),yt=Tt.indexOf(te[De+3]),It[Pe++]=Se<<2|Qe>>4,It[Pe++]=(Qe&15)<<4|pt>>2,It[Pe++]=(pt&3)<<6|yt&63;return vt}function fn(te){var xe=new Uint8Array(te),ue="",De;for(De=0;De<xe.length;De+=3)ue+=Tt[xe[De]>>2],ue+=Tt[(xe[De]&3)<<4|xe[De+1]>>4],ue+=Tt[(xe[De+1]&15)<<2|xe[De+2]>>6],ue+=Tt[xe[De+2]&63];return xe.length%3===2?ue=ue.substring(0,ue.length-1)+"=":xe.length%3===1&&(ue=ue.substring(0,ue.length-2)+"=="),ue}function Wt(te,xe){var ue="";if(te&&(ue=Ze.call(te)),te&&(ue==="[object ArrayBuffer]"||te.buffer&&Ze.call(te.buffer)==="[object ArrayBuffer]")){var De,Pe=Ve;te instanceof ArrayBuffer?(De=te,Pe+=_t):(De=te.buffer,ue==="[object Int8Array]"?Pe+=st:ue==="[object Uint8Array]"?Pe+=X:ue==="[object Uint8ClampedArray]"?Pe+=de:ue==="[object Int16Array]"?Pe+=we:ue==="[object Uint16Array]"?Pe+=he:ue==="[object Int32Array]"?Pe+=ae:ue==="[object Uint32Array]"?Pe+=Ee:ue==="[object Float32Array]"?Pe+=Me:ue==="[object Float64Array]"?Pe+=Be:xe(new Error("Failed to get type for BinaryArray"))),xe(Pe+fn(De))}else if(ue==="[object Blob]"){var Se=new FileReader;Se.onload=function(){var Qe=gt+te.type+"~"+fn(this.result);xe(Ve+$t+Qe)},Se.readAsArrayBuffer(te)}else try{xe(JSON.stringify(te))}catch(Qe){console.error("Couldn't convert value into a JSON string: ",te),xe(null,Qe)}}function an(te){if(te.substring(0,ft)!==Ve)return JSON.parse(te);var xe=te.substring(lt),ue=te.substring(ft,lt),De;if(ue===$t&&Ie.test(xe)){var Pe=xe.match(Ie);De=Pe[1],xe=xe.substring(Pe[0].length)}var Se=Xt(xe);switch(ue){case _t:return Se;case $t:return c([Se],{type:De});case st:return new Int8Array(Se);case X:return new Uint8Array(Se);case de:return new Uint8ClampedArray(Se);case we:return new Int16Array(Se);case he:return new Uint16Array(Se);case ae:return new Int32Array(Se);case Ee:return new Uint32Array(Se);case Me:return new Float32Array(Se);case Be:return new Float64Array(Se);default:throw new Error("Unkown type: "+ue)}}var Cn={serialize:Wt,deserialize:an,stringToBuffer:Xt,bufferToString:fn};function $n(te,xe,ue,De){te.executeSql("CREATE TABLE IF NOT EXISTS "+xe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ue,De)}function ki(te){var xe=this,ue={db:null};if(te)for(var De in te)ue[De]=typeof te[De]!="string"?te[De].toString():te[De];var Pe=new f(function(Se,Qe){try{ue.db=openDatabase(ue.name,String(ue.version),ue.description,ue.size)}catch(pt){return Qe(pt)}ue.db.transaction(function(pt){$n(pt,ue,function(){xe._dbInfo=ue,Se()},function(yt,vt){Qe(vt)})},Qe)});return ue.serializer=Cn,Pe}function hi(te,xe,ue,De,Pe,Se){te.executeSql(ue,De,Pe,function(Qe,pt){pt.code===pt.SYNTAX_ERR?Qe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[xe.storeName],function(yt,vt){vt.rows.length?Se(yt,pt):$n(yt,xe,function(){yt.executeSql(ue,De,Pe,Se)},Se)},Se):Se(Qe,pt)},Se)}function Li(te,xe){var ue=this;te=p(te);var De=new f(function(Pe,Se){ue.ready().then(function(){var Qe=ue._dbInfo;Qe.db.transaction(function(pt){hi(pt,Qe,"SELECT * FROM "+Qe.storeName+" WHERE key = ? LIMIT 1",[te],function(yt,vt){var It=vt.rows.length?vt.rows.item(0).value:null;It&&(It=Qe.serializer.deserialize(It)),Pe(It)},function(yt,vt){Se(vt)})})}).catch(Se)});return d(De,xe),De}function Ds(te,xe){var ue=this,De=new f(function(Pe,Se){ue.ready().then(function(){var Qe=ue._dbInfo;Qe.db.transaction(function(pt){hi(pt,Qe,"SELECT * FROM "+Qe.storeName,[],function(yt,vt){for(var It=vt.rows,zt=It.length,Xn=0;Xn<zt;Xn++){var nn=It.item(Xn),gr=nn.value;if(gr&&(gr=Qe.serializer.deserialize(gr)),gr=te(gr,nn.key,Xn+1),gr!==void 0){Pe(gr);return}}Pe()},function(yt,vt){Se(vt)})})}).catch(Se)});return d(De,xe),De}function Br(te,xe,ue,De){var Pe=this;te=p(te);var Se=new f(function(Qe,pt){Pe.ready().then(function(){xe===void 0&&(xe=null);var yt=xe,vt=Pe._dbInfo;vt.serializer.serialize(xe,function(It,zt){zt?pt(zt):vt.db.transaction(function(Xn){hi(Xn,vt,"INSERT OR REPLACE INTO "+vt.storeName+" (key, value) VALUES (?, ?)",[te,It],function(){Qe(yt)},function(nn,gr){pt(gr)})},function(Xn){if(Xn.code===Xn.QUOTA_ERR){if(De>0){Qe(Br.apply(Pe,[te,yt,ue,De-1]));return}pt(Xn)}})})}).catch(pt)});return d(Se,ue),Se}function cs(te,xe,ue){return Br.apply(this,[te,xe,ue,1])}function cl(te,xe){var ue=this;te=p(te);var De=new f(function(Pe,Se){ue.ready().then(function(){var Qe=ue._dbInfo;Qe.db.transaction(function(pt){hi(pt,Qe,"DELETE FROM "+Qe.storeName+" WHERE key = ?",[te],function(){Pe()},function(yt,vt){Se(vt)})})}).catch(Se)});return d(De,xe),De}function $o(te){var xe=this,ue=new f(function(De,Pe){xe.ready().then(function(){var Se=xe._dbInfo;Se.db.transaction(function(Qe){hi(Qe,Se,"DELETE FROM "+Se.storeName,[],function(){De()},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function Wa(te){var xe=this,ue=new f(function(De,Pe){xe.ready().then(function(){var Se=xe._dbInfo;Se.db.transaction(function(Qe){hi(Qe,Se,"SELECT COUNT(key) as c FROM "+Se.storeName,[],function(pt,yt){var vt=yt.rows.item(0).c;De(vt)},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function Nr(te,xe){var ue=this,De=new f(function(Pe,Se){ue.ready().then(function(){var Qe=ue._dbInfo;Qe.db.transaction(function(pt){hi(pt,Qe,"SELECT key FROM "+Qe.storeName+" WHERE id = ? LIMIT 1",[te+1],function(yt,vt){var It=vt.rows.length?vt.rows.item(0).key:null;Pe(It)},function(yt,vt){Se(vt)})})}).catch(Se)});return d(De,xe),De}function Ri(te){var xe=this,ue=new f(function(De,Pe){xe.ready().then(function(){var Se=xe._dbInfo;Se.db.transaction(function(Qe){hi(Qe,Se,"SELECT key FROM "+Se.storeName,[],function(pt,yt){for(var vt=[],It=0;It<yt.rows.length;It++)vt.push(yt.rows.item(It).key);De(vt)},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function pi(te){return new f(function(xe,ue){te.transaction(function(De){De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Pe,Se){for(var Qe=[],pt=0;pt<Se.rows.length;pt++)Qe.push(Se.rows.item(pt).name);xe({db:te,storeNames:Qe})},function(Pe,Se){ue(Se)})},function(De){ue(De)})})}function Hs(te,xe){xe=m.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var De=this,Pe;return te.name?Pe=new f(function(Se){var Qe;te.name===ue.name?Qe=De._dbInfo.db:Qe=openDatabase(te.name,"","",0),te.storeName?Se({db:Qe,storeNames:[te.storeName]}):Se(pi(Qe))}).then(function(Se){return new f(function(Qe,pt){Se.db.transaction(function(yt){function vt(nn){return new f(function(gr,si){yt.executeSql("DROP TABLE IF EXISTS "+nn,[],function(){gr()},function(Pr,Xo){si(Xo)})})}for(var It=[],zt=0,Xn=Se.storeNames.length;zt<Xn;zt++)It.push(vt(Se.storeNames[zt]));f.all(It).then(function(){Qe()}).catch(function(nn){pt(nn)})},function(yt){pt(yt)})})}):Pe=f.reject("Invalid arguments"),d(Pe,xe),Pe}var ri={_driver:"webSQLStorage",_initStorage:ki,_support:Xe(),iterate:Ds,getItem:Li,setItem:cs,removeItem:cl,clear:$o,length:Wa,key:Nr,keys:Ri,dropInstance:Hs};function Ni(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function be(te,xe){var ue=te.name+"/";return te.storeName!==xe.storeName&&(ue+=te.storeName+"/"),ue}function ce(){var te="_localforage_support_test";try{return localStorage.setItem(te,!0),localStorage.removeItem(te),!1}catch{return!0}}function _e(){return!ce()||localStorage.length>0}function Ue(te){var xe=this,ue={};if(te)for(var De in te)ue[De]=te[De];return ue.keyPrefix=be(te,xe._defaultConfig),_e()?(xe._dbInfo=ue,ue.serializer=Cn,f.resolve()):f.reject()}function je(te){var xe=this,ue=xe.ready().then(function(){for(var De=xe._dbInfo.keyPrefix,Pe=localStorage.length-1;Pe>=0;Pe--){var Se=localStorage.key(Pe);Se.indexOf(De)===0&&localStorage.removeItem(Se)}});return d(ue,te),ue}function Dt(te,xe){var ue=this;te=p(te);var De=ue.ready().then(function(){var Pe=ue._dbInfo,Se=localStorage.getItem(Pe.keyPrefix+te);return Se&&(Se=Pe.serializer.deserialize(Se)),Se});return d(De,xe),De}function Ht(te,xe){var ue=this,De=ue.ready().then(function(){for(var Pe=ue._dbInfo,Se=Pe.keyPrefix,Qe=Se.length,pt=localStorage.length,yt=1,vt=0;vt<pt;vt++){var It=localStorage.key(vt);if(It.indexOf(Se)===0){var zt=localStorage.getItem(It);if(zt&&(zt=Pe.serializer.deserialize(zt)),zt=te(zt,It.substring(Qe),yt++),zt!==void 0)return zt}}});return d(De,xe),De}function xn(te,xe){var ue=this,De=ue.ready().then(function(){var Pe=ue._dbInfo,Se;try{Se=localStorage.key(te)}catch{Se=null}return Se&&(Se=Se.substring(Pe.keyPrefix.length)),Se});return d(De,xe),De}function rr(te){var xe=this,ue=xe.ready().then(function(){for(var De=xe._dbInfo,Pe=localStorage.length,Se=[],Qe=0;Qe<Pe;Qe++){var pt=localStorage.key(Qe);pt.indexOf(De.keyPrefix)===0&&Se.push(pt.substring(De.keyPrefix.length))}return Se});return d(ue,te),ue}function mr(te){var xe=this,ue=xe.keys().then(function(De){return De.length});return d(ue,te),ue}function jn(te,xe){var ue=this;te=p(te);var De=ue.ready().then(function(){var Pe=ue._dbInfo;localStorage.removeItem(Pe.keyPrefix+te)});return d(De,xe),De}function Dr(te,xe,ue){var De=this;te=p(te);var Pe=De.ready().then(function(){xe===void 0&&(xe=null);var Se=xe;return new f(function(Qe,pt){var yt=De._dbInfo;yt.serializer.serialize(xe,function(vt,It){if(It)pt(It);else try{localStorage.setItem(yt.keyPrefix+te,vt),Qe(Se)}catch(zt){(zt.name==="QuotaExceededError"||zt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&pt(zt),pt(zt)}})})});return d(Pe,ue),Pe}function ii(te,xe){if(xe=m.apply(this,arguments),te=typeof te!="function"&&te||{},!te.name){var ue=this.config();te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName}var De=this,Pe;return te.name?Pe=new f(function(Se){te.storeName?Se(be(te,De._defaultConfig)):Se(te.name+"/")}).then(function(Se){for(var Qe=localStorage.length-1;Qe>=0;Qe--){var pt=localStorage.key(Qe);pt.indexOf(Se)===0&&localStorage.removeItem(pt)}}):Pe=f.reject("Invalid arguments"),d(Pe,xe),Pe}var dn={_driver:"localStorageWrapper",_initStorage:Ue,_support:Ni(),iterate:Ht,getItem:Dt,setItem:Dr,removeItem:jn,clear:je,length:mr,key:xn,keys:rr,dropInstance:ii},Ir=function(xe,ue){return xe===ue||typeof xe=="number"&&typeof ue=="number"&&isNaN(xe)&&isNaN(ue)},Jr=function(xe,ue){for(var De=xe.length,Pe=0;Pe<De;){if(Ir(xe[Pe],ue))return!0;Pe++}return!1},ir=Array.isArray||function(te){return Object.prototype.toString.call(te)==="[object Array]"},un={},jr={},Pi={INDEXEDDB:ut,WEBSQL:ri,LOCALSTORAGE:dn},Is=[Pi.INDEXEDDB._driver,Pi.WEBSQL._driver,Pi.LOCALSTORAGE._driver],_i=["dropInstance"],ns=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(_i),Ko={description:"",driver:Is.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ga(te,xe){te[xe]=function(){var ue=arguments;return te.ready().then(function(){return te[xe].apply(te,ue)})}}function Mo(){for(var te=1;te<arguments.length;te++){var xe=arguments[te];if(xe)for(var ue in xe)xe.hasOwnProperty(ue)&&(ir(xe[ue])?arguments[0][ue]=xe[ue].slice():arguments[0][ue]=xe[ue])}return arguments[0]}var ec=function(){function te(xe){o(this,te);for(var ue in Pi)if(Pi.hasOwnProperty(ue)){var De=Pi[ue],Pe=De._driver;this[ue]=Pe,un[Pe]||this.defineDriver(De)}this._defaultConfig=Mo({},Ko),this._config=Mo({},this._defaultConfig,xe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return te.prototype.config=function(ue){if((typeof ue>"u"?"undefined":s(ue))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var De in ue){if(De==="storeName"&&(ue[De]=ue[De].replace(/\W/g,"_")),De==="version"&&typeof ue[De]!="number")return new Error("Database version must be a number.");this._config[De]=ue[De]}return"driver"in ue&&ue.driver?this.setDriver(this._config.driver):!0}else return typeof ue=="string"?this._config[ue]:this._config},te.prototype.defineDriver=function(ue,De,Pe){var Se=new f(function(Qe,pt){try{var yt=ue._driver,vt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ue._driver){pt(vt);return}for(var It=ns.concat("_initStorage"),zt=0,Xn=It.length;zt<Xn;zt++){var nn=It[zt],gr=!Jr(_i,nn);if((gr||ue[nn])&&typeof ue[nn]!="function"){pt(vt);return}}var si=function(){for(var sf=function(fl){return function(){var xu=new Error("Method "+fl+" is not implemented by the current driver"),ah=f.reject(xu);return d(ah,arguments[arguments.length-1]),ah}},oh=0,Vy=_i.length;oh<Vy;oh++){var Lp=_i[oh];ue[Lp]||(ue[Lp]=sf(Lp))}};si();var Pr=function(sf){un[yt]&&console.info("Redefining LocalForage driver: "+yt),un[yt]=ue,jr[yt]=sf,Qe()};"_support"in ue?ue._support&&typeof ue._support=="function"?ue._support().then(Pr,pt):Pr(!!ue._support):Pr(!0)}catch(Xo){pt(Xo)}});return h(Se,De,Pe),Se},te.prototype.driver=function(){return this._driver||null},te.prototype.getDriver=function(ue,De,Pe){var Se=un[ue]?f.resolve(un[ue]):f.reject(new Error("Driver not found."));return h(Se,De,Pe),Se},te.prototype.getSerializer=function(ue){var De=f.resolve(Cn);return h(De,ue),De},te.prototype.ready=function(ue){var De=this,Pe=De._driverSet.then(function(){return De._ready===null&&(De._ready=De._initDriver()),De._ready});return h(Pe,ue,ue),Pe},te.prototype.setDriver=function(ue,De,Pe){var Se=this;ir(ue)||(ue=[ue]);var Qe=this._getSupportedDrivers(ue);function pt(){Se._config.driver=Se.driver()}function yt(zt){return Se._extend(zt),pt(),Se._ready=Se._initStorage(Se._config),Se._ready}function vt(zt){return function(){var Xn=0;function nn(){for(;Xn<zt.length;){var gr=zt[Xn];return Xn++,Se._dbInfo=null,Se._ready=null,Se.getDriver(gr).then(yt).catch(nn)}pt();var si=new Error("No available storage method found.");return Se._driverSet=f.reject(si),Se._driverSet}return nn()}}var It=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=It.then(function(){var zt=Qe[0];return Se._dbInfo=null,Se._ready=null,Se.getDriver(zt).then(function(Xn){Se._driver=Xn._driver,pt(),Se._wrapLibraryMethodsWithReady(),Se._initDriver=vt(Qe)})}).catch(function(){pt();var zt=new Error("No available storage method found.");return Se._driverSet=f.reject(zt),Se._driverSet}),h(this._driverSet,De,Pe),this._driverSet},te.prototype.supports=function(ue){return!!jr[ue]},te.prototype._extend=function(ue){Mo(this,ue)},te.prototype._getSupportedDrivers=function(ue){for(var De=[],Pe=0,Se=ue.length;Pe<Se;Pe++){var Qe=ue[Pe];this.supports(Qe)&&De.push(Qe)}return De},te.prototype._wrapLibraryMethodsWithReady=function(){for(var ue=0,De=ns.length;ue<De;ue++)Ga(this,ns[ue])},te.prototype.createInstance=function(ue){return new te(ue)},te}(),Zf=new ec;r.exports=Zf},{3:3}]},{},[4])(4)})})(XGe);var BAn=XGe.exports;const F2=_p(BAn);var Qa=[];for(var hW=0;hW<256;++hW)Qa.push((hW+256).toString(16).slice(1));function jAn(e,t=0){return(Qa[e[t+0]]+Qa[e[t+1]]+Qa[e[t+2]]+Qa[e[t+3]]+"-"+Qa[e[t+4]]+Qa[e[t+5]]+"-"+Qa[e[t+6]]+Qa[e[t+7]]+"-"+Qa[e[t+8]]+Qa[e[t+9]]+"-"+Qa[e[t+10]]+Qa[e[t+11]]+Qa[e[t+12]]+Qa[e[t+13]]+Qa[e[t+14]]+Qa[e[t+15]]).toLowerCase()}var FO,UAn=new Uint8Array(16);function zAn(){if(!FO&&(FO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!FO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return FO(UAn)}var VAn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const aTe={randomUUID:VAn};function iL(e,t,n){if(aTe.randomUUID&&!e)return aTe.randomUUID();e=e||{};var r=e.random||(e.rng||zAn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,jAn(r)}class QGe{constructor(t){gl(this,"engine");gl(this,"connected",!1);gl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function sL(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function uI(e){return e.participantId!==void 0}class s0 extends QGe{constructor(){super("firebase");gl(this,"RECAPTCHAV3TOKEN","6LdQ8qUqAAAAAPE14fuWshHdzOerFOSMhzEdA1Wp");gl(this,"firestore");gl(this,"collectionPrefix","prod-");gl(this,"studyCollection");gl(this,"storage");gl(this,"studyId","");gl(this,"localForage",F2.createInstance({name:"currentParticipantId"}));gl(this,"participantData",null);gl(this,"userManagementData",{});const n=lj.parse(`
{
  apiKey: "AIzaSyBB3ZVfd5sNerH0LLPbe8Pn-NXtLOO4-8M",
  authDomain: "vis-decode-operator-1eb8d.firebaseapp.com",
  projectId: "vis-decode-operator-1eb8d",
  storageBucket: "vis-decode-operator-1eb8d.firebasestorage.app",
  messagingSenderId: "967262141033",
  appId: "1:967262141033:web:b1ed6ad992b441194440f8"
}
`),r=mqe(n);this.firestore=jTn(r,{}),this.storage=fCe();try{FAn(r,{provider:new yfe(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await UTn(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=QM();if(!i.currentUser&&(await mwn(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=uc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await sL(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(uI(a))return this.participantData=a,a;const l=await sL(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=vs(this.studyCollection,"configHash"),r=await NO(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=vs(this.studyCollection,"configHash");await Ou(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=cf(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=iL(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=vs(this.studyCollection,"sequenceAssignment");await Ou(i,{});const s=uc(i,"sequenceAssignment"),o=vs(s,this.currentParticipantId),a=cW(s,YCe("rejected","==",!0),YCe("claimed","==",!1)),u=await b2(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await Ou(m.ref,{claimed:!0}),await Ou(o,{participantId:this.currentParticipantId,timestamp:g,rejected:!1,claimed:!1,completed:null}))}else r.dataCollectionEnabled&&await Ou(o,{participantId:this.currentParticipantId,timestamp:ZCe(),rejected:!1,claimed:!1,completed:null});const l=cW(s,KCe("timestamp","asc")),d=(await b2(l)).docs.map(m=>m.data()).filter(m=>!m.rejected).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=cf(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await oI(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");uI(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=fCe(),s=await SO(cf(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return uI(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=iL();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=vs(this.studyCollection,"sequenceAssignment"),i=uc(r,"sequenceAssignment"),s=vs(i,this.currentParticipantId);return await JCe(s,{completed:ZCe()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=uc(this.firestore,"user-management"),i=await b2(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Ou(vs(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Ou(vs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Ou(vs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Ou(vs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Ou(vs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=cf(this.storage,`${this.collectionPrefix}${n}/participants`),i=await oI(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");uI(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=uc(this.firestore,`${this.collectionPrefix}${n}`),o=cf(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!uI(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=vs(s,"sequenceAssignment"),l=uc(u,"sequenceAssignment"),c=vs(l,r);await JCe(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=vs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Ou(s,{[r]:i},{merge:!0})}async getModes(n){const r=vs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await NO(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Ou(r,s),s}async getParticipantsStatusCounts(n){const r=uc(this.firestore,`${this.collectionPrefix}${n}`),i=vs(r,"sequenceAssignment"),s=uc(i,"sequenceAssignment"),o=cW(s,KCe("timestamp","asc")),u=(await b2(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=vs(this.firestore,"metadata","collections"),i=await NO(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=vs(this.firestore,"metadata","collections");await Ou(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=vs(this.firestore,"metadata","collections");return await Ou(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=vs(this.firestore,"metadata","collections"),i=await NO(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Ou(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=cf(this.storage,n),s=(await oI(r)).items.map(o=>cCe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=cf(this.storage,n),o=(await oI(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=cf(this.storage,n),s=cf(this.storage,r),o=await SO(i),u=await(await fetch(o)).blob();await AO(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=uc(this.firestore,n),s=vs(i,"sequenceAssignment"),o=uc(s,"sequenceAssignment"),a=uc(this.firestore,r),u=vs(a,"sequenceAssignment");await Ou(u,{});const l=uc(u,"sequenceAssignment"),c=await b2(o),f=eTe(this.firestore);c.docs.forEach(d=>{const h=vs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=uc(this.firestore,n),i=vs(r,"sequenceAssignment"),s=uc(i,"sequenceAssignment"),o=await b2(s),a=eTe(this.firestore);o.forEach(u=>{const l=vs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=cf(this.storage,n);return(await oI(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=cf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await SO(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await SO(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=cf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await AO(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await AO(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await AO(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=cf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await cCe(i)}}const JGe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),XP=()=>N.useContext(JGe);function HAn({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=Oo(),l=async()=>{const h=QM();try{await _wn(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;N.useEffect(()=>{s(t);let h;if(u instanceof s0)try{h=QM()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof s0){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=wwn(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return E.jsx(JGe.Provider,{value:d,children:i.determiningStatus?E.jsx(Lf,{visible:!0}):e})}function qAn({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?E.jsx(_n.Td,{children:E.jsx(os,{miw:100,children:e.timedOut?E.jsx(Ye,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>E.jsxs(Fe,{children:[E.jsxs(Ye,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?E.jsx(Ye,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):E.jsx(Ye,{span:!0,children:n})]},`cell-${t}`))})}):E.jsx(_n.Td,{children:"N/A"})}function uTe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=B$e(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?E.jsxs(_n.Td,{children:[t.toFixed(1)," ","s",n&&E.jsxs(E.Fragment,{children:[E.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):E.jsx(_n.Td,{children:"N/A"})}function WAn(e){const{metaData:t}=e;return E.jsx(_n.Td,{children:E.jsx(zee,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:E.jsxs(os,{gap:"xs",children:[E.jsxs(Fe,{children:["IP:"," ",t.ip]}),E.jsxs(Fe,{children:["Language:"," ",t.language]}),E.jsxs(Fe,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),E.jsxs(Fe,{children:["User Agent:"," ",t.userAgent]})]})})})}function GAn({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Oo(),{studyId:i}=V0(),{user:s}=XP(),o=async(x,_)=>{if(r&&i)if(s.isAdmin){const C=_===""?"Rejected by admin":_;await r.rejectParticipant(i,x,C),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=N.useState([]),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(""),m=async()=>{c(!0),d(!1);const x=a.map(async _=>await o(_,h));await Promise.all(x),u([]),await n(),c(!1)};function g(x){x==="all"?a.length===e.length?u([]):u(e.map(_=>_.participantId)):a.includes(x)?u(a.filter(_=>_!==x)):u([...a,x])}const y=IRe(t.sequence),v=[E.jsx(_n.Th,{children:E.jsx(Jt,{justify:"center",children:E.jsx(Tc,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),E.jsx(_n.Th,{children:"ID"},"ID"),E.jsx(_n.Th,{children:"Status"},"status"),E.jsx(_n.Th,{children:"Tags"},"tags"),E.jsx(_n.Th,{children:"Meta"},"meta"),...y.flatMap(x=>[E.jsx(_n.Th,{children:x.componentName},`header-${x.componentName}-${x.timesSeenInBlock}`),E.jsxs(_n.Th,{children:[E.jsx("span",{style:{whiteSpace:"nowrap"},children:x.componentName})," ","Duration (clean)"]},`header-${x.componentName}-${x.timesSeenInBlock}-duration`)]),E.jsx(_n.Th,{children:"Total Duration (clean)"},"total-duration")],b=e.map(x=>E.jsxs(_n.Tr,{children:[E.jsx(_n.Td,{children:E.jsx(Jt,{justify:"center",children:E.jsx(Tc,{mb:-4,checked:a.includes(x.participantId),onChange:()=>g(x.participantId)})})}),E.jsx(_n.Td,{style:{whiteSpace:"nowrap"},children:x.participantId}),E.jsx(_n.Td,{children:E.jsxs(Jt,{direction:"column",miw:100,children:[E.jsxs(Jt,{direction:"row",align:"center",children:[x.rejected?E.jsx(ws,{label:"Rejected",children:E.jsx(ite,{size:16,color:"red",style:{marginBottom:-3}})}):x.completed?E.jsx(ws,{label:"Completed",children:E.jsx(Dke,{size:16,color:"teal",style:{marginBottom:-3}})}):E.jsx(ws,{label:"In Progress",children:E.jsx(Ike,{size:16,color:"orange",style:{marginBottom:-3}})}),!x.completed&&E.jsxs(Ye,{size:"sm",mb:-1,ml:4,children:[(Object.entries(x.answers).filter(([_,C])=>C.endTime!==-1&&C.endTime!==void 0).length/(dp(x.sequence).length-1)*100).toFixed(2),"%"]})]}),x.rejected&&E.jsx(Ye,{mt:5,fz:10,children:x.rejected.reason})]})}),E.jsx(_n.Td,{children:E.jsx(Jt,{direction:"column",miw:100,children:(x.participantTags||[]).map(_=>E.jsxs(Ye,{fz:10,children:["-"," ",_]},`tag-${_}`))})}),x.metadata?E.jsx(WAn,{metaData:x.metadata}):E.jsx(_n.Td,{children:"N/A"}),y.map(_=>{const C=kte(x.sequence,_.orderPath),T=C&&Object.entries(x.answers).sort((S,k)=>{const I=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10),R=parseInt(k[0].slice(k[0].lastIndexOf("_")+1),10);return I-R}).filter(([S])=>{const k=S.slice(0,S.lastIndexOf("_")),I=parseInt(S.slice(S.lastIndexOf("_")+1),10);return k===_.componentName&&I<=C[0].lastIndex&&I>=C[0].firstIndex});return T!==null&&T.length>=_.timesSeenInBlock+1&&T[_.timesSeenInBlock][1].endTime!==-1?E.jsxs(vi.Fragment,{children:[E.jsx(qAn,{cellData:T[_.timesSeenInBlock][1]}),E.jsx(uTe,{cellData:T[_.timesSeenInBlock][1]})]},`cellgroup-${x.participantId}-${_.componentName}-${_.timesSeenInBlock}`):E.jsxs(vi.Fragment,{children:[E.jsx(_n.Td,{children:"N/A"}),E.jsx(_n.Td,{children:"N/A"})]},`cellgroup-${x.participantId}-${_.componentName}-${_.timesSeenInBlock}`)}),E.jsx(uTe,{cellData:{startTime:Math.min(...Object.values(x.answers).filter(_=>_.endTime!==-1&&_.endTime!==void 0).map(_=>_.startTime)),endTime:Math.max(...Object.values(x.answers).filter(_=>_.endTime!==-1&&_.endTime!==void 0).map(_=>_.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(x.answers).flatMap(_=>_.windowEvents),timedOut:!1}},`cell-${x.participantId}-total-duration`)]},x.participantId));return e.length>0?E.jsxs(E.Fragment,{children:[E.jsx(Lf,{visible:l,overlayProps:{blur:2}}),E.jsxs(Jt,{justify:"space-between",mb:8,p:8,children:[E.jsx(Mi,{children:E.jsx(BA,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(x=>x.participantId))],searchable:!0,value:null,leftSection:E.jsx(Hpt,{size:14}),onChange:x=>x&&g(x)})}),E.jsxs(Mi,{children:[E.jsx(oqe,{visibleParticipants:e,studyId:i||""}),E.jsxs(bn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),E.jsx(Jt,{direction:"column",style:{width:"100%",overflow:"auto"},children:E.jsxs(_n,{striped:!0,withTableBorder:!0,children:[E.jsx(_n.Thead,{children:E.jsx(_n.Tr,{children:v})}),E.jsx(_n.Tbody,{children:b})]})}),E.jsxs(fo,{opened:f,onClose:()=>d(!1),title:E.jsxs(Ye,{children:["Reject Participants (",a.length,")"]}),children:[E.jsx(bg,{label:"Please enter the reason for rejection.",onChange:x=>p(x.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),E.jsx(bn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(Ku,{h:"xl"}),E.jsx(Jt,{justify:"center",align:"center",children:E.jsx(Ye,{children:"No data available"})})]})}function YAn({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1),[c,f]=N.useState(""),[d,h]=N.useState([]),[p,m]=N.useState(""),[g,y]=N.useState(""),[v,b]=N.useState(!1),[x,_]=N.useState(!1),{storageEngine:C}=Oo(),T=C,S=N.useCallback(async()=>{_(!0);const M=await T.getSnapshots(e);h(M),_(!1)},[T,e]);N.useEffect(()=>{S()},[S]);const k=async(M,...j)=>{b(!0);const W=await M(...j);W.status==="SUCCESS"?(S(),b(!1),await t(),W.notifications&&W.notifications.forEach(L=>{dR(L)})):(b(!1),dR({title:W.error.title,message:W.error.message,color:"red"}))},I=async()=>{await k(T.createSnapshot.bind(T),e,!1)},R=async()=>{m(""),r(!1),await k(T.createSnapshot.bind(T),e,!0)},F=async()=>{a(!1),await k(T.renameSnapshot.bind(T),c,g)},O=async M=>{await k(T.restoreSnapshot.bind(T),e,M)},B=async()=>{m(""),s(!1),await k(T.removeSnapshotOrLive.bind(T),c,!0)},H=async()=>{m(""),l(!1),await k(T.removeSnapshotOrLive.bind(T),e,!0)},U=()=>P0e({title:"Create a Snapshot",children:E.jsx(Ye,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>I()}),G=M=>P0e({title:"Restore Snapshot",children:E.jsx(Ye,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O(M)}),Y=M=>{const j=/-snapshot-(.+)$/,W=M.match(j);return W&&W[1]?W[1].replace("T"," "):null},Q=async M=>{const j=M.slice(M.indexOf("-")+1);return await T.getAllParticipantsDataByStudy(j)};return E.jsxs(E.Fragment,{children:[E.jsx(Lf,{visible:v}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(uo,{order:5,children:"Create a Snapshot"}),E.jsxs(Ye,{children:["This will create a snapshot of the live"," ",E.jsx(Ye,{span:!0,fw:700,children:e})," ","database. It will"," ",E.jsx(Ye,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),E.jsx(ws,{label:"Create a snapshot",children:E.jsx(bn,{onClick:U,children:"Snapshot"})})]}),E.jsx(Ku,{h:"lg"}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(uo,{order:5,children:"Archive Data"}),E.jsxs(Ye,{children:["This will create a snapshot of the live"," ",E.jsx(Ye,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),E.jsx(ws,{label:"Snapshot and Delete Data",children:E.jsx(bn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),E.jsx(Ku,{h:"lg"}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(uo,{order:5,children:"Delete Data"}),E.jsxs(Ye,{children:["This will delete the live"," ",E.jsx(Ye,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),E.jsx(ws,{label:"Delete Data",children:E.jsx(bn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),E.jsx(Ku,{h:"xl"}),E.jsxs(Jt,{direction:"column",children:[E.jsx(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:E.jsx(uo,{order:5,children:"Snapshots"})}),E.jsxs(Fe,{style:{position:"relative"},children:[E.jsx(Lf,{visible:x}),d.length>0?E.jsxs(_n,{children:[E.jsx(_n.Thead,{children:E.jsxs(_n.Tr,{children:[E.jsx(_n.Th,{children:"Snapshot Name"}),E.jsx(_n.Th,{children:"Date Created"}),E.jsx(_n.Th,{children:"Actions"})]})}),E.jsx(_n.Tbody,{children:d.map(M=>E.jsxs(_n.Tr,{children:[E.jsx(_n.Td,{children:M.alternateName}),E.jsx(_n.Td,{children:Y(M.originalName)}),E.jsx(_n.Td,{children:E.jsxs(Jt,{children:[E.jsx(ws,{label:"Rename",children:E.jsx(bn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(M.originalName)},children:E.jsx(Bpt,{})})}),E.jsx(ws,{label:"Restore Snapshot",children:E.jsx(bn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{G(M.originalName)},children:E.jsx(zpt,{})})}),E.jsx(ws,{label:"Delete Snapshot",children:E.jsx(bn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(M.originalName)},children:E.jsx(Nke,{})})}),E.jsx(oqe,{visibleParticipants:()=>Q(M.originalName),studyId:e,gap:"10px",fileName:M.alternateName})]})})]},M.originalName))})]}):E.jsx(Ye,{children:"No snapshots."})]})]}),E.jsxs(fo,{opened:n,onClose:()=>{r(!1),m("")},title:E.jsx(Ye,{children:"Archive Data"}),children:[E.jsx(Ye,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),E.jsx(bg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:M=>m(M.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),E.jsx(bn,{color:"red",onClick:R,disabled:p!==e,children:"Archive"})]})]}),E.jsxs(fo,{opened:i,onClose:()=>{s(!1),m("")},title:E.jsx(Ye,{children:"Delete Snapshot"}),children:[E.jsxs(Ye,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",E.jsx(Ye,{span:!0,fw:700,children:"irreversible"}),"."]}),E.jsx(bg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:M=>m(M.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),E.jsx(bn,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]}),E.jsxs(fo,{opened:o,onClose:()=>{a(!1),y("")},title:E.jsx(Ye,{children:"Rename Snapshot"}),children:[E.jsx(bg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:M=>y(M.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),E.jsx(bn,{color:"green",onClick:F,disabled:!g||g.length===0,children:"Rename"})]})]}),E.jsxs(fo,{opened:u,onClose:()=>{l(!1),m("")},title:E.jsx(Ye,{children:"Delete Live Data"}),children:[E.jsxs(Ye,{mb:"sm",children:["This will permanently delete the live"," ",E.jsx(Ye,{span:!0,fw:700,children:e})," ","data. This action is"," ",E.jsx(Ye,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),E.jsx(bg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:M=>m(M.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),E.jsx(bn,{color:"red",onClick:H,disabled:p!==e,children:"Delete"})]})]})]})}function KAn({studyId:e}){const{storageEngine:t}=Oo(),[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1);N.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&E.jsxs(os,{children:[E.jsx(vC,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),E.jsx(vC,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),E.jsx(vC,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function XAn({studyId:e,refresh:t}){const{storageEngine:n}=Oo();return E.jsx(Bl,{children:E.jsxs(hc,{multiple:!0,variant:"contained",children:[E.jsxs(hc.Item,{value:"ReVISit Modes",children:[E.jsx(hc.Control,{children:E.jsx(uo,{order:5,children:"ReVISit Modes"})}),E.jsx(hc.Panel,{children:E.jsx(KAn,{studyId:e})})]},"modes"),E.jsxs(hc.Item,{value:"Data Management",children:[E.jsx(hc.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:E.jsx(uo,{order:5,children:"Data Management"})}),E.jsx(hc.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&E.jsx(YAn,{studyId:e,refresh:t})})]},"dataManagement")]})})}function QAn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=dZ(!0),[o,a]=kf(),u=N.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=N.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=N.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return E.jsxs(DA,{p:"lg",withBorder:!0,ref:o,children:[E.jsxs(Jt,{direction:"row",justify:"space-between",onClick:s,children:[E.jsxs(Jt,{align:"center",children:[e.type==="metadata"&&E.jsx(Dpt,{size:20}),e.type==="numerical"&&E.jsx(Mpt,{size:20}),(e.type==="shortText"||e.type==="longText")&&E.jsx(Tpt,{size:20}),e.type==="likert"&&E.jsx(Rpt,{size:20}),e.type==="dropdown"&&E.jsx(qpt,{size:20}),e.type==="slider"&&E.jsx(bpt,{size:20}),e.type==="radio"&&E.jsx(Upt,{size:20}),e.type==="checkbox"&&E.jsx(Wpt,{size:20}),e.type==="iframe"&&E.jsx(Ppt,{size:20}),E.jsx(uo,{order:5,ml:4,children:e.id})]}),E.jsx(Spt,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),E.jsxs(AL,{in:i,mah:400,children:[E.jsx(Fe,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:E.jsx(FA,{})}),E.jsxs(Bee,{cols:2,h:360,children:[E.jsx(Kg,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?E.jsx(YEe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):E.jsxs(Jt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&E.jsx(hk,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&E.jsxs(E.Fragment,{children:[E.jsx(Ye,{fw:700,children:"Response Values: "}),u.map((f,d)=>E.jsx(Jt,{align:"center",gap:"xs",children:E.jsx(Ye,{children:f[e.id]})},d))]})]})}),E.jsx(Kg,{mih:200,children:e.type==="metadata"?E.jsx(YEe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):E.jsxs(E.Fragment,{children:[E.jsx(Ye,{fw:700,children:"Response Specification: "}),E.jsx(hk,{block:!0,children:JSON.stringify(e,null,2)}),E.jsx("br",{}),l&&E.jsxs(E.Fragment,{children:[E.jsx(Ye,{fw:700,children:"Correct Answer: "}),E.jsx(hk,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function JAn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&aHe(t.components[n],t),i=N.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?E.jsx(Jt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>E.jsx(QAn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):E.jsx(Jt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:E.jsx(Ye,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function ZAn({studyConfig:e,visibleParticipants:t}){const n=N.useMemo(()=>{let i=Pg(e.sequence);return i=Rte(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=V0();return E.jsx(DA,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?E.jsx(Jt,{justify:"center",align:"center",pt:"lg",pb:"md",children:E.jsx(Ye,{children:"No data available."})}):E.jsxs(Jt,{direction:"row",children:[E.jsx(Fe,{w:340,children:E.jsx($M,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),E.jsx(FA,{orientation:"vertical",mx:"md"}),E.jsx(JAn,{participantData:t,studyConfig:e,trialId:r})]})})}function eSn({xScale:e,answer:t,height:n,labelHeight:r=0}){return E.jsx("g",{children:E.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const $O=3,x2=25,MO=25,LO=20,lTe=1;function tSn({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=N.useState(!1),[l,{width:c}]=kf();return E.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[E.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+lTe,width:e(t.endTime)-e(t.startTime)-lTe*2,y:r-x2,height:x2}),E.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-$O,width:c+$O*2,y:r-x2-MO-o,height:LO,fill:"whitesmoke"}),E.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-$O,x2:c+e(t.startTime)+$O,y1:r-x2-MO+LO-o,y2:r-x2-MO+LO-o}),E.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-x2-MO-o,height:LO,children:E.jsx(ga,{style:{width:"fit-content"},children:E.jsx(Ye,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}const cTe=25,nSn=8,pW={left:20,top:0,right:20,bottom:0};function rSn({participantData:e,width:t,height:n,selectedTask:r,studyId:i}){const s=Cp(),o=N.useCallback(f=>{const d=f.split("_"),h=+d[d.length-1];s(`/${i}/${Lh(h)}?participantId=${e.participantId}`)},[s,e.participantId,i]),a=N.useMemo(()=>{const f=Object.values(e.answers||{}).filter(p=>p.startTime).map(p=>[p.startTime,p.endTime]).flat(),d=F3(f);return Ua([pW.left,t-pW.left-pW.right]).domain(d).clamp(!0)},[e,t]),u=N.useMemo(()=>{let f=0;const d=Object.entries(e.answers||{}).filter(h=>!!h[1].startTime).sort((h,p)=>h[1].startTime-p[1].startTime);return d.map((h,p)=>{const[m,g]=h,y=p>0?d[p-f-1]:null;return y&&y[0].length*nSn+a(y[1].startTime)>a(g.startTime)?f+=1:f=0,{line:E.jsx(eSn,{labelHeight:f*cTe,answer:g,height:n,xScale:a},m),label:E.jsx(tSn,{labelHeight:f*cTe,isSelected:r===m,setSelectedTask:o,answer:g,height:n,name:m,xScale:a},m)}})},[n,e.answers,r,o,a]),l=N.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const f=Object.values(e.answers).filter(d=>d.startTime).sort((d,h)=>d.startTime-h.startTime);return new Date(f[f.length-1].endTime-(f[0]?f[0].startTime:0)).getTime()},[e]),c=N.useMemo(()=>Object.entries(e.answers||{}).sort((d,h)=>d[1].startTime-h[1].startTime).map(d=>{const[h,p]=d,m=[];let g=[-1,-1],y="visible";if(p.windowEvents)for(let v=0;v<p.windowEvents.length;v+=1)p.windowEvents[v][1]==="visibility"&&(p.windowEvents[v][2]==="hidden"&&y==="visible"?(g=[p.windowEvents[v][0],-1],y="hidden"):p.windowEvents[v][2]==="visible"&&y==="hidden"&&(g[1]=p.windowEvents[v][0],m.push(g),g=[-1,-1],y="visible"));return m.map((v,b)=>E.jsx(ws,{withinPortal:!0,label:"Browsed away",children:E.jsx("rect",{x:a(v[0]),width:a(v[1])-a(v[0]),y:n-5,height:10})},b))}),[n,e,a]);return E.jsx(ga,{children:E.jsxs(os,{gap:25,style:{width:"100%"},children:[E.jsx(FA,{size:"md"}),E.jsxs(Mi,{justify:"center",children:[E.jsx(wb,{href:"",onClick:()=>s(`/${i}/${Lh(0)}?participantId=${e.participantId}`),children:e.participantId}),e.completed?null:E.jsx(Ye,{size:"xl",c:"red",children:"Not completed"}),E.jsx(Ye,{size:"xl",children:`${DQ(l)}`})]}),e.completed?E.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[u.map(f=>f.line),u.map(f=>f.label),c]}):null]})})}function iSn({visibleParticipants:e}){const{studyId:t}=V0(),[n,{width:r}]=kf();return E.jsx(os,{ref:n,style:{width:"100%"},children:e.map(i=>E.jsx(rSn,{studyId:t||"",height:200,participantData:i,width:r},i.participantId))})}function sSn({globalConfig:e}){const{studyId:t}=V0(),[n,r]=N.useState([]),[i,s]=N.useState(void 0),[o,a]=N.useState(!1),{storageEngine:u}=Oo(),l=Cp(),{tab:c}=V0(),{user:f}=XP();N.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const b=async x=>{if(x.data.type==="revisitWidget/CONFIG"&&u){const _=await fce(x.data.payload);s(_)}};return window.addEventListener("message",b),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",b)}}return dce(t,e).then(b=>{b&&s(b)}),()=>{}},[t,e,u]);const d=N.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const b=await u.getAllParticipantsData();r(b),a(!1)}},[u,t,i]);N.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=N.useState([]),[m,g,y]=N.useMemo(()=>{const b=n.filter(C=>!C.rejected&&C.completed),x=n.filter(C=>!C.rejected&&!C.completed),_=n.filter(C=>C.rejected);return p([...b,...x,..._]),[b,x,_]},[n]),v=N.useCallback(b=>{const x=[];b.includes("completed")&&x.push(...m),b.includes("inprogress")&&x.push(...g),b.includes("rejected")&&x.push(...y),p(x)},[m,g,y]);return E.jsxs(E.Fragment,{children:[E.jsx(JF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsxs(Bl,{fluid:!0,style:{height:"100%",position:"relative"},children:[E.jsx(Lf,{visible:o}),E.jsxs(Jt,{direction:"row",align:"center",justify:"space-between",children:[E.jsx(uo,{order:5,children:t}),E.jsxs(Jt,{direction:"row",align:"center",children:[E.jsx(Ye,{mt:-2,size:"sm",children:"Participants: "}),E.jsx(Tc.Group,{defaultValue:["completed","inprogress","rejected"],onChange:v,mb:"xs",mt:8,ml:"xs",children:E.jsxs(Mi,{children:[E.jsx(Tc,{value:"completed",label:"Completed"}),E.jsx(Tc,{value:"inprogress",label:"In Progress"}),E.jsx(Tc,{value:"rejected",label:"Rejected"})]})})]})]}),E.jsx(Ku,{h:"xs"}),E.jsxs(qr,{variant:"outline",value:c,onChange:b=>l(`/analysis/stats/${t}/${b}`),style:{height:"100%"},children:[E.jsxs(qr.List,{children:[E.jsx(qr.Tab,{value:"table",leftSection:E.jsx(Gpt,{size:16}),children:"Table View"}),E.jsx(qr.Tab,{value:"stats",leftSection:E.jsx(Apt,{size:16}),children:"Trial Stats"}),E.jsx(qr.Tab,{value:"replay",leftSection:E.jsx(jpt,{size:16}),children:"Participant Replay"}),E.jsx(qr.Tab,{value:"manage",leftSection:E.jsx(kke,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),E.jsx(qr.Panel,{value:"table",pt:"xs",children:i&&E.jsx(GAn,{visibleParticipants:h,studyConfig:i,refresh:d})}),E.jsx(qr.Panel,{value:"stats",pt:"xs",children:i&&E.jsx(ZAn,{studyConfig:i,visibleParticipants:h})}),E.jsx(qr.Panel,{value:"replay",pt:"xs",children:E.jsx(iSn,{visibleParticipants:h})}),E.jsx(qr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?E.jsx(XAn,{studyId:t,refresh:d}):E.jsx(Bl,{mt:20,children:E.jsx(Ng,{title:"Unauthorized Access",variant:"light",color:"red",icon:E.jsx(nte,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function fTe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=XP(),{storageEngine:o}=Oo(),[a,u]=N.useState(!1),l=V0();return N.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?E.jsx(Lf,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?E.jsx(ete,{to:"/login"}):E.jsx(E.Fragment,{children:e})}async function ZGe(e,t){if(e instanceof s0){t(!0);const n=new pg,r=QM();try{await Vwn(r,n,Kqe)}catch(i){dR({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function oSn(){const{user:e}=XP(),[t,n]=N.useState(!1),{storageEngine:r}=Oo();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&dR({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?E.jsx(ete,{to:"/"}):E.jsx(Bl,{children:E.jsx(OA,{padding:"lg",children:E.jsxs(Jt,{align:"center",direction:"column",justify:"center",children:[E.jsx(Eb,{maw:200,mt:50,mb:100,src:`${jl}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),E.jsxs(E.Fragment,{children:[E.jsx(Ye,{mb:20,children:"To access admin settings, please sign in using your Google account."}),E.jsx(bn,{onClick:()=>ZGe(r,n),leftSection:E.jsx(Ypt,{}),variant:"filled",children:"Sign In With Google"})]}),E.jsx(Lf,{visible:t})]})})})}function aSn(){const{user:e,triggerAuth:t}=XP(),{storageEngine:n}=Oo(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(!1),[y,v]=N.useState(""),[b,x]=N.useState(null),_=BRe({initialValues:{email:""},validate:{email:nEt("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof s0){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i((O==null?void 0:O.isEnabled)||!1);const B=await(n==null?void 0:n.getUserManagementData("adminUsers"));B&&B.adminUsersList&&o(B==null?void 0:B.adminUsersList.map(H=>H.email))}else i(!1);u(!1)})()},[n]);const C=async()=>{if(u(!0),n instanceof s0){const F=await ZGe(n,u);F&&F.email?(x({email:F.email,uid:F.uid}),p(!0)):g(!0)}u(!1)},T=async F=>{u(!0),n instanceof s0&&F&&(await n.changeAuth(!0),await n.addAdminUser(F),o([F.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof s0){await n.addAdminUser({email:_.values.email,uid:null});const F=await n.getUserManagementData("adminUsers");o((F==null?void 0:F.adminUsersList.map(O=>O.email))||[])}u(!1),c(!1),_.setValues({email:""})},k=F=>{d(!0),v(F)},I=async()=>{if(u(!0),n instanceof s0){await n.removeAdminUser(y);const F=await n.getUserManagementData("adminUsers");o((F==null?void 0:F.adminUsersList.map(O=>O.email))||[])}d(!1),u(!1)},R=N.useMemo(()=>n instanceof s0,[n]);return E.jsxs(E.Fragment,{children:[E.jsx(Bl,{children:E.jsxs(OA,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[E.jsx(uo,{mb:20,order:3,children:"Authentication"}),r?E.jsx(Jt,{children:E.jsx(Ye,{children:"Authentication is enabled."})}):E.jsxs(Jt,{justify:"space-between",children:[E.jsx(Fe,{children:E.jsx(Ye,{children:"Authentication is currently disabled."})}),E.jsx(ws,{label:"You can only enable auth when using Firebase",disabled:R,children:E.jsx(bn,{onClick:F=>R?C():F.preventDefault(),color:"green","data-disabled":R?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?E.jsxs(Jt,{mt:40,direction:"column",children:[E.jsxs(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[E.jsx(uo,{order:6,children:"Enabled Users"}),E.jsx(rte,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(F=>{var O;return E.jsxs(Jt,{justify:"space-between",mb:10,children:[E.jsx(Ye,{children:F}),F===((O=e.user)==null?void 0:O.email)?E.jsx(Ye,{color:"blue",size:"xs",children:"You"}):E.jsx($_,{variant:"subtle",onClick:()=>k(F),children:E.jsx(Nke,{color:"red"})})]},F)}):null]}):null]})}),E.jsx(fo,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:E.jsxs(Fe,{component:"form",onSubmit:_.onSubmit(()=>S()),children:[E.jsx(bg,{leftSection:E.jsx(_pt,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),E.jsxs(Jt,{mt:30,justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),E.jsx(bn,{type:"submit",children:"Save"})]})]})}),E.jsxs(fo,{opened:f,size:"large",onClose:()=>d(!1),title:E.jsxs(Ye,{fw:700,children:["Remove",y,"?"]}),children:[E.jsxs(Ye,{mt:40,children:["Are you sure you want to remove",E.jsx("b",{children:y})," ","as an administrator?"]}),E.jsxs(Jt,{mt:40,justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),E.jsx(bn,{onClick:()=>I(),children:"Yes, I'm sure."})]})]}),E.jsxs(fo,{opened:h,size:"md",onClose:()=>p(!1),title:E.jsx(Ye,{fw:700,children:"Enable Authentication?"}),children:[E.jsxs(Ye,{mt:40,children:["User"," ",E.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),E.jsxs(Jt,{mt:40,justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),E.jsx(bn,{onClick:()=>T(b),children:"Yes, I'm sure."})]})]}),E.jsxs(fo,{opened:m,size:"md",onClose:()=>g(!1),title:E.jsx(Ye,{fw:700,children:"An Error Occurred."}),children:[E.jsxs(Ye,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",E.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),E.jsx(Jt,{mt:40,justify:"right",children:E.jsx(bn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),E.jsx(Lf,{visible:a})]})}class uSn extends QGe{constructor(){super("localStorage");gl(this,"studyDatabase");gl(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await F2.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await sL(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await sL(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await F2.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=iL();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=F2.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=iL();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await F2.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await F2.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function lSn(){let e;{const t=new uSn;await t.connect(),e=t}return e}function lI({title:e}){const t=Cb();return N.useEffect(()=>{document.title=e},[t,e]),null}async function cSn(){const t=await(await fetch(`${jl}global.json`)).text();return Yvn(t)}function fSn(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function a(){e&&r(await Qvn(e))}a()},[e]),N.useEffect(()=>{e||cSn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Oo();N.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await lSn();s(u)}a()},[s,i]);const o=async a=>i instanceof s0?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?E.jsx(fpt,{basename:jl,children:E.jsx(HAn,{children:E.jsx(ypt,{children:E.jsxs(apt,{children:[E.jsx(kx,{path:"/",element:E.jsxs(E.Fragment,{children:[E.jsx(lI,{title:"ReVISit | Home"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(JF,{studyIds:e.configsList}),E.jsx(Fxt,{globalConfig:e,studyConfigs:n})]})]})}),E.jsx(kx,{path:"/:studyId/*",element:E.jsxs(E.Fragment,{children:[E.jsx(lI,{title:"ReVISit | Study"}),E.jsx(Jvn,{globalConfig:e})]})}),E.jsx(kx,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:E.jsxs(E.Fragment,{children:[E.jsx(lI,{title:"ReVISit | Analysis"}),E.jsx(fTe,{paramToCheck:"studyId",paramCallback:o,children:E.jsx(Yi,{padding:"md",header:{height:70},children:E.jsx(sSn,{globalConfig:e})})})]})}),E.jsx(kx,{path:"/analysis/stats/:studyId",element:E.jsx(rHe,{to:"./table",replace:!0})}),E.jsx(kx,{path:"/settings",element:E.jsxs(fTe,{children:[E.jsx(lI,{title:"ReVISit | Settings"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(JF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsx(aSn,{})})]})]})}),E.jsx(kx,{path:"/login",element:E.jsxs(E.Fragment,{children:[E.jsx(lI,{title:"ReVISit | Login"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(JF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsx(oSn,{})})]})]})})]})})})}):null}mW.createRoot(document.getElementById("root")).render(E.jsx(vi.StrictMode,{children:E.jsx(yht,{children:E.jsxs(GSe,{children:[E.jsx(Ay,{}),E.jsx(fSn,{})]})})}))});export default dSn();
